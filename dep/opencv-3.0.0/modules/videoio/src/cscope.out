cscope 15 $HOME/opencv-3.0.0/modules/videoio/src               0001570241
	@agile_wrl.hpp

9 #iâdeà
_PLATFORM_AGILE_H_


10 
	#_PLATFORM_AGILE_H_


	)

12 #ifdeà
_MSC_VER


13 #´agm¨
Úû


16 
	~<®gÜ™hm
>

17 
	~<w¾\ş›Á.h
>

19 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
boŞ
 
	gTIsNÙAge
> 
şass
 
	gAge
;

21 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

22 
	sUnw¿pAge


24 cÚ¡ 
boŞ
 
	m_IsAge
 = 
çl£
;

26 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

27 
	gUnw¿pAge
<
	gAge
<
	gT
, 
	gçl£
>>

29 cÚ¡ 
boŞ
 
	g_IsAge
 = 
Œue
;

31 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

32 
	gUnw¿pAge
<
	gAge
<
	gT
, 
	gŒue
>>

34 cÚ¡ 
boŞ
 
	g_IsAge
 = 
Œue
;

37 
	#IS_AGILE
(
T
è
Unw¿pAge
<T>::
_IsAge


	)

39 
	#__is_wš¹_age
(
T
è(
¡d
::
is_§me
<T, 
HSTRING__
>::
v®ue
 || std::
is_ba£_of
<
Miüosoá
::
WRL
::
FtmBa£
, T>::v®u|| std::is_ba£_of<
IAgeObjeù
, T>::value)

40 

	)

41 
	#__is_wš_š‹rçû
(
T
è(
¡d
::
is_ba£_of
<
IUnknown
, T>::
v®ue
 || std::is_ba£_of<
IIn¥eùabË
, T>::value)

42 

	)

43 
	#__is_wš_şass
(
T
è(
¡d
::
is_§me
<T, 
HSTRING__
>::
v®ue
 || std::
is_ba£_of
<
Miüosoá
::
WRL
::
D‘as
::
RuÁimeCÏssBa£
, T>::value)

44 

	)

45 
Çme¥aû
 
	gD‘as


47 
IUnknown
* 
__¡dÿÎ
 
G‘ObjeùCÚ‹xt
();

48 
HRESULT
 
__¡dÿÎ
 
G‘ProxyIm¶
(
IUnknown
*, 
REFIID
, IUnknown*, IUnknown**);

49 
HRESULT
 
__¡dÿÎ
 
R–—£InCÚ‹xtIm¶
(
IUnknown
*, IUnknown*);

51 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

52 #ià
_MSC_VER
 >= 1800

53 
__deş¥ec
(
no_»fcouÁ
è
šlše
 
HRESULT
 
G‘Proxy
(
T
 *
ObjeùIn
, 
IUnknown
 *
CÚ‹xtC®lBack
, T **
Proxy
)

55 
šlše
 
HRESULT
 
G‘Proxy
(
T
 *
ObjeùIn
, 
IUnknown
 *
CÚ‹xtC®lBack
, T **
Proxy
)

58 #ià
_MSC_VER
 >= 1800

59  
G‘ProxyIm¶
(*
»š‹½»t_ÿ¡
<
IUnknown
**>(&
ObjeùIn
), 
__uuidof
(
T
*), 
CÚ‹xtC®lBack
,„eš‹½»t_ÿ¡<IUnknown**>(
Proxy
));

61  
G‘ProxyIm¶
(*
»š‹½»t_ÿ¡
<
IUnknown
**>(&
cÚ¡_ÿ¡
<
T
*>(
ObjeùIn
)), 
__uuidof
(T*), 
CÚ‹xtC®lBack
,„eš‹½»t_ÿ¡<IUnknown**>(
Proxy
));

65 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

66 
šlše
 
HRESULT
 
R–—£InCÚ‹xt
(
T
 *
ObjeùIn
, 
IUnknown
 *
CÚ‹xtC®lBack
)

68  
R–—£InCÚ‹xtIm¶
(
ObjeùIn
, 
CÚ‹xtC®lBack
);

71 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

72 şas 
	cAgeH–³r


74 
__abi_IUnknown
* 
	g_p
;

75 
boŞ
 
	g_»Ëa£
;

76 
	gpublic
:

77 
AgeH–³r
(
__abi_IUnknown
* 
p
, 
boŞ
 
»Ëa£
 = 
Œue
è: 
_p
Õ), 
_»Ëa£
(release)

80 
AgeH–³r
(AgeH–³r&& 
Ùh”
è: 
_p
(Ùh”._p), 
_»Ëa£
(other._release)

82 
	g_Ùh”
.
	g_p
 = 
nuÎ±r
;

83 
	g_Ùh”
.
	g_»Ëa£
 = 
Œue
;

85 
AgeH–³r
 
	gİ”©Ü
=(AgeH–³r&& 
Ùh”
)

87 
_p
 = 
Ùh”
._p;

88 
	g_»Ëa£
 = 
Ùh”
.
_»Ëa£
;

89 
	g_Ùh”
.
	g_p
 = 
nuÎ±r
;

90 
	g_Ùh”
.
	g_»Ëa£
 = 
Œue
;

91  *
	gthis
;

94 ~
AgeH–³r
()

96 ià(
	g_»Ëa£
 && 
	g_p
)

98 
	g_p
->
__abi_R–—£
();

102 
__deş¥ec
(
no_»fcouÁ
è__deş¥ec(
no_»Ëa£_»tuº
)

103 
T
* 
	gİ”©Ü
->()

105  
	g»š‹½»t_ÿ¡
<
	gT
*>(
	g_p
);

108 
__deş¥ec
(
no_»fcouÁ
è__deş¥ec(
no_»Ëa£_»tuº
)

109 
İ”©Ü
 
	gT
 * ()

111  
	g»š‹½»t_ÿ¡
<
	gT
*>(
	g_p
);

113 
	g´iv©e
:

114 
AgeH–³r
(const AgileHelper&);

115 
AgeH–³r
 
	gİ”©Ü
=(const AgileHelper&);

117 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

118 
	s__»move_h©


120 
T
 
	tty³
;

122 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

123 
	g__»move_h©
<
	gT
*>

125 
T
 
	tty³
;

127 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

128 
	sAgeTy³H–³r


130 
ty³Çme
 
	g__»move_h©
<
	tT
>::
	tty³
ype;

131 
ty³Çme
 
	g__»move_h©
<
	tT
>::
	tty³
* 
	tageMemb”Ty³
;

135 #´agm¨
w¬nšg
(
push
)

136 #´agm¨
w¬nšg
(
di§bË
: 4451)

138 
	g‹m¶©e
 <

139 
ty³Çme
 
	gT
,

140 
boŞ
 
	gTIsNÙAge
 = (
__is_wš_şass
(
ty³Çme
 
D‘as
::
AgeTy³H–³r
<
T
>::
ty³
è&& !
__is_wš¹_age
(typename Details::AgileTypeHelper<T>::type)) ||

141 
__is_wš_š‹rçû
(
ty³Çme
 
D‘as
::
AgeTy³H–³r
<
T
>::
ty³
)

143 şas 
	cAge


145 
¡©ic_as£¹
(
__is_wš_şass
(
ty³Çme
 
D‘as
::
AgeTy³H–³r
<
T
>::
ty³
è|| 
__is_wš_š‹rçû
(typename Details::AgileTypeHelper<T>::type), "Agile can only be used with„ef class or interface classypes");

146 
ty³Çme
 
	mD‘as
::
	tAgeTy³H–³r
<
	tT
>::
	tageMemb”Ty³
 
	tTy³T
;

147 
Ty³T
 
	m_objeù
;

148 ::
Miüosoá
::
WRL
::
ComPŒ
<
IUnknown
> 
_cÚ‹xtC®lback
;

149 
ULONG_PTR
 
	m_cÚ‹xtTok’
;

151 #ià
_MSC_VER
 >= 1800

152 şas 
	cAgeS‹


154 
	mNÚAgePoš‹r
 = 0,

155 
	mAgePoš‹r
 = 1,

156 
	mUnknown
 = 2

158 
AgeS‹
 
	g_ageS‹
;

161 
	$C­tu»CÚ‹xt
()

163 
_cÚ‹xtC®lback
 = 
D‘as
::
	`G‘ObjeùCÚ‹xt
();

164 
	`__abi_ThrowIfFaed
(
	`CoG‘CÚ‹xtTok’
(&
_cÚ‹xtTok’
));

165 
	}
}

167 
	$S‘Objeù
(
Ty³T
 
objeù
)

171 
	`R–—£
();

172 ià(
objeù
 !ğ
nuÎ±r
)

174 ::
Miüosoá
::
WRL
::
ComPŒ
<
IAgeObjeù
> 
checkIfAge
;

175 
HRESULT
 
hr
 = 
»š‹½»t_ÿ¡
<
IUnknown
*>(
objeù
)->
	`Qu”yIÁ”çû
(
	`__uuidof
(
IAgeObjeù
), &
checkIfAge
);

177 ià(
hr
 !ğ
S_OK
)

179 #ià
_MSC_VER
 >= 1800

180 
_ageS‹
 = 
AgeS‹
::
NÚAgePoš‹r
;

182 
	`C­tu»CÚ‹xt
();

184 #ià
_MSC_VER
 >= 1800

187 
_ageS‹
 = 
AgeS‹
::
AgePoš‹r
;

191 
_objeù
 = 
objeù
;

192 
	}
}

194 
	gpublic
:

195 
	$Age
(è
	$throw
(è: 
	`_objeù
(
nuÎ±r
), 
	$_cÚ‹xtTok’
(0)

196 #ià
_MSC_VER
 >= 1800

197 , 
	`_ageS‹
(
AgeS‹
::
Unknown
)

200 
	}
}

202 
	$Age
(
nuÎ±r_t
è
	$throw
(è: 
	`_objeù
(
nuÎ±r
), 
	$_cÚ‹xtTok’
(0)

203 #ià
_MSC_VER
 >= 1800

204 , 
	`_ageS‹
(
AgeS‹
::
Unknown
)

207 
	}
}

209 
ex¶ic™
 
	$Age
(
Ty³T
 
objeù
è
	$throw
(è: 
	`_objeù
(
nuÎ±r
), 
	$_cÚ‹xtTok’
(0)

210 #ià
_MSC_VER
 >= 1800

211 , 
	`_ageS‹
(
AgeS‹
::
Unknown
)

215 
	`S‘Objeù
(
objeù
);

216 
	}
}

218 
	$Age
(cÚ¡ 
Age
& 
objeù
è
	$throw
(è: 
	`_objeù
(
nuÎ±r
), 
	$_cÚ‹xtTok’
(0)

219 #ià
_MSC_VER
 >= 1800

220 , 
	`_ageS‹
(
AgeS‹
::
Unknown
)

224 
	`S‘Objeù
(
objeù
.
	`G‘
());

225 
	}
}

227 
	$Age
(
Age
&& 
objeù
è
	$throw
(è: 
	`_objeù
(
nuÎ±r
), 
	$_cÚ‹xtTok’
(0)

228 #ià
_MSC_VER
 >= 1800

229 , 
	`_ageS‹
(
AgeS‹
::
Unknown
)

233 
	`Sw­
(
objeù
);

234 
	}
}

236 ~
	$Age
(è
	$throw
()

238 
	`R–—£
();

239 
	}
}

241 
Ty³T
 
	$G‘
() const

244 #ià
_MSC_VER
 >= 1800

245 ià(
_ageS‹
 =ğ
AgeS‹
::
AgePoš‹r
 || 
_objeù
 =ğ
nuÎ±r
)

247 ià(
_cÚ‹xtTok’
 =ğ0 || 
_cÚ‹xtC®lback
 =ğ
nuÎ±r
 || 
_objeù
 ==‚ullptr)

250  
_objeù
;

254 
ULONG_PTR
 
cu¼’tCÚ‹xtTok’
;

255 
	`__abi_ThrowIfFaed
(
	`CoG‘CÚ‹xtTok’
(&
cu¼’tCÚ‹xtTok’
));

256 ià(
cu¼’tCÚ‹xtTok’
 =ğ
_cÚ‹xtTok’
)

258  
_objeù
;

261 #ià
_MSC_VER
 >= 1800

264 
Ty³T
 
loÿlObjeù
;

265 
	`__abi_ThrowIfFaed
(
D‘as
::
	`G‘Proxy
(
_objeù
, 
_cÚ‹xtC®lback
.
	`G‘
(), &
loÿlObjeù
));

267 ià(
_ageS‹
 =ğ
AgeS‹
::
Unknown
)

271 ià(
_objeù
 !ğ
nuÎ±r
)

274 #ià
_MSC_VER
 >= 1800

277 ::
Miüosoá
::
WRL
::
ComPŒ
<
IAgeObjeù
> 
checkIfAge
;

278 
HRESULT
 
hr
 = 
»š‹½»t_ÿ¡
<
IUnknown
*>(
loÿlObjeù
)->
	`Qu”yIÁ”çû
(
	`__uuidof
(
IAgeObjeù
), &
checkIfAge
);

280 ::
Miüosoá
::
WRL
::
ComPŒ
<
IAgeObjeù
> 
checkIfAge
;

281 
HRESULT
 
hr
 = 
»š‹½»t_ÿ¡
<
IUnknown
*>(
_objeù
)->
	`Qu”yIÁ”çû
(
	`__uuidof
(
IAgeObjeù
), &
checkIfAge
);

283 ià(
hr
 =ğ
S_OK
)

285 autØ
pThis
 = 
cÚ¡_ÿ¡
<
Age
*>(
this
);

286 #ià
_MSC_VER
 >= 1800

287 
pThis
->
_ageS‹
 = 
AgeS‹
::
AgePoš‹r
;

289 
pThis
->
_cÚ‹xtTok’
 = 0;

290 
pThis
->
_cÚ‹xtC®lback
 = 
nuÎ±r
;

291  
_objeù
;

293 #ià
_MSC_VER
 >= 1800

296 autØ
pThis
 = 
cÚ¡_ÿ¡
<
Age
*>(
this
);

297 
pThis
->
_ageS‹
 = 
AgeS‹
::
NÚAgePoš‹r
;

302 #ià
_MSC_VER
 < 1800

305 
Ty³T
 
loÿlObjeù
;

306 
	`__abi_ThrowIfFaed
(
D‘as
::
	`G‘Proxy
(
_objeù
, 
_cÚ‹xtC®lback
.
	`G‘
(), &
loÿlObjeù
));

308  
loÿlObjeù
;

309 
	}
}

311 
Ty³T
* 
	$G‘Add»ssOf
(è
	$throw
()

313 
	`R–—£
();

314 
	`C­tu»CÚ‹xt
();

315  &
_objeù
;

316 
	}
}

318 
Ty³T
* 
	$G‘Add»ssOfFÜInOut
(è
	$throw
()

320 
	`C­tu»CÚ‹xt
();

321  &
_objeù
;

322 
	}
}

324 
Ty³T
 
	gİ”©Ü
->(ècÚ¡ 
	$throw
()

326  
	`G‘
();

327 
	}
}

329 
	gAge
& 
	gİ”©Ü
=(
nuÎ±r_t
è
	$throw
()

331 
	`R–—£
();

332  *
this
;

333 
	}
}

335 
	gAge
& 
	gİ”©Ü
=(
Ty³T
 
objeù
è
	$throw
()

337 
	`Age
(
objeù
).
	`Sw­
(*
this
);

338  *
this
;

339 
	}
}

341 
	gAge
& 
	gİ”©Ü
=(
Age
 
objeù
è
	$throw
()

344 
objeù
.
	`Sw­
(*
this
);

345  *
this
;

346 
	}
}

348 #ià
_MSC_VER
 < 1800

349 
	gAge
& 
	gİ”©Ü
=(
IUnknown
* 
Í
è
	$throw
()

352 ::
Miüosoá
::
WRL
::
ComPŒ
<
IUnknown
> 
	`¥Objeù
(
Í
);

355 
PÏtfÜm
::
Objeù
 
objeù
;

356 *(
IUnknown
**)(&
objeù
èğ
¥Objeù
.
	`D‘ach
();

358 
	`S‘Objeù
(
objeù
);

359  *
this
;

360 
	}
}

363 
	$Sw­
(
Age
& 
objeù
)

365 
¡d
::
	`sw­
(
_objeù
, 
objeù
._object);

366 
¡d
::
	`sw­
(
_cÚ‹xtC®lback
, 
objeù
._contextCallback);

367 
¡d
::
	`sw­
(
_cÚ‹xtTok’
, 
objeù
._contextToken);

368 #ià
_MSC_VER
 >= 1800

369 
¡d
::
	`sw­
(
_ageS‹
, 
objeù
._agileState);

371 
	}
}

374 
	$R–—£
(è
	$throw
()

376 ià(
_objeù
)

379 
IUnknown
* 
pObjeù
 = *(IUnknown**)(&
_objeù
);

381 *(
IUnknown
**)(&
_objeù
èğ
nuÎ±r
;

383 
ULONG_PTR
 
cu¼’tCÚ‹xtTok’
;

384 
	`__abi_ThrowIfFaed
(
	`CoG‘CÚ‹xtTok’
(&
cu¼’tCÚ‹xtTok’
));

385 ià(
_cÚ‹xtTok’
 =ğ0 || 
_cÚ‹xtC®lback
 =ğ
nuÎ±r
 || _cÚ‹xtTok’ =ğ
cu¼’tCÚ‹xtTok’
)

387 
pObjeù
->
	`R–—£
();

391 
D‘as
::
	`R–—£InCÚ‹xt
(
pObjeù
, 
_cÚ‹xtC®lback
.
	`G‘
());

393 
_cÚ‹xtC®lback
 = 
nuÎ±r
;

394 
_cÚ‹xtTok’
 = 0;

395 #ià
_MSC_VER
 >= 1800

396 
_ageS‹
 = 
AgeS‹
::
Unknown
;

399 
	}
}

401 
boŞ
 
	gİ”©Ü
==(
nuÎ±r_t
ècÚ¡ 
	$throw
()

403  
_objeù
 =ğ
nuÎ±r
;

404 
	}
}

406 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Age
& 
Ùh”
ècÚ¡ 
	$throw
()

408  
_objeù
 =ğ
Ùh”
._objeù && 
_cÚ‹xtTok’
 == other._contextToken;

409 
	}
}

411 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gAge
& 
	gÙh”
ècÚ¡ 
	$throw
()

413 ià(
»š‹½»t_ÿ¡
<*>(
_objeù
è<„eš‹½»t_ÿ¡<*>(
Ùh”
._object))

415  
Œue
;

418  
_objeù
 =ğ
Ùh”
._objeù && 
_cÚ‹xtTok’
 < other._contextToken;

419 
	}
}

422 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

423 
şass
 
	gAge
<
	gT
, 
	gçl£
>

425 
¡©ic_as£¹
(
__is_wš_şass
(
ty³Çme
 
D‘as
::
AgeTy³H–³r
<
T
>::
ty³
è|| 
__is_wš_š‹rçû
(typename Details::AgileTypeHelper<T>::type), "Agile can only be used with„ef class or interface classypes");

426 
ty³Çme
 
	gD‘as
::
	tAgeTy³H–³r
<
	tT
>::
	tageMemb”Ty³
 
	tTy³T
;

427 
Ty³T
 
	g_objeù
;

429 
	gpublic
:

430 
Age
(è
throw
(è: 
_objeù
(
nuÎ±r
)

434 
Age
(
nuÎ±r_t
è
throw
(è: 
_objeù
(
nuÎ±r
)

438 
ex¶ic™
 
Age
(
Ty³T
 
objeù
è
throw
(è: 
_objeù
(object)

442 
Age
(cÚ¡ Age& 
objeù
è
throw
(è: 
_objeù
(object._object)

446 
Age
(Age&& 
objeù
è
throw
(è: 
_objeù
(
nuÎ±r
)

448 
Sw­
(
objeù
);

451 ~
Age
(è
throw
()

453 
R–—£
();

456 
Ty³T
 
G‘
() const

458  
	g_objeù
;

461 
Ty³T
* 
G‘Add»ssOf
(è
throw
()

463 
R–—£
();

464  &
	g_objeù
;

467 
Ty³T
* 
G‘Add»ssOfFÜInOut
(è
throw
()

469  &
	g_objeù
;

472 
Ty³T
 
	gİ”©Ü
->(ècÚ¡ 
throw
()

474  
G‘
();

477 
	gAge
& 
	gİ”©Ü
=(
nuÎ±r_t
è
throw
()

479 
R–—£
();

480  *
	gthis
;

483 
	gAge
& 
	gİ”©Ü
=(
Ty³T
 
objeù
è
throw
()

485 ià(
_objeù
 !ğ
objeù
)

487 
_objeù
 = 
objeù
;

489  *
	gthis
;

492 
	gAge
& 
	gİ”©Ü
=(
Age
 
objeù
è
throw
()

494 
objeù
.
Sw­
(*
this
);

495  *
	gthis
;

498 #ià
_MSC_VER
 < 1800

499 
	gAge
& 
	gİ”©Ü
=(
IUnknown
* 
Í
è
throw
()

501 
R–—£
();

503 ::
Miüosoá
::
WRL
::
ComPŒ
<
IUnknown
> 
¥Objeù
(
Í
);

506 
	gPÏtfÜm
::
Objeù
 
objeù
;

507 *(
	gIUnknown
**)(&
	gobjeù
èğ
¥Objeù
.
D‘ach
();

509 
	g_objeù
 = 
objeù
;

510  *
	gthis
;

515 
R–—£
(è
throw
()

517 
	g_objeù
 = 
nuÎ±r
;

520 
Sw­
(
Age
& 
objeù
)

522 
	g¡d
::
sw­
(
_objeù
, 
objeù
._object);

525 
boŞ
 
	gİ”©Ü
==(
nuÎ±r_t
ècÚ¡ 
throw
()

527  
_objeù
 =ğ
nuÎ±r
;

530 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Age
& 
Ùh”
ècÚ¡ 
throw
()

532  
_objeù
 =ğ
Ùh”
._object;

535 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gAge
& 
	gÙh”
ècÚ¡ 
throw
()

537  
	g»š‹½»t_ÿ¡
<*>(
	g_objeù
è<„eš‹½»t_ÿ¡<*>(
	gÙh”
._object);

541 #´agm¨
w¬nšg
(
pİ
)

543 
	g‹m¶©e
<
şass
 
	gU
>

544 
boŞ
 
	gİ”©Ü
==(
nuÎ±r_t
, cÚ¡ 
	gAge
<
	gU
>& 
	ga
è
	$throw
()

546  
a
 =ğ
nuÎ±r
;

547 
	}
}

549 
	g‹m¶©e
<
şass
 
	gU
>

550 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
Age
<
U
>& 
a
, 
	gnuÎ±r_t
è
	$throw
()

552  !(
a
 =ğ
nuÎ±r
);

553 
	}
}

555 
	g‹m¶©e
<
şass
 
	gU
>

556 
boŞ
 
	gİ”©Ü
!=(
nuÎ±r_t
, cÚ¡ 
	gAge
<
	gU
>& 
	ga
è
	$throw
()

558  !(
a
 =ğ
nuÎ±r
);

559 
	}
}

561 
	g‹m¶©e
<
şass
 
	gU
>

562 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
Age
<
U
>& 
a
, cÚ¡ 
	gAge
<
	gU
>& 
	gb
è
	$throw
()

564  !(
a
 =ğ
b
);

565 
	}
}

	@cap.cpp

42 
	~"´ecomp.hµ
"

43 
	~"ÿp_š‹Í”c.hµ
"

44 
	~"ÿp_dshow.hµ
"

47 #ià
defšed
(
WINRT
è&& !defšed(
WINRT_8_0
)

48 
	~"ÿp_wš¹_ÿ±u».hµ
"

49 
	~"ÿp_wš¹_bridge.hµ
"

50 
	#WINRT_VIDEO


	)

53 #ià
defšed
 
_M_X64
 && defšed 
_MSC_VER
 && !defšed 
CV_ICC


54 #´agm¨
İtimize
("",
off
)

55 #´agm¨
w¬nšg
(
di§bË
: 4748)

58 
Çme¥aû
 
	gcv


61 
	g‹m¶©e
<> 
	gDeçuÉD–‘”
<
	gCvC­tu»
>::
İ”©Ü
 ()(
CvC­tu»
* 
obj
) const

62 { 
cvR–—£C­tu»
(&
obj
); }

64 
	g‹m¶©e
<> 
	gDeçuÉD–‘”
<
	gCvVideoWr™”
>::
İ”©Ü
 ()(
CvVideoWr™”
* 
obj
) const

65 { 
cvR–—£VideoWr™”
(&
obj
); }

71 
šlše
 
	$icvG‘C­tu»Prİ”ty
ĞcÚ¡ 
CvC­tu»
* 
ÿ±u»
, 
id
 )

73  
ÿ±u»
 ? c­tu»->
	`g‘Prİ”ty
(
id
) : 0;

74 
	}
}

76 
CV_IMPL
 
	$cvR–—£C­tu»
Ğ
CvC­tu»
** 
pÿ±u»
 )

78 ifĞ
pÿ±u»
 && *pcapture )

80 
d–‘e
 *
pÿ±u»
;

81 *
pÿ±u»
 = 0;

83 
	}
}

85 
CV_IMPL
 
I¶Image
* 
	$cvQu”yF¿me
Ğ
CvC­tu»
* 
ÿ±u»
 )

87 if(!
ÿ±u»
)

89 if(!
ÿ±u»
->
	`g¿bF¿me
())

91  
ÿ±u»
->
	`»Œ›veF¿me
(0);

92 
	}
}

95 
CV_IMPL
 
	$cvG¿bF¿me
Ğ
CvC­tu»
* 
ÿ±u»
 )

97  
ÿ±u»
 ? c­tu»->
	`g¿bF¿me
() : 0;

98 
	}
}

100 
CV_IMPL
 
I¶Image
* 
	$cvR‘r›veF¿me
Ğ
CvC­tu»
* 
ÿ±u»
, 
idx
 )

102  
ÿ±u»
 ? c­tu»->
	`»Œ›veF¿me
(
idx
) : 0;

103 
	}
}

105 
CV_IMPL
 
	$cvG‘C­tu»Prİ”ty
Ğ
CvC­tu»
* 
ÿ±u»
, 
id
 )

107  
	`icvG‘C­tu»Prİ”ty
(
ÿ±u»
, 
id
);

108 
	}
}

110 
CV_IMPL
 
	$cvS‘C­tu»Prİ”ty
Ğ
CvC­tu»
* 
ÿ±u»
, 
id
, 
v®ue
 )

112  
ÿ±u»
 ? c­tu»->
	`£tPrİ”ty
(
id
, 
v®ue
) : 0;

113 
	}
}

115 
CV_IMPL
 
	$cvG‘C­tu»Domaš
Ğ
CvC­tu»
* 
ÿ±u»
)

117  
ÿ±u»
 ? c­tu»->
	`g‘C­tu»Domaš
() : 0;

118 
	}
}

127 
CV_IMPL
 
CvC­tu»
 * 
	$cvC»©eCam”aC­tu»
 (
šdex
)

129 
domašs
[] =

131 #ifdeà
HAVE_MSMF


132 
CV_CAP_MSMF
,

135 
CV_CAP_IEEE1394
,

137 #ifdeà
HAVE_TYZX


138 
CV_CAP_STEREO
,

140 #ifdeà
HAVE_PVAPI


141 
CV_CAP_PVAPI
,

144 
CV_CAP_VFW
,

146 #ifdeà
HAVE_MIL


147 
CV_CAP_MIL
,

149 #ià
	`defšed
(
HAVE_QUICKTIME
è|| defšed(
HAVE_QTKIT
)

150 
CV_CAP_QT
,

152 #ifdeà
HAVE_UNICAP


153 
CV_CAP_UNICAP
,

155 #ifdeà
HAVE_OPENNI


156 
CV_CAP_OPENNI
,

158 #ifdeà
HAVE_OPENNI2


159 
CV_CAP_OPENNI2
,

161 #ifdeà
HAVE_XIMEA


162 
CV_CAP_XIAPI
,

164 #ifdeà
HAVE_AVFOUNDATION


165 
CV_CAP_AVFOUNDATION
,

167 #ifdeà
HAVE_GIGE_API


168 
CV_CAP_GIGANETIX
,

170 #ifdeà
HAVE_INTELPERC


171 
CV_CAP_INTELPERC
,

177 
´ef
 = (
šdex
 / 100) * 100;

178 ià(
´ef
)

180 
domašs
[0]=
´ef
;

181 
šdex
 %= 100;

182 
domašs
[1]=-1;

186 
i
 = 0; 
domašs
[i] >= 0; i++)

188 #ià
	`defšed
(
HAVE_MSMF
) || \

189 
	`defšed
(
HAVE_TYZX
) || \

190 
	`defšed
(
HAVE_VFW
) || \

191 
	`defšed
(
HAVE_LIBV4L
) || \

192 
	`defšed
(
HAVE_CAMV4L
) || \

193 
	`defšed
(
HAVE_CAMV4L2
) || \

194 
	`defšed
(
HAVE_VIDEOIO
) || \

195 
	`defšed
(
HAVE_GSTREAMER
) || \

196 
	`defšed
(
HAVE_DC1394_2
) || \

197 
	`defšed
(
HAVE_DC1394
) || \

198 
	`defšed
(
HAVE_CMU1394
) || \

199 
	`defšed
(
HAVE_MIL
) || \

200 
	`defšed
(
HAVE_QUICKTIME
) || \

201 
	`defšed
(
HAVE_QTKIT
) || \

202 
	`defšed
(
HAVE_UNICAP
) || \

203 
	`defšed
(
HAVE_PVAPI
) || \

204 
	`defšed
(
HAVE_OPENNI
) || \

205 
	`defšed
(
HAVE_OPENNI2
) || \

206 
	`defšed
(
HAVE_XIMEA
) || \

207 
	`defšed
(
HAVE_AVFOUNDATION
) || \

208 
	`defšed
(
HAVE_GIGE_API
) || \

209 
	`defšed
(
HAVE_INTELPERC
) || \

212 
CvC­tu»
 *
ÿ±u»
;

215 
domašs
[
i
])

217 #ifdeà
HAVE_MSMF


218 
CV_CAP_MSMF
:

219 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_MSMF
 (
šdex
);

220 ià(
ÿ±u»
)

221  
ÿ±u»
;

224 #ifdeà
HAVE_TYZX


225 
CV_CAP_STEREO
:

226 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_TYZX
 (
šdex
);

227 ià(
ÿ±u»
)

228  
ÿ±u»
;

231 
CV_CAP_VFW
:

232 #ifdeà
HAVE_VFW


233 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_VFW
 (
šdex
);

234 ià(
ÿ±u»
)

235  
ÿ±u»
;

237 #ià
defšed
 
HAVE_LIBV4L
 || defšed 
HAVE_CAMV4L
 || defšed 
HAVE_CAMV4L2
 || defšed 
HAVE_VIDEOIO


238 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_V4L
 (
šdex
);

239 ià(
ÿ±u»
)

240  
ÿ±u»
;

243 #ifdeà
HAVE_GSTREAMER


244 
ÿ±u»
 = 
	`cvC»©eC­tu»_GSŒ—m”
(
CV_CAP_GSTREAMER_V4L2
, 0);

245 ià(
ÿ±u»
)

246  
ÿ±u»
;

247 
ÿ±u»
 = 
	`cvC»©eC­tu»_GSŒ—m”
(
CV_CAP_GSTREAMER_V4L
, 0);

248 ià(
ÿ±u»
)

249  
ÿ±u»
;

253 
CV_CAP_FIREWIRE
:

254 #ifdeà
HAVE_DC1394_2


255 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_DC1394_2
 (
šdex
);

256 ià(
ÿ±u»
)

257  
ÿ±u»
;

260 #ifdeà
HAVE_DC1394


261 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_DC1394
 (
šdex
);

262 ià(
ÿ±u»
)

263  
ÿ±u»
;

266 #ifdeà
HAVE_CMU1394


267 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_CMU
 (
šdex
);

268 ià(
ÿ±u»
)

269  
ÿ±u»
;

272 #ià
	`defšed
(
HAVE_GSTREAMER
) && 0

274 
ÿ±u»
 = 
	`cvC»©eC­tu»_GSŒ—m”
(
CV_CAP_GSTREAMER_1394
, 0);

275 ià(
ÿ±u»
)

276  
ÿ±u»
;

280 #ifdeà
HAVE_MIL


281 
CV_CAP_MIL
:

282 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_MIL
 (
šdex
);

283 ià(
ÿ±u»
)

284  
ÿ±u»
;

288 #ià
	`defšed
(
HAVE_QUICKTIME
è|| defšed(
HAVE_QTKIT
)

289 
CV_CAP_QT
:

290 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_QT
 (
šdex
);

291 ià(
ÿ±u»
)

292  
ÿ±u»
;

296 #ifdeà
HAVE_UNICAP


297 
CV_CAP_UNICAP
:

298 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_Uniÿp
 (
šdex
);

299 ià(
ÿ±u»
)

300  
ÿ±u»
;

304 #ifdeà
HAVE_PVAPI


305 
CV_CAP_PVAPI
:

306 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_PvAPI
 (
šdex
);

307 ià(
ÿ±u»
)

308  
ÿ±u»
;

312 #ifdeà
HAVE_OPENNI


313 
CV_CAP_OPENNI
:

314 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_O³nNI
 (
šdex
);

315 ià(
ÿ±u»
)

316  
ÿ±u»
;

320 #ifdeà
HAVE_OPENNI2


321 
CV_CAP_OPENNI2
:

322 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_O³nNI
(
šdex
);

323 ià(
ÿ±u»
)

324  
ÿ±u»
;

328 #ifdeà
HAVE_XIMEA


329 
CV_CAP_XIAPI
:

330 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_XIMEA
 (
šdex
);

331 ià(
ÿ±u»
)

332  
ÿ±u»
;

336 #ifdeà
HAVE_AVFOUNDATION


337 
CV_CAP_AVFOUNDATION
:

338 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_AVFound©iÚ
 (
šdex
);

339 ià(
ÿ±u»
)

340  
ÿ±u»
;

344 #ifdeà
HAVE_GIGE_API


345 
CV_CAP_GIGANETIX
:

346 
ÿ±u»
 = 
	`cvC»©eCam”aC­tu»_Gigª‘ix
 (
šdex
);

347 ià(
ÿ±u»
)

348  
ÿ±u»
;

356 
	}
}

362 
CV_IMPL
 
CvC­tu»
 * 
	$cvC»©eFeC­tu»
 (cÚ¡ * 
f’ame
)

364 
CvC­tu»
 * 
»suÉ
 = 0;

366 #ifdeà
HAVE_FFMPEG


367 ià(! 
»suÉ
)

368 
»suÉ
 = 
	`cvC»©eFeC­tu»_FFMPEG_´oxy
 (
f’ame
);

371 #ifdeà
HAVE_VFW


372 ià(! 
»suÉ
)

373 
»suÉ
 = 
	`cvC»©eFeC­tu»_VFW
 (
f’ame
);

376 #ifdeà
HAVE_MSMF


377 ià(! 
»suÉ
)

378 
»suÉ
 = 
	`cvC»©eFeC­tu»_MSMF
 (
f’ame
);

381 #ifdeà
HAVE_XINE


382 ià(! 
»suÉ
)

383 
»suÉ
 = 
	`cvC»©eFeC­tu»_XINE
 (
f’ame
);

386 #ifdeà
HAVE_GSTREAMER


387 ià(! 
»suÉ
)

388 
»suÉ
 = 
	`cvC»©eC­tu»_GSŒ—m”
 (
CV_CAP_GSTREAMER_FILE
, 
f’ame
);

391 #ià
	`defšed
(
HAVE_QUICKTIME
è|| defšed(
HAVE_QTKIT
)

392 ià(! 
»suÉ
)

393 
»suÉ
 = 
	`cvC»©eFeC­tu»_QT
 (
f’ame
);

396 #ifdeà
HAVE_AVFOUNDATION


397 ià(! 
»suÉ
)

398 
»suÉ
 = 
	`cvC»©eFeC­tu»_AVFound©iÚ
 (
f’ame
);

401 #ifdeà
HAVE_OPENNI


402 ià(! 
»suÉ
)

403 
»suÉ
 = 
	`cvC»©eFeC­tu»_O³nNI
 (
f’ame
);

406 ià(! 
»suÉ
)

407 
»suÉ
 = 
	`cvC»©eFeC­tu»_Images
 (
f’ame
);

409  
»suÉ
;

410 
	}
}

416 
CV_IMPL
 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”
ĞcÚ¡ * 
f’ame
, 
fourcc
,

417 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 )

421 
CvVideoWr™”
 *
»suÉ
 = 0;

423 if(!
fourcc
 || !
ås
)

424 
»suÉ
 = 
	`cvC»©eVideoWr™”_Images
(
f’ame
);

426 #ifdeà
HAVE_FFMPEG


427 if(!
»suÉ
)

428 
»suÉ
 = 
	`cvC»©eVideoWr™”_FFMPEG_´oxy
 (
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
is_cŞÜ
);

431 #ifdeà
HAVE_VFW


432 if(!
»suÉ
)

433 
»suÉ
 = 
	`cvC»©eVideoWr™”_VFW
(
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
is_cŞÜ
);

436 #ifdeà
HAVE_MSMF


437 ià(!
»suÉ
)

438 
»suÉ
 = 
	`cvC»©eVideoWr™”_MSMF
(
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
is_cŞÜ
);

446 #ifdeà
HAVE_AVFOUNDATION


447 ià(! 
»suÉ
)

448 
»suÉ
 = 
	`cvC»©eVideoWr™”_AVFound©iÚ
(
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
is_cŞÜ
);

451 #ià
	`defšed
(
HAVE_QUICKTIME
è|| defšed(
HAVE_QTKIT
)

452 if(!
»suÉ
)

453 
»suÉ
 = 
	`cvC»©eVideoWr™”_QT
(
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
is_cŞÜ
);

456 #ifdeà
HAVE_GSTREAMER


457 ià(! 
»suÉ
)

458 
»suÉ
 = 
	`cvC»©eVideoWr™”_GSŒ—m”
(
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
is_cŞÜ
);

461 #ià!
	`defšed
(
HAVE_FFMPEG
) && \

462 !
	`defšed
(
HAVE_VFW
) && \

463 !
	`defšed
(
HAVE_MSMF
) && \

464 !
	`defšed
(
HAVE_AVFOUNDATION
) && \

465 !
	`defšed
(
HAVE_QUICKTIME
) && \

466 !
	`defšed
(
HAVE_QTKIT
) && \

467 !
	`defšed
(
HAVE_GSTREAMER
)

470 ()
äameSize
;

471 ()
is_cŞÜ
;

474 if(!
»suÉ
)

475 
»suÉ
 = 
	`cvC»©eVideoWr™”_Images
(
f’ame
);

477  
»suÉ
;

478 
	}
}

480 
CV_IMPL
 
	$cvWr™eF¿me
Ğ
CvVideoWr™”
* 
wr™”
, cÚ¡ 
I¶Image
* 
image
 )

482  
wr™”
 ? wr™”->
	`wr™eF¿me
(
image
) : 0;

483 
	}
}

485 
CV_IMPL
 
	$cvR–—£VideoWr™”
Ğ
CvVideoWr™”
** 
pwr™”
 )

487 ifĞ
pwr™”
 && *pwriter )

489 
d–‘e
 *
pwr™”
;

490 *
pwr™”
 = 0;

492 
	}
}

494 
Çme¥aû
 
	gcv


497 
	gPŒ
<
	gIVideoC­tu»
> 
IVideoC­tu»_ü—‹
(
šdex
)

499 
	gdomašs
[] =

501 #ifdeà
HAVE_DSHOW


502 
CV_CAP_DSHOW
,

504 #ifdeà
HAVE_INTELPERC


505 
CV_CAP_INTELPERC
,

507 #ifdeà
WINRT_VIDEO


508 
CAP_WINRT
,

510 #ifdeà
HAVE_GPHOTO2


511 
CV_CAP_GPHOTO2
,

517 
	g´ef
 = (
šdex
 / 100) * 100;

518 ià(
	g´ef
)

520 
	gdomašs
[0]=
´ef
;

521 
	gšdex
 %= 100;

522 
	gdomašs
[1]=-1;

526 
	gi
 = 0; 
	gdomašs
[
i
] >= 0; i++)

528 #ià
defšed
(
HAVE_DSHOW
) || \

529 
defšed
(
HAVE_INTELPERC
) || \

530 
defšed
(
WINRT_VIDEO
) || \

531 
defšed
(
HAVE_GPHOTO2
) || \

533 
	gPŒ
<
	gIVideoC­tu»
> 
	gÿ±u»
;

535 
	gdomašs
[
i
])

537 #ifdeà
HAVE_DSHOW


538 
	gCV_CAP_DSHOW
:

539 
ÿ±u»
 = 
makePŒ
<
VideoC­tu»_DShow
>(
šdex
);

542 #ifdeà
HAVE_INTELPERC


543 
	gCV_CAP_INTELPERC
:

544 
ÿ±u»
 = 
makePŒ
<
VideoC­tu»_IÁ–P”C
>();

547 #ifdeà
WINRT_VIDEO


548 
	gCAP_WINRT
:

549 
ÿ±u»
 = 
PŒ
<
IVideoC­tu»
>(
Ãw
 
cv
::
VideoC­tu»_WšRT
(
šdex
));

550 ià(
	gÿ±u»
)

551  
	gÿ±u»
;

554 #ifdeà
HAVE_GPHOTO2


555 
	gCV_CAP_GPHOTO2
:

556 
ÿ±u»
 = 
ü—‹GPhÙo2C­tu»
(
šdex
);

560 ià(
	gÿ±u»
 && c­tu»->
isO³Ãd
())

561  
	gÿ±u»
;

566  
	gPŒ
<
	gIVideoC­tu»
>();

570 
	gPŒ
<
	gIVideoC­tu»
> 
IVideoC­tu»_ü—‹
(cÚ¡ 
SŒšg
& 
f’ame
)

572 
	gdomašs
[] =

574 
CV_CAP_ANY
,

575 #ifdeà
HAVE_GPHOTO2


576 
CV_CAP_GPHOTO2
,

582 
	gi
 = 0; 
	gdomašs
[
i
] >= 0; i++)

584 
	gPŒ
<
	gIVideoC­tu»
> 
	gÿ±u»
;

586 
	gdomašs
[
i
])

588 
	gCV_CAP_ANY
:

589 
ÿ±u»
 = 
ü—‹MÙiÚJ³gC­tu»
(
f’ame
);

591 #ifdeà
HAVE_GPHOTO2


592 
	gCV_CAP_GPHOTO2
:

593 
ÿ±u»
 = 
ü—‹GPhÙo2C­tu»
(
f’ame
);

598 ià(
	gÿ±u»
 && c­tu»->
isO³Ãd
())

600  
	gÿ±u»
;

604  
	gPŒ
<
	gIVideoC­tu»
>();

607 
	gPŒ
<
	gIVideoWr™”
> 
IVideoWr™”_ü—‹
(cÚ¡ 
SŒšg
& 
f’ame
, 
_fourcc
, 
ås
, 
Size
 
äameSize
, 
boŞ
 
isCŞÜ
)

609 
	gPŒ
<
	gIVideoWr™”
> 
	giwr™”
;

610 ifĞ
	g_fourcc
 =ğ
CV_FOURCC
('M', 'J', 'P', 'G') )

611 
	giwr™”
 = 
ü—‹MÙiÚJ³gWr™”
(
f’ame
, 
ås
, 
äameSize
, 
isCŞÜ
);

612  
	giwr™”
;

615 
	gVideoC­tu»
::
VideoC­tu»
()

618 
VideoC­tu»
::VideoC­tu»(cÚ¡ 
SŒšg
& 
f’ame
)

620 
İ’
(
f’ame
);

623 
	gVideoC­tu»
::
VideoC­tu»
(
deviû
)

625 
İ’
(
deviû
);

628 
	gVideoC­tu»
::~
VideoC­tu»
()

630 
iÿp
.
»Ëa£
();

631 
	gÿp
.
»Ëa£
();

634 
boŞ
 
	gVideoC­tu»
::
İ’
(cÚ¡ 
SŒšg
& 
f’ame
)

636 ià(
isO³Ãd
()è
»Ëa£
();

637 
	giÿp
 = 
IVideoC­tu»_ü—‹
(
f’ame
);

638 ià(!
	giÿp
.
em±y
())

639  
	gŒue
;

641 
	gÿp
.
»£t
(
cvC»©eFeC­tu»
(
f’ame
.
c_¡r
()));

642  
isO³Ãd
();

645 
boŞ
 
	gVideoC­tu»
::
İ’
(
deviû
)

647 ià(
isO³Ãd
()è
»Ëa£
();

648 
	giÿp
 = 
IVideoC­tu»_ü—‹
(
deviû
);

649 ià(!
	giÿp
.
em±y
())

650  
	gŒue
;

651 
	gÿp
.
»£t
(
cvC»©eCam”aC­tu»
(
deviû
));

652  
isO³Ãd
();

655 
boŞ
 
	gVideoC­tu»
::
isO³Ãd
() const

657  (!
ÿp
.
em±y
(è|| !
iÿp
.empty());

660 
	gVideoC­tu»
::
»Ëa£
()

662 
iÿp
.
»Ëa£
();

663 
	gÿp
.
»Ëa£
();

666 
boŞ
 
	gVideoC­tu»
::
g¿b
()

668 ià(!
iÿp
.
em±y
())

669  
iÿp
->
g¿bF¿me
();

670  
cvG¿bF¿me
(
ÿp
) != 0;

673 
boŞ
 
	gVideoC­tu»
::
»Œ›ve
(
OuutA¼ay
 
image
, 
chªÃl
)

675 ià(!
	giÿp
.
em±y
())

676  
	giÿp
->
»Œ›veF¿me
(
chªÃl
, 
image
);

678 
I¶Image
* 
	g_img
 = 
cvR‘r›veF¿me
(
ÿp
, 
chªÃl
);

679 ifĞ!
	g_img
 )

681 
	gimage
.
»Ëa£
();

682  
	gçl£
;

684 if(
	g_img
->
	gÜigš
 =ğ
IPL_ORIGIN_TL
)

685 
cv
::
cv¬rToM©
(
_img
).
cİyTo
(
image
);

688 
M©
 
	g‹mp
 = 
cv
::
cv¬rToM©
(
_img
);

689 
æ
(
‹mp
, 
image
, 0);

691  
	gŒue
;

694 
boŞ
 
	gVideoC­tu»
::
»ad
(
OuutA¼ay
 
image
)

697 if(
g¿b
())

698 
»Œ›ve
(
image
);

700 
	gimage
.
»Ëa£
();

701  !
	gimage
.
em±y
();

704 
	gVideoC­tu»
& VideoC­tu»::
İ”©Ü
 >> (
M©
& 
image
)

706 #ifdeà
WINRT_VIDEO


707 ià(
g¿b
())

709 ià(
»Œ›ve
(
image
))

711 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
VideoioBridge
::
g‘In¡ªû
().
šputBufãrMu‹x
);

712 
	gVideoioBridge
& 
	gbridge
 = 
VideoioBridge
::
g‘In¡ªû
();

715 
	gbridge
.
sw­IÅutBufãrs
();

716 autØ
	gp
 = 
bridge
.
äÚtIÅutPŒ
;

718 
	gbridge
.
	gbIsF¿meNew
 = 
çl£
;

721 
M©
 
m
(
bridge
.
g‘Height
(), bridge.
g‘Width
(), 
CV_8UC3
, 
p
);

722 
	gimage
 = 
m
;

726 
»ad
(
image
);

729  *
	gthis
;

732 
	gVideoC­tu»
& VideoC­tu»::
İ”©Ü
 >> (
UM©
& 
image
)

734 
»ad
(
image
);

735  *
	gthis
;

738 
boŞ
 
	gVideoC­tu»
::
£t
(
´İId
, 
v®ue
)

740 ià(!
	giÿp
.
em±y
())

741  
	giÿp
->
£tPrİ”ty
(
´İId
, 
v®ue
);

742  
cvS‘C­tu»Prİ”ty
(
ÿp
, 
´İId
, 
v®ue
) != 0;

745 
	gVideoC­tu»
::
g‘
(
´İId
) const

747 ià(!
iÿp
.
em±y
())

748  
iÿp
->
g‘Prİ”ty
(
´İId
);

749  
icvG‘C­tu»Prİ”ty
(
ÿp
, 
´İId
);

753 
	gVideoWr™”
::
VideoWr™”
()

756 
VideoWr™”
::VideoWr™”(cÚ¡ 
SŒšg
& 
f’ame
, 
_fourcc
, 
ås
, 
Size
 
äameSize
, 
boŞ
 
isCŞÜ
)

758 
İ’
(
f’ame
, 
_fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
);

761 
	gVideoWr™”
::
»Ëa£
()

763 
iwr™”
.
»Ëa£
();

764 
	gwr™”
.
»Ëa£
();

767 
	gVideoWr™”
::~
VideoWr™”
()

769 
»Ëa£
();

772 
boŞ
 
	gVideoWr™”
::
İ’
(cÚ¡ 
SŒšg
& 
f’ame
, 
_fourcc
, 
ås
, 
Size
 
äameSize
, boŞ 
isCŞÜ
)

774 ià(
isO³Ãd
()è
»Ëa£
();

775 
	giwr™”
 = 
IVideoWr™”_ü—‹
(
f’ame
, 
_fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
);

776 ià(!
	giwr™”
.
em±y
())

777  
	gŒue
;

778 
	gwr™”
.
»£t
(
cvC»©eVideoWr™”
(
f’ame
.
c_¡r
(), 
_fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
));

779  
isO³Ãd
();

782 
boŞ
 
	gVideoWr™”
::
isO³Ãd
() const

784  !
iwr™”
.
em±y
(è|| !
wr™”
.empty();

788 
boŞ
 
	gVideoWr™”
::
£t
(
´İId
, 
v®ue
)

790 ià(!
	giwr™”
.
em±y
())

791  
	giwr™”
->
£tPrİ”ty
(
´İId
, 
v®ue
);

792  
	gçl£
;

795 
	gVideoWr™”
::
g‘
(
´İId
) const

797 ià(!
iwr™”
.
em±y
())

798  
iwr™”
->
g‘Prİ”ty
(
´İId
);

802 
	gVideoWr™”
::
wr™e
(cÚ¡ 
M©
& 
image
)

804 ifĞ
iwr™”
 )

805 
iwr™”
->
wr™e
(
image
);

808 
I¶Image
 
	g_img
 = 
image
;

809 
cvWr™eF¿me
(
wr™”
, &
_img
);

813 
	gVideoWr™”
& VideoWr™”::
İ”©Ü
 << (cÚ¡ 
M©
& 
image
)

815 
wr™e
(
image
);

816  *
	gthis
;

819 
	gVideoWr™”
::
fourcc
(
c1
, 
c2
, 
c3
, 
c4
)

821  (
	gc1
 & 255è+ ((
	gc2
 & 255è<< 8è+ ((
	gc3
 & 255è<< 16è+ ((
	gc4
 & 255) << 24);

	@cap_OPEL.cpp

2 
	~"´ecomp.hµ
"

3 
	~<¡dio.h
>

4 
	~<uni¡d.h
>

5 
	~<fú.h
>

6 
	~<”ºo.h
>

7 
	~<sys/ty³s.h
>

8 
	~<sys/mmª.h
>

9 
	~<¡ršg.h
>

10 
	~<¡dlib.h
>

11 
	~<asm/ty³s.h
>

12 
	~<as£¹.h
>

13 
	~<sys/¡©.h
>

14 
	~<sys/ioùl.h
>

15 
	~<sys/time.h
>

16 
	~<sys/mmª.h
>

17 
	~<sys/wa™.h
>

18 
	~<sys/c.h
>

19 
	~<sys/shm.h
>

20 
	~<dbus/dbus.h
>

21 
	~<£m­hÜe.h
>

22 
	~<lšux/videodev2.h
>

24 
	~<libv4l1.h
>

25 
	~<libv4l2.h
>

27 
	#CLEAR
(
x
è
	`mem£t
(&(x), 0, (x))

	)

29 
	#SEM_KEY_FOR_PROPERTY
 49411

	)

30 
	#SEM_KEY_FOR_STATUS
 49441

	)

31 
	#SHM_KEY_FOR_STATUS
 4944

	)

32 
	#SHM_KEY_FOR_PROPERTY
 4941

	)

33 
	#SHM_KEY_FOR_BUFFER
 5315

	)

34 
	#OPENCV_DEFAULT_WIDTH
 640

	)

35 
	#OPENCV_DEFAULT_HEIGHT
 480

	)

37 
	#OPENCV_DEFAULT_BUF_SIZE
 921600

	)

38 
	#OPENCV_DEFAULT_BUF_INDEX
 4

	)

40 cÚ¡ * 
	gdev_Çme
 = "/dev/video0";

41 
	gSEM_NAME
[] = "CCDSTATUS";

42 
	s¡©us


44 
boŞ
 
	misCCDRuÂšg
;

45 
boŞ
 
	misO³nCVRuÂšg
;

46 
boŞ
 
	misO³nCVIn™Ÿlized
;

47 
boŞ
 
	misRecRuÂšg
;

48 
boŞ
 
	misRecIn™Ÿlized
;

49 }
	t¡©us
;

51 
	s´İ”ty


53 
	mwidth
;

54 
	mheight
;

55 
	mbufãr_size
;

56 
	mbufãr_num
;

57 
	mn_bufãr
;

58 
boŞ
 
	misPrİ”tyChªged
;

59 
boŞ
 
	m®lowRuÂšg
;

60 }
	t´İ”ty
;

61 
boŞ
 
	$isRecRuÂšg
(
¡©us
* 
¡
, 
£m_t
* 
mu‹x
)

63 
boŞ
 
»tV¬
ğ
çl£
;

64 
	`£m_wa™
(
mu‹x
);

65 
»tV¬
 = 
¡
->
isRecRuÂšg
;

66 
	`£m_po¡
(
mu‹x
);

67 if(
»tV¬
)

68 
	`årštf
(
¡d”r
, "Resource Busy\n");

70 
	`årštf
(
¡d”r
, "Resource Free\n");

71  
»tV¬
;

72 
	}
}

73 
	$£ndDbusMsg
(
DBusCÚÃùiÚ
* 
cÚn
, cÚ¡ * 
msg
)

75 
DBusMes§ge
* 
mes§ge
;

76 
mes§ge
 = 
	`dbus_mes§ge_Ãw_sigÇl
("/Üg/İ–/ÿm”a/d«mÚ", "Üg.İ–.ÿm”a.d«mÚ", 
msg
);

77 
	`dbus_cÚÃùiÚ_£nd
(
cÚn
, 
mes§ge
, 
NULL
);

78 
	`dbus_mes§ge_uÄef
(
mes§ge
);

79 
	}
}

80 şas 
	cCvC­tu»CAM_OPEL_CPP
 : 
CvC­tu»


82 
public
:

83 
CvC­tu»CAM_OPEL_CPP
();

84 
	mvœtu®
 ~
CvC­tu»CAM_OPEL_CPP
();

86 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

87 
vœtu®
 
boŞ
 
şo£
();

88 
vœtu®
 
	$g‘Prİ”ty
() const;

89 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

90 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

91 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

93 
´Ùeùed
:

94 
I¶Image
 
äame
;

95 
fd
;

96 
shmid
;

97 * 
shmPŒ
;

98 
shmid_fÜ_´İ”ty
;

99 * 
shmPŒ_fÜ_´İ”ty
;

100 
shmid_fÜ_¡©us
;

101 * 
shmPŒ_fÜ_¡©us
;

102 
bufãr_size
;

103 
bufãr_šdex
;

104 
boŞ
 
	`š™_Sh¬edMemÜyS·û
();

105 
boŞ
 
	`š™_Sh¬edMemÜyS·ûFÜPrİ”ty
();

106 
boŞ
 
	`uš™_Sh¬edMemÜyS·ûFÜPrİ”ty
();

107 
boŞ
 
	`uš™_Sh¬edMemÜyS·û
();

108 
boŞ
 
	`š™_Sem­hÜe
();

109 
boŞ
 
	`uš™_Sem­hÜe
();

110 
boŞ
 
	`š™_DBus
();

111 
boŞ
 
	`»adF¿me
();

112 
£m_t
* 
¡©usMu‹x
;

113 
width
, 
height
;

114 
mode
;

115 
´İ”ty
* 
´İ
;

116 
¡©us
* 
¡
;

117 
	`mašLoİ
();

118 
£mid
;

121 
DBusCÚÃùiÚ
* 
cÚÃùiÚ
;

122 
DBusE¼Ü
 
”rÜ
;

126 
boŞ
 
CvC­tu»CAM_OPEL_CPP
::
	$uš™_Sem­hÜe
()

128 
	`£m_şo£
(
this
->
¡©usMu‹x
);

129 
	`£m_uÆšk
(
SEM_NAME
);

130  
Œue
;

131 
	}
}

132 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$š™_Sem­hÜe
()

134 
this
->
¡©usMu‹x
 = 
	`£m_İ’
(
SEM_NAME
, 0, 0666, 0);

135 if(
this
->
¡©usMu‹x
 =ğ
SEM_FAILED
)

137 
	`årštf
(
¡d”r
, "[CvCaptureCAM_OPEL_CPP::init_Semaphore] : Semaphore Initialization Error\n");

138 
	`£m_uÆšk
(
SEM_NAME
);

139  
çl£
;

141  
Œue
;

142 
	}
}

143 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$š™_DBus
()

145 
	`dbus_”rÜ_š™
(&
”rÜ
);

146 
cÚÃùiÚ
 = 
	`dbus_bus_g‘
(
DBUS_BUS_SYSTEM
, &
”rÜ
);

147 if(!
cÚÃùiÚ
)

149 
	`årštf
(
¡d”r
, "[CvCaptureCAM_OPEL_CPP::init_DBus] : dbus_bus_get Error\n");

150 
	`dbus_”rÜ_ä“
(&
”rÜ
);

151  
çl£
;

153  
Œue
;

154 
	}
}

155 
šlše
 
	$chªÃls_fÜ_mode
(
mode
)

157 
mode
){

158 
CV_CAP_MODE_GRAY
:

160 
CV_CAP_MODE_YUYV
:

165 
	}
}

166 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$»adF¿me
()

170  
Œue
;

172 
	}
}

173 
	gCvC­tu»CAM_OPEL_CPP
::
	$mašLoİ
()

175 
couÁ
;

176 
couÁ
 = 1;

177 
couÁ
-- > 0)

180 
fd_£t
 
fds
;

181 
timev®
 
tv
;

182 
r
;

183 
	`FD_ZERO
(&
fds
);

184 
	`FD_SET
(
fd
, &
fds
);

186 
tv
.
tv_£c
 = 10;

187 
tv
.
tv_u£c
 = 0;

188 
r
 = 
	`£Ëù
(
fd
+1, &
fds
, 
NULL
, NULL, &
tv
);

189 if(-1 =ğ
r
)

191 if(
EINTR
 =ğ
”ºo
)

193 
	`årštf
(
¡d”r
, "[CvCaptureCAM_OPEL_CPP::mainLoop] : Select Failed\n");

195 if(0 =ğ
r
)

197 
	`årštf
(
¡d”r
, "[CvCaptureCAM_OPEL_CPP::mainLoop] : selectimeout\n");

201 if(
	`»adF¿me
())

207 
	}
}

208 
	gCvC­tu»CAM_OPEL_CPP
::
	$CvC­tu»CAM_OPEL_CPP
()

210 
this
->
width
 = 
OPENCV_DEFAULT_WIDTH
;

211 
this
->
height
 = 
OPENCV_DEFAULT_HEIGHT
;

212 
this
->
bufãr_size
 = 
OPENCV_DEFAULT_BUF_SIZE
;

213 
this
->
bufãr_šdex
 = 
OPENCV_DEFAULT_BUF_INDEX
;

214 
this
->
mode
 = 
CV_CAP_MODE_RGB
;

215 
	}
}

217 
	gCvC­tu»CAM_OPEL_CPP
::~
	$CvC­tu»CAM_OPEL_CPP
()

221 
	}
}

223 
boŞ
 
CvC­tu»CAM_OPEL_CPP
::
	$š™_Sh¬edMemÜyS·ûFÜPrİ”ty
()

225 
shmid_fÜ_¡©us
 = 
	`shmg‘
((
key_t
)
SHM_KEY_FOR_STATUS
, 0, 0);

226 if(
shmid_fÜ_¡©us
 == -1)

228 
	`årštf
(
¡d”r
,"[CvCaptureCAM_OPEL_CPP::init_SharedMemorySpaceForProperty] : Shmget Error\n");

229  
çl£
;

231 
shmPŒ_fÜ_¡©us
 = 
	`shm©
(
shmid_fÜ_¡©us
, (*)0, 0666|
IPC_CREAT
);

232 if(
shmPŒ_fÜ_¡©us
 == (*)-1)

234 
	`årštf
(
¡d”r
,"[CvCaptureCAM_OPEL_CPP::init_SharedMemorySpaceForProperty] : Shmat Error\n");

235  
çl£
;

237 
this
->
¡
 = (
¡©us
*)
shmPŒ_fÜ_¡©us
;

238  
Œue
;

239 
	}
}

241 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$š™_Sh¬edMemÜyS·û
()

243 
shmid
 = 
	`shmg‘
((
key_t
)
SHM_KEY_FOR_BUFFER
, 0, 0);

244 if(
shmid
 == -1)

247  
çl£
;

249 
shmPŒ
 = 
	`shm©
(
shmid
, (*)0, 0666|
IPC_CREAT
);

250 if(
shmPŒ
 == (*)-1)

253  
çl£
;

256  
Œue
;

258 
	}
}

259 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$uš™_Sh¬edMemÜyS·û
()

262  
Œue
;

263 
	}
}

264 
	$İ’_deviû
(* 
fd
)

266 *(
fd
èğ
	`İ’
(
dev_Çme
, 
O_RDWR
 | 
O_NONBLOCK
, 0);

267 if(-1 =ğ(*
fd
))

269 
	`årštf
(
¡d”r
, "[OPEN_DEVICE] : /dev/video0 Cannot Open\n");

272 
	}
}

273 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$İ’
(
šdex
)

275 
boŞ
 
®lowIsRuÂšg
;

276 
	`İ’_deviû
(&
fd
);

278 if(
this
->
fd
 == -1)

279  
çl£
;

281 if(!(
this
->
	`š™_Sh¬edMemÜyS·ûFÜPrİ”ty
()))

282  
çl£
;

284 if(!
	`š™_DBus
())

285  
çl£
;

287 if(!
	`š™_Sem­hÜe
())

288  
çl£
;

290 if(
	`isRecRuÂšg
(
this
->
¡
,his->
¡©usMu‹x
))

293  
çl£
;

295 
	`´štf
("******* CAMERA PROPERTY ********\n");

296 
	`´štf
("width = %d\n", 
this
->
width
);

297 
	`´štf
("heighˆğ%d\n", 
this
->
height
);

298 
	`´štf
("bufãr_sizğ%d\n", 
this
->
bufãr_size
);

299 
	`fæush
(
¡dout
);

301 
	`£ndDbusMsg
(
this
->
cÚÃùiÚ
, "OpenCVInit");

303 
	`cvIn™ImageH—d”
(&
äame
, 
	`cvSize
(
this
->
width
,his->
height
), 
IPL_DEPTH_8U
, 
	`chªÃls_fÜ_mode
(
mode
), 
IPL_ORIGIN_TL
, 4);

304 
äame
.
imageD©a
 = (*)
	`cvAÎoc
(äame.
imageSize
);

305 if(!
äame
.
imageD©a
)

307 
	`årštf
(
¡d”r
, "[CvCaptureCAM_OPEL_CPP::open] : cvAlloc Error\n");

308  
çl£
;

312 if(
	`š™_Sh¬edMemÜyS·û
())

319 
	`£ndDbusMsg
(
this
->
cÚÃùiÚ
, "OpenCVStart");

321  
Œue
;

322 
	}
}

323 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$şo£
()

327  
Œue
;

328 
	}
}

330 
	gCvC­tu»CAM_OPEL_CPP
::
	$g‘Prİ”ty
() const

332  
çl£
;

333 
	}
}

335 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$£tPrİ”ty
(, )

337 
	`årštf
(
¡d”r
, "[CvCaptureCAM_OPEL_CPP::setProperty] : Cannot configurehe setProperty\n");

338  
çl£
;

339 
	}
}

340 
boŞ
 
	gCvC­tu»CAM_OPEL_CPP
::
	$g¿bF¿me
()

343 if(
	`isRecRuÂšg
(
this
->
¡
,his->
¡©usMu‹x
))

346 
	`årštf
(
¡d”r
, "Resource Busy\n");

347  
çl£
;

349 
	`mašLoİ
();

350  
Œue
;

351 
	}
}

352 
I¶Image
* 
	gCvC­tu»CAM_OPEL_CPP
::
	$»Œ›veF¿me
()

354 
off£t
;

355 
off£t
 = (
bufãr_šdex
-1)*
bufãr_size
;

358 if(
shmPŒ
)

360 
	`memıy
((*)
äame
.
imageD©a
, (*)
shmPŒ
+
off£t
, 
bufãr_size
);

362  &
äame
;

363 
	}
}

364 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_V4L
(
šdex
)

366 
CvC­tu»CAM_OPEL_CPP
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_OPEL_CPP;

367 ifĞ
ÿ±u»
->
	`İ’
(
šdex
))

368  (
CvC­tu»
*)
ÿ±u»
;

370 
d–‘e
 
ÿ±u»
;

372 
	}
}

	@cap_cmu.cpp

42 
	~"´ecomp.hµ
"

44 #ifdeà
WIN32


48 #ifdeà
HAVE_CMU1394


53 
	~"1394ÿm”a.h
"

55 şas 
	cCvC­tu»CAM_CMU
 : 
public
 
CvC­tu»


57 
public
:

58 
	$CvC­tu»CAM_CMU
()

60 
šdex
 = -1;

61 
image
 = 0;

64 
vœtu®
 ~
	$CvC­tu»CAM_CMU
()

66 
	`şo£
();

67 
	}
}

69 
vœtu®
 
boŞ
 
İ’
(
ÿm”aId
);

70 
vœtu®
 
şo£
();

71 
vœtu®
 
	$g‘Prİ”ty
() const;

72 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

73 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

74 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

76 
´Ùeùed
:

77 
C1394Cam”a
* 
	`ÿm”a
();

78 
CvSize
 
	`g‘Size
();

79 
	`g‘D•th
();

80 
	`g‘NChªÃls
();

82 
boŞ
 
	`£tVideoSize
(, );

83 
boŞ
 
	`£tMode
(
mode
);

84 
boŞ
 
	`£tF¿meR©e
(
¿‹
);

85 
boŞ
 
	`£tFÜm©
(
fÜm©
);

87 
ås
;

88 
mode
;

89 
fÜm©
;

90 
šdex
;

91 
I¶Image
* 
image
;

92 
	}
};

99 
	#CMU_MAX_CAMERAS
 20

	)

100 
	gCMU_numCam”as
 = 0;

101 
	gCMU_numAùiveCam”as
 = 0;

102 
boŞ
 
	gCMU_u£Cam”aFÏgs
[
CMU_MAX_CAMERAS
];

103 
C1394Cam”a
 *
	gCMU_theCam”a
 = 0;

106 
	#CV_CAP_IEEE1394_FPS_1_875
 0

	)

107 
	#CV_CAP_IEEE1394_FPS_3_75
 1

	)

108 
	#CV_CAP_IEEE1394_FPS_7_5
 2

	)

109 
	#CV_CAP_IEEE1394_FPS_15
 3

	)

110 
	#CV_CAP_IEEE1394_FPS_30
 4

	)

111 
	#CV_CAP_IEEE1394_FPS_60
 5

	)

114 
	#CV_CAP_IEEE1394_COLOR_MONO
 0

	)

115 
	#CV_CAP_IEEE1394_COLOR_MONO16
 1

	)

116 
	#CV_CAP_IEEE1394_COLOR_YUV444
 2

	)

117 
	#CV_CAP_IEEE1394_COLOR_YUV422
 3

	)

118 
	#CV_CAP_IEEE1394_COLOR_YUV411
 4

	)

119 
	#CV_CAP_IEEE1394_COLOR_RGB
 5

	)

121 
	#CV_CAP_IEEE1394_SIZE_160X120
 0

	)

122 
	#CV_CAP_IEEE1394_SIZE_320X240
 1

	)

123 
	#CV_CAP_IEEE1394_SIZE_640X480
 2

	)

124 
	#CV_CAP_IEEE1394_SIZE_800X600
 3

	)

125 
	#CV_CAP_IEEE1394_SIZE_1024X768
 4

	)

126 
	#CV_CAP_IEEE1394_SIZE_1280X960
 5

	)

127 
	#CV_CAP_IEEE1394_SIZE_1600X1200
 6

	)

131 
	gCV_CAP_IEEE1394_FORMAT
[7][6] =

143 
	gCV_CAP_IEEE1394_MODE
[7][6] =

155 
	gCV_CAP_IEEE1394_COLOR
[2][8] =

158 
CV_CAP_IEEE1394_COLOR_YUV444
,

159 
CV_CAP_IEEE1394_COLOR_YUV422
,

160 
CV_CAP_IEEE1394_COLOR_YUV411
,

161 
CV_CAP_IEEE1394_COLOR_YUV422
,

162 
CV_CAP_IEEE1394_COLOR_RGB
,

163 
CV_CAP_IEEE1394_COLOR_MONO
,

164 
CV_CAP_IEEE1394_COLOR_MONO16


167 
CV_CAP_IEEE1394_COLOR_YUV422
,

168 
CV_CAP_IEEE1394_COLOR_RGB
,

169 
CV_CAP_IEEE1394_COLOR_MONO
,

170 
CV_CAP_IEEE1394_COLOR_YUV422
,

171 
CV_CAP_IEEE1394_COLOR_RGB
,

172 
CV_CAP_IEEE1394_COLOR_MONO
,

173 
CV_CAP_IEEE1394_COLOR_MONO16
,

174 
CV_CAP_IEEE1394_COLOR_MONO16


188 #ià
_MSC_VER
 >= 1200

189 #´agm¨
comm’t
(
lib
,"1394camera.lib")

192 
C1394Cam”a
* 
	gCvC­tu»CAM_CMU
::
	$ÿm”a
()

194  
CMU_theCam”a
 && 
šdex
 >= 0 ? &CMU_theCamera[index] : 0;

195 
	}
}

198 
CvSize
 
	gCvC­tu»CAM_CMU
::
	$g‘Size
()

200 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

201 
width
 = 0, 
height
 = 0;

202 
cmuÿm
->
	`G‘VideoF¿meDim’siÚs
Ğ&
width
, &
height
 );

203  
	`cvSize
(()
width
, ()
height
);

204 
	}
}

207 
	gCvC­tu»CAM_CMU
::
	$g‘D•th
()

209 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

210 
fÜm©
 = 
cmuÿm
->
	`G‘VideoFÜm©
();

211 
mode
 = 
cmuÿm
->
	`G‘VideoMode
();

214 ifĞ
fÜm©
==7 ) {

215 
	`as£¹
(0);

219 ifĞ
fÜm©
 > 1 )

220 
fÜm©
 = 1;

222 ifĞ
CV_CAP_IEEE1394_COLOR
[
fÜm©
][
mode
]==
CV_CAP_IEEE1394_COLOR_MONO16
 )

223  
IPL_DEPTH_16S
;

225  
IPL_DEPTH_8U
;

226 
	}
}

229 
	gCvC­tu»CAM_CMU
::
	$g‘NChªÃls
()

231 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

232 
fÜm©
 = 
cmuÿm
->
	`G‘VideoFÜm©
();

233 
mode
 = 
cmuÿm
->
	`G‘VideoMode
();

235 ifĞ
fÜm©
==7 ){

236 
	`as£¹
(0);

241 ifĞ
fÜm©
 > 1 )

242 
fÜm©
 = 1;

244 
CV_CAP_IEEE1394_COLOR
[
fÜm©
][
mode
]){

245 
CV_CAP_IEEE1394_COLOR_RGB
:

247 
CV_CAP_IEEE1394_COLOR_MONO
:

248 
CV_CAP_IEEE1394_COLOR_MONO16
:

250 
CV_CAP_IEEE1394_COLOR_YUV422
:

251 
CV_CAP_IEEE1394_COLOR_YUV444
:

252 
CV_CAP_IEEE1394_COLOR_YUV411
:

258 
	}
}

260 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$İ’
Ğ
_šdex
 )

262 
	`şo£
();

265 ifĞ
CMU_numCam”as
 == 0 )

267 
CMU_numAùiveCam”as
 = 0;

268 
CMU_theCam”a
 = 
Ãw
 
C1394Cam”a
[
CMU_MAX_CAMERAS
];

272 
Œy


275 ifĞ
CMU_theCam”a
[0].
	`CheckLšk
(è!ğ
CAM_SUCCESS
 )

276 
throw
 1;

279 
CMU_numCam”as
 = 
CMU_theCam”a
[0].
	`G‘Numb”Cam”as
();

282 
i
 = 1; i < 
CMU_numCam”as
 && i<
CMU_MAX_CAMERAS
; i++ )

284 
CMU_u£Cam”aFÏgs
[
i
] = 
çl£
;

285 ià(
CMU_theCam”a
[
i
].
	`CheckLšk
(è!ğ
CAM_SUCCESS
)

286 
throw
 1;

289 
	`ÿtch
 (...)

293 
CMU_numCam”as
 = 0;

294  
çl£
;

298 
Œy


300 
CvSize
 
size
;

303 if(
_šdex
==-1){

304 
i
 = 0; i < 
CMU_numCam”as
; i++ )

306 ifĞ!
CMU_u£Cam”aFÏgs
[
i
] ){

307 
_šdex
 = 
i
;

314 ià(
_šdex
==-1)

315 
throw
 1;

317 ià(
CMU_theCam”a
[
_šdex
].
	`S–eùCam”a
(_šdexè!ğ
CAM_SUCCESS
)

318 
throw
 2;

320 ià(
CMU_theCam”a
[
_šdex
].
	`In™Cam”a
(è!ğ
CAM_SUCCESS
)

321 
throw
 3;

324 
boŞ
 
found_fÜm©
 = 
çl£
;

325 
¿‹
=5;„©e>=0 && !
found_fÜm©
;„ate--)

327 
cŞÜ
=
CV_CAP_IEEE1394_COLOR_RGB
; cŞÜ>=0 && !
found_fÜm©
; color--)

329 
size
=
CV_CAP_IEEE1394_SIZE_1600X1200
; size>=0 && !
found_fÜm©
; size--)

331 
fÜm©
 = 
CV_CAP_IEEE1394_FORMAT
[
size
][
cŞÜ
];

332 
mode
 = 
CV_CAP_IEEE1394_MODE
[
size
][
cŞÜ
];

333 ià(
fÜm©
!=-1 && 
mode
!=-1 &&

334 
CMU_theCam”a
[
_šdex
].
	`HasVideoF¿meR©e
(
fÜm©
,
mode
,
¿‹
))

336 
CMU_theCam”a
[
_šdex
].
	`S‘VideoFÜm©
(
fÜm©
);

337 
CMU_theCam”a
[
_šdex
].
	`S‘VideoMode
(
mode
);

338 
CMU_theCam”a
[
_šdex
].
	`S‘VideoF¿meR©e
(
¿‹
);

339 
found_fÜm©
 = (
CMU_theCam”a
[
_šdex
].
	`S¹ImageAcquis™iÚ
(è=ğ
CAM_SUCCESS
);

346 if(!
found_fÜm©
){

347 
CMU_theCam”a
[
_šdex
].
	`S‘VideoFÜm©
(7);

348 
CMU_theCam”a
[
_šdex
].
	`S‘VideoMode
(0);

349 if(
CMU_theCam”a
[
_šdex
].
	`S¹ImageAcquis™iÚ
(è!ğ
CAM_SUCCESS
){

351 
throw
 9;

355 
šdex
 = 
_šdex
;

356 
size
 = 
	`g‘Size
();

358 
image
 = 
	`cvC»©eImage
Ğ
size
, 8, 3 );

359 
	`cvZ”o
(
image
);

362 
CMU_numAùiveCam”as
++;

363 
CMU_u£Cam”aFÏgs
[
_šdex
] = 
Œue
;

365 
	`ÿtch
 ( )

367  
çl£
;

370  
Œue
;

371 
	}
}

373 
	gCvC­tu»CAM_CMU
::
	$şo£
()

375 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

376 ifĞ
cmuÿm
 )

378 
	`cvR–—£Image
Ğ&
image
 );

379 
cmuÿm
->
	`StİImageAcquis™iÚ
();

380 
CMU_u£Cam”aFÏgs
[
šdex
] = 
çl£
;

381 
šdex
 = -1;

383 ifĞ--
CMU_numAùiveCam”as
 == 0 )

385 
d–‘e
[] 
CMU_theCam”a
;

386 
CMU_theCam”a
 = 0;

387 
CMU_numCam”as
 = 0;

390 
	}
}

393 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$g¿bF¿me
()

395 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

396  
cmuÿm
 ? cmuÿm->
	`AcquœeImage
(è=ğ
CAM_SUCCESS
 : 
çl£
;

397 
	}
}

414 
I¶Image
* 
	gCvC­tu»CAM_CMU
::
	$»Œ›veF¿me
()

416 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

417 ifĞ!
cmuÿm
 )

419 
cmuÿm
->
	`g‘RGB
((
uch¬
*)
image
->
imageD©a
, image->
imageSize
);

420 
	`cvCÚv”tImage
Ğ
image
, image, 
CV_CVTIMG_SWAP_RB
 );

421  
image
;

422 
	}
}

425 
	gCvC­tu»CAM_CMU
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

427 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

428 ifĞ!
cmuÿm
 )

430  
´İ”ty_id
 )

432 
CV_CAP_PROP_FRAME_WIDTH
:

433  
image
->
width
;

434 
CV_CAP_PROP_FRAME_HEIGHT
:

435  
image
->
height
;

436 
CV_CAP_PROP_FPS
:

437  
cmuÿm
->
	`G‘VideoF¿meR©e
();

438 
CV_CAP_PROP_MODE
:

439  
cmuÿm
->
	`G‘VideoMode
();

440 
CV_CAP_PROP_FORMAT
:

441  
cmuÿm
->
	`G‘VideoFÜm©
();

444 
	}
}

446 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$£tVideoSize
(, )

448  
çl£
;

449 
	}
}

451 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$£tMode
(
mode
)

453 
fÜm©
;

454 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

455 ifĞ!
cmuÿm
 )

456  
çl£
;

457 
fÜm©
 = 
cmuÿm
->
	`G‘VideoFÜm©
();

458 ifĞ
mode
 < 0 || mod> 7 || !
cmuÿm
->
	`HasVideoMode
(
fÜm©
, mode))

459  
çl£
;

460 
cmuÿm
->
	`StİImageAcquis™iÚ
();

461 
cmuÿm
->
	`S‘VideoMode
(
mode
);

462 
cmuÿm
->
	`S¹ImageAcquis™iÚ
();

463  
Œue
;

464 
	}
}

466 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$£tF¿meR©e
(
¿‹
)

468 
fÜm©
, 
mode
;

469 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

470 ifĞ!
cmuÿm
 )

471  
çl£
;

472 
mode
 = 
cmuÿm
->
	`G‘VideoMode
();

473 
fÜm©
 = 
cmuÿm
->
	`G‘VideoFÜm©
();

474 ifĞ
¿‹
 < 0 ||„©> 5 || !
cmuÿm
->
	`HasVideoF¿meR©e
(
fÜm©
, 
mode
,„ate) )

475  
çl£
;

476 
cmuÿm
->
	`StİImageAcquis™iÚ
();

477 
cmuÿm
->
	`S‘VideoF¿meR©e
(
¿‹
);

478 
cmuÿm
->
	`S¹ImageAcquis™iÚ
();

479  
Œue
;

480 
	}
}

482 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$£tFÜm©
(
fÜm©
)

484 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

485 ifĞ!
cmuÿm
 )

486  
çl£
;

487 ifĞ
fÜm©
 < 0 || fÜm© > 2 || !
cmuÿm
->
	`HasVideoFÜm©
(format) )

488  
çl£
;

489 
cmuÿm
->
	`StİImageAcquis™iÚ
();

490 
cmuÿm
->
	`S‘VideoFÜm©
(
fÜm©
);

491 
cmuÿm
->
	`S¹ImageAcquis™iÚ
();

492  
Œue
;

493 
	}
}

495 
boŞ
 
	gCvC­tu»CAM_CMU
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

497 
boŞ
 
»tv®
 = 
çl£
;

498 
iv®
 = 
	`cvRound
(
v®ue
);

499 
C1394Cam”a
* 
cmuÿm
 = 
	`ÿm”a
();

500 ifĞ!
cmuÿm
 )

501  
çl£
;

503 
´İ”ty_id
) {

504 
CV_CAP_PROP_FRAME_WIDTH
:

505 
CV_CAP_PROP_FRAME_HEIGHT
:

507 
width
, 
height
;

508 ià(
´İ”ty_id
 =ğ
CV_CAP_PROP_FRAME_WIDTH
)

510 
width
 = 
iv®
;

511 
height
 = 
width
*3/4;

514 
height
 = 
iv®
;

515 
width
 = 
height
*4/3;

517 
»tv®
 = 
	`£tVideoSize
(
width
, 
height
);

520 
CV_CAP_PROP_FPS
:

521 
»tv®
 = 
	`£tF¿meR©e
(
iv®
);

523 
CV_CAP_PROP_MODE
:

524 
»tv®
 = 
	`£tMode
(
iv®
);

526 
CV_CAP_PROP_FORMAT
:

527 
»tv®
 = 
	`£tFÜm©
(
iv®
);

532 
CvSize
 
size
 = 
	`g‘Size
();

533 ifĞ!
image
 || image->
width
 !ğ
size
.width || image->
height
 != size.height )

535 
	`cvR–—£Image
Ğ&
image
 );

536 
image
 = 
	`cvC»©eImage
Ğ
size
, 8, 3 );

538  
»tv®
;

539 
	}
}

541 
CvC­tu»
 * 
	$cvC»©eCam”aC­tu»_CMU
 (
šdex
)

543 
CvC­tu»CAM_CMU
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_CMU;

544 ifĞ
ÿ±u»
->
	`İ’
(
šdex
) )

545  
ÿ±u»
;

546 
d–‘e
 
ÿ±u»
;

548 
	}
}

	@cap_dc1394.cpp

98 
	~"´ecomp.hµ
"

100 #ià!
defšed
 
WIN32
 && defšed 
HAVE_DC1394


102 
	~<uni¡d.h
>

103 
	~<¡dšt.h
>

104 
	~<lib¿w1394/¿w1394.h
>

105 
	~<libdc1394/dc1394_cÚŒŞ.h
>

107 #ifdeà
NDEBUG


108 
	#CV_WARN
(
mes§ge
)

	)

110 
	#CV_WARN
(
mes§ge
è
	`årštf
(
¡d”r
, "w¬nšg: % (%s:%d)\n", mes§ge, 
__FILE__
, 
__LINE__
)

	)

113 
	#CV_DC1394_CALL
(
ex´
) \

114 if((
ex´
)<0){ \

115 
	`OPENCV_ERROR
(
CV_StsIÁ”Çl
, "", "libdc1394 function call„eturned < 0"); \

116 }

	)

118 
	#DELAY
 50000

	)

121 
	#MONO16_BPP
 8

	)

124 
uyv2bgr
(cÚ¡ *
¤c
, *
de¡
, 
NumPix–s
);

125 
uyvy2bgr
(cÚ¡ *
¤c
, *
de¡
, 
NumPix–s
);

126 
uyyvyy2bgr
(cÚ¡ *
¤c
, *
de¡
, 
NumPix–s
);

127 
y2bgr
(cÚ¡ *
¤c
, *
de¡
, 
NumPix–s
);

128 
y162bgr
(cÚ¡ *
¤c
, *
de¡
, 
NumPix–s
, 
b™s
);

129 
rgb482bgr
(cÚ¡ *
¤c8
, *
de¡
, 
NumPix–s
, 
b™s
);

131 cÚ¡ * 
	gvideodev
[4]={

138 
	sCvC­tu»CAM_DC1394


140 
¿w1394hªdË_t
 
	mhªdË
;

141 
nodeid_t
 
	mÿm”a_node
;

142 
dc1394_ÿm”aÿ±u»
* 
	mÿm”a
;

143 
	mfÜm©
;

144 
	mmode
;

145 
	mcŞÜ_mode
;

146 
	mäame_¿‹
;

147 cÚ¡ * 
	mdeviû_Çme
;

148 
I¶Image
 
	mäame
;

149 
	mcÚv”t
;

150 
	mbufãr_is_wr™—bË
;

152 
	tCvC­tu»CAM_DC1394
;

154 
icvClo£CAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
 );

156 
icvG¿bF¿meCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
 );

157 
I¶Image
* 
icvR‘r›veF¿meCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, );

159 
icvG‘Prİ”tyCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, 
´İ”ty_id
 );

160 
icvS‘Prİ”tyCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
 );

163 
icvFÜm©SuµÜ‹dCAM_DC1394
(
fÜm©
, 
quadËt_t
 
fÜm©s
);

164 
icvModeSuµÜ‹dCAM_DC1394
(
fÜm©
, 
mode
, 
quadËt_t
 
modes
);

165 
icvCŞÜMode
Ğ
mode
 );

166 
icvG‘Be¡F¿meR©e
Ğ
CvC­tu»CAM_DC1394
 * 
ÿ±u»
, 
fÜm©
, 
mode
);

167 
icvResizeF¿me
(
CvC­tu»CAM_DC1394
 * 
ÿ±u»
);

170 
	#MAX_PORTS
 3

	)

171 
	#MAX_CAMERAS
 8

	)

172 
	#NUM_BUFFERS
 8

	)

173 
¿w1394_pÜtšfo
 
	gpÜts
[
MAX_PORTS
];

174 
¿w1394hªdË_t
 
	ghªdËs
[
MAX_PORTS
];

175 
	gÿmCouÁ
[
MAX_PORTS
];

176 
	gnumPÜts
 = -1;

177 
	gnumCam”as
 = 0;

178 
nodeid_t
 *
	gÿm”a_nodes
;

179 
	sÿmnode
 {
dc1394_ÿm”aÿ±u»
 
	mÿm
;
	mpÜŠum
;} 
	gÿm”as
[
MAX_CAMERAS
];

181 cÚ¡ 
	g´eã¼ed_modes
[]

185 
FORMAT_SVGA_NONCOMPRESSED_2
,

186 
MODE_1600x1200_RGB
, 
MODE_1600x1200_YUV422
, 
MODE_1280x960_RGB
, 
MODE_1280x960_YUV422
,

187 
MODE_1600x1200_MONO
, 
MODE_1280x960_MONO
, 
MODE_1600x1200_MONO16
, 
MODE_1280x960_MONO16
,

188 
FORMAT_SVGA_NONCOMPRESSED_1
,

189 
MODE_1024x768_RGB
, 
MODE_1024x768_YUV422
, 
MODE_800x600_RGB
, 
MODE_800x600_YUV422
,

190 
MODE_1024x768_MONO
, 
MODE_800x600_MONO
, 
MODE_1024x768_MONO16
, 
MODE_800x600_MONO16
,

191 
FORMAT_VGA_NONCOMPRESSED
,

192 
MODE_640x480_RGB
, 
MODE_640x480_YUV422
, 
MODE_640x480_YUV411
, 
MODE_320x240_YUV422
,

193 
MODE_160x120_YUV444
, 
MODE_640x480_MONO
, 
MODE_640x480_MONO16
,

194 
FORMAT_SCALABLE_IMAGE_SIZE
,

195 
MODE_FORMAT7_0
, 
MODE_FORMAT7_1
, 
MODE_FORMAT7_2
, 
MODE_FORMAT7_3
,

196 
MODE_FORMAT7_4
, 
MODE_FORMAT7_5
, 
MODE_FORMAT7_6
, 
MODE_FORMAT7_7
,

200 
	$icvIn™C­tu»_DC1394
(){

201 
p
;

203 
¿w1394hªdË_t
 
¿w_hªdË
 = 
	`¿w1394_Ãw_hªdË
();

204 ifĞ
¿w_hªdË
 == 0 ) {

205 
numPÜts
 = 0;

208 
numPÜts
 = 
	`¿w1394_g‘_pÜt_šfo
(
¿w_hªdË
, 
pÜts
, 
MAX_PORTS
);

209 
	`¿w1394_de¡roy_hªdË
(
¿w_hªdË
);

210 
p
 = 0;… < 
numPÜts
;…++) {

211 
hªdËs
[
p
] = 
	`dc1394_ü—‹_hªdË
(p);

212 ià(
hªdËs
[
p
]==
NULL
è{ 
numPÜts
=-1; ; }

215 
ÿm”a_nodes
 = 
	`dc1394_g‘_ÿm”a_nodes
(
hªdËs
[
p
], &
ÿmCouÁ
[p], 0);

216 
i
=0;i<
ÿmCouÁ
[
p
];i++) {

217 
ÿm”as
[
numCam”as
].
ÿm
.
node
 = 
ÿm”a_nodes
[
i
];

218 
ÿm”as
[
numCam”as
].
pÜŠum
 = 
p
;

219 
	`dc1394_¡İ_iso_ŒªsmissiÚ
(
hªdËs
[
p
], 
ÿm”a_nodes
[
i
]);

220 
numCam”as
++;

223 
	}
};

225 
CvC­tu»CAM_DC1394
 * 
	$icvC­tu»FromCAM_DC1394
 (
šdex
)

227 
quadËt_t
 
modes
[8], 
fÜm©s
;

228 
i
;

230 ià(
numPÜts
<0è
	`icvIn™C­tu»_DC1394
();

231 ià(
numPÜts
==0)

233 ià(
numCam”as
<1)

235 ià(
šdex
>=
numCam”as
)

237 ià(
šdex
<0)

240 
CvC­tu»CAM_DC1394
 * 
pÿp
 = (CvC­tu»CAM_DC1394*)
	`cvAÎoc
((*pcap));

243 
pÿp
->
deviû_Çme
 = 
videodev
[
ÿm”as
[
šdex
].
pÜŠum
];

244 
pÿp
->
hªdË
 = 
hªdËs
[
ÿm”as
[
šdex
].
pÜŠum
];

245 
pÿp
->
ÿm”a
 = &
ÿm”as
[
šdex
].
ÿm
;

248 ià(
	`dc1394_qu”y_suµÜ‹d_fÜm©s
(
pÿp
->
hªdË
,…ÿp->
ÿm”a
->
node
, &
fÜm©s
)<0) {

249 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù qu”y suµÜ‹d fÜm©s\n",
__FILE__
,
__LINE__
);

250 
fÜm©s
=0x0;

252 
i
=0; i < 
NUM_FORMATS
; i++) {

253 
modes
[
i
]=0;

254 ià(
	`icvFÜm©SuµÜ‹dCAM_DC1394
(
i
+
FORMAT_MIN
, 
fÜm©s
)){

255 ià(
	`dc1394_qu”y_suµÜ‹d_modes
(
pÿp
->
hªdË
,…ÿp->
ÿm”a
->
node
, 
i
+
FORMAT_MIN
, &
modes
[i])<0) {

256 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù qu”y FÜm©%d modes\n",
__FILE__
,
__LINE__
,
i
);

261 
pÿp
->
fÜm©
 = 0;

262 
pÿp
->
mode
 = 0;

263 
pÿp
->
cŞÜ_mode
 = 0;

264 
pÿp
->
äame_¿‹
 = 0;

266 
fÜm©_idx
 = -1;

269 
i
=0; (
pÿp
->
mode
 =ğ0è&& (
´eã¼ed_modes
[i] != 0); i++) {

270 if((
´eã¼ed_modes
[
i
] >ğ
FORMAT_MIN
è&& (´eã¼ed_modes[i] <ğ
FORMAT_MAX
)) {

271 
pÿp
->
fÜm©
 = 
´eã¼ed_modes
[
i
];

272 
fÜm©_idx
 = 
´eã¼ed_modes
[
i
] - 
FORMAT_MIN
;

275 
	`as£¹
(
fÜm©_idx
 != -1);

276 iàĞ! 
	`icvFÜm©SuµÜ‹dCAM_DC1394
(
pÿp
->
fÜm©
, 
fÜm©s
) )

278 iàĞ
	`icvModeSuµÜ‹dCAM_DC1394
(
pÿp
->
fÜm©
, 
´eã¼ed_modes
[
i
], 
modes
[
fÜm©_idx
]) ){

279 
pÿp
->
mode
 = 
´eã¼ed_modes
[
i
];

282 ià(
pÿp
->
mode
 == 0) {

283 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù fšd‡ suµÜ‹d modfÜhi ÿm”a\n",
__FILE__
,
__LINE__
);

284 
ERROR
;

287 
pÿp
->
cŞÜ_mode
 = 
	`icvCŞÜMode
Ğpÿp->
mode
 );

288 ifĞ
pÿp
->
cŞÜ_mode
 == -1){

289 
	`årštf
(
¡d”r
,"%s:%d: ERROR: BPP i UnsuµÜ‹d!!\n",
__FILE__
,
__LINE__
);

290 
ERROR
;

294 
pÿp
->
äame_¿‹
 = 
	`icvG‘Be¡F¿meR©e
Õÿp,…ÿp->
fÜm©
,…ÿp->
mode
);

296 ià(
pÿp
->
fÜm©
!=
FORMAT_SCALABLE_IMAGE_SIZE
) {

297 ià(
	`dc1394_dma_£tup_ÿ±u»
(
pÿp
->
hªdË
,…ÿp->
ÿm”a
->
node
, 
šdex
+1 ,

298 
pÿp
->
fÜm©
,…ÿp->
mode
, 
SPEED_400
,

299 
pÿp
->
äame_¿‹
, 
NUM_BUFFERS
, 1 ,

300 
pÿp
->
deviû_Çme
,…ÿp->
ÿm”a
è!ğ
DC1394_SUCCESS
) {

301 
	`årštf
(
¡d”r
,"%s:%d: FaedØ£tu°DMA c­tu» w™h VIDEO1394\n",
__FILE__
,
__LINE__
);

302 
ERROR
;

306 if(
	`dc1394_dma_£tup_fÜm©7_ÿ±u»
(
pÿp
->
hªdË
,pÿp->
ÿm”a
->
node
,
šdex
+1 ,

307 
pÿp
->
mode
, 
SPEED_400
, 
QUERY_FROM_CAMERA
,

308 ()
QUERY_FROM_CAMERA
, ()QUERY_FROM_CAMERA,

309 ()
QUERY_FROM_CAMERA
, ()QUERY_FROM_CAMERA,

310 
NUM_BUFFERS
, 1 ,

311 
pÿp
->
deviû_Çme
,…ÿp->
ÿm”a
è!ğ
DC1394_SUCCESS
) {

312 
	`årštf
(
¡d”r
,"%s:%d: FaedØ£tu°DMA c­tu» w™h VIDEO1394\n",
__FILE__
,
__LINE__
);

313 
ERROR
;

317 ià(
	`dc1394_¡¬t_iso_ŒªsmissiÚ
(
pÿp
->
hªdË
,…ÿp->
ÿm”a
->
node
)!=
DC1394_SUCCESS
) {

318 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù s¹ ISO¿nsmissiÚ\n",
__FILE__
,
__LINE__
);

319 
ERROR
;

322 
	`u¦“p
(
DELAY
);

324 
dc1394boŞ_t
 
¡©us
;

325 ià(
	`dc1394_g‘_iso_¡©us
(
pÿp
->
hªdË
,…ÿp->
ÿm”a
->
node
, &
¡©us
)!=
DC1394_SUCCESS
) {

326 
	`årštf
(
¡d”r
,"%s:%d: Could g‘ ISO stus",
__FILE__
,
__LINE__
);

327 
ERROR
;

329 ià(
¡©us
==
DC1394_FALSE
) {

330 
	`årštf
(
¡d”r
,"%s:%d: ISO¿nsmissiÚ„efu£ tØ¡¬t",
__FILE__
,
__LINE__
);

331 
ERROR
;

335 
pÿp
->
cÚv”t
=1;

338 
pÿp
->
bufãr_is_wr™—bË
 = 0;

340 
	`mem£t
(&(
pÿp
->
äame
), 0, (
I¶Image
));

341 
	`icvResizeF¿me
Ğ
pÿp
 );

342  
pÿp
;

344 
ERROR
:

346 
	}
};

348 
	$icvClo£CAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
 ){

349 
	`dc1394_¡İ_iso_ŒªsmissiÚ
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
);

350 
	`dc1394_dma_uÆi¡’
 (
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
);

352 if(
ÿ±u»
->
cÚv”t
){

353 
	`cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

355 
	}
}

357 
	$icvG¿bF¿meCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
 ){

360 
wa™šg
 = 0;

362 
»suÉ
 = 
	`dc1394_dma_sšgË_ÿ±u»_pŞl
(
ÿ±u»
->
ÿm”a
);

363 if(
»suÉ
==
DC1394_SUCCESS
){

366 if(
»suÉ
==
DC1394_NO_FRAME
){

367 
	`u¦“p
(1000000/120);

368 
wa™šg
 += 1.0/120.0;

371 
	`´štf
("dc1394_dma_single_capture_poll failed\n");

374 } 
wa™šg
<2);

375 
	`´štf
("dc1394_dma_single_capture_pollimed out\n");

377 
	}
}

379 
I¶Image
* 
	$icvR‘r›veF¿meCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, ){

380 if(
ÿ±u»
->
ÿm”a
->
ÿ±u»_bufãr
 )

382 if(
ÿ±u»
->
cÚv”t
){

384 * 
¤c
 = (*)
ÿ±u»
->
ÿm”a
->
ÿ±u»_bufãr
;

385 * 
d¡
 = (*)
ÿ±u»
->
äame
.
imageD©a
;

386 
ÿ±u»
->
cŞÜ_mode
) {

387 
COLOR_FORMAT7_RGB8
:

390 
i
=0;i<
ÿ±u»
->
äame
.
imageSize
;i+=6) {

391 
d¡
[
i
] = 
¤c
[i+2];

392 
d¡
[
i
+1] = 
¤c
[i+1];

393 
d¡
[
i
+2] = 
¤c
[i];

394 
d¡
[
i
+3] = 
¤c
[i+5];

395 
d¡
[
i
+4] = 
¤c
[i+4];

396 
d¡
[
i
+5] = 
¤c
[i+3];

399 
COLOR_FORMAT7_YUV422
:

401 
	`uyvy2bgr
(
¤c
,

402 
d¡
,

403 
ÿ±u»
->
ÿm”a
->
äame_width
 * c­tu»->ÿm”a->
äame_height
);

405 
COLOR_FORMAT7_MONO8
:

407 
	`y2bgr
(
¤c
,

408 
d¡
,

409 
ÿ±u»
->
ÿm”a
->
äame_width
 * c­tu»->ÿm”a->
äame_height
);

411 
COLOR_FORMAT7_YUV411
:

413 
	`uyyvyy2bgr
(
¤c
,

414 
d¡
,

415 
ÿ±u»
->
ÿm”a
->
äame_width
 * c­tu»->ÿm”a->
äame_height
);

417 
COLOR_FORMAT7_YUV444
:

419 
	`uyv2bgr
(
¤c
,

420 
d¡
,

421 
ÿ±u»
->
ÿm”a
->
äame_width
 * c­tu»->ÿm”a->
äame_height
);

423 
COLOR_FORMAT7_MONO16
:

425 
	`y162bgr
(
¤c
,

426 
d¡
,

427 
ÿ±u»
->
ÿm”a
->
äame_width
 * c­tu»->ÿm”a->
äame_height
, 
MONO16_BPP
);

429 
COLOR_FORMAT7_RGB16
:

431 
	`rgb482bgr
(
¤c
,

432 
d¡
,

433 
ÿ±u»
->
ÿm”a
->
äame_width
 * c­tu»->ÿm”a->
äame_height
, 
MONO16_BPP
);

436 
	`årštf
(
¡d”r
,"%s:%d: UnsuµÜ‹d cŞÜ mod%d\n",
__FILE__
,
__LINE__
,
ÿ±u»
->
cŞÜ_mode
);

442 
ÿ±u»
->
äame
.
imageD©a
 = (*èÿ±u»->
ÿm”a
->
ÿ±u»_bufãr
;

443 
ÿ±u»
->
äame
.
imageD©aOrigš
 = (*èÿ±u»->
ÿm”a
->
ÿ±u»_bufãr
;

448 
	`dc1394_dma_dÚe_w™h_bufãr
(
ÿ±u»
->
ÿm”a
);

450  &
ÿ±u»
->
äame
;

453 
	}
};

455 
	$icvG‘Prİ”tyCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, 
´İ”ty_id
 ){

456 
šdex
=-1;

457  
´İ”ty_id
 ) {

458 
CV_CAP_PROP_CONVERT_RGB
:

459  
ÿ±u»
->
cÚv”t
;

460 
CV_CAP_PROP_MODE
:

461  
ÿ±u»
->
mode
;

462 
CV_CAP_PROP_FORMAT
:

463  
ÿ±u»
->
fÜm©
;

464 
CV_CAP_PROP_FPS
:

465 
	`CV_DC1394_CALL
(
	`dc1394_g‘_video_äam”©e
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
,

466 (*è&
ÿ±u»
->
ÿm”a
->
äame_¿‹
));

467 
ÿ±u»
->
ÿm”a
->
äame_¿‹
) {

468 
FRAMERATE_1_875
:

470 
FRAMERATE_3_75
:

472 
FRAMERATE_7_5
:

474 
FRAMERATE_15
:

476 
FRAMERATE_30
:

478 
FRAMERATE_60
:

480 #ià
NUM_FRAMERATES
 > 6

481 
FRAMERATE_120
:

484 #ià
NUM_FRAMERATES
 > 7

485 
FRAMERATE_240
:

490 
šdex
 = 
´İ”ty_id
;

493 if(
šdex
>=
FEATURE_MIN
 && index<=
FEATURE_MAX
){

494 
dc1394boŞ_t
 
has_ã©u»
;

495 
	`CV_DC1394_CALL
Ğ
	`dc1394_is_ã©u»_´e£Á
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
,

496 
šdex
, &
has_ã©u»
));

497 if(!
has_ã©u»
){

498 
	`CV_WARN
("Feature is‚ot supported byhis camera");

501 
v®ue
;

502 
	`dc1394_g‘_ã©u»_v®ue
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
šdex
, &
v®ue
);

503  (è
v®ue
;

508 
	}
};

511 
	$icvResizeF¿me
(
CvC­tu»CAM_DC1394
 * 
ÿ±u»
){

512 if(
ÿ±u»
->
cÚv”t
){

515 if(
ÿ±u»
->
ÿm”a
->
äame_width
 !ğÿ±u»->
äame
.
width
 ||

516 
ÿ±u»
->
ÿm”a
->
äame_height
 !ğÿ±u»->
äame
.
height
 ||

517 
ÿ±u»
->
äame
.
d•th
 != 8 ||

518 
ÿ±u»
->
äame
.
nChªÃls
 != 3 ||

519 
ÿ±u»
->
äame
.
imageD©a
 =ğ
NULL
 ||

520 
ÿ±u»
->
bufãr_is_wr™—bË
 == 0)

522 if(
ÿ±u»
->
äame
.
imageD©a
 && c­tu»->
bufãr_is_wr™—bË
){

523 
	`cvR–—£D©a
Ğ&(
ÿ±u»
->
äame
));

525 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
, 
	`cvSize
Ğÿ±u»->
ÿm”a
->
äame_width
,

526 
ÿ±u»
->
ÿm”a
->
äame_height
 ),

527 
IPL_DEPTH_8U
, 3, 
IPL_ORIGIN_TL
, 4 );

528 
	`cvC»©eD©a
Ğ&(
ÿ±u»
->
äame
) );

529 
ÿ±u»
->
bufãr_is_wr™—bË
 = 1;

535 if(
ÿ±u»
->
bufãr_is_wr™—bË
){

536 
	`cvR–—£D©a
(&(
ÿ±u»
->
äame
));

540 
bµ
 = 8;

541 
nch
 = 3;

542 
width
 = 
ÿ±u»
->
ÿm”a
->
äame_width
;

543 
height
 = 
ÿ±u»
->
ÿm”a
->
äame_height
;

544 
code
 = 
	`CV_FOURCC
('B','G','R',0);

545 
ÿ±u»
->
cŞÜ_mode
){

546 
COLOR_FORMAT7_YUV422
:

547 
nch
 = 2;

548 
code
 = 
	`CV_FOURCC
('Y','4','2','2');

550 
COLOR_FORMAT7_MONO8
:

551 
code
 = 
	`CV_FOURCC
('Y',0,0,0);

552 
nch
 = 1;

554 
COLOR_FORMAT7_YUV411
:

555 
code
 = 
	`CV_FOURCC
('Y','4','1','1');

556 
width
 *= 2;

557 
nch
 = 3;

559 
COLOR_FORMAT7_YUV444
:

560 
code
 = 
	`CV_FOURCC
('Y','U','V',0);

561 
nch
 = 3;

563 
COLOR_FORMAT7_MONO16
:

564 
code
 = 
	`CV_FOURCC
('Y',0,0,0);

565 
bµ
 = 
IPL_DEPTH_16S
;

566 
nch
 = 1;

568 
COLOR_FORMAT7_RGB16
:

569 
bµ
 = 
IPL_DEPTH_16S
;

570 
nch
 = 3;

576 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,
	`cvSize
Ğ
width
, 
height
 ), 
bµ
, 
nch
, 
IPL_ORIGIN_TL
, 4 );

578 
ÿ±u»
->
bufãr_is_wr™—bË
 = 0;

581 
	}
}

585 
	$icvS‘CÚv”tRGB
(
CvC­tu»CAM_DC1394
 * 
ÿ±u»
, 
cÚv”t
){

586 if(
cÚv”t
==
ÿ±u»
->convert){

590 
ÿ±u»
->
cÚv”t
 = convert;

591  
	`icvResizeF¿me
Ğ
ÿ±u»
 );

592 
	}
}

596 
	$icvFÜm©SuµÜ‹dCAM_DC1394
(
fÜm©
, 
quadËt_t
 
fÜm©s
){

598 
shiá
 = 31 - (
fÜm©
 - 
FORMAT_MIN
);

599 
mask
 = 1 << 
shiá
;

600  (
fÜm©s
 & 
mask
) != 0;

601 
	}
}

605 
	$icvModeSuµÜ‹dCAM_DC1394
(
fÜm©
, 
mode
, 
quadËt_t
 
modes
){

607 
fÜm©_idx
 = 
fÜm©
 - 
FORMAT_MIN
;

608 
mode_fÜm©_mš
 = 
MODE_FORMAT0_MIN
 + 32*
fÜm©_idx
;

609 
shiá
 = 31 - (
mode
 - 
mode_fÜm©_mš
);

610 
mask
 = 0x1 << 
shiá
;

611  (
modes
 & 
mask
) != 0;

612 
	}
}

616 
	$icvS‘ModeCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
 * 
ÿ±u»
, 
mode
 ){

617 
quadËt_t
 
modes
, 
fÜm©s
;

621 
fÜm©
 = (
mode
 - 
MODE_FORMAT0_MIN
è/ 32 + 
FORMAT_MIN
;

624 ià(
	`dc1394_qu”y_suµÜ‹d_fÜm©s
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, &
fÜm©s
)<0) {

625 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù qu”y suµÜ‹d fÜm©s\n",
__FILE__
,
__LINE__
);

630 if(
	`icvFÜm©SuµÜ‹dCAM_DC1394
(
fÜm©
, 
fÜm©s
)==0){

635 ià(
	`dc1394_qu”y_suµÜ‹d_modes
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
fÜm©
, &
modes
)<0){

636 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù qu”y suµÜ‹d mode fÜ fÜm© %d\n",
__FILE__
,
__LINE__
, 
ÿ±u»
->
fÜm©
);

641 if(! 
	`icvModeSuµÜ‹dCAM_DC1394
(
fÜm©
, 
mode
, 
modes
) ){

645 
cŞÜ_mode
 = 
	`icvCŞÜMode
Ğ
mode
 );

647 if(
cŞÜ_mode
 == -1){

651 
äame_¿‹
 = 
	`icvG‘Be¡F¿meR©e
(
ÿ±u»
, 
fÜm©
, 
mode
);

653 
	`dc1394_dma_uÆi¡’
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
);

654 ià(
	`dc1394_dma_£tup_ÿ±u»
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, c­tu»->ÿm”a->
chªÃl
 ,

655 
fÜm©
, 
mode
, 
SPEED_400
,

656 
äame_¿‹
, 
NUM_BUFFERS
, 1 ,

657 
ÿ±u»
->
deviû_Çme
, c­tu»->
ÿm”a
è!ğ
DC1394_SUCCESS
) {

658 
	`årštf
(
¡d”r
,"%s:%d: FaedØ£tu°DMA c­tu» w™h VIDEO1394\n",
__FILE__
,
__LINE__
);

661 
	`dc1394_¡¬t_iso_ŒªsmissiÚ
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
);

663 
ÿ±u»
->
äame_¿‹
 = frame_rate;

664 
ÿ±u»
->
fÜm©
 = format;

665 
ÿ±u»
->
mode
 = mode;

666 
ÿ±u»
->
cŞÜ_mode
 = color_mode;

669 
	`icvResizeF¿me
Ğ
ÿ±u»
 );

671 
	}
}

674 
	$icvG‘Be¡F¿meR©e
Ğ
CvC­tu»CAM_DC1394
 * 
ÿ±u»
, 
fÜm©
, 
mode
 ){

675 
quadËt_t
 
äam”©es
;

676 ià(
	`dc1394_qu”y_suµÜ‹d_äam”©es
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
,

677 
fÜm©
, 
mode
, &
äam”©es
)!=
DC1394_SUCCESS
)

679 
	`årštf
(
¡d”r
,"%s:%d: Could‚Ù qu”y suµÜ‹d f¿m”©es\n",
__FILE__
,
__LINE__
);

680 
äam”©es
 = 0;

683 
f
=
FRAMERATE_MAX
; f>=
FRAMERATE_MIN
; f--) {

684 ià(
äam”©es
 & (0x1<< (31-(
f
-
FRAMERATE_MIN
)))) {

685  
f
;

689 
	}
}

692 
	$icvS‘F¿meR©eCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
 * 
ÿ±u»
, 
v®ue
 ){

693 
ås
=15;

694 if(
ÿ±u»
->
fÜm©
 =ğ
FORMAT_SCALABLE_IMAGE_SIZE
)

696 ià(
v®ue
==-1){

697 
ås
=
	`icvG‘Be¡F¿meR©e
Ğ
ÿ±u»
, c­tu»->
fÜm©
, c­tu»->
mode
 );

699 ià(
v®ue
==1.875)

700 
ås
=
FRAMERATE_1_875
;

701 ià(
v®ue
==3.75)

702 
ås
=
FRAMERATE_3_75
;

703 ià(
v®ue
==7.5)

704 
ås
=
FRAMERATE_7_5
;

705 ià(
v®ue
==15)

706 
ås
=
FRAMERATE_15
;

707 ià(
v®ue
==30)

708 
ås
=
FRAMERATE_30
;

709 ià(
v®ue
==60)

710 
ås
=
FRAMERATE_60
;

711 #ià
NUM_FRAMERATES
 > 6

712 ià(
v®ue
==120)

713 
ås
=
FRAMERATE_120
;

715 #ià
NUM_FRAMERATES
 > 7

716 ià(
v®ue
==240)

717 
ås
=
FRAMERATE_240
;

719 
	`dc1394_£t_video_äam”©e
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
,
ås
);

720 
	`dc1394_g‘_video_äam”©e
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
,

721 (*è&
ÿ±u»
->
ÿm”a
->
äame_¿‹
);

723  
ås
==(è
ÿ±u»
->
ÿm”a
->
äame_¿‹
;

724 
	}
}

728 
	$icvCŞÜMode
Ğ
mode
 ){

729 
mode
) {

730 
MODE_160x120_YUV444
:

731  
COLOR_FORMAT7_YUV444
;

732 
MODE_320x240_YUV422
:

733 
MODE_640x480_YUV422
:

734 
MODE_800x600_YUV422
:

735 
MODE_1024x768_YUV422
:

736 
MODE_1280x960_YUV422
:

737 
MODE_1600x1200_YUV422
:

738  
COLOR_FORMAT7_YUV422
;

739 
MODE_640x480_YUV411
:

740  
COLOR_FORMAT7_YUV411
;

741 
MODE_640x480_RGB
:

742 
MODE_800x600_RGB
:

743 
MODE_1024x768_RGB
:

744 
MODE_1280x960_RGB
:

745 
MODE_1600x1200_RGB
:

746  
COLOR_FORMAT7_RGB8
;

747 
MODE_640x480_MONO
:

748 
MODE_800x600_MONO
:

749 
MODE_1024x768_MONO
:

750 
MODE_1280x960_MONO
:

751 
MODE_1600x1200_MONO
:

752  
COLOR_FORMAT7_MONO8
;

753 
MODE_640x480_MONO16
:

754 
MODE_800x600_MONO16
:

755 
MODE_1024x768_MONO16
:

756 
MODE_1280x960_MONO16
:

757 
MODE_1600x1200_MONO16
:

758  
COLOR_FORMAT7_MONO16
;

759 
MODE_FORMAT7_0
:

760 
MODE_FORMAT7_1
:

761 
MODE_FORMAT7_2
:

762 
MODE_FORMAT7_3
:

763 
MODE_FORMAT7_4
:

764 
MODE_FORMAT7_5
:

765 
MODE_FORMAT7_6
:

766 
MODE_FORMAT7_7
:

767 
	`årštf
(
¡d”r
,"%s:%d: FÜm©7‚Ù y‘ suµÜ‹d\n",
__FILE__
,
__LINE__
);

772 
	}
}

777 
	$icvS‘F—tu»CAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, 
ã©u»_id
, 
v®
){

778 
dc1394boŞ_t
 
isOn
 = 
DC1394_FALSE
;

779 
dc1394boŞ_t
 
hasAutoC­ab™y
 = 
DC1394_FALSE
;

780 
dc1394boŞ_t
 
isAutoOn
 = 
DC1394_FALSE
;

781 
nv®
;

782 
mšv®
,
maxv®
;

785 ifĞ
	`dc1394_is_ã©u»_Ú
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, &
isOn
)

786 =ğ
DC1394_FAILURE
 ) {

789 ifĞ
isOn
 =ğ
DC1394_FALSE
 ) {

791 ifĞ
	`dc1394_ã©u»_Ú_off
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, 1è=ğ
DC1394_FAILURE
 ) {

792 
	`årštf
(
¡d”r
, "”rÜuºšg f—tu» %d on!\n", 
ã©u»_id
);

798 
	`dc1394_has_auto_mode
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, &
hasAutoC­ab™y
);

799 ifĞ
hasAutoC­ab™y
 ) {

802 ifĞ
	`dc1394_is_ã©u»_auto
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, &
isAutoOn
 ) =ğ
DC1394_FAILURE
 ) {

803 
	`årštf
(
¡d”r
, "”rÜ d‘”mššg iàã©u» %d ha autØÚ!\n", 
ã©u»_id
);

808 if(
v®
==-1){

809 
	`årštf
(
¡d”r
, "ã©u» %d dÛ nÙ suµÜˆautØmode\n", 
ã©u»_id
);

813 if(
v®
==-1){

815 ifĞ
isAutoOn
 =ğ
DC1394_FALSE
 ) {

816 if(
	`dc1394_auto_Ú_off
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, 1è=ğ
DC1394_FAILURE
 ) {

817 
	`årštf
(
¡d”r
, "”rÜuºšg f—tu» %d‡utØON!\n", 
ã©u»_id
);

825 ifĞ
isAutoOn
 =ğ
DC1394_TRUE
 ) {

826 if(
	`dc1394_auto_Ú_off
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, 0è=ğ
DC1394_FAILURE
 ) {

827 
	`årštf
(
¡d”r
, "”rÜuºšg f—tu» %d‡utØOFF!\n", 
ã©u»_id
);

833 
	`CV_DC1394_CALL
Ğ
	`dc1394_g‘_mš_v®ue
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, &
mšv®
));

834 
	`CV_DC1394_CALL
Ğ
	`dc1394_g‘_max_v®ue
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, &
maxv®
));

835 
v®
 = ()
	`MIN
(
maxv®
, 
	`MAX
(()v®, 
mšv®
));

838 ià(
	`dc1394_£t_ã©u»_v®ue
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, 
v®
) ==

839 
DC1394_FAILURE
){

840 
	`årštf
(
¡d”r
, "error setting feature value\n");

843 ià(
	`dc1394_g‘_ã©u»_v®ue
(
ÿ±u»
->
hªdË
, c­tu»->
ÿm”a
->
node
, 
ã©u»_id
, &
nv®
) ==

844 
DC1394_FAILURE
){

845 
	`årštf
(
¡d”r
, "error setting feature value\n");

848  
nv®
==()
v®
;

850 
	}
}

854 
	$icvS‘Prİ”tyCAM_DC1394
Ğ
CvC­tu»CAM_DC1394
* 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
 ){

855 
šdex
=-1;

856  
´İ”ty_id
 ) {

857 
CV_CAP_PROP_CONVERT_RGB
:

858  
	`icvS‘CÚv”tRGB
Ğ
ÿ±u»
, 
v®ue
 != 0 );

859 
CV_CAP_PROP_MODE
:

860  
	`icvS‘ModeCAM_DC1394
Ğ
ÿ±u»
, (è
v®ue
 );

861 
CV_CAP_PROP_FPS
:

862  
	`icvS‘F¿meR©eCAM_DC1394
Ğ
ÿ±u»
, 
v®ue
 );

863 
CV_CAP_PROP_BRIGHTNESS
:

864 
šdex
 = 
FEATURE_BRIGHTNESS
;

866 
CV_CAP_PROP_CONTRAST
:

867 
šdex
 = 
FEATURE_GAMMA
;

869 
CV_CAP_PROP_SATURATION
:

870 
šdex
 = 
FEATURE_SATURATION
;

872 
CV_CAP_PROP_HUE
:

873 
šdex
 = 
FEATURE_HUE
;

875 
CV_CAP_PROP_GAIN
:

876 
šdex
 = 
FEATURE_GAIN
;

879 
šdex
 = 
´İ”ty_id
;

882 if(
šdex
>=
FEATURE_MIN
 && index<=
FEATURE_MAX
){

883  
	`icvS‘F—tu»CAM_DC1394
(
ÿ±u»
, 
šdex
, (è
v®ue
);

886 
	}
};

895 
	#YUV2RGB
(
y
, 
u
, 
v
, 
r
, 
g
, 
b
)\

896 
r
 = 
y
 + ((
v
*1436) >> 10);\

897 
g
 = 
y
 - ((
u
*352 + 
v
*731) >> 10);\

898 
b
 = 
y
 + ((
u
*1814) >> 10);\

899 
r
 =„ < 0 ? 0 :„;\

900 
g
 = g < 0 ? 0 : g;\

901 
b
 = b < 0 ? 0 : b;\

902 
r
 =„ > 255 ? 255 :„;\

903 
g
 = g > 255 ? 255 : g;\

904 
b
 = b > 255 ? 255 : 
	)
b

907 
	$uyv2bgr
(cÚ¡ *
¤c
, *
de¡
,

908 
NumPix–s
)

910 
i
 = 
NumPix–s
 + (NumPixels << 1) - 1;

911 
j
 = 
NumPix–s
 + (NumPixels << 1) - 1;

912 
y
, 
u
, 
v
;

913 
r
, 
g
, 
b
;

915 
i
 > 0) {

916 
v
 = 
¤c
[
i
--] - 128;

917 
y
 = 
¤c
[
i
--];

918 
u
 = 
¤c
[
i
--] - 128;

919 
	`YUV2RGB
(
y
, 
u
, 
v
, 
r
, 
g
, 
b
);

920 
de¡
[
j
--] = 
r
;

921 
de¡
[
j
--] = 
g
;

922 
de¡
[
j
--] = 
b
;

924 
	}
}

927 
	$uyvy2bgr
(cÚ¡ *
¤c
, *
de¡
,

928 
NumPix–s
)

930 
i
 = (
NumPix–s
 << 1) - 1;

931 
j
 = 
NumPix–s
 + (NumPixels << 1) - 1;

932 
y0
, 
y1
, 
u
, 
v
;

933 
r
, 
g
, 
b
;

935 
i
 > 0) {

936 
y1
 = 
¤c
[
i
--];

937 
v
 = 
¤c
[
i
--] - 128;

938 
y0
 = 
¤c
[
i
--];

939 
u
 = 
¤c
[
i
--] - 128;

940 
	`YUV2RGB
(
y1
, 
u
, 
v
, 
r
, 
g
, 
b
);

941 
de¡
[
j
--] = 
r
;

942 
de¡
[
j
--] = 
g
;

943 
de¡
[
j
--] = 
b
;

944 
	`YUV2RGB
(
y0
, 
u
, 
v
, 
r
, 
g
, 
b
);

945 
de¡
[
j
--] = 
r
;

946 
de¡
[
j
--] = 
g
;

947 
de¡
[
j
--] = 
b
;

949 
	}
}

953 
	$uyyvyy2bgr
(cÚ¡ *
¤c
, *
de¡
,

954 
NumPix–s
)

956 
i
 = 
NumPix–s
 + (NumPixels >> 1) - 1;

957 
j
 = 
NumPix–s
 + (NumPixels << 1) - 1;

958 
y0
, 
y1
, 
y2
, 
y3
, 
u
, 
v
;

959 
r
, 
g
, 
b
;

961 
i
 > 0) {

962 
y3
 = 
¤c
[
i
--];

963 
y2
 = 
¤c
[
i
--];

964 
v
 = 
¤c
[
i
--] - 128;

965 
y1
 = 
¤c
[
i
--];

966 
y0
 = 
¤c
[
i
--];

967 
u
 = 
¤c
[
i
--] - 128;

968 
	`YUV2RGB
(
y3
, 
u
, 
v
, 
r
, 
g
, 
b
);

969 
de¡
[
j
--] = 
r
;

970 
de¡
[
j
--] = 
g
;

971 
de¡
[
j
--] = 
b
;

972 
	`YUV2RGB
(
y2
, 
u
, 
v
, 
r
, 
g
, 
b
);

973 
de¡
[
j
--] = 
r
;

974 
de¡
[
j
--] = 
g
;

975 
de¡
[
j
--] = 
b
;

976 
	`YUV2RGB
(
y1
, 
u
, 
v
, 
r
, 
g
, 
b
);

977 
de¡
[
j
--] = 
r
;

978 
de¡
[
j
--] = 
g
;

979 
de¡
[
j
--] = 
b
;

980 
	`YUV2RGB
(
y0
, 
u
, 
v
, 
r
, 
g
, 
b
);

981 
de¡
[
j
--] = 
r
;

982 
de¡
[
j
--] = 
g
;

983 
de¡
[
j
--] = 
b
;

985 
	}
}

988 
	$y2bgr
(cÚ¡ *
¤c
, *
de¡
,

989 
NumPix–s
)

991 
i
 = 
NumPix–s
 - 1;

992 
j
 = 
NumPix–s
 + (NumPixels << 1) - 1;

993 
y
;

995 
i
 > 0) {

996 
y
 = 
¤c
[
i
--];

997 
de¡
[
j
--] = 
y
;

998 
de¡
[
j
--] = 
y
;

999 
de¡
[
j
--] = 
y
;

1001 
	}
}

1004 
	$y162bgr
(cÚ¡ *
¤c
, *
de¡
,

1005 
NumPix–s
, 
b™s
)

1007 
i
 = (
NumPix–s
 << 1) - 1;

1008 
j
 = 
NumPix–s
 + (NumPixels << 1) - 1;

1009 
y
;

1011 
i
 > 0) {

1012 
y
 = 
¤c
[
i
--];

1013 
y
 = (y + (
¤c
[
i
--] << 8)è>> (
b™s
 - 8);

1014 
de¡
[
j
--] = 
y
;

1015 
de¡
[
j
--] = 
y
;

1016 
de¡
[
j
--] = 
y
;

1018 
	}
}

1022 
	$rgb482bgr
(cÚ¡ *
¤c
, *
de¡
,

1023 
NumPix–s
, 
b™s
)

1025 
i
 = (
NumPix–s
 << 1) - 1;

1026 
j
 = 
NumPix–s
 + (NumPixels << 1) - 1;

1027 
y
;

1029 
i
 > 0) {

1030 
y
 = 
¤c
[
i
--];

1031 
de¡
[
j
-2] = (
y
 + (
¤c
[
i
--] << 8)è>> (
b™s
 - 8);

1032 
j
--;

1033 
y
 = 
¤c
[
i
--];

1034 
de¡
[
j
] = (
y
 + (
¤c
[
i
--] << 8)è>> (
b™s
 - 8);

1035 
j
--;

1036 
y
 = 
¤c
[
i
--];

1037 
de¡
[
j
+2] = (
y
 + (
¤c
[
i
--] << 8)è>> (
b™s
 - 8);

1038 
j
--;

1040 
	}
}

1043 şas 
	cCvC­tu»CAM_DC1394_CPP
 : 
public
 
CvC­tu»


1045 
public
:

1046 
	$CvC­tu»CAM_DC1394_CPP
(è{ 
ÿ±u»DC1394
 = 0; }

1047 
vœtu®
 ~
	$CvC­tu»CAM_DC1394_CPP
(è{ 
	`şo£
(); 
	}
}

1049 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

1050 
vœtu®
 
şo£
();

1052 
vœtu®
 
	$g‘Prİ”ty
() const;

1053 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

1054 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

1055 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

1056 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_DC1394
; 
	}
}

1057 
	g´Ùeùed
:

1059 
CvC­tu»CAM_DC1394
* 
ÿ±u»DC1394
;

1062 
boŞ
 
	gCvC­tu»CAM_DC1394_CPP
::
	$İ’
Ğ
šdex
 )

1064 
	`şo£
();

1065 
ÿ±u»DC1394
 = 
	`icvC­tu»FromCAM_DC1394
(
šdex
);

1066  
ÿ±u»DC1394
 != 0;

1067 
	}
}

1069 
	gCvC­tu»CAM_DC1394_CPP
::
	$şo£
()

1071 ifĞ
ÿ±u»DC1394
 )

1073 
	`icvClo£CAM_DC1394
Ğ
ÿ±u»DC1394
 );

1074 
	`cvF»e
Ğ&
ÿ±u»DC1394
 );

1076 
	}
}

1078 
boŞ
 
	gCvC­tu»CAM_DC1394_CPP
::
	$g¿bF¿me
()

1080  
ÿ±u»DC1394
 ? 
	`icvG¿bF¿meCAM_DC1394
Ğÿ±u»DC1394 ) !ğ0 : 
çl£
;

1081 
	}
}

1083 
I¶Image
* 
	gCvC­tu»CAM_DC1394_CPP
::
	$»Œ›veF¿me
()

1085  
ÿ±u»DC1394
 ? (
I¶Image
*)
	`icvR‘r›veF¿meCAM_DC1394
( captureDC1394, 0 ) : 0;

1086 
	}
}

1088 
	gCvC­tu»CAM_DC1394_CPP
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

1092 
CvC­tu»CAM_DC1394
* 
ÿp
 = 
cÚ¡_ÿ¡
<CvC­tu»CAM_DC1394*>(
ÿ±u»DC1394
);

1094  
ÿp
 ? 
	`icvG‘Prİ”tyCAM_DC1394
Ğÿp, 
´İId
 ) : 0;

1095 
	}
}

1097 
boŞ
 
	gCvC­tu»CAM_DC1394_CPP
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

1099  
ÿ±u»DC1394
 ? 
	`icvS‘Prİ”tyCAM_DC1394
Ğÿ±u»DC1394, 
´İId
, 
v®ue
 ) !ğ0 : 
çl£
;

1100 
	}
}

1102 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_DC1394
Ğ
šdex
 )

1104 
CvC­tu»CAM_DC1394_CPP
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_DC1394_CPP;

1106 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

1107  
ÿ±u»
;

1109 
d–‘e
 
ÿ±u»
;

1111 
	}
}

	@cap_dc1394_v2.cpp

42 
	~"´ecomp.hµ
"

44 #ifdeà
HAVE_DC1394_2


46 
	~<uni¡d.h
>

47 
	~<¡dšt.h
>

48 #ifdeà
WIN32


51 #iâdeà
__SYS_SELECT_H__


52 
	#__SYS_SELECT_H__
 1

	)

53 
	~<wšsock2.h
>

56 
	~<sys/£Ëù.h
>

58 
	~<dc1394/dc1394.h
>

59 
	~<¡dlib.h
>

60 
	~<¡ršg.h
>

62 
dc1394”rÜ_t
 
	$ad­tBufãrS‹»oLoÿl
(
dc1394video_äame_t
 *
š
, dc1394video_äame_ˆ*
out
)

64 
ušt32_t
 
bµ
;

67 
out
->
size
[0] = 
š
->size[0];

68 
out
->
size
[1] = 
š
->size[1] * 2;

69 
out
->
pos™iÚ
[0] = 
š
->position[0];

70 
out
->
pos™iÚ
[1] = 
š
->position[1];

73 
š
->
cŞÜ_codšg
)

75 
DC1394_COLOR_CODING_RAW16
:

76 
out
->
cŞÜ_codšg
 = 
DC1394_COLOR_CODING_RAW8
;

78 
DC1394_COLOR_CODING_MONO16
:

79 
DC1394_COLOR_CODING_YUV422
:

80 
out
->
cŞÜ_codšg
 = 
DC1394_COLOR_CODING_MONO8
;

83  
DC1394_INVALID_COLOR_CODING
;

87 
out
->
cŞÜ_f‹r
 = 
š
->color_filter;

93 
out
->
d©a_d•th
 = 8;

98 
out
->
video_mode
 = 
š
->video_mode;

101 
out
->
·ddšg_by‹s
 = 
š
->padding_bytes;

104 
	`dc1394_g‘_cŞÜ_codšg_b™_size
(
out
->
cŞÜ_codšg
, &
bµ
);

105 
out
->
image_by‹s
 = (out->
size
[0] * out->size[1] * 
bµ
) / 8;

108 
out
->
tÙ®_by‹s
 = out->
image_by‹s
 + out->
·ddšg_by‹s
;

111 
out
->
·ck‘_size
 = 
š
->packet_size;

112 
out
->
·ck‘s_³r_äame
 = 
š
->packets_per_frame;

115 
out
->
time¡amp
 = 
š
->timestamp;

116 
out
->
äames_behšd
 = 
š
->frames_behind;

117 
out
->
ÿm”a
 = 
š
->camera;

118 
out
->
id
 = 
š
->id;

121 ià(
out
->
tÙ®_by‹s
 > out->
®loÿ‹d_image_by‹s
)

123 
	`ä“
(
out
->
image
);

124 
out
->
image
 = (
ušt8_t
*)
	`m®loc
(out->
tÙ®_by‹s
 * (uint8_t));

125 
out
->
®loÿ‹d_image_by‹s
 = out->
tÙ®_by‹s
;

129 
	`memıy
(&(
out
->
image
[out->
image_by‹s
]), &(
š
->image[š->image_by‹s]), out->
·ddšg_by‹s
);

130 
out
->
l™e_’dŸn
 = 
DC1394_FALSE
;

131 
out
->
d©a_š_·ddšg
 = 
DC1394_FALSE
;

132  
DC1394_SUCCESS
;

133 
	}
}

135 
dc1394”rÜ_t
 
	$dc1394_deš‹¾aû_¡”eo_äames_fixed
(
dc1394video_äame_t
 *
š
,

136 
dc1394video_äame_t
 *
out
, 
dc1394¡”eo_m‘hod_t
 
m‘hod
)

138 if((
š
->
cŞÜ_codšg
 =ğ
DC1394_COLOR_CODING_RAW16
) ||

139 (
š
->
cŞÜ_codšg
 =ğ
DC1394_COLOR_CODING_MONO16
) ||

140 (
š
->
cŞÜ_codšg
 =ğ
DC1394_COLOR_CODING_YUV422
))

142 
m‘hod
)

145 
DC1394_STEREO_METHOD_INTERLACED
:

146 
	`ad­tBufãrS‹»oLoÿl
(
š
, 
out
);

149 
	`dc1394_deš‹¾aû_¡”eo
(
š
->
image
, 
out
->image, out->
size
[0], out->size[1]);

152 
DC1394_STEREO_METHOD_FIELD
:

153 
	`ad­tBufãrS‹»oLoÿl
(
š
, 
out
);

154 
	`memıy
(
out
->
image
, 
š
->image, out->
image_by‹s
);

158  
DC1394_INVALID_STEREO_METHOD
;

161  
DC1394_FUNCTION_NOT_SUPPORTED
;

162 
	}
}

164 
ušt32_t
 
	$g‘CÚŒŞRegi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
)

166 
ušt32_t
 
v®ue
 = 0;

167 
dc1394”rÜ_t
 
”r
 = 
	`dc1394_g‘_cÚŒŞ_»gi¡”
(
ÿm”a
, 
off£t
, &
v®ue
);

169 
	`as£¹
(
”r
 =ğ
DC1394_SUCCESS
);

170  
”r
 =ğ
DC1394_SUCCESS
 ? 
v®ue
 : 0xffffffff;

171 
	}
}

173 
	sCvDC1394


175 
CvDC1394
();

176 ~
CvDC1394
();

178 
dc1394_t
* 
	mdc
;

179 
fd_£t
 
	mÿmFds
;

182 
	gCvDC1394
::
	$CvDC1394
()

184 
dc
 = 
	`dc1394_Ãw
();

185 
	`FD_ZERO
(&
ÿmFds
);

186 
	}
}

188 
	gCvDC1394
::~
	$CvDC1394
()

190 ià(
dc
)

191 
	`dc1394_ä“
(
dc
);

192 
dc
 = 0;

193 
	}
}

195 
CvDC1394
 
	gdc1394
;

197 şas 
	cCvC­tu»CAM_DC1394_v2_CPP
 : 
public
 
CvC­tu»


199 
public
:

200 
dc1394´İ”t›s
[
CV_CAP_PROP_MAX_DC1394
];

201 
CvC­tu»CAM_DC1394_v2_CPP
();

202 
	mvœtu®
 ~
	$CvC­tu»CAM_DC1394_v2_CPP
()

204 
	`şo£
();

207 
vœtu®
 
boŞ
 
	`İ’
(
šdex
);

208 
vœtu®
 
	`şo£
();

210 
vœtu®
 
	$g‘Prİ”ty
() const;

211 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

212 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

213 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

214 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_DC1394
; 
	}
}

217 
	g´Ùeùed
:

218 
vœtu®
 
boŞ
 
¡¬tC­tu»
();

219 
vœtu®
 
boŞ
 
g‘Vid”eC®ib¿tiÚInfo
Ğ* 
buf
, 
bufSize
 );

220 
vœtu®
 
boŞ
 
š™Vid”eReùifyM­s
ĞcÚ¡ * 
šfo
, 
I¶Image
* 
ml
[2], I¶Image* 
mr
[2] );

222 
ušt64_t
 
	gguid
;

223 
dc1394ÿm”a_t
* 
	gdcCam
;

224 
	gisoS³ed
;

225 
	gvideoMode
;

226 
	gäameWidth
, 
	gäameHeight
;

227 
	gås
;

228 
	gnDMABufs
;

229 
boŞ
 
	g¡¬‹d
;

230 
	gu£rMode
;

232 ’um { 
	gVIDERE
 = 0x5505 };

234 
	gÿm”aId
;

235 
boŞ
 
	gcŞÜS‹»o
;

236 
dc1394bay”_m‘hod_t
 
	gbay”
;

237 
dc1394cŞÜ_f‹r_t
 
	gbay”F‹r
;

239 ’um { 
	gNIMG
 = 2 };

240 
I¶Image
 *
	gimg
[
NIMG
];

241 
dc1394video_äame_t
* 
	gäameC
;

242 
	gnimages
;

244 
boŞ
 
	g»ùify
;

245 
boŞ
 
	gš™_»ùify
;

246 
I¶Image
 *
	gm­s
[
NIMG
][2];

247 
dc1394ã©u»£t_t
 
	gã©u»_£t
;

250 
	gCvC­tu»CAM_DC1394_v2_CPP
::
dc1394´İ”t›s
[
CV_CAP_PROP_MAX_DC1394
] = {

253 
DC1394_FEATURE_FRAME_RATE
,

255 
DC1394_FEATURE_BRIGHTNESS
,

257 
DC1394_FEATURE_SATURATION
,

258 
DC1394_FEATURE_HUE
,

259 
DC1394_FEATURE_GAIN
,

260 
DC1394_FEATURE_SHUTTER
,

262 
DC1394_FEATURE_WHITE_BALANCE
,

264 
DC1394_FEATURE_SHARPNESS
,

265 
DC1394_FEATURE_EXPOSURE
,

266 
DC1394_FEATURE_GAMMA
,

267 
DC1394_FEATURE_TEMPERATURE
,

268 
DC1394_FEATURE_TRIGGER
,

269 
DC1394_FEATURE_TRIGGER_DELAY
,

270 
DC1394_FEATURE_WHITE_BALANCE
,

271 
DC1394_FEATURE_ZOOM
,

272 
DC1394_FEATURE_FOCUS
,

275 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$CvC­tu»CAM_DC1394_v2_CPP
()

277 
guid
 = 0;

278 
dcCam
 = 0;

279 
isoS³ed
 = 400;

280 
ås
 = 15;

282 
nDMABufs
 = 8;

283 
¡¬‹d
 = 
çl£
;

284 
ÿm”aId
 = 0;

285 
cŞÜS‹»o
 = 
çl£
;

286 
bay”
 = 
DC1394_BAYER_METHOD_BILINEAR
;

287 
bay”F‹r
 = 
DC1394_COLOR_FILTER_GRBG
;

288 
äameWidth
 = 640;

289 
äameHeight
 = 480;

291 
i
 = 0; i < 
NIMG
; i++)

292 
img
[
i
] = 
m­s
[i][0] = maps[i][1] = 0;

293 
äameC
 = 0;

294 
nimages
 = 1;

295 
»ùify
 = 
çl£
;

296 
u£rMode
 = -1;

297 
	}
}

300 
boŞ
 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$¡¬tC­tu»
()

302 
i
;

303 
code
 = 0;

304 ià(!
dcCam
)

305  
çl£
;

306 ià(
isoS³ed
 > 0)

309 ià(
isoS³ed
 > 400 && 
dcCam
->
bmode_ÿ·bË
 =ğ
DC1394_TRUE
)

311 
	`dc1394_video_£t_İ”©iÚ_mode
(
dcCam
, 
DC1394_OPERATION_MODE_1394B
);

313 
code
 = 
	`dc1394_video_£t_iso_¥“d
(
dcCam
,

314 
isoS³ed
 <ğ100 ? 
DC1394_ISO_SPEED_100
 :

315 
isoS³ed
 <ğ200 ? 
DC1394_ISO_SPEED_200
 :

316 
isoS³ed
 <ğ400 ? 
DC1394_ISO_SPEED_400
 :

317 
isoS³ed
 <ğ800 ? 
DC1394_ISO_SPEED_800
 :

318 
isoS³ed
 =ğ1600 ? 
DC1394_ISO_SPEED_1600
 :

319 
DC1394_ISO_SPEED_3200
);

323 ià(
u£rMode
 >= 0)

326 
dc1394video_mode_t
 
wª‹dMode
;

327 
dc1394video_modes_t
 
videoModes
;

328 
	`dc1394_video_g‘_suµÜ‹d_modes
(
dcCam
, &
videoModes
);

332 ià(
u£rMode
 < ()
videoModes
.
num
)

334 
wª‹dMode
 = 
videoModes
.
modes
[
u£rMode
];

338 ià((
u£rMode
 >ğ
DC1394_VIDEO_MODE_MIN
è&& (u£rMod<ğ
DC1394_VIDEO_MODE_MAX
 ))

341 
j
 = 0;

342 (
j
< ()
videoModes
.
num
è&& videoModes.
modes
[j]!=
u£rMode
)

344 
j
++;

347 ià(()
videoModes
.
modes
[
j
]==
u£rMode
)

349 
wª‹dMode
 = 
videoModes
.
modes
[
j
];

353 
u£rMode
 = -1;

358 
u£rMode
 = -1;

361 ià(
u£rMode
 != -1)

363 
code
 = 
	`dc1394_video_£t_mode
(
dcCam
, 
wª‹dMode
);

364 
ušt32_t
 
width
, 
height
;

365 
	`dc1394_g‘_image_size_äom_video_mode
(
dcCam
, 
wª‹dMode
, &
width
, &
height
);

366 
äameWidth
 = ()
width
;

367 
äameHeight
 = ()
height
;

371 ià(
u£rMode
 =ğ-1 && (
äameWidth
 > 0 || 
äameHeight
 > 0))

373 
dc1394video_mode_t
 
be¡Mode
 = (dc1394video_mode_t) - 1;

374 
dc1394video_modes_t
 
videoModes
;

375 
	`dc1394_video_g‘_suµÜ‹d_modes
(
dcCam
, &
videoModes
);

376 
i
 = 0; i < ()
videoModes
.
num
; i++)

378 
dc1394video_mode_t
 
mode
 = 
videoModes
.
modes
[
i
];

379 ià(
mode
 >ğ
DC1394_VIDEO_MODE_FORMAT7_MIN
 && mod<ğ
DC1394_VIDEO_MODE_FORMAT7_MAX
)

381 
´ef
 = -1;

382 
dc1394cŞÜ_codšg_t
 
cŞÜCodšg
;

383 
	`dc1394_g‘_cŞÜ_codšg_äom_video_mode
(
dcCam
, 
mode
, &
cŞÜCodšg
);

385 
ušt32_t
 
width
, 
height
;

386 
	`dc1394_g‘_image_size_äom_video_mode
(
dcCam
, 
mode
, &
width
, &
height
);

387 ià(()
width
 =ğ
äameWidth
 || ()
height
 =ğ
äameHeight
)

389 ià(
cŞÜCodšg
 =ğ
DC1394_COLOR_CODING_RGB8
 ||

390 
cŞÜCodšg
 =ğ
DC1394_COLOR_CODING_RAW8
)

392 
be¡Mode
 = 
mode
;

396 ià(
cŞÜCodšg
 =ğ
DC1394_COLOR_CODING_YUV411
 ||

397 
cŞÜCodšg
 =ğ
DC1394_COLOR_CODING_YUV422
 ||

398 (
cŞÜCodšg
 =ğ
DC1394_COLOR_CODING_YUV444
 &&

399 
´ef
 < 1))

401 
be¡Mode
 = 
mode
;

402 
´ef
 = 1;

406 ià(
cŞÜCodšg
 =ğ
DC1394_COLOR_CODING_MONO8
)

408 
be¡Mode
 = 
mode
;

409 
´ef
 = 0;

413 ià(()
be¡Mode
 >= 0)

414 
code
 = 
	`dc1394_video_£t_mode
(
dcCam
, 
be¡Mode
);

417 ià(
ås
 > 0)

419 
dc1394video_mode_t
 
mode
;

420 
dc1394äam”©es_t
 
äam”©es
;

421 
mšDiff
 = 
DBL_MAX
;

422 
dc1394äam”©e_t
 
be¡Fps
 = (dc1394framerate_t) - 1;

424 
	`dc1394_video_g‘_mode
(
dcCam
, &
mode
);

425 
	`dc1394_video_g‘_suµÜ‹d_äam”©es
(
dcCam
, 
mode
, &
äam”©es
);

427 
i
 = 0; i < ()
äam”©es
.
num
; i++)

429 
dc1394äam”©e_t
 
iås
 = 
äam”©es
.äam”©es[
i
];

430 
ås1
 = (1 << (
iås
 - 
DC1394_FRAMERATE_1_875
)) * 1.875;

431 
diff
 = 
	`çbs
(
ås1
 - 
ås
);

432 ià(
diff
 < 
mšDiff
)

434 
mšDiff
 = 
diff
;

435 
be¡Fps
 = 
iås
;

438 ià(()
be¡Fps
 >= 0)

439 
code
 = 
	`dc1394_video_£t_äam”©e
(
dcCam
, 
be¡Fps
);

442 ià(
ÿm”aId
 =ğ
VIDERE
)

444 
bay”F‹r
 = 
DC1394_COLOR_FILTER_GBRG
;

445 
nimages
 = 2;

446 
ušt32_t
 
v®ue
 = 0;

447 
	`dc1394_g‘_cÚŒŞ_»gi¡”
(
dcCam
, 0x50c, &
v®ue
);

448 
cŞÜS‹»o
 = (
v®ue
 & 0x80000000) != 0;

451 
code
 = 
	`dc1394_ÿ±u»_£tup
(
dcCam
, 
nDMABufs
, 
DC1394_CAPTURE_FLAGS_DEFAULT
);

452 ià(
code
 >= 0)

454 
	`FD_SET
(
	`dc1394_ÿ±u»_g‘_f’o
(
dcCam
), &
dc1394
.
ÿmFds
);

455 
	`dc1394_video_£t_ŒªsmissiÚ
(
dcCam
, 
DC1394_ON
);

456 ià(
ÿm”aId
 =ğ
VIDERE
)

458 ’um { 
PROC_MODE_OFF
, 
PROC_MODE_NONE
, 
PROC_MODE_TEST
, 
PROC_MODE_RECTIFIED
, 
PROC_MODE_DISPARITY
, 
PROC_MODE_DISPARITY_RAW
 };

459 
´ocMode
 = 
PROC_MODE_RECTIFIED
;

460 
	`u¦“p
(100000);

461 
ušt32_t
 
qv®1
 = 0x08000000 | (0x90 << 16è| ((
´ocMode
 & 0x7) << 16);

462 
ušt32_t
 
qv®2
 = 0x08000000 | (0x9C << 16);

463 
	`dc1394_£t_cÚŒŞ_»gi¡”
(
dcCam
, 0xFF000, 
qv®1
);

464 
	`dc1394_£t_cÚŒŞ_»gi¡”
(
dcCam
, 0xFF000, 
qv®2
);

466 
¡¬‹d
 = 
Œue
;

469  
code
 >= 0;

470 
	}
}

472 
boŞ
 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$İ’
(
šdex
)

474 
boŞ
 
»suÉ
 = 
çl£
;

475 
dc1394ÿm”a_li¡_t
* 
ÿm”aLi¡
 = 0;

476 
dc1394”rÜ_t
 
”r
;

478 
	`şo£
();

480 ià(!
dc1394
.
dc
)

481 
_ex™_
;

483 
”r
 = 
	`dc1394_ÿm”a_’um”©e
(
dc1394
.
dc
, &
ÿm”aLi¡
);

484 ià(
”r
 < 0 || !
ÿm”aLi¡
 || ()
šdex
 >ğ()ÿm”aLi¡->
num
)

485 
_ex™_
;

487 
guid
 = 
ÿm”aLi¡
->
ids
[
šdex
].guid;

488 
dcCam
 = 
	`dc1394_ÿm”a_Ãw
(
dc1394
.
dc
, 
guid
);

489 ià(!
dcCam
)

490 
_ex™_
;

492 
ÿm”aId
 = 
dcCam
->
v’dÜ_id
;

494 ià(
	`dc1394_ã©u»_g‘_®l
(
dcCam
,&
ã©u»_£t
è=ğ
DC1394_SUCCESS
)

495 
»suÉ
 = 
Œue
;

497 
»suÉ
 = 
çl£
;

499 
_ex™_
:

500 ià(
ÿm”aLi¡
)

501 
	`dc1394_ÿm”a_ä“_li¡
(
ÿm”aLi¡
);

503  
»suÉ
;

504 
	}
}

506 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$şo£
()

508 ià(
dcCam
)

511 
f’o
=
	`dc1394_ÿ±u»_g‘_f’o
(
dcCam
);

513 ià(
f’o
>=0 && 
	`FD_ISSET
(f’o, &
dc1394
.
ÿmFds
))

514 
	`FD_CLR
(
f’o
, &
dc1394
.
ÿmFds
);

515 
	`dc1394_video_£t_ŒªsmissiÚ
(
dcCam
, 
DC1394_OFF
);

516 
	`dc1394_ÿ±u»_¡İ
(
dcCam
);

517 
	`dc1394_ÿm”a_ä“
(
dcCam
);

518 
dcCam
 = 0;

519 
¡¬‹d
 = 
çl£
;

522 
i
 = 0; i < 
NIMG
; i++)

524 
	`cvR–—£Image
(&
img
[
i
]);

525 
	`cvR–—£Image
(&
m­s
[
i
][0]);

526 
	`cvR–—£Image
(&
m­s
[
i
][1]);

528 ià(
äameC
)

530 ià(
äameC
->
image
)

531 
	`ä“
(
äameC
->
image
);

532 
	`ä“
(
äameC
);

533 
äameC
 = 0;

535 
	}
}

538 
boŞ
 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$g¿bF¿me
()

540 
dc1394ÿ±u»_pŞicy_t
 
pŞicy
 = 
DC1394_CAPTURE_POLICY_WAIT
;

541 
boŞ
 
code
 = 
çl£
, 
isCŞÜ
;

542 
dc1394video_äame_t
 *
dcF¿me
 = 0, *
fs
 = 0;

543 
i
, 
nch
;

545 ià(!
dcCam
 || (!
¡¬‹d
 && !
	`¡¬tC­tu»
()))

546  
çl£
;

548 
	`dc1394_ÿ±u»_dequeue
(
dcCam
, 
pŞicy
, &
dcF¿me
);

550 ià(!
dcF¿me
)

551  
çl£
;

553 iàĞ
	`dc1394_ÿ±u»_is_äame_cÜru±
(
dcCam
, 
dcF¿me
è=ğ
DC1394_TRUE
)

555 
_ex™_
;

558 
isCŞÜ
 = 
dcF¿me
->
cŞÜ_codšg
 !ğ
DC1394_COLOR_CODING_MONO8
 &&

559 
dcF¿me
->
cŞÜ_codšg
 !ğ
DC1394_COLOR_CODING_MONO16
 &&

560 
dcF¿me
->
cŞÜ_codšg
 !ğ
DC1394_COLOR_CODING_MONO16S
;

562 ià(
nimages
 == 2)

564 
fs
 = (
dc1394video_äame_t
*)
	`ÿÎoc
(1, (*fs));

567 
	`dc1394_deš‹¾aû_¡”eo_äames_fixed
(
dcF¿me
, 
fs
, 
DC1394_STEREO_METHOD_INTERLACED
);

569 
	`dc1394_ÿ±u»_’queue
(
dcCam
, 
dcF¿me
);

570 
dcF¿me
 = 0;

571 ià(!
fs
->
image
)

572 
_ex™_
;

573 
isCŞÜ
 = 
cŞÜS‹»o
;

575 
nch
 = 
isCŞÜ
 ? 3 : 1;

577 
i
 = 0; i < 
nimages
; i++)

579 
I¶Image
 
fhdr
;

580 
dc1394video_äame_t
 
f
 = 
fs
 ? *f : *
dcF¿me
, *
fc
 = &f;

581 
f
.
size
[1] /ğ
nimages
;

582 
f
.
image
 +ğf.
size
[0] * f.size[1] * 
i
;

583 ià(
isCŞÜ
)

585 ià(!
äameC
)

586 
äameC
 = (
dc1394video_äame_t
*)
	`ÿÎoc
(1, (*frameC));

587 
äameC
->
cŞÜ_codšg
 = 
nch
 =ğ3 ? 
DC1394_COLOR_CODING_RGB8
 : 
DC1394_COLOR_CODING_MONO8
;

588 ià(
nimages
 == 1)

590 
	`dc1394_cÚv”t_äames
(&
f
, 
äameC
);

591 
	`dc1394_ÿ±u»_’queue
(
dcCam
, 
dcF¿me
);

592 
dcF¿me
 = 0;

596 
f
.
cŞÜ_f‹r
 = 
bay”F‹r
;

597 
	`dc1394_debay”_äames
(&
f
, 
äameC
, 
bay”
);

599 
fc
 = 
äameC
;

601 ià(!
img
[
i
])

602 
img
[
i
] = 
	`cvC»©eImage
(
	`cvSize
(
fc
->
size
[0], fc->size[1]), 8, 
nch
);

603 
	`cvIn™ImageH—d”
(&
fhdr
, 
	`cvSize
(
fc
->
size
[0], fc->size[1]), 8, 
nch
);

604 
	`cvS‘D©a
(&
fhdr
, 
fc
->
image
, fc->
size
[0]*
nch
);

607 ià(
nch
==3)

608 
	`cvCÚv”tImage
(&
fhdr
,&fhdr,
CV_CVTIMG_SWAP_RB
);

610 ifĞ
»ùify
 && 
ÿm”aId
 =ğ
VIDERE
 && 
nimages
 == 2 )

612 ifĞ!
m­s
[0][0] || m­s[0][0]->
width
 !ğ
img
[
i
]->width || m­s[0][0]->
height
 != img[i]->height )

614 
CvSize
 
size
 = 
	`cvG‘Size
(
img
[
i
]);

615 
	`cvR–—£Image
(&
m­s
[0][0]);

616 
	`cvR–—£Image
(&
m­s
[0][1]);

617 
	`cvR–—£Image
(&
m­s
[1][0]);

618 
	`cvR–—£Image
(&
m­s
[1][1]);

619 
m­s
[0][0] = 
	`cvC»©eImage
(
size
, 
IPL_DEPTH_16S
, 2);

620 
m­s
[0][1] = 
	`cvC»©eImage
(
size
, 
IPL_DEPTH_16S
, 1);

621 
m­s
[1][0] = 
	`cvC»©eImage
(
size
, 
IPL_DEPTH_16S
, 2);

622 
m­s
[1][1] = 
	`cvC»©eImage
(
size
, 
IPL_DEPTH_16S
, 1);

623 
buf
[4*4096];

624 ifĞ
	`g‘Vid”eC®ib¿tiÚInfo
Ğ
buf
, ()(buf) ) &&

625 
	`š™Vid”eReùifyM­s
Ğ
buf
, 
m­s
[0], maps[1] ))

628 
»ùify
 = 
çl£
;

630 
	`cvRem­
(&
fhdr
, 
img
[
i
], 
m­s
[i][0], maps[i][1]);

633 
	`cvCİy
(&
fhdr
, 
img
[
i
]);

636 
code
 = 
Œue
;

638 
_ex™_
:

639 ià(
dcF¿me
)

640 
	`dc1394_ÿ±u»_’queue
(
dcCam
, 
dcF¿me
);

641 ià(
fs
)

643 ià(
fs
->
image
)

644 
	`ä“
(
fs
->
image
);

645 
	`ä“
(
fs
);

648  
code
;

649 
	}
}

651 
I¶Image
* 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$»Œ›veF¿me
(
idx
)

653  0 <ğ
idx
 && idx < 
nimages
 ? 
img
[idx] : 0;

654 
	}
}

656 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$g‘Prİ”ty
(
´İId
) const

659 
dc1394ã©u»£t_t
& 
fs
 = 
cÚ¡_ÿ¡
<dc1394ã©u»£t_t&>(
ã©u»_£t
);

661 
´İId
)

663 
CV_CAP_PROP_FRAME_WIDTH
:

664  
äameWidth
 ? f¿meWidth : 
äameHeight
*4 / 3;

665 
CV_CAP_PROP_FRAME_HEIGHT
:

666  
äameHeight
 ? f¿meHeighˆ: 
äameWidth
*3 / 4;

667 
CV_CAP_PROP_FPS
:

668  
ås
;

669 
CV_CAP_PROP_RECTIFICATION
:

670  
»ùify
 ? 1 : 0;

671 
CV_CAP_PROP_WHITE_BALANCE_BLUE_U
:

672 ià(
	`dc1394_ã©u»_wh™eb®ªû_g‘_v®ue
(
dcCam
,

673 &
fs
.
ã©u»
[
DC1394_FEATURE_WHITE_BALANCE
-
DC1394_FEATURE_MIN
].
BU_v®ue
,

674 &
fs
.
ã©u»
[
DC1394_FEATURE_WHITE_BALANCE
-
DC1394_FEATURE_MIN
].
RV_v®ue
è=ğ
DC1394_SUCCESS
)

675  
ã©u»_£t
.
ã©u»
[
DC1394_FEATURE_WHITE_BALANCE
-
DC1394_FEATURE_MIN
].
BU_v®ue
;

677 
CV_CAP_PROP_WHITE_BALANCE_RED_V
:

678 ià(
	`dc1394_ã©u»_wh™eb®ªû_g‘_v®ue
(
dcCam
,

679 &
fs
.
ã©u»
[
DC1394_FEATURE_WHITE_BALANCE
-
DC1394_FEATURE_MIN
].
BU_v®ue
,

680 &
fs
.
ã©u»
[
DC1394_FEATURE_WHITE_BALANCE
-
DC1394_FEATURE_MIN
].
RV_v®ue
è=ğ
DC1394_SUCCESS
)

681  
ã©u»_£t
.
ã©u»
[
DC1394_FEATURE_WHITE_BALANCE
-
DC1394_FEATURE_MIN
].
RV_v®ue
;

683 
CV_CAP_PROP_GUID
:

685  (è(
guid
 & 0x00000000FFFFFFFF);

687 
CV_CAP_PROP_MODE
:

688  (è
u£rMode
;

690 
CV_CAP_PROP_ISO_SPEED
:

691  (è
isoS³ed
;

692 
CV_CAP_PROP_BUFFERSIZE
:

693  (è
nDMABufs
;

695 ià(
´İId
<
CV_CAP_PROP_MAX_DC1394
 && 
dc1394´İ”t›s
[propId]!=-1

696 && 
dcCam
)

698 ià(
	`dc1394_ã©u»_g‘_v®ue
(
dcCam
,(
dc1394ã©u»_t
)
dc1394´İ”t›s
[
´İId
],

699 &
fs
.
ã©u»
[
dc1394´İ”t›s
[
´İId
]-
DC1394_FEATURE_MIN
].
v®ue
è=ğ
DC1394_SUCCESS
)

700  
ã©u»_£t
.
ã©u»
[
dc1394´İ”t›s
[
´İId
]-
DC1394_FEATURE_MIN
].
v®ue
;

703 
	}
}

705 
boŞ
 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$£tPrİ”ty
(
´İId
, 
v®ue
)

707 
´İId
)

709 
CV_CAP_PROP_FRAME_WIDTH
:

710 if(
¡¬‹d
)

711  
çl£
;

712 
äameWidth
 = 
	`cvRound
(
v®ue
);

713 
äameHeight
 = 0;

715 
CV_CAP_PROP_FRAME_HEIGHT
:

716 if(
¡¬‹d
)

717  
çl£
;

718 
äameWidth
 = 0;

719 
äameHeight
 = 
	`cvRound
(
v®ue
);

721 
CV_CAP_PROP_FPS
:

722 if(
¡¬‹d
)

723  
çl£
;

724 
ås
 = 
v®ue
;

726 
CV_CAP_PROP_RECTIFICATION
:

727 ifĞ
ÿm”aId
 !ğ
VIDERE
 )

728  
çl£
;

729 
»ùify
 = 
	`çbs
(
v®ue
è> 
FLT_EPSILON
;

731 
CV_CAP_PROP_MODE
:

732 if(
¡¬‹d
)

733  
çl£
;

734 
u£rMode
 = 
	`cvRound
(
v®ue
);

736 
CV_CAP_PROP_ISO_SPEED
:

737 if(
¡¬‹d
)

738  
çl£
;

739 
isoS³ed
 = 
	`cvRound
(
v®ue
);

741 
CV_CAP_PROP_BUFFERSIZE
:

742 if(
¡¬‹d
)

743  
çl£
;

744 
nDMABufs
 = 
v®ue
;

748 ià(
´İId
<
CV_CAP_PROP_MAX_DC1394
 && 
dc1394´İ”t›s
[propId]!=-1

749 && 
dcCam
)

752 
dc1394ã©u»_šfo_t
 *
aù_ã©u»
 = &
ã©u»_£t
.
ã©u»
[
dc1394´İ”t›s
[
´İId
]-
DC1394_FEATURE_MIN
];

754 ià(
	`cvRound
(
v®ue
è=ğ
CV_CAP_PROP_DC1394_OFF
)

756 iàĞ(
aù_ã©u»
->
Ú_off_ÿ·bË
)

757 && (
	`dc1394_ã©u»_£t_pow”
(
dcCam
, 
aù_ã©u»
->
id
, 
DC1394_OFF
è=ğ
DC1394_SUCCESS
))

759 
aù_ã©u»
->
is_Ú
=
DC1394_OFF
;

760  
Œue
;

762  
çl£
;

765 iàĞ(
aù_ã©u»
->
is_Ú
 =ğ
DC1394_OFF
è&& (aù_ã©u»->
Ú_off_ÿ·bË
 =ğ
DC1394_TRUE
))

767 ià(
	`dc1394_ã©u»_£t_pow”
(
dcCam
, 
aù_ã©u»
->
id
, 
DC1394_ON
è=ğ
DC1394_SUCCESS
)

768 
ã©u»_£t
.
ã©u»
[
dc1394´İ”t›s
[
´İId
]-
DC1394_FEATURE_MIN
].
is_Ú
=
DC1394_ON
;

772 ià(
aù_ã©u»
->
absŞu‹_ÿ·bË


773 && 
	`dc1394_ã©u»_£t_absŞu‹_cÚŒŞ
(
dcCam
, 
aù_ã©u»
->
id
, 
DC1394_OFF
è!=
DC1394_SUCCESS
)

774  
çl£
;

776 
aù_ã©u»
->
abs_cÚŒŞ
=
DC1394_OFF
;

778 ià(
	`cvRound
(
v®ue
è=ğ
CV_CAP_PROP_DC1394_MODE_AUTO
)

780 ià(
	`dc1394_ã©u»_£t_mode
(
dcCam
, 
aù_ã©u»
->
id
, 
DC1394_FEATURE_MODE_AUTO
)!=
DC1394_SUCCESS
)

781  
çl£
;

782 
aù_ã©u»
->
cu¼’t_mode
=
DC1394_FEATURE_MODE_AUTO
;

783  
Œue
;

786 ià(
	`cvRound
(
v®ue
è=ğ
CV_CAP_PROP_DC1394_MODE_ONE_PUSH_AUTO
)

789 ià(
	`dc1394_ã©u»_£t_mode
(
dcCam
, 
aù_ã©u»
->
id
, 
DC1394_FEATURE_MODE_ONE_PUSH_AUTO
)!=
DC1394_SUCCESS
)

790  
çl£
;

792 
aù_ã©u»
->
cu¼’t_mode
=
DC1394_FEATURE_MODE_ONE_PUSH_AUTO
;

793  
Œue
;

796 ià(
	`dc1394_ã©u»_£t_mode
(
dcCam
, 
aù_ã©u»
->
id
, 
DC1394_FEATURE_MODE_MANUAL
)!=
DC1394_SUCCESS
)

797  
çl£
;

799 
aù_ã©u»
->
cu¼’t_mode
=
DC1394_FEATURE_MODE_MANUAL
;

801 ià(
´İId
 =ğ
CV_CAP_PROP_WHITE_BALANCE_BLUE_U
)

803 ià(
	`dc1394_ã©u»_wh™eb®ªû_£t_v®ue
(
dcCam
,
	`cvRound
(
v®ue
), 
aù_ã©u»
->
RV_v®ue
)!=
DC1394_SUCCESS
)

804  
çl£
;

807 
aù_ã©u»
->
BU_v®ue
 = 
	`cvRound
(
v®ue
);

808  
Œue
;

811 ià(
´İId
 =ğ
CV_CAP_PROP_WHITE_BALANCE_RED_V
)

813 ià(
	`dc1394_ã©u»_wh™eb®ªû_£t_v®ue
(
dcCam
, 
aù_ã©u»
->
BU_v®ue
, 
	`cvRound
(
v®ue
))!=
DC1394_SUCCESS
)

814  
çl£
;

817 
aù_ã©u»
->
RV_v®ue
 = 
	`cvRound
(
v®ue
);

818  
Œue
;

823 ià(
v®ue
 < 
aù_ã©u»
->
mš
)

825 
v®ue
 = 
aù_ã©u»
->
mš
;

827 ià(
v®ue
 > 
aù_ã©u»
->
max
)

829 
v®ue
 = 
aù_ã©u»
->
max
;

832 ià(
	`dc1394_ã©u»_£t_v®ue
(
dcCam
, 
aù_ã©u»
->
id
, 
	`cvRound
(
v®ue
)è=ğ
DC1394_SUCCESS
)

834 
aù_ã©u»
->
v®ue
 = value;

835  
Œue
;

838  
çl£
;

840  
Œue
;

841 
	}
}

844 
boŞ
 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$g‘Vid”eC®ib¿tiÚInfo
Ğ* 
buf
, 
bufSize
 )

846 
pos
;

848  
pos
 = 0;…o < 
bufSize
 - 4;…os += 4 )

850 
ušt32_t
 
quad
 = 
	`g‘CÚŒŞRegi¡”
(
dcCam
, 0xF0800 + 
pos
);

851 ifĞ
quad
 == 0 || quad == 0xffffffff )

853 
buf
[
pos
] = (
uch¬
)(
quad
 >> 24);

854 
buf
[
pos
+1] = (
uch¬
)(
quad
 >> 16);

855 
buf
[
pos
+2] = (
uch¬
)(
quad
 >> 8);

856 
buf
[
pos
+3] = (
uch¬
)(
quad
);

859 ifĞ
pos
 == 0 )

860  
çl£
;

862 
buf
[
pos
] = '\0';

863  
Œue
;

864 
	}
}

867 
boŞ
 
	gCvC­tu»CAM_DC1394_v2_CPP
::
	$š™Vid”eReùifyM­s
ĞcÚ¡ * 
šfo
,

868 
I¶Image
* 
ml
[2], I¶Image* 
mr
[2] )

870 
id’t™y_d©a
[] = {1, 0, 0, 0, 1, 0, 0, 0, 1};

871 
CvM©
 
l_»ù
 = 
	`cvM©
(3, 3, 
CV_32F
, 
id’t™y_d©a
), 
r_»ù
 =†_rect;

872 
l_šŒšsic_d©a
[] = {1, 0, 0, 0, 1, 0, 0, 0, 1};

873 
r_šŒšsic_d©a
[] = {1, 0, 0, 0, 1, 0, 0, 0, 1};

874 
CvM©
 
l_šŒšsic
 = 
	`cvM©
(3, 3, 
CV_32F
, 
l_šŒšsic_d©a
);

875 
CvM©
 
r_šŒšsic
 = 
	`cvM©
(3, 3, 
CV_32F
, 
r_šŒšsic_d©a
);

876 
l_di¡ÜtiÚ_d©a
[] = {0,0,0,0,0}, 
r_di¡ÜtiÚ_d©a
[] = {0,0,0,0,0};

877 
CvM©
 
l_di¡ÜtiÚ
 = 
	`cvM©
(1, 5, 
CV_32F
, 
l_di¡ÜtiÚ_d©a
);

878 
CvM©
 
r_di¡ÜtiÚ
 = 
	`cvM©
(1, 5, 
CV_32F
, 
r_di¡ÜtiÚ_d©a
);

879 
I¶Image
* 
mx
 = 
	`cvC»©eImage
(
	`cvG‘Size
(
ml
[0]), 
IPL_DEPTH_32F
, 1);

880 
I¶Image
* 
my
 = 
	`cvC»©eImage
(
	`cvG‘Size
(
ml
[0]), 
IPL_DEPTH_32F
, 1);

881 
k
, 
j
;

883  
k
 = 0; k < 2; k++ )

885 cÚ¡ * 
£ùiÚ_Çme
 = 
k
 == 0 ? "[left_camera]" : "[right_camera]";

886 cÚ¡ * 
·¿m_Çmes
[] = { "f ", "fy", "Cx", "Cy" "kappa1", "kappa2", "tau1", "tau2", "kappa3", 0 };

887 cÚ¡ * 
£ùiÚ_¡¬t
 = 
	`¡r¡r
Ğ
šfo
, 
£ùiÚ_Çme
 );

888 
CvM©
* 
šŒšsic
 = 
k
 =ğ0 ? &
l_šŒšsic
 : &
r_šŒšsic
;

889 
CvM©
* 
di¡ÜtiÚ
 = 
k
 =ğ0 ? &
l_di¡ÜtiÚ
 : &
r_di¡ÜtiÚ
;

890 
CvM©
* 
»ùifiÿtiÚ
 = 
k
 =ğ0 ? &
l_»ù
 : &
r_»ù
;

891 
I¶Image
** 
d¡
 = 
k
 =ğ0 ? 
ml
 : 
mr
;

892 ifĞ!
£ùiÚ_¡¬t
 )

894 
£ùiÚ_¡¬t
 +ğ
	`¡¾’
(
£ùiÚ_Çme
);

895  
j
 = 0; 
·¿m_Çmes
[j] != 0; j++ )

897 cÚ¡ * 
·¿m_v®ue_¡¬t
 = 
	`¡r¡r
(
£ùiÚ_¡¬t
, 
·¿m_Çmes
[
j
]);

898 
v®
=0;

899 if(!
·¿m_v®ue_¡¬t
)

901 
	`ssÿnf
(
·¿m_v®ue_¡¬t
 + 
	`¡¾’
(
·¿m_Çmes
[
j
]), "%f", &
v®
);

902 ifĞ
j
 < 4 )

903 
šŒšsic
->
d©a
.
æ
[
j
 =ğ0 ? 0 : j =ğ1 ? 4 : j =ğ2 ? 2 : 5] = 
v®
;

905 
di¡ÜtiÚ
->
d©a
.
æ
[
j
 - 4] = 
v®
;

907 ifĞ
·¿m_Çmes
[
j
] != 0 )

911 ifĞ
	`çbs
(
mx
->
width
*0.5 - 
šŒšsic
->
d©a
.
æ
[2]) > mx->width*0.1 ||

912 
	`çbs
(
my
->
height
*0.5 - 
šŒšsic
->
d©a
.
æ
[5]) > my->height*0.1 )

914 
	`cvSÿË
Ğ&
šŒšsic
, &intrinsic, 0.5 );

915 ifĞ
	`çbs
(
mx
->
width
*0.5 - 
šŒšsic
->
d©a
.
æ
[2]) > mx->width*0.05 ||

916 
	`çbs
(
my
->
height
*0.5 - 
šŒšsic
->
d©a
.
æ
[5]) > my->height*0.05 )

917 
	`cvSÿË
Ğ&
šŒšsic
, &intrinsic, 2 );

918 
šŒšsic
->
d©a
.
æ
[8] = 1;

921 
	`cvIn™Undi¡ÜtReùifyM­
Ğ
šŒšsic
, 
di¡ÜtiÚ
,

922 
»ùifiÿtiÚ
, 
šŒšsic
, 
mx
, 
my
 );

923 
	`cvCÚv”tM­s
Ğ
mx
, 
my
, 
d¡
[0], dst[1] );

926 
	`cvR–—£Image
Ğ&
mx
 );

927 
	`cvR–—£Image
Ğ&
my
 );

928  
k
 >= 2;

929 
	}
}

932 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_DC1394_2
(
šdex
)

934 
CvC­tu»CAM_DC1394_v2_CPP
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_DC1394_v2_CPP;

936 ià(
ÿ±u»
->
	`İ’
(
šdex
))

937  
ÿ±u»
;

939 
d–‘e
 
ÿ±u»
;

941 
	}
}

	@cap_dshow.cpp

42 
	~"´ecomp.hµ
"

44 #ià(
defšed
 
WIN32
 || defšed 
_WIN32
è&& defšed 
HAVE_DSHOW


45 
	~"ÿp_dshow.hµ
"

91 #ià
defšed
 
_MSC_VER
 && _MSC_VER >= 100

93 #´agm¨
w¬nšg
(
di§bË
: 4995)

96 
	~<tch¬.h
>

97 
	~<¡dlib.h
>

98 
	~<¡dio.h
>

99 
	~<m©h.h
>

100 
	~<¡ršg.h
>

101 
	~<wch¬.h
>

103 
	~<veùÜ
>

106 #ià
defšed
 
_MSC_VER
 && _MSC_VER >= 1500

107 
	~"DShow.h
"

108 
	~"¡rmif.h
"

109 
	~"Avœiff.h
"

110 
	~"dvdmedŸ.h
"

111 
	~"bdaiçû.h
"

113 #ifdeà
_MSC_VER


114 
	#__ex‹nsiÚ__


	)

115 
BOOL
 
	tWINBOOL
;

118 
	~"dshow/dshow.h
"

119 
	~"dshow/dvdmedŸ.h
"

120 
	~"dshow/bd©y³s.h
"

122 
š‹rçû
 
	gIEnumPIDM­
 : 
public
 
IUnknown


124 
public
:

125 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
Next
(

126  
ULONG
 
cReque¡
,

127  
PID_MAP
 *
pPIDM­
,

128  
ULONG
 *
pcReûived
) = 0;

130 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
Sk
(

131  
ULONG
 
cRecÜds
) = 0;

133 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
Re£t
( ) = 0;

135 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
ClÚe
(

136  
IEnumPIDM­
 **
µIEnumPIDM­
) = 0;

139 
š‹rçû
 
	gIMPEG2PIDM­
 : 
public
 
IUnknown


141 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
M­PID
(

142  
ULONG
 
culPID
,

143  
ULONG
 *
pulPID
,

144  
MEDIA_SAMPLE_CONTENT
 
MedŸSam¶eCÚ‹Á
) = 0;

146 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
Unm­PID
(

147  
ULONG
 
culPID
,

148  
ULONG
 *
pulPID
) = 0;

150 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
EnumPIDM­
(

151  
IEnumPIDM­
 **
pIEnumPIDM­
) = 0;

157 
	~<´oûss.h
>

160 #iâdeà
_WIN32_WINNT


161 
	#_WIN32_WINNT
 0x400

	)

175 
	~<š™guid.h
>

177 
DEFINE_GUID
(
MEDIASUBTYPE_GREY
, 0x59455247, 0x0000, 0x0010, 0x80, 0x00,

179 
DEFINE_GUID
(
MEDIASUBTYPE_Y8
, 0x20203859, 0x0000, 0x0010, 0x80, 0x00,

181 
DEFINE_GUID
(
MEDIASUBTYPE_Y800
, 0x30303859, 0x0000, 0x0010, 0x80, 0x00,

184 
DEFINE_GUID
(
CLSID_C­tu»G¿phBud”2
,0xbf87b6e1,0x8c27,0x11d0,0xb3,0xf0,0x00,0xaa,0x00,0x37,0x61,0xc5);

185 
DEFINE_GUID
(
CLSID_F‹rG¿ph
,0xe436ebb3,0x524f,0x11ce,0x9f,0x53,0x00,0x20,0xaf,0x0b,0xa7,0x70);

186 
DEFINE_GUID
(
CLSID_NuÎR’d””
,0xc1f400a4,0x3f08,0x11d3,0x9f,0x0b,0x00,0x60,0x08,0x03,0x9e,0x37);

187 
DEFINE_GUID
(
CLSID_Sam¶eG¿bb”
,0xc1f400a0,0x3f08,0x11d3,0x9f,0x0b,0x00,0x60,0x08,0x03,0x9e,0x37);

188 
DEFINE_GUID
(
CLSID_Sy¡emDeviûEnum
,0x62be5d10,0x60eb,0x11d0,0xbd,0x3b,0x00,0xa0,0xc9,0x11,0xce,0x86);

189 
DEFINE_GUID
(
CLSID_VideoIÅutDeviûC©egÜy
,0x860bb310,0x5d01,0x11d0,0xbd,0x3b,0x00,0xa0,0xc9,0x11,0xce,0x86);

190 
DEFINE_GUID
(
FORMAT_VideoInfo
,0x05589f80,0xc356,0x11ce,0xbf,0x01,0x00,0xaa,0x00,0x55,0x59,0x5a);

191 
DEFINE_GUID
(
IID_IAMAÇlogVideoDecod”
,0xc6e13350,0x30ac,0x11d0,0xa1,0x8c,0x00,0xa0,0xc9,0x11,0x89,0x56);

192 
DEFINE_GUID
(
IID_IAMCam”aCÚŒŞ
,0xc6e13370,0x30ac,0x11d0,0xa1,0x8c,0x00,0xa0,0xc9,0x11,0x89,0x56);

193 
DEFINE_GUID
(
IID_IAMCrossb¬
,0xc6e13380,0x30ac,0x11d0,0xa1,0x8c,0x00,0xa0,0xc9,0x11,0x89,0x56);

194 
DEFINE_GUID
(
IID_IAMSŒ—mCÚfig
,0xc6e13340,0x30ac,0x11d0,0xa1,0x8c,0x00,0xa0,0xc9,0x11,0x89,0x56);

195 
DEFINE_GUID
(
IID_IAMVideoProcAmp
,0xc6e13360,0x30ac,0x11d0,0xa1,0x8c,0x00,0xa0,0xc9,0x11,0x89,0x56);

196 
DEFINE_GUID
(
IID_IBa£F‹r
,0x56a86895,0x0ad4,0x11ce,0xb0,0x3a,0x00,0x20,0xaf,0x0b,0xa7,0x70);

197 
DEFINE_GUID
(
IID_IC­tu»G¿phBud”2
,0x93e5a4e0,0x2d50,0x11d2,0xab,0xfa,0x00,0xa0,0xc9,0xc6,0xe3,0x8d);

198 
DEFINE_GUID
(
IID_IC»©eDevEnum
,0x29840822,0x5b84,0x11d0,0xbd,0x3b,0x00,0xa0,0xc9,0x11,0xce,0x86);

199 
DEFINE_GUID
(
IID_IG¿phBud”
,0x56a868a9,0x0ad4,0x11ce,0xb0,0x3a,0x00,0x20,0xaf,0x0b,0xa7,0x70);

200 
DEFINE_GUID
(
IID_IMPEG2PIDM­
,0xafb6c2a1,0x2c41,0x11d3,0x8a,0x60,0x00,0x00,0xf8,0x1e,0x0e,0x4a);

201 
DEFINE_GUID
(
IID_IMedŸCÚŒŞ
,0x56a868b1,0x0ad4,0x11ce,0xb0,0x3a,0x00,0x20,0xaf,0x0b,0xa7,0x70);

202 
DEFINE_GUID
(
IID_IMedŸF‹r
,0x56a86899,0x0ad4,0x11ce,0xb0,0x3a,0x00,0x20,0xaf,0x0b,0xa7,0x70);

203 
DEFINE_GUID
(
IID_ISam¶eG¿bb”
,0x6b652fff,0x11fe,0x4fce,0x92,0xad,0x02,0x66,0xb5,0xd7,0xc7,0x8f);

204 
DEFINE_GUID
(
LOOK_UPSTREAM_ONLY
,0xac798be0,0x98e3,0x11d1,0xb3,0xf1,0x00,0xaa,0x00,0x37,0x61,0xc5);

205 
DEFINE_GUID
(
MEDIASUBTYPE_AYUV
,0x56555941,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

206 
DEFINE_GUID
(
MEDIASUBTYPE_IYUV
,0x56555949,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

207 
DEFINE_GUID
(
MEDIASUBTYPE_RGB24
,0xe436eb7d,0x524f,0x11ce,0x9f,0x53,0x00,0x20,0xaf,0x0b,0xa7,0x70);

208 
DEFINE_GUID
(
MEDIASUBTYPE_RGB32
,0xe436eb7e,0x524f,0x11ce,0x9f,0x53,0x00,0x20,0xaf,0x0b,0xa7,0x70);

209 
DEFINE_GUID
(
MEDIASUBTYPE_RGB555
,0xe436eb7c,0x524f,0x11ce,0x9f,0x53,0x00,0x20,0xaf,0x0b,0xa7,0x70);

210 
DEFINE_GUID
(
MEDIASUBTYPE_RGB565
,0xe436eb7b,0x524f,0x11ce,0x9f,0x53,0x00,0x20,0xaf,0x0b,0xa7,0x70);

211 
DEFINE_GUID
(
MEDIASUBTYPE_I420
,0x30323449,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

212 
DEFINE_GUID
(
MEDIASUBTYPE_UYVY
,0x59565955,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

213 
DEFINE_GUID
(
MEDIASUBTYPE_Y211
,0x31313259,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

214 
DEFINE_GUID
(
MEDIASUBTYPE_Y411
,0x31313459,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

215 
DEFINE_GUID
(
MEDIASUBTYPE_Y41P
,0x50313459,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

216 
DEFINE_GUID
(
MEDIASUBTYPE_YUY2
,0x32595559,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

217 
DEFINE_GUID
(
MEDIASUBTYPE_YUYV
,0x56595559,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

218 
DEFINE_GUID
(
MEDIASUBTYPE_YV12
,0x32315659,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

219 
DEFINE_GUID
(
MEDIASUBTYPE_YVU9
,0x39555659,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

220 
DEFINE_GUID
(
MEDIASUBTYPE_YVYU
,0x55595659,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

221 
DEFINE_GUID
(
MEDIASUBTYPE_MJPG
,0x47504A4D, 0x0000, 0x0010, 0x80, 0x00, 0x00, 0xaa, 0x00, 0x38, 0x9b, 0x71);

222 
DEFINE_GUID
(
MEDIATYPE_IÁ”Ëaved
,0x73766169,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

223 
DEFINE_GUID
(
MEDIATYPE_Video
,0x73646976,0x0000,0x0010,0x80,0x00,0x00,0xaa,0x00,0x38,0x9b,0x71);

224 
DEFINE_GUID
(
PIN_CATEGORY_CAPTURE
,0xfb6c4281,0x0353,0x11d1,0x90,0x5f,0x00,0x00,0xc0,0xcc,0x16,0xba);

225 
DEFINE_GUID
(
PIN_CATEGORY_PREVIEW
,0xfb6c4282,0x0353,0x11d1,0x90,0x5f,0x00,0x00,0xc0,0xcc,0x16,0xba);

227 
š‹rçû
 
	gISam¶eG¿bb”CB
 : 
public
 
IUnknown


229 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
Sam¶eCB
(

230 
Sam¶eTime
,

231 
IMedŸSam¶e
 *
pSam¶e
) = 0;

233 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
BufãrCB
(

234 
Sam¶eTime
,

235 
BYTE
 *
pBufãr
,

236 
LONG
 
BufãrL’
) = 0;

239 
š‹rçû
 
	gISam¶eG¿bb”
 : 
public
 
IUnknown


241 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
S‘OÃShÙ
(

242 
BOOL
 
OÃShÙ
) = 0;

244 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
S‘MedŸTy³
(

245 cÚ¡ 
AM_MEDIA_TYPE
 *
pTy³
) = 0;

247 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
G‘CÚÃùedMedŸTy³
(

248 
AM_MEDIA_TYPE
 *
pTy³
) = 0;

250 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
S‘BufãrSam¶es
(

251 
BOOL
 
BufãrThem
) = 0;

253 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
G‘Cu¼’tBufãr
(

254 
LONG
 *
pBufãrSize
,

255 
LONG
 *
pBufãr
) = 0;

257 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
G‘Cu¼’tSam¶e
(

258 
IMedŸSam¶e
 **
µSam¶e
) = 0;

260 
vœtu®
 
HRESULT
 
STDMETHODCALLTYPE
 
S‘C®lback
(

261 
ISam¶eG¿bb”CB
 *
pC®lback
,

262 
LONG
 
WhichM‘hodToC®lback
) = 0;

265 #iâdeà
HEADER


266 
	#HEADER
(
p
è(&(((
VIDEOINFOHEADER
*)Õ))->
bmiH—d”
))

	)

331 #ifdeà
_DEBUG


332 
	~<¡r§ã.h
>

335 
boŞ
 
	ggs_v”bo£
 = 
Œue
;

337 
	$DebugPrštOut
(cÚ¡ *
fÜm©
, ...)

339 ià(
gs_v”bo£
)

341 
va_li¡
 
¬gs
;

342 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

343 ifĞ::
	`IsDebugg”P»£Á
() )

345 
CHAR
 
szMsg
[512];

346 ::
	`SŒšgCbVPrštfA
(
szMsg
, (szMsg), 
fÜm©
, 
¬gs
);

347 ::
	`OuutDebugSŒšgA
(
szMsg
);

351 
	`v´štf
(
fÜm©
, 
¬gs
);

353 
	`va_’d
 (
¬gs
);

355 
	}
}

357 
	#DebugPrštOut
(...è()

	)

366 
	#VI_VERSION
 0.1995

	)

367 
	#VI_MAX_CAMERAS
 20

	)

368 
	#VI_NUM_TYPES
 20

369 
	#VI_NUM_FORMATS
 18

370 

	)

372 
	#VI_COMPOSITE
 0

	)

373 
	#VI_S_VIDEO
 1

	)

374 
	#VI_TUNER
 2

	)

375 
	#VI_USB
 3

	)

376 
	#VI_1394
 4

	)

379 
	#VI_NTSC_M
 0

	)

380 
	#VI_PAL_B
 1

	)

381 
	#VI_PAL_D
 2

	)

382 
	#VI_PAL_G
 3

	)

383 
	#VI_PAL_H
 4

	)

384 
	#VI_PAL_I
 5

	)

385 
	#VI_PAL_M
 6

	)

386 
	#VI_PAL_N
 7

	)

387 
	#VI_PAL_NC
 8

	)

388 
	#VI_SECAM_B
 9

	)

389 
	#VI_SECAM_D
 10

	)

390 
	#VI_SECAM_G
 11

	)

391 
	#VI_SECAM_H
 12

	)

392 
	#VI_SECAM_K
 13

	)

393 
	#VI_SECAM_K1
 14

	)

394 
	#VI_SECAM_L
 15

	)

395 
	#VI_NTSC_M_J
 16

	)

396 
	#VI_NTSC_433
 17

	)

400 
	gIC­tu»G¿phBud”2
;

401 
	gIG¿phBud”
;

402 
	gIBa£F‹r
;

403 
	gIAMCrossb¬
;

404 
	gIMedŸCÚŒŞ
;

405 
	gISam¶eG¿bb”
;

406 
	gIMedŸEv’tEx
;

407 
	gIAMSŒ—mCÚfig
;

408 
	g_AMMedŸTy³
;

409 
şass
 
	gSam¶eG¿bb”C®lback
;

410 
_AMMedŸTy³
 
	tAM_MEDIA_TYPE
;

419 şas 
	cvideoDeviû
{

422 
	mpublic
:

424 
videoDeviû
();

425 
£tSize
(
w
, 
h
);

426 
NukeDown¡»am
(
IBa£F‹r
 *
pBF
);

427 
de¡royG¿ph
();

428 ~
videoDeviû
();

430 
	mvideoSize
;

431 
	mwidth
;

432 
	mheight
;

434 
	mŒyWidth
;

435 
	mŒyHeight
;

436 
GUID
 
	mŒyVideoTy³
;

438 
IC­tu»G¿phBud”2
 *
	mpC­tu»G¿ph
;

439 
IG¿phBud”
 *
	mpG¿ph
;

440 
IMedŸCÚŒŞ
 *
	mpCÚŒŞ
;

441 
IBa£F‹r
 *
	mpVideoIÅutF‹r
;

442 
IBa£F‹r
 *
	mpG¿bb”F
;

443 
IBa£F‹r
 * 
	mpDe¡F‹r
;

444 
IAMSŒ—mCÚfig
 *
	m¡»amCÚf
;

445 
ISam¶eG¿bb”
 * 
	mpG¿bb”
;

446 
AM_MEDIA_TYPE
 * 
	mpAmMedŸTy³
;

448 
IMedŸEv’tEx
 * 
	mpMedŸEv’t
;

450 
GUID
 
	mvideoTy³
;

451 
	mfÜm©Ty³
;

453 
Sam¶eG¿bb”C®lback
 * 
	msgC®lback
;

455 
boŞ
 
	mŒyDiffSize
;

456 
boŞ
 
	mu£Crossb¬
;

457 
boŞ
 
	m»adyToC­tu»
;

458 
boŞ
 
	msizeS‘
;

459 
boŞ
 
	m£tupS¹ed
;

460 
boŞ
 
	m¥ecificFÜm©
;

461 
boŞ
 
	mautoRecÚÃù
;

462 
	mnF¿mesFÜRecÚÃù
;

463 
	mnF¿mesRuÂšg
;

464 
	mcÚÃùiÚ
;

465 
	m¡ÜeCÚn
;

466 
	mmyID
;

467 
	m»que¡edF¿meTime
;

469 
	mnDeviûName
[255];

470 
WCHAR
 
	mwDeviûName
[255];

472 * 
	mpix–s
;

473 * 
	mpBufãr
;

478 şas 
	cvideoIÅut
{

480 
	mpublic
:

481 
videoIÅut
();

482 ~
videoIÅut
();

485 
£tV”bo£
(
boŞ
 
_v”bo£
);

488 
li¡Deviûs
(
boŞ
 
s’t
 = 
çl£
);

491 * 
g‘DeviûName
(
deviûID
);

494 
£tU£C®lback
(
boŞ
 
u£C®lback
);

498 
£tId—lF¿m”©e
(
deviûID
, 
id—lF¿m”©e
);

503 
£tAutoRecÚÃùOnF»eze
(
deviûNumb”
, 
boŞ
 
doRecÚÃù
, 
numMis£dF¿mesBefÜeRecÚÃù
);

506 
boŞ
 
£tupDeviû
(
deviûID
);

507 
boŞ
 
£tupDeviû
(
deviûID
, 
w
, 
h
);

508 
boŞ
 
£tupDeviûFourcc
(
deviûID
, 
w
, 
h
,
fourcc
);

512 
boŞ
 
£tupDeviû
(
deviûID
, 
cÚÃùiÚ
);

513 
boŞ
 
£tupDeviû
(
deviûID
, 
w
, 
h
, 
cÚÃùiÚ
);

515 
boŞ
 
£tFourcc
(
deviûNumb”
, 
fourcc
);

522 
boŞ
 
£tFÜm©
(
deviûNumb”
, 
fÜm©
);

525 
boŞ
 
isF¿meNew
(
deviûID
);

527 
boŞ
 
	$isDeviûS‘up
(
deviûID
) const;

530 * 
	`g‘Pix–s
(
deviûID
, 
boŞ
 
æRedAndBlue
 = 
Œue
, boŞ 
æImage
 = 
çl£
);

533 
boŞ
 
	`g‘Pix–s
(
id
, * 
pix–s
, boŞ 
æRedAndBlue
 = 
Œue
, boŞ 
æImage
 = 
çl£
);

537 
	`showS‘tšgsWšdow
(
deviûID
);

541 
boŞ
 
	`£tVideoS‘tšgF‹r
(
deviûID
, 
Prİ”ty
, 
lV®ue
, 
FÏgs
 = 0, boŞ 
u£DeçuÉV®ue
 = 
çl£
);

542 
boŞ
 
	`£tVideoS‘tšgF‹rPù
(
deviûID
, 
Prİ”ty
, 
pùV®ue
, 
FÏgs
 = 0);

543 
boŞ
 
	`g‘VideoS‘tšgF‹r
(
deviûID
, 
Prİ”ty
, &
mš
, &
max
, &
S‹µšgD–
, &
cu¼’tV®ue
, &
æags
, &
deçuÉV®ue
);

545 
boŞ
 
	`£tVideoS‘tšgCam”a
(
deviûID
, 
Prİ”ty
, 
lV®ue
, 
FÏgs
 = 0, boŞ 
u£DeçuÉV®ue
 = 
çl£
);

546 
boŞ
 
	`£tVideoS‘tšgCam”aPù
(
deviûID
, 
Prİ”ty
, 
pùV®ue
, 
FÏgs
 = 0);

547 
boŞ
 
	`g‘VideoS‘tšgCam”a
(
deviûID
, 
Prİ”ty
, &
mš
, &
max
, &
S‹µšgD–
, &
cu¼’tV®ue
, &
æags
, &
deçuÉV®ue
);

552 
	$g‘Width
(
deviûID
) const;

553 
	$g‘Height
(
deviûID
) const;

554 
	$g‘Size
(
deviûID
) const;

555 
	$g‘Fourcc
(
deviûID
) const;

556 
	$g‘FPS
(
deviûID
) const;

559 
	`¡İDeviû
(
deviûID
);

562 
boŞ
 
	`»¡¬tDeviû
(
deviûID
);

565 
deviûsFound
;

568 
	`g‘VideoPrİ”tyFromCV
(
cv_´İ”ty
);

569 
	`g‘Cam”aPrİ”tyFromCV
(
cv_´İ”ty
);

571 
´iv©e
:

572 
	`£tPhyCÚ
(
deviûID
, 
cÚn
);

573 
	`£tA‰em±C­tu»Size
(
deviûID
, 
w
, 
h
,
GUID
 
medŸTy³
=
MEDIASUBTYPE_RGB24
);

574 
boŞ
 
	`£tup
(
deviûID
);

575 
	`´oûssPix–s
(* 
¤c
, * 
d¡
, 
width
, 
height
, 
boŞ
 
bRGB
, boŞ 
bFl
);

576 
	`¡¬t
(
deviûID
, 
videoDeviû
 * 
VD
);

577 
	`g‘DeviûCouÁ
();

578 
	`g‘MedŸSubty³AsSŒšg
(
GUID
 
ty³
, * 
ty³AsSŒšg
);

579 
GUID
 *
	`g‘MedŸSubty³FromFourcc
(
fourcc
);

580 
	$g‘FourccFromMedŸSubty³
(
GUID
 
ty³
) const;

582 
	`g‘VideoPrİ”tyAsSŒšg
(
´İ
, * 
´İ”tyAsSŒšg
);

583 
	`g‘Cam”aPrİ”tyAsSŒšg
(
´İ
, * 
´İ”tyAsSŒšg
);

585 
HRESULT
 
	`g‘Deviû
(
IBa£F‹r
 **
pSrcF‹r
, 
deviûID
, 
WCHAR
 * 
wDeviûName
, * 
nDeviûName
);

586 
HRESULT
 
	`ShowF‹rPrİ”tyPages
(
IBa£F‹r
 *
pF‹r
);

587 
HRESULT
 
	`ShowSŒ—mPrİ”tyPages
(
IAMSŒ—mCÚfig
 *
pSŒ—m
);

589 
HRESULT
 
	`SaveG¿phFe
(
IG¿phBud”
 *
pG¿ph
, 
WCHAR
 *
wszP©h
);

590 
HRESULT
 
	`rou‹Crossb¬
(
IC­tu»G¿phBud”2
 **
µBud
, 
IBa£F‹r
 **
pVidInF‹r
, 
cÚTy³
, 
GUID
 
ÿ±u»Mode
);

593 
boŞ
 
	`comIn™
();

594 
boŞ
 
	`comUnIn™
();

596 
cÚÃùiÚ
;

597 
ÿÎbackS‘CouÁ
;

598 
boŞ
 
bC®lback
;

600 
GUID
 
CAPTURE_MODE
;

603 
GUID
 
MEDIASUBTYPE_Y800
;

604 
GUID
 
MEDIASUBTYPE_Y8
;

605 
GUID
 
MEDIASUBTYPE_GREY
;

607 
videoDeviû
 * 
VDLi¡
[
VI_MAX_CAMERAS
];

608 
GUID
 
medŸSubty³s
[
VI_NUM_TYPES
];

609 
fÜm©Ty³s
[
VI_NUM_FORMATS
];

611 
__cdeş
 
	`basicTh»ad
(* 
objPŒ
);

613 
deviûNames
[
VI_MAX_CAMERAS
][255];

619 
	$MyF»eMedŸTy³
(
AM_MEDIA_TYPE
& 
mt
){

620 ià(
mt
.
cbFÜm©
 != 0)

622 
	`CoTaskMemF»e
((
PVOID
)
mt
.
pbFÜm©
);

623 
mt
.
cbFÜm©
 = 0;

624 
mt
.
pbFÜm©
 = 
NULL
;

626 ià(
mt
.
pUnk
 !ğ
NULL
)

629 
mt
.
pUnk
->
	`R–—£
();

630 
mt
.
pUnk
 = 
NULL
;

632 
	}
}

634 
	$MyD–‘eMedŸTy³
(
AM_MEDIA_TYPE
 *
pmt
)

636 ià(
pmt
 !ğ
NULL
)

638 
	`MyF»eMedŸTy³
(*
pmt
);

639 
	`CoTaskMemF»e
(
pmt
);

641 
	}
}

646 şas 
	cSam¶eG¿bb”C®lback
 : 
public
 
ISam¶eG¿bb”CB
{

647 
public
:

650 
	$Sam¶eG¿bb”C®lback
(){

651 
	`In™ŸlizeCr™iÿlSeùiÚ
(&
ü™SeùiÚ
);

652 
ä“zeCheck
 = 0;

655 
bufãrS‘up
 = 
çl£
;

656 
ÃwF¿me
 = 
çl£
;

657 
Ï‹¡BufãrL’gth
 = 0;

659 
hEv’t
 = 
	`C»©eEv’t
(
NULL
, 
Œue
, 
çl£
, NULL);

664 
vœtu®
 ~
	$Sam¶eG¿bb”C®lback
(){

665 
±rBufãr
 = 
NULL
;

666 
	`D–‘eCr™iÿlSeùiÚ
(&
ü™SeùiÚ
);

667 
	`Clo£HªdË
(
hEv’t
);

668 if(
bufãrS‘up
){

669 
d–‘e
[] 
pix–s
;

671 
	}
}

675 
boŞ
 
	$£tupBufãr
(
numBy‹sIn
){

676 if(
bufãrS‘up
){

677  
çl£
;

679 
numBy‹s
 = 
numBy‹sIn
;

680 
pix–s
 = 
Ãw
 [
numBy‹s
];

681 
bufãrS‘up
 = 
Œue
;

682 
ÃwF¿me
 = 
çl£
;

683 
Ï‹¡BufãrL’gth
 = 0;

685  
Œue
;

686 
	}
}

690 
	$STDMETHODIMP_
(
ULONG
è
	$AddRef
(è{  1; 
	}
}

691 
	$STDMETHODIMP_
(
ULONG
è
	$R–—£
(è{  2; 
	}
}

695 
STDMETHODIMP
 
	$Qu”yIÁ”çû
(
REFIID
, **
µvObjeù
){

696 *
µvObjeù
 = 
¡©ic_ÿ¡
<
ISam¶eG¿bb”CB
*>(
this
);

697  
S_OK
;

698 
	}
}

703 
STDMETHODIMP
 
	$Sam¶eCB
(, 
IMedŸSam¶e
 *
pSam¶e
){

704 if(
	`Wa™FÜSšgËObjeù
(
hEv’t
, 0è=ğ
WAIT_OBJECT_0
è 
S_OK
;

706 
HRESULT
 
hr
 = 
pSam¶e
->
	`G‘Poš‹r
(&
±rBufãr
);

708 if(
hr
 =ğ
S_OK
){

709 
Ï‹¡BufãrL’gth
 = 
pSam¶e
->
	`G‘Aùu®D©aL’gth
();

710 if(
Ï‹¡BufãrL’gth
 =ğ
numBy‹s
){

711 
	`EÁ”Cr™iÿlSeùiÚ
(&
ü™SeùiÚ
);

712 
	`memıy
(
pix–s
, 
±rBufãr
, 
Ï‹¡BufãrL’gth
);

713 
ÃwF¿me
 = 
Œue
;

714 
ä“zeCheck
 = 1;

715 
	`L—veCr™iÿlSeùiÚ
(&
ü™SeùiÚ
);

716 
	`S‘Ev’t
(
hEv’t
);

718 
	`DebugPrštOut
("ERROR: SampleCB() - buffer sizes do‚ot match\n");

722  
S_OK
;

723 
	}
}

727 
STDMETHODIMP
 
	$BufãrCB
(, 
BYTE
 *, ){

728  
E_NOTIMPL
;

729 
	}
}

731 
	gä“zeCheck
;

733 
	gÏ‹¡BufãrL’gth
;

734 
	gnumBy‹s
;

735 
boŞ
 
	gÃwF¿me
;

736 
boŞ
 
	gbufãrS‘up
;

737 * 
	gpix–s
;

738 * 
	g±rBufãr
;

739 
CRITICAL_SECTION
 
	gü™SeùiÚ
;

740 
HANDLE
 
	ghEv’t
;

751 
	gvideoDeviû
::
	$videoDeviû
(){

753 
pC­tu»G¿ph
 = 
NULL
;

754 
pG¿ph
 = 
NULL
;

755 
pCÚŒŞ
 = 
NULL
;

756 
pVideoIÅutF‹r
 = 
NULL
;

757 
pG¿bb”
 = 
NULL
;

758 
pDe¡F‹r
 = 
NULL
;

759 
pG¿bb”F
 = 
NULL
;

760 
pMedŸEv’t
 = 
NULL
;

761 
¡»amCÚf
 = 
NULL
;

762 
pAmMedŸTy³
 = 
NULL
;

765 
sgC®lback
 = 
Ãw
 
	`Sam¶eG¿bb”C®lback
();

766 
sgC®lback
->
ÃwF¿me
 = 
çl£
;

769 
videoTy³
 = 
MEDIASUBTYPE_RGB24
;

770 
cÚÃùiÚ
 = 
PhysCÚn_Video_Compos™e
;

771 
¡ÜeCÚn
 = 0;

773 
videoSize
 = 0;

774 
width
 = 0;

775 
height
 = 0;

777 
ŒyWidth
 = 640;

778 
ŒyHeight
 = 480;

779 
ŒyVideoTy³
 = 
MEDIASUBTYPE_RGB24
;

780 
nF¿mesFÜRecÚÃù
= 10000;

781 
nF¿mesRuÂšg
 = 0;

782 
myID
 = -1;

784 
ŒyDiffSize
 = 
Œue
;

785 
u£Crossb¬
 = 
çl£
;

786 
»adyToC­tu»
 = 
çl£
;

787 
sizeS‘
 = 
çl£
;

788 
£tupS¹ed
 = 
çl£
;

789 
¥ecificFÜm©
 = 
çl£
;

790 
autoRecÚÃù
 = 
çl£
;

791 
»que¡edF¿meTime
 = -1;

793 
	`mem£t
(
wDeviûName
, 0, (
WCHAR
) * 255);

794 
	`mem£t
(
nDeviûName
, 0, () * 255);

796 
	}
}

804 
	gvideoDeviû
::
	$£tSize
(
w
, 
h
){

805 if(
sizeS‘
){

806 
	`DebugPrštOut
("SETUP: Error device size should‚ot be set morehan once\n");

810 
width
 = 
w
;

811 
height
 = 
h
;

812 
videoSize
 = 
w
*
h
*3;

813 
sizeS‘
 = 
Œue
;

814 
pix–s
 = 
Ãw
 [
videoSize
];

815 
pBufãr
 = 
Ãw
 [
videoSize
];

817 
	`mem£t
(
pix–s
, 0 , 
videoSize
);

818 
sgC®lback
->
	`£tupBufãr
(
videoSize
);

821 
	}
}

829 
	gvideoDeviû
::
	$NukeDown¡»am
(
IBa£F‹r
 *
pBF
){

830 
IPš
 *
pP
, *
pTo
;

831 
ULONG
 
u
;

832 
IEnumPšs
 *
pšs
 = 
NULL
;

833 
PIN_INFO
 
pššfo
;

834 
HRESULT
 
hr
 = 
pBF
->
	`EnumPšs
(&
pšs
);

835 
pšs
->
	`Re£t
();

836 
hr
 =ğ
NOERROR
)

838 
hr
 = 
pšs
->
	`Next
(1, &
pP
, &
u
);

839 ià(
hr
 =ğ
S_OK
 && 
pP
)

841 
pP
->
	`CÚÃùedTo
(&
pTo
);

842 ià(
pTo
)

844 
hr
 = 
pTo
->
	`Qu”yPšInfo
(&
pššfo
);

845 ià(
hr
 =ğ
NOERROR
)

847 ià(
pššfo
.
dœ
 =ğ
PINDIR_INPUT
)

849 
	`NukeDown¡»am
(
pššfo
.
pF‹r
);

850 
pG¿ph
->
	`DiscÚÃù
(
pTo
);

851 
pG¿ph
->
	`DiscÚÃù
(
pP
);

852 
pG¿ph
->
	`RemoveF‹r
(
pššfo
.
pF‹r
);

854 
pššfo
.
pF‹r
->
	`R–—£
();

855 
pššfo
.
pF‹r
 = 
NULL
;

857 
pTo
->
	`R–—£
();

859 
pP
->
	`R–—£
();

862 ià(
pšs
èpšs->
	`R–—£
();

863 
	}
}

870 
	gvideoDeviû
::
	$de¡royG¿ph
(){

871 
HRESULT
 
hr
 = 0;

875 
i
 = 0;

876 
hr
 =ğ
NOERROR
)

878 
IEnumF‹rs
 * 
pEnum
 = 0;

879 
ULONG
 
cF‘ched
;

883 
hr
 = 
pG¿ph
->
	`EnumF‹rs
(&
pEnum
);

884 ià(
	`FAILED
(
hr
)è{ 
	`DebugPrštOut
("SETUP:…Graph->EnumFilters() failed.\n"); ; }

886 
IBa£F‹r
 * 
pF‹r
 = 
NULL
;

887 ià(
pEnum
->
	`Next
(1, &
pF‹r
, &
cF‘ched
è=ğ
S_OK
)

889 
FILTER_INFO
 
F‹rInfo
;

890 
	`mem£t
(&
F‹rInfo
, 0, (FilterInfo));

891 
hr
 = 
pF‹r
->
	`Qu”yF‹rInfo
(&
F‹rInfo
);

892 
F‹rInfo
.
pG¿ph
->
	`R–—£
();

894 
couÁ
 = 0;

895 
bufãr
[255];

896 
	`mem£t
(
bufãr
, 0, 255 * ());

898  
F‹rInfo
.
achName
[
couÁ
] != 0x00 )

900 
bufãr
[
couÁ
] = ()
F‹rInfo
.
achName
[count];

901 
couÁ
++;

904 
	`DebugPrštOut
("SETUP:„emovšg f‹¸%s...\n", 
bufãr
);

905 
hr
 = 
pG¿ph
->
	`RemoveF‹r
(
pF‹r
);

906 ià(
	`FAILED
(
hr
)è{ 
	`DebugPrštOut
("SETUP:…Graph->RemoveFilter() failed.\n"); ; }

907 
	`DebugPrštOut
("SETUP: f‹¸»moved %s\n",
bufãr
);

909 
pF‹r
->
	`R–—£
();

910 
pF‹r
 = 
NULL
;

913 
pEnum
->
	`R–—£
();

914 
pEnum
 = 
NULL
;

915 
i
++;

919 
	}
}

928 
	gvideoDeviû
::~
	$videoDeviû
(){

930 if(
£tupS¹ed
){ 
	`DebugPrštOut
("\nSETUP: DiscÚÃùšg deviû %i\n", 
myID
); }

932 if(
sgC®lback
){

933 
sgC®lback
->
	`R–—£
();

934 
d–‘e
 
sgC®lback
;

939 
HRESULT
 
HR
 = 
NOERROR
;

942 ifĞ(
sgC®lback
è&& (
pG¿bb”
) )

944 
pG¿bb”
->
	`S‘C®lback
(
NULL
, 1);

945 
	`DebugPrštOut
("SETUP: freeing Grabber Callback\n");

946 
sgC®lback
->
	`R–—£
();

949 if(
sizeS‘
){

950 
d–‘e
[] 
pix–s
;

951 
d–‘e
[] 
pBufãr
;

954 
d–‘e
 
sgC®lback
;

958 ifĞ(
pCÚŒŞ
) )

960 
HR
 = 
pCÚŒŞ
->
	`Pau£
();

961 ià(
	`FAILED
(
HR
)è
	`DebugPrštOut
("ERROR - Could‚ot…ause…Control\n");

963 
HR
 = 
pCÚŒŞ
->
	`Stİ
();

964 ià(
	`FAILED
(
HR
)è
	`DebugPrštOut
("ERROR - Could‚ot stop…Control\n");

968 ifĞ(
pVideoIÅutF‹r
è)
	`NukeDown¡»am
(pVideoInputFilter);

971 ifĞ(
pDe¡F‹r
è){ 
	`DebugPrštOut
("SETUP: freeing Renderer\n");

972 (
pDe¡F‹r
)->
	`R–—£
();

973 (
pDe¡F‹r
) = 0;

975 ifĞ(
pVideoIÅutF‹r
è){ 
	`DebugPrštOut
("SETUP: freeing Capture Source\n");

976 (
pVideoIÅutF‹r
)->
	`R–—£
();

977 (
pVideoIÅutF‹r
) = 0;

979 ifĞ(
pG¿bb”F
è){ 
	`DebugPrštOut
("SETUP: freeing Grabber Filter\n");

980 (
pG¿bb”F
)->
	`R–—£
();

981 (
pG¿bb”F
) = 0;

983 ifĞ(
pG¿bb”
è){ 
	`DebugPrštOut
("SETUP: freeing Grabber\n");

984 (
pG¿bb”
)->
	`R–—£
();

985 (
pG¿bb”
) = 0;

987 ifĞ(
pCÚŒŞ
è){ 
	`DebugPrštOut
("SETUP: freeing Control\n");

988 (
pCÚŒŞ
)->
	`R–—£
();

989 (
pCÚŒŞ
) = 0;

991 ifĞ(
pMedŸEv’t
è){ 
	`DebugPrštOut
("SETUP: freeing Media Event\n");

992 (
pMedŸEv’t
)->
	`R–—£
();

993 (
pMedŸEv’t
) = 0;

995 ifĞ(
¡»amCÚf
è){ 
	`DebugPrštOut
("SETUP: freeing Stream\n");

996 (
¡»amCÚf
)->
	`R–—£
();

997 (
¡»amCÚf
) = 0;

1000 ifĞ(
pAmMedŸTy³
è){ 
	`DebugPrštOut
("SETUP: freeing Media Type\n");

1001 
	`MyD–‘eMedŸTy³
(
pAmMedŸTy³
);

1004 if((
pMedŸEv’t
)){

1005 
	`DebugPrštOut
("SETUP: freeing Media Event\n");

1006 (
pMedŸEv’t
)->
	`R–—£
();

1007 (
pMedŸEv’t
) = 0;

1011 ifĞ(
pG¿ph
è)
	`de¡royG¿ph
();

1014 ifĞ(
pC­tu»G¿ph
è){ 
	`DebugPrštOut
("SETUP: freeing Capture Graph\n");

1015 (
pC­tu»G¿ph
)->
	`R–—£
();

1016 (
pC­tu»G¿ph
) = 0;

1018 ifĞ(
pG¿ph
è){ 
	`DebugPrštOut
("SETUP: freeing Main Graph\n");

1019 (
pG¿ph
)->
	`R–—£
();

1020 (
pG¿ph
) = 0;

1024 
d–‘e
 
pDe¡F‹r
;

1025 
d–‘e
 
pVideoIÅutF‹r
;

1026 
d–‘e
 
pG¿bb”F
;

1027 
d–‘e
 
pG¿bb”
;

1028 
d–‘e
 
pCÚŒŞ
;

1029 
d–‘e
 
¡»amCÚf
;

1030 
d–‘e
 
pMedŸEv’t
;

1031 
d–‘e
 
pC­tu»G¿ph
;

1032 
d–‘e
 
pG¿ph
;

1034 
	`DebugPrštOut
("SETUP: Deviû %˜discÚÃùed‡nd f»ed\n\n",
myID
);

1035 
	}
}

1047 
	gvideoIÅut
::
	$videoIÅut
(){

1049 
	`comIn™
();

1051 
deviûsFound
 = 0;

1052 
ÿÎbackS‘CouÁ
 = 0;

1053 
bC®lback
 = 
Œue
;

1056 
i
=0; i<
VI_MAX_CAMERAS
; i++è
VDLi¡
[i] = 
Ãw
 
	`videoDeviû
();

1058 
	`DebugPrštOut
("\n***** VIDEOINPUT LIBRARY - %2.04à- TFW07 *****\n\n",
VI_VERSION
);

1068 
medŸSubty³s
[0] = 
MEDIASUBTYPE_RGB24
;

1069 
medŸSubty³s
[1] = 
MEDIASUBTYPE_RGB32
;

1070 
medŸSubty³s
[2] = 
MEDIASUBTYPE_RGB555
;

1071 
medŸSubty³s
[3] = 
MEDIASUBTYPE_RGB565
;

1072 
medŸSubty³s
[4] = 
MEDIASUBTYPE_YUY2
;

1073 
medŸSubty³s
[5] = 
MEDIASUBTYPE_YVYU
;

1074 
medŸSubty³s
[6] = 
MEDIASUBTYPE_YUYV
;

1075 
medŸSubty³s
[7] = 
MEDIASUBTYPE_IYUV
;

1076 
medŸSubty³s
[8] = 
MEDIASUBTYPE_UYVY
;

1077 
medŸSubty³s
[9] = 
MEDIASUBTYPE_YV12
;

1078 
medŸSubty³s
[10] = 
MEDIASUBTYPE_YVU9
;

1079 
medŸSubty³s
[11] = 
MEDIASUBTYPE_Y411
;

1080 
medŸSubty³s
[12] = 
MEDIASUBTYPE_Y41P
;

1081 
medŸSubty³s
[13] = 
MEDIASUBTYPE_Y211
;

1082 
medŸSubty³s
[14] = 
MEDIASUBTYPE_AYUV
;

1083 
medŸSubty³s
[15] = 
MEDIASUBTYPE_MJPG
;

1086 
medŸSubty³s
[16] = 
MEDIASUBTYPE_Y800
;

1087 
medŸSubty³s
[17] = 
MEDIASUBTYPE_Y8
;

1088 
medŸSubty³s
[18] = 
MEDIASUBTYPE_GREY
;

1089 
medŸSubty³s
[19] = 
MEDIASUBTYPE_I420
;

1092 
fÜm©Ty³s
[
VI_NTSC_M
] = 
AÇlogVideo_NTSC_M
;

1093 
fÜm©Ty³s
[
VI_NTSC_M_J
] = 
AÇlogVideo_NTSC_M_J
;

1094 
fÜm©Ty³s
[
VI_NTSC_433
] = 
AÇlogVideo_NTSC_433
;

1096 
fÜm©Ty³s
[
VI_PAL_B
] = 
AÇlogVideo_PAL_B
;

1097 
fÜm©Ty³s
[
VI_PAL_D
] = 
AÇlogVideo_PAL_D
;

1098 
fÜm©Ty³s
[
VI_PAL_G
] = 
AÇlogVideo_PAL_G
;

1099 
fÜm©Ty³s
[
VI_PAL_H
] = 
AÇlogVideo_PAL_H
;

1100 
fÜm©Ty³s
[
VI_PAL_I
] = 
AÇlogVideo_PAL_I
;

1101 
fÜm©Ty³s
[
VI_PAL_M
] = 
AÇlogVideo_PAL_M
;

1102 
fÜm©Ty³s
[
VI_PAL_N
] = 
AÇlogVideo_PAL_N
;

1103 
fÜm©Ty³s
[
VI_PAL_NC
] = 
AÇlogVideo_PAL_N_COMBO
;

1105 
fÜm©Ty³s
[
VI_SECAM_B
] = 
AÇlogVideo_SECAM_B
;

1106 
fÜm©Ty³s
[
VI_SECAM_D
] = 
AÇlogVideo_SECAM_D
;

1107 
fÜm©Ty³s
[
VI_SECAM_G
] = 
AÇlogVideo_SECAM_G
;

1108 
fÜm©Ty³s
[
VI_SECAM_H
] = 
AÇlogVideo_SECAM_H
;

1109 
fÜm©Ty³s
[
VI_SECAM_K
] = 
AÇlogVideo_SECAM_K
;

1110 
fÜm©Ty³s
[
VI_SECAM_K1
] = 
AÇlogVideo_SECAM_K1
;

1111 
fÜm©Ty³s
[
VI_SECAM_L
] = 
AÇlogVideo_SECAM_L
;

1113 
	}
}

1121 
	gvideoIÅut
::
	$£tV”bo£
(
boŞ
 
_v”bo£
){

1122 #ifdeà
_DEBUG


1123 
gs_v”bo£
 = 
_v”bo£
;

1125 ()
_v”bo£
;

1127 
	}
}

1134 
	gvideoIÅut
::
	$£tU£C®lback
(
boŞ
 
u£C®lback
){

1135 if(
ÿÎbackS‘CouÁ
 == 0){

1136 
bC®lback
 = 
u£C®lback
;

1137 
ÿÎbackS‘CouÁ
 = 1;

1139 
	`DebugPrštOut
("ERROR: setUseCallback can only be called before setup\n");

1141 
	}
}

1148 
	gvideoIÅut
::
	$£tId—lF¿m”©e
(
deviûNumb”
, 
id—lF¿m”©e
){

1149 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || 
VDLi¡
[deviûNumb”]->
»adyToC­tu»
) ;

1151 ifĞ
id—lF¿m”©e
 > 0 ){

1152 
VDLi¡
[
deviûNumb”
]->
»que¡edF¿meTime
 = ()(10000000 / 
id—lF¿m”©e
);

1154 
	}
}

1162 
	gvideoIÅut
::
	$£tAutoRecÚÃùOnF»eze
(
deviûNumb”
, 
boŞ
 
doRecÚÃù
, 
numMis£dF¿mesBefÜeRecÚÃù
){

1163 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
) ;

1165 
VDLi¡
[
deviûNumb”
]->
autoRecÚÃù
 = 
doRecÚÃù
;

1166 
VDLi¡
[
deviûNumb”
]->
nF¿mesFÜRecÚÃù
 = 
numMis£dF¿mesBefÜeRecÚÃù
;

1168 
	}
}

1176 
boŞ
 
	gvideoIÅut
::
	$£tupDeviû
(
deviûNumb”
){

1177 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || 
VDLi¡
[deviûNumb”]->
»adyToC­tu»
è 
çl£
;

1179 if(
	`£tup
(
deviûNumb”
)) 
Œue
;

1180  
çl£
;

1181 
	}
}

1189 
boŞ
 
	gvideoIÅut
::
	$£tupDeviû
(
deviûNumb”
, 
_cÚÃùiÚ
){

1190 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || 
VDLi¡
[deviûNumb”]->
»adyToC­tu»
è 
çl£
;

1192 
	`£tPhyCÚ
(
deviûNumb”
, 
_cÚÃùiÚ
);

1193 if(
	`£tup
(
deviûNumb”
)) 
Œue
;

1194  
çl£
;

1195 
	}
}

1203 
boŞ
 
	gvideoIÅut
::
	$£tupDeviû
(
deviûNumb”
, 
w
, 
h
){

1204 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || 
VDLi¡
[deviûNumb”]->
»adyToC­tu»
è 
çl£
;

1206 
	`£tA‰em±C­tu»Size
(
deviûNumb”
,
w
,
h
);

1207 if(
	`£tup
(
deviûNumb”
)) 
Œue
;

1208  
çl£
;

1209 
	}
}

1218 
boŞ
 
	gvideoIÅut
::
	$£tupDeviûFourcc
(
deviûNumb”
, 
w
, 
h
,
fourcc
){

1219 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || 
VDLi¡
[deviûNumb”]->
»adyToC­tu»
è 
çl£
;

1221 iàĞ
fourcc
 != -1 ) {

1222 
GUID
 *
medŸTy³
 = 
	`g‘MedŸSubty³FromFourcc
(
fourcc
);

1223 iàĞ
medŸTy³
 ) {

1224 
	`£tA‰em±C­tu»Size
(
deviûNumb”
,
w
,
h
,*
medŸTy³
);

1227 
	`£tA‰em±C­tu»Size
(
deviûNumb”
,
w
,
h
);

1229 if(
	`£tup
(
deviûNumb”
)) 
Œue
;

1230  
çl£
;

1231 
	}
}

1239 
boŞ
 
	gvideoIÅut
::
	$£tupDeviû
(
deviûNumb”
, 
w
, 
h
, 
_cÚÃùiÚ
){

1240 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || 
VDLi¡
[deviûNumb”]->
»adyToC­tu»
è 
çl£
;

1242 
	`£tA‰em±C­tu»Size
(
deviûNumb”
,
w
,
h
);

1243 
	`£tPhyCÚ
(
deviûNumb”
, 
_cÚÃùiÚ
);

1244 if(
	`£tup
(
deviûNumb”
)) 
Œue
;

1245  
çl£
;

1246 
	}
}

1256 
boŞ
 
	gvideoIÅut
::
	$£tFÜm©
(
deviûNumb”
, 
fÜm©
){

1257 if(
deviûNumb”
 >ğ
VI_MAX_CAMERAS
 || !
VDLi¡
[deviûNumb”]->
»adyToC­tu»
è 
çl£
;

1259 
boŞ
 
»tuºV®
 = 
çl£
;

1261 if(
fÜm©
 >ğ0 && fÜm© < 
VI_NUM_FORMATS
){

1262 
VDLi¡
[
deviûNumb”
]->
fÜm©Ty³
 = 
fÜm©Ty³s
[
fÜm©
];

1263 
VDLi¡
[
deviûNumb”
]->
¥ecificFÜm©
 = 
Œue
;

1265 if(
VDLi¡
[
deviûNumb”
]->
¥ecificFÜm©
){

1267 
HRESULT
 
hr
 = 
	`g‘Deviû
(&
VDLi¡
[
deviûNumb”
]->
pVideoIÅutF‹r
, deviûNumb”, VDLi¡[deviûNumb”]->
wDeviûName
, VDLi¡[deviûNumb”]->
nDeviûName
);

1268 if(
hr
 !ğ
S_OK
){

1269  
çl£
;

1272 
IAMAÇlogVideoDecod”
 *
pVideoDec
 = 
NULL
;

1273 
hr
 = 
VDLi¡
[
deviûNumb”
]->
pC­tu»G¿ph
->
	`FšdIÁ”çû
(
NULL
, &
MEDIATYPE_Video
, VDLi¡[deviûNumb”]->
pVideoIÅutF‹r
, 
IID_IAMAÇlogVideoDecod”
, (**)&
pVideoDec
);

1277 if(
VDLi¡
[
deviûNumb”
]->
pVideoIÅutF‹r
)VDLi¡[deviûNumb”]->pVideoIÅutF‹r->
	`R–—£
();

1278 if(
VDLi¡
[
deviûNumb”
]->
pVideoIÅutF‹r
)VDLi¡[deviûNumb”]->pVideoIÅutF‹¸ğ
NULL
;

1280 if(
	`FAILED
(
hr
)){

1281 
	`DebugPrštOut
("SETUP: couldn't set„equested format\n");

1283 
lV®ue
 = 0;

1284 
hr
 = 
pVideoDec
->
	`g‘_AvaabËTVFÜm©s
(&
lV®ue
);

1285 ifĞ
	`SUCCEEDED
(
hr
è&& (
lV®ue
 & 
VDLi¡
[
deviûNumb”
]->
fÜm©Ty³
) )

1287 
hr
 = 
pVideoDec
->
	`put_TVFÜm©
(
VDLi¡
[
deviûNumb”
]->
fÜm©Ty³
);

1288 ifĞ
	`FAILED
(
hr
) ){

1289 
	`DebugPrštOut
("SETUP: couldn't set„equested format\n");

1291 
»tuºV®
 = 
Œue
;

1295 
pVideoDec
->
	`R–—£
();

1296 
pVideoDec
 = 
NULL
;

1301  
»tuºV®
;

1302 
	}
}

1309 
	gvideoIÅut
::
deviûNames
[
VI_MAX_CAMERAS
][255]={{0}};

1311 * 
	gvideoIÅut
::
	$g‘DeviûName
(
deviûID
){

1312 ifĞ
deviûID
 >ğ
VI_MAX_CAMERAS
 ){

1313  
NULL
;

1315  
deviûNames
[
deviûID
];

1316 
	}
}

1324 
	gvideoIÅut
::
	$li¡Deviûs
(
boŞ
 
s’t
){

1327 
	`comIn™
();

1329 if(!
s’t
è
	`DebugPrštOut
("\nVIDEOINPUT SPY MODE!\n\n");

1332 
IC»©eDevEnum
 *
pDevEnum
 = 
NULL
;

1333 
IEnumMÚik”
 *
pEnum
 = 
NULL
;

1334 
deviûCouÁ”
 = 0;

1336 
HRESULT
 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_Sy¡emDeviûEnum
, 
NULL
,

1337 
CLSCTX_INPROC_SERVER
, 
IID_IC»©eDevEnum
,

1338 
»š‹½»t_ÿ¡
<**>(&
pDevEnum
));

1341 ià(
	`SUCCEEDED
(
hr
))

1344 
hr
 = 
pDevEnum
->
	`C»©eCÏssEnum”©Ü
(

1345 
CLSID_VideoIÅutDeviûC©egÜy
,

1346 &
pEnum
, 0);

1348 if(
hr
 =ğ
S_OK
){

1350 if(!
s’t
è
	`DebugPrštOut
("SETUP: Looking For Capture Devices\n");

1351 
IMÚik”
 *
pMÚik”
 = 
NULL
;

1353 
pEnum
->
	`Next
(1, &
pMÚik”
, 
NULL
è=ğ
S_OK
){

1355 
IPrİ”tyBag
 *
pPrİBag
;

1356 
hr
 = 
pMÚik”
->
	`BšdToStÜage
(0, 0, 
IID_IPrİ”tyBag
,

1357 (**)(&
pPrİBag
));

1359 ià(
	`FAILED
(
hr
)){

1360 
pMÚik”
->
	`R–—£
();

1366 
VARIANT
 
v¬Name
;

1367 
	`V¬ŸÁIn™
(&
v¬Name
);

1368 
hr
 = 
pPrİBag
->
	`R—d
(
L
"DesütiÚ", &
v¬Name
, 0);

1370 ià(
	`FAILED
(
hr
)èh¸ğ
pPrİBag
->
	`R—d
(
L
"Fr›ndlyName", &
v¬Name
, 0);

1372 ià(
	`SUCCEEDED
(
hr
)){

1374 
hr
 = 
pPrİBag
->
	`R—d
(
L
"Fr›ndlyName", &
v¬Name
, 0);

1376 
couÁ
 = 0;

1377 
maxL’
 = (
deviûNames
[0])/(deviceNames[0][0]) - 2;

1378  
v¬Name
.
b¡rV®
[
couÁ
] !ğ0x00 && couÁ < 
maxL’
) {

1379 
deviûNames
[
deviûCouÁ”
][
couÁ
] = ()
v¬Name
.
b¡rV®
[count];

1380 
couÁ
++;

1382 
deviûNames
[
deviûCouÁ”
][
couÁ
] = 0;

1384 if(!
s’t
è
	`DebugPrštOut
("SETUP: %iè%s\n",
deviûCouÁ”
, 
deviûNames
[deviceCounter]);

1387 
pPrİBag
->
	`R–—£
();

1388 
pPrİBag
 = 
NULL
;

1390 
pMÚik”
->
	`R–—£
();

1391 
pMÚik”
 = 
NULL
;

1393 
deviûCouÁ”
++;

1396 
pDevEnum
->
	`R–—£
();

1397 
pDevEnum
 = 
NULL
;

1399 
pEnum
->
	`R–—£
();

1400 
pEnum
 = 
NULL
;

1403 if(!
s’t
è
	`DebugPrštOut
("SETUP: %˜Deviû(sèfound\n\n", 
deviûCouÁ”
);

1406 
	`comUnIn™
();

1408  
deviûCouÁ”
;

1409 
	}
}

1417 
	gvideoIÅut
::
	$g‘Width
(
id
) const

1419 if(
	`isDeviûS‘up
(
id
))

1421  
VDLi¡
[
id
] ->
width
;

1426 
	}
}

1434 
	gvideoIÅut
::
	$g‘Height
(
id
) const

1436 if(
	`isDeviûS‘up
(
id
))

1438  
VDLi¡
[
id
] ->
height
;

1443 
	}
}

1449 
	gvideoIÅut
::
	$g‘Fourcc
(
id
) const

1451 if(
	`isDeviûS‘up
(
id
))

1453  
	`g‘FourccFromMedŸSubty³
(
VDLi¡
[
id
]->
videoTy³
);

1458 
	}
}

1460 
	gvideoIÅut
::
	$g‘FPS
(
id
) const

1462 if(
	`isDeviûS‘up
(
id
))

1464 
äameTime
ğ
VDLi¡
[
id
]->
»que¡edF¿meTime
;

1465 ià(
äameTime
>0) {

1466  (10000000.0 / 
äameTime
);

1472 
	}
}

1480 
	gvideoIÅut
::
	$g‘Size
(
id
) const

1482 if(
	`isDeviûS‘up
(
id
))

1484  
VDLi¡
[
id
] ->
videoSize
;

1489 
	}
}

1496 
boŞ
 
	gvideoIÅut
::
	$g‘Pix–s
(
id
, * 
d¡Bufãr
, 
boŞ
 
æRedAndBlue
, boŞ 
æImage
){

1498 
boŞ
 
sucûss
 = 
çl£
;

1500 if(
	`isDeviûS‘up
(
id
)){

1501 if(
bC®lback
){

1504 
DWORD
 
»suÉ
 = 
	`Wa™FÜSšgËObjeù
(
VDLi¡
[
id
]->
sgC®lback
->
hEv’t
, 1000);

1505 ifĞ
»suÉ
 !ğ
WAIT_OBJECT_0
è 
çl£
;

1508 
	`EÁ”Cr™iÿlSeùiÚ
(&
VDLi¡
[
id
]->
sgC®lback
->
ü™SeùiÚ
);

1510 * 
¤c
 = 
VDLi¡
[
id
]->
sgC®lback
->
pix–s
;

1511 * 
d¡
 = 
d¡Bufãr
;

1512 
height
 = 
VDLi¡
[
id
]->height;

1513 
width
 = 
VDLi¡
[
id
]->width;

1515 
	`´oûssPix–s
(
¤c
, 
d¡
, 
width
, 
height
, 
æRedAndBlue
, 
æImage
);

1516 
VDLi¡
[
id
]->
sgC®lback
->
ÃwF¿me
 = 
çl£
;

1518 
	`L—veCr™iÿlSeùiÚ
(&
VDLi¡
[
id
]->
sgC®lback
->
ü™SeùiÚ
);

1520 
	`Re£tEv’t
(
VDLi¡
[
id
]->
sgC®lback
->
hEv’t
);

1522 
sucûss
 = 
Œue
;

1527 
bufãrSize
 = 
VDLi¡
[
id
]->
videoSize
;

1528 
HRESULT
 
hr
 = 
VDLi¡
[
id
]->
pG¿bb”
->
	`G‘Cu¼’tBufãr
(&
bufãrSize
, (*)VDLi¡[id]->
pBufãr
);

1529 if(
hr
==
S_OK
){

1530 
numBy‹s
 = 
VDLi¡
[
id
]->
videoSize
;

1531 ià(
numBy‹s
 =ğ
bufãrSize
){

1533 * 
¤c
 = (* )
VDLi¡
[
id
]->
pBufãr
;

1534 * 
d¡
 = 
d¡Bufãr
;

1535 
height
 = 
VDLi¡
[
id
]->height;

1536 
width
 = 
VDLi¡
[
id
]->width;

1538 
	`´oûssPix–s
(
¤c
, 
d¡
, 
width
, 
height
, 
æRedAndBlue
, 
æImage
);

1539 
sucûss
 = 
Œue
;

1541 
	`DebugPrštOut
("ERROR: GetPixels() - bufferSizes do‚ot match!\n");

1544 
	`DebugPrštOut
("ERROR: G‘Pix–s(è- UÇbËØg¿b f¿mfÜ deviû %i\n", 
id
);

1549  
sucûss
;

1550 
	}
}

1556 * 
	gvideoIÅut
::
	$g‘Pix–s
(
id
, 
boŞ
 
æRedAndBlue
, boŞ 
æImage
){

1558 if(
	`isDeviûS‘up
(
id
)){

1559 
	`g‘Pix–s
(
id
, 
VDLi¡
[id]->
pix–s
, 
æRedAndBlue
, 
æImage
);

1562  
VDLi¡
[
id
]->
pix–s
;

1563 
	}
}

1571 
boŞ
 
	gvideoIÅut
::
	$isF¿meNew
(
id
){

1572 if(!
	`isDeviûS‘up
(
id
)è 
çl£
;

1573 if(!
bC®lback
) 
Œue
;

1575 
boŞ
 
»suÉ
 = 
çl£
;

1576 
boŞ
 
ä“ze
 = 
çl£
;

1579 
	`EÁ”Cr™iÿlSeùiÚ
(&
VDLi¡
[
id
]->
sgC®lback
->
ü™SeùiÚ
);

1580 
»suÉ
 = 
VDLi¡
[
id
]->
sgC®lback
->
ÃwF¿me
;

1583 if(
VDLi¡
[
id
]->
nF¿mesRuÂšg
 > 400 && VDLi¡[id]->
sgC®lback
->
ä“zeCheck
 > VDLi¡[id]->
nF¿mesFÜRecÚÃù
 ){

1584 
ä“ze
 = 
Œue
;

1590 
VDLi¡
[
id
]->
sgC®lback
->
ä“zeCheck
++;

1591 
	`L—veCr™iÿlSeùiÚ
(&
VDLi¡
[
id
]->
sgC®lback
->
ü™SeùiÚ
);

1593 
VDLi¡
[
id
]->
nF¿mesRuÂšg
++;

1595 if(
ä“ze
 && 
VDLi¡
[
id
]->
autoRecÚÃù
){

1596 
	`DebugPrštOut
("ERROR: Device seems frozen -‡ttemptingo„econnect\n");

1597 ifĞ!
	`»¡¬tDeviû
(
VDLi¡
[
id
]->
myID
) ){

1598 
	`DebugPrštOut
("ERROR: Unableo„econnecto device\n");

1600 
	`DebugPrštOut
("SUCCESS: Ableo„econnecto device\n");

1604  
»suÉ
;

1605 
	}
}

1613 
boŞ
 
	gvideoIÅut
::
	$isDeviûS‘up
(
id
) const

1615 if(
id
>=0 && id<
deviûsFound
 && 
VDLi¡
[id]->
»adyToC­tu»
) 
Œue
;

1616  
çl£
;

1617 
	}
}

1626 
__cdeş
 
	gvideoIÅut
::
	$basicTh»ad
(* 
objPŒ
){

1630 
videoDeviû
 * 
vd
 = *Ğ(videoDeviû **)(
objPŒ
) );

1631 
	`ShowF‹rPrİ”tyPages
(
vd
->
pVideoIÅutF‹r
);

1636 if(
vd
->
pVideoIÅutF‹r
)vd->pVideoIÅutF‹r->
	`R–—£
();

1637 if(
vd
->
pVideoIÅutF‹r
)vd->pVideoIÅutF‹¸ğ
NULL
;

1640 
	}
}

1642 
	gvideoIÅut
::
	$showS‘tšgsWšdow
(
id
){

1644 if(
	`isDeviûS‘up
(
id
)){

1650 
HRESULT
 
hr
 = 
	`g‘Deviû
(&
VDLi¡
[
id
]->
pVideoIÅutF‹r
, id, VDLi¡[id]->
wDeviûName
, VDLi¡[id]->
nDeviûName
);

1651 if(
hr
 =ğ
S_OK
){

1653 
	`_begšth»ad
(
basicTh»ad
, 0, (*)&
VDLi¡
[
id
]);

1656 
	}
}

1660 
boŞ
 
	gvideoIÅut
::
	$g‘VideoS‘tšgF‹r
(
deviûID
, 
Prİ”ty
, &
mš
, &
max
, &
S‹µšgD–
, &
cu¼’tV®ue
, &
æags
, &
deçuÉV®ue
){

1661 ifĞ!
	`isDeviûS‘up
(
deviûID
è) 
çl£
;

1663 
HRESULT
 
hr
;

1666 
videoDeviû
 * 
VD
 = 
VDLi¡
[
deviûID
];

1668 
hr
 = 
	`g‘Deviû
(&
VD
->
pVideoIÅutF‹r
, 
deviûID
, VD->
wDeviûName
, VD->
nDeviûName
);

1669 ià(
	`FAILED
(
hr
)){

1670 
	`DebugPrštOut
("setVideoSetting - getDevice Error\n");

1671  
çl£
;

1674 
IAMVideoProcAmp
 *
pAMVideoProcAmp
 = 
NULL
;

1676 
hr
 = 
VD
->
pVideoIÅutF‹r
->
	`Qu”yIÁ”çû
(
IID_IAMVideoProcAmp
, (**)&
pAMVideoProcAmp
);

1677 if(
	`FAILED
(
hr
)){

1678 
	`DebugPrštOut
("setVideoSetting - QueryInterface Error\n");

1679 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹r->
	`R–—£
();

1680 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹¸ğ
NULL
;

1681  
çl£
;

1684 
´İSŒ
[16];

1685 
	`g‘VideoPrİ”tyAsSŒšg
(
Prİ”ty
,
´İSŒ
);

1687 
	`DebugPrštOut
("S‘tšg videØ£‰šg %s.\n", 
´İSŒ
);

1689 
pAMVideoProcAmp
->
	`G‘Rªge
(
Prİ”ty
, &
mš
, &
max
, &
S‹µšgD–
, &
deçuÉV®ue
, &
æags
);

1690 
	`DebugPrštOut
("RªgfÜ videØ£‰šg %s: Mš:%ld Max:%ld S‹µšgD–:%ld DeçuÉ:%ld FÏgs:%ld\n", 
´İSŒ
, 
mš
, 
max
, 
S‹µšgD–
, 
deçuÉV®ue
, 
æags
);

1691 
pAMVideoProcAmp
->
	`G‘
(
Prİ”ty
, &
cu¼’tV®ue
, &
æags
);

1693 if(
pAMVideoProcAmp
íAMVideoProcAmp->
	`R–—£
();

1694 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹r->
	`R–—£
();

1695 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹¸ğ
NULL
;

1697  
Œue
;

1699 
	}
}

1703 
boŞ
 
	gvideoIÅut
::
	$£tVideoS‘tšgF‹rPù
(
deviûID
, 
Prİ”ty
, 
pùV®ue
, 
FÏgs
){

1704 ifĞ!
	`isDeviûS‘up
(
deviûID
è) 
çl£
;

1706 
mš
, 
max
, 
cu¼’tV®ue
, 
æags
, 
deçuÉV®ue
, 
¡•AmÁ
;

1708 ifĞ!
	`g‘VideoS‘tšgF‹r
(
deviûID
, 
Prİ”ty
, 
mš
, 
max
, 
¡•AmÁ
, 
cu¼’tV®ue
, 
æags
, 
deçuÉV®ue
è) 
çl£
;

1710 if(
pùV®ue
 > 1.0)pctValue = 1.0;

1711 if(
pùV®ue
 < 0)pctValue = 0.0;

1713 
¿nge
 = ()
max
 - ()
mš
;

1714 if(
¿nge
 <ğ0) 
çl£
;

1715 if(
¡•AmÁ
 =ğ0è 
çl£
;

1717 
v®ue
 = ()Ğ()
mš
 + 
¿nge
 * 
pùV®ue
 );

1718 
¿¡”V®ue
 = 
v®ue
;

1722 ifĞ
¿nge
 =ğ
¡•AmÁ
 ){

1723 ifĞ
pùV®ue
 < 0.5)
¿¡”V®ue
 = 
mš
;

1724 
¿¡”V®ue
 = 
max
;

1727 
mod
 = 
v®ue
 % 
¡•AmÁ
;

1728 
h®fS‹p
 = ()
¡•AmÁ
 * 0.5f;

1729 ifĞ
mod
 < 
h®fS‹p
 ) 
¿¡”V®ue
 -= mod;

1730 
¿¡”V®ue
 +ğ
¡•AmÁ
 - 
mod
;

1731 
	`DebugPrštOut
("RASTER -…ùV®ui %à- v®ui %l˜- s‹°i %l˜- mod i %l˜-„a¡”V®ui %li\n", 
pùV®ue
, 
v®ue
, 
¡•AmÁ
, 
mod
, 
¿¡”V®ue
);

1734  
	`£tVideoS‘tšgF‹r
(
deviûID
, 
Prİ”ty
, 
¿¡”V®ue
, 
FÏgs
, 
çl£
);

1735 
	}
}

1739 
boŞ
 
	gvideoIÅut
::
	$£tVideoS‘tšgF‹r
(
deviûID
, 
Prİ”ty
, 
lV®ue
, 
FÏgs
, 
boŞ
 
u£DeçuÉV®ue
){

1740 ifĞ!
	`isDeviûS‘up
(
deviûID
è) 
çl£
;

1742 
HRESULT
 
hr
;

1745 
´İSŒ
[16];

1746 
	`g‘VideoPrİ”tyAsSŒšg
(
Prİ”ty
,
´İSŒ
);

1748 
videoDeviû
 * 
VD
 = 
VDLi¡
[
deviûID
];

1750 
hr
 = 
	`g‘Deviû
(&
VD
->
pVideoIÅutF‹r
, 
deviûID
, VD->
wDeviûName
, VD->
nDeviûName
);

1751 ià(
	`FAILED
(
hr
)){

1752 
	`DebugPrštOut
("setVideoSetting - getDevice Error\n");

1753  
çl£
;

1756 
IAMVideoProcAmp
 *
pAMVideoProcAmp
 = 
NULL
;

1758 
hr
 = 
VD
->
pVideoIÅutF‹r
->
	`Qu”yIÁ”çû
(
IID_IAMVideoProcAmp
, (**)&
pAMVideoProcAmp
);

1759 if(
	`FAILED
(
hr
)){

1760 
	`DebugPrštOut
("setVideoSetting - QueryInterface Error\n");

1761 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹r->
	`R–—£
();

1762 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹¸ğ
NULL
;

1763  
çl£
;

1766 
	`DebugPrštOut
("S‘tšg videØ£‰šg %s.\n", 
´İSŒ
);

1767 
Cu¼V®
, 
Mš
, 
Max
, 
S‹µšgD–
, 
DeçuÉ
, 
C­sFÏgs
, 
AvaabËC­sFÏgs
 = 0;

1770 
pAMVideoProcAmp
->
	`G‘Rªge
(
Prİ”ty
, &
Mš
, &
Max
, &
S‹µšgD–
, &
DeçuÉ
, &
AvaabËC­sFÏgs
);

1771 
	`DebugPrštOut
("RªgfÜ videØ£‰šg %s: Mš:%ld Max:%ld S‹µšgD–:%ld DeçuÉ:%ld FÏgs:%ld\n", 
´İSŒ
, 
Mš
, 
Max
, 
S‹µšgD–
, 
DeçuÉ
, 
AvaabËC­sFÏgs
);

1772 
pAMVideoProcAmp
->
	`G‘
(
Prİ”ty
, &
Cu¼V®
, &
C­sFÏgs
);

1774 
	`DebugPrštOut
("Cu¼’ˆv®ue: %ld FÏg %ld (%s)\n", 
Cu¼V®
, 
C­sFÏgs
, (CapsFlags == 1 ? "Auto" : (CapsFlags == 2 ? "Manual" : "Unknown")));

1776 ià(
u£DeçuÉV®ue
) {

1777 
pAMVideoProcAmp
->
	`S‘
(
Prİ”ty
, 
DeçuÉ
, 
VideoProcAmp_FÏgs_Auto
);

1781 
pAMVideoProcAmp
->
	`S‘
(
Prİ”ty
, 
lV®ue
, 
FÏgs
);

1784 if(
pAMVideoProcAmp
íAMVideoProcAmp->
	`R–—£
();

1785 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹r->
	`R–—£
();

1786 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹¸ğ
NULL
;

1788  
Œue
;

1790 
	}
}

1793 
boŞ
 
	gvideoIÅut
::
	$£tVideoS‘tšgCam”aPù
(
deviûID
, 
Prİ”ty
, 
pùV®ue
, 
FÏgs
){

1794 ifĞ!
	`isDeviûS‘up
(
deviûID
è) 
çl£
;

1796 
mš
, 
max
, 
cu¼’tV®ue
, 
æags
, 
deçuÉV®ue
, 
¡•AmÁ
;

1798 ifĞ!
	`g‘VideoS‘tšgCam”a
(
deviûID
, 
Prİ”ty
, 
mš
, 
max
, 
¡•AmÁ
, 
cu¼’tV®ue
, 
æags
, 
deçuÉV®ue
è) 
çl£
;

1800 if(
pùV®ue
 > 1.0)pctValue = 1.0;

1801 if(
pùV®ue
 < 0)pctValue = 0.0;

1803 
¿nge
 = ()
max
 - ()
mš
;

1804 if(
¿nge
 <ğ0) 
çl£
;

1805 if(
¡•AmÁ
 =ğ0è 
çl£
;

1807 
v®ue
 = ()Ğ()
mš
 + 
¿nge
 * 
pùV®ue
 );

1808 
¿¡”V®ue
 = 
v®ue
;

1812 ifĞ
¿nge
 =ğ
¡•AmÁ
 ){

1813 ifĞ
pùV®ue
 < 0.5)
¿¡”V®ue
 = 
mš
;

1814 
¿¡”V®ue
 = 
max
;

1817 
mod
 = 
v®ue
 % 
¡•AmÁ
;

1818 
h®fS‹p
 = ()
¡•AmÁ
 * 0.5f;

1819 ifĞ
mod
 < 
h®fS‹p
 ) 
¿¡”V®ue
 -= mod;

1820 
¿¡”V®ue
 +ğ
¡•AmÁ
 - 
mod
;

1821 
	`DebugPrštOut
("RASTER -…ùV®ui %à- v®ui %l˜- s‹°i %l˜- mod i %l˜-„a¡”V®ui %li\n", 
pùV®ue
, 
v®ue
, 
¡•AmÁ
, 
mod
, 
¿¡”V®ue
);

1824  
	`£tVideoS‘tšgCam”a
(
deviûID
, 
Prİ”ty
, 
¿¡”V®ue
, 
FÏgs
, 
çl£
);

1825 
	}
}

1828 
boŞ
 
	gvideoIÅut
::
	$£tVideoS‘tšgCam”a
(
deviûID
, 
Prİ”ty
, 
lV®ue
, 
FÏgs
, 
boŞ
 
u£DeçuÉV®ue
){

1829 
IAMCam”aCÚŒŞ
 *
pIAMCam”aCÚŒŞ
;

1830 if(
	`isDeviûS‘up
(
deviûID
))

1832 
HRESULT
 
hr
;

1833 
hr
 = 
	`g‘Deviû
(&
VDLi¡
[
deviûID
]->
pVideoIÅutF‹r
, deviûID, VDLi¡[deviûID]->
wDeviûName
, VDLi¡[deviûID]->
nDeviûName
);

1835 
´İSŒ
[16];

1836 
	`g‘Cam”aPrİ”tyAsSŒšg
(
Prİ”ty
,
´İSŒ
);

1838 
	`DebugPrštOut
("S‘tšg videØ£‰šg %s.\n", 
´İSŒ
);

1839 
hr
 = 
VDLi¡
[
deviûID
]->
pVideoIÅutF‹r
->
	`Qu”yIÁ”çû
(
IID_IAMCam”aCÚŒŞ
, (**)&
pIAMCam”aCÚŒŞ
);

1840 ià(
	`FAILED
(
hr
)) {

1841 
	`DebugPrštOut
("Error\n");

1842 if(
VDLi¡
[
deviûID
]->
pVideoIÅutF‹r
)VDLi¡[deviûID]->pVideoIÅutF‹r->
	`R–—£
();

1843 if(
VDLi¡
[
deviûID
]->
pVideoIÅutF‹r
)VDLi¡[deviûID]->pVideoIÅutF‹¸ğ
NULL
;

1844  
çl£
;

1848 
Cu¼V®
, 
Mš
, 
Max
, 
S‹µšgD–
, 
DeçuÉ
, 
C­sFÏgs
, 
AvaabËC­sFÏgs
;

1849 
pIAMCam”aCÚŒŞ
->
	`G‘Rªge
(
Prİ”ty
, &
Mš
, &
Max
, &
S‹µšgD–
, &
DeçuÉ
, &
AvaabËC­sFÏgs
);

1850 
	`DebugPrštOut
("RªgfÜ videØ£‰šg %s: Mš:%ld Max:%ld S‹µšgD–:%ld DeçuÉ:%ld FÏgs:%ld\n", 
´İSŒ
, 
Mš
, 
Max
, 
S‹µšgD–
, 
DeçuÉ
, 
AvaabËC­sFÏgs
);

1851 
pIAMCam”aCÚŒŞ
->
	`G‘
(
Prİ”ty
, &
Cu¼V®
, &
C­sFÏgs
);

1852 
	`DebugPrštOut
("Cu¼’ˆv®ue: %ld FÏg %ld (%s)\n", 
Cu¼V®
, 
C­sFÏgs
, (CapsFlags == 1 ? "Auto" : (CapsFlags == 2 ? "Manual" : "Unknown")));

1853 ià(
u£DeçuÉV®ue
) {

1854 
pIAMCam”aCÚŒŞ
->
	`S‘
(
Prİ”ty
, 
DeçuÉ
, 
Cam”aCÚŒŞ_FÏgs_Auto
);

1859 
pIAMCam”aCÚŒŞ
->
	`S‘
(
Prİ”ty
, 
lV®ue
, 
FÏgs
);

1861 
pIAMCam”aCÚŒŞ
->
	`R–—£
();

1862 if(
VDLi¡
[
deviûID
]->
pVideoIÅutF‹r
)VDLi¡[deviûID]->pVideoIÅutF‹r->
	`R–—£
();

1863 if(
VDLi¡
[
deviûID
]->
pVideoIÅutF‹r
)VDLi¡[deviûID]->pVideoIÅutF‹¸ğ
NULL
;

1864  
Œue
;

1867  
çl£
;

1868 
	}
}

1872 
boŞ
 
	gvideoIÅut
::
	$g‘VideoS‘tšgCam”a
(
deviûID
, 
Prİ”ty
, &
mš
, &
max
, &
S‹µšgD–
, &
cu¼’tV®ue
, &
æags
, &
deçuÉV®ue
){

1873 ifĞ!
	`isDeviûS‘up
(
deviûID
è) 
çl£
;

1875 
HRESULT
 
hr
;

1878 
videoDeviû
 * 
VD
 = 
VDLi¡
[
deviûID
];

1880 
hr
 = 
	`g‘Deviû
(&
VD
->
pVideoIÅutF‹r
, 
deviûID
, VD->
wDeviûName
, VD->
nDeviûName
);

1881 ià(
	`FAILED
(
hr
)){

1882 
	`DebugPrštOut
("setVideoSetting - getDevice Error\n");

1883  
çl£
;

1886 
IAMCam”aCÚŒŞ
 *
pIAMCam”aCÚŒŞ
 = 
NULL
;

1888 
hr
 = 
VD
->
pVideoIÅutF‹r
->
	`Qu”yIÁ”çû
(
IID_IAMCam”aCÚŒŞ
, (**)&
pIAMCam”aCÚŒŞ
);

1889 if(
	`FAILED
(
hr
)){

1890 
	`DebugPrštOut
("setVideoSetting - QueryInterface Error\n");

1891 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹r->
	`R–—£
();

1892 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹¸ğ
NULL
;

1893  
çl£
;

1896 
´İSŒ
[16];

1897 
	`g‘Cam”aPrİ”tyAsSŒšg
(
Prİ”ty
,
´İSŒ
);

1898 
	`DebugPrštOut
("S‘tšg videØ£‰šg %s.\n", 
´İSŒ
);

1900 
pIAMCam”aCÚŒŞ
->
	`G‘Rªge
(
Prİ”ty
, &
mš
, &
max
, &
S‹µšgD–
, &
deçuÉV®ue
, &
æags
);

1901 
	`DebugPrštOut
("RªgfÜ videØ£‰šg %s: Mš:%ld Max:%ld S‹µšgD–:%ld DeçuÉ:%ld FÏgs:%ld\n", 
´İSŒ
, 
mš
, 
max
, 
S‹µšgD–
, 
deçuÉV®ue
, 
æags
);

1902 
pIAMCam”aCÚŒŞ
->
	`G‘
(
Prİ”ty
, &
cu¼’tV®ue
, &
æags
);

1904 if(
pIAMCam”aCÚŒŞ
íIAMCam”aCÚŒŞ->
	`R–—£
();

1905 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹r->
	`R–—£
();

1906 if(
VD
->
pVideoIÅutF‹r
)VD->pVideoIÅutF‹¸ğ
NULL
;

1908  
Œue
;

1910 
	}
}

1918 
	gvideoIÅut
::
	$¡İDeviû
(
id
){

1919 if(
id
 < 
VI_MAX_CAMERAS
)

1921 
d–‘e
 
VDLi¡
[
id
];

1922 
VDLi¡
[
id
] = 
Ãw
 
	`videoDeviû
();

1925 
	}
}

1932 
boŞ
 
	gvideoIÅut
::
	$»¡¬tDeviû
(
id
){

1933 if(
	`isDeviûS‘up
(
id
))

1935 
cÚn
 = 
VDLi¡
[
id
]->
¡ÜeCÚn
;

1936 
tmpW
 = 
VDLi¡
[
id
]->
width
;

1937 
tmpH
 = 
VDLi¡
[
id
]->
height
;

1939 
boŞ
 
bFÜm©
 = 
VDLi¡
[
id
]->
¥ecificFÜm©
;

1940 
fÜm©
 = 
VDLi¡
[
id
]->
fÜm©Ty³
;

1942 
nRecÚÃù
 = 
VDLi¡
[
id
]->
nF¿mesFÜRecÚÃù
;

1943 
boŞ
 
bRecÚÃù
 = 
VDLi¡
[
id
]->
autoRecÚÃù
;

1945 
avgF¿meTime
 = 
VDLi¡
[
id
]->
»que¡edF¿meTime
;

1947 
	`¡İDeviû
(
id
);

1950 ifĞ
avgF¿meTime
 != ()-1){

1951 
VDLi¡
[
id
]->
»que¡edF¿meTime
 = 
avgF¿meTime
;

1954 ifĞ
	`£tupDeviû
(
id
, 
tmpW
, 
tmpH
, 
cÚn
) ){

1956 ifĞ
bFÜm©
 ){

1957 
	`£tFÜm©
(
id
, 
fÜm©
);

1959 ifĞ
bRecÚÃù
 ){

1960 
	`£tAutoRecÚÃùOnF»eze
(
id
, 
Œue
, 
nRecÚÃù
);

1962  
Œue
;

1965  
çl£
;

1966 
	}
}

1972 
	gvideoIÅut
::~
	$videoIÅut
(){

1974 
i
 = 0; i < 
VI_MAX_CAMERAS
; i++)

1976 
d–‘e
 
VDLi¡
[
i
];

1979 
	`comUnIn™
();

1980 
	}
}

1992 
boŞ
 
	gvideoIÅut
::
	$comIn™
(){

2014  
Œue
;

2015 
	}
}

2023 
boŞ
 
	gvideoIÅut
::
	$comUnIn™
(){

2032  
Œue
;

2033 
	}
}

2041 
	gvideoIÅut
::
	$£tA‰em±C­tu»Size
(
id
, 
w
, 
h
,
GUID
 
medŸTy³
){

2043 
VDLi¡
[
id
]->
ŒyWidth
 = 
w
;

2044 
VDLi¡
[
id
]->
ŒyHeight
 = 
h
;

2045 
VDLi¡
[
id
]->
ŒyDiffSize
 = 
Œue
;

2046 
VDLi¡
[
id
]->
ŒyVideoTy³
 = 
medŸTy³
;

2048 
	}
}

2055 
	gvideoIÅut
::
	$£tPhyCÚ
(
id
, 
cÚn
){

2057 
cÚn
){

2060 
VDLi¡
[
id
]->
cÚÃùiÚ
 = 
PhysCÚn_Video_Compos™e
;

2063 
VDLi¡
[
id
]->
cÚÃùiÚ
 = 
PhysCÚn_Video_SVideo
;

2066 
VDLi¡
[
id
]->
cÚÃùiÚ
 = 
PhysCÚn_Video_TuÃr
;

2069 
VDLi¡
[
id
]->
cÚÃùiÚ
 = 
PhysCÚn_Video_USB
;

2072 
VDLi¡
[
id
]->
cÚÃùiÚ
 = 
PhysCÚn_Video_1394
;

2079 
VDLi¡
[
id
]->
¡ÜeCÚn
 = 
cÚn
;

2080 
VDLi¡
[
id
]->
u£Crossb¬
 = 
Œue
;

2081 
	}
}

2089 
boŞ
 
	gvideoIÅut
::
	$£tup
(
deviûNumb”
){

2090 
deviûsFound
 = 
	`g‘DeviûCouÁ
();

2092 if(
deviûNumb”
>
deviûsFound
-1)

2094 
	`DebugPrštOut
("SETUP: deviû[%i]‚Ù found - you hav%˜deviû avaabË\n", 
deviûNumb”
, 
deviûsFound
);

2095 if(
deviûsFound
>=0è
	`DebugPrštOut
("SETUP:his meanshathe†ast device you can use is device[%i]\n", devicesFound-1);

2096  
çl£
;

2099 if(
VDLi¡
[
deviûNumb”
]->
»adyToC­tu»
)

2101 
	`DebugPrštOut
("SETUP: cª'ˆ£tup, deviû %˜i cu¼’y bešg u£d\n",
VDLi¡
[
deviûNumb”
]->
myID
);

2102  
çl£
;

2105 
HRESULT
 
hr
 = 
	`¡¬t
(
deviûNumb”
, 
VDLi¡
[deviceNumber]);

2106 if(
hr
 =ğ
S_OK
) 
Œue
;

2107  
çl£
;

2108 
	}
}

2116 
	gvideoIÅut
::
	$´oûssPix–s
(* 
¤c
, * 
d¡
, 
width
, 
height
, 
boŞ
 
bRGB
, boŞ 
bFl
){

2118 
widthInBy‹s
 = 
width
 * 3;

2119 
numBy‹s
 = 
widthInBy‹s
 * 
height
;

2121 if(!
bRGB
){

2126 if(
bFl
){

2127 
y
 = 0; y < 
height
; y++){

2128 
	`memıy
(
d¡
 + (
y
 * 
widthInBy‹s
), 
¤c
 + ( (
height
 -y -1) * widthInBytes), widthInBytes);

2132 
	`memıy
(
d¡
, 
¤c
, 
numBy‹s
);

2135 if(
bFl
){

2137 
x
 = 0;

2138 
y
 = (
height
 - 1è* 
widthInBy‹s
;

2139 
¤c
 +ğ
y
;

2141 
i
 = 0; i < 
numBy‹s
; i+=3){

2142 if(
x
 >ğ
width
){

2143 
x
 = 0;

2144 
¤c
 -ğ
widthInBy‹s
*2;

2147 *
d¡
 = *(
¤c
+2);

2148 
d¡
++;

2150 *
d¡
 = *(
¤c
+1);

2151 
d¡
++;

2153 *
d¡
 = *
¤c
;

2154 
d¡
++;

2156 
¤c
+=3;

2157 
x
++;

2161 
i
 = 0; i < 
numBy‹s
; i+=3){

2162 *
d¡
 = *(
¤c
+2);

2163 
d¡
++;

2165 *
d¡
 = *(
¤c
+1);

2166 
d¡
++;

2168 *
d¡
 = *
¤c
;

2169 
d¡
++;

2171 
¤c
+=3;

2175 
	}
}

2179 
	gvideoIÅut
::
	$g‘MedŸSubty³AsSŒšg
(
GUID
 
ty³
, * 
ty³AsSŒšg
){

2181 
tmpSŒ
[8];

2182 ifĞ
ty³
 =ğ
MEDIASUBTYPE_RGB24
è
	`¥rštf
(
tmpSŒ
, "RGB24");

2183 if(
ty³
 =ğ
MEDIASUBTYPE_RGB32
è
	`¥rštf
(
tmpSŒ
, "RGB32");

2184 if(
ty³
 =ğ
MEDIASUBTYPE_RGB555
)
	`¥rštf
(
tmpSŒ
, "RGB555");

2185 if(
ty³
 =ğ
MEDIASUBTYPE_RGB565
)
	`¥rštf
(
tmpSŒ
, "RGB565");

2186 if(
ty³
 =ğ
MEDIASUBTYPE_YUY2
è
	`¥rštf
(
tmpSŒ
, "YUY2");

2187 if(
ty³
 =ğ
MEDIASUBTYPE_YVYU
è
	`¥rštf
(
tmpSŒ
, "YVYU");

2188 if(
ty³
 =ğ
MEDIASUBTYPE_YUYV
è
	`¥rštf
(
tmpSŒ
, "YUYV");

2189 if(
ty³
 =ğ
MEDIASUBTYPE_IYUV
è
	`¥rštf
(
tmpSŒ
, "IYUV");

2190 if(
ty³
 =ğ
MEDIASUBTYPE_UYVY
è
	`¥rštf
(
tmpSŒ
, "UYVY");

2191 if(
ty³
 =ğ
MEDIASUBTYPE_YV12
è
	`¥rštf
(
tmpSŒ
, "YV12");

2192 if(
ty³
 =ğ
MEDIASUBTYPE_YVU9
è
	`¥rštf
(
tmpSŒ
, "YVU9");

2193 if(
ty³
 =ğ
MEDIASUBTYPE_Y411
è
	`¥rštf
(
tmpSŒ
, "Y411");

2194 if(
ty³
 =ğ
MEDIASUBTYPE_Y41P
è
	`¥rštf
(
tmpSŒ
, "Y41P");

2195 if(
ty³
 =ğ
MEDIASUBTYPE_Y211
è
	`¥rštf
(
tmpSŒ
, "Y211");

2196 if(
ty³
 =ğ
MEDIASUBTYPE_AYUV
è
	`¥rštf
(
tmpSŒ
, "AYUV");

2197 if(
ty³
 =ğ
MEDIASUBTYPE_MJPG
è
	`¥rštf
(
tmpSŒ
, "MJPG");

2198 if(
ty³
 =ğ
MEDIASUBTYPE_Y800
è
	`¥rštf
(
tmpSŒ
, "Y800");

2199 if(
ty³
 =ğ
MEDIASUBTYPE_Y8
è
	`¥rštf
(
tmpSŒ
, "Y8");

2200 if(
ty³
 =ğ
MEDIASUBTYPE_GREY
è
	`¥rštf
(
tmpSŒ
, "GREY");

2201 if(
ty³
 =ğ
MEDIASUBTYPE_I420
è
	`¥rštf
(
tmpSŒ
, "I420");

2202 
	`¥rštf
(
tmpSŒ
, "OTHER");

2204 
	`memıy
(
ty³AsSŒšg
, 
tmpSŒ
, ()*8);

2205 
	}
}

2207 
	gvideoIÅut
::
	$g‘FourccFromMedŸSubty³
(
GUID
 
ty³
) const

2209  
ty³
.
D©a1
;

2210 
	}
}

2212 
GUID
 *
	gvideoIÅut
::
	$g‘MedŸSubty³FromFourcc
(
fourcc
){

2214 
i
=0;i<
VI_NUM_TYPES
;i++) {

2215 iàĞ()()
fourcc
 =ğ
medŸSubty³s
[
i
].
D©a1
 ) {

2216  &
medŸSubty³s
[
i
];

2220  
NULL
;

2221 
	}
}

2224 
	gvideoIÅut
::
	$g‘VideoPrİ”tyAsSŒšg
(
´İ
, * 
´İ”tyAsSŒšg
){

2226 
tmpSŒ
[16];

2228 iàĞ
´İ
==
VideoProcAmp_BrighŠess
è
	`¥rštf
(
tmpSŒ
, "Brightness");

2229 iàĞ
´İ
==
VideoProcAmp_CÚŒa¡
è
	`¥rštf
(
tmpSŒ
, "Contrast");

2230 iàĞ
´İ
==
VideoProcAmp_S©u¿tiÚ
è
	`¥rštf
(
tmpSŒ
, "Saturation");

2231 iàĞ
´İ
==
VideoProcAmp_Hue
è
	`¥rštf
(
tmpSŒ
, "Hue");

2232 iàĞ
´İ
==
VideoProcAmp_Gaš
è
	`¥rštf
(
tmpSŒ
, "Gain");

2233 iàĞ
´İ
==
VideoProcAmp_Gamma
è
	`¥rštf
(
tmpSŒ
, "Gamma");

2234 iàĞ
´İ
==
VideoProcAmp_CŞÜEÇbË
è
	`¥rštf
(
tmpSŒ
, "ColorEnable");

2235 iàĞ
´İ
==
VideoProcAmp_Sh¬²ess
è
	`¥rštf
(
tmpSŒ
, "Sharpness");

2236 
	`¥rštf
(
tmpSŒ
, "%u",
´İ
);

2238 
	`memıy
(
´İ”tyAsSŒšg
, 
tmpSŒ
, ()*16);

2239 
	}
}

2242 
	gvideoIÅut
::
	$g‘VideoPrİ”tyFromCV
(
cv_´İ”ty
){

2245 
cv_´İ”ty
) {

2246 
CV_CAP_PROP_BRIGHTNESS
:

2247  
VideoProcAmp_BrighŠess
;

2249 
CV_CAP_PROP_CONTRAST
:

2250  
VideoProcAmp_CÚŒa¡
;

2252 
CV_CAP_PROP_HUE
:

2253  
VideoProcAmp_Hue
;

2255 
CV_CAP_PROP_SATURATION
:

2256  
VideoProcAmp_S©u¿tiÚ
;

2258 
CV_CAP_PROP_SHARPNESS
:

2259  
VideoProcAmp_Sh¬²ess
;

2261 
CV_CAP_PROP_GAMMA
:

2262  
VideoProcAmp_Gamma
;

2264 
CV_CAP_PROP_MONOCHROME
:

2265  
VideoProcAmp_CŞÜEÇbË
;

2267 
CV_CAP_PROP_WHITE_BALANCE_BLUE_U
:

2268  
VideoProcAmp_Wh™eB®ªû
;

2270 
CV_CAP_PROP_BACKLIGHT
:

2271  
VideoProcAmp_BacklightCom³n§tiÚ
;

2273 
CV_CAP_PROP_GAIN
:

2274  
VideoProcAmp_Gaš
;

2277 
	}
}

2279 
	gvideoIÅut
::
	$g‘Cam”aPrİ”tyFromCV
(
cv_´İ”ty
){

2282 
cv_´İ”ty
) {

2283 
CV_CAP_PROP_PAN
:

2284  
Cam”aCÚŒŞ_Pª
;

2286 
CV_CAP_PROP_TILT
:

2287  
Cam”aCÚŒŞ_Tt
;

2289 
CV_CAP_PROP_ROLL
:

2290  
Cam”aCÚŒŞ_RŞl
;

2292 
CV_CAP_PROP_ZOOM
:

2293  
Cam”aCÚŒŞ_Zoom
;

2295 
CV_CAP_PROP_EXPOSURE
:

2296  
Cam”aCÚŒŞ_Exposu»
;

2298 
CV_CAP_PROP_IRIS
:

2299  
Cam”aCÚŒŞ_Iris
;

2301 
CV_CAP_PROP_FOCUS
:

2302  
Cam”aCÚŒŞ_Focus
;

2305 
	}
}

2307 
	gvideoIÅut
::
	$g‘Cam”aPrİ”tyAsSŒšg
(
´İ
, * 
´İ”tyAsSŒšg
){

2309 
tmpSŒ
[16];

2311 iàĞ
´İ
==
Cam”aCÚŒŞ_Pª
è
	`¥rštf
(
tmpSŒ
, "Pan");

2312 iàĞ
´İ
==
Cam”aCÚŒŞ_Tt
è
	`¥rštf
(
tmpSŒ
, "Tilt");

2313 iàĞ
´İ
==
Cam”aCÚŒŞ_RŞl
è
	`¥rštf
(
tmpSŒ
, "Roll");

2314 iàĞ
´İ
==
Cam”aCÚŒŞ_Zoom
è
	`¥rštf
(
tmpSŒ
, "Zoom");

2315 iàĞ
´İ
==
Cam”aCÚŒŞ_Exposu»
è
	`¥rštf
(
tmpSŒ
, "Exposure");

2316 iàĞ
´İ
==
Cam”aCÚŒŞ_Iris
è
	`¥rštf
(
tmpSŒ
, "Iris");

2317 iàĞ
´İ
==
Cam”aCÚŒŞ_Focus
è
	`¥rštf
(
tmpSŒ
, "Focus");

2318 
	`¥rštf
(
tmpSŒ
, "%u",
´İ
);

2320 
	`memıy
(
´İ”tyAsSŒšg
, 
tmpSŒ
, ()*16);

2321 
	}
}

2325 
	$fšdClo£¡SizeAndSubty³
(
videoDeviû
 * 
VD
, 
widthIn
, 
heightIn
, &
widthOut
, &
heightOut
, 
GUID
 & 
medŸty³Out
){

2326 
HRESULT
 
hr
;

2329 
Ã¬W
 = 9999999;

2330 
Ã¬H
 = 9999999;

2333 
iCouÁ
 = 0;

2334 
iSize
 = 0;

2335 
hr
 = 
VD
->
¡»amCÚf
->
	`G‘Numb”OfC­ab™›s
(&
iCouÁ
, &
iSize
);

2337 ià(
iSize
 =ğ(
VIDEO_STREAM_CONFIG_CAPS
))

2340 
iFÜm©
 = 0; iFÜm© < 
iCouÁ
; iFormat++)

2342 
VIDEO_STREAM_CONFIG_CAPS
 
scc
;

2343 
AM_MEDIA_TYPE
 *
pmtCÚfig
;

2344 
hr
 = 
VD
->
¡»amCÚf
->
	`G‘SŒ—mC­s
(
iFÜm©
, &
pmtCÚfig
, (
BYTE
*)&
scc
);

2346 ià(
	`SUCCEEDED
(
hr
)){

2349 
¡•X
 = 
scc
.
OuutG¿nuÏr™yX
;

2350 
¡•Y
 = 
scc
.
OuutG¿nuÏr™yY
;

2352 
‹mpW
 = 999999;

2353 
‹mpH
 = 999999;

2356 if(
¡•X
 < 1 || 
¡•Y
 < 1) ;

2361 
boŞ
 
exaùM©ch
 = 
çl£
;

2362 
boŞ
 
exaùM©chX
 = 
çl£
;

2363 
boŞ
 
exaùM©chY
 = 
çl£
;

2365 
x
 = 
scc
.
MšOuutSize
.
cx
; x <ğscc.
MaxOuutSize
.cx; x+ğ
¡•X
){

2367 ifĞ
widthIn
 =ğ
x
 ){

2368 
exaùM©chX
 = 
Œue
;

2369 
‹mpW
 = 
x
;

2372 ifĞ
	`abs
(
widthIn
-
x
è<‡bs(widthIn-
‹mpW
) ){

2373 
‹mpW
 = 
x
;

2377 
y
 = 
scc
.
MšOuutSize
.
cy
; y <ğscc.
MaxOuutSize
.cy; y+ğ
¡•Y
){

2379 ifĞ
heightIn
 =ğ
y
){

2380 
exaùM©chY
 = 
Œue
;

2381 
‹mpH
 = 
y
;

2384 ifĞ
	`abs
(
heightIn
-
y
è<‡bs(heightIn-
‹mpH
) ){

2385 
‹mpH
 = 
y
;

2390 if(
exaùM©chX
 && 
exaùM©chY
){

2392 
exaùM©ch
 = 
Œue
;

2394 
widthOut
 = 
widthIn
;

2395 
heightOut
 = 
heightIn
;

2396 
medŸty³Out
 = 
pmtCÚfig
->
subty³
;

2402 ifĞ
	`abs
(
widthIn
 - 
‹mpW
è+‡bs(
heightIn
 - 
‹mpH
è<‡bs(widthIÀ- 
Ã¬W
è+‡bs(heightIÀ- 
Ã¬H
) )

2404 
Ã¬W
 = 
‹mpW
;

2405 
Ã¬H
 = 
‹mpH
;

2407 
widthOut
 = 
Ã¬W
;

2408 
heightOut
 = 
Ã¬H
;

2409 
medŸty³Out
 = 
pmtCÚfig
->
subty³
;

2412 
	`MyD–‘eMedŸTy³
(
pmtCÚfig
);

2415 if(
exaùM©ch
);

2420 
	}
}

2424 
boŞ
 
	$£tSizeAndSubty³
(
videoDeviû
 * 
VD
, 
©‹m±Width
, 
©‹m±Height
, 
GUID
 
medŸty³
){

2425 
VIDEOINFOHEADER
 *
pVih
 = 
»š‹½»t_ÿ¡
<VIDEOINFOHEADER*>(
VD
->
pAmMedŸTy³
->
pbFÜm©
);

2430 
AM_MEDIA_TYPE
 * 
tmpTy³
 = 
NULL
;

2432 
HRESULT
 
hr
 = 
VD
->
¡»amCÚf
->
	`G‘FÜm©
(&
tmpTy³
);

2433 if(
hr
 !ğ
S_OK
) 
çl£
;

2437 
	`HEADER
(
pVih
)->
biWidth
 = 
©‹m±Width
;

2438 
	`HEADER
(
pVih
)->
biHeight
 = 
©‹m±Height
;

2440 
VD
->
pAmMedŸTy³
->
fÜm©ty³
 = 
FORMAT_VideoInfo
;

2441 
VD
->
pAmMedŸTy³
->
majÜty³
 = 
MEDIATYPE_Video
;

2442 
VD
->
pAmMedŸTy³
->
subty³
 = 
medŸty³
;

2445 ià(
medŸty³
 =ğ
MEDIASUBTYPE_RGB24
)

2447 
VD
->
pAmMedŸTy³
->
lSam¶eSize
 = 
©‹m±Width
*
©‹m±Height
*3;

2452 
VD
->
pAmMedŸTy³
->
lSam¶eSize
 = 0;

2456 ifĞ
VD
->
»que¡edF¿meTime
 != -1){

2457 
pVih
->
AvgTimeP”F¿me
 = 
VD
->
»que¡edF¿meTime
;

2461 
hr
 = 
VD
->
¡»amCÚf
->
	`S‘FÜm©
(VD->
pAmMedŸTy³
);

2462 if(
hr
 =ğ
S_OK
){

2463 ifĞ
tmpTy³
 !ğ
NULL
 )
	`MyD–‘eMedŸTy³
(tmpType);

2464  
Œue
;

2466 
VD
->
¡»amCÚf
->
	`S‘FÜm©
(
tmpTy³
);

2467 ifĞ
tmpTy³
 !ğ
NULL
 )
	`MyD–‘eMedŸTy³
(tmpType);

2470  
çl£
;

2471 
	}
}

2478 
	gvideoIÅut
::
	$¡¬t
(
deviûID
, 
videoDeviû
 *
VD
){

2480 
HRESULT
 
hr
 = 
NOERROR
;

2481 
VD
->
myID
 = 
deviûID
;

2482 
VD
->
£tupS¹ed
 = 
Œue
;

2483 
CAPTURE_MODE
 = 
PIN_CATEGORY_CAPTURE
;

2484 
ÿÎbackS‘CouÁ
 = 1;

2486 
	`DebugPrštOut
("SETUP: S‘tšg u°deviû %i\n",
deviûID
);

2490 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_C­tu»G¿phBud”2
, 
NULL
, 
CLSCTX_INPROC_SERVER
, 
IID_IC­tu»G¿phBud”2
, (**)&
VD
->
pC­tu»G¿ph
);

2491 ià(
	`FAILED
(
hr
))

2493 
	`DebugPrštOut
("ERROR - Could‚ot createhe Filter Graph Manager\n");

2494  
hr
;

2499 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_F‹rG¿ph
, 0, 
CLSCTX_INPROC_SERVER
,
IID_IG¿phBud”
, (**)&
VD
->
pG¿ph
);

2500 ià(
	`FAILED
(
hr
))

2502 
	`DebugPrštOut
("ERROR - Could‚ot‡ddhe graph builder!\n");

2503 
	`¡İDeviû
(
deviûID
);

2504  
hr
;

2508 
hr
 = 
VD
->
pC­tu»G¿ph
->
	`S‘F‹rg¿ph
(VD->
pG¿ph
);

2509 ià(
	`FAILED
(
hr
))

2511 
	`DebugPrštOut
("ERROR - Could‚ot set filtergraph\n");

2512 
	`¡İDeviû
(
deviûID
);

2513  
hr
;

2519 
hr
 = 
VD
->
pG¿ph
->
	`Qu”yIÁ”çû
(
IID_IMedŸCÚŒŞ
, (**)&VD->
pCÚŒŞ
);

2520 ià(
	`FAILED
(
hr
))

2522 
	`DebugPrštOut
("ERROR - Could‚ot createhe Media Control object\n");

2523 
	`¡İDeviû
(
deviûID
);

2524  
hr
;

2530 
hr
 = 
	`g‘Deviû
(&
VD
->
pVideoIÅutF‹r
, 
deviûID
, VD->
wDeviûName
, VD->
nDeviûName
);

2532 ià(
	`SUCCEEDED
(
hr
)){

2533 
	`DebugPrštOut
("SETUP: %s\n", 
VD
->
nDeviûName
);

2534 
hr
 = 
VD
->
pG¿ph
->
	`AddF‹r
(VD->
pVideoIÅutF‹r
, VD->
wDeviûName
);

2536 
	`DebugPrštOut
("ERROR - Could‚ot find specified video device\n");

2537 
	`¡İDeviû
(
deviûID
);

2538  
hr
;

2542 
IAMSŒ—mCÚfig
 *
¡»amCÚfTe¡
 = 
NULL
;

2543 
hr
 = 
VD
->
pC­tu»G¿ph
->
	`FšdIÁ”çû
(&
PIN_CATEGORY_PREVIEW
, &
MEDIATYPE_Video
, VD->
pVideoIÅutF‹r
, 
IID_IAMSŒ—mCÚfig
, (**)&
¡»amCÚfTe¡
);

2544 if(
	`FAILED
(
hr
)){

2545 
	`DebugPrštOut
("SETUP: Couldn't find…review…in using SmartTee\n");

2547 
CAPTURE_MODE
 = 
PIN_CATEGORY_PREVIEW
;

2548 
¡»amCÚfTe¡
->
	`R–—£
();

2549 
¡»amCÚfTe¡
 = 
NULL
;

2555 if(
VD
->
u£Crossb¬
)

2557 
	`DebugPrštOut
("SETUP: Checking crossbar\n");

2558 
	`rou‹Crossb¬
(&
VD
->
pC­tu»G¿ph
, &VD->
pVideoIÅutF‹r
, VD->
cÚÃùiÚ
, 
CAPTURE_MODE
);

2563 
hr
 = 
VD
->
pC­tu»G¿ph
->
	`FšdIÁ”çû
(&
CAPTURE_MODE
, &
MEDIATYPE_Video
, VD->
pVideoIÅutF‹r
, 
IID_IAMSŒ—mCÚfig
, (**)&VD->
¡»amCÚf
);

2564 if(
	`FAILED
(
hr
)){

2565 
	`DebugPrštOut
("ERROR: Couldn't confighe stream!\n");

2566 
	`¡İDeviû
(
deviûID
);

2567  
hr
;

2571 
hr
 = 
VD
->
¡»amCÚf
->
	`G‘FÜm©
(&VD->
pAmMedŸTy³
);

2572 if(
	`FAILED
(
hr
)){

2573 
	`DebugPrštOut
("ERROR: Couldn't getFormat for…AmMediaType!\n");

2574 
	`¡İDeviû
(
deviûID
);

2575  
hr
;

2578 
VIDEOINFOHEADER
 *
pVih
 = 
»š‹½»t_ÿ¡
<VIDEOINFOHEADER*>(
VD
->
pAmMedŸTy³
->
pbFÜm©
);

2579 
cu¼’tWidth
 = 
	`HEADER
(
pVih
)->
biWidth
;

2580 
cu¼’tHeight
 = 
	`HEADER
(
pVih
)->
biHeight
;

2582 
boŞ
 
cu¡omSize
 = 
VD
->
ŒyDiffSize
;

2584 
boŞ
 
foundSize
 = 
çl£
;

2586 if(
cu¡omSize
){

2587 
	`DebugPrštOut
("SETUP: DeçuÉ FÜm© i £ˆtØ%ix%i\n", 
cu¼’tWidth
, 
cu¼’tHeight
);

2589 
guidSŒ
[8];

2591 
	`g‘MedŸSubty³AsSŒšg
(
VD
->
ŒyVideoTy³
, 
guidSŒ
);

2592 
	`DebugPrštOut
("SETUP:ryšg s³cif›d fÜm© % @ %ix%i\n", 
guidSŒ
, 
VD
->
ŒyWidth
, VD->
ŒyHeight
);

2594 ifĞ
	`£tSizeAndSubty³
(
VD
, VD->
ŒyWidth
, VD->
ŒyHeight
, VD->
ŒyVideoTy³
) ){

2595 
VD
->
	`£tSize
(VD->
ŒyWidth
, VD->
ŒyHeight
);

2596 
VD
->
videoTy³
 = VD->
ŒyVideoTy³
;

2597 
foundSize
 = 
Œue
;

2600 
i
 = 0; i < 
VI_NUM_TYPES
; i++){

2602 
	`g‘MedŸSubty³AsSŒšg
(
medŸSubty³s
[
i
], 
guidSŒ
);

2604 
	`DebugPrštOut
("SETUP:ryšg fÜm© % @ %ix%i\n", 
guidSŒ
, 
VD
->
ŒyWidth
, VD->
ŒyHeight
);

2605 ifĞ
	`£tSizeAndSubty³
(
VD
, VD->
ŒyWidth
, VD->
ŒyHeight
, 
medŸSubty³s
[
i
]) ){

2606 
VD
->
	`£tSize
(VD->
ŒyWidth
, VD->
ŒyHeight
);

2607 
VD
->
videoTy³
 = 
medŸSubty³s
[
i
];

2608 
foundSize
 = 
Œue
;

2616 ifĞ
foundSize
 =ğ
çl£
 ){

2617 
	`DebugPrštOut
("SETUP: couldn't find„equested size - searching for closest matching size\n");

2619 
şo£¡Width
 = -1;

2620 
şo£¡Height
 = -1;

2621 
GUID
 
ÃwMedŸSubty³
;

2623 
	`fšdClo£¡SizeAndSubty³
(
VD
, VD->
ŒyWidth
, VD->
ŒyHeight
, 
şo£¡Width
, 
şo£¡Height
, 
ÃwMedŸSubty³
);

2625 ifĞ
şo£¡Width
 !ğ-1 && 
şo£¡Height
 != -1){

2626 
	`g‘MedŸSubty³AsSŒšg
(
ÃwMedŸSubty³
, 
guidSŒ
);

2628 
	`DebugPrštOut
("SETUP: clo£¡ suµÜ‹d sizi % @ %˜%i\n", 
guidSŒ
, 
şo£¡Width
, 
şo£¡Height
);

2629 ifĞ
	`£tSizeAndSubty³
(
VD
, 
şo£¡Width
, 
şo£¡Height
, 
ÃwMedŸSubty³
) ){

2630 
VD
->
	`£tSize
(
şo£¡Width
, 
şo£¡Height
);

2631 
foundSize
 = 
Œue
;

2638 if(
cu¡omSize
 =ğ
çl£
 || 
foundSize
 == false){

2639 ifĞ
VD
->
»que¡edF¿meTime
 != -1 ){

2640 
pVih
->
AvgTimeP”F¿me
 = 
VD
->
»que¡edF¿meTime
;

2641 
hr
 = 
VD
->
¡»amCÚf
->
	`S‘FÜm©
(VD->
pAmMedŸTy³
);

2643 
VD
->
	`£tSize
(
cu¼’tWidth
, 
cu¼’tHeight
);

2648 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_Sam¶eG¿bb”
, 
NULL
, 
CLSCTX_INPROC_SERVER
,
IID_IBa£F‹r
, (**)&
VD
->
pG¿bb”F
);

2649 ià(
	`FAILED
(
hr
)){

2650 
	`DebugPrštOut
("Could‚ot Create Sample Grabber - CoCreateInstance()\n");

2651 
	`¡İDeviû
(
deviûID
);

2652  
hr
;

2655 
hr
 = 
VD
->
pG¿ph
->
	`AddF‹r
(VD->
pG¿bb”F
, 
L
"Sample Grabber");

2656 ià(
	`FAILED
(
hr
)){

2657 
	`DebugPrštOut
("Could‚ot‡dd Sample Grabber - AddFilter()\n");

2658 
	`¡İDeviû
(
deviûID
);

2659  
hr
;

2662 
hr
 = 
VD
->
pG¿bb”F
->
	`Qu”yIÁ”çû
(
IID_ISam¶eG¿bb”
, (**)&VD->
pG¿bb”
);

2663 ià(
	`FAILED
(
hr
)){

2664 
	`DebugPrštOut
("ERROR: Could‚ot query SampleGrabber\n");

2665 
	`¡İDeviû
(
deviûID
);

2666  
hr
;

2671 
hr
 = 
VD
->
pG¿bb”
->
	`S‘OÃShÙ
(
FALSE
);

2672 if(
bC®lback
){

2673 
hr
 = 
VD
->
pG¿bb”
->
	`S‘BufãrSam¶es
(
FALSE
);

2675 
hr
 = 
VD
->
pG¿bb”
->
	`S‘BufãrSam¶es
(
TRUE
);

2678 if(
bC®lback
){

2681 
hr
 = 
VD
->
pG¿bb”
->
	`S‘C®lback
(VD->
sgC®lback
, 0);

2682 ià(
	`FAILED
(
hr
)){

2683 
	`DebugPrštOut
("ERROR:…roblem setting callback\n");

2684 
	`¡İDeviû
(
deviûID
);

2685  
hr
;

2687 
	`DebugPrštOut
("SETUP: Capture callback set\n");

2694 
AM_MEDIA_TYPE
 
mt
;

2695 
	`Z”oMemÜy
(&
mt
,(
AM_MEDIA_TYPE
));

2697 
mt
.
majÜty³
 = 
MEDIATYPE_Video
;

2698 
mt
.
subty³
 = 
MEDIASUBTYPE_RGB24
;

2699 
mt
.
fÜm©ty³
 = 
FORMAT_VideoInfo
;

2702 
hr
 = 
VD
->
pG¿bb”
->
	`S‘MedŸTy³
(&
mt
);

2706 if(
VD
->
¡»amCÚf
){

2707 
VD
->
¡»amCÚf
->
	`R–—£
();

2708 
VD
->
¡»amCÚf
 = 
NULL
;

2710 
	`DebugPrštOut
("ERROR: connecting device -…rehaps it is‡lready being used?\n");

2711 
	`¡İDeviû
(
deviûID
);

2712  
S_FALSE
;

2718 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_NuÎR’d””
, 
NULL
, 
CLSCTX_INPROC_SERVER
, 
IID_IBa£F‹r
, (**)(&
VD
->
pDe¡F‹r
));

2719 ià(
	`FAILED
(
hr
)){

2720 
	`DebugPrštOut
("ERROR: Could‚ot create filter - NullRenderer\n");

2721 
	`¡İDeviû
(
deviûID
);

2722  
hr
;

2725 
hr
 = 
VD
->
pG¿ph
->
	`AddF‹r
(VD->
pDe¡F‹r
, 
L
"NullRenderer");

2726 ià(
	`FAILED
(
hr
)){

2727 
	`DebugPrštOut
("ERROR: Could‚ot‡dd filter - NullRenderer\n");

2728 
	`¡İDeviû
(
deviûID
);

2729  
hr
;

2734 
hr
 = 
VD
->
pC­tu»G¿ph
->
	`R’d”SŒ—m
(&
PIN_CATEGORY_PREVIEW
, &
MEDIATYPE_Video
, VD->
pVideoIÅutF‹r
, VD->
pG¿bb”F
, VD->
pDe¡F‹r
);

2736 ià(
	`FAILED
(
hr
)){

2737 
	`DebugPrštOut
("ERROR: Could‚ot connect…ins - RenderStream()\n");

2738 
	`¡İDeviû
(
deviûID
);

2739  
hr
;

2745 
IMedŸF‹r
 *
pMedŸF‹r
 = 0;

2746 
hr
 = 
VD
->
pG¿ph
->
	`Qu”yIÁ”çû
(
IID_IMedŸF‹r
, (**)&
pMedŸF‹r
);

2747 ià(
	`FAILED
(
hr
)){

2748 
	`DebugPrštOut
("ERROR: Could‚ot get IID_IMediaFilter interface\n");

2750 
pMedŸF‹r
->
	`S‘SyncSourû
(
NULL
);

2751 
pMedŸF‹r
->
	`R–—£
();

2757 
hr
 = 
VD
->
pCÚŒŞ
->
	`Run
();

2759 ià(
	`FAILED
(
hr
)){

2760 
	`DebugPrštOut
("ERROR: Could‚ot start graph\n");

2761 
	`¡İDeviû
(
deviûID
);

2762  
hr
;

2767 if(!
bC®lback
){

2769 
bufãrSize
 = 
VD
->
videoSize
;

2771  
hr
 !ğ
S_OK
){

2772 
hr
 = 
VD
->
pG¿bb”
->
	`G‘Cu¼’tBufãr
(&
bufãrSize
, (*)VD->
pBufãr
);

2773 
	`SË•
(10);

2778 
	`DebugPrštOut
("SETUP: Device is setup‡nd„eadyo capture.\n\n");

2779 
VD
->
»adyToC­tu»
 = 
Œue
;

2787 
VD
->
pVideoIÅutF‹r
->
	`R–—£
();

2788 
VD
->
pVideoIÅutF‹r
 = 
NULL
;

2790 
VD
->
pG¿bb”F
->
	`R–—£
();

2791 
VD
->
pG¿bb”F
 = 
NULL
;

2793 
VD
->
pDe¡F‹r
->
	`R–—£
();

2794 
VD
->
pDe¡F‹r
 = 
NULL
;

2796  
S_OK
;

2797 
	}
}

2805 
	gvideoIÅut
::
	$g‘DeviûCouÁ
(){

2808 
IC»©eDevEnum
 *
pDevEnum
 = 
NULL
;

2809 
IEnumMÚik”
 *
pEnum
 = 
NULL
;

2810 
deviûCouÁ”
 = 0;

2812 
HRESULT
 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_Sy¡emDeviûEnum
, 
NULL
,

2813 
CLSCTX_INPROC_SERVER
, 
IID_IC»©eDevEnum
,

2814 
»š‹½»t_ÿ¡
<**>(&
pDevEnum
));

2817 ià(
	`SUCCEEDED
(
hr
))

2820 
hr
 = 
pDevEnum
->
	`C»©eCÏssEnum”©Ü
(

2821 
CLSID_VideoIÅutDeviûC©egÜy
,

2822 &
pEnum
, 0);

2824 if(
hr
 =ğ
S_OK
){

2825 
IMÚik”
 *
pMÚik”
 = 
NULL
;

2826 
pEnum
->
	`Next
(1, &
pMÚik”
, 
NULL
è=ğ
S_OK
){

2828 
IPrİ”tyBag
 *
pPrİBag
;

2829 
hr
 = 
pMÚik”
->
	`BšdToStÜage
(0, 0, 
IID_IPrİ”tyBag
,

2830 (**)(&
pPrİBag
));

2832 ià(
	`FAILED
(
hr
)){

2833 
pMÚik”
->
	`R–—£
();

2837 
pPrİBag
->
	`R–—£
();

2838 
pPrİBag
 = 
NULL
;

2840 
pMÚik”
->
	`R–—£
();

2841 
pMÚik”
 = 
NULL
;

2843 
deviûCouÁ”
++;

2846 
pEnum
->
	`R–—£
();

2847 
pEnum
 = 
NULL
;

2850 
pDevEnum
->
	`R–—£
();

2851 
pDevEnum
 = 
NULL
;

2853  
deviûCouÁ”
;

2854 
	}
}

2864 
HRESULT
 
	gvideoIÅut
::
	$g‘Deviû
(
IBa£F‹r
** 
gÙF‹r
, 
deviûId
, 
WCHAR
 * 
wDeviûName
, * 
nDeviûName
){

2865 
BOOL
 
dÚe
 = 
çl£
;

2866 
deviûCouÁ”
 = 0;

2869 
IC»©eDevEnum
 *
pSysDevEnum
 = 
NULL
;

2870 
HRESULT
 
hr
 = 
	`CoC»©eIn¡ªû
(
CLSID_Sy¡emDeviûEnum
, 
NULL
, 
CLSCTX_INPROC_SERVER
, 
IID_IC»©eDevEnum
, (**)&
pSysDevEnum
);

2871 ià(
	`FAILED
(
hr
))

2873  
hr
;

2877 
IEnumMÚik”
 *
pEnumC©
 = 
NULL
;

2878 
hr
 = 
pSysDevEnum
->
	`C»©eCÏssEnum”©Ü
(
CLSID_VideoIÅutDeviûC©egÜy
, &
pEnumC©
, 0);

2880 ià(
hr
 =ğ
S_OK
)

2883 
IMÚik”
 *
pMÚik”
 = 
NULL
;

2884 
ULONG
 
cF‘ched
;

2885 (
pEnumC©
->
	`Next
(1, &
pMÚik”
, &
cF‘ched
è=ğ
S_OK
è&& (!
dÚe
))

2887 if(
deviûCouÁ”
 =ğ
deviûId
)

2890 
IPrİ”tyBag
 *
pPrİBag
;

2891 
hr
 = 
pMÚik”
->
	`BšdToStÜage
(0, 0, 
IID_IPrİ”tyBag
, (**)&
pPrİBag
);

2892 ià(
	`SUCCEEDED
(
hr
))

2895 
VARIANT
 
v¬Name
;

2896 
	`V¬ŸÁIn™
(&
v¬Name
);

2897 
hr
 = 
pPrİBag
->
	`R—d
(
L
"Fr›ndlyName", &
v¬Name
, 0);

2898 ià(
	`SUCCEEDED
(
hr
))

2902 
couÁ
 = 0;

2903  
v¬Name
.
b¡rV®
[
couÁ
] != 0x00 ) {

2904 
wDeviûName
[
couÁ
] = 
v¬Name
.
b¡rV®
[count];

2905 
nDeviûName
[
couÁ
] = ()
v¬Name
.
b¡rV®
[count];

2906 
couÁ
++;

2910 
hr
 = 
pMÚik”
->
	`BšdToObjeù
(
NULL
, NULL, 
IID_IBa£F‹r
, (**)
gÙF‹r
);

2911 
dÚe
 = 
Œue
;

2913 
	`V¬ŸÁCË¬
(&
v¬Name
);

2914 
pPrİBag
->
	`R–—£
();

2915 
pPrİBag
 = 
NULL
;

2916 
pMÚik”
->
	`R–—£
();

2917 
pMÚik”
 = 
NULL
;

2920 
deviûCouÁ”
++;

2922 
pEnumC©
->
	`R–—£
();

2923 
pEnumC©
 = 
NULL
;

2925 
pSysDevEnum
->
	`R–—£
();

2926 
pSysDevEnum
 = 
NULL
;

2928 ià(
dÚe
) {

2929  
hr
;

2931  
VFW_E_NOT_FOUND
;

2933 
	}
}

2941 
HRESULT
 
	gvideoIÅut
::
	$ShowF‹rPrİ”tyPages
(
IBa£F‹r
 *
pF‹r
){

2943 
IS³cifyPrİ”tyPages
 *
pPrİ
;

2945 
HRESULT
 
hr
 = 
pF‹r
->
	`Qu”yIÁ”çû
(
IID_IS³cifyPrİ”tyPages
, (**)&
pPrİ
);

2946 ià(
	`SUCCEEDED
(
hr
))

2949 
FILTER_INFO
 
F‹rInfo
;

2950 
hr
 = 
pF‹r
->
	`Qu”yF‹rInfo
(&
F‹rInfo
);

2951 
IUnknown
 *
pF‹rUnk
;

2952 
pF‹r
->
	`Qu”yIÁ”çû
(
IID_IUnknown
, (**)&
pF‹rUnk
);

2955 
CAUUID
 
ÿGUID
;

2956 
pPrİ
->
	`G‘Pages
(&
ÿGUID
);

2957 
pPrİ
->
	`R–—£
();

2958 
	`OËC»©ePrİ”tyF¿me
(

2959 
NULL
,

2961 
F‹rInfo
.
achName
,

2963 &
pF‹rUnk
,

2964 
ÿGUID
.
cEËms
,

2965 
ÿGUID
.
pEËms
,

2967 0, 
NULL


2971 if(
pF‹rUnk
íF‹rUnk->
	`R–—£
();

2972 if(
F‹rInfo
.
pG¿ph
)F‹rInfo.pG¿ph->
	`R–—£
();

2973 
	`CoTaskMemF»e
(
ÿGUID
.
pEËms
);

2975  
hr
;

2976 
	}
}

2978 
HRESULT
 
	gvideoIÅut
::
	$ShowSŒ—mPrİ”tyPages
(
IAMSŒ—mCÚfig
 * ){

2980 
HRESULT
 
hr
 = 
NOERROR
;

2981  
hr
;

2982 
	}
}

2989 
HRESULT
 
	gvideoIÅut
::
	$SaveG¿phFe
(
IG¿phBud”
 *
pG¿ph
, 
WCHAR
 *
wszP©h
) {

2990 cÚ¡ 
WCHAR
 
wszSŒ—mName
[] = 
L
"ActiveMovieGraph";

2991 
HRESULT
 
hr
;

2992 
IStÜage
 *
pStÜage
 = 
NULL
;

2995 
hr
 = 
	`StgC»©eDocfe
(

2996 
wszP©h
,

2997 
STGM_CREATE
 | 
STGM_TRANSACTED
 | 
STGM_READWRITE
 | 
STGM_SHARE_EXCLUSIVE
,

2998 0, &
pStÜage
);

2999 if(
	`FAILED
(
hr
))

3001  
hr
;

3005 
ISŒ—m
 *
pSŒ—m
;

3006 
hr
 = 
pStÜage
->
	`C»©eSŒ—m
(

3007 
wszSŒ—mName
,

3008 
STGM_WRITE
 | 
STGM_CREATE
 | 
STGM_SHARE_EXCLUSIVE
,

3009 0, 0, &
pSŒ—m
);

3010 ià(
	`FAILED
(
hr
))

3012 
pStÜage
->
	`R–—£
();

3013  
hr
;

3017 
IP”si¡SŒ—m
 *
pP”si¡
 = 
NULL
;

3018 
pG¿ph
->
	`Qu”yIÁ”çû
(
IID_IP”si¡SŒ—m
, 
»š‹½»t_ÿ¡
<**>(&
pP”si¡
));

3019 
hr
 = 
pP”si¡
->
	`Save
(
pSŒ—m
, 
TRUE
);

3020 
pSŒ—m
->
	`R–—£
();

3021 
pP”si¡
->
	`R–—£
();

3022 ià(
	`SUCCEEDED
(
hr
))

3024 
hr
 = 
pStÜage
->
	`Comm™
(
STGC_DEFAULT
);

3026 
pStÜage
->
	`R–—£
();

3027  
hr
;

3028 
	}
}

3036 
HRESULT
 
	gvideoIÅut
::
	$rou‹Crossb¬
(
IC­tu»G¿phBud”2
 **
µBud
, 
IBa£F‹r
 **
pVidInF‹r
, 
cÚTy³
, 
GUID
 
ÿ±u»Mode
){

3039 
IC­tu»G¿phBud”2
 *
pBud
 = 
NULL
;

3040 
pBud
 = *
µBud
;

3043 
IBa£F‹r
 *
pVidF‹r
 = 
NULL
;

3044 
pVidF‹r
 = * 
pVidInF‹r
;

3047 
IAMCrossb¬
 *
pXB¬1
 = 
NULL
;

3048 
HRESULT
 
hr
 = 
pBud
->
	`FšdIÁ”çû
(&
LOOK_UPSTREAM_ONLY
, 
NULL
, 
pVidF‹r
,

3049 
IID_IAMCrossb¬
, (**)&
pXB¬1
);

3050 ià(
	`SUCCEEDED
(
hr
))

3053 
boŞ
 
foundDeviû
 = 
çl£
;

3055 
	`DebugPrštOut
("SETUP: You‡re‚ot‡ webcam! Setting Crossbar\n");

3056 
pXB¬1
->
	`R–—£
();

3058 
IAMCrossb¬
 *
Crossb¬
;

3059 
hr
 = 
pBud
->
	`FšdIÁ”çû
(&
ÿ±u»Mode
, &
MEDIATYPE_IÁ”Ëaved
, 
pVidF‹r
, 
IID_IAMCrossb¬
, (**)&
Crossb¬
);

3061 if(
hr
 !ğ
NOERROR
){

3062 
hr
 = 
pBud
->
	`FšdIÁ”çû
(&
ÿ±u»Mode
, &
MEDIATYPE_Video
, 
pVidF‹r
, 
IID_IAMCrossb¬
, (**)&
Crossb¬
);

3065 
LONG
 
lIÅš
, 
lOuš
;

3066 
hr
 = 
Crossb¬
->
	`g‘_PšCouÁs
(&
lOuš
 , &
lIÅš
);

3068 
BOOL
 
iPš
=
TRUE
; 
LONG
 
pIndex
=0 , 
pRIndex
=0 , 
pTy³
=0;

3070  
pIndex
 < 
lIÅš
)

3072 
hr
 = 
Crossb¬
->
	`g‘_Crossb¬PšInfo
Ğ
iPš
 , 
pIndex
 , &
pRIndex
 , &
pTy³
);

3074 ifĞ
pTy³
 =ğ
cÚTy³
){

3075 
	`DebugPrštOut
("SETUP: Found Physical Interface");

3077 
cÚTy³
){

3079 
PhysCÚn_Video_Compos™e
:

3080 
	`DebugPrštOut
(" - Composite\n");

3082 
PhysCÚn_Video_SVideo
:

3083 
	`DebugPrštOut
(" - S-Video\n");

3085 
PhysCÚn_Video_TuÃr
:

3086 
	`DebugPrštOut
(" - Tuner\n");

3088 
PhysCÚn_Video_USB
:

3089 
	`DebugPrštOut
(" - USB\n");

3091 
PhysCÚn_Video_1394
:

3092 
	`DebugPrštOut
(" - Firewire\n");

3096 
foundDeviû
 = 
Œue
;

3099 
pIndex
++;

3103 if(
foundDeviû
){

3104 
BOOL
 
OPš
=
FALSE
; 
LONG
 
pOIndex
=0 , 
pORIndex
=0 , 
pOTy³
=0;

3105  
pOIndex
 < 
lOuš
)

3107 
hr
 = 
Crossb¬
->
	`g‘_Crossb¬PšInfo
Ğ
OPš
 , 
pOIndex
 , &
pORIndex
 , &
pOTy³
);

3108 ifĞ
pOTy³
 =ğ
PhysCÚn_Video_VideoDecod”
)

3111 
Crossb¬
->
	`Rou‹
(
pOIndex
,
pIndex
);

3113 
	`DebugPrštOut
("SETUP: Didn't find specified Physical Connectionype. Using Defualt.\n");

3121 if(
pXB¬1
íXB¬1->
	`R–—£
();

3122 if(
pXB¬1
íXB¬1 = 
NULL
;

3125 
	`DebugPrštOut
("SETUP: You‡re‡ webcam or snazzy firewire cam! No Crossbar‚eeded\n");

3126  
hr
;

3129  
hr
;

3130 
	}
}

3132 
Çme¥aû
 
	gcv


3134 
videoIÅut
 
	gVideoC­tu»_DShow
::
g_VI
;

3136 
	gVideoC­tu»_DShow
::
VideoC­tu»_DShow
(
šdex
)

3137 : 
m_šdex
(-1)

3138 , 
m_width
(-1)

3139 , 
m_height
(-1)

3140 , 
m_fourcc
(-1)

3141 , 
m_widthS‘
(-1)

3142 , 
m_heightS‘
(-1)

3144 
CoIn™Ÿlize
(0);

3145 
İ’
(
šdex
);

3147 
	gVideoC­tu»_DShow
::~
VideoC­tu»_DShow
()

3149 
şo£
();

3150 
CoUnš™Ÿlize
();

3153 
	gVideoC­tu»_DShow
::
g‘Prİ”ty
(
´İIdx
) const

3156 
mš_v®ue
, 
	gmax_v®ue
, 
	g¡•pšg_d–
, 
	gcu¼’t_v®ue
, 
	gæags
, 
	gdeçuÉV®ue
;

3158 
	g´İIdx
)

3161 
	gCV_CAP_PROP_FRAME_WIDTH
:

3162  
g_VI
.
g‘Width
(
m_šdex
);

3163 
	gCV_CAP_PROP_FRAME_HEIGHT
:

3164  
g_VI
.
g‘Height
(
m_šdex
);

3165 
	gCV_CAP_PROP_FOURCC
:

3166  
g_VI
.
g‘Fourcc
(
m_šdex
);

3167 
	gCV_CAP_PROP_FPS
:

3168  
g_VI
.
g‘FPS
(
m_šdex
);

3171 
	gCV_CAP_PROP_BRIGHTNESS
:

3172 
CV_CAP_PROP_CONTRAST
:

3173 
CV_CAP_PROP_HUE
:

3174 
CV_CAP_PROP_SATURATION
:

3175 
CV_CAP_PROP_SHARPNESS
:

3176 
CV_CAP_PROP_GAMMA
:

3177 
CV_CAP_PROP_MONOCHROME
:

3178 
CV_CAP_PROP_WHITE_BALANCE_BLUE_U
:

3179 
CV_CAP_PROP_BACKLIGHT
:

3180 
CV_CAP_PROP_GAIN
:

3181 ià(
g_VI
.
g‘VideoS‘tšgF‹r
(
m_šdex
, g_VI.
g‘VideoPrİ”tyFromCV
(
´İIdx
), 
mš_v®ue
, 
max_v®ue
, 
¡•pšg_d–
, 
cu¼’t_v®ue
, 
æags
, 
deçuÉV®ue
))

3182  ()
	gcu¼’t_v®ue
;

3185 
	gCV_CAP_PROP_PAN
:

3186 
CV_CAP_PROP_TILT
:

3187 
CV_CAP_PROP_ROLL
:

3188 
CV_CAP_PROP_ZOOM
:

3189 
CV_CAP_PROP_EXPOSURE
:

3190 
CV_CAP_PROP_IRIS
:

3191 
CV_CAP_PROP_FOCUS
:

3192 ià(
g_VI
.
g‘VideoS‘tšgCam”a
(
m_šdex
, g_VI.
g‘Cam”aPrİ”tyFromCV
(
´İIdx
), 
mš_v®ue
, 
max_v®ue
, 
¡•pšg_d–
, 
cu¼’t_v®ue
, 
æags
, 
deçuÉV®ue
))

3193  ()
	gcu¼’t_v®ue
;

3199 
boŞ
 
	gVideoC­tu»_DShow
::
£tPrİ”ty
(
´İIdx
, 
´İV®
)

3202 
boŞ
 
	ghªdËd
 = 
çl£
;

3203 
	g´İIdx
)

3205 
	gCV_CAP_PROP_FRAME_WIDTH
:

3206 
m_width
 = 
cvRound
(
´İV®
);

3207 
	ghªdËd
 = 
Œue
;

3210 
	gCV_CAP_PROP_FRAME_HEIGHT
:

3211 
m_height
 = 
cvRound
(
´İV®
);

3212 
	ghªdËd
 = 
Œue
;

3215 
	gCV_CAP_PROP_FOURCC
:

3216 
m_fourcc
 = ()()(
´İV®
);

3217 ià(-1 =ğ
m_fourcc
)

3222 
hªdËd
 = 
Œue
;

3225 
	gCV_CAP_PROP_FPS
:

3226 
ås
 = 
cvRound
(
´İV®
);

3227 ià(
	gås
 !ğ
g_VI
.
g‘FPS
(
m_šdex
))

3229 
g_VI
.
¡İDeviû
(
m_šdex
);

3230 
	gg_VI
.
£tId—lF¿m”©e
(
m_šdex
, 
ås
);

3231 ià(
	gm_widthS‘
 > 0 && 
	gm_heightS‘
 > 0)

3232 
	gg_VI
.
£tupDeviû
(
m_šdex
, 
m_widthS‘
, 
m_heightS‘
);

3234 
	gg_VI
.
£tupDeviû
(
m_šdex
);

3236  
	gg_VI
.
isDeviûS‘up
(
m_šdex
);

3239 ià(
	ghªdËd
)

3242 ià(
	gm_width
 > 0 && 
	gm_height
 > 0)

3244 ià(
	gm_width
 !ğ
g_VI
.
g‘Width
(
m_šdex
è|| 
m_height
 !ğg_VI.
g‘Height
(m_index) )

3246 
ås
 = 
¡©ic_ÿ¡
<>(
g_VI
.
g‘FPS
(
m_šdex
));

3247 
	gg_VI
.
¡İDeviû
(
m_šdex
);

3248 
	gg_VI
.
£tId—lF¿m”©e
(
m_šdex
, 
ås
);

3249 
	gg_VI
.
£tupDeviûFourcc
(
m_šdex
, 
m_width
, 
m_height
, 
m_fourcc
);

3252 
boŞ
 
	gsucûss
 = 
g_VI
.
isDeviûS‘up
(
m_šdex
);

3253 ià(
	gsucûss
)

3255 
	gm_widthS‘
 = 
m_width
;

3256 
	gm_heightS‘
 = 
m_height
;

3257 
	gm_width
 = 
m_height
 = 
m_fourcc
 = -1;

3259  
	gsucûss
;

3261  
	gŒue
;

3265 ià(
	g´İIdx
 =ğ
CV_CAP_PROP_SETTINGS
 )

3267 
g_VI
.
showS‘tšgsWšdow
(
m_šdex
);

3268  
	gŒue
;

3272 
	g´İIdx
)

3274 
	gCV_CAP_PROP_BRIGHTNESS
:

3275 
CV_CAP_PROP_CONTRAST
:

3276 
CV_CAP_PROP_HUE
:

3277 
CV_CAP_PROP_SATURATION
:

3278 
CV_CAP_PROP_SHARPNESS
:

3279 
CV_CAP_PROP_GAMMA
:

3280 
CV_CAP_PROP_MONOCHROME
:

3281 
CV_CAP_PROP_WHITE_BALANCE_BLUE_U
:

3282 
CV_CAP_PROP_BACKLIGHT
:

3283 
CV_CAP_PROP_GAIN
:

3284  
g_VI
.
£tVideoS‘tšgF‹r
(
m_šdex
, g_VI.
g‘VideoPrİ”tyFromCV
(
´İIdx
), ()
´İV®
);

3288 
	g´İIdx
)

3290 
	gCV_CAP_PROP_PAN
:

3291 
CV_CAP_PROP_TILT
:

3292 
CV_CAP_PROP_ROLL
:

3293 
CV_CAP_PROP_ZOOM
:

3294 
CV_CAP_PROP_EXPOSURE
:

3295 
CV_CAP_PROP_IRIS
:

3296 
CV_CAP_PROP_FOCUS
:

3297  
g_VI
.
£tVideoS‘tšgCam”a
(
m_šdex
, g_VI.
g‘Cam”aPrİ”tyFromCV
(
´İIdx
), ()
´İV®
);

3300  
	gçl£
;

3303 
boŞ
 
	gVideoC­tu»_DShow
::
g¿bF¿me
()

3305  
Œue
;

3307 
boŞ
 
	gVideoC­tu»_DShow
::
»Œ›veF¿me
(, 
OuutA¼ay
 
äame
)

3309 
	gäame
.
ü—‹
(
Size
(
g_VI
.
g‘Width
(
m_šdex
), g_VI.
g‘Height
(m_šdex)), 
CV_8UC3
);

3310 
	gcv
::
M©
 
m©
 = 
äame
.
g‘M©
();

3311  
	gg_VI
.
g‘Pix–s
(
m_šdex
, 
m©
.
±r
(), 
çl£
, 
Œue
 );

3313 
	gVideoC­tu»_DShow
::
g‘C­tu»Domaš
()

3315  
CV_CAP_DSHOW
;

3317 
boŞ
 
	gVideoC­tu»_DShow
::
isO³Ãd
() const

3319  (-1 !ğ
m_šdex
);

3322 
	gVideoC­tu»_DShow
::
İ’
(
šdex
)

3324 
şo£
();

3325 
	gdeviûs
 = 
g_VI
.
li¡Deviûs
(
Œue
);

3326 ià(0 =ğ
deviûs
)

3328 ià(
	gšdex
 < 0 || index > 
	gdeviûs
-1)

3330 
	gg_VI
.
£tupDeviû
(
šdex
);

3331 ià(!
	gg_VI
.
isDeviûS‘up
(
šdex
))

3333 
	gm_šdex
 = 
šdex
;

3336 
	gVideoC­tu»_DShow
::
şo£
()

3338 ià(
m_šdex
 >= 0)

3340 
g_VI
.
¡İDeviû
(
m_šdex
);

3341 
	gm_šdex
 = -1;

3343 
	gm_widthS‘
 = 
m_heightS‘
 = 
m_width
 = 
m_height
 = -1;

	@cap_dshow.hpp

12 #iâdeà
_CAP_DSHOW_HPP_


13 
	#_CAP_DSHOW_HPP_


	)

15 
	~"´ecomp.hµ
"

17 #ifdeà
HAVE_DSHOW


19 
şass
 
	gvideoIÅut
;

20 
Çme¥aû
 
	gcv


23 şas 
	cVideoC­tu»_DShow
 : 
public
 
IVideoC­tu»


25 
public
:

26 
VideoC­tu»_DShow
(
šdex
);

27 
	gvœtu®
 ~
VideoC­tu»_DShow
();

29 
vœtu®
 
g‘Prİ”ty
(
´İIdx
) const;

30 
vœtu®
 
boŞ
 
£tPrİ”ty
(
´İIdx
, 
´İV®
);

32 
vœtu®
 
boŞ
 
g¿bF¿me
();

33 
vœtu®
 
boŞ
 
»Œ›veF¿me
(
ouutTy³
, 
OuutA¼ay
 
äame
);

34 
vœtu®
 
g‘C­tu»Domaš
();

35 
vœtu®
 
boŞ
 
isO³Ãd
() const;

36 
	g´Ùeùed
:

37 
İ’
(
šdex
);

38 
şo£
();

40 
	gm_šdex
, 
	gm_width
, 
	gm_height
, 
	gm_fourcc
;

41 
	gm_widthS‘
, 
	gm_heightS‘
;

42 
videoIÅut
 
	gg_VI
;

	@cap_ffmpeg.cpp

42 
	~"´ecomp.hµ
"

44 #ià
defšed
 
HAVE_FFMPEG
 && !defšed 
WIN32


45 
	~"ÿp_ffm³g_im¶.hµ
"

47 
	~"ÿp_ffm³g_­i.hµ
"

50 
CvC»©eFeC­tu»_Plugš
 
	gicvC»©eFeC­tu»_FFMPEG_p
 = 0;

51 
CvR–—£C­tu»_Plugš
 
	gicvR–—£C­tu»_FFMPEG_p
 = 0;

52 
CvG¿bF¿me_Plugš
 
	gicvG¿bF¿me_FFMPEG_p
 = 0;

53 
CvR‘r›veF¿me_Plugš
 
	gicvR‘r›veF¿me_FFMPEG_p
 = 0;

54 
CvS‘C­tu»Prİ”ty_Plugš
 
	gicvS‘C­tu»Prİ”ty_FFMPEG_p
 = 0;

55 
CvG‘C­tu»Prİ”ty_Plugš
 
	gicvG‘C­tu»Prİ”ty_FFMPEG_p
 = 0;

56 
CvC»©eVideoWr™”_Plugš
 
	gicvC»©eVideoWr™”_FFMPEG_p
 = 0;

57 
CvR–—£VideoWr™”_Plugš
 
	gicvR–—£VideoWr™”_FFMPEG_p
 = 0;

58 
CvWr™eF¿me_Plugš
 
	gicvWr™eF¿me_FFMPEG_p
 = 0;

60 
	gcv
::
Mu‹x
 
_icvIn™FFMPEG_mu‹x
;

62 şas 
	cicvIn™FFMPEG


64 
	mpublic
:

65 
	$In™
()

67 
cv
::
AutoLock
 
	`®
(
_icvIn™FFMPEG_mu‹x
);

68 
icvIn™FFMPEG
 
š™
;

71 
´iv©e
:

72 #ià
defšed
 
WIN32
 || defšed 
_WIN32


73 
HMODULE
 
icvFFO³nCV
;

75 ~
	$icvIn™FFMPEG
()

77 ià(
icvFFO³nCV
)

79 
	`F»eLib¿ry
(
icvFFO³nCV
);

80 
icvFFO³nCV
 = 0;

82 
	}
}

85 
	$icvIn™FFMPEG
()

87 #ià
defšed
 
WIN32
 || defšed 
_WIN32


88 #ifdeà
WINRT


89 cÚ¡ 
wch¬_t
* 
moduË_Çme
 = 
L
"opencv_ffmpeg"

90 
	`CVAUX_STRW
(
CV_MAJOR_VERSION
èCVAUX_STRW(
CV_MINOR_VERSION
èCVAUX_STRW(
CV_SUBMINOR_VERSION
)

91 #ià(
defšed
 
_MSC_VER
 && defšed 
_M_X64
è|| (defšed 
__GNUC__
 && defšed 
__x86_64__
)

92 
L
"_64"

94 
L
".dll";

96 
icvFFO³nCV
 = 
	`LßdPackagedLib¿ry
Ğ
moduË_Çme
, 0 );

98 cÚ¡ * 
moduË_Çme
 = "opencv_ffmpeg"

99 
	`CVAUX_STR
(
CV_MAJOR_VERSION
èCVAUX_STR(
CV_MINOR_VERSION
èCVAUX_STR(
CV_SUBMINOR_VERSION
)

100 #ià(
defšed
 
_MSC_VER
 && defšed 
_M_X64
è|| (defšed 
__GNUC__
 && defšed 
__x86_64__
)

105 
icvFFO³nCV
 = 
	`LßdLib¿ry
Ğ
moduË_Çme
 );

108 ifĞ
icvFFO³nCV
 )

110 
icvC»©eFeC­tu»_FFMPEG_p
 =

111 (
CvC»©eFeC­tu»_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvCreateFileCapture_FFMPEG");

112 
icvR–—£C­tu»_FFMPEG_p
 =

113 (
CvR–—£C­tu»_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvReleaseCapture_FFMPEG");

114 
icvG¿bF¿me_FFMPEG_p
 =

115 (
CvG¿bF¿me_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvGrabFrame_FFMPEG");

116 
icvR‘r›veF¿me_FFMPEG_p
 =

117 (
CvR‘r›veF¿me_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvRetrieveFrame_FFMPEG");

118 
icvS‘C­tu»Prİ”ty_FFMPEG_p
 =

119 (
CvS‘C­tu»Prİ”ty_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvSetCaptureProperty_FFMPEG");

120 
icvG‘C­tu»Prİ”ty_FFMPEG_p
 =

121 (
CvG‘C­tu»Prİ”ty_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvGetCaptureProperty_FFMPEG");

122 
icvC»©eVideoWr™”_FFMPEG_p
 =

123 (
CvC»©eVideoWr™”_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvCreateVideoWriter_FFMPEG");

124 
icvR–—£VideoWr™”_FFMPEG_p
 =

125 (
CvR–—£VideoWr™”_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvReleaseVideoWriter_FFMPEG");

126 
icvWr™eF¿me_FFMPEG_p
 =

127 (
CvWr™eF¿me_Plugš
)
	`G‘ProcAdd»ss
(
icvFFO³nCV
, "cvWriteFrame_FFMPEG");

130 ifĞ
icvC»©eFeC­tu»_FFMPEG_p
 != 0 &&

131 
icvR–—£C­tu»_FFMPEG_p
 != 0 &&

132 
icvG¿bF¿me_FFMPEG_p
 != 0 &&

133 
icvR‘r›veF¿me_FFMPEG_p
 != 0 &&

134 
icvS‘C­tu»Prİ”ty_FFMPEG_p
 != 0 &&

135 
icvG‘C­tu»Prİ”ty_FFMPEG_p
 != 0 &&

136 
icvC»©eVideoWr™”_FFMPEG_p
 != 0 &&

137 
icvR–—£VideoWr™”_FFMPEG_p
 != 0 &&

138 
icvWr™eF¿me_FFMPEG_p
 != 0 )

140 
	`´štf
("Successfully initialized ffmpeg…lugin!\n");

144 
	`´štf
("FaedØlßd FFMPEG…lugš: moduË hªdË=%p\n", 
icvFFO³nCV
);

148 #–ià
defšed
 
HAVE_FFMPEG


149 
icvC»©eFeC­tu»_FFMPEG_p
 = (
CvC»©eFeC­tu»_Plugš
)
cvC»©eFeC­tu»_FFMPEG
;

150 
icvR–—£C­tu»_FFMPEG_p
 = (
CvR–—£C­tu»_Plugš
)
cvR–—£C­tu»_FFMPEG
;

151 
icvG¿bF¿me_FFMPEG_p
 = (
CvG¿bF¿me_Plugš
)
cvG¿bF¿me_FFMPEG
;

152 
icvR‘r›veF¿me_FFMPEG_p
 = (
CvR‘r›veF¿me_Plugš
)
cvR‘r›veF¿me_FFMPEG
;

153 
icvS‘C­tu»Prİ”ty_FFMPEG_p
 = (
CvS‘C­tu»Prİ”ty_Plugš
)
cvS‘C­tu»Prİ”ty_FFMPEG
;

154 
icvG‘C­tu»Prİ”ty_FFMPEG_p
 = (
CvG‘C­tu»Prİ”ty_Plugš
)
cvG‘C­tu»Prİ”ty_FFMPEG
;

155 
icvC»©eVideoWr™”_FFMPEG_p
 = (
CvC»©eVideoWr™”_Plugš
)
cvC»©eVideoWr™”_FFMPEG
;

156 
icvR–—£VideoWr™”_FFMPEG_p
 = (
CvR–—£VideoWr™”_Plugš
)
cvR–—£VideoWr™”_FFMPEG
;

157 
icvWr™eF¿me_FFMPEG_p
 = (
CvWr™eF¿me_Plugš
)
cvWr™eF¿me_FFMPEG
;

159 
	}
}

163 şas 
	cCvC­tu»_FFMPEG_´oxy
 :

164 
public
 
CvC­tu»


166 
public
:

167 
	$CvC­tu»_FFMPEG_´oxy
(è{ 
ffm³gC­tu»
 = 0; }

168 
vœtu®
 ~
	$CvC­tu»_FFMPEG_´oxy
(è{ 
	`şo£
(); 
	}
}

170 
vœtu®
 
	$g‘Prİ”ty
(
´İId
) const

172  
ffm³gC­tu»
 ? 
	`icvG‘C­tu»Prİ”ty_FFMPEG_p
(ffm³gC­tu», 
´İId
) : 0;

173 
	}
}

174 
vœtu®
 
boŞ
 
	$£tPrİ”ty
(
´İId
, 
v®ue
)

176  
ffm³gC­tu»
 ? 
	`icvS‘C­tu»Prİ”ty_FFMPEG_p
(ffm³gC­tu», 
´İId
, 
v®ue
)!=0 : 
çl£
;

177 
	}
}

178 
vœtu®
 
boŞ
 
	$g¿bF¿me
()

180  
ffm³gC­tu»
 ? 
	`icvG¿bF¿me_FFMPEG_p
(ffm³gC­tu»)!=0 : 
çl£
;

181 
	}
}

182 
vœtu®
 
I¶Image
* 
	$»Œ›veF¿me
()

184 * 
d©a
 = 0;

185 
¡•
=0, 
width
=0, 
height
=0, 
ú
=0;

187 ià(!
ffm³gC­tu»
 ||

188 !
	`icvR‘r›veF¿me_FFMPEG_p
(
ffm³gC­tu»
, &
d©a
, &
¡•
, &
width
, &
height
, &
ú
))

190 
	`cvIn™ImageH—d”
(&
äame
, 
	`cvSize
(
width
, 
height
), 8, 
ú
);

191 
	`cvS‘D©a
(&
äame
, 
d©a
, 
¡•
);

192  &
äame
;

193 
	}
}

194 
vœtu®
 
boŞ
 
	$İ’
ĞcÚ¡ * 
f’ame
 )

196 
icvIn™FFMPEG
::
	`In™
();

197 
	`şo£
();

199 ifĞ!
icvC»©eFeC­tu»_FFMPEG_p
 )

200  
çl£
;

201 
ffm³gC­tu»
 = 
	`icvC»©eFeC­tu»_FFMPEG_p
Ğ
f’ame
 );

202  
ffm³gC­tu»
 != 0;

203 
	}
}

204 
vœtu®
 
	$şo£
()

206 ifĞ
ffm³gC­tu»
 && 
icvR–—£C­tu»_FFMPEG_p
 )

207 
	`icvR–—£C­tu»_FFMPEG_p
Ğ&
ffm³gC­tu»
 );

208 
	`as£¹
Ğ
ffm³gC­tu»
 == 0 );

209 
ffm³gC­tu»
 = 0;

210 
	}
}

212 
	g´Ùeùed
:

213 * 
ffm³gC­tu»
;

214 
I¶Image
 
	gäame
;

218 
CvC­tu»
* 
	$cvC»©eFeC­tu»_FFMPEG_´oxy
(cÚ¡ * 
f’ame
)

220 
CvC­tu»_FFMPEG_´oxy
* 
»suÉ
 = 
Ãw
 CvCapture_FFMPEG_proxy;

221 ifĞ
»suÉ
->
	`İ’
Ğ
f’ame
 ))

222  
»suÉ
;

223 
d–‘e
 
»suÉ
;

225 
	}
}

227 şas 
	cCvVideoWr™”_FFMPEG_´oxy
 :

228 
public
 
CvVideoWr™”


230 
public
:

231 
	$CvVideoWr™”_FFMPEG_´oxy
(è{ 
ffm³gWr™”
 = 0; }

232 
vœtu®
 ~
	$CvVideoWr™”_FFMPEG_´oxy
(è{ 
	`şo£
(); 
	}
}

234 
vœtu®
 
boŞ
 
	$wr™eF¿me
ĞcÚ¡ 
I¶Image
* 
image
 )

236 if(!
ffm³gWr™”
)

237  
çl£
;

238 
	`CV_As£¹
(
image
->
d•th
 == 8);

240  
	`icvWr™eF¿me_FFMPEG_p
(
ffm³gWr™”
, (cÚ¡ 
uch¬
*)
image
->
imageD©a
,

241 
image
->
widthS‹p
, image->
width
, image->
height
, image->
nChªÃls
, image->
Üigš
) !=0;

242 
	}
}

243 
vœtu®
 
boŞ
 
	$İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
, 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 )

245 
icvIn™FFMPEG
::
	`In™
();

246 
	`şo£
();

247 ifĞ!
icvC»©eVideoWr™”_FFMPEG_p
 )

248  
çl£
;

249 
ffm³gWr™”
 = 
	`icvC»©eVideoWr™”_FFMPEG_p
Ğ
f’ame
, 
fourcc
, 
ås
, 
äameSize
.
width
, f¿meSize.
height
, 
isCŞÜ
 );

250  
ffm³gWr™”
 != 0;

251 
	}
}

253 
vœtu®
 
	$şo£
()

255 ifĞ
ffm³gWr™”
 && 
icvR–—£VideoWr™”_FFMPEG_p
 )

256 
	`icvR–—£VideoWr™”_FFMPEG_p
Ğ&
ffm³gWr™”
 );

257 
	`as£¹
Ğ
ffm³gWr™”
 == 0 );

258 
ffm³gWr™”
 = 0;

259 
	}
}

261 
	g´Ùeùed
:

262 * 
ffm³gWr™”
;

266 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”_FFMPEG_´oxy
ĞcÚ¡ * 
f’ame
, 
fourcc
,

267 
ås
, 
CvSize
 
äameSize
, 
isCŞÜ
 )

269 
CvVideoWr™”_FFMPEG_´oxy
* 
»suÉ
 = 
Ãw
 CvVideoWriter_FFMPEG_proxy;

271 ifĞ
»suÉ
->
	`İ’
Ğ
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
 != 0 ))

272  
»suÉ
;

273 
d–‘e
 
»suÉ
;

275 
	}
}

	@cap_ffmpeg_api.hpp

1 #iâdeà
__OPENCV_FFMPEG_H__


2 
	#__OPENCV_FFMPEG_H__


	)

4 #ifdeà
__ılu¥lus


9 #ià
defšed
 
WIN32
 || defšed 
_WIN32


10 
	#OPENCV_FFMPEG_API
 
	`__deş¥ec
(
dÎexpÜt
)

	)

11 #–ià
defšed
 
__GNUC__
 && __GNUC__ >= 4

12 
	#OPENCV_FFMPEG_API
 
	`__©Œibu‹__
 ((
	`visib™y
 ("deçuÉ")))

	)

14 
	#OPENCV_FFMPEG_API


	)

19 
CV_FFMPEG_CAP_PROP_POS_MSEC
=0,

20 
CV_FFMPEG_CAP_PROP_POS_FRAMES
=1,

21 
CV_FFMPEG_CAP_PROP_POS_AVI_RATIO
=2,

22 
CV_FFMPEG_CAP_PROP_FRAME_WIDTH
=3,

23 
CV_FFMPEG_CAP_PROP_FRAME_HEIGHT
=4,

24 
CV_FFMPEG_CAP_PROP_FPS
=5,

25 
CV_FFMPEG_CAP_PROP_FOURCC
=6,

26 
CV_FFMPEG_CAP_PROP_FRAME_COUNT
=7

30 
OPENCV_FFMPEG_API
 
CvC­tu»_FFMPEG
* 
cvC»©eFeC­tu»_FFMPEG
(cÚ¡ * 
f’ame
);

31 
OPENCV_FFMPEG_API
 
CvC­tu»_FFMPEG_2
* 
cvC»©eFeC­tu»_FFMPEG_2
(cÚ¡ * 
f’ame
);

32 
OPENCV_FFMPEG_API
 
cvS‘C­tu»Prİ”ty_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿp
,

33 
´İ
, 
v®ue
);

34 
OPENCV_FFMPEG_API
 
cvS‘C­tu»Prİ”ty_FFMPEG_2
(
CvC­tu»_FFMPEG_2
* 
ÿp
,

35 
´İ
, 
v®ue
);

36 
OPENCV_FFMPEG_API
 
cvG‘C­tu»Prİ”ty_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿp
, 
´İ
);

37 
OPENCV_FFMPEG_API
 
cvG‘C­tu»Prİ”ty_FFMPEG_2
(
CvC­tu»_FFMPEG_2
* 
ÿp
, 
´İ
);

38 
OPENCV_FFMPEG_API
 
cvG¿bF¿me_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿp
);

39 
OPENCV_FFMPEG_API
 
cvG¿bF¿me_FFMPEG_2
(
CvC­tu»_FFMPEG_2
* 
ÿp
);

40 
OPENCV_FFMPEG_API
 
cvR‘r›veF¿me_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿ±u»
, ** 
d©a
,

41 * 
¡•
, * 
width
, * 
height
, * 
ú
);

42 
OPENCV_FFMPEG_API
 
cvR‘r›veF¿me_FFMPEG_2
(
CvC­tu»_FFMPEG_2
* 
ÿ±u»
, ** 
d©a
,

43 * 
¡•
, * 
width
, * 
height
, * 
ú
);

44 
OPENCV_FFMPEG_API
 
cvR–—£C­tu»_FFMPEG
(
CvC­tu»_FFMPEG
** 
ÿp
);

45 
OPENCV_FFMPEG_API
 
cvR–—£C­tu»_FFMPEG_2
(
CvC­tu»_FFMPEG_2
** 
ÿp
);

46 
OPENCV_FFMPEG_API
 
CvVideoWr™”_FFMPEG
* 
cvC»©eVideoWr™”_FFMPEG
(cÚ¡ * 
f’ame
,

47 
fourcc
, 
ås
, 
width
, 
height
, 
isCŞÜ
 );

48 
OPENCV_FFMPEG_API
 
CvVideoWr™”_FFMPEG_2
* 
cvC»©eVideoWr™”_FFMPEG_2
(cÚ¡ * 
f’ame
,

49 
fourcc
, 
ås
, 
width
, 
height
, 
isCŞÜ
 );

51 
OPENCV_FFMPEG_API
 
cvWr™eF¿me_FFMPEG
(
CvVideoWr™”_FFMPEG
* 
wr™”
, cÚ¡ * 
d©a
,

52 
¡•
, 
width
, 
height
, 
ú
, 
Üigš
);

54 
OPENCV_FFMPEG_API
 
cvR–—£VideoWr™”_FFMPEG
(
CvVideoWr™”_FFMPEG
** 
wr™”
);

56 * (*
	tCvC»©eFeC­tu»_Plugš
)ĞcÚ¡ * 
	tf’ame
 );

57 * (*
	tCvC»©eCam”aC­tu»_Plugš
)Ğ
	tšdex
 );

58 (*
CvG¿bF¿me_Plugš
)Ğ* 
	tÿ±u»_hªdË
 );

59 (*
CvR‘r›veF¿me_Plugš
)Ğ* 
	tÿ±u»_hªdË
, ** 
	td©a
, * 
	t¡•
,

60 * 
	twidth
, * 
	theight
, * 
	tú
 );

61 (*
CvS‘C­tu»Prİ”ty_Plugš
)Ğ* 
	tÿ±u»_hªdË
, 
	t´İ_id
, 
	tv®ue
 );

62 (*
CvG‘C­tu»Prİ”ty_Plugš
)Ğ* 
	tÿ±u»_hªdË
, 
	t´İ_id
 );

63 (*
CvR–—£C­tu»_Plugš
)Ğ** 
	tÿ±u»_hªdË
 );

64 * (*
	tCvC»©eVideoWr™”_Plugš
)ĞcÚ¡ * 
	tf’ame
, 
	tfourcc
,

65 
	tås
, 
	twidth
, 
	theight
, 
	tiscŞÜ
 );

66 (*
CvWr™eF¿me_Plugš
)Ğ* 
	twr™”_hªdË
, cÚ¡ * 
	td©a
, 
	t¡•
,

67 
	twidth
, 
	theight
, 
	tú
, 
	tÜigš
);

68 (*
CvR–—£VideoWr™”_Plugš
)Ğ** 
	twr™”
 );

74 
OPENCV_FFMPEG_API
 
OuutMedŸSŒ—m_FFMPEG
* 
ü—‹_OuutMedŸSŒ—m_FFMPEG
(cÚ¡ * 
feName
, 
width
, 
height
, 
ås
);

75 
OPENCV_FFMPEG_API
 
»Ëa£_OuutMedŸSŒ—m_FFMPEG
(
OuutMedŸSŒ—m_FFMPEG
* 
¡»am
);

76 
OPENCV_FFMPEG_API
 
wr™e_OuutMedŸSŒ—m_FFMPEG
(
OuutMedŸSŒ—m_FFMPEG
* 
¡»am
, * 
d©a
, 
size
, 
keyF¿me
);

78 
OuutMedŸSŒ—m_FFMPEG
* (*
	tC»©e_OuutMedŸSŒ—m_FFMPEG_Plugš
)(cÚ¡ * 
	tfeName
, 
	twidth
, 
	theight
, 
	tås
);

79 (*
R–—£_OuutMedŸSŒ—m_FFMPEG_Plugš
)(
	tOuutMedŸSŒ—m_FFMPEG
* 
	t¡»am
);

80 (*
Wr™e_OuutMedŸSŒ—m_FFMPEG_Plugš
)(
	tOuutMedŸSŒ—m_FFMPEG
* 
	t¡»am
, * 
	td©a
, 
	tsize
, 
	tkeyF¿me
);

86 
OPENCV_FFMPEG_API
 
IÅutMedŸSŒ—m_FFMPEG
* 
ü—‹_IÅutMedŸSŒ—m_FFMPEG
(cÚ¡ * 
feName
, * 
codec
, * 
chroma_fÜm©
, * 
width
, * 
height
);

87 
OPENCV_FFMPEG_API
 
»Ëa£_IÅutMedŸSŒ—m_FFMPEG
(
IÅutMedŸSŒ—m_FFMPEG
* 
¡»am
);

88 
OPENCV_FFMPEG_API
 
»ad_IÅutMedŸSŒ—m_FFMPEG
(
IÅutMedŸSŒ—m_FFMPEG
* 
¡»am
, ** 
d©a
, * 
size
, * 
’dOfFe
);

90 
IÅutMedŸSŒ—m_FFMPEG
* (*
	tC»©e_IÅutMedŸSŒ—m_FFMPEG_Plugš
)(cÚ¡ * 
	tfeName
, * 
	tcodec
, * 
	tchroma_fÜm©
, * 
	twidth
, * 
	theight
);

91 (*
R–—£_IÅutMedŸSŒ—m_FFMPEG_Plugš
)(
	tIÅutMedŸSŒ—m_FFMPEG
* 
	t¡»am
);

92 (*
R—d_IÅutMedŸSŒ—m_FFMPEG_Plugš
)(
	tIÅutMedŸSŒ—m_FFMPEG
* 
	t¡»am
, ** 
	td©a
, * 
	tsize
, * 
	t’dOfFe
);

94 #ifdeà
__ılu¥lus


	@cap_ffmpeg_impl.hpp

43 
	~"ÿp_ffm³g_­i.hµ
"

44 #ià!(
defšed
(
WIN32
è|| defšed(
_WIN32
è|| defšed(
WINCE
))

45 
	~<±h»ad.h
>

47 
	~<as£¹.h
>

48 
	~<®gÜ™hm
>

49 
	~<lim™s
>

51 
	#CALC_FFMPEG_VERSION
(
a
,
b
,
c
èĞa<<16 | b<<8 | c )

	)

53 #ià
defšed
 
_MSC_VER
 && _MSC_VER >= 1200

54 #´agm¨
w¬nšg
Ğ
di§bË
: 4244 4510 4512 4610 )

57 #ifdeà
__GNUC__


58 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdeprecated-declarations"

61 #ifdeà
__ılu¥lus


65 
	~"ffm³g_codecs.hµ
"

67 
	~<libavut/m©hem©ics.h
>

69 #ià
LIBAVUTIL_BUILD
 > 
CALC_FFMPEG_VERSION
(51,11,0)

70 
	~<libavut/İt.h
>

73 #ifdeà
WIN32


74 
	#HAVE_FFMPEG_SWSCALE
 1

	)

75 
	~<libavcodec/avcodec.h
>

76 
	~<libswsÿË/swsÿË.h
>

79 #iâdeà
HAVE_FFMPEG_SWSCALE


84 #ià!
defšed
 
HAVE_FFMPEG_AVCODEC_H
 && !defšed 
HAVE_LIBAVCODEC_AVCODEC_H


86 #ià
defšed
(
HAVE_GENTOO_FFMPEG
)

87 
	#HAVE_LIBAVCODEC_AVCODEC_H
 1

	)

88 #ià
defšed
(
HAVE_FFMPEG_SWSCALE
)

89 
	#HAVE_LIBSWSCALE_SWSCALE_H
 1

	)

91 #–ià
defšed
 
HAVE_FFMPEG


92 
	#HAVE_FFMPEG_AVCODEC_H
 1

	)

93 #ià
defšed
(
HAVE_FFMPEG_SWSCALE
)

94 
	#HAVE_FFMPEG_SWSCALE_H
 1

	)

100 #ià
defšed
(
HAVE_FFMPEG_AVCODEC_H
)

101 
	~<ffm³g/avcodec.h
>

103 #ià
defšed
(
HAVE_FFMPEG_SWSCALE_H
)

104 
	~<ffm³g/swsÿË.h
>

107 #ià
defšed
(
HAVE_LIBAVCODEC_AVCODEC_H
)

108 
	~<libavcodec/avcodec.h
>

110 #ià
defšed
(
HAVE_LIBSWSCALE_SWSCALE_H
)

111 
	~<libswsÿË/swsÿË.h
>

116 #ifdeà
__ılu¥lus


120 #ià
defšed
 
_MSC_VER
 && _MSC_VER >= 1200

121 #´agm¨
w¬nšg
( : 4244 4510 4512 4610 )

124 #ifdeà
NDEBUG


125 
	#CV_WARN
(
mes§ge
)

	)

127 
	#CV_WARN
(
mes§ge
è
	`årštf
(
¡d”r
, "w¬nšg: % (%s:%d)\n", mes§ge, 
__FILE__
, 
__LINE__
)

	)

131 #iâdeà
PIX_FMT_RGBA32


132 
	#PIX_FMT_RGBA32
 
PIX_FMT_RGB32


	)

136 #ià
defšed
 
WIN32
 || defšed 
_WIN32


137 
	~<wšdows.h
>

138 #–ià
defšed
 
__lšux__
 || defšed 
__APPLE__


139 
	~<uni¡d.h
>

140 
	~<¡dio.h
>

141 
	~<sys/ty³s.h
>

142 #ià
defšed
 
__APPLE__


143 
	~<sys/sysùl.h
>

147 #iâdeà
MIN


148 
	#MIN
(
a
, 
b
è(×è< (bè? (aè: (b))

	)

151 #ià
defšed
(
__APPLE__
)

152 
	#AV_NOPTS_VALUE_
 ((
št64_t
)0x8000000000000000LL)

	)

154 
	#AV_NOPTS_VALUE_
 ((
št64_t
)
AV_NOPTS_VALUE
)

	)

157 #iâdeà
AVERROR_EOF


158 
	#AVERROR_EOF
 (-
	`MKTAG
Ğ'E','O','F',' '))

	)

161 #ià
LIBAVCODEC_BUILD
 >ğ
CALC_FFMPEG_VERSION
(54,25,0)

162 
	#CV_CODEC_ID
 
AVCodecID


	)

163 
	#CV_CODEC
(
Çme
è
AV_
##
	)
name

165 
	#CV_CODEC_ID
 
CodecID


	)

166 
	#CV_CODEC
(
Çme
è
	)
name

169 
g‘_numb”_of_ıus
()

171 #ià
LIBAVFORMAT_BUILD
 < 
CALC_FFMPEG_VERSION
(52, 111, 0)

173 #–ià
defšed
 
WIN32
 || defšed 
_WIN32


174 
SYSTEM_INFO
 
sysšfo
;

175 
G‘Sy¡emInfo
Ğ&
sysšfo
 );

177  ()
sysšfo
.
dwNumb”OfProûssÜs
;

178 #–ià
defšed
 
__lšux__


179  ()
syscÚf
Ğ
_SC_NPROCESSORS_ONLN
 );

180 #–ià
defšed
 
__APPLE__


181 
numCPU
=0;

182 
mib
[4];

183 
size_t
 
Ën
 = (
numCPU
);

186 
mib
[0] = 
CTL_HW
;

187 
mib
[1] = 
HW_AVAILCPU
;

190 
sysùl
(
mib
, 2, &
numCPU
, &
Ën
, 
NULL
, 0);

192 ifĞ
numCPU
 < 1 )

194 
mib
[1] = 
HW_NCPU
;

195 
sysùl
Ğ
mib
, 2, &
numCPU
, &
Ën
, 
NULL
, 0 );

197 ifĞ
numCPU
 < 1 )

198 
numCPU
 = 1;

201  ()
numCPU
;

208 
	sImage_FFMPEG


210 * 
d©a
;

211 
¡•
;

212 
width
;

213 
height
;

214 
ú
;

218 
šlše
 
_İ’cv_ffm³g_ä“
(** 
±r
)

220 if(*
±r
è
ä“
(*ptr);

221 *
±r
 = 0;

225 
	sCvC­tu»_FFMPEG


227 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
 );

228 
şo£
();

230 
g‘Prİ”ty
() const;

231 
boŞ
 
£tPrİ”ty
(, );

232 
boŞ
 
g¿bF¿me
();

233 
boŞ
 
»Œ›veF¿me
(, ** 
d©a
, * 
¡•
, * 
width
, * 
height
, * 
ú
);

235 
š™
();

237 
£ek
(
št64_t
 
äame_numb”
);

238 
£ek
(
£c
);

239 
boŞ
 
¦owS“k
Ğ
äam’umb”
 );

241 
št64_t
 
g‘_tÙ®_äames
() const;

242 
g‘_du¿tiÚ_£c
() const;

243 
g‘_ås
() const;

244 
g‘_b™¿‹
() const;

246 
r2d
(
AVR©iÚ®
 
r
) const;

247 
št64_t
 
dts_to_äame_numb”
(št64_ˆ
dts
);

248 
dts_to_£c
(
št64_t
 
dts
);

250 
AVFÜm©CÚ‹xt
 * 
ic
;

251 
AVCodec
 * 
avcodec
;

252 
video_¡»am
;

253 
AVSŒ—m
 * 
video_¡
;

254 
AVF¿me
 * 
piùu»
;

255 
AVF¿me
 
rgb_piùu»
;

256 
št64_t
 
piùu»_±s
;

258 
AVPack‘
 
·ck‘
;

259 
Image_FFMPEG
 
äame
;

260 
SwsCÚ‹xt
 *
img_cÚv”t_ùx
;

262 
št64_t
 
äame_numb”
, 
fœ¡_äame_numb”
;

264 
•s_z”o
;

272 * 
f’ame
;

274 #ià
LIBAVFORMAT_BUILD
 >ğ
CALC_FFMPEG_VERSION
(52, 111, 0)

275 
AVDiùiÚ¬y
 *
diù
;

279 
CvC­tu»_FFMPEG
::
š™
()

281 
ic
 = 0;

282 
video_¡»am
 = -1;

283 
video_¡
 = 0;

284 
piùu»
 = 0;

285 
piùu»_±s
 = 
AV_NOPTS_VALUE_
;

286 
fœ¡_äame_numb”
 = -1;

287 
mem£t
Ğ&
rgb_piùu»
, 0, (rgb_picture) );

288 
mem£t
Ğ&
äame
, 0, (frame) );

289 
f’ame
 = 0;

290 
mem£t
(&
·ck‘
, 0, (packet));

291 
av_š™_·ck‘
(&
·ck‘
);

292 
img_cÚv”t_ùx
 = 0;

294 
avcodec
 = 0;

295 
äame_numb”
 = 0;

296 
•s_z”o
 = 0.000025;

298 #ià
LIBAVFORMAT_BUILD
 >ğ
CALC_FFMPEG_VERSION
(52, 111, 0)

299 
diù
 = 
NULL
;

304 
CvC­tu»_FFMPEG
::
şo£
()

306 ifĞ
img_cÚv”t_ùx
 )

308 
sws_ä“CÚ‹xt
(
img_cÚv”t_ùx
);

309 
img_cÚv”t_ùx
 = 0;

312 ifĞ
piùu»
 )

315 #ià
LIBAVCODEC_BUILD
 >ğ(
LIBAVCODEC_VERSION_MICRO
 >= 100 \

316 ? 
CALC_FFMPEG_VERSION
(54, 59, 100) : CALC_FFMPEG_VERSION(54, 28, 0))

317 
avcodec_ä“_äame
(&
piùu»
);

319 
av_ä“
(
piùu»
);

323 ifĞ
video_¡
 )

325 #ià
LIBAVFORMAT_BUILD
 > 4628

326 
avcodec_şo£
Ğ
video_¡
->
codec
 );

329 
avcodec_şo£
Ğ&(
video_¡
->
codec
) );

332 
video_¡
 = 
NULL
;

335 ifĞ
ic
 )

337 #ià
LIBAVFORMAT_BUILD
 < 
CALC_FFMPEG_VERSION
(53, 24, 2)

338 
av_şo£_šput_fe
(
ic
);

340 
avfÜm©_şo£_šput
(&
ic
);

343 
ic
 = 
NULL
;

346 ifĞ
rgb_piùu»
.
d©a
[0] )

348 
ä“
Ğ
rgb_piùu»
.
d©a
[0] );

349 
rgb_piùu»
.
d©a
[0] = 0;

353 ià(
·ck‘
.
d©a
) {

354 
av_ä“_·ck‘
 (&
·ck‘
);

355 
·ck‘
.
d©a
 = 
NULL
;

358 #ià
LIBAVFORMAT_BUILD
 >ğ
CALC_FFMPEG_VERSION
(52, 111, 0)

359 ià(
diù
 !ğ
NULL
)

360 
av_diù_ä“
(&
diù
);

363 
š™
();

367 #iâdeà
AVSEEK_FLAG_FRAME


368 
	#AVSEEK_FLAG_FRAME
 0

	)

370 #iâdeà
AVSEEK_FLAG_ANY


371 
	#AVSEEK_FLAG_ANY
 1

	)

374 şas 
	cIm¶Mu‹x


376 
public
:

377 
Im¶Mu‹x
(è{ 
š™
(); }

378 ~
Im¶Mu‹x
(è{ 
de¡roy
(); }

380 
š™
();

381 
de¡roy
();

383 
lock
();

384 
boŞ
 
Œylock
();

385 
uÆock
();

387 
Im¶
;

388 
´Ùeùed
:

389 
Im¶
* 
im¶
;

391 
´iv©e
:

392 
Im¶Mu‹x
(const ImplMutex&);

393 
Im¶Mu‹x
& 
İ”©Ü
 = (cÚ¡ Im¶Mu‹x& 
m
);

396 #ià
defšed
 
WIN32
 || defšed 
_WIN32
 || defšed 
WINCE


398 
Im¶Mu‹x
::
Im¶


400 
š™
()

402 #ià(
_WIN32_WINNT
 >= 0x0600)

403 ::
In™ŸlizeCr™iÿlSeùiÚEx
(&
cs
, 1000, 0);

405 ::
In™ŸlizeCr™iÿlSeùiÚ
(&
cs
);

407 
»fcouÁ
 = 1;

409 
de¡roy
(è{ 
D–‘eCr™iÿlSeùiÚ
(&
cs
); }

411 
lock
(è{ 
EÁ”Cr™iÿlSeùiÚ
(&
cs
); }

412 
boŞ
 
Œylock
(è{  
TryEÁ”Cr™iÿlSeùiÚ
(&
cs
) != 0; }

413 
uÆock
(è{ 
L—veCr™iÿlSeùiÚ
(&
cs
); }

415 
CRITICAL_SECTION
 
cs
;

416 
»fcouÁ
;

419 #iâdeà
__GNUC__


420 
	$_š‹¾ockedExchªgeAdd
(* 
addr
, 
d–
)

422 #ià
defšed
 
_MSC_VER
 && _MSC_VER >= 1500

423  ()
	`_IÁ”lockedExchªgeAdd
((vŞ©e*)
addr
, 
d–
);

425  ()
	`IÁ”lockedExchªgeAdd
((vŞ©e*)
addr
, 
d–
);

427 
	}
}

430 #–ià
defšed
 
__APPLE__


432 
	~<libk”n/OSAtomic.h
>

434 
Im¶Mu‹x
::
Im¶


436 
š™
(è{ 
¦
 = 
OS_SPINLOCK_INIT
; 
»fcouÁ
 = 1; }

437 
de¡roy
() { }

439 
lock
(è{ 
OSSpšLockLock
(&
¦
); }

440 
boŞ
 
Œylock
(è{  
OSSpšLockTry
(&
¦
); }

441 
uÆock
(è{ 
OSSpšLockUÆock
(&
¦
); }

443 
OSSpšLock
 
¦
;

444 
»fcouÁ
;

447 #–ià
defšed
 
__lšux__
 && !defšed 
ANDROID


449 
Im¶Mu‹x
::
Im¶


451 
š™
(è{ 
±h»ad_¥š_š™
(&
¦
, 0); 
»fcouÁ
 = 1; }

452 
de¡roy
(è{ 
±h»ad_¥š_de¡roy
(&
¦
); }

454 
lock
(è{ 
±h»ad_¥š_lock
(&
¦
); }

455 
boŞ
 
Œylock
(è{  
±h»ad_¥š_Œylock
(&
¦
) == 0; }

456 
uÆock
(è{ 
±h»ad_¥š_uÆock
(&
¦
); }

458 
±h»ad_¥šlock_t
 
¦
;

459 
»fcouÁ
;

464 
Im¶Mu‹x
::
Im¶


466 
š™
(è{ 
±h»ad_mu‹x_š™
(&
¦
, 0); 
»fcouÁ
 = 1; }

467 
de¡roy
(è{ 
±h»ad_mu‹x_de¡roy
(&
¦
); }

469 
lock
(è{ 
±h»ad_mu‹x_lock
(&
¦
); }

470 
boŞ
 
Œylock
(è{  
±h»ad_mu‹x_Œylock
(&
¦
) == 0; }

471 
uÆock
(è{ 
±h»ad_mu‹x_uÆock
(&
¦
); }

473 
±h»ad_mu‹x_t
 
¦
;

474 
»fcouÁ
;

479 
Im¶Mu‹x
::
	$š™
()

481 
im¶
 = (
Im¶
*)
	`m®loc
((Impl));

482 
im¶
->
	`š™
();

483 
	}
}

484 
Im¶Mu‹x
::
	$de¡roy
()

486 
im¶
->
	`de¡roy
();

487 
	`ä“
(
im¶
);

488 
im¶
 = 
NULL
;

489 
	}
}

490 
Im¶Mu‹x
::
	$lock
(è{ 
im¶
->
	`lock
(); 
	}
}

491 
Im¶Mu‹x
::
	$uÆock
(è{ 
im¶
->
	`uÆock
(); 
	}
}

492 
boŞ
 
Im¶Mu‹x
::
	$Œylock
(è{  
im¶
->
	`Œylock
(); 
	}
}

494 
	$LockC®lBack
(**
mu‹x
, 
AVLockOp
 
İ
)

496 
Im¶Mu‹x
* 
loÿlMu‹x
 = 
»š‹½»t_ÿ¡
<Im¶Mu‹x*>(*
mu‹x
);

497 
İ
)

499 
AV_LOCK_CREATE
:

500 
loÿlMu‹x
 = 
»š‹½»t_ÿ¡
<
Im¶Mu‹x
*>(
	`m®loc
((ImplMutex)));

501 
loÿlMu‹x
->
	`š™
();

502 *
mu‹x
 = 
loÿlMu‹x
;

503 ià(!*
mu‹x
)

507 
AV_LOCK_OBTAIN
:

508 
loÿlMu‹x
->
	`lock
();

511 
AV_LOCK_RELEASE
:

512 
loÿlMu‹x
->
	`uÆock
();

515 
AV_LOCK_DESTROY
:

516 
loÿlMu‹x
->
	`de¡roy
();

517 
	`ä“
(
loÿlMu‹x
);

518 
loÿlMu‹x
 = 
NULL
;

519 *
mu‹x
 = 
NULL
;

523 
	}
}

525 
Im¶Mu‹x
 
_mu‹x
;

526 
boŞ
 
_š™Ÿlized
 = 
çl£
;

528 şas 
	cIÁ”ÇlFFM³gRegi¡”


530 
public
:

531 
IÁ”ÇlFFM³gRegi¡”
()

533 
_mu‹x
.
lock
();

534 ià(!
_š™Ÿlized
)

536 #ià
LIBAVFORMAT_BUILD
 >ğ
CALC_FFMPEG_VERSION
(53, 13, 0)

537 
avfÜm©_ÃtwÜk_š™
();

541 
av_»gi¡”_®l
();

544 
av_lockmgr_»gi¡”
(&
LockC®lBack
);

546 
av_log_£t_Ëv–
(
AV_LOG_ERROR
);

548 
_š™Ÿlized
 = 
Œue
;

550 
_mu‹x
.
uÆock
();

553 ~
IÁ”ÇlFFM³gRegi¡”
()

555 
_š™Ÿlized
 = 
çl£
;

556 
av_lockmgr_»gi¡”
(
NULL
);

560 
IÁ”ÇlFFM³gRegi¡”
 
_š™
;

562 
boŞ
 
CvC­tu»_FFMPEG
::
	$İ’
ĞcÚ¡ * 
_f’ame
 )

564 
i
;

565 
boŞ
 
v®id
 = 
çl£
;

567 
	`şo£
();

569 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(52, 111, 0)

570 
	`av_diù_£t
(&
diù
, "rtsp_transport", "tcp", 0);

571 
”r
 = 
	`avfÜm©_İ’_šput
(&
ic
, 
_f’ame
, 
NULL
, NULL);

573 
”r
 = 
	`av_İ’_šput_fe
(&
ic
, 
_f’ame
, 
NULL
, 0, NULL);

576 ià(
”r
 < 0)

578 
	`CV_WARN
("Error opening file");

579 
ex™_func
;

581 
”r
 =

582 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 6, 0)

583 
	`avfÜm©_fšd_¡»am_šfo
(
ic
, 
NULL
);

585 
	`av_fšd_¡»am_šfo
(
ic
);

587 ià(
”r
 < 0)

589 
	`CV_WARN
("Could‚ot find codec…arameters");

590 
ex™_func
;

592 
i
 = 0; i < 
ic
->
nb_¡»ams
; i++)

594 #ià
LIBAVFORMAT_BUILD
 > 4628

595 
AVCodecCÚ‹xt
 *
’c
 = 
ic
->
¡»ams
[
i
]->
codec
;

597 
AVCodecCÚ‹xt
 *
’c
 = &
ic
->
¡»ams
[
i
]->
codec
;

603 
’c
->
th»ad_couÁ
 = 
	`g‘_numb”_of_ıus
();

606 #ià
LIBAVFORMAT_BUILD
 < 
	`CALC_FFMPEG_VERSION
(53, 2, 0)

607 
	#AVMEDIA_TYPE_VIDEO
 
CODEC_TYPE_VIDEO


	)

610 ifĞ
AVMEDIA_TYPE_VIDEO
 =ğ
’c
->
codec_ty³
 && 
video_¡»am
 < 0)

613 
’c_width
 = 
’c
->
width
;

614 
’c_height
 = 
’c
->
height
;

616 
AVCodec
 *
codec
 = 
	`avcodec_fšd_decod”
(
’c
->
codec_id
);

617 ià(!
codec
 ||

618 #ià
LIBAVCODEC_VERSION_INT
 >= ((53<<16)+(8<<8)+0)

619 
	`avcodec_İ’2
(
’c
, 
codec
, 
NULL
)

621 
	`avcodec_İ’
(
’c
, 
codec
)

624 
ex™_func
;

627 ià(
’c_width
 && (
’c
->
width
 !=ƒnc_width)) {ƒnc->width =ƒnc_width; }

628 ià(
’c_height
 && (
’c
->
height
 !=ƒnc_height)) {ƒnc->height =ƒnc_height; }

630 
video_¡»am
 = 
i
;

631 
video_¡
 = 
ic
->
¡»ams
[
i
];

632 
piùu»
 = 
	`avcodec_®loc_äame
();

634 
rgb_piùu»
.
d©a
[0] = (
ušt8_t
*)
	`m®loc
(

635 
	`avpiùu»_g‘_size
Ğ
PIX_FMT_BGR24
,

636 
’c
->
width
,ƒnc->
height
 ));

637 
	`avpiùu»_fl
Ğ(
AVPiùu»
*)&
rgb_piùu»
,„gb_piùu».
d©a
[0],

638 
PIX_FMT_BGR24
, 
’c
->
width
,ƒnc->
height
 );

640 
äame
.
width
 = 
’c
->width;

641 
äame
.
height
 = 
’c
->height;

642 
äame
.
ú
 = 3;

643 
äame
.
¡•
 = 
rgb_piùu»
.
lšesize
[0];

644 
äame
.
d©a
 = 
rgb_piùu»
.data[0];

649 if(
video_¡»am
 >ğ0è
v®id
 = 
Œue
;

651 
ex™_func
:

653 ifĞ!
v®id
 )

654 
	`şo£
();

656  
v®id
;

657 
	}
}

660 
boŞ
 
CvC­tu»_FFMPEG
::
	$g¿bF¿me
()

662 
boŞ
 
v®id
 = 
çl£
;

663 
gÙ_piùu»
;

665 
couÁ_”rs
 = 0;

666 cÚ¡ 
max_numb”_of_©‹m±s
 = 1 << 9;

668 ifĞ!
ic
 || !
video_¡
 )  
çl£
;

670 ifĞ
ic
->
¡»ams
[
video_¡»am
]->
nb_äames
 > 0 &&

671 
äame_numb”
 > 
ic
->
¡»ams
[
video_¡»am
]->
nb_äames
 )

672  
çl£
;

674 
piùu»_±s
 = 
AV_NOPTS_VALUE_
;

677 !
v®id
)

680 
	`av_ä“_·ck‘
 (&
·ck‘
);

681 
»t
 = 
	`av_»ad_äame
(
ic
, &
·ck‘
);

682 ià(
»t
 =ğ
	`AVERROR
(
EAGAIN
)) ;

686 ifĞ
·ck‘
.
¡»am_šdex
 !ğ
video_¡»am
 )

688 
	`av_ä“_·ck‘
 (&
·ck‘
);

689 
couÁ_”rs
++;

690 ià(
couÁ_”rs
 > 
max_numb”_of_©‹m±s
)

696 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

697 
	`avcodec_decode_video2
(
video_¡
->
codec
, 
piùu»
, &
gÙ_piùu»
, &
·ck‘
);

698 #–ià
LIBAVFORMAT_BUILD
 > 4628

699 
	`avcodec_decode_video
(
video_¡
->
codec
,

700 
piùu»
, &
gÙ_piùu»
,

701 
·ck‘
.
d©a
,…ack‘.
size
);

703 
	`avcodec_decode_video
(&
video_¡
->
codec
,

704 
piùu»
, &
gÙ_piùu»
,

705 
·ck‘
.
d©a
,…ack‘.
size
);

709 if(
gÙ_piùu»
)

712 ifĞ
piùu»_±s
 =ğ
AV_NOPTS_VALUE_
 )

713 
piùu»_±s
 = 
·ck‘
.
±s
 !ğ
AV_NOPTS_VALUE_
 &&…ack‘.± !ğ0 ?…ack‘.± :…ack‘.
dts
;

714 
äame_numb”
++;

715 
v®id
 = 
Œue
;

719 
couÁ_”rs
++;

720 ià(
couÁ_”rs
 > 
max_numb”_of_©‹m±s
)

725 ifĞ
v®id
 && 
fœ¡_äame_numb”
 < 0 )

726 
fœ¡_äame_numb”
 = 
	`dts_to_äame_numb”
(
piùu»_±s
);

729  
v®id
;

730 
	}
}

733 
boŞ
 
CvC­tu»_FFMPEG
::
	$»Œ›veF¿me
(, ** 
d©a
, * 
¡•
, * 
width
, * 
height
, * 
ú
)

735 ifĞ!
video_¡
 || !
piùu»
->
d©a
[0] )

736  
çl£
;

738 
	`avpiùu»_fl
((
AVPiùu»
*)&
rgb_piùu»
,„gb_piùu».
d©a
[0], 
PIX_FMT_RGB24
,

739 
video_¡
->
codec
->
width
, video_¡->codec->
height
);

741 ifĞ
img_cÚv”t_ùx
 =ğ
NULL
 ||

742 
äame
.
width
 !ğ
video_¡
->
codec
->width ||

743 
äame
.
height
 !ğ
video_¡
->
codec
->height )

745 ifĞ
img_cÚv”t_ùx
 )

746 
	`sws_ä“CÚ‹xt
(
img_cÚv”t_ùx
);

748 
äame
.
width
 = 
video_¡
->
codec
->width;

749 
äame
.
height
 = 
video_¡
->
codec
->height;

751 
img_cÚv”t_ùx
 = 
	`sws_g‘CachedCÚ‹xt
(

752 
NULL
,

753 
video_¡
->
codec
->
width
, video_¡->codec->
height
,

754 
video_¡
->
codec
->
pix_fmt
,

755 
video_¡
->
codec
->
width
, video_¡->codec->
height
,

756 
PIX_FMT_BGR24
,

757 
SWS_BICUBIC
,

758 
NULL
, NULL, NULL

761 ià(
img_cÚv”t_ùx
 =ğ
NULL
)

762  
çl£
;

765 
	`sws_sÿË
(

766 
img_cÚv”t_ùx
,

767 
piùu»
->
d©a
,

768 
piùu»
->
lšesize
,

769 0, 
video_¡
->
codec
->
height
,

770 
rgb_piùu»
.
d©a
,

771 
rgb_piùu»
.
lšesize


774 *
d©a
 = 
äame
.data;

775 *
¡•
 = 
äame
.step;

776 *
width
 = 
äame
.width;

777 *
height
 = 
äame
.height;

778 *
ú
 = 
äame
.cn;

780  
Œue
;

781 
	}
}

784 
CvC­tu»_FFMPEG
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

786 ifĞ!
video_¡
 )  0;

788  
´İ”ty_id
 )

790 
CV_FFMPEG_CAP_PROP_POS_MSEC
:

791  1000.0*()
äame_numb”
/
	`g‘_ås
();

792 
CV_FFMPEG_CAP_PROP_POS_FRAMES
:

793  ()
äame_numb”
;

794 
CV_FFMPEG_CAP_PROP_POS_AVI_RATIO
:

795  
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->
time_ba£
);

796 
CV_FFMPEG_CAP_PROP_FRAME_COUNT
:

797  ()
	`g‘_tÙ®_äames
();

798 
CV_FFMPEG_CAP_PROP_FRAME_WIDTH
:

799  ()
äame
.
width
;

800 
CV_FFMPEG_CAP_PROP_FRAME_HEIGHT
:

801  ()
äame
.
height
;

802 
CV_FFMPEG_CAP_PROP_FPS
:

803 #ià
LIBAVCODEC_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(54, 1, 0)

804  
	`av_q2d
(
video_¡
->
avg_äame_¿‹
);

805 #–ià
LIBAVCODEC_BUILD
 > 4753

806  
	`av_q2d
(
video_¡
->
r_äame_¿‹
);

808  ()
video_¡
->
codec
.
äame_¿‹


809 / ()
video_¡
->
codec
.
äame_¿‹_ba£
;

811 
CV_FFMPEG_CAP_PROP_FOURCC
:

812 #ià
LIBAVFORMAT_BUILD
 > 4628

813  ()
video_¡
->
codec
->
codec_g
;

815  ()
video_¡
->
codec
.
codec_g
;

822 
	}
}

824 
CvC­tu»_FFMPEG
::
	$r2d
(
AVR©iÚ®
 
r
) const

826  
r
.
num
 =ğ0 ||„.
d’
 == 0 ? 0. : ()r.num / ()r.den;

827 
	}
}

829 
CvC­tu»_FFMPEG
::
	$g‘_du¿tiÚ_£c
() const

831 
£c
 = ()
ic
->
du¿tiÚ
 / ()
AV_TIME_BASE
;

833 ià(
£c
 < 
•s_z”o
)

835 
£c
 = ()
ic
->
¡»ams
[
video_¡»am
]->
du¿tiÚ
 * 
	`r2d
(ic->¡»ams[video_¡»am]->
time_ba£
);

838 ià(
£c
 < 
•s_z”o
)

840 
£c
 = ()
ic
->
¡»ams
[
video_¡»am
]->
du¿tiÚ
 * 
	`r2d
(ic->¡»ams[video_¡»am]->
time_ba£
);

843  
£c
;

844 
	}
}

846 
CvC­tu»_FFMPEG
::
	$g‘_b™¿‹
() const

848  
ic
->
b™_¿‹
;

849 
	}
}

851 
CvC­tu»_FFMPEG
::
	$g‘_ås
() const

853 #ià
LIBAVCODEC_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(54, 1, 0)

854 
ås
 = 
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->
avg_äame_¿‹
);

856 
ås
 = 
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->
r_äame_¿‹
);

859 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(52, 111, 0)

860 ià(
ås
 < 
•s_z”o
)

862 
ås
 = 
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->
avg_äame_¿‹
);

866 ià(
ås
 < 
•s_z”o
)

868 
ås
 = 1.0 / 
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->
codec
->
time_ba£
);

871  
ås
;

872 
	}
}

874 
št64_t
 
CvC­tu»_FFMPEG
::
	$g‘_tÙ®_äames
() const

876 
št64_t
 
nbf
 = 
ic
->
¡»ams
[
video_¡»am
]->
nb_äames
;

878 ià(
nbf
 == 0)

880 
nbf
 = (
št64_t
)
	`æoÜ
(
	`g‘_du¿tiÚ_£c
(è* 
	`g‘_ås
() + 0.5);

882  
nbf
;

883 
	}
}

885 
št64_t
 
CvC­tu»_FFMPEG
::
	$dts_to_äame_numb”
(
št64_t
 
dts
)

887 
£c
 = 
	`dts_to_£c
(
dts
);

888  (
št64_t
)(
	`g‘_ås
(è* 
£c
 + 0.5);

889 
	}
}

891 
CvC­tu»_FFMPEG
::
	$dts_to_£c
(
št64_t
 
dts
)

893  ()(
dts
 - 
ic
->
¡»ams
[
video_¡»am
]->
¡¬t_time
) *

894 
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->
time_ba£
);

895 
	}
}

897 
CvC­tu»_FFMPEG
::
	$£ek
(
št64_t
 
_äame_numb”
)

899 
_äame_numb”
 = 
¡d
::
	`mš
(_äame_numb”, 
	`g‘_tÙ®_äames
());

900 
d–
 = 16;

904 ifĞ
fœ¡_äame_numb”
 < 0 && 
	`g‘_tÙ®_äames
() > 1 )

905 
	`g¿bF¿me
();

909 
št64_t
 
_äame_numb”_‹mp
 = 
¡d
::
	`max
(
_äame_numb”
-
d–
, (int64_t)0);

910 
£c
 = ()
_äame_numb”_‹mp
 / 
	`g‘_ås
();

911 
št64_t
 
time_¡amp
 = 
ic
->
¡»ams
[
video_¡»am
]->
¡¬t_time
;

912 
time_ba£
 = 
	`r2d
(
ic
->
¡»ams
[
video_¡»am
]->time_base);

913 
time_¡amp
 +ğ(
št64_t
)(
£c
 / 
time_ba£
 + 0.5);

914 ià(
	`g‘_tÙ®_äames
(è> 1è
	`av_£ek_äame
(
ic
, 
video_¡»am
, 
time_¡amp
, 
AVSEEK_FLAG_BACKWARD
);

915 
	`avcodec_æush_bufãrs
(
ic
->
¡»ams
[
video_¡»am
]->
codec
);

916 ifĞ
_äame_numb”
 > 0 )

918 
	`g¿bF¿me
();

920 ifĞ
_äame_numb”
 > 1 )

922 
äame_numb”
 = 
	`dts_to_äame_numb”
(
piùu»_±s
è- 
fœ¡_äame_numb”
;

926 ifĞ
äame_numb”
 < 0 || f¿me_numb” > 
_äame_numb”
-1 )

928 ifĞ
_äame_numb”_‹mp
 =ğ0 || 
d–
 >ğ
INT_MAX
/4 )

930 
d–
 = delta < 16 ? delta*2 : delta*3/2;

933  
äame_numb”
 < 
_äame_numb”
-1 )

935 if(!
	`g¿bF¿me
())

938 
äame_numb”
++;

943 
äame_numb”
 = 1;

949 
äame_numb”
 = 0;

953 
	}
}

955 
CvC­tu»_FFMPEG
::
	$£ek
(
£c
)

957 
	`£ek
((
št64_t
)(
£c
 * 
	`g‘_ås
() + 0.5));

958 
	}
}

960 
boŞ
 
CvC­tu»_FFMPEG
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

962 ifĞ!
video_¡
 )  
çl£
;

964  
´İ”ty_id
 )

966 
CV_FFMPEG_CAP_PROP_POS_MSEC
:

967 
CV_FFMPEG_CAP_PROP_POS_FRAMES
:

968 
CV_FFMPEG_CAP_PROP_POS_AVI_RATIO
:

970  
´İ”ty_id
 )

972 
CV_FFMPEG_CAP_PROP_POS_FRAMES
:

973 
	`£ek
((
št64_t
)
v®ue
);

976 
CV_FFMPEG_CAP_PROP_POS_MSEC
:

977 
	`£ek
(
v®ue
/1000.0);

980 
CV_FFMPEG_CAP_PROP_POS_AVI_RATIO
:

981 
	`£ek
((
št64_t
)(
v®ue
*
ic
->
du¿tiÚ
));

985 
piùu»_±s
=(
št64_t
)
v®ue
;

989  
çl£
;

992  
Œue
;

993 
	}
}

997 
	sCvVideoWr™”_FFMPEG


999 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1000 
ås
, 
width
, 
height
, 
boŞ
 
isCŞÜ
 );

1001 
şo£
();

1002 
boŞ
 
wr™eF¿me
ĞcÚ¡ * 
d©a
, 
¡•
, 
width
, 
height
, 
ú
, 
Üigš
 );

1004 
š™
();

1006 
AVOuutFÜm©
 * 
fmt
;

1007 
AVFÜm©CÚ‹xt
 * 
oc
;

1008 
ušt8_t
 * 
outbuf
;

1009 
ušt32_t
 
outbuf_size
;

1010 
FILE
 * 
outfe
;

1011 
AVF¿me
 * 
piùu»
;

1012 
AVF¿me
 * 
šput_piùu»
;

1013 
ušt8_t
 * 
picbuf
;

1014 
AVSŒ—m
 * 
video_¡
;

1015 
šput_pix_fmt
;

1016 
Image_FFMPEG
 
‹mp_image
;

1017 
äame_width
, 
äame_height
;

1018 
äame_idx
;

1019 
boŞ
 
ok
;

1020 
SwsCÚ‹xt
 *
img_cÚv”t_ùx
;

1023 cÚ¡ * 
	$icvFFMPEGE¼SŒ
(
”r
)

1025 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

1026 
”r
) {

1027 
AVERROR_BSF_NOT_FOUND
:

1029 
AVERROR_DECODER_NOT_FOUND
:

1031 
AVERROR_DEMUXER_NOT_FOUND
:

1033 
AVERROR_ENCODER_NOT_FOUND
:

1035 
AVERROR_EOF
:

1037 
AVERROR_EXIT
:

1039 
AVERROR_FILTER_NOT_FOUND
:

1041 
AVERROR_INVALIDDATA
:

1043 
AVERROR_MUXER_NOT_FOUND
:

1045 
AVERROR_OPTION_NOT_FOUND
:

1047 
AVERROR_PATCHWELCOME
:

1049 
AVERROR_PROTOCOL_NOT_FOUND
:

1051 
AVERROR_STREAM_NOT_FOUND
:

1057 
”r
) {

1058 
AVERROR_NUMEXPECTED
:

1060 
AVERROR_INVALIDDATA
:

1062 
AVERROR_NOFMT
:

1064 
AVERROR_IO
:

1066 
AVERROR_NOMEM
:

1074 
	}
}

1078 
CV_CODEC_ID
 
codec_g‘_bmp_id
(
g
);

1081 
CvVideoWr™”_FFMPEG
::
	$š™
()

1083 
fmt
 = 0;

1084 
oc
 = 0;

1085 
outbuf
 = 0;

1086 
outbuf_size
 = 0;

1087 
outfe
 = 0;

1088 
piùu»
 = 0;

1089 
šput_piùu»
 = 0;

1090 
picbuf
 = 0;

1091 
video_¡
 = 0;

1092 
šput_pix_fmt
 = 0;

1093 
	`mem£t
(&
‹mp_image
, 0, (temp_image));

1094 
img_cÚv”t_ùx
 = 0;

1095 
äame_width
 = 
äame_height
 = 0;

1096 
äame_idx
 = 0;

1097 
ok
 = 
çl£
;

1098 
	}
}

1104 
AVF¿me
 * 
	$icv_®loc_piùu»_FFMPEG
(
pix_fmt
, 
width
, 
height
, 
boŞ
 
®loc
)

1106 
AVF¿me
 * 
piùu»
;

1107 
ušt8_t
 * 
piùu»_buf
;

1108 
size
;

1110 
piùu»
 = 
	`avcodec_®loc_äame
();

1111 ià(!
piùu»
)

1112  
NULL
;

1113 
size
 = 
	`avpiùu»_g‘_size
Ğ(
Pix–FÜm©
è
pix_fmt
, 
width
, 
height
);

1114 if(
®loc
){

1115 
piùu»_buf
 = (
ušt8_t
 *è
	`m®loc
(
size
);

1116 ià(!
piùu»_buf
)

1118 
	`av_ä“
(
piùu»
);

1119  
NULL
;

1121 
	`avpiùu»_fl
((
AVPiùu»
 *)
piùu»
, 
piùu»_buf
,

1122 (
Pix–FÜm©
è
pix_fmt
, 
width
, 
height
);

1126  
piùu»
;

1127 
	}
}

1130 
AVSŒ—m
 *
	$icv_add_video_¡»am_FFMPEG
(
AVFÜm©CÚ‹xt
 *
oc
,

1131 
CV_CODEC_ID
 
codec_id
,

1132 
w
, 
h
, 
b™¿‹
,

1133 
ås
, 
pix–_fÜm©
)

1135 
AVCodecCÚ‹xt
 *
c
;

1136 
AVSŒ—m
 *
¡
;

1137 
äame_¿‹
, 
äame_¿‹_ba£
;

1138 
AVCodec
 *
codec
;

1140 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 10, 0)

1141 
¡
 = 
	`avfÜm©_Ãw_¡»am
(
oc
, 0);

1143 
¡
 = 
	`av_Ãw_¡»am
(
oc
, 0);

1146 ià(!
¡
) {

1147 
	`CV_WARN
("Could‚ot‡llocate stream");

1148  
NULL
;

1151 #ià
LIBAVFORMAT_BUILD
 > 4628

1152 
c
 = 
¡
->
codec
;

1154 
c
 = &(
¡
->
codec
);

1157 #ià
LIBAVFORMAT_BUILD
 > 4621

1158 
c
->
codec_id
 = 
	`av_guess_codec
(
oc
->
ofÜm©
, 
NULL
, oc->
f’ame
, NULL, 
AVMEDIA_TYPE_VIDEO
);

1160 
c
->
codec_id
 = 
oc
->
ofÜm©
->
video_codec
;

1163 if(
codec_id
 !ğ
	`CV_CODEC
(
CODEC_ID_NONE
)){

1164 
c
->
codec_id
 = codec_id;

1168 
codec
 = 
	`avcodec_fšd_’cod”
(
c
->
codec_id
);

1170 
c
->
codec_ty³
 = 
AVMEDIA_TYPE_VIDEO
;

1172 #ià
LIBAVCODEC_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(54,25,0)

1174 
AVCodecID
 
c_id
 = 
c
->
codec_id
;

1175 
	`avcodec_g‘_cÚ‹xt_deçuÉs3
(
c
, 
codec
);

1177 
c
->
codec_id
 = 
c_id
;

1181 
št64_t
 
lb™_¿‹
 = (št64_t)
b™¿‹
;

1182 
lb™_¿‹
 +ğ(
b™¿‹
 / 2);

1183 
lb™_¿‹
 = 
¡d
::
	`mš
Öb™_¿‹, (
št64_t
)
INT_MAX
);

1184 
c
->
b™_¿‹
 = 
lb™_¿‹
;

1188 
c
->
qmš
 = 3;

1191 
c
->
width
 = 
w
;

1192 
c
->
height
 = 
h
;

1198 
äame_¿‹
=()(
ås
+0.5);

1199 
äame_¿‹_ba£
=1;

1200 
	`çbs
(()
äame_¿‹
/
äame_¿‹_ba£
è- 
ås
 > 0.001){

1201 
äame_¿‹_ba£
*=10;

1202 
äame_¿‹
=()(
ås
*
äame_¿‹_ba£
 + 0.5);

1204 #ià
LIBAVFORMAT_BUILD
 > 4752

1205 
c
->
time_ba£
.
d’
 = 
äame_¿‹
;

1206 
c
->
time_ba£
.
num
 = 
äame_¿‹_ba£
;

1208 if(
codec
 && codec->
suµÜ‹d_äam”©es
){

1209 cÚ¡ 
AVR©iÚ®
 *
p
ğ
codec
->
suµÜ‹d_äam”©es
;

1210 
AVR©iÚ®
 
»q
 = {
äame_¿‹
, 
äame_¿‹_ba£
};

1211 cÚ¡ 
AVR©iÚ®
 *
be¡
=
NULL
;

1212 
AVR©iÚ®
 
be¡_”rÜ
ğ{
INT_MAX
, 1};

1213 ; 
p
->
d’
!=0;…++){

1214 
AVR©iÚ®
 
”rÜ
ğ
	`av_sub_q
(
»q
, *
p
);

1215 if(
”rÜ
.
num
 <0)ƒrror.num *= -1;

1216 if(
	`av_cmp_q
(
”rÜ
, 
be¡_”rÜ
) < 0){

1217 
be¡_”rÜ
ğ
”rÜ
;

1218 
be¡
ğ
p
;

1221 
c
->
time_ba£
.
d’
ğ
be¡
->
num
;

1222 
c
->
time_ba£
.
num
ğ
be¡
->
d’
;

1225 
c
->
äame_¿‹
 = frame_rate;

1226 
c
->
äame_¿‹_ba£
 = frame_rate_base;

1229 
c
->
gİ_size
 = 12;

1230 
c
->
pix_fmt
 = (
Pix–FÜm©
è
pix–_fÜm©
;

1232 ià(
c
->
codec_id
 =ğ
	`CV_CODEC
(
CODEC_ID_MPEG2VIDEO
)) {

1233 
c
->
max_b_äames
 = 2;

1235 ià(
c
->
codec_id
 =ğ
	`CV_CODEC
(
CODEC_ID_MPEG1VIDEO
è|| c->codec_id =ğCV_CODEC(
CODEC_ID_MSMPEG4V3
)){

1240 
c
->
mb_decisiÚ
=2;

1243 #ià
LIBAVUTIL_BUILD
 > 
	`CALC_FFMPEG_VERSION
(51,11,0)

1248 ià(
c
->
codec_id
 =ğ
AV_CODEC_ID_H264
) {

1249 
c
->
gİ_size
 = -1;

1250 
c
->
qmš
 = -1;

1251 
c
->
b™_¿‹
 = 0;

1252 
	`av_İt_£t
(
c
->
´iv_d©a
,"crf","23", 0);

1256 #ià
LIBAVCODEC_VERSION_INT
>0x000409

1258 if(
oc
->
ofÜm©
->
æags
 & 
AVFMT_GLOBALHEADER
)

1260 
c
->
æags
 |ğ
CODEC_FLAG_GLOBAL_HEADER
;

1264  
¡
;

1265 
	}
}

1267 cÚ¡ 
OPENCV_NO_FRAMES_WRITTEN_CODE
 = 1000;

1269 
icv_av_wr™e_äame_FFMPEG
Ğ
AVFÜm©CÚ‹xt
 * 
oc
, 
AVSŒ—m
 * 
video_¡
,

1270 #ià
LIBAVCODEC_BUILD
 >ğ
	$CALC_FFMPEG_VERSION
(54, 1, 0)

1271 
ušt8_t
 *, 
ušt32_t
,

1273 
ušt8_t
 * 
outbuf
, 
ušt32_t
 
outbuf_size
,

1275 
AVF¿me
 * 
piùu»
 )

1277 #ià
LIBAVFORMAT_BUILD
 > 4628

1278 
AVCodecCÚ‹xt
 * 
c
 = 
video_¡
->
codec
;

1280 
AVCodecCÚ‹xt
 * 
c
 = &(
video_¡
->
codec
);

1282 
»t
 = 
OPENCV_NO_FRAMES_WRITTEN_CODE
;

1284 ià(
oc
->
ofÜm©
->
æags
 & 
AVFMT_RAWPICTURE
) {

1287 
AVPack‘
 
pkt
;

1288 
	`av_š™_·ck‘
(&
pkt
);

1290 #iâdeà
PKT_FLAG_KEY


1291 
	#PKT_FLAG_KEY
 
AV_PKT_FLAG_KEY


	)

1294 
pkt
.
æags
 |ğ
PKT_FLAG_KEY
;

1295 
pkt
.
¡»am_šdex
ğ
video_¡
->
šdex
;

1296 
pkt
.
d©a
ğ(
ušt8_t
 *)
piùu»
;

1297 
pkt
.
size
ğ(
AVPiùu»
);

1299 
»t
 = 
	`av_wr™e_äame
(
oc
, &
pkt
);

1302 
AVPack‘
 
pkt
;

1303 
	`av_š™_·ck‘
(&
pkt
);

1304 #ià
LIBAVCODEC_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(54, 1, 0)

1305 
gÙ_ouut
 = 0;

1306 
pkt
.
d©a
 = 
NULL
;

1307 
pkt
.
size
 = 0;

1308 
»t
 = 
	`avcodec_’code_video2
(
c
, &
pkt
, 
piùu»
, &
gÙ_ouut
);

1309 ià(
»t
 < 0)

1311 ià(
gÙ_ouut
) {

1312 ià(
pkt
.
±s
 !ğ(
št64_t
)
AV_NOPTS_VALUE
)

1313 
pkt
.
±s
 = 
	`av_»sÿË_q
Õkt.±s, 
c
->
time_ba£
, 
video_¡
->time_base);

1314 ià(
pkt
.
dts
 !ğ(
št64_t
)
AV_NOPTS_VALUE
)

1315 
pkt
.
dts
 = 
	`av_»sÿË_q
Õkt.dts, 
c
->
time_ba£
, 
video_¡
->time_base);

1316 ià(
pkt
.
du¿tiÚ
)

1317 
pkt
.
du¿tiÚ
 = 
	`av_»sÿË_q
Õkt.du¿tiÚ, 
c
->
time_ba£
, 
video_¡
->time_base);

1318 
pkt
.
¡»am_šdex
ğ
video_¡
->
šdex
;

1319 
»t
 = 
	`av_wr™e_äame
(
oc
, &
pkt
);

1320 
	`av_ä“_·ck‘
(&
pkt
);

1323 
»t
 = 
OPENCV_NO_FRAMES_WRITTEN_CODE
;

1325 
out_size
 = 
	`avcodec_’code_video
(
c
, 
outbuf
, 
outbuf_size
, 
piùu»
);

1327 ià(
out_size
 > 0) {

1328 #ià
LIBAVFORMAT_BUILD
 > 4752

1329 if(
c
->
coded_äame
->
±s
 !ğ(
št64_t
)
AV_NOPTS_VALUE
)

1330 
pkt
.
±s
 = 
	`av_»sÿË_q
(
c
->
coded_äame
->±s, c->
time_ba£
, 
video_¡
->time_base);

1332 
pkt
.
±s
 = 
c
->
coded_äame
->pts;

1334 if(
c
->
coded_äame
->
key_äame
)

1335 
pkt
.
æags
 |ğ
PKT_FLAG_KEY
;

1336 
pkt
.
¡»am_šdex
ğ
video_¡
->
šdex
;

1337 
pkt
.
d©a
ğ
outbuf
;

1338 
pkt
.
size
ğ
out_size
;

1341 
»t
 = 
	`av_wr™e_äame
(
oc
, &
pkt
);

1345  
»t
;

1346 
	}
}

1349 
boŞ
 
	gCvVideoWr™”_FFMPEG
::
	$wr™eF¿me
ĞcÚ¡ * 
d©a
, 
¡•
, 
width
, 
height
, 
ú
, 
Üigš
 )

1351 
boŞ
 
»t
 = 
çl£
;

1353 ifĞ(
width
 & -2è!ğ
äame_width
 || (
height
 & -2è!ğ
äame_height
 || !
d©a
 )

1354  
çl£
;

1355 
width
 = 
äame_width
;

1356 
height
 = 
äame_height
;

1359 #ià
LIBAVFORMAT_BUILD
 > 4628

1360 
AVCodecCÚ‹xt
 *
c
 = 
video_¡
->
codec
;

1362 
AVCodecCÚ‹xt
 *
c
 = &(
video_¡
->
codec
);

1365 #ià
LIBAVFORMAT_BUILD
 < 5231

1367 ifĞ
c
->
codec_id
 =ğ
	`CV_CODEC
(
CODEC_ID_RAWVIDEO
è&& 
Üigš
 != 1 )

1369 ifĞ!
‹mp_image
.
d©a
 )

1371 
‹mp_image
.
¡•
 = (
width
*
ú
 + 3) & -4;

1372 
‹mp_image
.
width
 = width;

1373 
‹mp_image
.
height
 = height;

1374 
‹mp_image
.
ú
 = cn;

1375 
‹mp_image
.
d©a
 = (*)
	`m®loc
Ñemp_image.
¡•
*‹mp_image.
height
);

1377  
y
 = 0; y < 
height
; y++ )

1378 
	`memıy
(
‹mp_image
.
d©a
 + 
y
*‹mp_image.
¡•
, d©¨+ (
height
-1-y)*¡•, 
width
*
ú
);

1379 
d©a
 = 
‹mp_image
.data;

1380 
¡•
 = 
‹mp_image
.step;

1383 ifĞ
width
*
ú
 !ğ
¡•
 )

1385 ifĞ!
‹mp_image
.
d©a
 )

1387 
‹mp_image
.
¡•
 = 
width
*
ú
;

1388 
‹mp_image
.
width
 = width;

1389 
‹mp_image
.
height
 = height;

1390 
‹mp_image
.
ú
 = cn;

1391 
‹mp_image
.
d©a
 = (*)
	`m®loc
Ñemp_image.
¡•
*‹mp_image.
height
);

1393 ià(
Üigš
 == 1)

1394  
y
 = 0; y < 
height
; y++ )

1395 
	`memıy
(
‹mp_image
.
d©a
 + 
y
*‹mp_image.
¡•
, d©¨+ (
height
-1-y)*step,emp_image.step);

1397  
y
 = 0; y < 
height
; y++ )

1398 
	`memıy
(
‹mp_image
.
d©a
 + 
y
*‹mp_image.
¡•
, data + y*step,emp_image.step);

1399 
d©a
 = 
‹mp_image
.data;

1400 
¡•
 = 
‹mp_image
.step;

1405 ià(
šput_pix_fmt
 =ğ
PIX_FMT_BGR24
) {

1406 ià(
ú
 != 3) {

1407  
çl£
;

1410 ià(
šput_pix_fmt
 =ğ
PIX_FMT_GRAY8
) {

1411 ià(
ú
 != 1) {

1412  
çl£
;

1416 
	`as£¹
(
çl£
);

1419 iàĞ
c
->
pix_fmt
 !ğ
šput_pix_fmt
 ) {

1420 
	`as£¹
Ğ
šput_piùu»
 );

1422 
	`avpiùu»_fl
((
AVPiùu»
 *)
šput_piùu»
, (
ušt8_t
 *è
d©a
,

1423 (
Pix–FÜm©
)
šput_pix_fmt
, 
width
, 
height
);

1425 ifĞ!
img_cÚv”t_ùx
 )

1427 
img_cÚv”t_ùx
 = 
	`sws_g‘CÚ‹xt
(
width
,

1428 
height
,

1429 (
Pix–FÜm©
)
šput_pix_fmt
,

1430 
c
->
width
,

1431 
c
->
height
,

1432 
c
->
pix_fmt
,

1433 
SWS_BICUBIC
,

1434 
NULL
, NULL, NULL);

1435 ifĞ!
img_cÚv”t_ùx
 )

1436  
çl£
;

1439 iàĞ
	`sws_sÿË
(
img_cÚv”t_ùx
, 
šput_piùu»
->
d©a
,

1440 
šput_piùu»
->
lšesize
, 0,

1441 
height
,

1442 
piùu»
->
d©a
,…iùu»->
lšesize
) < 0 )

1443  
çl£
;

1446 
	`avpiùu»_fl
((
AVPiùu»
 *)
piùu»
, (
ušt8_t
 *è
d©a
,

1447 (
Pix–FÜm©
)
šput_pix_fmt
, 
width
, 
height
);

1450 
piùu»
->
±s
 = 
äame_idx
;

1451 
»t
 = 
	`icv_av_wr™e_äame_FFMPEG
Ğ
oc
, 
video_¡
, 
outbuf
, 
outbuf_size
, 
piùu»
) >= 0;

1452 
äame_idx
++;

1454  
»t
;

1455 
	}
}

1458 
	gCvVideoWr™”_FFMPEG
::
	$şo£
()

1461 iàĞ!
piùu»
 )

1470 if(
ok
 && 
oc
)

1472 ifĞ(
oc
->
ofÜm©
->
æags
 & 
AVFMT_RAWPICTURE
) == 0 )

1476 
»t
 = 
	`icv_av_wr™e_äame_FFMPEG
Ğ
oc
, 
video_¡
, 
outbuf
, 
outbuf_size
, 
NULL
);

1477 ifĞ
»t
 =ğ
OPENCV_NO_FRAMES_WRITTEN_CODE
 ||„et < 0 )

1481 
	`av_wr™e_Œa”
(
oc
);

1484 ifĞ
img_cÚv”t_ùx
 )

1486 
	`sws_ä“CÚ‹xt
(
img_cÚv”t_ùx
);

1487 
img_cÚv”t_ùx
 = 0;

1491 #ià
LIBAVFORMAT_BUILD
 > 4628

1492 ifĞ
video_¡
->
codec
->
pix_fmt
 !ğ
šput_pix_fmt
)

1494 ifĞ
video_¡
->
codec
.
pix_fmt
 !ğ
šput_pix_fmt
)

1497 if(
piùu»
->
d©a
[0])

1498 
	`ä“
(
piùu»
->
d©a
[0]);

1499 
piùu»
->
d©a
[0] = 0;

1501 
	`av_ä“
(
piùu»
);

1503 ià(
šput_piùu»
)

1504 
	`av_ä“
(
šput_piùu»
);

1507 #ià
LIBAVFORMAT_BUILD
 > 4628

1508 
	`avcodec_şo£
(
video_¡
->
codec
);

1510 
	`avcodec_şo£
(&(
video_¡
->
codec
));

1513 
	`av_ä“
(
outbuf
);

1515 ià(!(
fmt
->
æags
 & 
AVFMT_NOFILE
))

1519 #ià
LIBAVCODEC_VERSION_INT
 < ((52<<16)+(123<<8)+0)

1520 #ià
LIBAVCODEC_VERSION_INT
 >= ((51<<16)+(49<<8)+0)

1521 
	`u¾_fşo£
(
oc
->
pb
);

1523 
	`u¾_fşo£
(&
oc
->
pb
);

1526 
	`avio_şo£
(
oc
->
pb
);

1532 
	`avfÜm©_ä“_cÚ‹xt
(
oc
);

1534 ifĞ
‹mp_image
.
d©a
 )

1536 
	`ä“
(
‹mp_image
.
d©a
);

1537 
‹mp_image
.
d©a
 = 0;

1540 
	`š™
();

1541 
	}
}

1543 
	#CV_PRINTABLE_CHAR
(
ch
è((chè< 32 ? '?' : (ch))

	)

1544 
	#CV_TAG_TO_PRINTABLE_CHAR4
(
g
è
	`CV_PRINTABLE_CHAR
(Ñagè& 255), CV_PRINTABLE_CHAR((Ñagè>> 8è& 255), CV_PRINTABLE_CHAR((Ñagè>> 16è& 255), CV_PRINTABLE_CHAR((Ñagè>> 24è& 255)

	)

1546 
šlše
 
boŞ
 
	$cv_ff_codec_g_m©ch
(cÚ¡ 
AVCodecTag
 *
gs
, 
AVCodecID
 
id
, 
g
)

1548 
gs
->
id
 !ğ
AV_CODEC_ID_NONE
)

1550 ià(
gs
->
id
 =ğid &&ags->
g
 ==ag)

1551  
Œue
;

1552 
gs
++;

1554  
çl£
;

1555 
	}
}

1556 
šlše
 
boŞ
 
	$cv_ff_codec_g_li¡_m©ch
(cÚ¡ 
AVCodecTag
 *cÚ¡ *
gs
, 
AVCodecID
 
id
, 
g
)

1558 
i
;

1559 
i
 = 0; 
gs
 &&ags[i]; i++) {

1560 
boŞ
 
»s
 = 
	`cv_ff_codec_g_m©ch
(
gs
[
i
], 
id
, 
g
);

1561 ià(
»s
)

1562  
»s
;

1564  
çl£
;

1565 
	}
}

1568 
boŞ
 
	gCvVideoWr™”_FFMPEG
::
	$İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1569 
ås
, 
width
, 
height
, 
boŞ
 
is_cŞÜ
 )

1571 
CV_CODEC_ID
 
codec_id
 = 
	`CV_CODEC
(
CODEC_ID_NONE
);

1572 
”r
, 
codec_pix_fmt
;

1573 
b™¿‹_sÿË
 = 1;

1575 
	`şo£
();

1578 ifĞ!
f’ame
 )

1579  
çl£
;

1580 if(
ås
 <= 0)

1581  
çl£
;

1586 
width
 &= -2;

1587 
height
 &= -2;

1588 ifĞ
width
 <ğ0 || 
height
 <= 0 )

1589  
çl£
;

1593 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

1594 
fmt
 = 
	`av_guess_fÜm©
(
NULL
, 
f’ame
, NULL);

1596 
fmt
 = 
	`guess_fÜm©
(
NULL
, 
f’ame
, NULL);

1599 ià(!
fmt
)

1600  
çl£
;

1603 ià(
is_cŞÜ
) {

1604 
šput_pix_fmt
 = 
PIX_FMT_BGR24
;

1607 
šput_pix_fmt
 = 
PIX_FMT_GRAY8
;

1611 #ià
LIBAVCODEC_VERSION_INT
<((51<<16)+(49<<8)+0)

1612 ifĞ(
codec_id
 = 
	`codec_g‘_bmp_id
Ğ
fourcc
 )è=ğ
	`CV_CODEC
(
CODEC_ID_NONE
) )

1613  
çl£
;

1614 #–ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(54, 1, 0)

1618 ifĞ(
codec_id
 = 
	`av_codec_g‘_id
(
fmt
->
codec_g
, 
fourcc
)è=ğ
	`CV_CODEC
(
CODEC_ID_NONE
) )

1620 cÚ¡ 
AVCodecTag
 * 
çÎback_gs
[] = {

1621 
	`avfÜm©_g‘_riff_video_gs
(),

1622 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(55, 25, 100)

1628 
codec_bmp_gs
, 
NULL
 };

1629 ifĞ(
codec_id
 = 
	`av_codec_g‘_id
(
çÎback_gs
, 
fourcc
)è=ğ
	`CV_CODEC
(
CODEC_ID_NONE
) )

1631 
	`fæush
(
¡dout
);

1632 
	`årštf
(
¡d”r
, "OpenCV: FFMPEG:ag 0x%08x/'%c%c%c%c' is‚ot found (format '%s / %s')'\n",

1633 
fourcc
, 
	`CV_TAG_TO_PRINTABLE_CHAR4
(fourcc),

1634 
fmt
->
Çme
, fmt->
lÚg_Çme
);

1635  
çl£
;

1639 ià(
	`cv_ff_codec_g_li¡_m©ch
(
fmt
->
codec_g
, 
codec_id
, 
fourcc
è=ğ
çl£
)

1641 
	`fæush
(
¡dout
);

1642 
	`årštf
(
¡d”r
, "OpenCV: FFMPEG:ag 0x%08x/'%c%c%c%c' is‚ot supported with codec id %d‡nd format '%s / %s'\n",

1643 
fourcc
, 
	`CV_TAG_TO_PRINTABLE_CHAR4
(fourcc),

1644 
codec_id
, 
fmt
->
Çme
, fmt->
lÚg_Çme
);

1645 
suµÜ‹d_g
;

1646 ifĞ(
suµÜ‹d_g
 = 
	`av_codec_g‘_g
(
fmt
->
codec_g
, 
codec_id
)) != 0 )

1648 
	`årštf
(
¡d”r
, "OpenCV: FFMPEG: fallbacko useag 0x%08x/'%c%c%c%c'\n",

1649 
suµÜ‹d_g
, 
	`CV_TAG_TO_PRINTABLE_CHAR4
(supported_tag));

1650 
fourcc
 = 
suµÜ‹d_g
;

1654 cÚ¡ 
AVCodecTag
 * 
gs
[] = { 
codec_bmp_gs
, 
NULL
};

1655 ifĞ(
codec_id
 = 
	`av_codec_g‘_id
(
gs
, 
fourcc
)è=ğ
	`CV_CODEC
(
CODEC_ID_NONE
) )

1656  
çl£
;

1660 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

1661 
oc
 = 
	`avfÜm©_®loc_cÚ‹xt
();

1663 
oc
 = 
	`av_®loc_fÜm©_cÚ‹xt
();

1665 
	`as£¹
 (
oc
);

1668 
oc
->
ofÜm©
 = 
fmt
;

1669 
	`¢´štf
(
oc
->
f’ame
, (oc->filename), "%s", filename);

1672 
oc
->
max_d–ay
 = ()(0.7*
AV_TIME_BASE
);

1675 
codec_id
) {

1676 #ià
LIBAVCODEC_VERSION_INT
>((50<<16)+(1<<8)+0)

1677 
	`CV_CODEC
(
CODEC_ID_JPEGLS
):

1679 
codec_pix_fmt
 = 
šput_pix_fmt
;

1682 
	`CV_CODEC
(
CODEC_ID_HUFFYUV
):

1683 
codec_pix_fmt
 = 
PIX_FMT_YUV422P
;

1685 
	`CV_CODEC
(
CODEC_ID_MJPEG
):

1686 
	`CV_CODEC
(
CODEC_ID_LJPEG
):

1687 
codec_pix_fmt
 = 
PIX_FMT_YUVJ420P
;

1688 
b™¿‹_sÿË
 = 3;

1690 
	`CV_CODEC
(
CODEC_ID_RAWVIDEO
):

1691 
codec_pix_fmt
 = 
šput_pix_fmt
 =ğ
PIX_FMT_GRAY8
 ||

1692 
šput_pix_fmt
 =ğ
PIX_FMT_GRAY16LE
 ||

1693 
šput_pix_fmt
 =ğ
PIX_FMT_GRAY16BE
 ? iÅut_pix_fmˆ: 
PIX_FMT_YUV420P
;

1697 
codec_pix_fmt
 = 
PIX_FMT_YUV420P
;

1701 
b™¿‹
 = 
	`MIN
(
b™¿‹_sÿË
*
ås
*
width
*
height
, ()
INT_MAX
/2);

1704 
video_¡
 = 
	`icv_add_video_¡»am_FFMPEG
(
oc
, 
codec_id
,

1705 
width
, 
height
, ()(
b™¿‹
 + 0.5),

1706 
ås
, 
codec_pix_fmt
);

1710 #ià
LIBAVFORMAT_BUILD
 < 
	`CALC_FFMPEG_VERSION
(53, 2, 0)

1711 ià(
	`av_£t_·¿m‘”s
(
oc
, 
NULL
) < 0) {

1712  
çl£
;

1717 #ià
FF_API_DUMP_FORMAT


1718 
	`dump_fÜm©
(
oc
, 0, 
f’ame
, 1);

1720 
	`av_dump_fÜm©
(
oc
, 0, 
f’ame
, 1);

1726 ià(!
video_¡
){

1727  
çl£
;

1730 
AVCodec
 *
codec
;

1731 
AVCodecCÚ‹xt
 *
c
;

1733 #ià
LIBAVFORMAT_BUILD
 > 4628

1734 
c
 = (
video_¡
->
codec
);

1736 
c
 = &(
video_¡
->
codec
);

1739 
c
->
codec_g
 = 
fourcc
;

1741 
codec
 = 
	`avcodec_fšd_’cod”
(
c
->
codec_id
);

1742 ià(!
codec
) {

1743 
	`årštf
(
¡d”r
, "Could‚Ù fšdƒncod” fÜ codeøid %d: %s", 
c
->
codec_id
, 
	`icvFFMPEGE¼SŒ
(

1744 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

1745 
AVERROR_ENCODER_NOT_FOUND


1750  
çl£
;

1753 
št64_t
 
lb™_¿‹
 = (št64_t)
c
->
b™_¿‹
;

1754 
lb™_¿‹
 +ğ(
b™¿‹
 / 2);

1755 
lb™_¿‹
 = 
¡d
::
	`mš
Öb™_¿‹, (
št64_t
)
INT_MAX
);

1756 
c
->
b™_¿‹_tŞ”ªû
 = ()
lb™_¿‹
;

1757 
c
->
b™_¿‹
 = ()
lb™_¿‹
;

1760 ià((
”r
=

1761 #ià
LIBAVCODEC_VERSION_INT
 >= ((53<<16)+(8<<8)+0)

1762 
	`avcodec_İ’2
(
c
, 
codec
, 
NULL
)

1764 
	`avcodec_İ’
(
c
, 
codec
)

1767 
	`årštf
(
¡d”r
, "Could‚Ù o³Àcodeø'%s': %s", 
codec
->
Çme
, 
	`icvFFMPEGE¼SŒ
(
”r
));

1768  
çl£
;

1771 
outbuf
 = 
NULL
;

1773 ià(!(
oc
->
ofÜm©
->
æags
 & 
AVFMT_RAWPICTURE
)) {

1776 
outbuf_size
 = 
width
*
height
*4;

1777 
outbuf
 = (
ušt8_t
 *è
	`av_m®loc
(
outbuf_size
);

1780 
boŞ
 
Ãed_cŞÜ_cÚv”t
;

1781 
Ãed_cŞÜ_cÚv”t
 = (
c
->
pix_fmt
 !ğ
šput_pix_fmt
);

1784 
piùu»
 = 
	`icv_®loc_piùu»_FFMPEG
(
c
->
pix_fmt
, c->
width
, c->
height
, 
Ãed_cŞÜ_cÚv”t
);

1785 ià(!
piùu»
) {

1786  
çl£
;

1792 
šput_piùu»
 = 
NULL
;

1793 iàĞ
Ãed_cŞÜ_cÚv”t
 ) {

1794 
šput_piùu»
 = 
	`icv_®loc_piùu»_FFMPEG
(
šput_pix_fmt
, 
c
->
width
, c->
height
, 
çl£
);

1795 ià(!
šput_piùu»
) {

1796  
çl£
;

1801 ià(!(
fmt
->
æags
 & 
AVFMT_NOFILE
)) {

1802 #ià
LIBAVFORMAT_BUILD
 < 
	`CALC_FFMPEG_VERSION
(53, 2, 0)

1803 ià(
	`u¾_fİ’
(&
oc
->
pb
, 
f’ame
, 
URL_WRONLY
) < 0)

1805 ià(
	`avio_İ’
(&
oc
->
pb
, 
f’ame
, 
AVIO_FLAG_WRITE
) < 0)

1808  
çl£
;

1812 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(52, 111, 0)

1814 
”r
=
	`avfÜm©_wr™e_h—d”
(
oc
, 
NULL
);

1816 
”r
=
	`av_wr™e_h—d”
Ğ
oc
 );

1819 if(
”r
 < 0)

1821 
	`şo£
();

1822 
	`»move
(
f’ame
);

1823  
çl£
;

1825 
äame_width
 = 
width
;

1826 
äame_height
 = 
height
;

1827 
äame_idx
 = 0;

1828 
ok
 = 
Œue
;

1830  
Œue
;

1831 
	}
}

1835 
CvC­tu»_FFMPEG
* 
	$cvC»©eFeC­tu»_FFMPEG
ĞcÚ¡ * 
f’ame
 )

1837 
CvC­tu»_FFMPEG
* 
ÿ±u»
 = (CvC­tu»_FFMPEG*)
	`m®loc
((*capture));

1838 
ÿ±u»
->
	`š™
();

1839 ifĞ
ÿ±u»
->
	`İ’
Ğ
f’ame
 ))

1840  
ÿ±u»
;

1842 
ÿ±u»
->
	`şo£
();

1843 
	`ä“
(
ÿ±u»
);

1845 
	}
}

1848 
	$cvR–—£C­tu»_FFMPEG
(
CvC­tu»_FFMPEG
** 
ÿ±u»
)

1850 ifĞ
ÿ±u»
 && *capture )

1852 (*
ÿ±u»
)->
	`şo£
();

1853 
	`ä“
(*
ÿ±u»
);

1854 *
ÿ±u»
 = 0;

1856 
	}
}

1858 
	$cvS‘C­tu»Prİ”ty_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿ±u»
, 
´İ_id
, 
v®ue
)

1860  
ÿ±u»
->
	`£tPrİ”ty
(
´İ_id
, 
v®ue
);

1861 
	}
}

1863 
	$cvG‘C­tu»Prİ”ty_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿ±u»
, 
´İ_id
)

1865  
ÿ±u»
->
	`g‘Prİ”ty
(
´İ_id
);

1866 
	}
}

1868 
	$cvG¿bF¿me_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿ±u»
)

1870  
ÿ±u»
->
	`g¿bF¿me
();

1871 
	}
}

1873 
	$cvR‘r›veF¿me_FFMPEG
(
CvC­tu»_FFMPEG
* 
ÿ±u»
, ** 
d©a
, * 
¡•
, * 
width
, * 
height
, * 
ú
)

1875  
ÿ±u»
->
	`»Œ›veF¿me
(0, 
d©a
, 
¡•
, 
width
, 
height
, 
ú
);

1876 
	}
}

1878 
CvVideoWr™”_FFMPEG
* 
	$cvC»©eVideoWr™”_FFMPEG
ĞcÚ¡ * 
f’ame
, 
fourcc
, 
ås
,

1879 
width
, 
height
, 
isCŞÜ
 )

1881 
CvVideoWr™”_FFMPEG
* 
wr™”
 = (CvVideoWr™”_FFMPEG*)
	`m®loc
((*writer));

1882 
wr™”
->
	`š™
();

1883 ifĞ
wr™”
->
	`İ’
Ğ
f’ame
, 
fourcc
, 
ås
, 
width
, 
height
, 
isCŞÜ
 != 0 ))

1884  
wr™”
;

1885 
wr™”
->
	`şo£
();

1886 
	`ä“
(
wr™”
);

1888 
	}
}

1890 
	$cvR–—£VideoWr™”_FFMPEG
Ğ
CvVideoWr™”_FFMPEG
** 
wr™”
 )

1892 ifĞ
wr™”
 && *writer )

1894 (*
wr™”
)->
	`şo£
();

1895 
	`ä“
(*
wr™”
);

1896 *
wr™”
 = 0;

1898 
	}
}

1901 
	$cvWr™eF¿me_FFMPEG
Ğ
CvVideoWr™”_FFMPEG
* 
wr™”
,

1902 cÚ¡ * 
d©a
, 
¡•
,

1903 
width
, 
height
, 
ú
, 
Üigš
)

1905  
wr™”
->
	`wr™eF¿me
(
d©a
, 
¡•
, 
width
, 
height
, 
ú
, 
Üigš
);

1906 
	}
}

1914 
	sOuutMedŸSŒ—m_FFMPEG


1916 
boŞ
 
İ’
(cÚ¡ * 
feName
, 
width
, 
height
, 
ås
);

1917 
şo£
();

1919 
wr™e
(* 
d©a
, 
size
, 
keyF¿me
);

1922 
AVSŒ—m
* 
addVideoSŒ—m
(
AVFÜm©CÚ‹xt
 *
oc
, 
CV_CODEC_ID
 
codec_id
, 
w
, 
h
, 
b™¿‹
, 
ås
, 
Pix–FÜm©
 
pix–_fÜm©
);

1924 
AVOuutFÜm©
* 
	gfmt_
;

1925 
AVFÜm©CÚ‹xt
* 
	goc_
;

1926 
AVSŒ—m
* 
	gvideo_¡_
;

1929 
	gOuutMedŸSŒ—m_FFMPEG
::
	$şo£
()

1937 ià(
oc_
)

1940 
	`av_wr™e_Œa”
(
oc_
);

1943 
i
 = 0; i < 
oc_
->
nb_¡»ams
; ++i)

1945 
	`av_ä“p
(&
oc_
->
¡»ams
[
i
]->
codec
);

1946 
	`av_ä“p
(&
oc_
->
¡»ams
[
i
]);

1949 ià(!(
fmt_
->
æags
 & 
AVFMT_NOFILE
è&& 
oc_
->
pb
)

1953 #ià
LIBAVCODEC_VERSION_INT
 < ((52<<16)+(123<<8)+0)

1954 #ià
LIBAVCODEC_VERSION_INT
 >= ((51<<16)+(49<<8)+0)

1955 
	`u¾_fşo£
(
oc_
->
pb
);

1957 
	`u¾_fşo£
(&
oc_
->
pb
);

1960 
	`avio_şo£
(
oc_
->
pb
);

1965 
	`av_ä“
(
oc_
);

1967 
	}
}

1969 
AVSŒ—m
* 
	gOuutMedŸSŒ—m_FFMPEG
::
	$addVideoSŒ—m
(
AVFÜm©CÚ‹xt
 *
oc
, 
CV_CODEC_ID
 
codec_id
, 
w
, 
h
, 
b™¿‹
, 
ås
, 
Pix–FÜm©
 
pix–_fÜm©
)

1971 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 10, 0)

1972 
AVSŒ—m
* 
¡
 = 
	`avfÜm©_Ãw_¡»am
(
oc
, 0);

1974 
AVSŒ—m
* 
¡
 = 
	`av_Ãw_¡»am
(
oc
, 0);

1976 ià(!
¡
)

1979 #ià
LIBAVFORMAT_BUILD
 > 4628

1980 
AVCodecCÚ‹xt
* 
c
 = 
¡
->
codec
;

1982 
AVCodecCÚ‹xt
* 
c
 = &(
¡
->
codec
);

1985 
c
->
codec_id
 = codec_id;

1986 
c
->
codec_ty³
 = 
AVMEDIA_TYPE_VIDEO
;

1989 
lb™_¿‹
 = 
¡©ic_ÿ¡
<>(
b™¿‹
);

1990 
lb™_¿‹
 +ğ(
b™¿‹
 / 4);

1991 
lb™_¿‹
 = 
¡d
::
	`mš
Öb™_¿‹, 
¡©ic_ÿ¡
<>(¡d::
num”ic_lim™s
<>::
	`max
()));

1992 
c
->
b™_¿‹
 = 
b™¿‹
;

1996 
c
->
qmš
 = 3;

1999 
c
->
width
 = 
w
;

2000 
c
->
height
 = 
h
;

2002 
AVCodec
* 
codec
 = 
	`avcodec_fšd_’cod”
(
c
->
codec_id
);

2009 
äame_¿‹
 = 
¡©ic_ÿ¡
<>(
ås
+0.5);

2010 
äame_¿‹_ba£
 = 1;

2011 
	`çbs
(
¡©ic_ÿ¡
<>(
äame_¿‹
)/
äame_¿‹_ba£
è- 
ås
 > 0.001)

2013 
äame_¿‹_ba£
 *= 10;

2014 
äame_¿‹
 = 
¡©ic_ÿ¡
<>(
ås
*
äame_¿‹_ba£
 + 0.5);

2016 
c
->
time_ba£
.
d’
 = 
äame_¿‹
;

2017 
c
->
time_ba£
.
num
 = 
äame_¿‹_ba£
;

2019 #ià
LIBAVFORMAT_BUILD
 > 4752

2021 ià(
codec
 && codec->
suµÜ‹d_äam”©es
)

2023 
AVR©iÚ®
 
»q
 = {
äame_¿‹
, 
äame_¿‹_ba£
};

2024 cÚ¡ 
AVR©iÚ®
* 
be¡
 = 
NULL
;

2025 
AVR©iÚ®
 
be¡_”rÜ
 = {
INT_MAX
, 1};

2027 cÚ¡ 
AVR©iÚ®
* 
p
 = 
codec
->
suµÜ‹d_äam”©es
;…->
d’
!=0; ++p)

2029 
AVR©iÚ®
 
”rÜ
 = 
	`av_sub_q
(
»q
, *
p
);

2031 ià(
”rÜ
.
num
 < 0)

2032 
”rÜ
.
num
 *= -1;

2034 ià(
	`av_cmp_q
(
”rÜ
, 
be¡_”rÜ
) < 0)

2036 
be¡_”rÜ
ğ
”rÜ
;

2037 
be¡
ğ
p
;

2041 
c
->
time_ba£
.
d’
ğ
be¡
->
num
;

2042 
c
->
time_ba£
.
num
ğ
be¡
->
d’
;

2046 
c
->
gİ_size
 = 12;

2047 
c
->
pix_fmt
 = 
pix–_fÜm©
;

2049 ià(
c
->
codec_id
 =ğ
	`CV_CODEC
(
CODEC_ID_MPEG2VIDEO
))

2050 
c
->
max_b_äames
 = 2;

2052 ià(
c
->
codec_id
 =ğ
	`CV_CODEC
(
CODEC_ID_MPEG1VIDEO
è|| c->codec_id =ğCV_CODEC(
CODEC_ID_MSMPEG4V3
))

2060 
c
->
mb_decisiÚ
 = 2;

2063 #ià
LIBAVCODEC_VERSION_INT
 > 0x000409

2065 ià(
oc
->
ofÜm©
->
æags
 & 
AVFMT_GLOBALHEADER
)

2067 
c
->
æags
 |ğ
CODEC_FLAG_GLOBAL_HEADER
;

2071  
¡
;

2072 
	}
}

2074 
boŞ
 
	gOuutMedŸSŒ—m_FFMPEG
::
	$İ’
(cÚ¡ * 
feName
, 
width
, 
height
, 
ås
)

2076 
fmt_
 = 0;

2077 
oc_
 = 0;

2078 
video_¡_
 = 0;

2081 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

2082 
fmt_
 = 
	`av_guess_fÜm©
(
NULL
, 
feName
, NULL);

2084 
fmt_
 = 
	`guess_fÜm©
(
NULL
, 
feName
, NULL);

2086 ià(!
fmt_
)

2087  
çl£
;

2089 
CV_CODEC_ID
 
codec_id
 = 
	`CV_CODEC
(
CODEC_ID_H264
);

2092 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 2, 0)

2093 
oc_
 = 
	`avfÜm©_®loc_cÚ‹xt
();

2095 
oc_
 = 
	`av_®loc_fÜm©_cÚ‹xt
();

2097 ià(!
oc_
)

2098  
çl£
;

2101 
oc_
->
ofÜm©
 = 
fmt_
;

2102 
	`¢´štf
(
oc_
->
f’ame
, (oc_->f’ame), "%s", 
feName
);

2104 
oc_
->
max_d–ay
 = ()(0.7 * 
AV_TIME_BASE
);

2107 
Pix–FÜm©
 
codec_pix_fmt
 = 
PIX_FMT_YUV420P
;

2108 
b™¿‹_sÿË
 = 64;

2111 
video_¡_
 = 
	`addVideoSŒ—m
(
oc_
, 
codec_id
, 
width
, 
height
, width * heighˆ* 
b™¿‹_sÿË
, 
ås
, 
codec_pix_fmt
);

2112 ià(!
video_¡_
)

2113  
çl£
;

2116 #ià
LIBAVFORMAT_BUILD
 < 
	`CALC_FFMPEG_VERSION
(53, 2, 0)

2117 ià(
	`av_£t_·¿m‘”s
(
oc_
, 
NULL
) < 0)

2118  
çl£
;

2124 #ià
LIBAVFORMAT_BUILD
 > 4628

2125 
AVCodecCÚ‹xt
* 
c
 = (
video_¡_
->
codec
);

2127 
AVCodecCÚ‹xt
* 
c
 = &(
video_¡_
->
codec
);

2130 
c
->
codec_g
 = 
	`MKTAG
('H', '2', '6', '4');

2131 
c
->
b™_¿‹_tŞ”ªû
 = c->
b™_¿‹
;

2134 ià(!(
fmt_
->
æags
 & 
AVFMT_NOFILE
))

2136 #ià
LIBAVFORMAT_BUILD
 < 
	`CALC_FFMPEG_VERSION
(53, 2, 0)

2137 
”r
 = 
	`u¾_fİ’
(&
oc_
->
pb
, 
feName
, 
URL_WRONLY
);

2139 
”r
 = 
	`avio_İ’
(&
oc_
->
pb
, 
feName
, 
AVIO_FLAG_WRITE
);

2142 ià(
”r
 != 0)

2143  
çl£
;

2147 #ià
LIBAVFORMAT_BUILD
 < 
	`CALC_FFMPEG_VERSION
(53, 2, 0)

2148 
	`av_wr™e_h—d”
(
oc_
);

2150 
	`avfÜm©_wr™e_h—d”
(
oc_
, 
NULL
);

2153  
Œue
;

2154 
	}
}

2156 
	gOuutMedŸSŒ—m_FFMPEG
::
	$wr™e
(* 
d©a
, 
size
, 
keyF¿me
)

2159 ià(
size
 > 0)

2161 
AVPack‘
 
pkt
;

2162 
	`av_š™_·ck‘
(&
pkt
);

2164 ià(
keyF¿me
)

2165 
pkt
.
æags
 |ğ
PKT_FLAG_KEY
;

2167 
pkt
.
¡»am_šdex
 = 
video_¡_
->
šdex
;

2168 
pkt
.
d©a
 = data;

2169 
pkt
.
size
 = size;

2172 
	`av_wr™e_äame
(
oc_
, &
pkt
);

2174 
	}
}

2176 
OuutMedŸSŒ—m_FFMPEG
* 
	$ü—‹_OuutMedŸSŒ—m_FFMPEG
(cÚ¡ * 
feName
, 
width
, 
height
, 
ås
)

2178 
OuutMedŸSŒ—m_FFMPEG
* 
¡»am
 = (OuutMedŸSŒ—m_FFMPEG*è
	`m®loc
((OutputMediaStream_FFMPEG));

2180 ià(
¡»am
->
	`İ’
(
feName
, 
width
, 
height
, 
ås
))

2181  
¡»am
;

2183 
¡»am
->
	`şo£
();

2184 
	`ä“
(
¡»am
);

2187 
	}
}

2189 
	$»Ëa£_OuutMedŸSŒ—m_FFMPEG
(
OuutMedŸSŒ—m_FFMPEG
* 
¡»am
)

2191 
¡»am
->
	`şo£
();

2192 
	`ä“
(
¡»am
);

2193 
	}
}

2195 
	$wr™e_OuutMedŸSŒ—m_FFMPEG
(
OuutMedŸSŒ—m_FFMPEG
* 
¡»am
, * 
d©a
, 
size
, 
keyF¿me
)

2197 
¡»am
->
	`wr™e
(
d©a
, 
size
, 
keyF¿me
);

2198 
	}
}

2206 
	gVideoCodec_MPEG1
 = 0,

2207 
	gVideoCodec_MPEG2
,

2208 
	gVideoCodec_MPEG4
,

2209 
	gVideoCodec_VC1
,

2210 
	gVideoCodec_H264
,

2211 
	gVideoCodec_JPEG
,

2212 
	gVideoCodec_H264_SVC
,

2213 
	gVideoCodec_H264_MVC
,

2216 
	gVideoCodec_YUV420
 = (('I'<<24)|('Y'<<16)|('U'<<8)|('V')),

2217 
	gVideoCodec_YV12
 = (('Y'<<24)|('V'<<16)|('1'<<8)|('2')),

2218 
	gVideoCodec_NV12
 = (('N'<<24)|('V'<<16)|('1'<<8)|('2')),

2219 
	gVideoCodec_YUYV
 = (('Y'<<24)|('U'<<16)|('Y'<<8)|('V')),

2220 
	gVideoCodec_UYVY
 = (('U'<<24)|('Y'<<16)|('V'<<8)|('Y'))

2225 
	gVideoChromaFÜm©_MÚochrome
 = 0,

2226 
	gVideoChromaFÜm©_YUV420
,

2227 
	gVideoChromaFÜm©_YUV422
,

2228 
	gVideoChromaFÜm©_YUV444


2231 
	sIÅutMedŸSŒ—m_FFMPEG


2233 
	gpublic
:

2234 
boŞ
 
İ’
(cÚ¡ * 
feName
, * 
codec
, * 
chroma_fÜm©
, * 
width
, * 
height
);

2235 
şo£
();

2237 
boŞ
 
»ad
(** 
d©a
, * 
size
, * 
’dOfFe
);

2239 
	g´iv©e
:

2240 
IÅutMedŸSŒ—m_FFMPEG
(const InputMediaStream_FFMPEG&);

2241 
	gIÅutMedŸSŒ—m_FFMPEG
& 
	gİ”©Ü
 =(cÚ¡ 
IÅutMedŸSŒ—m_FFMPEG
&);

2243 
AVFÜm©CÚ‹xt
* 
	gùx_
;

2244 
	gvideo_¡»am_id_
;

2245 
AVPack‘
 
	gpkt_
;

2248 
boŞ
 
	gIÅutMedŸSŒ—m_FFMPEG
::
	$İ’
(cÚ¡ * 
feName
, * 
codec
, * 
chroma_fÜm©
, * 
width
, * 
height
)

2250 
”r
;

2252 
ùx_
 = 0;

2253 
video_¡»am_id_
 = -1;

2254 
	`mem£t
(&
pkt_
, 0, (
AVPack‘
));

2256 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 13, 0)

2257 
	`avfÜm©_ÃtwÜk_š™
();

2260 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 6, 0)

2261 
”r
 = 
	`avfÜm©_İ’_šput
(&
ùx_
, 
feName
, 0, 0);

2263 
”r
 = 
	`av_İ’_šput_fe
(&
ùx_
, 
feName
, 0, 0, 0);

2265 ià(
”r
 < 0)

2266  
çl£
;

2268 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 6, 0)

2269 
”r
 = 
	`avfÜm©_fšd_¡»am_šfo
(
ùx_
, 0);

2271 
”r
 = 
	`av_fšd_¡»am_šfo
(
ùx_
);

2273 ià(
”r
 < 0)

2274  
çl£
;

2276 
i
 = 0; i < 
ùx_
->
nb_¡»ams
; ++i)

2278 #ià
LIBAVFORMAT_BUILD
 > 4628

2279 
AVCodecCÚ‹xt
 *
’c
 = 
ùx_
->
¡»ams
[
i
]->
codec
;

2281 
AVCodecCÚ‹xt
 *
’c
 = &
ùx_
->
¡»ams
[
i
]->
codec
;

2284 ià(
’c
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
)

2286 
video_¡»am_id_
 = 
¡©ic_ÿ¡
<>(
i
);

2288 
’c
->
codec_id
)

2290 
	`CV_CODEC
(
CODEC_ID_MPEG1VIDEO
):

2291 *
codec
 = ::
VideoCodec_MPEG1
;

2294 
	`CV_CODEC
(
CODEC_ID_MPEG2VIDEO
):

2295 *
codec
 = ::
VideoCodec_MPEG2
;

2298 
	`CV_CODEC
(
CODEC_ID_MPEG4
):

2299 *
codec
 = ::
VideoCodec_MPEG4
;

2302 
	`CV_CODEC
(
CODEC_ID_VC1
):

2303 *
codec
 = ::
VideoCodec_VC1
;

2306 
	`CV_CODEC
(
CODEC_ID_H264
):

2307 *
codec
 = ::
VideoCodec_H264
;

2311  
çl£
;

2314 
’c
->
pix_fmt
)

2316 
PIX_FMT_YUV420P
:

2317 *
chroma_fÜm©
 = ::
VideoChromaFÜm©_YUV420
;

2320 
PIX_FMT_YUV422P
:

2321 *
chroma_fÜm©
 = ::
VideoChromaFÜm©_YUV422
;

2324 
PIX_FMT_YUV444P
:

2325 *
chroma_fÜm©
 = ::
VideoChromaFÜm©_YUV444
;

2329  
çl£
;

2332 *
width
 = 
’c
->
coded_width
;

2333 *
height
 = 
’c
->
coded_height
;

2339 ià(
video_¡»am_id_
 < 0)

2340  
çl£
;

2342 
	`av_š™_·ck‘
(&
pkt_
);

2344  
Œue
;

2345 
	}
}

2347 
	gIÅutMedŸSŒ—m_FFMPEG
::
	$şo£
()

2349 ià(
ùx_
)

2351 #ià
LIBAVFORMAT_BUILD
 >ğ
	`CALC_FFMPEG_VERSION
(53, 24, 2)

2352 
	`avfÜm©_şo£_šput
(&
ùx_
);

2354 
	`av_şo£_šput_fe
(
ùx_
);

2359 ià(
pkt_
.
d©a
)

2360 
	`av_ä“_·ck‘
(&
pkt_
);

2361 
	}
}

2363 
boŞ
 
	gIÅutMedŸSŒ—m_FFMPEG
::
	$»ad
(** 
d©a
, * 
size
, * 
’dOfFe
)

2366 ià(
pkt_
.
d©a
)

2367 
	`av_ä“_·ck‘
(&
pkt_
);

2372 
»t
 = 
	`av_»ad_äame
(
ùx_
, &
pkt_
);

2374 ià(
»t
 =ğ
	`AVERROR
(
EAGAIN
))

2377 ià(
»t
 < 0)

2379 ià(
»t
 =ğ()
AVERROR_EOF
)

2380 *
’dOfFe
 = 
Œue
;

2381  
çl£
;

2384 ià(
pkt_
.
¡»am_šdex
 !ğ
video_¡»am_id_
)

2386 
	`av_ä“_·ck‘
(&
pkt_
);

2393 *
d©a
 = 
pkt_
.data;

2394 *
size
 = 
pkt_
.size;

2395 *
’dOfFe
 = 
çl£
;

2397  
Œue
;

2398 
	}
}

2400 
IÅutMedŸSŒ—m_FFMPEG
* 
	$ü—‹_IÅutMedŸSŒ—m_FFMPEG
(cÚ¡ * 
feName
, * 
codec
, * 
chroma_fÜm©
, * 
width
, * 
height
)

2402 
IÅutMedŸSŒ—m_FFMPEG
* 
¡»am
 = (IÅutMedŸSŒ—m_FFMPEG*è
	`m®loc
((InputMediaStream_FFMPEG));

2404 ià(
¡»am
 && sŒ—m->
	`İ’
(
feName
, 
codec
, 
chroma_fÜm©
, 
width
, 
height
))

2405  
¡»am
;

2407 
¡»am
->
	`şo£
();

2408 
	`ä“
(
¡»am
);

2411 
	}
}

2413 
	$»Ëa£_IÅutMedŸSŒ—m_FFMPEG
(
IÅutMedŸSŒ—m_FFMPEG
* 
¡»am
)

2415 
¡»am
->
	`şo£
();

2416 
	`ä“
(
¡»am
);

2417 
	}
}

2419 
	$»ad_IÅutMedŸSŒ—m_FFMPEG
(
IÅutMedŸSŒ—m_FFMPEG
* 
¡»am
, ** 
d©a
, * 
size
, * 
’dOfFe
)

2421  
¡»am
->
	`»ad
(
d©a
, 
size
, 
’dOfFe
);

2422 
	}
}

	@cap_giganetix.cpp

47 
	~"´ecomp.hµ
"

48 
	~<GigEVisiÚSDK.h
>

49 
	~<GigEVisiÚSDK.ıp
>

51 #ifdeà
WIN32


52 
	~<io.h
>

54 
	~<¡dio.h
>

57 #ifdeà
NDEBUG


58 
	#CV_WARN
(
mes§ge
)

	)

60 
	#CV_WARN
(
mes§ge
è
	`årštf
(
¡d”r
, "w¬nšg: % (%s:%d)\n", mes§ge, 
__FILE__
, 
__LINE__
)

	)

63 
	#QTGIG_HEARTBEAT_TIME
 (12000.0)

	)

64 
	#QTGIG_MAX_WAIT_TIME
 (2.0)

	)

65 
	#QTGIG_IMG_WAIT_TIME
 (3.0)

	)

76 
boŞ


77 
	$w½rIn™GigEVisiÚAPI
()

79 
	`CV_FUNCNAME
("wrprInitGigEVisionAPI");

80 
__BEGIN__
;

82 
Œy
 {

83 
gige
::
	`In™GigEVisiÚAPI
 ();

84 } 
	`ÿtch
(...) {

85 
	`CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: initialization (InitGigEVisionAPI()) failed.\n");

87 
__END__
;

88  
Œue
;

89 
	}
}

100 
boŞ


101 
	$w½rEx™GigEVisiÚAPI
()

103 
	`CV_FUNCNAME
("wrprExitGigEVisionAPI");

104 
__BEGIN__
;

106 
Œy
 {

107 
gige
::
	`Ex™GigEVisiÚAPI
 ();

108 } 
	`ÿtch
(...) {

109 
	`CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: finalization (ExitGigEVisionAPI()) failed.\n");

110  
çl£
;

112 
__END__
;

113  
Œue
;

114 
	}
}

125 
	ggige
::
IGigEVisiÚAPI


126 
	$w½rG‘GigEVisiÚAPI
()

129 
gige
::
IGigEVisiÚAPI
 
b_»t
 = 0;

131 
	`CV_FUNCNAME
("wrprGetGigEVisionAPI");

132 
__BEGIN__
;

134 
Œy
 {

135 
b_»t
 = 
gige
::
	`G‘GigEVisiÚAPI
 ();

136 } 
	`ÿtch
(...) {

137 
	`CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: API instance (from GetGigEVisionAPI()) failed.\n");

140 
__END__
;

142  
b_»t
;

143 
	}
}

157 
boŞ


158 
w½rUÄegi¡”C®lback
ĞcÚ¡ 
gige
::
IGigEVisiÚAPI
* 
­i
, gige::
IC®lbackEv’t
* 
ev’tHªdËr
)

160 
boŞ
 
b_»t
 = 
­i
 !ğ
NULL
;

162 if(
	gb_»t
èb_»ˆğ
­i
->
IsV®id
 ();

164 
CV_FUNCNAME
("wrprUnregisterCallback");

165 
	g__BEGIN__
;

167 if(
	gb_»t
)

169 if(
	gev’tHªdËr
 !ğ
NULL
)

171 
Œy
 {

172 
b_»t
 = ((
gige
::
IGigEVisiÚAPIIÁ”çû
*)
­i
)->
UÄegi¡”C®lback
 (
ev’tHªdËr
);

173 } 
ÿtch
(...) {

174 
CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: API unregister callback function (from UnregisterCallback()) failed.\n");

175 
	gb_»t
 = 
çl£
;

179 
	g__END__
;

181  (
	gb_»t
);

193 
boŞ


194 
w½rDeviûIsCÚÃù
Ğ
gige
::
IDeviû
& 
deviû
 )

196 
boŞ
 
b_»t
 = 
deviû
 !ğ
NULL
;

198 
CV_FUNCNAME
("wrprDeviceIsConnect");

199 
	g__BEGIN__
;

201 if(
	gb_»t
)

203 
	gŒy
 {

204 
	gb_»t
 = 
deviû
->
IsCÚÃùed
 ();

205 } 
ÿtch
 (...) {

206 
CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: API device connection state (from IsConnected()) failed.\n");

207 
	gb_»t
 = 
çl£
;

210 
	g__END__
;

212  (
	gb_»t
);

225 
boŞ


226 
w½rDeviûIsV®id
Ğ
gige
::
IDeviû
& 
deviû
 )

228 
boŞ
 
b_»t
 = 
deviû
 !ğ
NULL
;

230 
CV_FUNCNAME
("wrprDeviceIsConnect");

231 
	g__BEGIN__
;

233 if(
	gb_»t
)

235 
	gŒy
 {

236 
	gb_»t
 = 
deviû
.
IsV®id
 ();

237 } 
ÿtch
 (...) {

238 
CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: API device validation state (from IsValid()) failed.\n");

239 
	gb_»t
 = 
çl£
;

242 
	g__END__
;

244  (
	gb_»t
);

257 
boŞ


258 
w½rDeviûDiscÚÃù
 ( 
gige
::
IDeviû
& 
deviû
 )

260 
boŞ
 
b_»t
 = 
deviû
 !ğ
NULL
;

262 
CV_FUNCNAME
("wrprDeviceDisconnect");

263 
	g__BEGIN__
;

265 if(
	gb_»t
)

267 
	gŒy
 {

268 
	gdeviû
->
DiscÚÃù
 ();

269 } 
ÿtch
 (...) {

270 
CV_ERROR
(
CV_StsE¼Ü
, "GigEVisionAPI: API device disconnect (from Disconnect()) failed.\n");

271 
	gb_»t
 = 
çl£
;

275 
	g__END__
;

277  (
	gb_»t
);

289 şas 
	cCvC­tu»CAM_Gigª‘ix
 : 
public
 
CvC­tu»


291 
public
:

292 
CvC­tu»CAM_Gigª‘ix
();

293 
	mvœtu®
 ~
CvC­tu»CAM_Gigª‘ix
();

295 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

296 
vœtu®
 
şo£
();

297 
vœtu®
 
	$g‘Prİ”ty
() const;

298 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

299 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

300 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

301 
vœtu®
 
	$g‘C­tu»Domaš
()

303  
CV_CAP_GIGANETIX
;

306 
boŞ
 
	`¡¬t
 ();

307 
boŞ
 
	`¡İ
 ();

309 
´Ùeùed
:

311 
	`š™
 ();

312 
	`g¿bImage
 ();

314 
gige
::
IGigEVisiÚAPI
 
m_­i
;

315 
boŞ
 
m_­i_Ú
;

316 
gige
::
IDeviû
 
m_deviû
;

317 
boŞ
 
m_aùive
;

319 
I¶Image
* 
m_¿w_image
;

320 
UINT32
 
m_¿wImagePix–Ty³
;

321 
boŞ
 
m_mÚoüome
;

323 
	}
};

327 
	gCvC­tu»CAM_Gigª‘ix
::
	$š™
 ()

329 
m_mÚoüome
 = 
m_aùive
 = 
m_­i_Ú
 = 
çl£
;

330 
m_­i
 = 0;

331 
m_deviû
 = 0;

332 
m_¿w_image
 = 0;

333 
m_¿wImagePix–Ty³
 = 0;

334 
	}
}

337 
	gCvC­tu»CAM_Gigª‘ix
::
	$CvC­tu»CAM_Gigª‘ix
()

339 
	`š™
 ();

341 
m_­i_Ú
 = 
	`w½rIn™GigEVisiÚAPI
 ();

343 if(
m_­i_Ú
)

345 if((
m_­i
 = 
	`w½rG‘GigEVisiÚAPI
 ()è!ğ
NULL
)

347 
m_­i
->
	`S‘H—¹b—tTime
 (
QTGIG_HEARTBEAT_TIME
);

350 
	}
}

353 
	gCvC­tu»CAM_Gigª‘ix
::~
	$CvC­tu»CAM_Gigª‘ix
()

355 
	`şo£
();

356 
	}
}

359 
	gCvC­tu»CAM_Gigª‘ix
::
	$şo£
()

361 
	`¡İ
 ();

363 ()
	`w½rDeviûDiscÚÃù
(
m_deviû
);

365 ()
	`w½rEx™GigEVisiÚAPI
 ();

367 if(
m_¿w_image
è
	`cvR–—£ImageH—d”
(&m_raw_image);

369 
	`š™
 ();

370 
	}
}

373 
boŞ


374 
	gCvC­tu»CAM_Gigª‘ix
::
	$İ’
Ğ
šdex
 )

376 
boŞ
 
b_»t
 = 
m_­i_Ú
;

378 
	`CV_FUNCNAME
("CvCaptureCAM_Giganetix::open");

379 
__BEGIN__
;

381 if(
b_»t
)

382 
b_»t
 = 
m_­i
.
	`IsV®id
 ();

384 if(
b_»t
 )

386 
m_­i
->
	`FšdAÎDeviûs
 (
QTGIG_MAX_WAIT_TIME
);

389 
gige
::
DeviûsLi¡
 DeviûsLi¡ = 
m_­i
->
	`G‘AÎDeviûs
 ();

391 
m_deviû
 = 0;

392 
b_»t
 = 
çl£
;

394 
i
 = 0; i < (è
DeviûsLi¡
.
	`size
(è&& !
b_»t
; i++)

396 
b_»t
 = (
i
 =ğ
šdex
);

397 if(
b_»t
)

399 
m_deviû
 = 
DeviûsLi¡
[
i
];

400 
b_»t
 = 
m_deviû
->
	`CÚÃù
 ();

402 if(
b_»t
)

404 
b_»t
 =

405 
m_deviû
->
	`S‘SŒšgNodeV®ue
("AcquisitionStatusSelector", "AcquisitionActive")

407 
m_deviû
->
	`S‘SŒšgNodeV®ue
 ("TriggerMode", "Off")

409 
m_deviû
->
	`S‘SŒšgNodeV®ue
 ("AcquisitionMode", "Continuous")

411 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("AcquisitionFrameCount", 20)

418 if(!
b_»t
)

420 
	`CV_ERROR
(
CV_StsE¼Ü
, "Giganetix: Error cannot find camera\n");

421 
	`şo£
 ();

423 
	`¡¬t
 ();

426 
__END__
;

428  
b_»t
;

429 
	}
}

433 
	gCvC­tu»CAM_Gigª‘ix
::
	$g¿bImage
 ()

435 
	`CV_FUNCNAME
("CvCaptureCAM_Giganetix::grabImage");

436 
__BEGIN__
;

438 if(
	`w½rDeviûIsV®id
(
m_deviû
è&& 
	`w½rDeviûIsCÚÃù
(m_device))

440 if(!
m_deviû
->
	`IsBufãrEm±y
 ())

442 
gige
::
IImageInfo
 
imageInfo
;

443 
m_deviû
->
	`G‘ImageInfo
 (&
imageInfo
);

444 
	`as£¹
(
imageInfo
.
	`IsV®id
());

446 ià(
m_deviû
->
	`G‘P’dšgImagesCouÁ
() == 1)

448 
UINT32
 
ÃwPix–Ty³
;

449 
UINT32
 
ÃwWidth
, 
ÃwHeight
;

451 
imageInfo
->
	`G‘Pix–Ty³
(
ÃwPix–Ty³
);

452 
imageInfo
->
	`G‘Size
(
ÃwWidth
, 
ÃwHeight
);

455 
boŞ
 
b_v®id©iÚ
 = 
m_¿w_image
 !ğ
NULL
;

456 if(
b_v®id©iÚ
)

458 
b_v®id©iÚ
 =

459 
m_¿w_image
->
imageSize
 =ğ()(
imageInfo
->
	`G‘RawD©aSize
 ())

461 
m_¿wImagePix–Ty³
 =ğ
ÃwPix–Ty³
;

463 if(
m_¿w_image
è
	`cvR–—£ImageH—d”
(&m_raw_image);

466 
m_¿wImagePix–Ty³
 = 
ÃwPix–Ty³
;

467 
m_mÚoüome
 = 
	`Gv¥G‘B™sP”Pix–
((
GVSP_PIXEL_TYPES
)
ÃwPix–Ty³
è=ğ
IPL_DEPTH_8U
;

469 
Œy
 {

470 ià(
m_mÚoüome
)

473 ià(!
b_v®id©iÚ
)

475 
m_¿w_image
 = 
	`cvC»©eImageH—d”
 (
	`cvSize
(()
ÃwWidth
, ()
ÃwHeight
),
IPL_DEPTH_8U
,1);

476 
m_¿w_image
->
Üigš
 = 
IPL_ORIGIN_TL
;

477 
m_¿w_image
->
d©aOrd”
 = 
IPL_DATA_ORDER_PIXEL
;

478 
m_¿w_image
->
widthS‹p
 = 
ÃwWidth
;

484 
m_¿w_image
->
imageD©a
 = (*)(
imageInfo
->
	`G‘RawD©a
 ());

487 ià(!
m_mÚoüome
 && 
ÃwPix–Ty³
 =ğ
GVSP_PIX_RGB8_PACKED
)

490 ià(!
b_v®id©iÚ
)

492 
m_¿w_image
 = 
	`cvC»©eImageH—d”
 (
	`cvSize
(()
ÃwWidth
, ()
ÃwHeight
), 
IPL_DEPTH_32F
, 3);

493 
m_¿w_image
->
Üigš
 = 
IPL_ORIGIN_TL
;

494 
m_¿w_image
->
d©aOrd”
 = 
IPL_DATA_ORDER_PIXEL
;

495 
m_¿w_image
->
widthS‹p
 = 
ÃwWidth
 * 3;

497 
m_¿w_image
->
imageD©a
 = (*)(
imageInfo
->
	`G‘RawD©a
 ());

499 } 
	`ÿtch
 (...) {

500 
	`CV_ERROR
(
CV_StsE¼Ü
, "Giganetix: failedo queue‡ buffer on device\n");

501 
	`şo£
 ();

505 
m_¿w_image
 = 0;

506 
	`CV_WARN
("Giganetix: Undefined image…ixelype\n");

508 
m_deviû
->
	`PİImage
 (
imageInfo
);

509 
m_deviû
->
	`CË¬ImageBufãr
 ();

513 
__END__
;

514 
	}
}

517 
boŞ


518 
	gCvC­tu»CAM_Gigª‘ix
::
	$¡¬t
 ()

520 
	`CV_FUNCNAME
("CvCaptureCAM_Giganetix::start");

521 
__BEGIN__
;

523 
m_aùive
 = 
	`w½rDeviûIsV®id
(
m_deviû
è&& 
	`w½rDeviûIsCÚÃù
(m_device);

525 if(
m_aùive
)

527 ()
m_deviû
->
	`S‘IÁeg”NodeV®ue
("TLParamsLocked", 1);

528 ()
m_deviû
->
	`CommªdNodeExecu‹
("AcquisitionStart");

529 
m_aùive
 = 
m_deviû
->
	`G‘BoŞ—nNodeV®ue
("AcquisitionStatus", m_active);

532 if(!
m_aùive
)

534 
	`CV_ERROR
(
CV_StsE¼Ü
, "Giganetix: Cannot open camera\n");

535 
	`şo£
 ();

538 
__END__
;

540  
m_aùive
;

541 
	}
}

544 
boŞ


545 
	gCvC­tu»CAM_Gigª‘ix
::
	$¡İ
 ()

547 ià(!
m_aùive
è 
Œue
;

549 
	`CV_FUNCNAME
("CvCaptureCAM_Giganetix::stop");

550 
__BEGIN__
;

552 if(
	`w½rDeviûIsV®id
(
m_deviû
è&& 
	`w½rDeviûIsCÚÃù
(m_device))

554 ()
m_deviû
->
	`G‘BoŞ—nNodeV®ue
("Acquis™iÚStus", 
m_aùive
);

556 if(
m_aùive
)

558 ()
m_deviû
->
	`CommªdNodeExecu‹
("AcquisitionStop");

559 ()
m_deviû
->
	`S‘IÁeg”NodeV®ue
("TLParamsLocked", 0);

560 
m_deviû
->
	`CË¬ImageBufãr
 ();

561 ()
m_deviû
->
	`G‘BoŞ—nNodeV®ue
("Acquis™iÚStus", 
m_aùive
);

565 if(
m_aùive
)

567 
	`CV_ERROR
(
CV_StsE¼Ü
, "Giganetix: Improper closure ofhe camera\n");

568 
	`şo£
 ();

570 
__END__
;

572  !
m_aùive
;

573 
	}
}

576 
boŞ


577 
	gCvC­tu»CAM_Gigª‘ix
::
	$g¿bF¿me
()

579 
boŞ
 
b_»t
 =

580 
	`w½rDeviûIsV®id
(
m_deviû
)

582 
	`w½rDeviûIsCÚÃù
(
m_deviû
);

584 if(
b_»t
è
	`g¿bImage
 ();

586  
b_»t
;

587 
	}
}

591 
I¶Image
*

592 
	gCvC­tu»CAM_Gigª‘ix
::
	$»Œ›veF¿me
()

595 
	`w½rDeviûIsV®id
(
m_deviû
è&& 
	`w½rDeviûIsCÚÃù
(m_device) ?

596 
m_¿w_image
 :

597 
NULL


599 
	}
}

603 
	gCvC­tu»CAM_Gigª‘ix
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

605 
d_»t
 = -1.0;

606 
INT64
 
i
;

608 if(
	`w½rDeviûIsCÚÃù
(
m_deviû
))

610  
´İ”ty_id
 )

612 
CV_CAP_PROP_FRAME_WIDTH
:

613 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Width", 
i
);

614 
d_»t
 = 
i
;

616 
CV_CAP_PROP_FRAME_HEIGHT
:

617 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Height", 
i
);

618 
d_»t
 = 
i
;

620 
CV_CAP_PROP_GIGA_FRAME_OFFSET_X
:

621 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Off£tX", 
i
);

622 
d_»t
 = 
i
;

624 
CV_CAP_PROP_GIGA_FRAME_OFFSET_Y
:

625 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Off£tY", 
i
);

626 
d_»t
 = 
i
;

628 
CV_CAP_PROP_GIGA_FRAME_WIDTH_MAX
:

629 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("WidthMax", 
i
);

630 
d_»t
 = 
i
;

632 
CV_CAP_PROP_GIGA_FRAME_HEIGH_MAX
:

633 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("HeightMax", 
i
);

634 
d_»t
 = 
i
;

636 
CV_CAP_PROP_GIGA_FRAME_SENS_WIDTH
:

637 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("S’sÜWidth", 
i
);

638 
d_»t
 = 
i
;

640 
CV_CAP_PROP_GIGA_FRAME_SENS_HEIGH
:

641 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("S’sÜHeight", 
i
);

642 
d_»t
 = 
i
;

644 
CV_CAP_PROP_FRAME_COUNT
:

645 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Acquis™iÚF¿meCouÁ", 
i
);

646 
d_»t
 = 
i
;

648 
CV_CAP_PROP_EXPOSURE
:

649 
m_deviû
->
	`G‘FlßtNodeV®ue
 ("Exposu»Time",
d_»t
);

651 
CV_CAP_PROP_GAIN
 :

652 
m_deviû
->
	`G‘FlßtNodeV®ue
 ("Gaš",
d_»t
);

654 
CV_CAP_PROP_TRIGGER
 :

655 
boŞ
 
b
;

656 
m_deviû
->
	`G‘BoŞ—nNodeV®ue
 ("Trigg”Mode",
b
);

657 
d_»t
 = ()
b
;

659 
CV_CAP_PROP_TRIGGER_DELAY
 :

660 
m_deviû
->
	`G‘FlßtNodeV®ue
 ("Trigg”D–ay",
d_»t
);

666  
d_»t
;

667 
	}
}

670 
boŞ


671 
	gCvC­tu»CAM_Gigª‘ix
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

673 
boŞ
 
b_»t
 = 
	`w½rDeviûIsCÚÃù
(
m_deviû
);

675 if(
b_»t
)

677 
boŞ
 
b_v®
 = 
m_aùive
;

679  
´İ”ty_id
 )

681 
CV_CAP_PROP_FRAME_WIDTH
:

682 
	`¡İ
 ();

683 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("Width", (
INT64
)
v®ue
);

684 if(
b_v®
è
	`¡¬t
 ();

686 
CV_CAP_PROP_GIGA_FRAME_WIDTH_MAX
:

687 
	`¡İ
 ();

688 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("WidthMax", (
INT64
)
v®ue
);

689 if(
b_v®
è
	`¡¬t
 ();

691 
CV_CAP_PROP_GIGA_FRAME_SENS_WIDTH
:

692 
	`¡İ
 ();

693 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("S’sÜWidth", (
INT64
)
v®ue
);

694 if(
b_v®
è
	`¡¬t
 ();

696 
CV_CAP_PROP_FRAME_HEIGHT
:

697 
	`¡İ
 ();

698 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("Height", (
INT64
)
v®ue
);

699 if(
b_v®
è
	`¡¬t
 ();

701 
CV_CAP_PROP_GIGA_FRAME_HEIGH_MAX
:

702 
	`¡İ
 ();

703 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("HeightMax", (
INT64
)
v®ue
);

704 if(
b_v®
è
	`¡¬t
 ();

706 
CV_CAP_PROP_GIGA_FRAME_SENS_HEIGH
:

707 
	`¡İ
 ();

708 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("S’sÜHeight", (
INT64
)
v®ue
);

709 if(
b_v®
è
	`¡¬t
 ();

711 
CV_CAP_PROP_GIGA_FRAME_OFFSET_X
: {

712 
INT64
 
w
, 
wmax
, 
v®
 = (INT64)
v®ue
;

713 if((
b_»t
 = 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Width", 
w
)))

714 if((
b_»t
 = 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("WidthMax", 
wmax
)))

715 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("Off£tX", (
v®
 + 
w
è> 
wmax
 ? (wmax - w) : val);

717 
CV_CAP_PROP_GIGA_FRAME_OFFSET_Y
: {

718 
INT64
 
h
, 
hmax
, 
v®
 = (INT64)
v®ue
;

719 if((
b_»t
 = 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("Height", 
h
)))

720 if((
b_»t
 = 
m_deviû
->
	`G‘IÁeg”NodeV®ue
 ("HeightMax", 
hmax
)))

721 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("Off£tY", (
v®
 + 
h
è> 
hmax
 ? (hmax - h) : val);

722 
b_»t
 = 
m_deviû
->
	`S‘IÁeg”NodeV®ue
 ("Off£tY", (
INT64
)
v®ue
);

725 
CV_CAP_PROP_EXPOSURE
:

726 
b_»t
 = 
m_deviû
->
	`S‘FlßtNodeV®ue
 ("Exposu»Time",
v®ue
);

728 
CV_CAP_PROP_GAIN
 :

729 
b_»t
 = 
m_deviû
->
	`S‘FlßtNodeV®ue
 ("Gaš",
v®ue
);

731 
CV_CAP_PROP_TRIGGER
 :

732 
b_»t
 = 
m_deviû
->
	`S‘BoŞ—nNodeV®ue
 ("Trigg”Mode",(
boŞ
)
v®ue
);

734 
CV_CAP_PROP_TRIGGER_DELAY
 :

735 
	`¡İ
 ();

736 
b_»t
 = 
m_deviû
->
	`S‘FlßtNodeV®ue
 ("Trigg”D–ay",
v®ue
);

737 if(
b_v®
è
	`¡¬t
 ();

740 
b_»t
 = 
çl£
;

744  
b_»t
;

745 
	}
}

750 
CvC­tu»
*

751 
	$cvC»©eCam”aC­tu»_Gigª‘ix
Ğ
šdex
 )

753 
CvC­tu»CAM_Gigª‘ix
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_Giganetix;

755 ià(!(
ÿ±u»
->
	`İ’
Ğ
šdex
 )))

757 
d–‘e
 
ÿ±u»
;

758 
ÿ±u»
 = 
NULL
;

761  ((
CvC­tu»
*)
ÿ±u»
);

762 
	}
}

	@cap_gphoto2.cpp

28 
	~"´ecomp.hµ
"

30 #ifdeà
HAVE_GPHOTO2


32 
	~<gphÙo2/gphÙo2.h
>

34 
	~<®gÜ™hm
>

35 
	~<şoÿË
>

36 
	~<c¡dio
>

37 
	~<c¡ršg
>

38 
	~<ùime
>

39 
	~<deque
>

40 
	~<exû±iÚ
>

41 
	~<m­
>

42 
	~<o¡»am
>

43 
	~<¡ršg
>

45 
Çme¥aû
 
	gcv


48 
Çme¥aû
 
	ggphÙo2
 {

53 şas 
	cGPhÙo2Exû±iÚ
: 
public
 
¡d
::
exû±iÚ


55 
´iv©e
:

56 
»suÉ
;

57 cÚ¡ * 
	gm‘hod
;

58 
	gpublic
:

63 
GPhÙo2Exû±iÚ
(cÚ¡ * 
m‘hodSŒ
, 
gPhÙo2ResuÉ
)

65 
	g»suÉ
 = 
gPhÙo2ResuÉ
;

66 
	gm‘hod
 = 
m‘hodSŒ
;

68 
vœtu®
 cÚ¡ * 
wh©
(ècÚ¡ 
throw
 ()

70  
gp_»suÉ_as_¡ršg
(
»suÉ
);

72 
ä›nd
 
	g¡d
::
o¡»am
 & 
İ”©Ü
<<(
¡d
::ostream & ostream,

73 
	gGPhÙo2Exû±iÚ
 & 
	ge
)

75  
	go¡»am
 << 
	ge
.
	gm‘hod
 << ": " <<ƒ.
wh©
();

131 şas 
	cDig™®Cam”aC­tu»
: 
public
 
IVideoC­tu»


133 
public
:

134 cÚ¡ * 
£·¿tÜ
;

135 cÚ¡ * 
	glšeD–im™”
;

137 
Dig™®Cam”aC­tu»
();

138 
Dig™®Cam”aC­tu»
(
šdex
);

139 
Dig™®Cam”aC­tu»
(cÚ¡ 
SŒšg
 &
deviûName
);

140 
	gvœtu®
 ~
Dig™®Cam”aC­tu»
();

142 
vœtu®
 
boŞ
 
isO³Ãd
() const;

143 
vœtu®
 
g‘Prİ”ty
() const;

144 
vœtu®
 
boŞ
 
£tPrİ”ty
(, );

145 
vœtu®
 
boŞ
 
g¿bF¿me
();

146 
vœtu®
 
boŞ
 
»Œ›veF¿me
(, 
OuutA¼ay
);

147 
vœtu®
 
g‘C­tu»Domaš
()

149  
	gCV_CAP_GPHOTO2
;

152 
boŞ
 
İ’
(
šdex
);

153 
şo£
();

154 
boŞ
 
deviûExi¡
(
šdex
) const;

155 
fšdDeviû
(cÚ¡ * 
deviûName
) const;

157 
	g´Ùeùed
:

159 cÚ¡ * 
PROP_EXPOSURE_COMPENSACTION
;

160 cÚ¡ * 
	gPROP_SELF_TIMER_DELAY
;

161 cÚ¡ * 
	gPROP_MANUALFOCUS
;

162 cÚ¡ * 
	gPROP_AUTOFOCUS
;

163 cÚ¡ * 
	gPROP_ISO
;

164 cÚ¡ * 
	gPROP_SPEED
;

165 cÚ¡ * 
	gPROP_APERTURE_NIKON
;

166 cÚ¡ * 
	gPROP_APERTURE_CANON
;

167 cÚ¡ * 
	gPROP_EXPOSURE_PROGRAM
;

168 cÚ¡ * 
	gPROP_VIEWFINDER
;

171 
GPCÚ‹xt
 * 
	gcÚ‹xt
 = 
NULL
;

172 
	gnumDeviûs
;

173 
š™CÚ‹xt
();

176 
boŞ
 
	gİ’ed
;

177 
Cam”a
 * 
	gÿm”a
 = 
NULL
;

178 
M©
 
	gäame
;

181 
Cam”aWidg‘
 * 
	groÙWidg‘
 = 
NULL
;

182 
Cam”aWidg‘
 * 
g‘G’”icPrİ”ty
(
´İ”tyId
, & 
ouut
) const;

183 
Cam”aWidg‘
 * 
£tG’”icPrİ”ty
(
´İ”tyId
, 
v®ue
,

184 
boŞ
 & 
ouut
) const;

187 
»lßdCÚfig
(è
throw
 (
GPhÙo2Exû±iÚ
);

188 
Cam”aWidg‘
 * 
g‘Widg‘
(
widg‘Id
) const;

189 
Cam”aWidg‘
 * 
fšdWidg‘ByName
(cÚ¡ * 
Çme
) const;

192 
»adF¿meFromFe
(
Cam”aFe
 * 
fe
, 
OuutA¼ay
 
ouutF¿me
è
throw
 (
GPhÙo2Exû±iÚ
);

195 
ä›nd
 
ùxE¼ÜFunc
(
GPCÚ‹xt
 *, const *, *);

196 
ä›nd
 
ùxStusFunc
(
GPCÚ‹xt
 *, const *, *);

197 
ä›nd
 
ùxMes§geFunc
(
GPCÚ‹xt
 *, const *, *);

200 
	eMsgTy³


202 
	gERROR
 = () 'E',

203 
	gWARNING
 = () 'W',

204 
	gSTATUS
 = () 'S',

205 
	gOTHER
 = () 'O'

207 
	g‹m¶©e
<
ty³Çme
 
	gOs¡»amPršbË
>

208 
mes§ge
(
MsgTy³
 
msgTy³
, cÚ¡ * 
msg
,

209 
Os¡»amPršbË
 & 
¬g
) const;

211 
	g´iv©e
:

213 
Cam”aAb™›sLi¡
 * 
ab™›sLi¡
 = 
NULL
;

214 
GPPÜtInfoLi¡
 * 
	gÿ·bËPÜts
 = 
NULL
;

215 
Cam”aLi¡
 * 
	g®lDeviûs
 = 
NULL
;

218 
Cam”aAb™›s
 
	gÿm”aAb™›s
;

219 
	g¡d
::
deque
<
Cam”aFe
 *> 
g¿bbedF¿mes
;

222 
boŞ
 
	g´ev›w
;

223 
	g¡d
::
¡ršg
 
widg‘Info
;

224 
	g¡d
::
m­
<, 
	gCam”aWidg‘
 *> 
	gwidg‘s
;

225 
boŞ
 
	g»lßdOnChªge
;

226 
time_t
 
	gfœ¡C­tu»dF¿meTime
;

227 
	gÿ±u»dF¿mes
;

229 
Dig™®Cam”aC­tu»
(const DigitalCameraCapture&);

230 
	gDig™®Cam”aC­tu»
& 
	gİ”©Ü
=(
Dig™®Cam”aC­tu»
 const&);

233 
	gnoOfWidg‘s
;

234 
widg‘DesütiÚ
(
¡d
::
o¡»am
 &
os
, 
Cam”aWidg‘
 * 
widg‘
) const

235 
throw
 (
GPhÙo2Exû±iÚ
);

236 
cŞËùWidg‘s
(
¡d
::
o¡»am
 &
os
, 
Cam”aWidg‘
 * 
widg‘
)

237 
throw
 (
GPhÙo2Exû±iÚ
);

240 
mubË
 
	g¡d
::
o¡ršg¡»am
 
msgsBufãr
;

241 
mubË
 
	g¡d
::
¡ršg
 
Ï¡Flush
;

242 
boŞ
 
	gcŞËùMsgs
;

248 
	#CR
(
GPHOTO2_FUN
) do {\

249 
r_0629c47b758
;\

250 ià((
r_0629c47b758
 = (
GPHOTO2_FUN
)è< 
GP_OK
) {\

251 
throw
 
	`GPhÙo2Exû±iÚ
(#GPHOTO2_FUN, 
r_0629c47b758
);\

253 } 0)

	)

259 
ùxE¼ÜFunc
(
GPCÚ‹xt
 *, cÚ¡ * 
¡r
, * 
th©GPhÙoC­
)

261 cÚ¡ 
Dig™®Cam”aC­tu»
 * 
	g£lf
 =

262 (cÚ¡ 
Dig™®Cam”aC­tu»
 *è
th©GPhÙoC­
;

263 
	g£lf
->
mes§ge
(
£lf
->
ERROR
, "cÚ‹xˆãedback", 
¡r
);

270 
ùxStusFunc
(
GPCÚ‹xt
 *, cÚ¡ * 
¡r
, * 
th©GPhÙoC­
)

272 cÚ¡ 
Dig™®Cam”aC­tu»
 * 
	g£lf
 =

273 (cÚ¡ 
Dig™®Cam”aC­tu»
 *è
th©GPhÙoC­
;

274 
	g£lf
->
mes§ge
(
£lf
->
STATUS
, "cÚ‹xˆãedback", 
¡r
);

281 
ùxMes§geFunc
(
GPCÚ‹xt
 *, cÚ¡ * 
¡r
, * 
th©GPhÙoC­
)

283 cÚ¡ 
Dig™®Cam”aC­tu»
 * 
	g£lf
 =

284 (cÚ¡ 
Dig™®Cam”aC­tu»
 *è
th©GPhÙoC­
;

285 
	g£lf
->
mes§ge
(
£lf
->
OTHER
, "cÚ‹xˆãedback", 
¡r
);

291 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
£·¿tÜ
 = ",";

295 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
lšeD–im™”
 = "\n";

302 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_EXPOSURE_COMPENSACTION
 =

304 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_SELF_TIMER_DELAY
 = "selftimerdelay";

305 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_MANUALFOCUS
 = "manualfocusdrive";

306 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_AUTOFOCUS
 = "autofocusdrive";

307 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_ISO
 = "iso";

308 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_SPEED
 = "shutterspeed";

309 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_APERTURE_NIKON
 = "f-number";

310 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_APERTURE_CANON
 = "aperture";

311 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_EXPOSURE_PROGRAM
 = "expprogram";

312 cÚ¡ * 
	gDig™®Cam”aC­tu»
::
PROP_VIEWFINDER
 = "viewfinder";

317 
	gDig™®Cam”aC­tu»
::
š™CÚ‹xt
()

319 
ÿ±u»dF¿mes
 = 
noOfWidg‘s
 = 
numDeviûs
 = 0;

320 
	gİ’ed
 = 
´ev›w
 = 
»lßdOnChªge
 = 
çl£
;

321 
	gfœ¡C­tu»dF¿meTime
 = 0;

323 
	gcÚ‹xt
 = 
gp_cÚ‹xt_Ãw
();

325 
gp_cÚ‹xt_£t_”rÜ_func
(
cÚ‹xt
, 
ùxE¼ÜFunc
, (*è
this
);

326 
gp_cÚ‹xt_£t_¡©us_func
(
cÚ‹xt
, 
ùxStusFunc
, (*è
this
);

327 
gp_cÚ‹xt_£t_mes§ge_func
(
cÚ‹xt
, 
ùxMes§geFunc
, (*è
this
);

329 
	gŒy


332 
CR
(
gp_ab™›s_li¡_Ãw
(&
ab™›sLi¡
));

333 
CR
(
gp_ab™›s_li¡_lßd
(
ab™›sLi¡
, 
cÚ‹xt
));

336 
CR
(
gp_pÜt_šfo_li¡_Ãw
(&
ÿ·bËPÜts
));

337 
CR
(
gp_pÜt_šfo_li¡_lßd
(
ÿ·bËPÜts
));

340 
CR
(
gp_li¡_Ãw
(&
®lDeviûs
));

341 
CR
(
gp_ÿm”a_autod‘eù
(
®lDeviûs
, 
cÚ‹xt
));

342 
CR
(
numDeviûs
 = 
gp_li¡_couÁ
(
®lDeviûs
));

344 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

346 
	gnumDeviûs
 = 0;

353 
	gDig™®Cam”aC­tu»
::
Dig™®Cam”aC­tu»
()

355 
š™CÚ‹xt
();

361 
	gDig™®Cam”aC­tu»
::
Dig™®Cam”aC­tu»
(
šdex
)

363 
š™CÚ‹xt
();

364 ià(
deviûExi¡
(
šdex
))

365 
İ’
(
šdex
);

372 
	gDig™®Cam”aC­tu»
::
Dig™®Cam”aC­tu»
(cÚ¡ 
SŒšg
 & 
deviûName
)

374 
š™CÚ‹xt
();

375 
	gšdex
 = 
fšdDeviû
(
deviûName
.
c_¡r
());

376 ià(
deviûExi¡
(
šdex
))

377 
İ’
(
šdex
);

383 
	gDig™®Cam”aC­tu»
::~
Dig™®Cam”aC­tu»
()

385 
şo£
();

386 
	gŒy


388 
CR
(
gp_ab™›s_li¡_ä“
(
ab™›sLi¡
));

389 
	gab™›sLi¡
 = 
NULL
;

390 
CR
(
gp_pÜt_šfo_li¡_ä“
(
ÿ·bËPÜts
));

391 
	gÿ·bËPÜts
 = 
NULL
;

392 
CR
(
gp_li¡_uÄef
(
®lDeviûs
));

393 
	g®lDeviûs
 = 
NULL
;

394 
gp_cÚ‹xt_uÄef
(
cÚ‹xt
);

395 
	gcÚ‹xt
 = 
NULL
;

397 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

399 
mes§ge
(
ERROR
, "de¡ruùiÚƒ¼Ü", 
e
);

406 
boŞ
 
	gDig™®Cam”aC­tu»
::
İ’
(
šdex
)

408 cÚ¡ * 
mod–
 = 0, *
	g·th
 = 0;

409 
	gm
, 
	gp
;

410 
GPPÜtInfo
 
	gpÜtInfo
;

412 ià(
isO³Ãd
()) {

413 
şo£
();

416 
	gŒy


418 
CR
(
gp_ÿm”a_Ãw
(&
ÿm”a
));

419 
CR
(
gp_li¡_g‘_Çme
(
®lDeviûs
, 
šdex
, &
mod–
));

420 
CR
(
gp_li¡_g‘_v®ue
(
®lDeviûs
, 
šdex
, &
·th
));

423 
CR
(
m
 = 
gp_ab™›s_li¡_lookup_mod–
(
ab™›sLi¡
, 
mod–
));

424 
CR
(
gp_ab™›s_li¡_g‘_ab™›s
(
ab™›sLi¡
, 
m
, &
ÿm”aAb™›s
));

425 
CR
(
gp_ÿm”a_£t_ab™›s
(
ÿm”a
, 
ÿm”aAb™›s
));

428 
CR
(
p
 = 
gp_pÜt_šfo_li¡_lookup_·th
(
ÿ·bËPÜts
, 
·th
));

429 
CR
(
gp_pÜt_šfo_li¡_g‘_šfo
(
ÿ·bËPÜts
, 
p
, &
pÜtInfo
));

430 
CR
(
gp_ÿm”a_£t_pÜt_šfo
(
ÿm”a
, 
pÜtInfo
));

433 
CR
(
gp_ÿm”a_š™
(
ÿm”a
, 
cÚ‹xt
));

435 
mes§ge
(
STATUS
, "cÚÃùed cam”a", 
mod–
);

436 
mes§ge
(
STATUS
, "cÚÃùed usšg", 
·th
);

439 
	gfœ¡C­tu»dF¿meTime
 = 0;

440 
	gÿ±u»dF¿mes
 = 0;

441 
	g´ev›w
 = 
çl£
;

442 
	g»lßdOnChªge
 = 
çl£
;

443 
	gcŞËùMsgs
 = 
çl£
;

445 
»lßdCÚfig
();

447 
	gİ’ed
 = 
Œue
;

448  
	gŒue
;

450 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

452 
mes§ge
(
WARNING
, "İ’šg deviû faed", 
e
);

453  
	gçl£
;

460 
boŞ
 
	gDig™®Cam”aC­tu»
::
isO³Ãd
() const

462  
İ’ed
;

468 
	gDig™®Cam”aC­tu»
::
şo£
()

470 
Œy


472 ià(!
äame
.
em±y
())

474 
äame
.
»Ëa£
();

476 ià(
	gÿm”a
)

478 
CR
(
gp_ÿm”a_ex™
(
ÿm”a
, 
cÚ‹xt
));

479 
CR
(
gp_ÿm”a_uÄef
(
ÿm”a
));

480 
	gÿm”a
 = 
NULL
;

482 
	gİ’ed
 = 
çl£
;

483 ià(
	gäames
 = 
g¿bbedF¿mes
.
size
() > 0)

485 
äames
--)

487 
Cam”aFe
 * 
fe
 = 
g¿bbedF¿mes
.
äÚt
();

488 
	gg¿bbedF¿mes
.
pİ_äÚt
();

489 
CR
(
gp_fe_uÄef
(
fe
));

492 ià(
	groÙWidg‘
)

494 
	gwidg‘Info
.
ş—r
();

495 
CR
(
gp_widg‘_uÄef
(
roÙWidg‘
));

496 
	groÙWidg‘
 = 
NULL
;

499 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

501 
mes§ge
(
ERROR
, "ÿÂÙ clo£ deviû…rİ”ly", 
e
);

509 
Cam”aWidg‘
 * 
	gDig™®Cam”aC­tu»
::
g‘G’”icPrİ”ty
(
´İ”tyId
,

510 & 
ouut
) const

512 
	g´İ”tyId
)

514 
	gCV_CAP_PROP_POS_MSEC
:

517 
ouut
 = (
time
(0è- 
fœ¡C­tu»dF¿meTime
) * 1e2;

518  
	gNULL
;

520 
	gCV_CAP_PROP_POS_FRAMES
:

522 
ouut
 = 
ÿ±u»dF¿mes
;

523  
	gNULL
;

525 
	gCV_CAP_PROP_FRAME_WIDTH
:

527 ià(!
äame
.
em±y
())

529 
ouut
 = 
äame
.
cŞs
;

531  
	gNULL
;

533 
	gCV_CAP_PROP_FRAME_HEIGHT
:

535 ià(!
äame
.
em±y
())

537 
ouut
 = 
äame
.
rows
;

539  
	gNULL
;

541 
	gCV_CAP_PROP_FORMAT
:

543 ià(!
äame
.
em±y
())

545 
ouut
 = 
äame
.
ty³
();

547  
	gNULL
;

549 
	gCV_CAP_PROP_FPS
:

551 
whŞeProûssTime
 = 0;

552 
g‘G’”icPrİ”ty
(
CV_CAP_PROP_POS_MSEC
, 
whŞeProûssTime
);

553 
	gwhŞeProûssTime
 /= 1e2;

554 
	gouut
 = 
ÿ±u»dF¿mes
 / 
whŞeProûssTime
;

555  
	gNULL
;

557 
	gCV_CAP_PROP_FRAME_COUNT
:

559 
ouut
 = 
ÿ±u»dF¿mes
;

560  
	gNULL
;

562 
	gCV_CAP_PROP_EXPOSURE
:

563  
fšdWidg‘ByName
(
PROP_EXPOSURE_COMPENSACTION
);

564 
	gCV_CAP_PROP_TRIGGER_DELAY
:

565  
fšdWidg‘ByName
(
PROP_SELF_TIMER_DELAY
);

566 
	gCV_CAP_PROP_ZOOM
:

567  
fšdWidg‘ByName
(
PROP_MANUALFOCUS
);

568 
	gCV_CAP_PROP_FOCUS
:

569  
fšdWidg‘ByName
(
PROP_AUTOFOCUS
);

570 
	gCV_CAP_PROP_ISO_SPEED
:

571  
fšdWidg‘ByName
(
PROP_ISO
);

572 
	gCV_CAP_PROP_SPEED
:

573  
fšdWidg‘ByName
(
PROP_SPEED
);

574 
	gCV_CAP_PROP_APERTURE
:

576 
Cam”aWidg‘
 * 
widg‘
 = 
fšdWidg‘ByName
(
PROP_APERTURE_NIKON
);

577  (
	gwidg‘
 =ğ0è? 
fšdWidg‘ByName
(
PROP_APERTURE_CANON
è: 
widg‘
;

579 
	gCV_CAP_PROP_EXPOSUREPROGRAM
:

580  
fšdWidg‘ByName
(
PROP_EXPOSURE_PROGRAM
);

581 
	gCV_CAP_PROP_VIEWFINDER
:

582  
fšdWidg‘ByName
(
PROP_VIEWFINDER
);

584  
	gNULL
;

591 
	gDig™®Cam”aC­tu»
::
g‘Prİ”ty
(
´İ”tyId
) const

593 
Cam”aWidg‘
 * 
widg‘
 = 
NULL
;

594 
	gouut
 = 0;

595 ià(
	g´İ”tyId
 < 0)

597 
	gwidg‘
 = 
g‘Widg‘
(-
´İ”tyId
);

601 
	g´İ”tyId
)

604 
	gCV_CAP_PROP_GPHOTO2_PREVIEW
:

605  
´ev›w
;

606 
	gCV_CAP_PROP_GPHOTO2_WIDGET_ENUMERATE
:

607 ià(
roÙWidg‘
 =ğ
NULL
)

609  (
	gšŒ_t
è
	gwidg‘Info
.
c_¡r
();

610 
	gCV_CAP_PROP_GPHOTO2_RELOAD_CONFIG
:

612 
	gCV_CAP_PROP_GPHOTO2_RELOAD_ON_CHANGE
:

613  
»lßdOnChªge
;

614 
	gCV_CAP_PROP_GPHOTO2_COLLECT_MSGS
:

615  
cŞËùMsgs
;

616 
	gCV_CAP_PROP_GPHOTO2_FLUSH_MSGS
:

617 
Ï¡Flush
 = 
msgsBufãr
.
¡r
();

618 
	gmsgsBufãr
.
¡r
("");

619 
	gmsgsBufãr
.
ş—r
();

620  (
	gšŒ_t
è
	gÏ¡Flush
.
c_¡r
();

622 
widg‘
 = 
g‘G’”icPrİ”ty
(
´İ”tyId
, 
ouut
);

626 ià(
	gwidg‘
 =ğ
NULL
)

627  
ouut
;

628 
	gŒy


630 
Cam”aWidg‘Ty³
 
	gty³
;

631 
CR
(
gp_widg‘_g‘_ty³
(
widg‘
, &
ty³
));

632 
	gty³
)

634 
	gGP_WIDGET_MENU
:

635 
GP_WIDGET_RADIO
:

637 
út
 = 0, 
	gi
;

638 cÚ¡ * 
	gcu¼’t
;

639 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
cu¼’t
));

640 
CR
(
út
 = 
gp_widg‘_couÁ_choiûs
(
widg‘
));

641 
	gi
 = 0; i < 
	gút
; i++)

643 cÚ¡ *
	gchoiû
;

644 
CR
(
gp_widg‘_g‘_choiû
(
widg‘
, 
i
, &
choiû
));

645 ià(
	g¡d
::
¡rcmp
(
choiû
, 
cu¼’t
) == 0)

647  
i
;

652 
	gGP_WIDGET_TOGGLE
:

654 
v®ue
;

655 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
v®ue
));

656  
	gv®ue
;

658 
	gGP_WIDGET_RANGE
:

660 
v®ue
;

661 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
v®ue
));

662  
	gv®ue
;

666 * 
v®ue
;

667 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
v®ue
));

668  (
	gšŒ_t
è
	gv®ue
;

672 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

674 
	gbuf
[128] = "";

675 
¥rštf
(
buf
, "ÿÂÙ g‘…rİ”ty: %d", 
´İ”tyId
);

676 
mes§ge
(
WARNING
, (cÚ¡ *è
buf
, 
e
);

685 
Cam”aWidg‘
 * 
	gDig™®Cam”aC­tu»
::
£tG’”icPrİ”ty
(
´İ”tyId
,

686 , 
boŞ
 & 
ouut
) const

688 
	g´İ”tyId
)

690 
	gCV_CAP_PROP_POS_MSEC
:

691 
CV_CAP_PROP_POS_FRAMES
:

692 
CV_CAP_PROP_FRAME_WIDTH
:

693 
CV_CAP_PROP_FRAME_HEIGHT
:

694 
CV_CAP_PROP_FPS
:

695 
CV_CAP_PROP_FRAME_COUNT
:

696 
CV_CAP_PROP_FORMAT
:

697 
ouut
 = 
çl£
;

698  
	gNULL
;

699 
	gCV_CAP_PROP_EXPOSURE
:

700  
fšdWidg‘ByName
(
PROP_EXPOSURE_COMPENSACTION
);

701 
	gCV_CAP_PROP_TRIGGER_DELAY
:

702  
fšdWidg‘ByName
(
PROP_SELF_TIMER_DELAY
);

703 
	gCV_CAP_PROP_ZOOM
:

704  
fšdWidg‘ByName
(
PROP_MANUALFOCUS
);

705 
	gCV_CAP_PROP_FOCUS
:

706  
fšdWidg‘ByName
(
PROP_AUTOFOCUS
);

707 
	gCV_CAP_PROP_ISO_SPEED
:

708  
fšdWidg‘ByName
(
PROP_ISO
);

709 
	gCV_CAP_PROP_SPEED
:

710  
fšdWidg‘ByName
(
PROP_SPEED
);

711 
	gCV_CAP_PROP_APERTURE
:

713 
Cam”aWidg‘
 * 
widg‘
 = 
fšdWidg‘ByName
(
PROP_APERTURE_NIKON
);

714  (
	gwidg‘
 =ğ
NULL
è? 
fšdWidg‘ByName
(
PROP_APERTURE_CANON
è: 
widg‘
;

716 
	gCV_CAP_PROP_EXPOSUREPROGRAM
:

717  
fšdWidg‘ByName
(
PROP_EXPOSURE_PROGRAM
);

718 
	gCV_CAP_PROP_VIEWFINDER
:

719  
fšdWidg‘ByName
(
PROP_VIEWFINDER
);

721  
	gNULL
;

728 
boŞ
 
	gDig™®Cam”aC­tu»
::
£tPrİ”ty
(
´İ”tyId
, 
v®ue
)

730 
Cam”aWidg‘
 * 
	gwidg‘
 = 
NULL
;

731 
boŞ
 
	gouut
 = 
çl£
;

732 ià(
	g´İ”tyId
 < 0)

734 
	gwidg‘
 = 
g‘Widg‘
(-
´İ”tyId
);

738 
	g´İ”tyId
)

741 
	gCV_CAP_PROP_GPHOTO2_PREVIEW
:

742 
´ev›w
 = 
v®ue
 != 0;

743  
	gŒue
;

744 
	gCV_CAP_PROP_GPHOTO2_WIDGET_ENUMERATE
:

745  
çl£
;

746 
	gCV_CAP_PROP_GPHOTO2_RELOAD_CONFIG
:

747 
»lßdCÚfig
();

748  
	gŒue
;

749 
	gCV_CAP_PROP_GPHOTO2_RELOAD_ON_CHANGE
:

750 
»lßdOnChªge
 = 
v®ue
 != 0;

751  
	gŒue
;

752 
	gCV_CAP_PROP_GPHOTO2_COLLECT_MSGS
:

753 
cŞËùMsgs
 = 
v®ue
 != 0;

754  
	gŒue
;

755 
	gCV_CAP_PROP_GPHOTO2_FLUSH_MSGS
:

756  
çl£
;

758 
widg‘
 = 
£tG’”icPrİ”ty
(
´İ”tyId
, 
v®ue
, 
ouut
);

762 ià(
	gwidg‘
 =ğ
NULL
)

763  
ouut
;

764 
	gŒy


766 
Cam”aWidg‘Ty³
 
	gty³
;

767 
CR
(
gp_widg‘_g‘_ty³
(
widg‘
, &
ty³
));

768 
	gty³
)

770 
	gGP_WIDGET_RADIO
:

771 
GP_WIDGET_MENU
:

773 
i
 = 
¡©ic_ÿ¡
<>(
v®ue
);

774 *
	gchoiû
;

775 
CR
(
gp_widg‘_g‘_choiû
(
widg‘
, 
i
, (cÚ¡ **)&
choiû
));

776 
CR
(
gp_widg‘_£t_v®ue
(
widg‘
, 
choiû
));

779 
	gGP_WIDGET_TOGGLE
:

781 
i
 = 
¡©ic_ÿ¡
<>(
v®ue
);

782 
CR
(
gp_widg‘_£t_v®ue
(
widg‘
, &
i
));

785 
	gGP_WIDGET_RANGE
:

787 
v
 = 
¡©ic_ÿ¡
<>(
v®ue
);

788 
CR
(
gp_widg‘_£t_v®ue
(
widg‘
, &
v
));

793 
CR
(
gp_widg‘_£t_v®ue
(
widg‘
, (* )(
šŒ_t
 )&
v®ue
));

797 ià(!
	g»lßdOnChªge
)

800 
CR
(
gp_widg‘_£t_chªged
(
widg‘
, 1));

804 * 
	gloÿËTmp
 = 
£oÿË
(
LC_ALL
, "C");

805 
CR
(
gp_ÿm”a_£t_cÚfig
(
ÿm”a
, 
roÙWidg‘
, 
cÚ‹xt
));

806 
£oÿË
(
LC_ALL
, 
loÿËTmp
);

808 ià(
	g»lßdOnChªge
)

810 
»lßdCÚfig
();

812 
CR
(
gp_widg‘_£t_chªged
(
widg‘
, 0));

815 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

817 
	gbuf
[128] = "";

818 
¥rštf
(
buf
, "ÿÂÙ s‘…rİ”ty: %dØ%f", 
´İ”tyId
, 
v®ue
);

819 
mes§ge
(
WARNING
, (cÚ¡ *è
buf
, 
e
);

820  
	gçl£
;

822  
	gŒue
;

829 
boŞ
 
	gDig™®Cam”aC­tu»
::
g¿bF¿me
()

831 
Cam”aFeP©h
 
feP©h
;

832 
Cam”aFe
 * 
	gfe
 = 
NULL
;

833 
	gŒy


835 
CR
(
gp_fe_Ãw
(&
fe
));

837 ià(
	g´ev›w
)

839 
CR
(
gp_ÿm”a_ÿ±u»_´ev›w
(
ÿm”a
, 
fe
, 
cÚ‹xt
));

844 
CR
(
gp_ÿm”a_ÿ±u»
(
ÿm”a
, 
GP_CAPTURE_IMAGE
, &
feP©h
, 
cÚ‹xt
));

845 
CR
(
gp_ÿm”a_fe_g‘
(
ÿm”a
, 
feP©h
.
fŞd”
, feP©h.
Çme
, 
GP_FILE_TYPE_NORMAL
,

846 
fe
, 
cÚ‹xt
));

847 
CR
(
gp_ÿm”a_fe_d–‘e
(
ÿm”a
, 
feP©h
.
fŞd”
, feP©h.
Çme
, 
cÚ‹xt
));

850 ià(
	gfœ¡C­tu»dF¿meTime
 == 0)

852 
fœ¡C­tu»dF¿meTime
 = 
time
(0);

854 
	gÿ±u»dF¿mes
++;

855 
	gg¿bbedF¿mes
.
push_back
(
fe
);

857 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

859 ià(
	gfe
)

860 
gp_fe_uÄef
(
fe
);

861 
mes§ge
(
WARNING
, "ÿÂÙ g¿b‚ew f¿me", 
e
);

862  
	gçl£
;

864  
	gŒue
;

870 
boŞ
 
	gDig™®Cam”aC­tu»
::
»Œ›veF¿me
(, 
OuutA¼ay
 
ouutF¿me
)

872 ià(
	gg¿bbedF¿mes
.
size
() > 0)

874 
Cam”aFe
 * 
	gfe
 = 
g¿bbedF¿mes
.
äÚt
();

875 
	gg¿bbedF¿mes
.
pİ_äÚt
();

876 
	gŒy


878 
»adF¿meFromFe
(
fe
, 
ouutF¿me
);

879 
CR
(
gp_fe_uÄef
(
fe
));

881 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

883 
mes§ge
(
WARNING
, "ÿÂÙ„—d fg¿bbed from deviû", 
e
);

884  
	gçl£
;

889  
	gçl£
;

891  
	gŒue
;

897 
boŞ
 
	gDig™®Cam”aC­tu»
::
deviûExi¡
(
šdex
) const

899  (
numDeviûs
 > 0è&& (
šdex
 <‚umDevices);

905 
	gDig™®Cam”aC­tu»
::
fšdDeviû
(cÚ¡ * 
deviûName
) const

907 cÚ¡ * 
mod–
 = 0;

908 
	gŒy


910 ià(
	gdeviûName
 != 0)

912 
i
 = 0; 
	gi
 < 
	gnumDeviûs
; ++i)

914 
CR
(
gp_li¡_g‘_Çme
(
®lDeviûs
, 
i
, &
mod–
));

915 ià(
	gmod–
 !ğ0 && 
¡r¡r
(
mod–
, 
deviûName
))

917  
	gi
;

922 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

932 
	gDig™®Cam”aC­tu»
::
»lßdCÚfig
(è
throw
 (
GPhÙo2Exû±iÚ
)

934 
¡d
::
o¡ršg¡»am
 
widg‘InfoLi¡SŒ—m
;

936 ià(
	groÙWidg‘
 !ğ
NULL
)

938 
widg‘Info
.
ş—r
();

939 
CR
(
gp_widg‘_uÄef
(
roÙWidg‘
));

940 
	groÙWidg‘
 = 
NULL
;

941 
	gwidg‘s
.
ş—r
();

944 * 
	gloÿËTmp
 = 
£oÿË
(
LC_ALL
, "C");

945 
CR
(
gp_ÿm”a_g‘_cÚfig
(
ÿm”a
, &
roÙWidg‘
, 
cÚ‹xt
));

946 
£oÿË
(
LC_ALL
, 
loÿËTmp
);

947 
	gwidg‘InfoLi¡SŒ—m
 << "id,label,name,info,readonly,type,value,"

948 << 
	glšeD–im™”
;

949 
	gnoOfWidg‘s
 = 
cŞËùWidg‘s
(
widg‘InfoLi¡SŒ—m
, 
roÙWidg‘
) + 1;

950 
	gwidg‘Info
 = 
widg‘InfoLi¡SŒ—m
.
¡r
();

956 
Cam”aWidg‘
 * 
	gDig™®Cam”aC­tu»
::
g‘Widg‘
(
widg‘Id
) const

958 
Cam”aWidg‘
 * 
widg‘
;

959 
	g¡d
::
m­
<, 
	gCam”aWidg‘
 *>::
cÚ¡_™”©Ü
 
™
 = 
widg‘s
.
fšd
(
widg‘Id
);

960 ià(
	g™
 =ğ
widg‘s
.
’d
())

962 
	gwidg‘
 = 
™
->
£cÚd
;

963  
	gwidg‘
;

969 
Cam”aWidg‘
 * 
	gDig™®Cam”aC­tu»
::
fšdWidg‘ByName
(

970 cÚ¡ * 
subName
) const

972 ià(
subName
 !ğ
NULL
)

974 
Œy


976 cÚ¡ * 
Çme
;

977 
	g¡d
::
	tm­
<, 
	tCam”aWidg‘
 *>::
	tcÚ¡_™”©Ü
 
	t™_t
;

978 
™_t
 
	g™
 = 
widg‘s
.
begš
(), 
	g’d
 = widg‘s.
’d
();

979 
	g™
 !ğ
’d
)

981 
CR
(
gp_widg‘_g‘_Çme
(
™
->
£cÚd
, &
Çme
));

982 ià(
¡r¡r
(
Çme
, 
subName
))

984 
	g™
++;

986  (
	g™
 !ğ
’d
è? 
™
->
£cÚd
 : 
NULL
;

988 
ÿtch
 (
GPhÙo2Exû±iÚ
 & 
e
)

990 
mes§ge
(
WARNING
, "”rÜ wh£¬chšg fÜ widg‘", 
e
);

1001 
	gDig™®Cam”aC­tu»
::
»adF¿meFromFe
(
Cam”aFe
 * 
fe
, 
OuutA¼ay
 
ouutF¿me
)

1002 
throw
 (
GPhÙo2Exû±iÚ
)

1005 cÚ¡ * 
	gd©a
;

1006 
	gsize
;

1007 
CR
(
gp_fe_g‘_d©a_ªd_size
(
fe
, &
d©a
, &
size
));

1008 ià(
	gsize
 > 0)

1010 
M©
 
	gbuf
 = M©(1, 
size
, 
CV_8UC1
, (*è
d©a
);

1011 if(!
	gbuf
.
em±y
())

1013 
	gäame
 = 
imdecode
(
buf
, 
CV_LOAD_IMAGE_UNCHANGED
);

1015 
	gäame
.
cİyTo
(
ouutF¿me
);

1024 
	gDig™®Cam”aC­tu»
::
widg‘DesütiÚ
(
¡d
::
o¡»am
 &
os
,

1025 
Cam”aWidg‘
 * 
widg‘
ècÚ¡ 
throw
 (
GPhÙo2Exû±iÚ
)

1027 cÚ¡ * 
	gÏb–
, *
	gÇme
, *
	gšfo
;

1028 
	gid
, 
	g»adÚly
;

1029 
Cam”aWidg‘Ty³
 
	gty³
;

1031 
CR
(
gp_widg‘_g‘_id
(
widg‘
, &
id
));

1032 
CR
(
gp_widg‘_g‘_Ïb–
(
widg‘
, &
Ïb–
));

1033 
CR
(
gp_widg‘_g‘_Çme
(
widg‘
, &
Çme
));

1034 
CR
(
gp_widg‘_g‘_šfo
(
widg‘
, &
šfo
));

1035 
CR
(
gp_widg‘_g‘_ty³
(
widg‘
, &
ty³
));

1036 
CR
(
gp_widg‘_g‘_»adÚly
(
widg‘
, &
»adÚly
));

1038 ià((
	gty³
 =ğ
GP_WIDGET_WINDOW
è|| (
ty³
 =ğ
GP_WIDGET_SECTION
)

1039 || (
ty³
 =ğ
GP_WIDGET_BUTTON
))

1041 
»adÚly
 = 1;

1043 
	gos
 << (
	gid
 - 
	gnoOfWidg‘s
è<< 
	g£·¿tÜ
 << 
	gÏb–
 << s•¬©Ü << 
	gÇme


1044 << 
	g£·¿tÜ
 << 
	gšfo
 << s•¬©Ü << 
	g»adÚly
 << separator;

1046 
	gty³
)

1048 
	gGP_WIDGET_WINDOW
:

1050 
os
 << "wšdow" << 
£·¿tÜ
 << separator;

1053 
	gGP_WIDGET_SECTION
:

1055 
os
 << "£ùiÚ" << 
£·¿tÜ
 << separator;

1058 
	gGP_WIDGET_TEXT
:

1060 
os
 << "‹xt" << 
£·¿tÜ
;

1061 *
	gtxt
;

1062 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
txt
));

1063 
	gos
 << 
	gtxt
 << 
	g£·¿tÜ
;

1066 
	gGP_WIDGET_RANGE
:

1068 
os
 << "¿nge" << 
£·¿tÜ
;

1069 
	gf
, 
	gt
, 
	gb
, 
	gs
;

1070 
CR
(
gp_widg‘_g‘_¿nge
(
widg‘
, &
b
, &
t
, &
s
));

1071 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
f
));

1072 
	gos
 << "(" << 
	gb
 << ":" << 
	gt
 << ":" << 
	gs
 << "):" << 
	gf
 << 
	g£·¿tÜ
;

1075 
	gGP_WIDGET_TOGGLE
:

1077 
os
 << "toggË" << 
£·¿tÜ
;

1078 
	gt
;

1079 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
t
));

1080 
	gos
 << 
	gt
 << 
	g£·¿tÜ
;

1083 
	gGP_WIDGET_RADIO
:

1084 
GP_WIDGET_MENU
:

1086 ià(
ty³
 =ğ
GP_WIDGET_RADIO
)

1088 
os
 << "¿dio" << 
£·¿tÜ
;

1092 
	gos
 << "m’u" << 
	g£·¿tÜ
;

1094 
	gút
 = 0, 
	gi
;

1095 *
	gcu¼’t
;

1096 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
cu¼’t
));

1097 
CR
(
út
 = 
gp_widg‘_couÁ_choiûs
(
widg‘
));

1098 
	gos
 << "(";

1099 
	gi
 = 0; i < 
	gút
; i++)

1101 cÚ¡ *
	gchoiû
;

1102 
CR
(
gp_widg‘_g‘_choiû
(
widg‘
, 
i
, &
choiû
));

1103 
	gos
 << 
	gi
 << ":" << 
	gchoiû
;

1104 ià(
	gi
 + 1 < 
	gút
)

1106 
	gos
 << ";";

1109 
	gos
 << "):" << 
	gcu¼’t
 << 
	g£·¿tÜ
;

1112 
	gGP_WIDGET_BUTTON
:

1114 
os
 << "bu‰Ú" << 
£·¿tÜ
 << separator;

1117 
	gGP_WIDGET_DATE
:

1119 
os
 << "d©e" << 
£·¿tÜ
;

1120 
	gt
;

1121 
time_t
 
	gxtime
;

1122 
tm
 *
	gxtm
;

1123 
	gtimebuf
[200];

1124 
CR
(
gp_widg‘_g‘_v®ue
(
widg‘
, &
t
));

1125 
	gxtime
 = 
t
;

1126 
	gxtm
 = 
loÿÉime
(&
xtime
);

1127 
¡ráime
(
timebuf
, Ñimebuf), "%c", 
xtm
);

1128 
	gos
 << 
	gt
 << ":" << 
	gtimebuf
 << 
	g£·¿tÜ
;

1132  
	gid
;

1139 
	gDig™®Cam”aC­tu»
::
cŞËùWidg‘s
(
¡d
::
o¡»am
 & 
os
,

1140 
Cam”aWidg‘
 * 
widg‘
è
throw
 (
GPhÙo2Exû±iÚ
)

1142 
	gid
 = 
widg‘DesütiÚ
(
os
, 
widg‘
);

1143 
	gos
 << 
	glšeD–im™”
;

1145 
	gwidg‘s
[
id
 - 
noOfWidg‘s
] = 
widg‘
;

1147 
Cam”aWidg‘
 * 
	gchd
;

1148 
Cam”aWidg‘Ty³
 
	gty³
;

1149 
CR
(
gp_widg‘_g‘_ty³
(
widg‘
, &
ty³
));

1150 ià((
	gty³
 =ğ
GP_WIDGET_WINDOW
è|| (
ty³
 =ğ
GP_WIDGET_SECTION
))

1152 
x
 = 0; 
	gx
 < 
gp_widg‘_couÁ_chd»n
(
widg‘
); x++)

1154 
CR
(
gp_widg‘_g‘_chd
(
widg‘
, 
x
, &
chd
));

1155 
	gid
 = 
¡d
::
max
(
id
, 
cŞËùWidg‘s
(
os
, 
chd
));

1158  
	gid
;

1166 
	g‹m¶©e
<
ty³Çme
 
	gOs¡»amPršbË
>

1167 
	gDig™®Cam”aC­tu»
::
mes§ge
(
MsgTy³
 
msgTy³
, cÚ¡ * 
msg
,

1168 
Os¡»amPršbË
 & 
¬g
) const

1170 #ià
defšed
(
NDEBUG
)

1171 ià(
	gcŞËùMsgs
)

1174 
	g¡d
::
o¡ršg¡»am
 
msgC»©Ü
;

1175 
	g¡d
::
¡ršg
 
out
;

1176 
	gty³
 = (è
msgTy³
;

1177 
	gmsgC»©Ü
 << "[gPhÙo2][" << 
	gty³
 << "]: " << 
	gmsg
 << ": " << 
	g¬g


1178 << 
	glšeD–im™”
;

1179 
	gout
 = 
msgC»©Ü
.
¡r
();

1180 #ià!
defšed
(
NDEBUG
)

1181 ià(
	gcŞËùMsgs
)

1184 
	gmsgsBufãr
 << 
	gout
;

1186 #ià!
defšed
(
NDEBUG
)

1187 #ià
defšed
(
WIN32
è|| defšed(
_WIN32
)

1188 ::
OuutDebugSŒšg
(
out
.
c_¡r
());

1190 
åuts
(
out
.
c_¡r
(), 
¡d”r
);

1200 
	gPŒ
<
	gIVideoC­tu»
> 
ü—‹GPhÙo2C­tu»
(
šdex
)

1202 
	gPŒ
<
	gIVideoC­tu»
> 
	gÿ±u»
 = 
makePŒ
<
gphÙo2
::
Dig™®Cam”aC­tu»
>(
šdex
);

1204 ià(
	gÿ±u»
->
isO³Ãd
())

1205  
	gÿ±u»
;

1207  
	gPŒ
<
	ggphÙo2
::
Dig™®Cam”aC­tu»
>();

1215 
	gPŒ
<
	gIVideoC­tu»
> 
ü—‹GPhÙo2C­tu»
(cÚ¡ 
SŒšg
 & 
deviûName
)

1217 
	gPŒ
<
	gIVideoC­tu»
> 
	gÿ±u»
 = 
makePŒ
<
gphÙo2
::
Dig™®Cam”aC­tu»
>(
deviûName
);

1219 ià(
	gÿ±u»
->
isO³Ãd
())

1220  
	gÿ±u»
;

1222  
	gPŒ
<
	ggphÙo2
::
Dig™®Cam”aC­tu»
>();

	@cap_gstreamer.cpp

50 
	~"´ecomp.hµ
"

51 
	~<uni¡d.h
>

52 
	~<¡ršg.h
>

53 
	~<g¡/g¡.h
>

54 
	~<g¡/g¡bufãr.h
>

55 
	~<g¡/video/video.h
>

56 
	~<g¡/­p/g¡­psšk.h
>

57 
	~<g¡/­p/g¡­p¤c.h
>

58 
	~<g¡/riff/riff-medŸ.h
>

59 
	~<g¡/pbuts/missšg-¶ugšs.h
>

61 
	#VERSION_NUM
(
majÜ
, 
mšÜ
, 
miüo
è(majÜ * 1000000 + mšÜ * 1000 + miüo)

	)

62 
	#FULL_GST_VERSION
 
	`VERSION_NUM
(
GST_VERSION_MAJOR
, 
GST_VERSION_MINOR
, 
GST_VERSION_MICRO
)

	)

64 #ià
FULL_GST_VERSION
 >ğ
VERSION_NUM
(0,10,32)

65 
	~<g¡/pbuts/’codšg-´ofe.h
>

70 #ifdeà
NDEBUG


71 
	#CV_WARN
(
mes§ge
)

	)

73 
	#CV_WARN
(
mes§ge
è
	`årštf
(
¡d”r
, "w¬nšg: % (%s:%d)\n", mes§ge, 
__FILE__
, 
__LINE__
)

	)

76 #ià
GST_VERSION_MAJOR
 == 0

77 
	#COLOR_ELEM
 "ffm³gcŞÜ¥aû"

	)

78 #–ià
FULL_GST_VERSION
 < 
VERSION_NUM
(1,5,0)

79 
	#COLOR_ELEM
 "videocÚv”t"

	)

81 
	#COLOR_ELEM
 "autovideocÚv”t"

	)

84 
toF¿ùiÚ
(
decim®
, &
num”©Ü
, &
d’omš©Ü
);

85 
hªdËMes§ge
(
G¡EËm’t
 * 
p–še
);

88 
	gcv
::
Mu‹x
 
g¡_š™Ÿliz”_mu‹x
;

94 şas 
	cg¡_š™Ÿliz”


96 
	mpublic
:

97 
	$š™
()

99 
g¡_š™Ÿliz”_mu‹x
.
	`lock
();

100 
g¡_š™Ÿliz”
 
š™
;

101 
g¡_š™Ÿliz”_mu‹x
.
	`uÆock
();

103 
´iv©e
:

104 
	$g¡_š™Ÿliz”
()

106 
	`g¡_š™
(
NULL
, NULL);

110 
	}
}

117 şas 
	cCvC­tu»_GSŒ—m”
 : 
public
 
CvC­tu»


119 
public
:

120 
	$CvC­tu»_GSŒ—m”
(è{ 
	`š™
(); }

121 
vœtu®
 ~
	$CvC­tu»_GSŒ—m”
(è{ 
	`şo£
(); 
	}
}

123 
vœtu®
 
boŞ
 
İ’
Ğ
ty³
, cÚ¡ * 
f’ame
 );

124 
vœtu®
 
şo£
();

126 
vœtu®
 
	$g‘Prİ”ty
() const;

127 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

128 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

129 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

131 
´Ùeùed
:

132 
	`š™
();

133 
boŞ
 
	`»İ’
();

134 
boŞ
 
	`isP–šePÏyšg
();

135 
	`¡¬tP–še
();

136 
	`¡İP–še
();

137 
	`»¡¬tP–še
();

138 
	`£tF‹r
(cÚ¡ * 
´İ
, 
ty³
, 
v1
, 
v2
 = 0);

139 
	`»moveF‹r
(cÚ¡ *
f‹r
);

140 
	`ÃwPad
(
G¡EËm’t
 *
my–em’t
,

141 
G¡Pad
 *
·d
,

142 
gpoš‹r
 
d©a
);

143 
G¡EËm’t
* 
p–še
;

144 
G¡EËm’t
* 
uridecodebš
;

145 
G¡EËm’t
* 
cŞÜ
;

146 
G¡EËm’t
* 
sšk
;

147 #ià
GST_VERSION_MAJOR
 > 0

148 
G¡Sam¶e
* 
§m¶e
;

149 
G¡M­Info
* 
šfo
;

151 
G¡Bufãr
* 
bufãr
;

152 
G¡C­s
* 
ÿps
;

153 
I¶Image
* 
äame
;

154 
gšt64
 
du¿tiÚ
;

155 
gšt
 
width
;

156 
gšt
 
height
;

157 
ås
;

158 
	}
};

164 
	gCvC­tu»_GSŒ—m”
::
	$š™
()

166 
p–še
 = 
NULL
;

167 
uridecodebš
 = 
NULL
;

168 
cŞÜ
 = 
NULL
;

169 
sšk
 = 
NULL
;

170 #ià
GST_VERSION_MAJOR
 > 0

171 
§m¶e
 = 
NULL
;

172 
šfo
 = 
Ãw
 
G¡M­Info
;

174 
bufãr
 = 
NULL
;

175 
ÿps
 = 
NULL
;

176 
äame
 = 
NULL
;

177 
du¿tiÚ
 = -1;

178 
width
 = -1;

179 
height
 = -1;

180 
ås
 = -1;

181 
	}
}

187 
	gCvC­tu»_GSŒ—m”
::
	$şo£
()

189 ià(
	`isP–šePÏyšg
())

190 
this
->
	`¡İP–še
();

192 if(
p–še
) {

193 
	`g¡_–em’t_£t_¡©e
(
	`GST_ELEMENT
(
p–še
), 
GST_STATE_NULL
);

194 
	`g¡_objeù_uÄef
(
	`GST_OBJECT
(
p–še
));

195 
p–še
 = 
NULL
;

198 
du¿tiÚ
 = -1;

199 
width
 = -1;

200 
height
 = -1;

201 
ås
 = -1;

202 
	}
}

210 
boŞ
 
	gCvC­tu»_GSŒ—m”
::
	$g¿bF¿me
()

212 if(!
p–še
)

213  
çl£
;

216 if(!
this
->
	`isP–šePÏyšg
())

217 
this
->
	`¡¬tP–še
();

220 if(
	`g¡_­p_sšk_is_eos
(
	`GST_APP_SINK
(
sšk
)))

221  
çl£
;

223 #ià
GST_VERSION_MAJOR
 == 0

224 if(
bufãr
)

225 
	`g¡_bufãr_uÄef
(
bufãr
);

227 
bufãr
 = 
	`g¡_­p_sšk_puÎ_bufãr
(
	`GST_APP_SINK
(
sšk
));

229 if(
§m¶e
)

230 
	`g¡_§m¶e_uÄef
(
§m¶e
);

232 
§m¶e
 = 
	`g¡_­p_sšk_puÎ_§m¶e
(
	`GST_APP_SINK
(
sšk
));

234 if(!
§m¶e
)

235  
çl£
;

237 
bufãr
 = 
	`g¡_§m¶e_g‘_bufãr
(
§m¶e
);

240 if(!
bufãr
)

241  
çl£
;

243  
Œue
;

244 
	}
}

251 
I¶Image
 * 
	gCvC­tu»_GSŒ—m”
::
	$»Œ›veF¿me
()

253 if(!
bufãr
)

257 if(!
äame
)

259 #ià
GST_VERSION_MAJOR
 == 0

260 
G¡C­s
* 
bufãr_ÿps
 = 
	`g¡_bufãr_g‘_ÿps
(
bufãr
);

262 
G¡C­s
* 
bufãr_ÿps
 = 
	`g¡_§m¶e_g‘_ÿps
(
§m¶e
);

265 
	`as£¹
(
	`g¡_ÿps_g‘_size
(
bufãr_ÿps
) == 1);

266 
G¡SŒuùu»
* 
¡ruùu»
 = 
	`g¡_ÿps_g‘_¡ruùu»
(
bufãr_ÿps
, 0);

269 if(!
	`g¡_¡ruùu»_g‘_št
(
¡ruùu»
, "width", &
width
) ||

270 !
	`g¡_¡ruùu»_g‘_št
(
¡ruùu»
, "height", &
height
))

272 
	`g¡_ÿps_uÄef
(
bufãr_ÿps
);

276 
d•th
 = 3;

277 #ià
GST_VERSION_MAJOR
 > 0

278 
d•th
 = 0;

279 cÚ¡ 
gch¬
* 
Çme
 = 
	`g¡_¡ruùu»_g‘_Çme
(
¡ruùu»
);

280 cÚ¡ 
gch¬
* 
fÜm©
 = 
	`g¡_¡ruùu»_g‘_¡ršg
(
¡ruùu»
, "format");

282 ià(!
Çme
 || !
fÜm©
)

292 ià(
	`¡rÿ£cmp
(
Çme
, "video/x-raw") == 0)

294 ià(
	`¡rÿ£cmp
(
fÜm©
, "BGR") == 0) {

295 
d•th
 = 3;

297 if(
	`¡rÿ£cmp
(
fÜm©
, "GRAY8") == 0){

298 
d•th
 = 1;

301 ià(
	`¡rÿ£cmp
(
Çme
, "video/x-bayer") == 0)

303 
d•th
 = 1;

306 ià(
d•th
 > 0) {

307 
äame
 = 
	`cvC»©eImageH—d”
(
	`cvSize
(
width
, 
height
), 
IPL_DEPTH_8U
, 
d•th
);

309 
	`g¡_ÿps_uÄef
(
bufãr_ÿps
);

313 
	`g¡_ÿps_uÄef
(
bufãr_ÿps
);

318 #ià
GST_VERSION_MAJOR
 == 0

319 
äame
->
imageD©a
 = (*)
	`GST_BUFFER_DATA
(
bufãr
);

324 
gboŞ—n
 
sucûss
 = 
	`g¡_bufãr_m­
(
bufãr
,
šfo
, (
G¡M­FÏgs
)
GST_MAP_READ
);

325 ià(!
sucûss
){

330 
äame
->
imageD©a
 = (*)
šfo
->
d©a
;

331 
	`g¡_bufãr_unm­
(
bufãr
,
šfo
);

334  
äame
;

335 
	}
}

342 
boŞ
 
	gCvC­tu»_GSŒ—m”
::
	$isP–šePÏyšg
()

344 
G¡S‹
 
cu¼’t
, 
³ndšg
;

345 
G¡ClockTime
 
timeout
 = 5*
GST_SECOND
;

346 if(!
	`GST_IS_ELEMENT
(
p–še
)){

347  
çl£
;

350 
G¡S‹ChªgeR‘uº
 
»t
 = 
	`g¡_–em’t_g‘_¡©e
(
	`GST_ELEMENT
(
p–še
),&
cu¼’t
, &
³ndšg
, 
timeout
);

351 ià(!
»t
){

353  
çl£
;

356  
cu¼’t
 =ğ
GST_STATE_PLAYING
;

357 
	}
}

363 
	gCvC­tu»_GSŒ—m”
::
	$¡¬tP–še
()

365 
	`CV_FUNCNAME
("icvStartPipeline");

367 
__BEGIN__
;

370 
G¡S‹ChªgeR‘uº
 
¡©us
 = 
	`g¡_–em’t_£t_¡©e
(
	`GST_ELEMENT
(
p–še
), 
GST_STATE_PLAYING
);

371 ià(
¡©us
 =ğ
GST_STATE_CHANGE_ASYNC
)

374 
G¡S‹
 
¡1
;

375 
G¡S‹
 
¡2
;

376 
¡©us
 = 
	`g¡_–em’t_g‘_¡©e
(
p–še
, &
¡1
, &
¡2
, 
GST_CLOCK_TIME_NONE
);

378 ià(
¡©us
 =ğ
GST_STATE_CHANGE_FAILURE
)

380 
	`hªdËMes§ge
(
p–še
);

381 
	`g¡_objeù_uÄef
(
p–še
);

382 
p–še
 = 
NULL
;

383 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: unableo start…ipeline\n");

388 
	`hªdËMes§ge
(
p–še
);

389 
__END__
;

390 
	}
}

397 
	gCvC­tu»_GSŒ—m”
::
	$¡İP–še
()

399 
	`CV_FUNCNAME
("icvStopPipeline");

401 
__BEGIN__
;

404 if(
	`g¡_–em’t_£t_¡©e
(
	`GST_ELEMENT
(
p–še
), 
GST_STATE_NULL
) ==

405 
GST_STATE_CHANGE_FAILURE
) {

406 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: unableo stop…ipeline\n");

407 
	`g¡_objeù_uÄef
(
p–še
);

408 
p–še
 = 
NULL
;

411 
__END__
;

412 
	}
}

418 
	gCvC­tu»_GSŒ—m”
::
	$»¡¬tP–še
()

420 
	`hªdËMes§ge
(
p–še
);

422 
this
->
	`¡İP–še
();

423 
this
->
	`¡¬tP–še
();

424 
	}
}

435 
	gCvC­tu»_GSŒ—m”
::
	$£tF‹r
(cÚ¡ *
´İ
, 
ty³
, 
v1
, 
v2
)

438 if(!
ÿps
 || !Ğ
	`GST_IS_CAPS
 (caps) ))

440 if(
ty³
 =ğ
G_TYPE_INT
)

442 #ià
GST_VERSION_MAJOR
 == 0

443 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-¿w-rgb", 
´İ
, 
ty³
, 
v1
, 
NULL
);

445 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-¿w","fÜm©",
G_TYPE_STRING
,"BGR", 
´İ
, 
ty³
, 
v1
, 
NULL
);

450 #ià
GST_VERSION_MAJOR
 == 0

451 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-¿w-rgb", 
´İ
, 
ty³
, 
v1
, 
v2
, 
NULL
);

453 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-¿w","fÜm©",
G_TYPE_STRING
,"BGR", 
´İ
, 
ty³
, 
v1
, 
v2
, 
NULL
);

459 #ià
GST_VERSION_MAJOR
 > 0

460 ià(! 
	`g¡_ÿps_is_wr™abË
(
ÿps
))

461 
ÿps
 = 
	`g¡_ÿps_make_wr™abË
 (caps);

463 if(
ty³
 =ğ
G_TYPE_INT
){

464 
	`g¡_ÿps_£t_sim¶e
(
ÿps
, 
´İ
, 
ty³
, 
v1
, 
NULL
);

466 
	`g¡_ÿps_£t_sim¶e
(
ÿps
, 
´İ
, 
ty³
, 
v1
, 
v2
, 
NULL
);

470 #ià
GST_VERSION_MAJOR
 > 0

471 
ÿps
 = 
	`g¡_ÿps_fix©e
(caps);

474 
	`g¡_­p_sšk_£t_ÿps
(
	`GST_APP_SINK
(
sšk
), 
ÿps
);

476 
	}
}

484 
	gCvC­tu»_GSŒ—m”
::
	$»moveF‹r
(cÚ¡ *
f‹r
)

486 if(!
ÿps
)

489 #ià
GST_VERSION_MAJOR
 > 0

490 ià(! 
	`g¡_ÿps_is_wr™abË
(
ÿps
))

491 
ÿps
 = 
	`g¡_ÿps_make_wr™abË
 (caps);

494 
G¡SŒuùu»
 *
s
 = 
	`g¡_ÿps_g‘_¡ruùu»
(
ÿps
, 0);

495 
	`g¡_¡ruùu»_»move_f›ld
(
s
, 
f‹r
);

497 
	`g¡_­p_sšk_£t_ÿps
(
	`GST_APP_SINK
(
sšk
), 
ÿps
);

498 
	}
}

507 
	gCvC­tu»_GSŒ—m”
::
	$ÃwPad
(
G¡EËm’t
 * ,

508 
G¡Pad
 *
·d
,

509 
gpoš‹r
 
d©a
)

511 
G¡Pad
 *
sšk·d
;

512 
G¡EËm’t
 *
cŞÜ
 = (G¡EËm’ˆ*è
d©a
;

514 
sšk·d
 = 
	`g¡_–em’t_g‘_¡©ic_·d
 (
cŞÜ
, "sink");

515 ià(!
sšk·d
){

520 
	`g¡_·d_lšk
 (
·d
, 
sšk·d
);

521 
	`g¡_objeù_uÄef
 (
sšk·d
);

522 
	}
}

555 
boŞ
 
	gCvC­tu»_GSŒ—m”
::
	$İ’
Ğ
ty³
, cÚ¡ * 
f’ame
 )

557 
	`CV_FUNCNAME
("cvCaptureFromCAM_GStreamer");

559 
__BEGIN__
;

561 
g¡_š™Ÿliz”
::
	`š™
();

563 
boŞ
 
fe
 = 
çl£
;

564 
boŞ
 
¡»am
 = 
çl£
;

565 
boŞ
 
mªu®p–še
 = 
çl£
;

566 *
uri
 = 
NULL
;

567 
uridecodebš
 = 
NULL
;

568 
G¡EËm’tFaùÜy
 * 
‹¡çc
;

569 
G¡S‹ChªgeR‘uº
 
¡©us
;

571 ià(
ty³
 =ğ
CV_CAP_GSTREAMER_V4L
){

572 
‹¡çc
 = 
	`g¡_–em’t_çùÜy_fšd
("v4lsrc");

573 ià(!
‹¡çc
){

574  
çl£
;

576 
	`g_objeù_uÄef
(
	`G_OBJECT
(
‹¡çc
));

577 
f’ame
 = "v4l¤ø! " 
COLOR_ELEM
 " !‡ppsink";

579 ià(
ty³
 =ğ
CV_CAP_GSTREAMER_V4L2
){

580 
‹¡çc
 = 
	`g¡_–em’t_çùÜy_fšd
("v4l2src");

581 ià(!
‹¡çc
){

582  
çl£
;

584 
	`g_objeù_uÄef
(
	`G_OBJECT
(
‹¡çc
));

585 
f’ame
 = "v4l2¤ø! " 
COLOR_ELEM
 " !‡ppsink";

593 if(!
	`g¡_uri_is_v®id
(
f’ame
))

595 
uri
 = 
	`»®·th
(
f’ame
, 
NULL
);

596 
¡»am
 = 
çl£
;

597 if(
uri
)

599 
uri
 = 
	`g_f’ame_to_uri
(uri, 
NULL
, NULL);

600 if(
uri
)

602 
fe
 = 
Œue
;

606 
	`CV_WARN
("GStreamer: Error opening file\n");

607 
	`şo£
();

608  
çl£
;

613 
GE¼Ü
 *
”r
 = 
NULL
;

614 
uridecodebš
 = 
	`g¡_·r£_Ïunch
(
f’ame
, &
”r
);

615 if(!
uridecodebš
)

617 
	`årštf
(
¡d”r
, "GSŒ—m”: E¼Ü o³nšg bš: %s\n", 
”r
->
mes§ge
);

618  
çl£
;

620 
¡»am
 = 
Œue
;

621 
mªu®p–še
 = 
Œue
;

624 
¡»am
 = 
Œue
;

625 
uri
 = 
	`g_¡rdup
(
f’ame
);

628 
boŞ
 
–em’t_äom_uri
 = 
çl£
;

629 if(!
uridecodebš
)

635 
gch¬
 * 
´ÙocŞ
 = 
	`g¡_uri_g‘_´ÙocŞ
(
uri
);

636 ià(!
	`¡rÿ£cmp
(
´ÙocŞ
 , "v4l2"))

638 #ià
GST_VERSION_MAJOR
 == 0

639 
uridecodebš
 = 
	`g¡_–em’t_make_äom_uri
(
GST_URI_SRC
, 
uri
, "src");

641 
uridecodebš
 = 
	`g¡_–em’t_make_äom_uri
(
GST_URI_SRC
, 
uri
, "¤c", 
NULL
);

643 
–em’t_äom_uri
 = 
Œue
;

645 
uridecodebš
 = 
	`g¡_–em’t_çùÜy_make
("uridecodebš", 
NULL
);

646 
	`g_objeù_£t
(
	`G_OBJECT
(
uridecodebš
), "uri", 
uri
, 
NULL
);

648 
	`g_ä“
(
´ÙocŞ
);

650 if(!
uridecodebš
) {

652 
	`şo£
();

653  
çl£
;

657 if(
mªu®p–še
)

659 
G¡I‹¿tÜ
 *
™
 = 
NULL
;

660 #ià
GST_VERSION_MAJOR
 == 0

661 
™
 = 
	`g¡_bš_™”©e_sšks
(
	`GST_BIN
(
uridecodebš
));

662 if(
	`g¡_™”©Ü_Ãxt
(
™
, (
gpoš‹r
 *)&
sšk
è!ğ
GST_ITERATOR_OK
) {

663 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot find‡ppsink in manual…ipeline\n");

664  
çl£
;

667 
™
 = 
	`g¡_bš_™”©e_sšks
 (
	`GST_BIN
(
uridecodebš
));

669 
gboŞ—n
 
dÚe
 = 
FALSE
;

670 
G¡EËm’t
 *
–em’t
 = 
NULL
;

671 
gch¬
* 
Çme
 = 
NULL
;

672 
GV®ue
 
v®ue
 = 
G_VALUE_INIT
;

674 !
dÚe
) {

675 
	`g¡_™”©Ü_Ãxt
 (
™
, &
v®ue
)) {

676 
GST_ITERATOR_OK
:

677 
–em’t
 = 
	`GST_ELEMENT
 (
	`g_v®ue_g‘_objeù
 (&
v®ue
));

678 
Çme
 = 
	`g¡_–em’t_g‘_Çme
(
–em’t
);

679 ià(
Çme
){

680 if(
	`¡r¡r
(
Çme
, "İ’cvsšk"è!ğ
NULL
 || strstr(name, "appsink") != NULL) {

681 
sšk
 = 
	`GST_ELEMENT
 ( 
	`g¡_objeù_»f
 (
–em’t
) );

682 
dÚe
 = 
TRUE
;

684 
	`g_ä“
(
Çme
);

686 
	`g_v®ue_un£t
 (&
v®ue
);

689 
GST_ITERATOR_RESYNC
:

690 
	`g¡_™”©Ü_»sync
 (
™
);

692 
GST_ITERATOR_ERROR
:

693 
GST_ITERATOR_DONE
:

694 
dÚe
 = 
TRUE
;

698 
	`g¡_™”©Ü_ä“
 (
™
);

701 ià(!
sšk
){

702 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot find‡ppsink in manual…ipeline\n");

703  
çl£
;

706 
p–še
 = 
uridecodebš
;

710 
p–še
 = 
	`g¡_p–še_Ãw
(
NULL
);

713 
cŞÜ
 = 
	`g¡_–em’t_çùÜy_make
(
COLOR_ELEM
, 
NULL
);

714 
sšk
 = 
	`g¡_–em’t_çùÜy_make
("­psšk", 
NULL
);

716 
	`g¡_bš_add_mªy
(
	`GST_BIN
(
p–še
), 
uridecodebš
, 
cŞÜ
, 
sšk
, 
NULL
);

718 if(
–em’t_äom_uri
) {

719 if(!
	`g¡_–em’t_lšk
(
uridecodebš
, 
cŞÜ
)) {

720 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot†ink color -> sink\n");

721 
	`g¡_objeù_uÄef
(
p–še
);

722 
p–še
 = 
NULL
;

723  
çl£
;

726 
	`g_sigÇl_cÚÃù
(
uridecodebš
, "·d-added", 
	`G_CALLBACK
(
ÃwPad
), 
cŞÜ
);

729 if(!
	`g¡_–em’t_lšk
(
cŞÜ
, 
sšk
)) {

730 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot†ink color -> sink\n");

731 
	`g¡_objeù_uÄef
(
p–še
);

732 
p–še
 = 
NULL
;

733  
çl£
;

738 
	`g¡_­p_sšk_£t_max_bufãrs
 (
	`GST_APP_SINK
(
sšk
), 1);

739 
	`g¡_­p_sšk_£t_drİ
 (
	`GST_APP_SINK
(
sšk
), 
¡»am
);

741 
	`g¡_­p_sšk_£t_em™_sigÇls
 (
	`GST_APP_SINK
(
sšk
), 0);

743 #ià
GST_VERSION_MAJOR
 == 0

744 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-raw-rgb",

745 "bµ", 
G_TYPE_INT
, 24,

746 "»d_mask", 
G_TYPE_INT
, 0x0000FF,

747 "g»’_mask", 
G_TYPE_INT
, 0x00FF00,

748 "blue_mask", 
G_TYPE_INT
, 0xFF0000,

749 
NULL
);

752 
ÿps
 = 
	`g¡_ÿps_äom_¡ršg
("video/x-raw, format=(string){BGR, GRAY8}; video/x-bayer,format=(string){rggb,bggr,grbg,gbrg}");

754 
	`g¡_­p_sšk_£t_ÿps
(
	`GST_APP_SINK
(
sšk
), 
ÿps
);

755 
	`g¡_ÿps_uÄef
(
ÿps
);

758 ià(
fe
)

760 
¡©us
 = 
	`g¡_–em’t_£t_¡©e
(
	`GST_ELEMENT
(
p–še
), 
GST_STATE_PAUSED
);

761 ià(
¡©us
 =ğ
GST_STATE_CHANGE_ASYNC
)

764 
G¡S‹
 
¡1
;

765 
G¡S‹
 
¡2
;

766 
¡©us
 = 
	`g¡_–em’t_g‘_¡©e
(
p–še
, &
¡1
, &
¡2
, 
GST_CLOCK_TIME_NONE
);

768 ià(
¡©us
 =ğ
GST_STATE_CHANGE_FAILURE
)

770 
	`hªdËMes§ge
(
p–še
);

771 
	`g¡_objeù_uÄef
(
p–še
);

772 
p–še
 = 
NULL
;

773 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: unableo start…ipeline\n");

774  
çl£
;

777 
G¡FÜm©
 
fÜm©
;

779 
fÜm©
 = 
GST_FORMAT_DEFAULT
;

780 #ià
GST_VERSION_MAJOR
 == 0

781 if(!
	`g¡_–em’t_qu”y_du¿tiÚ
(
sšk
, &
fÜm©
, &
du¿tiÚ
))

783 if(!
	`g¡_–em’t_qu”y_du¿tiÚ
(
sšk
, 
fÜm©
, &
du¿tiÚ
))

786 
	`hªdËMes§ge
(
p–še
);

787 
	`CV_WARN
("GStreamer: unableo query duration of stream");

788 
du¿tiÚ
 = -1;

791 
G¡Pad
* 
·d
 = 
	`g¡_–em’t_g‘_¡©ic_·d
(
cŞÜ
, "src");

792 #ià
GST_VERSION_MAJOR
 == 0

793 
G¡C­s
* 
bufãr_ÿps
 = 
	`g¡_·d_g‘_ÿps
(
·d
);

795 
G¡C­s
* 
bufãr_ÿps
 = 
	`g¡_·d_g‘_cu¼’t_ÿps
(
·d
);

797 cÚ¡ 
G¡SŒuùu»
 *
¡ruùu»
 = 
	`g¡_ÿps_g‘_¡ruùu»
 (
bufãr_ÿps
, 0);

799 ià(!
	`g¡_¡ruùu»_g‘_št
 (
¡ruùu»
, "width", &
width
))

801 
	`CV_WARN
("Cannot query video width\n");

804 ià(!
	`g¡_¡ruùu»_g‘_št
 (
¡ruùu»
, "height", &
height
))

806 
	`CV_WARN
("Cannot query video heigth\n");

809 
gšt
 
num
 = 0, 
d’om
=1;

810 if(!
	`g¡_¡ruùu»_g‘_äaùiÚ
(
¡ruùu»
, "äam”©e", &
num
, &
d’om
))

812 
	`CV_WARN
("Cannot query video fps\n");

815 
ås
 = ()
num
/()
d’om
;

821 
du¿tiÚ
 = -1;

822 
width
 = -1;

823 
height
 = -1;

824 
ås
 = -1;

827 
__END__
;

829  
Œue
;

830 
	}
}

841 
	gCvC­tu»_GSŒ—m”
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

843 
G¡FÜm©
 
fÜm©
;

844 
gšt64
 
v®ue
;

845 
gboŞ—n
 
¡©us
;

847 #ià
GST_VERSION_MAJOR
 == 0

848 
	#FORMAT
 &
fÜm©


	)

850 
	#FORMAT
 
fÜm©


	)

853 if(!
p–še
) {

854 
	`CV_WARN
("GStreamer:‚o…ipeline");

855  
çl£
;

858 
´İId
) {

859 
CV_CAP_PROP_POS_MSEC
:

860 
fÜm©
 = 
GST_FORMAT_TIME
;

861 
¡©us
 = 
	`g¡_–em’t_qu”y_pos™iÚ
(
sšk
, 
FORMAT
, &
v®ue
);

862 if(!
¡©us
) {

863 
	`CV_WARN
("GStreamer: unableo query…osition of stream");

864  
çl£
;

866  
v®ue
 * 1e-6;

867 
CV_CAP_PROP_POS_FRAMES
:

868 
fÜm©
 = 
GST_FORMAT_DEFAULT
;

869 
¡©us
 = 
	`g¡_–em’t_qu”y_pos™iÚ
(
sšk
, 
FORMAT
, &
v®ue
);

870 if(!
¡©us
) {

871 
	`CV_WARN
("GStreamer: unableo query…osition of stream");

872  
çl£
;

874  
v®ue
;

875 
CV_CAP_PROP_POS_AVI_RATIO
:

876 
fÜm©
 = 
GST_FORMAT_PERCENT
;

877 
¡©us
 = 
	`g¡_–em’t_qu”y_pos™iÚ
(
sšk
, 
FORMAT
, &
v®ue
);

878 if(!
¡©us
) {

879 
	`CV_WARN
("GStreamer: unableo query…osition of stream");

880  
çl£
;

882  ((è
v®ue
è/ 
GST_FORMAT_PERCENT_MAX
;

883 
CV_CAP_PROP_FRAME_WIDTH
:

884  
width
;

885 
CV_CAP_PROP_FRAME_HEIGHT
:

886  
height
;

887 
CV_CAP_PROP_FPS
:

888  
ås
;

889 
CV_CAP_PROP_FOURCC
:

891 
CV_CAP_PROP_FRAME_COUNT
:

892  
du¿tiÚ
;

893 
CV_CAP_PROP_FORMAT
:

894 
CV_CAP_PROP_MODE
:

895 
CV_CAP_PROP_BRIGHTNESS
:

896 
CV_CAP_PROP_CONTRAST
:

897 
CV_CAP_PROP_SATURATION
:

898 
CV_CAP_PROP_HUE
:

899 
CV_CAP_PROP_GAIN
:

900 
CV_CAP_PROP_CONVERT_RGB
:

902 
CV_CAP_GSTREAMER_QUEUE_LENGTH
:

903 if(!
sšk
) {

904 
	`CV_WARN
("GStreamer:here is‚o sink yet");

905  
çl£
;

907  
	`g¡_­p_sšk_g‘_max_bufãrs
(
	`GST_APP_SINK
(
sšk
));

909 
	`CV_WARN
("GStreamer: unhandled…roperty");

913 #undeà
FORMAT


915  
çl£
;

916 
	}
}

926 
boŞ
 
	gCvC­tu»_GSŒ—m”
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

928 
G¡FÜm©
 
fÜm©
;

929 
G¡S“kFÏgs
 
æags
;

931 if(!
p–še
) {

932 
	`CV_WARN
("GStreamer:‚o…ipeline");

933  
çl£
;

936 
boŞ
 
wasPÏyšg
 = 
this
->
	`isP–šePÏyšg
();

937 ià(
wasPÏyšg
)

938 
this
->
	`¡İP–še
();

941 
´İId
) {

942 
CV_CAP_PROP_POS_MSEC
:

943 
fÜm©
 = 
GST_FORMAT_TIME
;

944 
æags
 = (
G¡S“kFÏgs
è(
GST_SEEK_FLAG_FLUSH
|
GST_SEEK_FLAG_ACCURATE
);

945 if(!
	`g¡_–em’t_£ek_sim¶e
(
	`GST_ELEMENT
(
p–še
), 
fÜm©
,

946 
æags
, (
gšt64
è(
v®ue
 * 
GST_MSECOND
))) {

947 
	`CV_WARN
("GStreamer: unableo seek");

950 
CV_CAP_PROP_POS_FRAMES
:

951 
fÜm©
 = 
GST_FORMAT_DEFAULT
;

952 
æags
 = (
G¡S“kFÏgs
è(
GST_SEEK_FLAG_FLUSH
|
GST_SEEK_FLAG_ACCURATE
);

953 if(!
	`g¡_–em’t_£ek_sim¶e
(
	`GST_ELEMENT
(
p–še
), 
fÜm©
,

954 
æags
, (
gšt64
è
v®ue
)) {

955 
	`CV_WARN
("GStreamer: unableo seek");

958 
CV_CAP_PROP_POS_AVI_RATIO
:

959 
fÜm©
 = 
GST_FORMAT_PERCENT
;

960 
æags
 = (
G¡S“kFÏgs
è(
GST_SEEK_FLAG_FLUSH
|
GST_SEEK_FLAG_ACCURATE
);

961 if(!
	`g¡_–em’t_£ek_sim¶e
(
	`GST_ELEMENT
(
p–še
), 
fÜm©
,

962 
æags
, (
gšt64
è(
v®ue
 * 
GST_FORMAT_PERCENT_MAX
))) {

963 
	`CV_WARN
("GStreamer: unableo seek");

966 
CV_CAP_PROP_FRAME_WIDTH
:

967 if(
v®ue
 > 0)

968 
	`£tF‹r
("width", 
G_TYPE_INT
, (è
v®ue
, 0);

970 
	`»moveF‹r
("width");

972 
CV_CAP_PROP_FRAME_HEIGHT
:

973 if(
v®ue
 > 0)

974 
	`£tF‹r
("height", 
G_TYPE_INT
, (è
v®ue
, 0);

976 
	`»moveF‹r
("height");

978 
CV_CAP_PROP_FPS
:

979 if(
v®ue
 > 0) {

980 
num
=0, 
d’om
 = 1;

981 
	`toF¿ùiÚ
(
v®ue
, 
num
, 
d’om
);

982 
	`£tF‹r
("äam”©e", 
GST_TYPE_FRACTION
, 
v®ue
, 
d’om
);

984 
	`»moveF‹r
("framerate");

986 
CV_CAP_PROP_FOURCC
:

987 
CV_CAP_PROP_FRAME_COUNT
:

988 
CV_CAP_PROP_FORMAT
:

989 
CV_CAP_PROP_MODE
:

990 
CV_CAP_PROP_BRIGHTNESS
:

991 
CV_CAP_PROP_CONTRAST
:

992 
CV_CAP_PROP_SATURATION
:

993 
CV_CAP_PROP_HUE
:

994 
CV_CAP_PROP_GAIN
:

995 
CV_CAP_PROP_CONVERT_RGB
:

997 
CV_CAP_GSTREAMER_QUEUE_LENGTH
:

998 if(!
sšk
)

1000 
	`g¡_­p_sšk_£t_max_bufãrs
(
	`GST_APP_SINK
(
sšk
), (
gušt
è
v®ue
);

1003 
	`CV_WARN
("GStreamer: unhandled…roperty");

1006 ià(
wasPÏyšg
)

1007 
this
->
	`¡¬tP–še
();

1009  
çl£
;

1010 
	}
}

1018 
CvC­tu»
* 
	$cvC»©eC­tu»_GSŒ—m”
(
ty³
, cÚ¡ * 
f’ame
 )

1020 
CvC­tu»_GSŒ—m”
* 
ÿ±u»
 = 
Ãw
 CvCapture_GStreamer;

1022 ifĞ
ÿ±u»
->
	`İ’
Ğ
ty³
, 
f’ame
 ))

1023  
ÿ±u»
;

1025 
d–‘e
 
ÿ±u»
;

1027 
	}
}

1034 şas 
	cCvVideoWr™”_GSŒ—m”
 : 
public
 
CvVideoWr™”


1036 
public
:

1037 
	$CvVideoWr™”_GSŒ—m”
(è{ 
	`š™
(); }

1038 
vœtu®
 ~
	$CvVideoWr™”_GSŒ—m”
(è{ 
	`şo£
(); 
	}
}

1040 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1041 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 );

1042 
vœtu®
 
şo£
();

1043 
vœtu®
 
boŞ
 
wr™eF¿me
ĞcÚ¡ 
I¶Image
* 
image
 );

1044 
	g´Ùeùed
:

1045 
š™
();

1046 cÚ¡ * 
f’ameToMim‘y³
(cÚ¡ * 
f’ame
);

1047 
G¡EËm’t
* 
	gp–še
;

1048 
G¡EËm’t
* 
	gsourû
;

1049 
G¡EËm’t
* 
	g’codebš
;

1050 
G¡EËm’t
* 
	gfe
;

1052 
G¡Bufãr
* 
	gbufãr
;

1053 
	gšput_pix_fmt
;

1054 
	gnum_äames
;

1055 
	gäam”©e
;

1062 
	gCvVideoWr™”_GSŒ—m”
::
	$š™
()

1064 
p–še
 = 
NULL
;

1065 
sourû
 = 
NULL
;

1066 
’codebš
 = 
NULL
;

1067 
fe
 = 
NULL
;

1068 
bufãr
 = 
NULL
;

1070 
num_äames
 = 0;

1071 
äam”©e
 = 0;

1072 
	}
}

1079 
	gCvVideoWr™”_GSŒ—m”
::
	$şo£
()

1081 
G¡S‹ChªgeR‘uº
 
¡©us
;

1082 ià(
p–še
)

1084 
	`hªdËMes§ge
(
p–še
);

1086 ià(
	`g¡_­p_¤c_’d_of_¡»am
(
	`GST_APP_SRC
(
sourû
)è!ğ
GST_FLOW_OK
)

1088 
	`CV_WARN
("Cannot send EOSo GStreamer…ipeline\n");

1093 
G¡Bus
* 
bus
 = 
	`g¡_–em’t_g‘_bus
(
p–še
);

1094 
G¡Mes§ge
 *
msg
 = 
	`g¡_bus_timed_pİ_f‹»d
(
bus
, 
GST_CLOCK_TIME_NONE
, (
G¡Mes§geTy³
)(
GST_MESSAGE_ERROR
 | 
GST_MESSAGE_EOS
));

1095 ià(
	`GST_MESSAGE_TYPE
(
msg
è=ğ
GST_MESSAGE_ERROR
)

1097 
	`CV_WARN
("Error during VideoWriter finalization\n");

1101 if(
msg
 !ğ
NULL
)

1103 
	`g¡_mes§ge_uÄef
(
msg
);

1104 
	`g_objeù_uÄef
(
	`G_OBJECT
(
bus
));

1107 
¡©us
 = 
	`g¡_–em’t_£t_¡©e
 (
p–še
, 
GST_STATE_NULL
);

1108 ià(
¡©us
 =ğ
GST_STATE_CHANGE_ASYNC
)

1111 
G¡S‹
 
¡1
;

1112 
G¡S‹
 
¡2
;

1113 
¡©us
 = 
	`g¡_–em’t_g‘_¡©e
(
p–še
, &
¡1
, &
¡2
, 
GST_CLOCK_TIME_NONE
);

1115 ià(
¡©us
 =ğ
GST_STATE_CHANGE_FAILURE
)

1117 
	`hªdËMes§ge
 (
p–še
);

1118 
	`g¡_objeù_uÄef
 (
	`GST_OBJECT
 (
p–še
));

1119 
p–še
 = 
NULL
;

1120 
	`CV_WARN
("Unableo stop gstreamer…ipeline\n");

1124 
	`g¡_objeù_uÄef
 (
	`GST_OBJECT
 (
p–še
));

1125 
p–še
 = 
NULL
;

1127 
	}
}

1136 cÚ¡ * 
	gCvVideoWr™”_GSŒ—m”
::
	$f’ameToMim‘y³
(cÚ¡ *
f’ame
)

1139 cÚ¡ *
ext
 = 
	`¡¼chr
(
f’ame
, '.');

1140 if(!
ext
 ||ƒxˆ=ğ
f’ame
è 
NULL
;

1141 
ext
 += 1;

1147 ià(
	`¡ºÿ£cmp
(
ext
,"avi", 3) == 0)

1150 ià(
	`¡ºÿ£cmp
(
ext
,"mkv", 3) == 0 || strncasecmp(ext,"mk3d",4) == 0 || strncasecmp(ext,"webm",4) == 0 )

1153 ià(
	`¡ºÿ£cmp
(
ext
,"wmv", 3) == 0)

1156 ià(
	`¡ºÿ£cmp
(
ext
,"mov", 3) == 0)

1159 ià(
	`¡ºÿ£cmp
(
ext
,"ogg", 3) == 0 || strncasecmp(ext,"ogv", 3) == 0)

1162 ià(
	`¡ºÿ£cmp
(
ext
,"rm", 3) == 0)

1165 ià(
	`¡ºÿ£cmp
(
ext
,"swf", 3) == 0)

1168 ià(
	`¡ºÿ£cmp
(
ext
,"mp4", 3) == 0)

1173 
	}
}

1193 
boŞ
 
	gCvVideoWr™”_GSŒ—m”
::
	$İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1194 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
is_cŞÜ
 )

1196 
	`CV_FUNCNAME
("CvVideoWriter_GStreamer::open");

1199 
	`as£¹
 (
f’ame
);

1200 
	`as£¹
 (
ås
 > 0);

1201 
	`as£¹
 (
äameSize
.
width
 > 0 && f¿meSize.
height
 > 0);

1204 
g¡_š™Ÿliz”
::
	`š™
();

1207 
boŞ
 
mªu®p–še
 = 
Œue
;

1208 
bufsize
 = 0;

1209 
GE¼Ü
 *
”r
 = 
NULL
;

1210 cÚ¡ * 
mime
 = 
NULL
;

1211 
G¡S‹ChªgeR‘uº
 
¡©”‘
;

1213 
G¡C­s
* 
ÿps
 = 
NULL
;

1214 
G¡C­s
* 
videoÿps
 = 
NULL
;

1216 #ià
FULL_GST_VERSION
 >ğ
	`VERSION_NUM
(0,10,32)

1217 
G¡C­s
* 
cÚš”ÿps
 = 
NULL
;

1218 
G¡EncodšgCÚš”Profe
* 
cÚš”´ofe
 = 
NULL
;

1219 
G¡EncodšgVideoProfe
* 
videİrofe
 = 
NULL
;

1222 
G¡I‹¿tÜ
* 
™
 = 
NULL
;

1223 
gboŞ—n
 
dÚe
 = 
FALSE
;

1224 
G¡EËm’t
 *
–em’t
 = 
NULL
;

1225 
gch¬
* 
Çme
 = 
NULL
;

1227 #ià
GST_VERSION_MAJOR
 == 0

1228 
G¡EËm’t
* 
¥l™‹r
 = 
NULL
;

1229 
G¡EËm’t
* 
combš”
 = 
NULL
;

1235 
__BEGIN__
;

1237 
’codebš
 = 
	`g¡_·r£_Ïunch
(
f’ame
, &
”r
);

1238 
mªu®p–še
 = (
’codebš
 !ğ
NULL
);

1240 if(
mªu®p–še
)

1242 #ià
GST_VERSION_MAJOR
 == 0

1243 
™
 = 
	`g¡_bš_™”©e_sourûs
(
	`GST_BIN
(
’codebš
));

1244 if(
	`g¡_™”©Ü_Ãxt
(
™
, (
gpoš‹r
 *)&
sourû
è!ğ
GST_ITERATOR_OK
) {

1245 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot find‡ppsink in manual…ipeline\n");

1246  
çl£
;

1249 
™
 = 
	`g¡_bš_™”©e_sourûs
 (
	`GST_BIN
(
’codebš
));

1250 
GV®ue
 
v®ue
 = 
G_VALUE_INIT
;

1252 !
dÚe
) {

1253 
	`g¡_™”©Ü_Ãxt
 (
™
, &
v®ue
)) {

1254 
GST_ITERATOR_OK
:

1255 
–em’t
 = 
	`GST_ELEMENT
 (
	`g_v®ue_g‘_objeù
 (&
v®ue
));

1256 
Çme
 = 
	`g¡_–em’t_g‘_Çme
(
–em’t
);

1257 ià(
Çme
){

1258 if(
	`¡r¡r
(
Çme
, "İ’cv¤c"è!ğ
NULL
 || strstr(name, "appsrc") != NULL) {

1259 
sourû
 = 
	`GST_ELEMENT
 ( 
	`g¡_objeù_»f
 (
–em’t
) );

1260 
dÚe
 = 
TRUE
;

1262 
	`g_ä“
(
Çme
);

1264 
	`g_v®ue_un£t
 (&
v®ue
);

1267 
GST_ITERATOR_RESYNC
:

1268 
	`g¡_™”©Ü_»sync
 (
™
);

1270 
GST_ITERATOR_ERROR
:

1271 
GST_ITERATOR_DONE
:

1272 
dÚe
 = 
TRUE
;

1276 
	`g¡_™”©Ü_ä“
 (
™
);

1278 ià(!
sourû
){

1279 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot find‡ppsrc in manual…ipeline\n");

1280  
çl£
;

1283 
p–še
 = 
’codebš
;

1287 
p–še
 = 
	`g¡_p–še_Ãw
 (
NULL
);

1295 ià(
fourcc
 =ğ
	`CV_FOURCC
('M','P','1','V')) fourcc = CV_FOURCC('M', 'P', 'G' ,'1');

1296 ià(
fourcc
 =ğ
	`CV_FOURCC
('M','P','2','V')) fourcc = CV_FOURCC('M', 'P', 'G' ,'2');

1297 ià(
fourcc
 =ğ
	`CV_FOURCC
('D','R','A','C')) fourcc = CV_FOURCC('d', 'r', 'a' ,'c');

1302 
videoÿps
 = 
	`g¡_riff_ü—‹_video_ÿps
(
fourcc
, 
NULL
, NULL, NULL, NULL, NULL);

1303 ià(!
videoÿps
){

1304 
	`CV_ERROR
Ğ
CV_StsUnsuµÜ‹dFÜm©
, "Gstreamer Opencv backend does‚ot supporthis codec.");

1308 
mime
 = 
	`f’ameToMim‘y³
(
f’ame
);

1309 ià(!
mime
) {

1310 
	`CV_ERROR
Ğ
CV_StsUnsuµÜ‹dFÜm©
, "Gstreamer Opencv backend does‚ot supporthis fileype.");

1313 #ià
FULL_GST_VERSION
 >ğ
	`VERSION_NUM
(0,10,32)

1314 
cÚš”ÿps
 = 
	`g¡_ÿps_äom_¡ršg
(
mime
);

1317 
cÚš”´ofe
 = 
	`g¡_’codšg_cÚš”_´ofe_Ãw
("cÚš”", "cÚš”", 
cÚš”ÿps
, 
NULL
);

1318 
videİrofe
 = 
	`g¡_’codšg_video_´ofe_Ãw
(
videoÿps
, 
NULL
, NULL, 1);

1319 
	`g¡_’codšg_cÚš”_´ofe_add_´ofe
(
cÚš”´ofe
, (
G¡EncodšgProfe
 *è
videİrofe
);

1323 
’codebš
 = 
	`g¡_–em’t_çùÜy_make
("’codebš", 
NULL
);

1325 #ià
FULL_GST_VERSION
 >ğ
	`VERSION_NUM
(0,10,32)

1326 
	`g_objeù_£t
(
	`G_OBJECT
(
’codebš
), "´ofe", 
cÚš”´ofe
, 
NULL
);

1328 
sourû
 = 
	`g¡_–em’t_çùÜy_make
("­p¤c", 
NULL
);

1329 
fe
 = 
	`g¡_–em’t_çùÜy_make
("fesšk", 
NULL
);

1330 
	`g_objeù_£t
(
	`G_OBJECT
(
fe
), "loÿtiÚ", 
f’ame
, 
NULL
);

1333 ià(
is_cŞÜ
)

1335 
šput_pix_fmt
 = 
GST_VIDEO_FORMAT_BGR
;

1336 
bufsize
 = 
äameSize
.
width
 * f¿meSize.
height
 * 3;

1338 #ià
GST_VERSION_MAJOR
 == 0

1339 
ÿps
 = 
	`g¡_video_fÜm©_Ãw_ÿps
(
GST_VIDEO_FORMAT_BGR
,

1340 
äameSize
.
width
,

1341 
äameSize
.
height
,

1342 (
ås
), 1,

1345 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-raw",

1346 "fÜm©", 
G_TYPE_STRING
, "BGR",

1347 "width", 
G_TYPE_INT
, 
äameSize
.
width
,

1348 "height", 
G_TYPE_INT
, 
äameSize
.
height
,

1349 "äam”©e", 
GST_TYPE_FRACTION
, (
ås
), 1,

1350 
NULL
);

1351 
ÿps
 = 
	`g¡_ÿps_fix©e
(caps);

1358 #ià
FULL_GST_VERSION
 >ğ
	`VERSION_NUM
(0,10,29)

1359 
šput_pix_fmt
 = 
GST_VIDEO_FORMAT_GRAY8
;

1360 
bufsize
 = 
äameSize
.
width
 * f¿meSize.
height
;

1362 #ià
GST_VERSION_MAJOR
 == 0

1363 
ÿps
 = 
	`g¡_video_fÜm©_Ãw_ÿps
(
GST_VIDEO_FORMAT_GRAY8
,

1364 
äameSize
.
width
,

1365 
äameSize
.
height
,

1366 (
ås
), 1,

1369 
ÿps
 = 
	`g¡_ÿps_Ãw_sim¶e
("video/x-raw",

1370 "fÜm©", 
G_TYPE_STRING
, "GRAY8",

1371 "width", 
G_TYPE_INT
, 
äameSize
.
width
,

1372 "height", 
G_TYPE_INT
, 
äameSize
.
height
,

1373 "äam”©e", 
GST_TYPE_FRACTION
, (
ås
), 1,

1374 
NULL
);

1375 
ÿps
 = 
	`g¡_ÿps_fix©e
(caps);

1378 
	`CV_As£¹
(!"Gstreamer 0.10.29 or‚ewer is„equired for grayscale input");

1382 
	`g¡_­p_¤c_£t_ÿps
(
	`GST_APP_SRC
(
sourû
), 
ÿps
);

1383 
	`g¡_­p_¤c_£t_¡»am_ty³
(
	`GST_APP_SRC
(
sourû
), 
GST_APP_STREAM_TYPE_STREAM
);

1384 
	`g¡_­p_¤c_£t_size
 (
	`GST_APP_SRC
(
sourû
), -1);

1386 
	`g_objeù_£t
(
	`G_OBJECT
(
sourû
), "fÜm©", 
GST_FORMAT_TIME
, 
NULL
);

1387 
	`g_objeù_£t
(
	`G_OBJECT
(
sourû
), "block", 1, 
NULL
);

1388 
	`g_objeù_£t
(
	`G_OBJECT
(
sourû
), "is-live", 0, 
NULL
);

1391 if(!
mªu®p–še
)

1393 
	`g_objeù_£t
(
	`G_OBJECT
(
fe
), "bufãr-size", 
bufsize
, 
NULL
);

1394 
	`g¡_bš_add_mªy
(
	`GST_BIN
(
p–še
), 
sourû
, 
’codebš
, 
fe
, 
NULL
);

1395 if(!
	`g¡_–em’t_lšk_mªy
(
sourû
, 
’codebš
, 
fe
, 
NULL
)) {

1396 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot†inkƒlements\n");

1400 #ià
GST_VERSION_MAJOR
 == 0

1405 
™
 = 
	`g¡_bš_™”©e_»cur£
 (
	`GST_BIN
(
’codebš
));

1406 !
dÚe
) {

1407 
	`g¡_™”©Ü_Ãxt
 (
™
, (**)&
–em’t
)) {

1408 
GST_ITERATOR_OK
:

1409 
Çme
 = 
	`g¡_–em’t_g‘_Çme
(
–em’t
);

1410 ià(
	`¡r¡r
(
Çme
, "streamsplitter"))

1411 
¥l™‹r
 = 
–em’t
;

1412 ià(
	`¡r¡r
(
Çme
, "streamcombiner"))

1413 
combš”
 = 
–em’t
;

1415 
GST_ITERATOR_RESYNC
:

1416 
	`g¡_™”©Ü_»sync
 (
™
);

1418 
GST_ITERATOR_ERROR
:

1419 
dÚe
 = 
Œue
;

1421 
GST_ITERATOR_DONE
:

1422 
dÚe
 = 
Œue
;

1427 
	`g¡_™”©Ü_ä“
 (
™
);

1429 ià(
¥l™‹r
 && 
combš”
)

1431 
	`g¡_–em’t_uÆšk
(
¥l™‹r
, 
combš”
);

1433 
G¡Pad
* 
¤c
 = 
	`g¡_–em’t_g‘_·d
(
combš”
, "src");

1434 
G¡Pad
* 
sšk
 = 
	`g¡_–em’t_g‘_·d
(
combš”
, "encodingsink");

1436 
G¡Pad
* 
¤cP“r
 = 
	`g¡_·d_g‘_³”
(
¤c
);

1437 
G¡Pad
* 
sškP“r
 = 
	`g¡_·d_g‘_³”
(
sšk
);

1439 
	`g¡_·d_uÆšk
(
sškP“r
, 
sšk
);

1440 
	`g¡_·d_uÆšk
(
¤c
, 
¤cP“r
);

1442 
	`g¡_·d_lšk
(
sškP“r
, 
¤cP“r
);

1444 
¤c
 = 
	`g¡_–em’t_g‘_·d
(
¥l™‹r
, "encodingsrc");

1445 
sšk
 = 
	`g¡_–em’t_g‘_·d
(
¥l™‹r
, "sink");

1447 
¤cP“r
 = 
	`g¡_·d_g‘_³”
(
¤c
);

1448 
sškP“r
 = 
	`g¡_·d_g‘_³”
(
sšk
);

1450 
	`g¡_·d_uÆšk
(
sškP“r
, 
sšk
);

1451 
	`g¡_·d_uÆšk
(
¤c
, 
¤cP“r
);

1453 
	`g¡_·d_lšk
(
sškP“r
, 
¤cP“r
);

1457 
¡©”‘
 = 
	`g¡_–em’t_£t_¡©e
(
	`GST_ELEMENT
(
p–še
), 
GST_STATE_PLAYING
);

1458 if(
¡©”‘
 =ğ
GST_STATE_CHANGE_FAILURE
) {

1459 
	`hªdËMes§ge
(
p–še
);

1460 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: cannot…ut…ipelineo…lay\n");

1463 
äam”©e
 = 
ås
;

1464 
num_äames
 = 0;

1466 
	`hªdËMes§ge
(
p–še
);

1468 
__END__
;

1470  
Œue
;

1471 
	}
}

1482 
boŞ
 
	gCvVideoWr™”_GSŒ—m”
::
	$wr™eF¿me
ĞcÚ¡ 
I¶Image
 * 
image
 )

1484 
	`CV_FUNCNAME
("CvVideoWriter_GStreamer::writerFrame");

1486 
G¡ClockTime
 
du¿tiÚ
, 
time¡amp
;

1487 
G¡FlowR‘uº
 
»t
;

1488 
size
;

1490 
__BEGIN__
;

1492 
	`hªdËMes§ge
(
p–še
);

1494 ià(
šput_pix_fmt
 =ğ
GST_VIDEO_FORMAT_BGR
) {

1495 ià(
image
->
nChªÃls
 !ğ3 || image->
d•th
 !ğ
IPL_DEPTH_8U
) {

1496 
	`CV_ERROR
(
CV_StsUnsuµÜ‹dFÜm©
, "cvWriteFrame()‚eeds images with depth = IPL_DEPTH_8U‡nd‚Channels = 3.");

1499 #ià
FULL_GST_VERSION
 >ğ
	`VERSION_NUM
(0,10,29)

1500 ià(
šput_pix_fmt
 =ğ
GST_VIDEO_FORMAT_GRAY8
) {

1501 ià(
image
->
nChªÃls
 !ğ1 || image->
d•th
 !ğ
IPL_DEPTH_8U
) {

1502 
	`CV_ERROR
(
CV_StsUnsuµÜ‹dFÜm©
, "cvWriteFrame()‚eeds images with depth = IPL_DEPTH_8U‡nd‚Channels = 1.");

1507 
	`CV_ERROR
(
CV_StsUnsuµÜ‹dFÜm©
, "cvWriteFrame()‚eeds BGR or grayscale images\n");

1508  
çl£
;

1511 
size
 = 
image
->
imageSize
;

1512 
du¿tiÚ
 = (()1/
äam”©e
è* 
GST_SECOND
;

1513 
time¡amp
 = 
num_äames
 * 
du¿tiÚ
;

1516 #ià
GST_VERSION_MAJOR
 == 0

1517 
bufãr
 = 
	`g¡_bufãr_Œy_Ãw_ªd_®loc
 (
size
);

1518 ià(!
bufãr
)

1520 
	`CV_ERROR
(
CV_StsBadSize
, "Cannot create GStreamer buffer");

1523 
	`memıy
(
	`GST_BUFFER_DATA
 (
bufãr
), (
gušt8
*)
image
->
imageD©a
, 
size
);

1524 
	`GST_BUFFER_DURATION
(
bufãr
èğ
du¿tiÚ
;

1525 
	`GST_BUFFER_TIMESTAMP
(
bufãr
èğ
time¡amp
;

1527 
bufãr
 = 
	`g¡_bufãr_Ãw_®loÿ‹
 (
NULL
, 
size
, NULL);

1528 
G¡M­Info
 
šfo
;

1529 
	`g¡_bufãr_m­
(
bufãr
, &
šfo
, (
G¡M­FÏgs
)
GST_MAP_READ
);

1530 
	`memıy
(
šfo
.
d©a
, (
gušt8
*)
image
->
imageD©a
, 
size
);

1531 
	`g¡_bufãr_unm­
(
bufãr
, &
šfo
);

1532 
	`GST_BUFFER_DURATION
(
bufãr
èğ
du¿tiÚ
;

1533 
	`GST_BUFFER_PTS
(
bufãr
èğ
time¡amp
;

1534 
	`GST_BUFFER_DTS
(
bufãr
èğ
time¡amp
;

1537 
	`GST_BUFFER_OFFSET
(
bufãr
èğ
num_äames
;

1539 
»t
 = 
	`g¡_­p_¤c_push_bufãr
(
	`GST_APP_SRC
(
sourû
), 
bufãr
);

1540 ià(
»t
 !ğ
GST_FLOW_OK
) {

1541 
	`CV_WARN
("Error…ushing buffero GStreamer…ipeline");

1542  
çl£
;

1547 ++
num_äames
;

1549 
__END__
;

1551  
Œue
;

1552 
	}
}

1564 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”_GSŒ—m”
(cÚ¡ * 
f’ame
, 
fourcc
, 
ås
,

1565 
CvSize
 
äameSize
, 
isCŞÜ
 )

1567 
CvVideoWr™”_GSŒ—m”
* 
w¹
 = 
Ãw
 CvVideoWriter_GStreamer;

1568 ifĞ
w¹
->
	`İ’
(
f’ame
, 
fourcc
, 
ås
,
äameSize
, 
isCŞÜ
))

1569  
w¹
;

1571 
d–‘e
 
w¹
;

1573 
	}
}

1584 
	$toF¿ùiÚ
(
decim®
, &
num”©Ü
, &
d’omš©Ü
)

1586 
dummy
;

1587 
whŞe
;

1588 
decim®
 = 
	`modf
 (decim®, &
whŞe
);

1589 
d’omš©Ü
 = 1; denominator<=100; denominator++){

1590 ià(
	`modf
(
d’omš©Ü
 * 
decim®
, &
dummy
) < 0.001f)

1593 
num”©Ü
 = 
d’omš©Ü
 * 
decim®
;

1594 
	}
}

1601 
	$hªdËMes§ge
(
G¡EËm’t
 * 
p–še
)

1603 
	`CV_FUNCNAME
("handlemessage");

1605 
GE¼Ü
 *
”r
 = 
NULL
;

1606 
gch¬
 *
debug
 = 
NULL
;

1607 
G¡Bus
* 
bus
 = 
NULL
;

1608 
G¡SŒ—mStusTy³
 

;

1609 
G¡EËm’t
 * 
–em
 = 
NULL
;

1610 
G¡Mes§ge
* 
msg
 = 
NULL
;

1612 
__BEGIN__
;

1613 
bus
 = 
	`g¡_–em’t_g‘_bus
(
p–še
);

1615 
	`g¡_bus_have_³ndšg
(
bus
)) {

1616 
msg
 = 
	`g¡_bus_pİ
(
bus
);

1620 if(
	`g¡_is_missšg_¶ugš_mes§ge
(
msg
))

1622 
	`CV_ERROR
(
CV_StsE¼Ü
, "GStreamer: your gstreamer installation is missing‡„equired…lugin\n");

1626 
	`GST_MESSAGE_TYPE
 (
msg
)) {

1627 
GST_MESSAGE_STATE_CHANGED
:

1628 
G¡S‹
 
Şd¡©e
, 
Ãw¡©e
, 
³nd¡©e
;

1629 
	`g¡_mes§ge_·r£_¡©e_chªged
(
msg
, &
Şd¡©e
, &
Ãw¡©e
, &
³nd¡©e
);

1633 
GST_MESSAGE_ERROR
:

1634 
	`g¡_mes§ge_·r£_”rÜ
(
msg
, &
”r
, &
debug
);

1635 
	`årštf
(
¡d”r
, "GStreamer Plugin: Embedded video…layback halted; module %s„eported: %s\n",

1636 
	`g¡_–em’t_g‘_Çme
(
	`GST_MESSAGE_SRC
 (
msg
)), 
”r
->
mes§ge
);

1638 
	`g_”rÜ_ä“
(
”r
);

1639 
	`g_ä“
(
debug
);

1641 
	`g¡_–em’t_£t_¡©e
(
	`GST_ELEMENT
(
p–še
), 
GST_STATE_NULL
);

1643 
GST_MESSAGE_EOS
:

1646 
GST_MESSAGE_STREAM_STATUS
:

1647 
	`g¡_mes§ge_·r£_¡»am_¡©us
(
msg
,&

,&
–em
);

1655 
	`g¡_mes§ge_uÄef
(
msg
);

1658 
	`g¡_objeù_uÄef
(
	`GST_OBJECT
(
bus
));

1660 
__END__


1661 
	}
}

	@cap_images.cpp

52 
	~"´ecomp.hµ
"

53 
	~<sys/¡©.h
>

55 #ifdeà
NDEBUG


56 
	#CV_WARN
(
mes§ge
)

	)

58 
	#CV_WARN
(
mes§ge
è
	`årštf
(
¡d”r
, "w¬nšg: % (%s:%d)\n", mes§ge, 
__FILE__
, 
__LINE__
)

	)

61 #iâdeà
_MAX_PATH


62 
	#_MAX_PATH
 1024

	)

65 şas 
	cCvC­tu»_Images
 : 
public
 
CvC­tu»


67 
public
:

68 
	$CvC­tu»_Images
()

70 
f’ame
 = 0;

71 
cu¼’täame
 = 
fœ¡äame
 = 0;

72 
Ëngth
 = 0;

73 
äame
 = 0;

76 
vœtu®
 ~
	$CvC­tu»_Images
()

78 
	`şo£
();

79 
	}
}

81 
vœtu®
 
boŞ
 
İ’
(cÚ¡ * 
_f’ame
);

82 
vœtu®
 
şo£
();

83 
vœtu®
 
	$g‘Prİ”ty
() const;

84 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

85 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

86 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

88 
´Ùeùed
:

89 * 
f’ame
;

90 
cu¼’täame
;

91 
fœ¡äame
;

92 
Ëngth
;

94 
I¶Image
* 
äame
;

95 
	}
};

98 
	gCvC­tu»_Images
::
	$şo£
()

100 ifĞ
f’ame
 )

102 
	`ä“
(
f’ame
);

103 
f’ame
 = 0;

105 
cu¼’täame
 = 
fœ¡äame
 = 0;

106 
Ëngth
 = 0;

107 
	`cvR–—£Image
Ğ&
äame
 );

108 
	}
}

111 
boŞ
 
	gCvC­tu»_Images
::
	$g¿bF¿me
()

113 
¡r
[
_MAX_PATH
];

114 
	`¥rštf
(
¡r
, 
f’ame
, 
fœ¡äame
 + 
cu¼’täame
);

116 
	`cvR–—£Image
(&
äame
);

117 
äame
 = 
	`cvLßdImage
(
¡r
, 
CV_LOAD_IMAGE_ANYDEPTH
 | 
CV_LOAD_IMAGE_ANYCOLOR
);

118 ifĞ
äame
 )

119 
cu¼’täame
++;

121  
äame
 != 0;

122 
	}
}

124 
I¶Image
* 
	gCvC­tu»_Images
::
	$»Œ›veF¿me
()

126  
äame
;

127 
	}
}

129 
	gCvC­tu»_Images
::
	$g‘Prİ”ty
(
id
) const

131 
id
)

133 
CV_CAP_PROP_POS_MSEC
:

134 
	`CV_WARN
("collections of images don't have framerates\n");

136 
CV_CAP_PROP_POS_FRAMES
:

137  
cu¼’täame
;

138 
CV_CAP_PROP_FRAME_COUNT
:

139  
Ëngth
;

140 
CV_CAP_PROP_POS_AVI_RATIO
:

141  ()
cu¼’täame
 / ()(
Ëngth
 - 1);

142 
CV_CAP_PROP_FRAME_WIDTH
:

143  
äame
 ? f¿me->
width
 : 0;

144 
CV_CAP_PROP_FRAME_HEIGHT
:

145  
äame
 ? f¿me->
height
 : 0;

146 
CV_CAP_PROP_FPS
:

147 
	`CV_WARN
("collections of images don't have framerates\n");

149 
CV_CAP_PROP_FOURCC
:

150 
	`CV_WARN
("collections of images don't have 4-character codes\n");

154 
	}
}

156 
boŞ
 
	gCvC­tu»_Images
::
	$£tPrİ”ty
(
id
, 
v®ue
)

158 
id
)

160 
CV_CAP_PROP_POS_MSEC
:

161 
CV_CAP_PROP_POS_FRAMES
:

162 if(
v®ue
 < 0) {

163 
	`CV_WARN
("seekingo‚egative…ositions does‚ot work - clamping\n");

164 
v®ue
 = 0;

166 if(
v®ue
 >ğ
Ëngth
) {

167 
	`CV_WARN
("seeking beyondƒnd of sequence - clamping\n");

168 
v®ue
 = 
Ëngth
 - 1;

170 
cu¼’täame
 = 
	`cvRound
(
v®ue
);

171  
Œue
;

172 
CV_CAP_PROP_POS_AVI_RATIO
:

173 if(
v®ue
 > 1) {

174 
	`CV_WARN
("seeking beyondƒnd of sequence - clamping\n");

175 
v®ue
 = 1;

176 } if(
v®ue
 < 0) {

177 
	`CV_WARN
("seekingo‚egative…ositions does‚ot work - clamping\n");

178 
v®ue
 = 0;

180 
cu¼’täame
 = 
	`cvRound
((
Ëngth
 - 1è* 
v®ue
);

181  
Œue
;

183 
	`CV_WARN
("unknown/unhandled…roperty\n");

184  
çl£
;

185 
	}
}

187 * 
	$icvExŒaùP©‹º
(cÚ¡ *
f’ame
, *
off£t
)

189 *
Çme
 = (*)
f’ame
;

191 ifĞ!
f’ame
 )

195 *
©
 = 
	`¡rchr
(
Çme
, '%');

196 if(
©
)

198 
dummy
;

199 if(
	`ssÿnf
(
©
 + 1, "%ud", &
dummy
) != 1)

201 
Çme
 = 
	`¡rdup
(
f’ame
);

205 
©
 = 
Çme
;

208 *
¦ash
 = 
	`¡¼chr
(
©
, '/');

209 ià(
¦ash
è
©
 = slash + 1;

211 #ifdeà
_WIN32


212 
¦ash
 = 
	`¡¼chr
(
©
, '\\');

213 ià(
¦ash
è
©
 = slash + 1;

216 *
©
 && !
	`isdig™
(*at))‡t++;

218 if(!*
©
)

221 
	`ssÿnf
(
©
, "%u", 
off£t
);

223 
size
 = ()
	`¡¾’
(
f’ame
) + 20;

224 
Çme
 = (*)
	`m®loc
(
size
);

225 
	`¡ºıy
(
Çme
, 
f’ame
, 
©
 - filename);

226 
Çme
[
©
 - 
f’ame
] = 0;

228 
	`¡rÿt
(
Çme
, "%0");

230 
i
;

231 *
ex‹nsiÚ
;

232 
i
 = 0, 
ex‹nsiÚ
 = 
©
; 
	`isdig™
(at[i]); i++,ƒxtension++)

234 
¶aûs
[10];

235 
	`¥rštf
(
¶aûs
, "%dd", 
i
);

237 
	`¡rÿt
(
Çme
, 
¶aûs
);

238 
	`¡rÿt
(
Çme
, 
ex‹nsiÚ
);

241  
Çme
;

242 
	}
}

245 
boŞ
 
	gCvC­tu»_Images
::
	$İ’
(cÚ¡ * 
_f’ame
)

247 
off£t
 = 0;

248 
	`şo£
();

250 
f’ame
 = 
	`icvExŒaùP©‹º
(
_f’ame
, &
off£t
);

251 if(!
f’ame
)

252  
çl£
;

255 
Ëngth
 = 0;

256 
¡r
[
_MAX_PATH
];

259 
	`¥rštf
(
¡r
, 
f’ame
, 
off£t
 + 
Ëngth
);

260 
¡©
 
s
;

261 if(
	`¡©
(
¡r
, &
s
))

263 if(
Ëngth
 =ğ0 && 
off£t
 == 0)

265 
off£t
++;

270 if(!
	`cvHaveImageR—d”
(
¡r
))

273 
Ëngth
++;

276 if(
Ëngth
 == 0)

278 
	`şo£
();

279  
çl£
;

282 
fœ¡äame
 = 
off£t
;

283  
Œue
;

284 
	}
}

287 
CvC­tu»
* 
	$cvC»©eFeC­tu»_Images
(cÚ¡ * 
f’ame
)

289 
CvC­tu»_Images
* 
ÿ±u»
 = 
Ãw
 CvCapture_Images;

291 ifĞ
ÿ±u»
->
	`İ’
(
f’ame
) )

292  
ÿ±u»
;

294 
d–‘e
 
ÿ±u»
;

296 
	}
}

303 şas 
	cCvVideoWr™”_Images
 : 
public
 
CvVideoWr™”


305 
public
:

306 
	$CvVideoWr™”_Images
()

308 
f’ame
 = 0;

309 
cu¼’täame
 = 0;

311 
vœtu®
 ~
	$CvVideoWr™”_Images
(è{ 
	`şo£
(); 
	}
}

313 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
_f’ame
 );

314 
vœtu®
 
şo£
();

315 
vœtu®
 
boŞ
 
wr™eF¿me
ĞcÚ¡ 
I¶Image
* );

317 
	g´Ùeùed
:

318 * 
f’ame
;

319 
	gcu¼’täame
;

322 
boŞ
 
	gCvVideoWr™”_Images
::
	$wr™eF¿me
ĞcÚ¡ 
I¶Image
* 
image
 )

324 
¡r
[
_MAX_PATH
];

325 
	`¥rštf
(
¡r
, 
f’ame
, 
cu¼’täame
);

326 
»t
 = 
	`cvSaveImage
(
¡r
, 
image
);

328 
cu¼’täame
++;

330  
»t
 > 0;

331 
	}
}

333 
	gCvVideoWr™”_Images
::
	$şo£
()

335 ifĞ
f’ame
 )

337 
	`ä“
Ğ
f’ame
 );

338 
f’ame
 = 0;

340 
cu¼’täame
 = 0;

341 
	}
}

344 
boŞ
 
	gCvVideoWr™”_Images
::
	$İ’
ĞcÚ¡ * 
_f’ame
 )

346 
off£t
 = 0;

348 
	`şo£
();

350 
f’ame
 = 
	`icvExŒaùP©‹º
(
_f’ame
, &
off£t
);

351 if(!
f’ame
)

352  
çl£
;

354 
¡r
[
_MAX_PATH
];

355 
	`¥rštf
(
¡r
, 
f’ame
, 0);

356 if(!
	`cvHaveImageWr™”
(
¡r
))

358 
	`şo£
();

359  
çl£
;

362 
cu¼’täame
 = 
off£t
;

363  
Œue
;

364 
	}
}

367 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”_Images
ĞcÚ¡ * 
f’ame
 )

369 
CvVideoWr™”_Images
 *
wr™”
 = 
Ãw
 CvVideoWriter_Images;

371 ifĞ
wr™”
->
	`İ’
Ğ
f’ame
 ))

372  
wr™”
;

374 
d–‘e
 
wr™”
;

376 
	}
}

	@cap_intelperc.cpp

1 #ifdeà
HAVE_INTELPERC


3 
	~"ÿp_š‹Í”c.hµ
"

5 
Çme¥aû
 
	gcv


10 
	gIÁ–P”CSŒ—mBa£
::
IÁ–P”CSŒ—mBa£
()

11 : 
m_´ofeIdx
(-1)

12 , 
m_äameIdx
(0)

13 , 
m_timeSmpS¹NS
(0)

16 
	gIÁ–P”CSŒ—mBa£
::~
IÁ–P”CSŒ—mBa£
()

20 
boŞ
 
IÁ–P”CSŒ—mBa£
::
isV®id
()

22  (
m_deviû
.
IsV®id
(è&& 
m_¡»am
.IsValid());

24 
boŞ
 
	gIÁ–P”CSŒ—mBa£
::
g¿bF¿me
()

26 ià(!
m_¡»am
.
IsV®id
())

27  
çl£
;

28 ià(-1 =ğ
m_´ofeIdx
)

30 ià(!
£tPrİ”ty
(
CV_CAP_PROP_INTELPERC_PROFILE_IDX
, 0))

31  
çl£
;

33 
PXCSm¬tSP
 
	g¥
;

34 
	gm_pxcImage
.
R–—£Ref
();

35 ià(
	gPXC_STATUS_NO_ERROR
 > 
	gm_¡»am
->
R—dSŒ—mAsync
(&
m_pxcImage
, &
¥
))

36  
	gçl£
;

37 ià(
	gPXC_STATUS_NO_ERROR
 > 
	g¥
->
SynchrÚize
())

38  
	gçl£
;

39 ià(0 =ğ
m_timeSmpS¹NS
)

40 
m_timeSmpS¹NS
 = 
m_pxcImage
->
Qu”yTimeSmp
();

41 
	gm_timeSmp
 = ()((
m_pxcImage
->
Qu”yTimeSmp
(è- 
m_timeSmpS¹NS
) / 10000);

42 
	gm_äameIdx
++;

43  
	gŒue
;

45 
	gIÁ–P”CSŒ—mBa£
::
g‘ProfeIDX
() const

47  
m_´ofeIdx
;

49 
	gIÁ–P”CSŒ—mBa£
::
g‘Prİ”ty
(
´İIdx
) const

51 
»t
 = 0.0;

52 
	g´İIdx
)

54 
	gCV_CAP_PROP_INTELPERC_PROFILE_COUNT
:

55 
»t
 = ()
m_´ofes
.
size
();

57 
	gCV_CAP_PROP_FRAME_WIDTH
 :

58 ià((0 <ğ
m_´ofeIdx
è&& (m_´ofeIdx < 
m_´ofes
.
size
()))

59 
»t
 = ()
m_´ofes
[
m_´ofeIdx
].
imageInfo
.
width
;

61 
	gCV_CAP_PROP_FRAME_HEIGHT
 :

62 ià((0 <ğ
m_´ofeIdx
è&& (m_´ofeIdx < 
m_´ofes
.
size
()))

63 
»t
 = ()
m_´ofes
[
m_´ofeIdx
].
imageInfo
.
height
;

65 
	gCV_CAP_PROP_FPS
 :

66 ià((0 <ğ
m_´ofeIdx
è&& (m_´ofeIdx < 
m_´ofes
.
size
()))

68 
»t
 = (()
m_´ofes
[
m_´ofeIdx
].
äameR©eMš
.
num”©Ü
 / ()m_´ofes[m_´ofeIdx].äameR©eMš.
d’omš©Ü


69 + ()
m_´ofes
[
m_´ofeIdx
].
äameR©eMax
.
num”©Ü
 / ()m_´ofes[m_´ofeIdx].äameR©eMax.
d’omš©Ü
) / 2.0;

72 
	gCV_CAP_PROP_POS_FRAMES
:

73 
»t
 = ()
m_äameIdx
;

75 
	gCV_CAP_PROP_POS_MSEC
:

76 
»t
 = 
m_timeSmp
;

79  
	g»t
;

81 
boŞ
 
	gIÁ–P”CSŒ—mBa£
::
£tPrİ”ty
(
´İIdx
, 
´İV®
)

83 
boŞ
 
	gisS‘
 = 
çl£
;

84 
	g´İIdx
)

86 
	gCV_CAP_PROP_INTELPERC_PROFILE_IDX
:

88 
´İV®IÁ
 = ()
´İV®
;

89 ià(0 > 
	g´İV®IÁ
)

91 
	gm_´ofeIdx
 = 
´İV®IÁ
;

92 
	gisS‘
 = 
Œue
;

94 ià(
	g´İV®IÁ
 < 
	gm_´ofes
.
size
())

96 ià(
	gm_´ofeIdx
 !ğ
´İV®IÁ
)

98 
m_´ofeIdx
 = 
´İV®IÁ
;

99 ià(
	gm_¡»am
.
IsV®id
())

100 
	gm_¡»am
->
S‘Profe
(&
m_´ofes
[
m_´ofeIdx
]);

101 
	gm_äameIdx
 = 0;

102 
	gm_timeSmpS¹NS
 = 0;

104 
	gisS‘
 = 
Œue
;

109  
	gisS‘
;

111 
boŞ
 
	gIÁ–P”CSŒ—mBa£
::
š™Deviû
(
PXCSessiÚ
 *
£ssiÚ
)

113 ià(
NULL
 =ğ
£ssiÚ
)

114  
çl£
;

116 
pxcStus
 
	g¡s
 = 
PXC_STATUS_NO_ERROR
;

117 
	gPXCSessiÚ
::
Im¶Desc
 
‹m¶©
;

118 
mem£t
(&
‹m¶©
,0,(templat));

119 
	g‹m¶©
.
	ggroup
 = 
PXCSessiÚ
::
IMPL_GROUP_SENSOR
;

120 
	g‹m¶©
.
	gsubgroup
ğ
PXCSessiÚ
::
IMPL_SUBGROUP_VIDEO_CAPTURE
;

122 
	gmodidx
 = 0; 
	gPXC_STATUS_NO_ERROR
 <ğ
¡s
; modidx++)

124 
	gPXCSessiÚ
::
Im¶Desc
 
desc
;

125 
	g¡s
 = 
£ssiÚ
->
Qu”yIm¶
(&
‹m¶©
, 
modidx
, &
desc
);

126 ià(
	gPXC_STATUS_NO_ERROR
 > 
	g¡s
)

129 
	gPXCSm¬tPŒ
<
	gPXCC­tu»
> 
	gÿ±u»
;

130 
	g¡s
 = 
£ssiÚ
->
C»©eIm¶
<
PXCC­tu»
>(&
desc
, &
	gÿ±u»
);

131 ià(!
	gÿ±u»
.
IsV®id
())

135 
	gdevidx
 = 0; 
	gPXC_STATUS_NO_ERROR
 <ğ
¡s
; devidx++)

137 
	gPXCSm¬tPŒ
<
	gPXCC­tu»
::
Deviû
> 
deviû
;

138 
	g¡s
 = 
ÿ±u»
->
C»©eDeviû
(
devidx
, &
deviû
);

139 ià(
	gPXC_STATUS_NO_ERROR
 <ğ
¡s
)

141 
m_deviû
 = 
deviû
.
R–—£PŒ
();

142  
	gŒue
;

146  
	gçl£
;

149 
	gIÁ–P”CSŒ—mBa£
::
š™SŒ—mIm¶
(
PXCImage
::
ImageTy³
 
ty³
)

151 ià(!
m_deviû
.
IsV®id
())

154 
pxcStus
 
	g¡s
 = 
PXC_STATUS_NO_ERROR
;

156 
	g¡»amidx
 = 0; 
	gPXC_STATUS_NO_ERROR
 <ğ
¡s
; streamidx++)

158 
	gPXCC­tu»
::
Deviû
::
SŒ—mInfo
 
sšfo
;

159 
	g¡s
 = 
m_deviû
->
Qu”ySŒ—m
(
¡»amidx
, &
sšfo
);

160 ià(
	gPXC_STATUS_NO_ERROR
 > 
	g¡s
)

162 ià(
	gPXCC­tu»
::
VideoSŒ—m
::
CUID
 !ğ
sšfo
.
cuid
)

164 ià(
	gty³
 !ğ
sšfo
.
imageTy³
)

167 
	g¡s
 = 
m_deviû
->
C»©eSŒ—m
<
PXCC­tu»
::
VideoSŒ—m
>(
¡»amidx
, &
	gm_¡»am
);

168 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
¡s
)

170 
	gm_¡»am
.
R–—£Ref
();

173 
boŞ
 
	gIÁ–P”CSŒ—mBa£
::
v®idProfe
(cÚ¡ 
PXCC­tu»
::
VideoSŒ—m
::
ProfeInfo
& )

175  
Œue
;

177 
	gIÁ–P”CSŒ—mBa£
::
’umProfes
()

179 
m_´ofes
.
ş—r
();

180 ià(!
	gm_¡»am
.
IsV®id
())

182 
pxcStus
 
	g¡s
 = 
PXC_STATUS_NO_ERROR
;

183 
	g´ofidx
 = 0; 
	gPXC_STATUS_NO_ERROR
 <ğ
¡s
;…rofidx++)

185 
	gPXCC­tu»
::
VideoSŒ—m
::
ProfeInfo
 
pšfo
;

186 
	g¡s
 = 
m_¡»am
->
Qu”yProfe
(
´ofidx
, &
pšfo
);

187 ià(
	gPXC_STATUS_NO_ERROR
 > 
	g¡s
)

189 ià(
v®idProfe
(
pšfo
))

190 
	gm_´ofes
.
push_back
(
pšfo
);

196 
	gIÁ–P”CSŒ—mImage
::
IÁ–P”CSŒ—mImage
()

199 
IÁ–P”CSŒ—mImage
::~IntelPerCStreamImage()

203 
boŞ
 
IÁ–P”CSŒ—mImage
::
š™SŒ—m
(
PXCSessiÚ
 *
£ssiÚ
)

205 ià(!
š™Deviû
(
£ssiÚ
))

206  
çl£
;

207 
š™SŒ—mIm¶
(
PXCImage
::
IMAGE_TYPE_COLOR
);

208 ià(!
	gm_¡»am
.
IsV®id
())

209  
	gçl£
;

210 
’umProfes
();

211  
	gŒue
;

213 
	gIÁ–P”CSŒ—mImage
::
g‘Prİ”ty
(
´İIdx
) const

215 
´İIdx
)

217 
CV_CAP_PROP_BRIGHTNESS
:

219 ià(!
m_deviû
.
IsV®id
())

221 
	gä‘
 = 0.0f;

222 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_BRIGHTNESS
, &
ä‘
))

223  ()
	gä‘
;

227 
	gCV_CAP_PROP_CONTRAST
:

229 ià(!
m_deviû
.
IsV®id
())

231 
	gä‘
 = 0.0f;

232 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_CONTRAST
, &
ä‘
))

233  ()
	gä‘
;

237 
	gCV_CAP_PROP_SATURATION
:

239 ià(!
m_deviû
.
IsV®id
())

241 
	gä‘
 = 0.0f;

242 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_SATURATION
, &
ä‘
))

243  ()
	gä‘
;

247 
	gCV_CAP_PROP_HUE
:

249 ià(!
m_deviû
.
IsV®id
())

251 
	gä‘
 = 0.0f;

252 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_HUE
, &
ä‘
))

253  ()
	gä‘
;

257 
	gCV_CAP_PROP_GAMMA
:

259 ià(!
m_deviû
.
IsV®id
())

261 
	gä‘
 = 0.0f;

262 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_GAMMA
, &
ä‘
))

263  ()
	gä‘
;

267 
	gCV_CAP_PROP_SHARPNESS
:

269 ià(!
m_deviû
.
IsV®id
())

271 
	gä‘
 = 0.0f;

272 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_SHARPNESS
, &
ä‘
))

273  ()
	gä‘
;

277 
	gCV_CAP_PROP_GAIN
:

279 ià(!
m_deviû
.
IsV®id
())

281 
	gä‘
 = 0.0f;

282 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_GAIN
, &
ä‘
))

283  ()
	gä‘
;

287 
	gCV_CAP_PROP_BACKLIGHT
:

289 ià(!
m_deviû
.
IsV®id
())

291 
	gä‘
 = 0.0f;

292 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_BACK_LIGHT_COMPENSATION
, &
ä‘
))

293  ()
	gä‘
;

297 
	gCV_CAP_PROP_EXPOSURE
:

299 ià(!
m_deviû
.
IsV®id
())

301 
	gä‘
 = 0.0f;

302 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_EXPOSURE
, &
ä‘
))

303  ()
	gä‘
;

309  
	gIÁ–P”CSŒ—mBa£
::
g‘Prİ”ty
(
´İIdx
);

311 
boŞ
 
	gIÁ–P”CSŒ—mImage
::
£tPrİ”ty
(
´İIdx
, 
´İV®
)

313 
	g´İIdx
)

315 
	gCV_CAP_PROP_BRIGHTNESS
:

317 ià(!
m_deviû
.
IsV®id
())

318  
çl£
;

319  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_BRIGHTNESS
, ()
´İV®
));

322 
	gCV_CAP_PROP_CONTRAST
:

324 ià(!
m_deviû
.
IsV®id
())

325  
çl£
;

326  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_CONTRAST
, ()
´İV®
));

329 
	gCV_CAP_PROP_SATURATION
:

331 ià(!
m_deviû
.
IsV®id
())

332  
çl£
;

333  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_SATURATION
, ()
´İV®
));

336 
	gCV_CAP_PROP_HUE
:

338 ià(!
m_deviû
.
IsV®id
())

339  
çl£
;

340  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_HUE
, ()
´İV®
));

343 
	gCV_CAP_PROP_GAMMA
:

345 ià(!
m_deviû
.
IsV®id
())

346  
çl£
;

347  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_GAMMA
, ()
´İV®
));

350 
	gCV_CAP_PROP_SHARPNESS
:

352 ià(!
m_deviû
.
IsV®id
())

353  
çl£
;

354  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_SHARPNESS
, ()
´İV®
));

357 
	gCV_CAP_PROP_GAIN
:

359 ià(!
m_deviû
.
IsV®id
())

360  
çl£
;

361  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_GAIN
, ()
´İV®
));

364 
	gCV_CAP_PROP_BACKLIGHT
:

366 ià(!
m_deviû
.
IsV®id
())

367  
çl£
;

368  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_BACK_LIGHT_COMPENSATION
, ()
´İV®
));

371 
	gCV_CAP_PROP_EXPOSURE
:

373 ià(!
m_deviû
.
IsV®id
())

374  
çl£
;

375  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_COLOR_EXPOSURE
, ()
´İV®
));

380  
	gIÁ–P”CSŒ—mBa£
::
£tPrİ”ty
(
´İIdx
, 
´İV®
);

382 
boŞ
 
	gIÁ–P”CSŒ—mImage
::
»Œ›veAsOuutA¼ay
(
cv
::
OuutA¼ay
 
image
)

384 ià(!
m_pxcImage
.
IsV®id
())

385  
çl£
;

386 
	gPXCImage
::
ImageInfo
 
šfo
;

387 
	gm_pxcImage
->
Qu”yInfo
(&
šfo
);

389 
	gPXCImage
::
ImageD©a
 
d©a
;

390 
	gm_pxcImage
->
AcquœeAcûss
(
PXCImage
::
ACCESS_READ
, PXCImage::
COLOR_FORMAT_RGB24
, &
d©a
);

392 ià(
	gPXCImage
::
SURFACE_TYPE_SYSTEM_MEMORY
 !ğ
d©a
.
ty³
)

393  
çl£
;

395 
	gcv
::
M©
 
‹mp
(
šfo
.
height
, info.
width
, 
CV_8UC3
, 
d©a
.
¶ªes
[0], d©a.
p™ches
[0]);

396 
	g‹mp
.
cİyTo
(
image
);

398 
	gm_pxcImage
->
R–—£Acûss
(&
d©a
);

399  
	gŒue
;

404 
	gIÁ–P”CSŒ—mD•th
::
IÁ–P”CSŒ—mD•th
()

407 
IÁ–P”CSŒ—mD•th
::~IntelPerCStreamDepth()

411 
boŞ
 
IÁ–P”CSŒ—mD•th
::
š™SŒ—m
(
PXCSessiÚ
 *
£ssiÚ
)

413 ià(!
š™Deviû
(
£ssiÚ
))

414  
çl£
;

415 
š™SŒ—mIm¶
(
PXCImage
::
IMAGE_TYPE_DEPTH
);

416 ià(!
	gm_¡»am
.
IsV®id
())

417  
	gçl£
;

418 
’umProfes
();

419  
	gŒue
;

421 
	gIÁ–P”CSŒ—mD•th
::
g‘Prİ”ty
(
´İIdx
) const

423 
´İIdx
)

425 
CV_CAP_PROP_INTELPERC_DEPTH_LOW_CONFIDENCE_VALUE
:

427 ià(!
m_deviû
.
IsV®id
())

429 
	gä‘
 = 0.0f;

430 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_LOW_CONFIDENCE_VALUE
, &
ä‘
))

431  ()
	gä‘
;

435 
	gCV_CAP_PROP_INTELPERC_DEPTH_SATURATION_VALUE
:

437 ià(!
m_deviû
.
IsV®id
())

439 
	gä‘
 = 0.0f;

440 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_SATURATION_VALUE
, &
ä‘
))

441  ()
	gä‘
;

445 
	gCV_CAP_PROP_INTELPERC_DEPTH_CONFIDENCE_THRESHOLD
:

447 ià(!
m_deviû
.
IsV®id
())

449 
	gä‘
 = 0.0f;

450 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_CONFIDENCE_THRESHOLD
, &
ä‘
))

451  ()
	gä‘
;

455 
	gCV_CAP_PROP_INTELPERC_DEPTH_FOCAL_LENGTH_HORZ
:

457 ià(!
m_deviû
.
IsV®id
())

459 
PXCPoštF32
 
	g±f
;

460 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”tyAsPošt
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_FOCAL_LENGTH
, &
±f
))

461  ()
	g±f
.
	gx
;

465 
	gCV_CAP_PROP_INTELPERC_DEPTH_FOCAL_LENGTH_VERT
:

467 ià(!
m_deviû
.
IsV®id
())

469 
PXCPoštF32
 
	g±f
;

470 ià(
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
Qu”yPrİ”tyAsPošt
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_FOCAL_LENGTH
, &
±f
))

471  ()
	g±f
.
	gy
;

477  
	gIÁ–P”CSŒ—mBa£
::
g‘Prİ”ty
(
´İIdx
);

479 
boŞ
 
	gIÁ–P”CSŒ—mD•th
::
£tPrİ”ty
(
´İIdx
, 
´İV®
)

481 
	g´İIdx
)

483 
	gCV_CAP_PROP_INTELPERC_DEPTH_LOW_CONFIDENCE_VALUE
:

485 ià(!
m_deviû
.
IsV®id
())

486  
çl£
;

487  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_LOW_CONFIDENCE_VALUE
, ()
´İV®
));

490 
	gCV_CAP_PROP_INTELPERC_DEPTH_SATURATION_VALUE
:

492 ià(!
m_deviû
.
IsV®id
())

493  
çl£
;

494  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_SATURATION_VALUE
, ()
´İV®
));

497 
	gCV_CAP_PROP_INTELPERC_DEPTH_CONFIDENCE_THRESHOLD
:

499 ià(!
m_deviû
.
IsV®id
())

500  
çl£
;

501  (
	gPXC_STATUS_NO_ERROR
 =ğ
m_deviû
->
S‘Prİ”ty
(
PXCC­tu»
::
Deviû
::
PROPERTY_DEPTH_CONFIDENCE_THRESHOLD
, ()
´İV®
));

506  
	gIÁ–P”CSŒ—mBa£
::
£tPrİ”ty
(
´İIdx
, 
´İV®
);

508 
boŞ
 
	gIÁ–P”CSŒ—mD•th
::
»Œ›veD•thAsOuutA¼ay
(
cv
::
OuutA¼ay
 
image
)

510  
»ŒiveF¿me
(
CV_16SC1
, 0, 
image
);

512 
boŞ
 
	gIÁ–P”CSŒ—mD•th
::
»Œ›veIRAsOuutA¼ay
(
cv
::
OuutA¼ay
 
image
)

514  
»ŒiveF¿me
(
CV_16SC1
, 1, 
image
);

516 
boŞ
 
	gIÁ–P”CSŒ—mD•th
::
»Œ›veUVAsOuutA¼ay
(
cv
::
OuutA¼ay
 
image
)

518  
»ŒiveF¿me
(
CV_32FC2
, 2, 
image
);

520 
boŞ
 
	gIÁ–P”CSŒ—mD•th
::
v®idProfe
(cÚ¡ 
PXCC­tu»
::
VideoSŒ—m
::
ProfeInfo
& 
pšfo
)

522  (
PXCImage
::
COLOR_FORMAT_DEPTH
 =ğ
pšfo
.
imageInfo
.
fÜm©
);

524 
boŞ
 
	gIÁ–P”CSŒ—mD•th
::
»ŒiveF¿me
(
ty³
, 
¶ªeIdx
, 
cv
::
OuutA¼ay
 
äame
)

526 ià(!
m_pxcImage
.
IsV®id
())

527  
çl£
;

528 
	gPXCImage
::
ImageInfo
 
šfo
;

529 
	gm_pxcImage
->
Qu”yInfo
(&
šfo
);

531 
	gPXCImage
::
ImageD©a
 
d©a
;

532 
	gm_pxcImage
->
AcquœeAcûss
(
PXCImage
::
ACCESS_READ
, &
d©a
);

534 ià(
	gPXCImage
::
SURFACE_TYPE_SYSTEM_MEMORY
 !ğ
d©a
.
ty³
)

535  
çl£
;

537 
	gcv
::
M©
 
‹mp
(
šfo
.
height
, info.
width
, 
ty³
, 
d©a
.
¶ªes
[
¶ªeIdx
], d©a.
p™ches
[planeIdx]);

538 
	g‹mp
.
cİyTo
(
äame
);

540 
	gm_pxcImage
->
R–—£Acûss
(&
d©a
);

541  
	gŒue
;

546 
	gVideoC­tu»_IÁ–P”C
::
VideoC­tu»_IÁ–P”C
()

547 : 
m_cÚ‹xtO³Ãd
(
çl£
)

549 
pxcStus
 
¡s
 = 
PXCSessiÚ_C»©e
(&
m_£ssiÚ
);

550 ià(
	gPXC_STATUS_NO_ERROR
 > 
	g¡s
)

552 
	gm_cÚ‹xtO³Ãd
 = 
m_imageSŒ—m
.
š™SŒ—m
(
m_£ssiÚ
);

553 
	gm_cÚ‹xtO³Ãd
 &ğ
m_d•thSŒ—m
.
š™SŒ—m
(
m_£ssiÚ
);

555 
	gVideoC­tu»_IÁ–P”C
::~
VideoC­tu»_IÁ–P”C
(){}

557 
VideoC­tu»_IÁ–P”C
::
g‘Prİ”ty
(
´İIdx
) const

559 
´İV®ue
 = 0;

560 
	gpu»PrİIdx
 = 
´İIdx
 & ~
CV_CAP_INTELPERC_GENERATORS_MASK
;

561 ià(
	gCV_CAP_INTELPERC_IMAGE_GENERATOR
 =ğ(
´İIdx
 & 
CV_CAP_INTELPERC_GENERATORS_MASK
))

563 
´İV®ue
 = 
m_imageSŒ—m
.
g‘Prİ”ty
(
pu»PrİIdx
);

565 ià(
	gCV_CAP_INTELPERC_DEPTH_GENERATOR
 =ğ(
´İIdx
 & 
CV_CAP_INTELPERC_GENERATORS_MASK
))

567 
´İV®ue
 = 
m_d•thSŒ—m
.
g‘Prİ”ty
(
pu»PrİIdx
);

571 
	g´İV®ue
 = 
m_d•thSŒ—m
.
g‘Prİ”ty
(
pu»PrİIdx
);

573  
	g´İV®ue
;

575 
boŞ
 
	gVideoC­tu»_IÁ–P”C
::
£tPrİ”ty
(
´İIdx
, 
´İV®
)

577 
boŞ
 
	gisS‘
 = 
çl£
;

578 
	gpu»PrİIdx
 = 
´İIdx
 & ~
CV_CAP_INTELPERC_GENERATORS_MASK
;

579 ià(
	gCV_CAP_INTELPERC_IMAGE_GENERATOR
 =ğ(
´İIdx
 & 
CV_CAP_INTELPERC_GENERATORS_MASK
))

581 
isS‘
 = 
m_imageSŒ—m
.
£tPrİ”ty
(
pu»PrİIdx
, 
´İV®
);

583 ià(
	gCV_CAP_INTELPERC_DEPTH_GENERATOR
 =ğ(
´İIdx
 & 
CV_CAP_INTELPERC_GENERATORS_MASK
))

585 
isS‘
 = 
m_d•thSŒ—m
.
£tPrİ”ty
(
pu»PrİIdx
, 
´İV®
);

589 
	gisS‘
 = 
m_d•thSŒ—m
.
£tPrİ”ty
(
pu»PrİIdx
, 
´İV®
);

591  
	gisS‘
;

594 
boŞ
 
	gVideoC­tu»_IÁ–P”C
::
g¿bF¿me
()

596 ià(!
isO³Ãd
())

597  
çl£
;

599 
boŞ
 
	gisG¿bbed
 = 
çl£
;

600 ià(
	gm_d•thSŒ—m
.
isV®id
())

601 
	gisG¿bbed
 = 
m_d•thSŒ—m
.
g¿bF¿me
();

602 ià((
	gm_imageSŒ—m
.
isV®id
()è&& (-1 !ğ
m_imageSŒ—m
.
g‘ProfeIDX
()))

603 
isG¿bbed
 &ğ
m_imageSŒ—m
.
g¿bF¿me
();

605  
	gisG¿bbed
;

607 
boŞ
 
	gVideoC­tu»_IÁ–P”C
::
»Œ›veF¿me
(
ouutTy³
, 
cv
::
OuutA¼ay
 
äame
)

609 
ouutTy³
)

611 
CV_CAP_INTELPERC_DEPTH_MAP
:

612  
m_d•thSŒ—m
.
»Œ›veD•thAsOuutA¼ay
(
äame
);

613 
	gCV_CAP_INTELPERC_UVDEPTH_MAP
:

614  
m_d•thSŒ—m
.
»Œ›veUVAsOuutA¼ay
(
äame
);

615 
	gCV_CAP_INTELPERC_IR_MAP
:

616  
m_d•thSŒ—m
.
»Œ›veIRAsOuutA¼ay
(
äame
);

617 
	gCV_CAP_INTELPERC_IMAGE
:

618  
m_imageSŒ—m
.
»Œ›veAsOuutA¼ay
(
äame
);

620  
	gçl£
;

622 
	gVideoC­tu»_IÁ–P”C
::
g‘C­tu»Domaš
()

624  
CV_CAP_INTELPERC
;

627 
boŞ
 
	gVideoC­tu»_IÁ–P”C
::
isO³Ãd
() const

629  
m_cÚ‹xtO³Ãd
;

	@cap_intelperc.hpp

12 #iâdeà
_CAP_INTELPERC_HPP_


13 
	#_CAP_INTELPERC_HPP_


	)

15 
	~"´ecomp.hµ
"

17 #ifdeà
HAVE_INTELPERC


19 
	~"pxc£ssiÚ.h
"

20 
	~"pxcsm¬Œ.h
"

21 
	~"pxcÿ±u».h
"

23 
Çme¥aû
 
	gcv


26 şas 
	cIÁ–P”CSŒ—mBa£


28 
	gpublic
:

29 
IÁ–P”CSŒ—mBa£
();

30 
	gvœtu®
 ~
IÁ–P”CSŒ—mBa£
();

32 
boŞ
 
isV®id
();

33 
boŞ
 
g¿bF¿me
();

34 
g‘ProfeIDX
() const;

35 
	gpublic
:

36 
vœtu®
 
boŞ
 
š™SŒ—m
(
PXCSessiÚ
 *
£ssiÚ
) = 0;

37 
vœtu®
 
g‘Prİ”ty
(
´İIdx
) const;

38 
vœtu®
 
boŞ
 
£tPrİ”ty
(
´İIdx
, 
´İV®
);

39 
	g´Ùeùed
:

40 
mubË
 
PXCSm¬tPŒ
<
PXCC­tu»
::
Deviû
> 
m_deviû
;

41 
boŞ
 
š™Deviû
(
PXCSessiÚ
 *
£ssiÚ
);

43 
	gPXCSm¬tPŒ
<
	gPXCC­tu»
::
VideoSŒ—m
> 
m_¡»am
;

44 
š™SŒ—mIm¶
(
PXCImage
::
ImageTy³
 
ty³
);

45 
	g´Ùeùed
:

46 
¡d
::
veùÜ
<
PXCC­tu»
::
VideoSŒ—m
::
ProfeInfo
> 
m_´ofes
;

47 
	gm_´ofeIdx
;

48 
	gm_äameIdx
;

49 
pxcU64
 
	gm_timeSmpS¹NS
;

50 
	gm_timeSmp
;

51 
	gPXCSm¬tPŒ
<
	gPXCImage
> 
	gm_pxcImage
;

53 
vœtu®
 
boŞ
 
v®idProfe
(cÚ¡ 
PXCC­tu»
::
VideoSŒ—m
::
ProfeInfo
& );

54 
’umProfes
();

57 şas 
	cIÁ–P”CSŒ—mImage


58 : 
public
 
IÁ–P”CSŒ—mBa£


60 
public
:

61 
IÁ–P”CSŒ—mImage
();

62 
	gvœtu®
 ~
IÁ–P”CSŒ—mImage
();

64 
vœtu®
 
boŞ
 
š™SŒ—m
(
PXCSessiÚ
 *
£ssiÚ
);

65 
vœtu®
 
g‘Prİ”ty
(
´İIdx
) const;

66 
vœtu®
 
boŞ
 
£tPrİ”ty
(
´İIdx
, 
´İV®
);

67 
	gpublic
:

68 
boŞ
 
»Œ›veAsOuutA¼ay
(
OuutA¼ay
 
image
);

71 şas 
	cIÁ–P”CSŒ—mD•th


72 : 
public
 
IÁ–P”CSŒ—mBa£


74 
public
:

75 
IÁ–P”CSŒ—mD•th
();

76 
	gvœtu®
 ~
IÁ–P”CSŒ—mD•th
();

78 
vœtu®
 
boŞ
 
š™SŒ—m
(
PXCSessiÚ
 *
£ssiÚ
);

79 
vœtu®
 
g‘Prİ”ty
(
´İIdx
) const;

80 
vœtu®
 
boŞ
 
£tPrİ”ty
(
´İIdx
, 
´İV®
);

81 
	gpublic
:

82 
boŞ
 
»Œ›veD•thAsOuutA¼ay
(
OuutA¼ay
 
image
);

83 
boŞ
 
»Œ›veIRAsOuutA¼ay
(
OuutA¼ay
 
image
);

84 
boŞ
 
»Œ›veUVAsOuutA¼ay
(
OuutA¼ay
 
image
);

85 
	g´Ùeùed
:

86 
vœtu®
 
boŞ
 
v®idProfe
(cÚ¡ 
PXCC­tu»
::
VideoSŒ—m
::
ProfeInfo
& 
pšfo
);

87 
	g´Ùeùed
:

88 
boŞ
 
»ŒiveF¿me
(
ty³
, 
¶ªeIdx
, 
OuutA¼ay
 
äame
);

91 şas 
	cVideoC­tu»_IÁ–P”C
 : 
public
 
IVideoC­tu»


93 
public
:

94 
VideoC­tu»_IÁ–P”C
();

95 
	gvœtu®
 ~
VideoC­tu»_IÁ–P”C
();

97 
vœtu®
 
g‘Prİ”ty
(
´İIdx
) const;

98 
vœtu®
 
boŞ
 
£tPrİ”ty
(
´İIdx
, 
´İV®
);

100 
vœtu®
 
boŞ
 
g¿bF¿me
();

101 
vœtu®
 
boŞ
 
»Œ›veF¿me
(
ouutTy³
, 
OuutA¼ay
 
äame
);

102 
vœtu®
 
g‘C­tu»Domaš
();

103 
vœtu®
 
boŞ
 
isO³Ãd
() const;

104 
	g´Ùeùed
:

105 
boŞ
 
m_cÚ‹xtO³Ãd
;

107 
	gPXCSm¬tPŒ
<
	gPXCSessiÚ
> 
	gm_£ssiÚ
;

108 
IÁ–P”CSŒ—mImage
 
	gm_imageSŒ—m
;

109 
IÁ–P”CSŒ—mD•th
 
	gm_d•thSŒ—m
;

	@cap_libv4l.cpp

240 
	~"´ecomp.hµ
"

242 #ià!
defšed
 
WIN32
 && defšed 
HAVE_LIBV4L


244 
	#CLEAR
(
x
è
	`mem£t
 (&(x), 0,  (x))

	)

246 
	~<¡dio.h
>

247 
	~<uni¡d.h
>

248 
	~<fú.h
>

249 
	~<”ºo.h
>

250 
	~<sys/ty³s.h
>

251 
	~<sys/mmª.h
>

252 
	~<¡ršg.h
>

253 
	~<¡dlib.h
>

254 
	~<asm/ty³s.h
>

255 
	~<as£¹.h
>

256 
	~<sys/¡©.h
>

257 
	~<sys/ioùl.h
>

259 #ifdeà
HAVE_CAMV4L


260 
	~<lšux/videodev.h
>

262 #ifdeà
HAVE_CAMV4L2


263 
	~<lšux/videodev2.h
>

266 
	~<libv4l1.h
>

267 
	~<libv4l2.h
>

270 
	#DEFAULT_V4L_WIDTH
 640

	)

271 
	#DEFAULT_V4L_HEIGHT
 480

	)

273 
	#CHANNEL_NUMBER
 1

	)

274 
	#MAX_CAMERAS
 8

	)

278 
	#MAX_V4L_BUFFERS
 10

	)

279 
	#DEFAULT_V4L_BUFFERS
 4

	)

283 
	#USE_TEMP_BUFFER


	)

285 
	#MAX_DEVICE_DRIVER_NAME
 80

	)

289 
	sbufãr


291 * 
	m¡¬t
;

292 
size_t
 
	mËngth
;

294 
	gn_bufãrs
 = 0;

300 
	sv4l2_ù¾_¿nge
 {

301 
__u32
 
	mù¾_id
;

302 
__s32
 
	mš™Ÿl_v®ue
;

303 
__s32
 
	mcu¼’t_v®ue
;

304 
__s32
 
	mmšimum
;

305 
__s32
 
	mmaximum
;

306 
__s32
 
	mdeçuÉ_v®ue
;

307 } 
	tv4l2_ù¾_¿nge
;

309 
	sCvC­tu»CAM_V4L


311 * 
	mdeviûName
;

312 
	mdeviûHªdË
;

313 
	mbufãrIndex
;

314 
	mFœ¡C­tu»
;

316 
	mwidth
; 
	mheight
;

317 
	mmode
;

319 
video_ÿ·b™y
 
	mÿ·b™y
;

320 
video_wšdow
 
	mÿ±u»Wšdow
;

321 
video_piùu»
 
	mimagePrİ”t›s
;

322 
video_mbuf
 
	mmemÜyBufãr
;

323 
video_mm­
 *
	mmm­s
;

324 *
	mmemÜyM­
;

325 
I¶Image
 
	mäame
;

328 
bufãr
 
	mbufãrs
[
MAX_V4L_BUFFERS
 + 1];

329 
v4l2_ÿ·b™y
 
	mÿp
;

330 
v4l2_šput
 
	mšp
;

331 
v4l2_fÜm©
 
	mfÜm
;

332 
v4l2_üİ
 
	müİ
;

333 
v4l2_üİÿp
 
	müİÿp
;

334 
v4l2_»que¡bufãrs
 
	m»q
;

335 
v4l2_j³gcom´essiÚ
 
	mcom´
;

336 
v4l2_cÚŒŞ
 
	mcÚŒŞ
;

337 
v4l2_buf_ty³
 
	mty³
;

338 
v4l2_qu”yù¾
 
	mqu”yù¾
;

340 
timev®
 
	mtime¡amp
;

343 
	m£qu’û
;

346 
v4l2_ù¾_¿nge
** 
	mv4l2_ù¾_¿nges
;

347 
	mv4l2_ù¾_couÁ
;

349 
	mis_v4l2_deviû
;

351 
	tCvC­tu»CAM_V4L
;

353 
icvClo£CAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
 );

355 
icvG¿bF¿meCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
 );

356 
I¶Image
* 
icvR‘r›veF¿meCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, );

357 
CvC­tu»
* 
cvC»©eCam”aC­tu»_V4L
Ğ
šdex
 );

359 
icvG‘Prİ”tyCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
´İ”ty_id
 );

360 
icvS‘Prİ”tyCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
 );

362 
icvS‘VideoSize
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
w
, 
h
);

366 
	gnumCam”as
 = 0;

367 
	gšdexLi¡
 = 0;

370 #ifdeà
HAVE_IOCTL_ULONG


371 
	$xioùl
Ğ
fd
, 
»que¡
, *
¬g
)

373 
	$xioùl
Ğ
fd
, 
»que¡
, *
¬g
)

377 
r
;

380 dØ
r
 = 
	`v4l2_ioùl
 (
fd
, 
»que¡
, 
¬g
);

381 -1 =ğ
r
 && 
EINTR
 =ğ
”ºo
);

383  
r
;

385 
	}
}

393 
	$icvIn™C­tu»_V4L
() {

394 
deviûHªdË
;

395 
Cam”aNumb”
;

396 
deviûName
[
MAX_DEVICE_DRIVER_NAME
];

398 
Cam”aNumb”
 = 0;

399 
Cam”aNumb”
 < 
MAX_CAMERAS
) {

401 
	`¥rštf
(
deviûName
, "/dev/video%1d", 
Cam”aNumb”
);

403 
deviûHªdË
 = 
	`İ’
(
deviûName
, 
O_RDONLY
);

404 ià(
deviûHªdË
 != -1) {

407 
šdexLi¡
|=(1 << 
Cam”aNumb”
);

408 
numCam”as
++;

410 ià(
deviûHªdË
 != -1)

411 
	`şo£
(
deviûHªdË
);

413 
Cam”aNumb”
++;

416 
	}
};

419 
	$Œy_š™_v4l
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, *
deviûName
)

426 
d‘eù
 = 0;

433 
ÿ±u»
->
deviûHªdË
 = 
	`v4l1_İ’
(
deviûName
, 
O_RDWR
);

436 ià(
ÿ±u»
->
deviûHªdË
 == 0)

438 
d‘eù
 = -1;

440 
	`icvClo£CAM_V4L
(
ÿ±u»
);

443 ià(
d‘eù
 == 0)

446 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGCAP
, &ÿ±u»->
ÿ·b™y
) < 0)

448 
d‘eù
 = 0;

450 
	`icvClo£CAM_V4L
(
ÿ±u»
);

454 
d‘eù
 = 1;

458  
d‘eù
;

460 
	}
}

463 
	$Œy_š™_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, *
deviûName
)

469 
d‘eù
 = 0;

475 
ÿ±u»
->
deviûHªdË
 = 
	`v4l2_İ’
 (
deviûName
, 
O_RDWR
 | 
O_NONBLOCK
, 0);

479 ià(
ÿ±u»
->
deviûHªdË
 == 0)

481 
d‘eù
 = -1;

483 
	`icvClo£CAM_V4L
(
ÿ±u»
);

486 ià(
d‘eù
 == 0)

488 
	`CLEAR
 (
ÿ±u»
->
ÿp
);

489 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCAP
, &ÿ±u»->
ÿp
))

491 
d‘eù
 = 0;

493 
	`icvClo£CAM_V4L
(
ÿ±u»
);

497 
	`CLEAR
 (
ÿ±u»
->
ÿ·b™y
);

498 
ÿ±u»
->
ÿ·b™y
.
ty³
 = c­tu»->
ÿp
.
ÿ·b™›s
;

501 ià(-1 !ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_INPUT
, &ÿ±u»->
ÿ·b™y
.
chªÃls
))

503 
d‘eù
 = 1;

508  
d‘eù
;

510 
	}
}

513 
	$v4l2_ä“_¿nges
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

514 
i
;

515 ià(
ÿ±u»
->
v4l2_ù¾_¿nges
 !ğ
NULL
) {

516 
i
 = 0; i < 
ÿ±u»
->
v4l2_ù¾_couÁ
; i++) {

523 
	`ä“
(
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]);

526 
	`ä“
(
ÿ±u»
->
v4l2_ù¾_¿nges
);

527 
ÿ±u»
->
v4l2_ù¾_couÁ
 = 0;

528 
ÿ±u»
->
v4l2_ù¾_¿nges
 = 
NULL
;

529 
	}
}

531 
	$v4l2_add_ù¾_¿nge
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
v4l2_cÚŒŞ
* 
ù¾
) {

532 
v4l2_ù¾_¿nge
* 
¿nge
 = (v4l2_ù¾_¿nge*)
	`m®loc
((v4l2_ctrl_range));

533 
¿nge
->
ù¾_id
 = 
ù¾
->
id
;

534 
¿nge
->
š™Ÿl_v®ue
 = 
ù¾
->
v®ue
;

535 
¿nge
->
cu¼’t_v®ue
 = 
ù¾
->
v®ue
;

536 
¿nge
->
mšimum
 = 
ÿ±u»
->
qu”yù¾
.minimum;

537 
¿nge
->
maximum
 = 
ÿ±u»
->
qu”yù¾
.maximum;

538 
¿nge
->
deçuÉ_v®ue
 = 
ÿ±u»
->
qu”yù¾
.default_value;

539 
ÿ±u»
->
v4l2_ù¾_¿nges
[ÿ±u»->
v4l2_ù¾_couÁ
] = 
¿nge
;

540 
ÿ±u»
->
v4l2_ù¾_couÁ
 += 1;

541 
ÿ±u»
->
v4l2_ù¾_¿nges
 = (
v4l2_ù¾_¿nge
**)
	`»®loc
((v4l2_ù¾_¿nge**)ÿ±u»->v4l2_ù¾_¿nges, (ÿ±u»->
v4l2_ù¾_couÁ
 + 1) * (v4l2_ctrl_range*));

542 
	}
}

544 
	$v4l2_g‘_ù¾_deçuÉ
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
__u32
 
id
) {

545 
i
;

546 
i
 = 0; i < 
ÿ±u»
->
v4l2_ù¾_couÁ
; i++) {

547 ià(
id
 =ğ
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]->
ù¾_id
) {

548  
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]->
deçuÉ_v®ue
;

552 
	}
}

554 
	$v4l2_g‘_ù¾_mš
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
__u32
 
id
) {

555 
i
;

556 
i
 = 0; i < 
ÿ±u»
->
v4l2_ù¾_couÁ
; i++) {

557 ià(
id
 =ğ
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]->
ù¾_id
) {

558  
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]->
mšimum
;

562 
	}
}

564 
	$v4l2_g‘_ù¾_max
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
__u32
 
id
) {

565 
i
;

566 
i
 = 0; i < 
ÿ±u»
->
v4l2_ù¾_couÁ
; i++) {

567 ià(
id
 =ğ
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]->
ù¾_id
) {

568  
ÿ±u»
->
v4l2_ù¾_¿nges
[
i
]->
maximum
;

572 
	}
}

575 
	$v4l2_sÿn_cÚŒŞs
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

577 
__u32
 
ù¾_id
;

578 
v4l2_cÚŒŞ
 
c
;

579 ià(
ÿ±u»
->
v4l2_ù¾_¿nges
 !ğ
NULL
) {

580 
	`v4l2_ä“_¿nges
(
ÿ±u»
);

582 
ÿ±u»
->
v4l2_ù¾_¿nges
 = (
v4l2_ù¾_¿nge
**)
	`m®loc
((v4l2_ctrl_range*));

583 #ifdeà
V4L2_CTRL_FLAG_NEXT_CTRL


585 
ÿ±u»
->
qu”yù¾
.
id
 = 
V4L2_CTRL_FLAG_NEXT_CTRL
;

586 if(0 =ğ
	`v4l2_ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCTRL
, &ÿ±u»->
qu”yù¾
)) {

588 
c
.
id
 = 
ÿ±u»
->
qu”yù¾
.id;

589 
ÿ±u»
->
qu”yù¾
.
id
 |ğ
V4L2_CTRL_FLAG_NEXT_CTRL
;

590 if(
ÿ±u»
->
qu”yù¾
.
æags
 & 
V4L2_CTRL_FLAG_DISABLED
) {

593 if(
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_INTEGER
 &&

594 
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_BOOLEAN
 &&

595 
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_MENU
) {

598 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_CTRL
, &
c
) == 0) {

599 
	`v4l2_add_ù¾_¿nge
(
ÿ±u»
, &
c
);

602 } 0 =ğ
	`v4l2_ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCTRL
, &ÿ±u»->
qu”yù¾
));

607 
ù¾_id
=
V4L2_CID_BASE
; cŒl_id<
V4L2_CID_LASTP1
; ctrl_id++) {

608 
ÿ±u»
->
qu”yù¾
.
id
 = 
ù¾_id
;

609 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCTRL
, &ÿ±u»->
qu”yù¾
) == 0) {

610 if(
ÿ±u»
->
qu”yù¾
.
æags
 & 
V4L2_CTRL_FLAG_DISABLED
) {

613 if(
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_INTEGER
 &&

614 
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_BOOLEAN
 &&

615 
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_MENU
) {

618 
c
.
id
 = 
ù¾_id
;

620 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_CTRL
, &
c
) == 0) {

621 
	`v4l2_add_ù¾_¿nge
(
ÿ±u»
, &
c
);

627 
ù¾_id
=
V4L2_CID_PRIVATE_BASE
; ; ctrl_id++) {

628 
ÿ±u»
->
qu”yù¾
.
id
 = 
ù¾_id
;

629 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCTRL
, &ÿ±u»->
qu”yù¾
) == 0) {

630 if(
ÿ±u»
->
qu”yù¾
.
æags
 & 
V4L2_CTRL_FLAG_DISABLED
) {

635 if(
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_INTEGER
 &&

636 
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_BOOLEAN
 &&

637 
ÿ±u»
->
qu”yù¾
.
ty³
 !ğ
V4L2_CTRL_TYPE_MENU
) {

641 
c
.
id
 = 
ù¾_id
;

643 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_CTRL
, &
c
) == 0) {

644 
	`v4l2_add_ù¾_¿nge
(
ÿ±u»
, &
c
);

651 
	}
}

653 
šlše
 
	$chªÃls_fÜ_mode
(
mode
)

655 
mode
) {

656 
CV_CAP_MODE_GRAY
:

658 
CV_CAP_MODE_YUYV
:

663 
	}
}

665 
	$_ÿ±u»_V4L2
 (
CvC­tu»CAM_V4L
 *
ÿ±u»
, *
deviûName
)

667 
d‘eù_v4l2
 = 0;

669 
ÿ±u»
->
deviûName
 = 
	`¡rdup
(deviceName);

671 
d‘eù_v4l2
 = 
	`Œy_š™_v4l2
(
ÿ±u»
, 
deviûName
);

673 ià(
d‘eù_v4l2
 != 1) {

679 
ÿ±u»
->
is_v4l2_deviû
 = 1;

681 
ÿ±u»
->
v4l2_ù¾_¿nges
 = 
NULL
;

682 
ÿ±u»
->
v4l2_ù¾_couÁ
 = 0;

685 
	`v4l2_sÿn_cÚŒŞs
(
ÿ±u»
);

687 ià((
ÿ±u»
->
ÿp
.
ÿ·b™›s
 & 
V4L2_CAP_VIDEO_CAPTURE
) == 0) {

689 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L2: deviû % i uÇbËØÿ±u» videØmemÜy.\n",
deviûName
);

690 
	`icvClo£CAM_V4L
(
ÿ±u»
);

701 if(
ÿ±u»
->
šp
.
šdex
 > 0) {

702 
	`CLEAR
 (
ÿ±u»
->
šp
);

703 
ÿ±u»
->
šp
.
šdex
 = 
CHANNEL_NUMBER
;

706 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_ENUMINPUT
, &ÿ±u»->
šp
))

708 
	`årštf
 (
¡d”r
, "VIDEOIO ERROR: V4L2: Aren't‡bleo set channel‚umber\n");

709 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

715 
	`CLEAR
 (
ÿ±u»
->
fÜm
);

716 
ÿ±u»
->
fÜm
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

718 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
)) {

719 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L2: Could‚ot obtain specifics of capture window.\n\n");

720 
	`icvClo£CAM_V4L
(
ÿ±u»
);

726 
»que¡edPix–FÜm©
;

727 
	`´štf
("Pixelformat : ");

728 
ÿ±u»
->
mode
) {

729 
CV_CAP_MODE_RGB
:

730 
»que¡edPix–FÜm©
 = 
V4L2_PIX_FMT_RGB24
;

731 
	`´štf
("RGB24\n");

733 
CV_CAP_MODE_GRAY
:

734 
»que¡edPix–FÜm©
 = 
V4L2_PIX_FMT_YUV420
;

735 
	`´štf
("YUV420\n");

737 
CV_CAP_MODE_YUYV
:

738 
»que¡edPix–FÜm©
 = 
V4L2_PIX_FMT_YUYV
;

739 
	`´štf
("YUYV\n");

742 
»que¡edPix–FÜm©
 = 
V4L2_PIX_FMT_BGR24
;

743 
	`´štf
("BGR24\n");

746 
	`CLEAR
 (
ÿ±u»
->
fÜm
);

747 
ÿ±u»
->
fÜm
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

748 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
pix–fÜm©
 = 
»que¡edPix–FÜm©
;

751 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
f›ld
 = 
V4L2_FIELD_ANY
;

752 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
 = capture->width;

753 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
 = capture->height;

755 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_FMT
, &ÿ±u»->
fÜm
)) {

756 
	`årštf
(
¡d”r
, "VIDEOIO ERROR:†ibv4l unableo ioctl S_FMT\n");

760 ià(
»que¡edPix–FÜm©
 !ğ
ÿ±u»
->
fÜm
.
fmt
.
pix
.
pix–fÜm©
) {

761 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR:†ibv4l unable converto„equested…ixfmt\n");

767 
mš
;

770 
mš
 = 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
 * 2;

772 ià(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
by‹¥”lše
 < 
mš
)

773 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
by‹¥”lše
 = 
mš
;

775 
mš
 = 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
by‹¥”lše
 * c­tu»->fÜm.fmt.pix.
height
;

777 ià(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
sizeimage
 < 
mš
)

778 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
sizeimage
 = 
mš
;

780 
	`CLEAR
 (
ÿ±u»
->
»q
);

782 
bufãr_numb”
 = 
DEFAULT_V4L_BUFFERS
;

784 
Œy_agaš
:

786 
ÿ±u»
->
»q
.
couÁ
 = 
bufãr_numb”
;

787 
ÿ±u»
->
»q
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

788 
ÿ±u»
->
»q
.
memÜy
 = 
V4L2_MEMORY_MMAP
;

790 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_REQBUFS
, &ÿ±u»->
»q
))

792 ià(
EINVAL
 =ğ
”ºo
)

794 
	`årštf
 (
¡d”r
, "% dÛ nÙ suµÜˆmemÜy m­pšg\n", 
deviûName
);

796 
	`³¼Ü
 ("VIDIOC_REQBUFS");

799 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

803 ià(
ÿ±u»
->
»q
.
couÁ
 < 
bufãr_numb”
)

805 ià(
bufãr_numb”
 == 1)

807 
	`årštf
 (
¡d”r
, "Insuffic›Á bufã¸memÜy oÀ%s\n", 
deviûName
);

810 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

813 
bufãr_numb”
--;

814 
	`årštf
 (
¡d”r
, "Insuffic›Á bufã¸memÜy oÀ% -- deü—£šg bufãrs\n", 
deviûName
);

816 
Œy_agaš
;

820 
n_bufãrs
 = 0;‚_bufãr < 
ÿ±u»
->
»q
.
couÁ
; ++n_buffers)

822 
v4l2_bufãr
 
buf
;

824 
	`CLEAR
 (
buf
);

826 
buf
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

827 
buf
.
memÜy
 = 
V4L2_MEMORY_MMAP
;

828 
buf
.
šdex
 = 
n_bufãrs
;

830 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYBUF
, &
buf
)) {

831 
	`³¼Ü
 ("VIDIOC_QUERYBUF");

834 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

838 
ÿ±u»
->
bufãrs
[
n_bufãrs
].
Ëngth
 = 
buf
.length;

839 
ÿ±u»
->
bufãrs
[
n_bufãrs
].
¡¬t
 =

840 
	`v4l2_mm­
 (
NULL
 ,

841 
buf
.
Ëngth
,

842 
PROT_READ
 | 
PROT_WRITE
 ,

843 
MAP_SHARED
 ,

844 
ÿ±u»
->
deviûHªdË
, 
buf
.
m
.
off£t
);

845 
	`´štf
("buf.Ëngth = %d\n", 
buf
.
Ëngth
);

846 ià(
MAP_FAILED
 =ğ
ÿ±u»
->
bufãrs
[
n_bufãrs
].
¡¬t
) {

847 
	`³¼Ü
 ("mmap");

850 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

854 #ifdeà
USE_TEMP_BUFFER


855 ià(
n_bufãrs
 == 0) {

856 ià(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
) {

857 
	`ä“
(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
);

858 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
 = 
NULL
;

861 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
 = 
	`m®loc
(
buf
.
Ëngth
);

862 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
Ëngth
 = 
buf
.length;

868 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

869 
	`cvSize
Ğ
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

870 
ÿ±u»
->
ÿ±u»Wšdow
.
height
 ),

871 
IPL_DEPTH_8U
, 
	`chªÃls_fÜ_mode
(
ÿ±u»
->
mode
),

872 
IPL_ORIGIN_TL
, 4 );

874 
ÿ±u»
->
äame
.
imageD©a
 = (*)
	`cvAÎoc
(ÿ±u»->äame.
imageSize
);

877 
	}
};

880 
	$_ÿ±u»_V4L
 (
CvC­tu»CAM_V4L
 *
ÿ±u»
, *
deviûName
)

882 
d‘eù_v4l
 = 0;

884 
d‘eù_v4l
 = 
	`Œy_š™_v4l
(
ÿ±u»
, 
deviûName
);

886 ià(
d‘eù_v4l
 == -1)

888 
	`årštf
 (
¡d”r
, "VIDEOIO ERROR: V4L"

889 ": deviû %s: UÇbËØİ’ fÜ READ ONLY\n", 
deviûName
);

894 ià(
d‘eù_v4l
 <= 0)

896 
	`årštf
 (
¡d”r
, "VIDEOIO ERROR: V4L"

897 ": deviû %s: UÇbËØqu”y‚umb” oàchªÃls\n", 
deviûName
);

903 ià((
ÿ±u»
->
ÿ·b™y
.
ty³
 & 
VID_TYPE_CAPTURE
) == 0) {

905 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: "

906 "deviû % i uÇbËØÿ±u» videØmemÜy.\n",
deviûName
);

907 
	`icvClo£CAM_V4L
(
ÿ±u»
);

923 if(
ÿ±u»
->
ÿ·b™y
.
chªÃls
>0) {

925 
video_chªÃl
 
£ËùedChªÃl
;

927 
£ËùedChªÃl
.
chªÃl
=
CHANNEL_NUMBER
;

928 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGCHAN
 , &
£ËùedChªÃl
) != -1) {

931 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSCHAN
 , &
£ËùedChªÃl
) == -1) {

942 if(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGWIN
, &ÿ±u»->
ÿ±u»Wšdow
) == -1) {

943 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: "

945 
	`icvClo£CAM_V4L
(
ÿ±u»
);

952 if(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGPICT
, &ÿ±u»->
imagePrİ”t›s
) < 0) {

953 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Unableo determine size of incoming image\n");

954 
	`icvClo£CAM_V4L
(
ÿ±u»
);

958 
»que¡edVideoP®‘‹
;

959 
d•th
;

960 
ÿ±u»
->
mode
) {

961 
CV_CAP_MODE_GRAY
:

962 
»que¡edVideoP®‘‹
 = 
VIDEO_PALETTE_YUV420
;

963 
d•th
 = 8;

965 
CV_CAP_MODE_YUYV
:

966 
»que¡edVideoP®‘‹
 = 
VIDEO_PALETTE_YUYV
;

967 
d•th
 = 16;

970 
»que¡edVideoP®‘‹
 = 
VIDEO_PALETTE_RGB24
;

971 
d•th
 = 24;

974 
ÿ±u»
->
imagePrİ”t›s
.
d•th
 = depth;

975 
ÿ±u»
->
imagePrİ”t›s
.
·Ë‰e
 = 
»que¡edVideoP®‘‹
;

976 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSPICT
, &ÿ±u»->
imagePrİ”t›s
) < 0) {

977 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR:†ibv4l unableo ioctl VIDIOCSPICT\n\n");

978 
	`icvClo£CAM_V4L
(
ÿ±u»
);

981 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGPICT
, &ÿ±u»->
imagePrİ”t›s
) < 0) {

982 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR:†ibv4l unableo ioctl VIDIOCGPICT\n\n");

983 
	`icvClo£CAM_V4L
(
ÿ±u»
);

986 ià(
ÿ±u»
->
imagePrİ”t›s
.
·Ë‰e
 !ğ
»que¡edVideoP®‘‹
) {

987 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR:†ibv4l unable converto„equested…ixfmt\n\n");

988 
	`icvClo£CAM_V4L
(
ÿ±u»
);

996 
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGMBUF
, &ÿ±u»->
memÜyBufãr
);

997 
ÿ±u»
->
memÜyM­
 = (*)
	`v4l1_mm­
(0,

998 
ÿ±u»
->
memÜyBufãr
.
size
,

999 
PROT_READ
 | 
PROT_WRITE
,

1000 
MAP_SHARED
,

1001 
ÿ±u»
->
deviûHªdË
,

1003 ià(
ÿ±u»
->
memÜyM­
 =ğ
MAP_FAILED
) {

1004 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: M­pšg MemmÜy from videØsourûƒ¼Ü: %s\n", 
	`¡»¼Ü
(
”ºo
));

1005 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1011 
ÿ±u»
->
mm­s
 = (
video_mm­
 *)

1012 (
	`m®loc
(
ÿ±u»
->
memÜyBufãr
.
äames
 * (
video_mm­
)));

1013 ià(!
ÿ±u»
->
mm­s
) {

1014 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Could‚ot memory map video frames.\n");

1015 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1022 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

1023 
	`cvSize
Ğ
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

1024 
ÿ±u»
->
ÿ±u»Wšdow
.
height
 ),

1025 
IPL_DEPTH_8U
, 
	`chªÃls_fÜ_mode
(
ÿ±u»
->
mode
),

1026 
IPL_ORIGIN_TL
, 4 );

1028 
ÿ±u»
->
äame
.
imageD©a
 = (*)
	`cvAÎoc
(ÿ±u»->äame.
imageSize
);

1031 
	}
};

1033 
CvC­tu»CAM_V4L
 * 
	$icvC­tu»FromCAM_V4L
 (
šdex
)

1035 
autošdex
;

1036 
autošdex
 = 0;

1038 
deviûName
[
MAX_DEVICE_DRIVER_NAME
];

1040 ià(!
numCam”as
)

1041 
	`icvIn™C­tu»_V4L
();

1042 ià(!
numCam”as
)

1043  
NULL
;

1046 iàĞ(
šdex
>-1è&& ! ((1 << indexè& 
šdexLi¡
) )

1048 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: index %d i nÙ cÜ»ù!\n",
šdex
);

1049  
NULL
;

1053 
CvC­tu»CAM_V4L
 * 
ÿ±u»
 = (CvC­tu»CAM_V4L*)
	`cvAÎoc
((CvCaptureCAM_V4L));

1054 ià(!
ÿ±u»
) {

1055 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Could‚ot‡llocate memory for capture…rocess.\n");

1056  
NULL
;

1059 #ifdeà
USE_TEMP_BUFFER


1060 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
 = 
NULL
;

1064 ià(
šdex
<0) {

1065 ; 
autošdex
<
MAX_CAMERAS
;autoindex++)

1066 ià(
šdexLi¡
 & (1<<
autošdex
))

1068 ià(
autošdex
==
MAX_CAMERAS
)

1069  
NULL
;

1070 
šdex
=
autošdex
;

1071 
autošdex
++;

1074 
	`¥rštf
(
deviûName
, "/dev/video%1d", 
šdex
);

1077 
	`mem£t
(
ÿ±u»
,0,(
CvC­tu»CAM_V4L
));

1080 
ÿ±u»
->
Fœ¡C­tu»
 = 1;

1083 
ÿ±u»
->
width
 = 
DEFAULT_V4L_WIDTH
;

1084 
ÿ±u»
->
height
 = 
DEFAULT_V4L_HEIGHT
;

1086 ià(
	`_ÿ±u»_V4L2
 (
ÿ±u»
, 
deviûName
) == -1) {

1087 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1088 
ÿ±u»
->
is_v4l2_deviû
 = 0;

1089 ià(
	`_ÿ±u»_V4L
 (
ÿ±u»
, 
deviûName
) == -1) {

1090 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1091  
NULL
;

1094 
ÿ±u»
->
is_v4l2_deviû
 = 1;

1097  
ÿ±u»
;

1098 
	}
};

1100 #ifdeà
HAVE_CAMV4L2


1102 
	$»ad_äame_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

1103 
v4l2_bufãr
 
buf
;

1105 
	`CLEAR
 (
buf
);

1107 
buf
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1108 
buf
.
memÜy
 = 
V4L2_MEMORY_MMAP
;

1110 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_DQBUF
, &
buf
)) {

1111 
”ºo
) {

1112 
EAGAIN
:

1115 
EIO
:

1122 
	`³¼Ü
 ("VIDIOC_DQBUF");

1128 
	`as£¹
(
buf
.
šdex
 < 
ÿ±u»
->
»q
.
couÁ
);

1130 #ifdeà
USE_TEMP_BUFFER


1131 
	`memıy
(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
,

1132 
ÿ±u»
->
bufãrs
[
buf
.
šdex
].
¡¬t
,

1133 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
Ëngth
 );

1134 
ÿ±u»
->
bufãrIndex
 = 
MAX_V4L_BUFFERS
;

1138 
ÿ±u»
->
bufãrIndex
 = 
buf
.
šdex
;

1141 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QBUF
, &
buf
))

1142 
	`³¼Ü
 ("VIDIOC_QBUF");

1146 
ÿ±u»
->
time¡amp
 = 
buf
.timestamp;

1147 
ÿ±u»
->
£qu’û
 = 
buf
.sequence;

1150 
	}
}

1152 
	$mašloİ_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

1153 
couÁ
;

1155 
couÁ
 = 1;

1157 
couÁ
-- > 0) {

1159 
fd_£t
 
fds
;

1160 
timev®
 
tv
;

1161 
r
;

1163 
	`FD_ZERO
 (&
fds
);

1164 
	`FD_SET
 (
ÿ±u»
->
deviûHªdË
, &
fds
);

1167 
tv
.
tv_£c
 = 10;

1168 
tv
.
tv_u£c
 = 0;

1170 
r
 = 
	`£Ëù
 (
ÿ±u»
->
deviûHªdË
+1, &
fds
, 
NULL
, NULL, &
tv
);

1172 ià(-1 =ğ
r
) {

1173 ià(
EINTR
 =ğ
”ºo
)

1176 
	`³¼Ü
 ("select");

1179 ià(0 =ğ
r
) {

1180 
	`årštf
 (
¡d”r
, "selectimeout\n");

1186 ià(
	`»ad_äame_v4l2
 (
ÿ±u»
))

1190 
	}
}

1192 
	$icvG¿bF¿meCAM_V4L
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

1194 ià(
ÿ±u»
->
Fœ¡C­tu»
) {

1200 ià(
ÿ±u»
->
is_v4l2_deviû
 == 1)

1203 
ÿ±u»
->
bufãrIndex
 = 0;

1204 
ÿ±u»
->
bufãrIndex
 < (()ÿ±u»->
»q
.
couÁ
);

1205 ++
ÿ±u»
->
bufãrIndex
)

1208 
v4l2_bufãr
 
buf
;

1210 
	`CLEAR
 (
buf
);

1212 
buf
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1213 
buf
.
memÜy
 = 
V4L2_MEMORY_MMAP
;

1214 
buf
.
šdex
 = ()
ÿ±u»
->
bufãrIndex
;

1216 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QBUF
, &
buf
)) {

1217 
	`³¼Ü
 ("VIDIOC_QBUF");

1223 
ÿ±u»
->
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1224 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_STREAMON
,

1225 &
ÿ±u»
->
ty³
)) {

1227 
	`³¼Ü
 ("VIDIOC_STREAMON");

1233 
ÿ±u»
->
bufãrIndex
 = 0;

1234 
ÿ±u»
->
bufãrIndex
 < (ÿ±u»->
memÜyBufãr
.
äames
-1);

1235 ++
ÿ±u»
->
bufãrIndex
) {

1237 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
äame
 = capture->bufferIndex;

1238 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
width
 = c­tu»->
ÿ±u»Wšdow
.width;

1239 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
height
 = c­tu»->
ÿ±u»Wšdow
.height;

1240 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
fÜm©
 = c­tu»->
imagePrİ”t›s
.
·Ë‰e
;

1242 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCMCAPTURE
, &ÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
]) == -1) {

1243 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Initial Capture Error: Unableo†oad initial memory buffers.\n");

1251 
ÿ±u»
->
Fœ¡C­tu»
 = 0;

1254 ià(
ÿ±u»
->
is_v4l2_deviû
 == 1)

1257 
	`mašloİ_v4l2
(
ÿ±u»
);

1262 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
äame
 = capture->bufferIndex;

1263 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
width
 = c­tu»->
ÿ±u»Wšdow
.width;

1264 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
height
 = c­tu»->
ÿ±u»Wšdow
.height;

1265 
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
fÜm©
 = c­tu»->
imagePrİ”t›s
.
·Ë‰e
;

1267 ià(
	`v4l1_ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOCMCAPTURE
,

1268 &
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
]) == -1) {

1273 ++
ÿ±u»
->
bufãrIndex
;

1274 ià(
ÿ±u»
->
bufãrIndex
 =ğÿ±u»->
memÜyBufãr
.
äames
) {

1275 
ÿ±u»
->
bufãrIndex
 = 0;

1281 
	}
}

1283 
I¶Image
* 
	$icvR‘r›veF¿meCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, ) {

1285 ià(
ÿ±u»
->
is_v4l2_deviû
 == 0)

1289 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSYNC
, &ÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
].
äame
) == -1) {

1290 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Could‚Ù SYNCØvideØ¡»am. %s\n", 
	`¡»¼Ü
(
”ºo
));

1299 ià(
ÿ±u»
->
is_v4l2_deviû
 == 1)

1302 if((()
ÿ±u»
->
äame
.
width
 !ğÿ±u»->
fÜm
.
fmt
.
pix
.width)

1303 || (()
ÿ±u»
->
äame
.
height
 !ğÿ±u»->
fÜm
.
fmt
.
pix
.height)) {

1304 
	`cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

1305 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

1306 
	`cvSize
Ğ
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

1307 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
 ),

1308 
IPL_DEPTH_8U
, 
	`chªÃls_fÜ_mode
(
ÿ±u»
->
mode
),

1309 
IPL_ORIGIN_TL
, 4 );

1310 
ÿ±u»
->
äame
.
imageD©a
 = (*)
	`cvAÎoc
(ÿ±u»->äame.
imageSize
);

1316 if((
ÿ±u»
->
äame
.
width
 !ğÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
].width)

1317 || (
ÿ±u»
->
äame
.
height
 !ğÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
].height)) {

1318 
	`cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

1319 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

1320 
	`cvSize
Ğ
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

1321 
ÿ±u»
->
ÿ±u»Wšdow
.
height
 ),

1322 
IPL_DEPTH_8U
, 
	`chªÃls_fÜ_mode
(
ÿ±u»
->
mode
),

1323 
IPL_ORIGIN_TL
, 4 );

1324 
ÿ±u»
->
äame
.
imageD©a
 = (*)
	`cvAÎoc
(ÿ±u»->äame.
imageSize
);

1329 ià(
ÿ±u»
->
is_v4l2_deviû
 == 1)

1332 if(
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
){

1333 
	`memıy
((*)
ÿ±u»
->
äame
.
imageD©a
,

1334 (*)
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
,

1335 
ÿ±u»
->
äame
.
imageSize
);

1342 
ÿ±u»
->
imagePrİ”t›s
.
·Ë‰e
) {

1343 
VIDEO_PALETTE_RGB24
:

1344 
VIDEO_PALETTE_YUV420
:

1345 
VIDEO_PALETTE_YUYV
:

1346 
	`memıy
((*)
ÿ±u»
->
äame
.
imageD©a
,

1347 (*)(
ÿ±u»
->
memÜyM­
 + c­tu»->
memÜyBufãr
.
off£ts
[ÿ±u»->
bufãrIndex
]),

1348 
ÿ±u»
->
äame
.
imageSize
);

1351 
	`årštf
Ğ
¡d”r
,

1353 
ÿ±u»
->
imagePrİ”t›s
.
·Ë‰e
,

1354 
ÿ±u»
->
mode
);

1360 (&
ÿ±u»
->
äame
);

1361 
	}
}

1364 
	$icvG‘Prİ”tyCAM_V4L
 (
CvC­tu»CAM_V4L
* 
ÿ±u»
,

1365 
´İ”ty_id
 ) {

1366 
Çme
[32];

1367 
is_v4l2_deviû
 = 0;

1369 
´İ”ty_id
) {

1370 
CV_CAP_PROP_FRAME_WIDTH
:

1371 
CV_CAP_PROP_FRAME_HEIGHT
:

1372 
	`CLEAR
 (
ÿ±u»
->
fÜm
);

1373 
ÿ±u»
->
fÜm
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1374 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
)) {

1376 
	`³¼Ü
 ("VIDIOC_G_FMT");

1377 ià(
	`v4l1_ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOCGWIN
, &ÿ±u»->
ÿ±u»Wšdow
) < 0) {

1378 
	`årštf
 (
¡d”r
, " ERROR: V4L: Unableo determine size of incoming image\n");

1379 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1382 
»tv®
 = (
´İ”ty_id
 =ğ
CV_CAP_PROP_FRAME_WIDTH
)?
ÿ±u»
->
ÿ±u»Wšdow
.
width
:ÿ±u»->ÿ±u»Wšdow.
height
;

1383  
»tv®
 / 0xFFFF;

1386  (
´İ”ty_id
 =ğ
CV_CAP_PROP_FRAME_WIDTH
)?
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
:ÿ±u»->fÜm.fmt.pix.
height
;

1388 
CV_CAP_PROP_POS_MSEC
:

1389 ià(
ÿ±u»
->
Fœ¡C­tu»
) {

1393  1000 * 
ÿ±u»
->
time¡amp
.
tv_£c
 + ((èÿ±u»->time¡amp.
tv_u£c
) / 1000;

1397 
CV_CAP_PROP_POS_FRAMES
:

1398  
ÿ±u»
->
£qu’û
;

1401 
CV_CAP_PROP_FPS
: {

1402 
v4l2_¡»am·rm
 
¥
;

1403 
	`mem£t
 (&
¥
, 0, (
v4l2_¡»am·rm
));

1404 
¥
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1405 ià(
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_PARM
, &
¥
) < 0){

1406 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Unableo get camera FPS\n");

1411 
äamesP”Sec
 = 
¥
.
·rm
.
ÿ±u»
.
tim•”äame
.
d’omš©Ü
 / (è¥.·rm.ÿ±u».tim•”äame.
num”©Ü
 ;

1412  
äamesP”Sec
;

1417 
CV_CAP_PROP_MODE
:

1418  
ÿ±u»
->
mode
;

1420 
CV_CAP_PROP_BRIGHTNESS
:

1421 
	`¥rštf
(
Çme
, "Brightness");

1422 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_BRIGHTNESS
;

1424 
CV_CAP_PROP_CONTRAST
:

1425 
	`¥rštf
(
Çme
, "Contrast");

1426 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_CONTRAST
;

1428 
CV_CAP_PROP_SATURATION
:

1429 
	`¥rštf
(
Çme
, "Saturation");

1430 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_SATURATION
;

1432 
CV_CAP_PROP_HUE
:

1433 
	`¥rštf
(
Çme
, "Hue");

1434 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_HUE
;

1436 
CV_CAP_PROP_GAIN
:

1437 
	`¥rštf
(
Çme
, "Gain");

1438 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_GAIN
;

1440 
CV_CAP_PROP_EXPOSURE
:

1441 
	`¥rštf
(
Çme
, "Exposure");

1442 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_EXPOSURE
;

1445 
	`¥rštf
(
Çme
, "<unknown…roperty string>");

1446 
ÿ±u»
->
cÚŒŞ
.
id
 = 
´İ”ty_id
;

1449 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_CTRL
, &ÿ±u»->
cÚŒŞ
) == 0) {

1451 
is_v4l2_deviû
 = 1;

1453 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L2: UÇbËØg‘…rİ”ty %s(%uè- %s\n", 
Çme
, 
ÿ±u»
->
cÚŒŞ
.
id
, 
	`¡»¼Ü
(
”ºo
));

1456 ià(
is_v4l2_deviû
 == 1) {

1458 
v4l2_mš
 = 
	`v4l2_g‘_ù¾_mš
(
ÿ±u»
, c­tu»->
cÚŒŞ
.
id
);

1459 
v4l2_max
 = 
	`v4l2_g‘_ù¾_max
(
ÿ±u»
, c­tu»->
cÚŒŞ
.
id
);

1461 ià((
v4l2_mš
 =ğ-1è&& (
v4l2_max
 == -1)) {

1462 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L2: Prİ”ty %s(%uènÙ suµÜ‹d by deviû\n", 
Çme
, 
´İ”ty_id
);

1467  (()
ÿ±u»
->
cÚŒŞ
.
v®ue
 - 
v4l2_mš
è/ (
v4l2_max
 - v4l2_min);

1471 
»tv®
 = -1;

1473 
´İ”ty_id
) {

1474 
CV_CAP_PROP_BRIGHTNESS
:

1475 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
brighŠess
;

1477 
CV_CAP_PROP_CONTRAST
:

1478 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
cÚŒa¡
;

1480 
CV_CAP_PROP_SATURATION
:

1481 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
cŞour
;

1483 
CV_CAP_PROP_HUE
:

1484 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
hue
;

1486 
CV_CAP_PROP_GAIN
:

1487 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Gain control in V4L is‚ot supported\n");

1490 
CV_CAP_PROP_EXPOSURE
:

1491 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Exposure control in V4L is‚ot supported\n");

1496 ià(
»tv®
 == -1) {

1501  (
»tv®
) / 0xFFFF;

1503 
	}
}

1505 
	$icvS‘VideoSize
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
w
, 
h
) {

1507 ià(
ÿ±u»
->
is_v4l2_deviû
 == 1)

1509 
deviûName
[
MAX_DEVICE_DRIVER_NAME
];

1510 
	`¥rštf
(
deviûName
, "%s", 
ÿ±u»
->deviceName);

1511 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1512 
	`_ÿ±u»_V4L2
(
ÿ±u»
, 
deviûName
);

1514 
üİHeight
;

1515 
üİWidth
;

1516 
ÿ±u»
->
mode
) {

1517 
CV_CAP_MODE_GRAY
:

1518 
üİHeight
 = 
h
*8;

1519 
üİWidth
 = 
w
*8;

1521 
CV_CAP_MODE_YUYV
:

1522 
üİHeight
 = 
h
*16;

1523 
üİWidth
 = 
w
*16;

1526 
üİHeight
 = 
h
*24;

1527 
üİWidth
 = 
w
*24;

1530 
	`CLEAR
 (
ÿ±u»
->
üİ
);

1531 
ÿ±u»
->
üİ
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1532 
ÿ±u»
->
üİ
.
c
.
Ëá
 = 0;

1533 
ÿ±u»
->
üİ
.
c
.
tİ
 = 0;

1534 
ÿ±u»
->
üİ
.
c
.
height
 = 
üİHeight
;

1535 
ÿ±u»
->
üİ
.
c
.
width
 = 
üİWidth
;

1538 
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_CROP
, &ÿ±u»->
üİ
);

1540 
	`CLEAR
 (
ÿ±u»
->
fÜm
);

1541 
ÿ±u»
->
fÜm
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1544 
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
);

1547 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
 = 
w
;

1548 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
 = 
h
;

1549 
ÿ±u»
->
fÜm
.
fmt
.
wš
.
chromakey
 = 0;

1550 
ÿ±u»
->
fÜm
.
fmt
.
wš
.
f›ld
 = 
V4L2_FIELD_ANY
;

1551 
ÿ±u»
->
fÜm
.
fmt
.
wš
.
şs
 = 0;

1552 
ÿ±u»
->
fÜm
.
fmt
.
wš
.
şcouÁ
 = 0;

1553 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
f›ld
 = 
V4L2_FIELD_ANY
;

1559 
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_FMT
, &ÿ±u»->
fÜm
);

1563 
v4l2_¡»am·rm
 
£tås
;

1564 
	`mem£t
 (&
£tås
, 0, (
v4l2_¡»am·rm
));

1566 
£tås
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1567 
£tås
.
·rm
.
ÿ±u»
.
tim•”äame
.
num”©Ü
 = 1;

1568 
£tås
.
·rm
.
ÿ±u»
.
tim•”äame
.
d’omš©Ü
 = 30;

1570 
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_PARM
, &
£tås
);

1575 
ÿ±u»
->
Fœ¡C­tu»
 = 1;

1578 ià(-1 =ğ
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
))

1580 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L/V4L2: Could‚ot obtain specifics of capture window.\n\n");

1582 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1592 ià(
ÿ±u»
==0)  0;

1593 ià(
w
>
ÿ±u»
->
ÿ·b™y
.
maxwidth
) {

1594 
w
=
ÿ±u»
->
ÿ·b™y
.
maxwidth
;

1596 ià(
h
>
ÿ±u»
->
ÿ·b™y
.
maxheight
) {

1597 
h
=
ÿ±u»
->
ÿ·b™y
.
maxheight
;

1600 
ÿ±u»
->
ÿ±u»Wšdow
.
width
=
w
;

1601 
ÿ±u»
->
ÿ±u»Wšdow
.
height
=
h
;

1603 ià(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSWIN
, &ÿ±u»->
ÿ±u»Wšdow
) < 0) {

1604 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1608 ià(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGWIN
, &ÿ±u»->
ÿ±u»Wšdow
) < 0) {

1609 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1613 
ÿ±u»
->
Fœ¡C­tu»
 = 1;

1619 
	}
}

1621 
	$icvS‘CÚŒŞ
 (
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
) {

1622 
v4l2_cÚŒŞ
 
c
;

1623 
__s32
 
ù¾_v®ue
;

1624 
Çme
[32];

1625 
is_v4l2
 = 1;

1626 
v4l2_mš
 = 0;

1627 
v4l2_max
 = 255;

1628 ià(
ÿ±u»
->
v4l2_ù¾_¿nges
 =ğ
NULL
) {

1629 
	`v4l2_sÿn_cÚŒŞs
(
ÿ±u»
);

1632 
	`CLEAR
 (
ÿ±u»
->
cÚŒŞ
);

1633 
	`CLEAR
 (
ÿ±u»
->
qu”yù¾
);

1636 
´İ”ty_id
) {

1637 
CV_CAP_PROP_BRIGHTNESS
:

1638 
	`¥rštf
(
Çme
, "Brightness");

1639 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_BRIGHTNESS
;

1641 
CV_CAP_PROP_CONTRAST
:

1642 
	`¥rštf
(
Çme
, "Contrast");

1643 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_CONTRAST
;

1645 
CV_CAP_PROP_SATURATION
:

1646 
	`¥rštf
(
Çme
, "Saturation");

1647 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_SATURATION
;

1649 
CV_CAP_PROP_HUE
:

1650 
	`¥rštf
(
Çme
, "Hue");

1651 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_HUE
;

1653 
CV_CAP_PROP_GAIN
:

1654 
	`¥rštf
(
Çme
, "Gain");

1655 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_GAIN
;

1657 
CV_CAP_PROP_EXPOSURE
:

1658 
	`¥rštf
(
Çme
, "Exposure");

1659 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_EXPOSURE
;

1662 
	`¥rštf
(
Çme
, "<unknown…roperty string>");

1663 
ÿ±u»
->
cÚŒŞ
.
id
 = 
´İ”ty_id
;

1666 
v4l2_mš
 = 
	`v4l2_g‘_ù¾_mš
(
ÿ±u»
, c­tu»->
cÚŒŞ
.
id
);

1667 
v4l2_max
 = 
	`v4l2_g‘_ù¾_max
(
ÿ±u»
, c­tu»->
cÚŒŞ
.
id
);

1669 ià((
v4l2_mš
 =ğ-1è&& (
v4l2_max
 == -1)) {

1670 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Prİ”ty %s(%uènÙ suµÜ‹d by deviû\n", 
Çme
, 
´İ”ty_id
);

1674 if(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_CTRL
, &ÿ±u»->
cÚŒŞ
) == 0) {

1677 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L2: UÇbËØg‘…rİ”ty %s(%uè- %s\n", 
Çme
, 
ÿ±u»
->
cÚŒŞ
.
id
, 
	`¡»¼Ü
(
”ºo
));

1680 ià(
v4l2_max
 != 0) {

1681 
v®
 = 
v®ue
;

1682 ià(
v®ue
 < 0.0) {

1683 
v®
 = 0.0;

1684 } ià(
v®ue
 > 1.0) {

1685 
v®
 = 1.0;

1687 
ù¾_v®ue
 = 
v®
 * ()(
v4l2_max
 - 
v4l2_mš
) + v4l2_min;

1689 
ù¾_v®ue
 = 
	`v4l2_g‘_ù¾_deçuÉ
(
ÿ±u»
, c­tu»->
cÚŒŞ
.
id
è* ()(
v4l2_max
 - 
v4l2_mš
) + v4l2_min;

1693 
c
.
id
 = 
ÿ±u»
->
cÚŒŞ
.id;

1694 
c
.
v®ue
 = 
ù¾_v®ue
;

1695 ià(
	`v4l2_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_CTRL
, &
c
) != 0) {

1697 ià(
”ºo
 !ğ
ERANGE
) {

1698 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L2: FaedØ£ˆcÚŒŞ \"%d\": % (v®u%d)\n", 
c
.
id
, 
	`¡»¼Ü
(
”ºo
), c.
v®ue
);

1699 
is_v4l2
 = 0;

1707 ià(
is_v4l2
 == 0) {

1708 
	`årštf
(
¡d”r
, "VIDEOIO WARNING: S‘tšg…rİ”ty %uhrough v4l2 faed. Tryšg w™h v4l1.\n", 
c
.
id
);

1709 
v4l_v®ue
;

1711 
v4l_v®ue
 = ()(0xFFFF * 
v®ue
);

1713 
´İ”ty_id
) {

1714 
CV_CAP_PROP_BRIGHTNESS
:

1715 
ÿ±u»
->
imagePrİ”t›s
.
brighŠess
 = 
v4l_v®ue
;

1717 
CV_CAP_PROP_CONTRAST
:

1718 
ÿ±u»
->
imagePrİ”t›s
.
cÚŒa¡
 = 
v4l_v®ue
;

1720 
CV_CAP_PROP_SATURATION
:

1721 
ÿ±u»
->
imagePrİ”t›s
.
cŞour
 = 
v4l_v®ue
;

1723 
CV_CAP_PROP_HUE
:

1724 
ÿ±u»
->
imagePrİ”t›s
.
hue
 = 
v4l_v®ue
;

1726 
CV_CAP_PROP_GAIN
:

1727 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Gain control in V4L is‚ot supported\n");

1729 
CV_CAP_PROP_EXPOSURE
:

1730 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Exposure control in V4L is‚ot supported\n");

1733 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L:…rİ”ty #%d i nÙ suµÜ‹d\n", 
´İ”ty_id
);

1737 ià(
	`v4l1_ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSPICT
, &ÿ±u»->
imagePrİ”t›s
) < 0){

1738 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Unableo set video informations\n");

1739 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1746 
	}
}

1748 
	$icvS‘Prİ”tyCAM_V4L
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
){

1749 
width
 = 0, 
height
 = 0;

1750 
»tv®
;

1753 
»tv®
 = 0;

1759 
´İ”ty_id
) {

1760 
CV_CAP_PROP_FRAME_WIDTH
:

1761 
width
 = 
	`cvRound
(
v®ue
);

1762 
ÿ±u»
->
width
 = width;

1763 if(
width
 !=0 && 
height
 != 0) {

1764 
»tv®
 = 
	`icvS‘VideoSize
Ğ
ÿ±u»
, 
width
, 
height
);

1765 
width
 = 
height
 = 0;

1768 
CV_CAP_PROP_FRAME_HEIGHT
:

1769 
height
 = 
	`cvRound
(
v®ue
);

1770 
ÿ±u»
->
height
 = height;

1771 if(
width
 !=0 && 
height
 != 0) {

1772 
»tv®
 = 
	`icvS‘VideoSize
Ğ
ÿ±u»
, 
width
, 
height
);

1773 
width
 = 
height
 = 0;

1776 
CV_CAP_PROP_MODE
:

1777 
mode
;

1778 
mode
 = 
	`cvRound
(
v®ue
);

1779 ià(
ÿ±u»
->
mode
 != mode) {

1780 
mode
) {

1781 
CV_CAP_MODE_BGR
:

1782 
CV_CAP_MODE_RGB
:

1783 
CV_CAP_MODE_GRAY
:

1784 
CV_CAP_MODE_YUYV
:

1785 
ÿ±u»
->
mode
 = mode;

1788 
»tv®
 = 
	`icvS‘VideoSize
(
ÿ±u»
, c­tu»->
width
, c­tu»->
height
);

1791 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L/V4L2: UnsuµÜ‹d mode: %d\n", 
mode
);

1792 
»tv®
=0;

1797 
CV_CAP_PROP_FPS
:

1798 
v4l2_¡»am·rm
 
£tås
;

1799 
	`mem£t
 (&
£tås
, 0, (
v4l2_¡»am·rm
));

1800 
£tås
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1801 
£tås
.
·rm
.
ÿ±u»
.
tim•”äame
.
num”©Ü
 = 1;

1802 
£tås
.
·rm
.
ÿ±u»
.
tim•”äame
.
d’omš©Ü
 = 
v®ue
;

1803 ià(
	`xioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_PARM
, &
£tås
) < 0){

1804 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Unableo set camera FPS\n");

1805 
»tv®
=0;

1809 
»tv®
 = 
	`icvS‘CÚŒŞ
(
ÿ±u»
, 
´İ”ty_id
, 
v®ue
);

1813  
»tv®
;

1814 
	}
}

1816 
	$icvClo£CAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
 ){

1818 ià(
ÿ±u»
) {

1819 
	`v4l2_ä“_¿nges
(
ÿ±u»
);

1820 ià(
ÿ±u»
->
is_v4l2_deviû
 == 0) {

1821 ià(
ÿ±u»
->
mm­s
) {

1822 
	`ä“
(
ÿ±u»
->
mm­s
);

1824 ià(
ÿ±u»
->
memÜyM­
) {

1825 
	`v4l1_munm­
(
ÿ±u»
->
memÜyM­
, c­tu»->
memÜyBufãr
.
size
);

1827 ià(
ÿ±u»
->
deviûHªdË
 != -1) {

1828 
	`v4l1_şo£
(
ÿ±u»
->
deviûHªdË
);

1831 
ÿ±u»
->
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1832 ià(
	`xioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_STREAMOFF
, &ÿ±u»->
ty³
) < 0) {

1833 
	`³¼Ü
 ("Unableo stophe stream.");

1835 
n_bufãrs2
 = 0;‚_bufãrs2 < 
ÿ±u»
->
»q
.
couÁ
; ++n_buffers2) {

1836 ià(-1 =ğ
	`v4l2_munm­
 (
ÿ±u»
->
bufãrs
[
n_bufãrs2
].
¡¬t
, c­tu»->bufãrs[n_bufãrs2].
Ëngth
)) {

1837 
	`³¼Ü
 ("munmap");

1841 ià(
ÿ±u»
->
deviûHªdË
 != -1) {

1842 
	`v4l2_şo£
(
ÿ±u»
->
deviûHªdË
);

1846 ià(
ÿ±u»
->
äame
.
imageD©a
)

1847 
	`cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

1849 #ifdeà
USE_TEMP_BUFFER


1850 ià(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
) {

1851 
	`ä“
(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
);

1852 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
 = 
NULL
;

1856 
	`ä“
(
ÿ±u»
->
deviûName
);

1857 
ÿ±u»
->
deviûName
 = 
NULL
;

1861 
	}
};

1864 şas 
	cCvC­tu»CAM_V4L_CPP
 : 
CvC­tu»


1866 
public
:

1867 
	$CvC­tu»CAM_V4L_CPP
(è{ 
ÿ±u»V4L
 = 0; }

1868 
vœtu®
 ~
	$CvC­tu»CAM_V4L_CPP
(è{ 
	`şo£
(); 
	}
}

1870 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

1871 
vœtu®
 
şo£
();

1873 
vœtu®
 
	$g‘Prİ”ty
() const;

1874 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

1875 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

1876 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

1877 
´Ùeùed
:

1879 
CvC­tu»CAM_V4L
* 
ÿ±u»V4L
;

1880 
	}
};

1882 
boŞ
 
	gCvC­tu»CAM_V4L_CPP
::
	$İ’
Ğ
šdex
 )

1884 
	`şo£
();

1885 
ÿ±u»V4L
 = 
	`icvC­tu»FromCAM_V4L
(
šdex
);

1886  
ÿ±u»V4L
 != 0;

1887 
	}
}

1889 
	gCvC­tu»CAM_V4L_CPP
::
	$şo£
()

1891 ifĞ
ÿ±u»V4L
 )

1893 
	`icvClo£CAM_V4L
Ğ
ÿ±u»V4L
 );

1894 
	`cvF»e
Ğ&
ÿ±u»V4L
 );

1896 
	}
}

1898 
boŞ
 
	gCvC­tu»CAM_V4L_CPP
::
	$g¿bF¿me
()

1900  
ÿ±u»V4L
 ? 
	`icvG¿bF¿meCAM_V4L
Ğÿ±u»V4L ) !ğ0 : 
çl£
;

1901 
	}
}

1903 
I¶Image
* 
	gCvC­tu»CAM_V4L_CPP
::
	$»Œ›veF¿me
()

1905  
ÿ±u»V4L
 ? 
	`icvR‘r›veF¿meCAM_V4L
( captureV4L, 0 ) : 0;

1906 
	}
}

1908 
	gCvC­tu»CAM_V4L_CPP
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

1910  
ÿ±u»V4L
 ? 
	`icvG‘Prİ”tyCAM_V4L
Ğÿ±u»V4L, 
´İId
 ) : 0.0;

1911 
	}
}

1913 
boŞ
 
	gCvC­tu»CAM_V4L_CPP
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

1915  
ÿ±u»V4L
 ? 
	`icvS‘Prİ”tyCAM_V4L
Ğÿ±u»V4L, 
´İId
, 
v®ue
 ) !ğ0 : 
çl£
;

1916 
	}
}

1918 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_V4L
Ğ
šdex
 )

1920 
CvC­tu»CAM_V4L_CPP
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_V4L_CPP;

1922 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

1923  (
CvC­tu»
*)
ÿ±u»
;

1925 
d–‘e
 
ÿ±u»
;

1927 
	}
}

	@cap_mjpeg_decoder.cpp

42 
	~"´ecomp.hµ
"

43 
	~<deque
>

44 
	~<¡dšt.h
>

46 
Çme¥aû
 
	gcv


49 cÚ¡ 
ušt32_t
 
	gRIFF_CC
 = 
CV_FOURCC
('R','I','F','F');

50 cÚ¡ 
ušt32_t
 
	gLIST_CC
 = 
CV_FOURCC
('L','I','S','T');

51 cÚ¡ 
ušt32_t
 
	gHDRL_CC
 = 
CV_FOURCC
('h','d','r','l');

52 cÚ¡ 
ušt32_t
 
	gAVIH_CC
 = 
CV_FOURCC
('a','v','i','h');

53 cÚ¡ 
ušt32_t
 
	gSTRL_CC
 = 
CV_FOURCC
('s','t','r','l');

54 cÚ¡ 
ušt32_t
 
	gSTRH_CC
 = 
CV_FOURCC
('s','t','r','h');

55 cÚ¡ 
ušt32_t
 
	gVIDS_CC
 = 
CV_FOURCC
('v','i','d','s');

56 cÚ¡ 
ušt32_t
 
	gMJPG_CC
 = 
CV_FOURCC
('M','J','P','G');

57 cÚ¡ 
ušt32_t
 
	gMOVI_CC
 = 
CV_FOURCC
('m','o','v','i');

58 cÚ¡ 
ušt32_t
 
	gIDX1_CC
 = 
CV_FOURCC
('i','d','x','1');

59 cÚ¡ 
ušt32_t
 
	gAVI_CC
 = 
CV_FOURCC
('A','V','I',' ');

60 cÚ¡ 
ušt32_t
 
	gAVIX_CC
 = 
CV_FOURCC
('A','V','I','X');

61 cÚ¡ 
ušt32_t
 
	gJUNK_CC
 = 
CV_FOURCC
('J','U','N','K');

62 cÚ¡ 
ušt32_t
 
	gINFO_CC
 = 
CV_FOURCC
('I','N','F','O');

64 
SŒšg
 
fourccToSŒšg
(
ušt32_t
 
fourcc
);

66 
SŒšg
 
fourccToSŒšg
(
ušt32_t
 
fourcc
)

68  
fÜm©
("%c%c%c%c", 
fourcc
 & 255, (fourcc >> 8) & 255, (fourcc >> 16) & 255, (fourcc >> 24) & 255);

71 #iâdeà
DWORD


72 
ušt32_t
 
	tDWORD
;

74 #iâdeà
WORD


75 
ušt16_t
 
	tWORD
;

77 #iâdeà
LONG


78 
št32_t
 
	tLONG
;

81 #´agm¨
·ck
(
push
, 1)

82 
	sAviMašH—d”


84 
DWORD
 
	gdwMiüoSecP”F¿me
;

85 
DWORD
 
	gdwMaxBy‹sP”Sec
;

86 
DWORD
 
	gdwRe£rved1
;

87 
DWORD
 
	gdwFÏgs
;

88 
DWORD
 
	gdwTÙ®F¿mes
;

89 
DWORD
 
	gdwIn™ŸlF¿mes
;

90 
DWORD
 
	gdwSŒ—ms
;

91 
DWORD
 
	gdwSugge¡edBufãrSize
;

92 
DWORD
 
	gdwWidth
;

93 
DWORD
 
	gdwHeight
;

94 
DWORD
 
	gdwRe£rved
[4];

97 
	sAviSŒ—mH—d”


99 
ušt32_t
 
	gfccTy³
;

100 
ušt32_t
 
	gfccHªdËr
;

101 
DWORD
 
	gdwFÏgs
;

102 
DWORD
 
	gdwPriÜ™y
;

103 
DWORD
 
	gdwIn™ŸlF¿mes
;

104 
DWORD
 
	gdwSÿË
;

105 
DWORD
 
	gdwR©e
;

106 
DWORD
 
	gdwS¹
;

107 
DWORD
 
	gdwL’gth
;

108 
DWORD
 
	gdwSugge¡edBufãrSize
;

109 
DWORD
 
	gdwQu®™y
;

110 
DWORD
 
	gdwSam¶eSize
;

112 
	gËá
;

113 
	gtİ
;

114 
	gright
;

115 
	gbÙtom
;

116 } 
	grcF¿me
;

119 
	sAviIndex


121 
DWORD
 
	gckid
;

122 
DWORD
 
	gdwFÏgs
;

123 
DWORD
 
	gdwChunkOff£t
;

124 
DWORD
 
	gdwChunkL’gth
;

127 
	sB™m­InfoH—d”


129 
DWORD
 
	gbiSize
;

130 
LONG
 
	gbiWidth
;

131 
LONG
 
	gbiHeight
;

132 
WORD
 
	gbiPÏÃs
;

133 
WORD
 
	gbiB™CouÁ
;

134 
DWORD
 
	gbiCom´essiÚ
;

135 
DWORD
 
	gbiSizeImage
;

137 
LONG
 
	gbiXP–sP”M‘”
;

138 
LONG
 
	gbiYP–sP”M‘”
;

139 
DWORD
 
	gbiCÌU£d
;

140 
DWORD
 
	gbiCÌImpÜÁ
;

143 
	sRiffChunk


145 
ušt32_t
 
	gm_four_cc
;

146 
ušt32_t
 
	gm_size
;

149 
	sRiffLi¡


151 
ušt32_t
 
	gm_riff_Ü_li¡_cc
;

152 
ušt32_t
 
	gm_size
;

153 
ušt32_t
 
	gm_li¡_ty³_cc
;

156 #´agm¨
·ck
(
pİ
)

158 şas 
	cMj³gIÅutSŒ—m


160 
	gpublic
:

161 
Mj³gIÅutSŒ—m
();

162 
Mj³gIÅutSŒ—m
(cÚ¡ 
SŒšg
& 
f’ame
);

163 ~
Mj³gIÅutSŒ—m
();

164 
	gMj³gIÅutSŒ—m
& 
»ad
(*, 
ušt64_t
);

165 
	gMj³gIÅutSŒ—m
& 
£ekg
(
ušt64_t
);

166 
ušt64_t
 
‹Îg
();

167 
boŞ
 
isO³Ãd
() const;

168 
boŞ
 
İ’
(cÚ¡ 
SŒšg
& 
f’ame
);

169 
şo£
();

170 
İ”©Ü
 
boŞ
();

172 
	g´iv©e
:

173 
boŞ
 
m_is_v®id
;

174 
FILE
* 
	gm_f
;

177 
	gMj³gIÅutSŒ—m
::
	$Mj³gIÅutSŒ—m
(): 
	`m_is_v®id
(
çl£
), 
	$m_f
(0)

179 
	}
}

181 
	gMj³gIÅutSŒ—m
::
	$Mj³gIÅutSŒ—m
(cÚ¡ 
SŒšg
& 
f’ame
): 
	`m_is_v®id
(
çl£
), 
	$m_f
(0)

183 
	`İ’
(
f’ame
);

184 
	}
}

186 
boŞ
 
	gMj³gIÅutSŒ—m
::
	$isO³Ãd
() const

188  
m_f
 != 0;

189 
	}
}

191 
boŞ
 
	gMj³gIÅutSŒ—m
::
	$İ’
(cÚ¡ 
SŒšg
& 
f’ame
)

193 
	`şo£
();

195 
m_f
 = 
	`fİ’
(
f’ame
.
	`c_¡r
(), "rb");

197 
m_is_v®id
 = 
	`isO³Ãd
();

199  
m_is_v®id
;

200 
	}
}

202 
	gMj³gIÅutSŒ—m
::
	$şo£
()

204 if(
	`isO³Ãd
())

206 
m_is_v®id
 = 
çl£
;

208 
	`fşo£
(
m_f
);

209 
m_f
 = 0;

211 
	}
}

213 
	gMj³gIÅutSŒ—m
& Mj³gIÅutSŒ—m::
	$»ad
(* 
buf
, 
ušt64_t
 
couÁ
)

215 if(
	`isO³Ãd
())

217 
m_is_v®id
 = (
couÁ
 =ğ
	`ä—d
((*)
buf
, 1, (
size_t
)couÁ, 
m_f
));

220  *
this
;

221 
	}
}

223 
	gMj³gIÅutSŒ—m
& Mj³gIÅutSŒ—m::
	$£ekg
(
ušt64_t
 
pos
)

225 
m_is_v®id
 = (
	`f£ek
(
m_f
, ()
pos
, 
SEEK_SET
) == 0);

227  *
this
;

228 
	}
}

230 
ušt64_t
 
	gMj³gIÅutSŒ—m
::
	$‹Îg
()

232  
	`á–l
(
m_f
);

233 
	}
}

235 
	gMj³gIÅutSŒ—m
::
İ”©Ü
 
	$boŞ
()

237  
m_is_v®id
;

238 
	}
}

240 
	gMj³gIÅutSŒ—m
::~
	$Mj³gIÅutSŒ—m
()

242 
	`şo£
();

243 
	}
}

245 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gAviMašH—d”
& 
	gavih
);

246 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gAviSŒ—mH—d”
& 
	g¡rh
);

247 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gB™m­InfoH—d”
& 
	gbmph
);

248 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gRiffLi¡
& 
	griff_li¡
);

249 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gRiffChunk
& 
	griff_chunk
);

250 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gAviIndex
& 
	gidx1
);

252 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gAviMašH—d”
& 
	gavih
)

254 
	gis
.
»ad
((*)(&
avih
), (
AviMašH—d”
));

255  
	gis
;

258 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gAviSŒ—mH—d”
& 
	g¡rh
)

260 
	gis
.
»ad
((*)(&
¡rh
), (
AviSŒ—mH—d”
));

261  
	gis
;

264 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gB™m­InfoH—d”
& 
	gbmph
)

266 
	gis
.
»ad
((*)(&
bmph
), (
B™m­InfoH—d”
));

267  
	gis
;

270 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gRiffLi¡
& 
	griff_li¡
)

272 
	gis
.
»ad
((*)(&
riff_li¡
), (riff_list));

273  
	gis
;

276 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gRiffChunk
& 
	griff_chunk
)

278 
	gis
.
»ad
((*)(&
riff_chunk
), (riff_chunk));

279  
	gis
;

282 
	gMj³gIÅutSŒ—m
& 
	gİ”©Ü
 >> (Mj³gIÅutSŒ—m& 
	gis
, 
	gAviIndex
& 
	gidx1
)

284 
	gis
.
»ad
((*)(&
idx1
), (idx1));

285  
	gis
;

337 
	g¡d
::
	tdeque
< 
	t¡d
::
	t·œ
<
	tušt64_t
, 
	tušt32_t
> > 
	täame_li¡
;

338 
	gäame_li¡
::
	t™”©Ü
 
	täame_™”©Ü
;

343 şas 
	cAviMj³gSŒ—m


345 
	gpublic
:

346 
AviMj³gSŒ—m
();

348 
boŞ
 
·r£Avi
(
Mj³gIÅutSŒ—m
& 
š_¡r
);

350 
boŞ
 
·r£Avi
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
äame_li¡
& 
š_äame_li¡
);

351 
size_t
 
g‘F¿mesCouÁ
();

352 
	gäame_li¡
& 
g‘F¿mes
();

353 
ušt32_t
 
g‘Width
();

354 
ušt32_t
 
g‘Height
();

355 
g‘Fps
();

357 
	g´Ùeùed
:

359 
boŞ
 
·r£AviW™hF¿meLi¡
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
äame_li¡
& 
š_äame_li¡
);

360 
skJunk
(
RiffChunk
& 
chunk
, 
Mj³gIÅutSŒ—m
& 
š_¡r
);

361 
skJunk
(
RiffLi¡
& 
li¡
, 
Mj³gIÅutSŒ—m
& 
š_¡r
);

362 
boŞ
 
·r£Hd¾Li¡
(
Mj³gIÅutSŒ—m
& 
š_¡r
);

363 
boŞ
 
·r£Index
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
ušt32_t
 
šdex_size
, 
äame_li¡
& 
š_äame_li¡
);

364 
boŞ
 
·r£Movi
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
äame_li¡
& 
š_äame_li¡
);

365 
boŞ
 
·r£SŒl
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
ušt8_t
 
¡»am_id
);

366 
boŞ
 
·r£Info
(
Mj³gIÅutSŒ—m
& 
š_¡r
);

367 
´štE¼Ü
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
RiffLi¡
& 
li¡
, 
ušt32_t
 
ex³ùed_fourcc
);

368 
´štE¼Ü
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
RiffChunk
& 
chunk
, 
ušt32_t
 
ex³ùed_fourcc
);

370 
ušt32_t
 
	gm_¡»am_id
;

371 
ušt64_t
 
	gm_movi_¡¬t
;

372 
ušt64_t
 
	gm_movi_’d
;

373 
äame_li¡
 
	gm_äame_li¡
;

374 
ušt32_t
 
	gm_width
;

375 
ušt32_t
 
	gm_height
;

376 
	gm_ås
;

377 
boŞ
 
	gm_is_šdx_´e£Á
;

380 
	gAviMj³gSŒ—m
::
	$AviMj³gSŒ—m
(): 
	`m_¡»am_id
(0), 
	`m_movi_¡¬t
(0), 
	`m_movi_’d
(0), 
	`m_width
(0), 
	`m_height
(0), 
	`m_ås
(0), 
	$m_is_šdx_´e£Á
(
çl£
)

382 
	}
}

384 
size_t
 
	gAviMj³gSŒ—m
::
	$g‘F¿mesCouÁ
()

386  
m_äame_li¡
.
	`size
();

387 
	}
}

389 
	gäame_li¡
& 
	gAviMj³gSŒ—m
::
	$g‘F¿mes
()

391  
m_äame_li¡
;

392 
	}
}

394 
ušt32_t
 
	gAviMj³gSŒ—m
::
	$g‘Width
()

396  
m_width
;

397 
	}
}

399 
ušt32_t
 
	gAviMj³gSŒ—m
::
	$g‘Height
()

401  
m_height
;

402 
	}
}

404 
	gAviMj³gSŒ—m
::
	$g‘Fps
()

406  
m_ås
;

407 
	}
}

409 
	gAviMj³gSŒ—m
::
	$´štE¼Ü
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
RiffLi¡
& 
li¡
, 
ušt32_t
 
ex³ùed_fourcc
)

411 if(!
š_¡r
)

413 
	`årštf
(
¡d”r
, "UÃx³ùedƒnd oàfwh£¬chšg fÜ % li¡\n", 
	`fourccToSŒšg
(
ex³ùed_fourcc
).
	`c_¡r
());

415 if(
li¡
.
m_riff_Ü_li¡_cc
 !ğ
LIST_CC
)

417 
	`årštf
(
¡d”r
, "UÃx³ùedƒËm’t. Ex³ùed: %s. GÙ: %s.\n", 
	`fourccToSŒšg
(
LIST_CC
).
	`c_¡r
(), fourccToSŒšg(
li¡
.
m_riff_Ü_li¡_cc
).c_str());

421 
	`årštf
(
¡d”r
, "UÃx³ùed†i¡y³. Ex³ùed: %s. GÙ: %s.\n", 
	`fourccToSŒšg
(
ex³ùed_fourcc
).
	`c_¡r
(), fourccToSŒšg(
li¡
.
m_li¡_ty³_cc
).c_str());

423 
	}
}

425 
	gAviMj³gSŒ—m
::
	$´štE¼Ü
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
RiffChunk
& 
chunk
, 
ušt32_t
 
ex³ùed_fourcc
)

427 if(!
š_¡r
)

429 
	`årštf
(
¡d”r
, "UÃx³ùedƒnd oàfwh£¬chšg fÜ % chunk\n", 
	`fourccToSŒšg
(
ex³ùed_fourcc
).
	`c_¡r
());

433 
	`årštf
(
¡d”r
, "UÃx³ùedƒËm’t. Ex³ùed: %s. GÙ: %s.\n", 
	`fourccToSŒšg
(
ex³ùed_fourcc
).
	`c_¡r
(), fourccToSŒšg(
chunk
.
m_four_cc
).c_str());

435 
	}
}

438 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£Movi
(
Mj³gIÅutSŒ—m
&, 
äame_li¡
&)

441  
Œue
;

442 
	}
}

444 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£Info
(
Mj³gIÅutSŒ—m
&)

447  
Œue
;

448 
	}
}

450 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£Index
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
ušt32_t
 
šdex_size
, 
äame_li¡
& 
š_äame_li¡
)

452 
ušt64_t
 
šdex_’d
 = 
š_¡r
.
	`‹Îg
();

453 
šdex_’d
 +ğ
šdex_size
;

454 
boŞ
 
»suÉ
 = 
çl£
;

456 
š_¡r
 && (š_¡r.
	`‹Îg
(è< 
šdex_’d
))

458 
AviIndex
 
idx1
;

459 
š_¡r
 >> 
idx1
;

461 if(
idx1
.
ckid
 =ğ
m_¡»am_id
)

463 
ušt64_t
 
absŞu‹_pos
 = 
m_movi_¡¬t
 + 
idx1
.
dwChunkOff£t
;

465 if(
absŞu‹_pos
 < 
m_movi_’d
)

467 
š_äame_li¡
.
	`push_back
(
¡d
::
	`make_·œ
(
absŞu‹_pos
, 
idx1
.
dwChunkL’gth
));

472 
	`årštf
(
¡d”r
, "Frame offset…oints outside movi section.\n");

476 
»suÉ
 = 
Œue
;

479  
»suÉ
;

480 
	}
}

482 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£SŒl
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
ušt8_t
 
¡»am_id
)

484 
RiffChunk
 
¡rh
;

485 
š_¡r
 >> 
¡rh
;

487 if(
š_¡r
 && 
¡rh
.
m_four_cc
 =ğ
STRH_CC
)

489 
ušt64_t
 
Ãxt_¡¾_li¡
 = 
š_¡r
.
	`‹Îg
();

490 
Ãxt_¡¾_li¡
 +ğ
¡rh
.
m_size
;

492 
AviSŒ—mH—d”
 
¡rm_hdr
;

493 
š_¡r
 >> 
¡rm_hdr
;

495 if(
¡rm_hdr
.
fccTy³
 =ğ
VIDS_CC
 && sŒm_hdr.
fccHªdËr
 =ğ
MJPG_CC
)

497 
ušt8_t
 
fœ¡_dig™
 = (
¡»am_id
/10) + '0';

498 
ušt8_t
 
£cÚd_dig™
 = (
¡»am_id
%10) + '0';

500 if(
m_¡»am_id
 == 0)

502 
m_¡»am_id
 = 
	`CV_FOURCC
(
fœ¡_dig™
, 
£cÚd_dig™
, 'd', 'c');

503 
m_ås
 = (
¡rm_hdr
.
dwR©e
)/¡rm_hdr.
dwSÿË
;

508 
	`årštf
(
¡d”r
, "MÜthª oÃ videØ¡»am found w™hš AVI/AVIX†i¡. SŒ—m %c%cdøwould bignÜed\n", 
fœ¡_dig™
, 
£cÚd_dig™
);

511  
Œue
;

515  
çl£
;

516 
	}
}

518 
	gAviMj³gSŒ—m
::
	$skJunk
(
RiffChunk
& 
chunk
, 
Mj³gIÅutSŒ—m
& 
š_¡r
)

520 if(
chunk
.
m_four_cc
 =ğ
JUNK_CC
)

522 
š_¡r
.
	`£ekg
(š_¡r.
	`‹Îg
(è+ 
chunk
.
m_size
);

523 
š_¡r
 >> 
chunk
;

525 
	}
}

527 
	gAviMj³gSŒ—m
::
	$skJunk
(
RiffLi¡
& 
li¡
, 
Mj³gIÅutSŒ—m
& 
š_¡r
)

529 if(
li¡
.
m_riff_Ü_li¡_cc
 =ğ
JUNK_CC
)

532 
š_¡r
.
	`£ekg
(š_¡r.
	`‹Îg
(è+ 
li¡
.
m_size
 - 4);

533 
š_¡r
 >> 
li¡
;

535 
	}
}

537 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£Hd¾Li¡
(
Mj³gIÅutSŒ—m
& 
š_¡r
)

539 
boŞ
 
»suÉ
 = 
çl£
;

541 
RiffChunk
 
avih
;

542 
š_¡r
 >> 
avih
;

544 if(
š_¡r
 && 
avih
.
m_four_cc
 =ğ
AVIH_CC
)

546 
ušt64_t
 
Ãxt_¡¾_li¡
 = 
š_¡r
.
	`‹Îg
();

547 
Ãxt_¡¾_li¡
 +ğ
avih
.
m_size
;

549 
AviMašH—d”
 
avi_hdr
;

550 
š_¡r
 >> 
avi_hdr
;

552 if(
š_¡r
)

554 
m_is_šdx_´e£Á
 = ((
avi_hdr
.
dwFÏgs
 & 0x10) != 0);

555 
DWORD
 
numb”_of_¡»ams
 = 
avi_hdr
.
dwSŒ—ms
;

556 
m_width
 = 
avi_hdr
.
dwWidth
;

557 
m_height
 = 
avi_hdr
.
dwWidth
;

560 
DWORD
 
i
 = 0; i < 
numb”_of_¡»ams
; ++i)

562 
š_¡r
.
	`£ekg
(
Ãxt_¡¾_li¡
);

563 
RiffLi¡
 
¡¾_li¡
;

564 
š_¡r
 >> 
¡¾_li¡
;

566 ifĞ
š_¡r
 && 
¡¾_li¡
.
m_riff_Ü_li¡_cc
 =ğ
LIST_CC
 && sŒl_li¡.
m_li¡_ty³_cc
 =ğ
STRL_CC
 )

568 
Ãxt_¡¾_li¡
 = 
š_¡r
.
	`‹Îg
();

570 
Ãxt_¡¾_li¡
 +ğ(
¡¾_li¡
.
m_size
 - 4);

572 
»suÉ
 = 
	`·r£SŒl
(
š_¡r
, (
ušt8_t
)
i
);

576 
	`´štE¼Ü
(
š_¡r
, 
¡¾_li¡
, 
STRL_CC
);

583 
	`´štE¼Ü
(
š_¡r
, 
avih
, 
AVIH_CC
);

586  
»suÉ
;

587 
	}
}

589 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£AviW™hF¿meLi¡
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
äame_li¡
& 
š_äame_li¡
)

591 
RiffLi¡
 
hd¾_li¡
;

592 
š_¡r
 >> 
hd¾_li¡
;

594 ifĞ
š_¡r
 && 
hd¾_li¡
.
m_riff_Ü_li¡_cc
 =ğ
LIST_CC
 && hd¾_li¡.
m_li¡_ty³_cc
 =ğ
HDRL_CC
 )

596 
ušt64_t
 
Ãxt_li¡
 = 
š_¡r
.
	`‹Îg
();

598 
Ãxt_li¡
 +ğ(
hd¾_li¡
.
m_size
 - 4);

600 if(
	`·r£Hd¾Li¡
(
š_¡r
))

602 
š_¡r
.
	`£ekg
(
Ãxt_li¡
);

604 
RiffLi¡
 
some_li¡
;

605 
š_¡r
 >> 
some_li¡
;

608 if(
š_¡r
 && 
some_li¡
.
m_riff_Ü_li¡_cc
 =ğ
LIST_CC
 && some_li¡.
m_li¡_ty³_cc
 =ğ
INFO_CC
)

610 
Ãxt_li¡
 = 
š_¡r
.
	`‹Îg
();

612 
Ãxt_li¡
 +ğ(
some_li¡
.
m_size
 - 4);

613 
	`·r£Info
(
š_¡r
);

615 
š_¡r
.
	`£ekg
(
Ãxt_li¡
);

616 
š_¡r
 >> 
some_li¡
;

620 
	`skJunk
(
some_li¡
, 
š_¡r
);

623 if(
š_¡r
 && 
some_li¡
.
m_riff_Ü_li¡_cc
 =ğ
LIST_CC
 && some_li¡.
m_li¡_ty³_cc
 =ğ
MOVI_CC
)

625 
boŞ
 
is_šdex_found
 = 
çl£
;

627 
m_movi_¡¬t
 = 
š_¡r
.
	`‹Îg
();

628 
m_movi_¡¬t
 -= 4;

630 
m_movi_’d
 = 
m_movi_¡¬t
 + 
some_li¡
.
m_size
;

632 if(
m_is_šdx_´e£Á
)

635 
ušt32_t
 
šdx_pos
 = (ušt32_t)
m_movi_¡¬t
 + 4;

636 
šdx_pos
 +ğ(
some_li¡
.
m_size
 - 4);

637 
š_¡r
.
	`£ekg
(
šdx_pos
);

639 
RiffChunk
 
šdex_chunk
;

640 
š_¡r
 >> 
šdex_chunk
;

642 if(
š_¡r
 && 
šdex_chunk
.
m_four_cc
 =ğ
IDX1_CC
)

644 
is_šdex_found
 = 
	`·r£Index
(
š_¡r
, 
šdex_chunk
.
m_size
, 
š_äame_li¡
);

649 
	`´štE¼Ü
(
š_¡r
, 
šdex_chunk
, 
IDX1_CC
);

654 if(!
is_šdex_found
)

657 
	`·r£Movi
(
š_¡r
, 
š_äame_li¡
);

659 
	`årštf
(
¡d”r
, "Failedo…arse‡vi: index was‚ot found\n");

665 
	`´štE¼Ü
(
š_¡r
, 
some_li¡
, 
MOVI_CC
);

671 
	`´štE¼Ü
(
š_¡r
, 
hd¾_li¡
, 
HDRL_CC
);

674  
š_äame_li¡
.
	`size
() > 0;

675 
	}
}

677 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£Avi
(
Mj³gIÅutSŒ—m
& 
š_¡r
, 
äame_li¡
& 
š_äame_li¡
)

679  
	`·r£AviW™hF¿meLi¡
(
š_¡r
, 
š_äame_li¡
);

680 
	}
}

682 
boŞ
 
	gAviMj³gSŒ—m
::
	$·r£Avi
(
Mj³gIÅutSŒ—m
& 
š_¡r
)

684  
	`·r£AviW™hF¿meLi¡
(
š_¡r
, 
m_äame_li¡
);

685 
	}
}

688 şas 
	cMÙiÚJ³gC­tu»
: 
public
 
IVideoC­tu»


690 
public
:

691 
vœtu®
 ~
MÙiÚJ³gC­tu»
();

692 
vœtu®
 
g‘Prİ”ty
() const;

693 
vœtu®
 
boŞ
 
£tPrİ”ty
(, );

694 
vœtu®
 
boŞ
 
g¿bF¿me
();

695 
vœtu®
 
boŞ
 
»Œ›veF¿me
(, 
OuutA¼ay
);

696 
vœtu®
 
boŞ
 
isO³Ãd
() const;

697 
vœtu®
 
g‘C­tu»Domaš
(è{  
	gCAP_ANY
; }

698 
MÙiÚJ³gC­tu»
(cÚ¡ 
SŒšg
&);

700 
boŞ
 
İ’
(cÚ¡ 
SŒšg
&);

701 
şo£
();

702 
	g´Ùeùed
:

704 
boŞ
 
·r£Riff
(
Mj³gIÅutSŒ—m
& 
š_¡r
);

706 
šlše
 
ušt64_t
 
g‘F¿mePos
() const;

707 
	g¡d
::
veùÜ
<> 
»adF¿me
(
äame_™”©Ü
 
™
);

709 
Mj³gIÅutSŒ—m
 
	gm_fe_¡»am
;

710 
boŞ
 
	gm_is_fœ¡_äame
;

711 
äame_li¡
 
	gm_mj³g_äames
;

713 
äame_™”©Ü
 
	gm_äame_™”©Ü
;

714 
M©
 
	gm_cu¼’t_äame
;

719 
ušt32_t
 
	gm_äame_width
;

720 
ušt32_t
 
	gm_äame_height
;

721 
	gm_ås
;

724 
ušt64_t
 
	gMÙiÚJ³gC­tu»
::
	$g‘F¿mePos
() const

726 if(
m_is_fœ¡_äame
)

729 if(
m_äame_™”©Ü
 =ğ
m_mj³g_äames
.
	`’d
())

730  
m_mj³g_äames
.
	`size
();

732  
m_äame_™”©Ü
 - 
m_mj³g_äames
.
	`begš
() + 1;

733 
	}
}

735 
boŞ
 
	gMÙiÚJ³gC­tu»
::
	$£tPrİ”ty
(
´İ”ty
, 
v®ue
)

737 if(
´İ”ty
 =ğ
CAP_PROP_POS_FRAMES
)

739 if((
v®ue
) == 0)

741 
m_is_fœ¡_äame
 = 
Œue
;

742 
m_äame_™”©Ü
 = 
m_mj³g_äames
.
	`’d
();

743  
Œue
;

745 if(
m_mj³g_äames
.
	`size
(è> 
v®ue
)

747 
m_äame_™”©Ü
 = 
m_mj³g_äames
.
	`begš
(è+ (
v®ue
 - 1);

748 
m_is_fœ¡_äame
 = 
çl£
;

749  
Œue
;

753  
çl£
;

754 
	}
}

756 
	gMÙiÚJ³gC­tu»
::
	$g‘Prİ”ty
(
´İ”ty
) const

758 
´İ”ty
)

760 
CAP_PROP_POS_FRAMES
:

761  ()
	`g‘F¿mePos
();

762 
CAP_PROP_POS_AVI_RATIO
:

763  (
	`g‘F¿mePos
())/
m_mj³g_äames
.
	`size
();

764 
CAP_PROP_FRAME_WIDTH
:

765  ()
m_äame_width
;

766 
CAP_PROP_FRAME_HEIGHT
:

767  ()
m_äame_height
;

768 
CAP_PROP_FPS
:

769  
m_ås
;

770 
CAP_PROP_FOURCC
:

771  ()
	`CV_FOURCC
('M','J','P','G');

772 
CAP_PROP_FRAME_COUNT
:

773  ()
m_mj³g_äames
.
	`size
();

774 
CAP_PROP_FORMAT
:

779 
	}
}

781 
	g¡d
::
veùÜ
<> 
MÙiÚJ³gC­tu»
::
	$»adF¿me
(
äame_™”©Ü
 
™
)

783 
m_fe_¡»am
.
	`£ekg
(
™
->
fœ¡
);

785 
RiffChunk
 
chunk
;

786 
m_fe_¡»am
 >> 
chunk
;

788 
¡d
::
veùÜ
<> 
»suÉ
;

790 
»suÉ
.
	`»£rve
(
chunk
.
m_size
);

791 
»suÉ
.
	`»size
(
chunk
.
m_size
);

793 
m_fe_¡»am
.
	`»ad
(
»suÉ
.
	`d©a
(), 
chunk
.
m_size
);

795  
»suÉ
;

796 
	}
}

798 
boŞ
 
	gMÙiÚJ³gC­tu»
::
	$g¿bF¿me
()

800 if(
	`isO³Ãd
())

802 if(
m_is_fœ¡_äame
)

804 
m_is_fœ¡_äame
 = 
çl£
;

805 
m_äame_™”©Ü
 = 
m_mj³g_äames
.
	`begš
();

809 ++
m_äame_™”©Ü
;

813  
m_äame_™”©Ü
 !ğ
m_mj³g_äames
.
	`’d
();

814 
	}
}

816 
boŞ
 
	gMÙiÚJ³gC­tu»
::
	$»Œ›veF¿me
(, 
OuutA¼ay
 
ouut_äame
)

818 if(
m_äame_™”©Ü
 !ğ
m_mj³g_äames
.
	`’d
())

820 
¡d
::
veùÜ
<> 
d©a
 = 
	`»adF¿me
(
m_äame_™”©Ü
);

822 if(
d©a
.
	`size
())

824 
m_cu¼’t_äame
 = 
	`imdecode
(
d©a
, 
CV_LOAD_IMAGE_ANYDEPTH
 | 
CV_LOAD_IMAGE_COLOR
);

827 
m_cu¼’t_äame
.
	`cİyTo
(
ouut_äame
);

829  
Œue
;

832  
çl£
;

833 
	}
}

835 
	gMÙiÚJ³gC­tu»
::~
	$MÙiÚJ³gC­tu»
()

837 
	`şo£
();

838 
	}
}

840 
	gMÙiÚJ³gC­tu»
::
	$MÙiÚJ³gC­tu»
(cÚ¡ 
SŒšg
& 
f’ame
)

842 
	`İ’
(
f’ame
);

843 
	}
}

845 
boŞ
 
	gMÙiÚJ³gC­tu»
::
	$isO³Ãd
() const

847  
m_mj³g_äames
.
	`size
() > 0;

848 
	}
}

850 
	gMÙiÚJ³gC­tu»
::
	$şo£
()

852 
m_fe_¡»am
.
	`şo£
();

853 
m_äame_™”©Ü
 = 
m_mj³g_äames
.
	`’d
();

854 
	}
}

856 
boŞ
 
	gMÙiÚJ³gC­tu»
::
	$İ’
(cÚ¡ 
SŒšg
& 
f’ame
)

858 
	`şo£
();

860 
m_fe_¡»am
.
	`İ’
(
f’ame
);

862 
m_äame_™”©Ü
 = 
m_mj³g_äames
.
	`’d
();

863 
m_is_fœ¡_äame
 = 
Œue
;

865 if(!
	`·r£Riff
(
m_fe_¡»am
))

867 
	`şo£
();

870  
	`isO³Ãd
();

871 
	}
}

874 
boŞ
 
	gMÙiÚJ³gC­tu»
::
	$·r£Riff
(
Mj³gIÅutSŒ—m
& 
š_¡r
)

876 
boŞ
 
»suÉ
 = 
çl£
;

877 
š_¡r
)

879 
RiffLi¡
 
riff_li¡
;

881 
š_¡r
 >> 
riff_li¡
;

883 ifĞ
š_¡r
 && 
riff_li¡
.
m_riff_Ü_li¡_cc
 =ğ
RIFF_CC
 &&

884 ((
riff_li¡
.
m_li¡_ty³_cc
 =ğ
AVI_CC
è| (riff_li¡.m_li¡_ty³_cø=ğ
AVIX_CC
)) )

886 
ušt64_t
 
Ãxt_riff
 = 
š_¡r
.
	`‹Îg
();

888 
Ãxt_riff
 +ğ(
riff_li¡
.
m_size
 - 4);

890 
AviMj³gSŒ—m
 
mj³g_video_¡»am
;

891 
boŞ
 
is_·r£d
 = 
mj³g_video_¡»am
.
	`·r£Avi
(
š_¡r
, 
m_mj³g_äames
);

892 
»suÉ
 =„esuÉ || 
is_·r£d
;

894 if(
is_·r£d
)

896 
m_äame_width
 = 
mj³g_video_¡»am
.
	`g‘Width
();

897 
m_äame_height
 = 
mj³g_video_¡»am
.
	`g‘Height
();

898 
m_ås
 = 
mj³g_video_¡»am
.
	`g‘Fps
();

901 
š_¡r
.
	`£ekg
(
Ãxt_riff
);

909  
»suÉ
;

910 
	}
}

912 
	gPŒ
<
	gIVideoC­tu»
> 
	$ü—‹MÙiÚJ³gC­tu»
(cÚ¡ 
SŒšg
& 
f’ame
)

914 
PŒ
<
MÙiÚJ³gC­tu»
> 
	`mjdecod”
(
Ãw
 
	`MÙiÚJ³gC­tu»
(
f’ame
));

915 ifĞ
mjdecod”
->
	`isO³Ãd
() )

916  
mjdecod”
;

917  
PŒ
<
MÙiÚJ³gC­tu»
>();

918 
	}
}

	@cap_mjpeg_encoder.cpp

42 
	~"´ecomp.hµ
"

43 
	~<veùÜ
>

45 #ià
CV_NEON


46 
	#WITH_NEON


	)

49 
Çme¥aû
 
	gcv


51 
Çme¥aû
 
	gmj³g


54 ’um { 
	gCOLORSPACE_GRAY
=0, 
	gCOLORSPACE_RGBA
=1, 
	gCOLORSPACE_BGR
=2, 
	gCOLORSPACE_YUV444P
=3 };

56 
	#fourCC
(
a
,
b
,
c
,
d
è(()((
	`uch¬
(d)<<24è| (uch¬(c)<<16è| (uch¬(b)<<8è| uch¬×)))

	)

58 cÚ¡ 
	gAVIH_STRH_SIZE
 = 56;

59 cÚ¡ 
	gSTRF_SIZE
 = 40;

60 cÚ¡ 
	gAVI_DWFLAG
 = 0x00000910;

61 cÚ¡ 
	gAVI_DWSCALE
 = 1;

62 cÚ¡ 
	gAVI_DWQUALITY
 = -1;

63 cÚ¡ 
	gJUNK_SEEK
 = 4096;

64 cÚ¡ 
	gAVIIF_KEYFRAME
 = 0x10;

65 cÚ¡ 
	gMAX_BYTES_PER_SEC
 = 99999999;

66 cÚ¡ 
	gSUG_BUFFER_SIZE
 = 1048576;

68 cÚ¡ 
	gb™_mask
[] =

81 şas 
	cB™SŒ—m


83 
	gpublic
:

86 
DEFAULT_BLOCK_SIZE
 = (1 << 15),

87 
	ghuff_v®_shiá
 = 20,

88 
	ghuff_code_mask
 = (1 << 
huff_v®_shiá
) - 1

91 
B™SŒ—m
()

93 
	gm_buf
.
»size
(
DEFAULT_BLOCK_SIZE
 + 1024);

94 
	gm_¡¬t
 = &
m_buf
[0];

95 
	gm_’d
 = 
m_¡¬t
 + 
DEFAULT_BLOCK_SIZE
;

96 
	gm_is_İ’ed
 = 
çl£
;

97 
	gm_f
 = 0;

100 ~
B™SŒ—m
()

102 
şo£
();

105 
boŞ
 
İ’
(cÚ¡ 
SŒšg
& 
f’ame
)

107 
şo£
();

108 
	gm_f
 = 
fİ’
(
f’ame
.
c_¡r
(), "wb");

109 ifĞ!
	gm_f
 )

110  
	gçl£
;

111 
	gm_cu¼’t
 = 
m_¡¬t
;

112 
	gm_pos
 = 0;

113  
	gŒue
;

116 
boŞ
 
isO³Ãd
(ècÚ¡ {  
	gm_f
 != 0; }

118 
şo£
()

120 
wr™eBlock
();

121 ifĞ
	gm_f
 )

122 
fşo£
(
m_f
);

123 
	gm_f
 = 0;

126 
wr™eBlock
()

128 
size_t
 
	gwsz0
 = 
m_cu¼’t
 - 
m_¡¬t
;

129 ifĞ
	gwsz0
 > 0 && 
	gm_f
 )

131 
size_t
 
	gwsz
 = 
fwr™e
(
m_¡¬t
, 1, 
wsz0
, 
m_f
);

132 
CV_As£¹
Ğ
wsz
 =ğ
wsz0
 );

134 
	gm_pos
 +ğ
wsz0
;

135 
	gm_cu¼’t
 = 
m_¡¬t
;

138 
size_t
 
g‘Pos
() const

140  (
	gsize_t
)(
	gm_cu¼’t
 - 
	gm_¡¬t
è+ 
	gm_pos
;

143 
putBy‹
(
v®
)

145 *
	gm_cu¼’t
++ = (
uch¬
)
v®
;

146 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

147 
wr™eBlock
();

150 
putBy‹s
(cÚ¡ 
uch¬
* 
buf
, 
couÁ
)

152 
uch¬
* 
	gd©a
 = (uch¬*)
buf
;

153 
CV_As£¹
(
m_f
 && 
d©a
 && 
m_cu¼’t
 && 
couÁ
 >= 0);

154 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

155 
wr™eBlock
();

157  
	gcouÁ
 )

159 
	gl
 = ()(
m_’d
 - 
m_cu¼’t
);

161 ià(
	gl
 > 
	gcouÁ
)

162 
	gl
 = 
couÁ
;

164 ifĞ
	gl
 > 0 )

166 
memıy
(
m_cu¼’t
, 
d©a
, 
l
);

167 
	gm_cu¼’t
 +ğ
l
;

168 
	gd©a
 +ğ
l
;

169 
	gcouÁ
 -ğ
l
;

171 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

172 
wr™eBlock
();

176 
putShÜt
(
v®
)

178 
	gm_cu¼’t
[0] = (
uch¬
)
v®
;

179 
	gm_cu¼’t
[1] = (
uch¬
)(
v®
 >> 8);

180 
	gm_cu¼’t
 += 2;

181 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

182 
wr™eBlock
();

185 
putIÁ
(
v®
)

187 
	gm_cu¼’t
[0] = (
uch¬
)
v®
;

188 
	gm_cu¼’t
[1] = (
uch¬
)(
v®
 >> 8);

189 
	gm_cu¼’t
[2] = (
uch¬
)(
v®
 >> 16);

190 
	gm_cu¼’t
[3] = (
uch¬
)(
v®
 >> 24);

191 
	gm_cu¼’t
 += 4;

192 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

193 
wr™eBlock
();

196 
jputShÜt
(
v®
)

198 
	gm_cu¼’t
[0] = (
uch¬
)(
v®
 >> 8);

199 
	gm_cu¼’t
[1] = (
uch¬
)
v®
;

200 
	gm_cu¼’t
 += 2;

201 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

202 
wr™eBlock
();

205 
·tchIÁ
(
v®
, 
size_t
 
pos
)

207 ifĞ
	gpos
 >ğ
m_pos
 )

209 
±rdiff_t
 
d–
 = 
pos
 - 
m_pos
;

210 
CV_As£¹
Ğ
d–
 < 
m_cu¼’t
 - 
m_¡¬t
 );

211 
	gm_¡¬t
[
d–
] = (
uch¬
)
v®
;

212 
	gm_¡¬t
[
d–
+1] = (
uch¬
)(
v®
 >> 8);

213 
	gm_¡¬t
[
d–
+2] = (
uch¬
)(
v®
 >> 16);

214 
	gm_¡¬t
[
d–
+3] = (
uch¬
)(
v®
 >> 24);

218 
	gåos
 = 
á–l
(
m_f
);

219 
f£ek
(
m_f
, ()
pos
, 
SEEK_SET
);

220 
uch¬
 
	gbuf
[] = { (uch¬)
v®
, (uchar)(val >> 8), (uchar)(val >> 16), (uchar)(val >> 24) };

221 
fwr™e
(
buf
, 1, 4, 
m_f
);

222 
f£ek
(
m_f
, 
åos
, 
SEEK_SET
);

226 
jput
(
cu¼v®
)

228 
uch¬
 
	gv
;

229 
uch¬
* 
	g±r
 = 
m_cu¼’t
;

230 
	gv
 = (
uch¬
)(
cu¼v®
 >> 24);

231 *
	g±r
++ = 
v
;

232 ifĞ
	gv
 == 255 )

233 *
±r
++ = 0;

234 
	gv
 = (
uch¬
)(
cu¼v®
 >> 16);

235 *
	g±r
++ = 
v
;

236 ifĞ
	gv
 == 255 )

237 *
±r
++ = 0;

238 
	gv
 = (
uch¬
)(
cu¼v®
 >> 8);

239 *
	g±r
++ = 
v
;

240 ifĞ
	gv
 == 255 )

241 *
±r
++ = 0;

242 
	gv
 = (
uch¬
)
cu¼v®
;

243 *
	g±r
++ = 
v
;

244 ifĞ
	gv
 == 255 )

245 *
±r
++ = 0;

246 
	gm_cu¼’t
 = 
±r
;

247 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

248 
wr™eBlock
();

251 
jæush
(
cu¼v®
, 
b™Idx
)

253 
uch¬
 
	gv
;

254 
uch¬
* 
	g±r
 = 
m_cu¼’t
;

255 
	gcu¼v®
 |ğ(1 << 
b™Idx
)-1;

256  
	gb™Idx
 < 32 )

258 
	gv
 = (
uch¬
)(
cu¼v®
 >> 24);

259 *
	g±r
++ = 
v
;

260 ifĞ
	gv
 == 255 )

261 *
±r
++ = 0;

262 
	gcu¼v®
 <<= 8;

263 
	gb™Idx
 += 8;

265 
	gm_cu¼’t
 = 
±r
;

266 ifĞ
	gm_cu¼’t
 >ğ
m_’d
 )

267 
wr™eBlock
();

270 
boŞ
 
ü—‹EncodeHuffmªTabË
ĞcÚ¡ * 
¤c
, * 
bË
, 
max_size
 )

272 
	gi
, 
	gk
;

273 
	gmš_v®
 = 
INT_MAX
, 
	gmax_v®
 = 
INT_MIN
;

274 
	gsize
;

277  
	gi
 = 1, 
	gk
 = 1; 
	g¤c
[
k
] >= 0; i++ )

279 
	gcode_couÁ
 = 
¤c
[
k
++];

281  
	gcode_couÁ
 +ğ
k
; 
	gk
 < code_count; k++ )

283 
	gv®
 = 
¤c
[
k
] >> 
huff_v®_shiá
;

284 ifĞ
	gv®
 < 
	gmš_v®
 )

285 
	gmš_v®
 = 
v®
;

286 ifĞ
	gv®
 > 
	gmax_v®
 )

287 
	gmax_v®
 = 
v®
;

291 
	gsize
 = 
max_v®
 - 
mš_v®
 + 3;

293 ifĞ
	gsize
 > 
	gmax_size
 )

295 
CV_E¼Ü
(
CV_StsOutOfRªge
, "too big maximum Huffman code size");

296  
	gçl£
;

299 
mem£t
Ğ
bË
, 0, 
size
*(table[0]));

301 
	gbË
[0] = 
mš_v®
;

302 
	gbË
[1] = 
size
 - 2;

304  
	gi
 = 1, 
	gk
 = 1; 
	g¤c
[
k
] >= 0; i++ )

306 
	gcode_couÁ
 = 
¤c
[
k
++];

308  
	gcode_couÁ
 +ğ
k
; 
	gk
 < code_count; k++ )

310 
	gv®
 = 
¤c
[
k
] >> 
huff_v®_shiá
;

311 
	gcode
 = 
¤c
[
k
] & 
huff_code_mask
;

313 
	gbË
[
v®
 - 
mš_v®
 + 2] = (
code
 << 8è| 
i
;

316  
	gŒue
;

319 * 
ü—‹SourûHuffmªTabË
(cÚ¡ 
uch¬
* 
¤c
, * 
d¡
,

320 
max_b™s
, 
fœ¡_b™s
)

322 
	gi
, 
	gv®_idx
, 
	gcode
 = 0;

323 * 
	gbË
 = 
d¡
;

324 *
	gd¡
++ = 
fœ¡_b™s
;

325 
	gi
 = 1, 
	gv®_idx
 = 
max_b™s
; i <= max_bits; i++)

327 
	gcode_couÁ
 = 
¤c
[
i
 - 1];

328 
	gd¡
[0] = 
code_couÁ
;

329 
	gcode
 <<= 1;

330 
	gk
 = 0; k < 
	gcode_couÁ
; k++)

332 
	gd¡
[
k
 + 1] = (
¤c
[
v®_idx
 + k] << 
huff_v®_shiá
è| (
code
 + k);

334 
	gcode
 +ğ
code_couÁ
;

335 
	gd¡
 +ğ
code_couÁ
 + 1;

336 
	gv®_idx
 +ğ
code_couÁ
;

338 
	gd¡
[0] = -1;

339  
	gbË
;

342 
	g´Ùeùed
:

343 
¡d
::
veùÜ
<
uch¬
> 
m_buf
;

344 
uch¬
* 
	gm_¡¬t
;

345 
uch¬
* 
	gm_’d
;

346 
uch¬
* 
	gm_cu¼’t
;

347 
size_t
 
	gm_pos
;

348 
boŞ
 
	gm_is_İ’ed
;

349 
FILE
* 
	gm_f
;

353 şas 
	cMÙiÚJ³gWr™”
 : 
public
 
IVideoWr™”


355 
public
:

356 
MÙiÚJ³gWr™”
(è{ 
¿w¡»am
 = 
çl£
; }

357 
MÙiÚJ³gWr™”
(cÚ¡ 
SŒšg
& 
f’ame
, 
ås
, 
Size
 
size
, 
boŞ
 
iscŞÜ
)

359 
	g¿w¡»am
 = 
çl£
;

360 
İ’
(
f’ame
, 
ås
, 
size
, 
iscŞÜ
);

362 ~
MÙiÚJ³gWr™”
(è{ 
şo£
(); }

364 
şo£
()

366 ifĞ!
	g¡rm
.
isO³Ãd
() )

369 ifĞ!
	gäameOff£t
.
em±y
(è&& !
	g¿w¡»am
 )

371 
’dWr™eChunk
();

372 
wr™eIndex
();

373 
fšishWr™eAVI
();

375 
	g¡rm
.
şo£
();

376 
	gäameOff£t
.
ş—r
();

377 
	gäameSize
.
ş—r
();

378 
	gAVIChunkSizeIndex
.
ş—r
();

379 
	gäameNumIndexes
.
ş—r
();

382 
boŞ
 
İ’
(cÚ¡ 
SŒšg
& 
f’ame
, 
ås
, 
Size
 
size
, boŞ 
iscŞÜ
)

384 
şo£
();

386 ifĞ
	gf’ame
.
em±y
() )

387  
	gçl£
;

388 cÚ¡ * 
	gext
 = 
¡¼chr
(
f’ame
.
c_¡r
(), '.');

389 ifĞ!
	gext
 )

390  
	gçl£
;

391 ifĞ
¡rcmp
(
ext
, ".avi") != 0 && strcmp(ext, ".AVI") != 0 && strcmp(ext, ".Avi") != 0 )

392  
çl£
;

394 
boŞ
 
	gok
 = 
¡rm
.
İ’
(
f’ame
);

395 ifĞ!
	gok
 )

396  
	gçl£
;

398 
CV_As£¹
(
ås
 >= 1);

399 
	goutås
 = 
cvRound
(
ås
);

400 
	gwidth
 = 
size
.
width
;

401 
	gheight
 = 
size
.
height
;

402 
	gqu®™y
 = 75;

403 
	g¿w¡»am
 = 
çl£
;

404 
	gchªÃls
 = 
iscŞÜ
 ? 3 : 1;

406 ifĞ!
	g¿w¡»am
 )

408 
¡¬tWr™eAVI
();

409 
wr™eSŒ—mH—d”
();

412  
	gŒue
;

415 
boŞ
 
isO³Ãd
(ècÚ¡ {  
	g¡rm
.isOpened(); }

417 
¡¬tWr™eAVI
()

419 
¡¬tWr™eChunk
(
fourCC
('R', 'I', 'F', 'F'));

421 
	g¡rm
.
putIÁ
(
fourCC
('A', 'V', 'I', ' '));

423 
¡¬tWr™eChunk
(
fourCC
('L', 'I', 'S', 'T'));

425 
	g¡rm
.
putIÁ
(
fourCC
('h', 'd', 'r', 'l'));

426 
	g¡rm
.
putIÁ
(
fourCC
('a', 'v', 'i', 'h'));

427 
	g¡rm
.
putIÁ
(
AVIH_STRH_SIZE
);

428 
	g¡rm
.
putIÁ
(
cvRound
(1e6 / 
outås
));

429 
	g¡rm
.
putIÁ
(
MAX_BYTES_PER_SEC
);

430 
	g¡rm
.
putIÁ
(0);

431 
	g¡rm
.
putIÁ
(
AVI_DWFLAG
);

433 
	gäameNumIndexes
.
push_back
(
¡rm
.
g‘Pos
());

435 
	g¡rm
.
putIÁ
(0);

436 
	g¡rm
.
putIÁ
(0);

437 
	g¡rm
.
putIÁ
(1);

438 
	g¡rm
.
putIÁ
(
SUG_BUFFER_SIZE
);

439 
	g¡rm
.
putIÁ
(
width
);

440 
	g¡rm
.
putIÁ
(
height
);

441 
	g¡rm
.
putIÁ
(0);

442 
	g¡rm
.
putIÁ
(0);

443 
	g¡rm
.
putIÁ
(0);

444 
	g¡rm
.
putIÁ
(0);

447 
wr™eSŒ—mH—d”
()

450 
¡¬tWr™eChunk
(
fourCC
('L', 'I', 'S', 'T'));

452 
	g¡rm
.
putIÁ
(
fourCC
('s', 't', 'r', 'l'));

453 
	g¡rm
.
putIÁ
(
fourCC
('s', 't', 'r', 'h'));

454 
	g¡rm
.
putIÁ
(
AVIH_STRH_SIZE
);

455 
	g¡rm
.
putIÁ
(
fourCC
('v', 'i', 'd', 's'));

456 
	g¡rm
.
putIÁ
(
fourCC
('M', 'J', 'P', 'G'));

457 
	g¡rm
.
putIÁ
(0);

458 
	g¡rm
.
putIÁ
(0);

459 
	g¡rm
.
putIÁ
(0);

460 
	g¡rm
.
putIÁ
(
AVI_DWSCALE
);

461 
	g¡rm
.
putIÁ
(
outås
);

462 
	g¡rm
.
putIÁ
(0);

464 
	gäameNumIndexes
.
push_back
(
¡rm
.
g‘Pos
());

466 
	g¡rm
.
putIÁ
(0);

467 
	g¡rm
.
putIÁ
(
SUG_BUFFER_SIZE
);

468 
	g¡rm
.
putIÁ
(
AVI_DWQUALITY
);

469 
	g¡rm
.
putIÁ
(0);

470 
	g¡rm
.
putShÜt
(0);

471 
	g¡rm
.
putShÜt
(0);

472 
	g¡rm
.
putShÜt
(
width
);

473 
	g¡rm
.
putShÜt
(
height
);

476 
¡¬tWr™eChunk
(
fourCC
('s', 't', 'r', 'f'));

478 
	g¡rm
.
putIÁ
(
STRF_SIZE
);

479 
	g¡rm
.
putIÁ
(
width
);

480 
	g¡rm
.
putIÁ
(
height
);

481 
	g¡rm
.
putShÜt
(1);

483 
	g¡rm
.
putShÜt
(
chªÃls
);

484 
	g¡rm
.
putIÁ
(
fourCC
('M', 'J', 'P', 'G'));

485 
	g¡rm
.
putIÁ
(
width
 * 
height
 * 
chªÃls
);

486 
	g¡rm
.
putIÁ
(0);

487 
	g¡rm
.
putIÁ
(0);

488 
	g¡rm
.
putIÁ
(0);

489 
	g¡rm
.
putIÁ
(0);

491 
’dWr™eChunk
();

492 
’dWr™eChunk
();

495 
¡¬tWr™eChunk
(
fourCC
('L', 'I', 'S', 'T'));

496 
	g¡rm
.
putIÁ
(
fourCC
('o', 'd', 'm', 'l'));

497 
¡¬tWr™eChunk
(
fourCC
('d', 'm', 'l', 'h'));

499 
	gäameNumIndexes
.
push_back
(
¡rm
.
g‘Pos
());

501 
	g¡rm
.
putIÁ
(0);

502 
	g¡rm
.
putIÁ
(0);

504 
’dWr™eChunk
();

505 
’dWr™eChunk
();

507 
’dWr™eChunk
();

510 
¡¬tWr™eChunk
(
fourCC
('J', 'U', 'N', 'K'));

511 
size_t
 
	gpos
 = 
¡rm
.
g‘Pos
();

512  ; 
	gpos
 < (
	gsize_t
)
	gJUNK_SEEK
;…os += 4 )

513 
¡rm
.
putIÁ
(0);

514 
’dWr™eChunk
();

516 
¡¬tWr™eChunk
(
fourCC
('L', 'I', 'S', 'T'));

517 
	gmoviPoš‹r
 = 
¡rm
.
g‘Pos
();

518 
	g¡rm
.
putIÁ
(
fourCC
('m', 'o', 'v', 'i'));

521 
¡¬tWr™eChunk
(
fourcc
)

523 
CV_As£¹
(
fourcc
 != 0);

524 
	g¡rm
.
putIÁ
(
fourcc
);

526 
	gAVIChunkSizeIndex
.
push_back
(
¡rm
.
g‘Pos
());

527 
	g¡rm
.
putIÁ
(0);

530 
’dWr™eChunk
()

532 ifĞ!
	gAVIChunkSizeIndex
.
em±y
() )

534 
size_t
 
	gcu¼pos
 = 
¡rm
.
g‘Pos
();

535 
size_t
 
	gpo¥os
 = 
AVIChunkSizeIndex
.
back
();

536 
	gAVIChunkSizeIndex
.
pİ_back
();

537 
	gchunksz
 = ()(
cu¼pos
 - (
po¥os
 + 4));

538 
	g¡rm
.
·tchIÁ
(
chunksz
, 
po¥os
);

542 
wr™eIndex
()

545 
¡¬tWr™eChunk
(
fourCC
('i', 'd', 'x', '1'));

546 
	gnäames
 = ()
äameOff£t
.
size
();

547  
	gi
 = 0; i < 
	gnäames
; i++ )

549 
	g¡rm
.
putIÁ
(
fourCC
('0', '0', 'd', 'c'));

550 
	g¡rm
.
putIÁ
(
AVIIF_KEYFRAME
);

551 
	g¡rm
.
putIÁ
(()
äameOff£t
[
i
]);

552 
	g¡rm
.
putIÁ
(()
äameSize
[
i
]);

554 
’dWr™eChunk
();

557 
fšishWr™eAVI
()

559 
	gnäames
 = ()
äameOff£t
.
size
();

561 !
	gäameNumIndexes
.
em±y
())

563 
size_t
 
	gµos
 = 
äameNumIndexes
.
back
();

564 
	gäameNumIndexes
.
pİ_back
();

565 
	g¡rm
.
·tchIÁ
(
näames
, 
µos
);

567 
’dWr™eChunk
();

570 
wr™e
(
IÅutA¼ay
 
_img
)

572 
M©
 
	gimg
 = 
_img
.
g‘M©
();

573 
size_t
 
	gchunkPoš‹r
 = 
¡rm
.
g‘Pos
();

574 
	gšput_chªÃls
 = 
img
.
chªÃls
();

575 
	gcŞÜ¥aû
 = -1;

577 ifĞ
	gšput_chªÃls
 =ğ1 && 
chªÃls
 == 1 )

579 
CV_As£¹
Ğ
img
.
cŞs
 =ğ
width
 && img.
rows
 =ğ
height
 );

580 
	gcŞÜ¥aû
 = 
COLORSPACE_GRAY
;

582 ifĞ
	gšput_chªÃls
 == 4 )

584 
CV_As£¹
Ğ
img
.
cŞs
 =ğ
width
 && img.
rows
 =ğ
height
 && 
chªÃls
 == 3 );

585 
	gcŞÜ¥aû
 = 
COLORSPACE_RGBA
;

587 ifĞ
	gšput_chªÃls
 == 3 )

589 
CV_As£¹
Ğ
img
.
cŞs
 =ğ
width
 && img.
rows
 =ğ
height
 && 
chªÃls
 == 3 );

590 
	gcŞÜ¥aû
 = 
COLORSPACE_BGR
;

592 ifĞ
	gšput_chªÃls
 =ğ1 && 
chªÃls
 == 3 )

594 
CV_As£¹
Ğ
img
.
cŞs
 =ğ
width
 && img.
rows
 =ğ
height
*3 );

595 
	gcŞÜ¥aû
 = 
COLORSPACE_YUV444P
;

598 
CV_E¼Ü
(
CV_StsBadArg
, "Invalid combination of specified video colorspace‡ndhe input image colorspace");

600 ifĞ!
	g¿w¡»am
 )

601 
¡¬tWr™eChunk
(
fourCC
('0', '0', 'd', 'c'));

603 
wr™eF¿meD©a
(
img
.
d©a
, ()img.
¡•
, 
cŞÜ¥aû
, 
šput_chªÃls
);

605 ifĞ!
	g¿w¡»am
 )

607 
	gäameOff£t
.
push_back
(
chunkPoš‹r
 - 
moviPoš‹r
);

608 
	gäameSize
.
push_back
(
¡rm
.
g‘Pos
(è- 
chunkPoš‹r
 - 8);

609 
’dWr™eChunk
();

613 
g‘Prİ”ty
(
´İId
) const

615 ifĞ
	g´İId
 =ğ
VIDEOWRITER_PROP_QUALITY
 )

616  
qu®™y
;

617 ifĞ
	g´İId
 =ğ
VIDEOWRITER_PROP_FRAMEBYTES
 )

618  
äameSize
.
em±y
(è? 0. : ()äameSize.
back
();

622 
boŞ
 
£tPrİ”ty
(
´İId
, 
v®ue
)

624 ifĞ
	g´İId
 =ğ
VIDEOWRITER_PROP_QUALITY
 )

626 
qu®™y
 = 
v®ue
;

627  
	gŒue
;

629  
	gçl£
;

632 
wr™eF¿meD©a
ĞcÚ¡ 
uch¬
* 
d©a
, 
¡•
, 
cŞÜ¥aû
, 
šput_chªÃls
 );

634 
	g´Ùeùed
:

635 
outås
;

636 
	gwidth
, 
	gheight
, 
	gchªÃls
;

637 
	gqu®™y
;

638 
size_t
 
	gmoviPoš‹r
;

639 
	g¡d
::
veùÜ
<
size_t
> 
äameOff£t
, 
	gäameSize
, 
	gAVIChunkSizeIndex
, 
	gäameNumIndexes
;

640 
boŞ
 
	g¿w¡»am
;

642 
B™SŒ—m
 
	g¡rm
;

645 
	#DCT_DESCALE
(
x
, 
n
è(((xè+ ((()1è<< (Òè- 1))è>> (n))

	)

646 
	#fix
(
x
, 
n
è()((x)*(1 << (n)è+ .5);

	)

650 
	gfixb
 = 14,

651 
	gfixc
 = 12,

652 
	gpo¡shiá
 = 14

655 cÚ¡ 
	gC0_707
 = 
fix
(0.707106781f, 
fixb
);

656 cÚ¡ 
	gC0_541
 = 
fix
(0.541196100f, 
fixb
);

657 cÚ¡ 
	gC0_382
 = 
fix
(0.382683432f, 
fixb
);

658 cÚ¡ 
	gC1_306
 = 
fix
(1.306562965f, 
fixb
);

660 cÚ¡ 
	gy_r
 = 
fix
(0.299, 
fixc
);

661 cÚ¡ 
	gy_g
 = 
fix
(0.587, 
fixc
);

662 cÚ¡ 
	gy_b
 = 
fix
(0.114, 
fixc
);

664 cÚ¡ 
	gcb_r
 = -
fix
(0.1687, 
fixc
);

665 cÚ¡ 
	gcb_g
 = -
fix
(0.3313, 
fixc
);

666 cÚ¡ 
	gcb_b
 = 
fix
(0.5, 
fixc
);

668 cÚ¡ 
	gü_r
 = 
fix
(0.5, 
fixc
);

669 cÚ¡ 
	gü_g
 = -
fix
(0.4187, 
fixc
);

670 cÚ¡ 
	gü_b
 = -
fix
(0.0813, 
fixc
);

673 cÚ¡ 
uch¬
 
	gj³gTabËK1_T
[] =

685 cÚ¡ 
uch¬
 
	gj³gTabËK2_T
[] =

700 cÚ¡ 
uch¬
 
	gj³gTabËK3
[] =

707 cÚ¡ 
uch¬
 
	gj³gTabËK4
[] =

714 cÚ¡ 
uch¬
 
	gj³gTabËK5
[] =

741 cÚ¡ 
uch¬
 
	gj³gTabËK6
[] =

767 cÚ¡ 
uch¬
 
	gzigzag
[] =

777 cÚ¡ 
	gidù_´esÿË
[] =

789 cÚ¡ 
	gj³gH—d”
[] =

799 #ifdeà
WITH_NEON


801 
¯n_fdù8x8
ĞcÚ¡ *
¤c
, *
d¡
,

802 
¡•
, cÚ¡ *
po¡sÿË
 )

805 
št16x8_t
 
	gx0
 = 
vld1q_s16
(
¤c
); iÁ16x8_ˆ
	gx1
 = vld1q_s16(¤ø+ 
¡•
*7);

806 
št16x8_t
 
	gx2
 = 
vld1q_s16
(
¤c
 + 
¡•
*3); iÁ16x8_ˆ
	gx3
 = vld1q_s16(src + step*4);

808 
št16x8_t
 
	gx4
 = 
vaddq_s16
(
x0
, 
x1
); 
	gx0
 = 
vsubq_s16
(x0, x1);

809 
	gx1
 = 
vaddq_s16
(
x2
, 
x3
); 
	gx2
 = 
vsubq_s16
(x2, x3);

811 
št16x8_t
 
	gt1
 = 
x0
; iÁ16x8_ˆ
	gt2
 = 
x2
;

813 
	gx2
 = 
vaddq_s16
(
x4
, 
x1
); 
	gx4
 = 
vsubq_s16
(x4, x1);

815 
	gx0
 = 
vld1q_s16
(
¤c
 + 
¡•
); 
	gx3
 = vld1q_s16(src + step*6);

817 
	gx1
 = 
vaddq_s16
(
x0
, 
x3
); 
	gx0
 = 
vsubq_s16
(x0, x3);

818 
št16x8_t
 
	gt3
 = 
x0
;

820 
	gx0
 = 
vld1q_s16
(
¤c
 + 
¡•
*2); 
	gx3
 = vld1q_s16(src + step*5);

822 
št16x8_t
 
	gt4
 = 
vsubq_s16
(
x0
, 
x3
);

824 
	gx0
 = 
vaddq_s16
(
x0
, 
x3
);

825 
	gx3
 = 
vaddq_s16
(
x0
, 
x1
); 
	gx0
 = 
vsubq_s16
(x0, x1);

826 
	gx1
 = 
vaddq_s16
(
x2
, 
x3
); 
	gx2
 = 
vsubq_s16
(x2, x3);

828 
št16x8_t
 
	g»s0
 = 
x1
;

829 
št16x8_t
 
	g»s4
 = 
x2
;

830 
	gx0
 = 
vqdmulhq_n_s16
(
vsubq_s16
(
x0
, 
x4
), ()(
C0_707
*2));

831 
	gx1
 = 
vaddq_s16
(
x4
, 
x0
); 
	gx4
 = 
vsubq_s16
(x4, x0);

833 
št16x8_t
 
	g»s2
 = 
x4
;

834 
št16x8_t
 
	g»s6
 = 
x1
;

836 
	gx0
 = 
t2
; 
	gx1
 = 
t4
;

837 
	gx2
 = 
t3
; 
	gx3
 = 
t1
;

838 
	gx0
 = 
vaddq_s16
(
x0
, 
x1
); 
	gx1
 = vaddq_s16(x1, 
x2
); 
	gx2
 = vaddq_s16(x2, 
x3
);

839 
	gx1
 =
vqdmulhq_n_s16
(
x1
, ()(
C0_707
*2));

841 
	gx4
 = 
vaddq_s16
(
x1
, 
x3
); 
	gx3
 = 
vsubq_s16
(x3, x1);

842 
	gx1
 = 
vqdmulhq_n_s16
(
vsubq_s16
(
x0
, 
x2
), ()(
C0_382
*2));

843 
	gx0
 = 
vaddq_s16
(
vqdmulhq_n_s16
(
x0
, ()(
C0_541
*2)), 
x1
);

844 
	gx2
 = 
vaddq_s16
(
vshlq_n_s16
(
vqdmulhq_n_s16
(
x2
, ()
C1_306
), 1), 
x1
);

846 
	gx1
 = 
vaddq_s16
(
x0
, 
x3
); 
	gx3
 = 
vsubq_s16
(x3, x0);

847 
	gx0
 = 
vaddq_s16
(
x4
, 
x2
); 
	gx4
 = 
vsubq_s16
(x4, x2);

849 
št16x8_t
 
	g»s1
 = 
x0
;

850 
št16x8_t
 
	g»s3
 = 
x3
;

851 
št16x8_t
 
	g»s5
 = 
x1
;

852 
št16x8_t
 
	g»s7
 = 
x4
;

867 
št16x4_t
 
	g»s0_0
 = 
vg‘_low_s16
(
»s0
);

868 
št16x4_t
 
	g»s1_0
 = 
vg‘_low_s16
(
»s1
);

869 
št16x4x2_t
 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

870 
št32x4_t
 
	gl0
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

872 
	g»s0_0
 = 
vg‘_low_s16
(
»s2
);

873 
	g»s1_0
 = 
vg‘_low_s16
(
»s3
);

874 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

875 
št32x4_t
 
	gl1
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

877 
št32x4x2_t
 
	gŒes1
 = 
vŒnq_s32
(
l0
, 
l1
);

880 
	g»s0_0
 = 
vg‘_low_s16
(
»s4
);

881 
	g»s1_0
 = 
vg‘_low_s16
(
»s5
);

882 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

883 
	gl0
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

885 
	g»s0_0
 = 
vg‘_low_s16
(
»s6
);

886 
	g»s1_0
 = 
vg‘_low_s16
(
»s7
);

888 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

889 
	gl1
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

891 
št32x4x2_t
 
	gŒes2
 = 
vŒnq_s32
(
l0
, 
l1
);

894 
št16x8_t
 
	gŒª¥_»s0
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_low_s32
(
Œes1
.
v®
[0]), vg‘_low_s32(
Œes2
.val[0])));

895 
št16x8_t
 
	gŒª¥_»s1
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_high_s32
(
Œes1
.
v®
[0]), vg‘_high_s32(
Œes2
.val[0])));

896 
št16x8_t
 
	gŒª¥_»s2
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_low_s32
(
Œes1
.
v®
[1]), vg‘_low_s32(
Œes2
.val[1])));

897 
št16x8_t
 
	gŒª¥_»s3
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_high_s32
(
Œes1
.
v®
[1]), vg‘_high_s32(
Œes2
.val[1])));

900 
	g»s0_0
 = 
vg‘_high_s16
(
»s0
);

901 
	g»s1_0
 = 
vg‘_high_s16
(
»s1
);

902 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

903 
	gl0
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

905 
	g»s0_0
 = 
vg‘_high_s16
(
»s2
);

906 
	g»s1_0
 = 
vg‘_high_s16
(
»s3
);

908 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

909 
	gl1
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

911 
	gŒes1
 = 
vŒnq_s32
(
l0
, 
l1
);

914 
	g»s0_0
 = 
vg‘_high_s16
(
»s4
);

915 
	g»s1_0
 = 
vg‘_high_s16
(
»s5
);

916 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

917 
	gl0
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

919 
	g»s0_0
 = 
vg‘_high_s16
(
»s6
);

920 
	g»s1_0
 = 
vg‘_high_s16
(
»s7
);

922 
	gŒes
 = 
vŒn_s16
(
»s0_0
, 
»s1_0
);

923 
	gl1
 = 
vcombše_s32
(
v»š‹½»t_s32_s16
(
Œes
.
v®
[0]),vreinterpret_s32_s16(tres.val[1]));

925 
	gŒes2
 = 
vŒnq_s32
(
l0
, 
l1
);

928 
št16x8_t
 
	gŒª¥_»s4
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_low_s32
(
Œes1
.
v®
[0]), vg‘_low_s32(
Œes2
.val[0])));

929 
št16x8_t
 
	gŒª¥_»s5
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_high_s32
(
Œes1
.
v®
[0]), vg‘_high_s32(
Œes2
.val[0])));

930 
št16x8_t
 
	gŒª¥_»s6
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_low_s32
(
Œes1
.
v®
[1]), vg‘_low_s32(
Œes2
.val[1])));

931 
št16x8_t
 
	gŒª¥_»s7
 = 
v»š‹½»tq_s16_s32
(
vcombše_s32
(
vg‘_high_s32
(
Œes1
.
v®
[1]), vg‘_high_s32(
Œes2
.val[1])));

934 
	#STORE_DESCALED
(
addr
, 
»g
, 
mul_addr
è
po¡sÿË_lše
 = 
	`vld1q_s16
((mul_addr)); \

935 
mask
 = 
	`v»š‹½»tq_s16_u16
(
	`vştq_s16
((
»g
), 
z
)); \

936 
»g
 = 
	`vabsq_s16
(reg); \

937 
»g
 = 
	`vqdmulhq_s16
(
	`vqaddq_s16
(Ôeg), (»g)), 
po¡sÿË_lše
); \

938 
»g
 = 
	`vsubq_s16
(
	`veÜq_s16
Ôeg, 
mask
), mask); \

939 
	`v¡1q_s16
((
addr
), 
»g
);

	)

941 
št16x8_t
 
	gz
 = 
vdupq_n_s16
(0), 
	gpo¡sÿË_lše
, 
	gmask
;

944 
	gx0
 = 
Œª¥_»s0
; 
	gx1
 = 
Œª¥_»s7
;

945 
	gx2
 = 
Œª¥_»s3
; 
	gx3
 = 
Œª¥_»s4
;

947 
	gx4
 = 
vaddq_s16
(
x0
, 
x1
); 
	gx0
 = 
vsubq_s16
(x0, x1);

948 
	gx1
 = 
vaddq_s16
(
x2
, 
x3
); 
	gx2
 = 
vsubq_s16
(x2, x3);

950 
	gt1
 = 
x0
; 
	gt2
 = 
x2
;

952 
	gx2
 = 
vaddq_s16
(
x4
, 
x1
); 
	gx4
 = 
vsubq_s16
(x4, x1);

954 
	gx0
 = 
Œª¥_»s1
;

955 
	gx3
 = 
Œª¥_»s6
;

957 
	gx1
 = 
vaddq_s16
(
x0
, 
x3
); 
	gx0
 = 
vsubq_s16
(x0, x3);

959 
	gt3
 = 
x0
;

961 
	gx0
 = 
Œª¥_»s2
; 
	gx3
 = 
Œª¥_»s5
;

963 
	gt4
 = 
vsubq_s16
(
x0
, 
x3
);

965 
	gx0
 = 
vaddq_s16
(
x0
, 
x3
);

967 
	gx3
 = 
vaddq_s16
(
x0
, 
x1
); 
	gx0
 = 
vsubq_s16
(x0, x1);

968 
	gx1
 = 
vaddq_s16
(
x2
, 
x3
); 
	gx2
 = 
vsubq_s16
(x2, x3);

970 
STORE_DESCALED
(
d¡
, 
x1
, 
po¡sÿË
);

971 
STORE_DESCALED
(
d¡
 + 4*8, 
x2
, 
po¡sÿË
 + 4*8);

973 
	gx0
 = 
vqdmulhq_n_s16
(
vsubq_s16
(
x0
, 
x4
), ()(
C0_707
*2));

975 
	gx1
 = 
vaddq_s16
(
x4
, 
x0
); 
	gx4
 = 
vsubq_s16
(x4, x0);

977 
STORE_DESCALED
(
d¡
 + 2*8, 
x4
,
po¡sÿË
 + 2*8);

978 
STORE_DESCALED
(
d¡
 + 6*8, 
x1
,
po¡sÿË
 + 6*8);

980 
	gx0
 = 
t2
; 
	gx1
 = 
t4
;

981 
	gx2
 = 
t3
; 
	gx3
 = 
t1
;

983 
	gx0
 = 
vaddq_s16
(
x0
, 
x1
); 
	gx1
 = vaddq_s16(x1, 
x2
); 
	gx2
 = vaddq_s16(x2, 
x3
);

985 
	gx1
 =
vqdmulhq_n_s16
(
x1
, ()(
C0_707
*2));

987 
	gx4
 = 
vaddq_s16
(
x1
, 
x3
); 
	gx3
 = 
vsubq_s16
(x3, x1);

989 
	gx1
 = 
vqdmulhq_n_s16
(
vsubq_s16
(
x0
, 
x2
), ()(
C0_382
*2));

990 
	gx0
 = 
vaddq_s16
(
vqdmulhq_n_s16
(
x0
, ()(
C0_541
*2)), 
x1
);

991 
	gx2
 = 
vaddq_s16
(
vshlq_n_s16
(
vqdmulhq_n_s16
(
x2
, ()
C1_306
), 1), 
x1
);

993 
	gx1
 = 
vaddq_s16
(
x0
, 
x3
); 
	gx3
 = 
vsubq_s16
(x3, x0);

994 
	gx0
 = 
vaddq_s16
(
x4
, 
x2
); 
	gx4
 = 
vsubq_s16
(x4, x2);

996 
STORE_DESCALED
(
d¡
 + 5*8, 
x1
,
po¡sÿË
 + 5*8);

997 
STORE_DESCALED
(
d¡
 + 1*8, 
x0
,
po¡sÿË
 + 1*8);

998 
STORE_DESCALED
(
d¡
 + 7*8, 
x4
,
po¡sÿË
 + 7*8);

999 
STORE_DESCALED
(
d¡
 + 3*8, 
x3
,
po¡sÿË
 + 3*8);

1004 
¯n_fdù8x8
ĞcÚ¡ *
¤c
, *
d¡
,

1005 
¡•
, cÚ¡ *
po¡sÿË
 )

1007 
	gwÜk¥aû
[64], *
	gwÜk
 = 
wÜk¥aû
;

1008 
	gi
;

1011  
	gi
 = 8; i > 0; i--, 
	g¤c
 +ğ
¡•
, 
	gwÜk
 += 8 )

1013 
x0
 = 
¤c
[0], 
	gx1
 = src[7];

1014 
	gx2
 = 
¤c
[3], 
	gx3
 = src[4];

1016 
	gx4
 = 
x0
 + 
x1
; 
	gx0
 -= x1;

1017 
	gx1
 = 
x2
 + 
x3
; 
	gx2
 -= x3;

1019 
	gwÜk
[7] = 
x0
; wÜk[1] = 
x2
;

1020 
	gx2
 = 
x4
 + 
x1
; 
	gx4
 -= x1;

1022 
	gx0
 = 
¤c
[1]; 
	gx3
 = src[6];

1023 
	gx1
 = 
x0
 + 
x3
; 
	gx0
 -= x3;

1024 
	gwÜk
[5] = 
x0
;

1026 
	gx0
 = 
¤c
[2]; 
	gx3
 = src[5];

1027 
	gwÜk
[3] = 
x0
 - 
x3
; 
	gx0
 += x3;

1029 
	gx3
 = 
x0
 + 
x1
; 
	gx0
 -= x1;

1030 
	gx1
 = 
x2
 + 
x3
; 
	gx2
 -= x3;

1032 
	gwÜk
[0] = 
x1
; wÜk[4] = 
x2
;

1034 
	gx0
 = 
DCT_DESCALE
((
x0
 - 
x4
)*
C0_707
, 
fixb
);

1035 
	gx1
 = 
x4
 + 
x0
; 
	gx4
 -= x0;

1036 
	gwÜk
[2] = 
x4
; wÜk[6] = 
x1
;

1038 
	gx0
 = 
wÜk
[1]; 
	gx1
 = work[3];

1039 
	gx2
 = 
wÜk
[5]; 
	gx3
 = work[7];

1041 
	gx0
 +ğ
x1
; 
	gx1
 +ğ
x2
; 
	gx2
 +ğ
x3
;

1042 
	gx1
 = 
DCT_DESCALE
(
x1
*
C0_707
, 
fixb
);

1044 
	gx4
 = 
x1
 + 
x3
; 
	gx3
 -= x1;

1045 
	gx1
 = (
x0
 - 
x2
)*
C0_382
;

1046 
	gx0
 = 
DCT_DESCALE
(
x0
*
C0_541
 + 
x1
, 
fixb
);

1047 
	gx2
 = 
DCT_DESCALE
(
x2
*
C1_306
 + 
x1
, 
fixb
);

1049 
	gx1
 = 
x0
 + 
x3
; 
	gx3
 -= x0;

1050 
	gx0
 = 
x4
 + 
x2
; 
	gx4
 -= x2;

1052 
	gwÜk
[5] = 
x1
; wÜk[1] = 
x0
;

1053 
	gwÜk
[7] = 
x4
; wÜk[3] = 
x3
;

1056 
	gwÜk
 = 
wÜk¥aû
;

1058  
	gi
 = 8; i > 0; i--, 
	gwÜk
++, 
	gpo¡sÿË
 +ğ8, 
	gd¡
 += 8 )

1060 
x0
 = 
wÜk
[8*0], 
	gx1
 = work[8*7];

1061 
	gx2
 = 
wÜk
[8*3], 
	gx3
 = work[8*4];

1063 
	gx4
 = 
x0
 + 
x1
; 
	gx0
 -= x1;

1064 
	gx1
 = 
x2
 + 
x3
; 
	gx2
 -= x3;

1066 
	gwÜk
[8*7] = 
x0
; wÜk[8*0] = 
x2
;

1067 
	gx2
 = 
x4
 + 
x1
; 
	gx4
 -= x1;

1069 
	gx0
 = 
wÜk
[8*1]; 
	gx3
 = work[8*6];

1070 
	gx1
 = 
x0
 + 
x3
; 
	gx0
 -= x3;

1071 
	gwÜk
[8*4] = 
x0
;

1073 
	gx0
 = 
wÜk
[8*2]; 
	gx3
 = work[8*5];

1074 
	gwÜk
[8*3] = 
x0
 - 
x3
; 
	gx0
 += x3;

1076 
	gx3
 = 
x0
 + 
x1
; 
	gx0
 -= x1;

1077 
	gx1
 = 
x2
 + 
x3
; 
	gx2
 -= x3;

1079 
	gd¡
[0] = ()
DCT_DESCALE
(
x1
*
po¡sÿË
[0], 
po¡shiá
);

1080 
	gd¡
[4] = ()
DCT_DESCALE
(
x2
*
po¡sÿË
[4], 
po¡shiá
);

1082 
	gx0
 = 
DCT_DESCALE
((
x0
 - 
x4
)*
C0_707
, 
fixb
);

1083 
	gx1
 = 
x4
 + 
x0
; 
	gx4
 -= x0;

1085 
	gd¡
[2] = ()
DCT_DESCALE
(
x4
*
po¡sÿË
[2], 
po¡shiá
);

1086 
	gd¡
[6] = ()
DCT_DESCALE
(
x1
*
po¡sÿË
[6], 
po¡shiá
);

1088 
	gx0
 = 
wÜk
[8*0]; 
	gx1
 = work[8*3];

1089 
	gx2
 = 
wÜk
[8*4]; 
	gx3
 = work[8*7];

1091 
	gx0
 +ğ
x1
; 
	gx1
 +ğ
x2
; 
	gx2
 +ğ
x3
;

1092 
	gx1
 = 
DCT_DESCALE
(
x1
*
C0_707
, 
fixb
);

1094 
	gx4
 = 
x1
 + 
x3
; 
	gx3
 -= x1;

1095 
	gx1
 = (
x0
 - 
x2
)*
C0_382
;

1096 
	gx0
 = 
DCT_DESCALE
(
x0
*
C0_541
 + 
x1
, 
fixb
);

1097 
	gx2
 = 
DCT_DESCALE
(
x2
*
C1_306
 + 
x1
, 
fixb
);

1099 
	gx1
 = 
x0
 + 
x3
; 
	gx3
 -= x0;

1100 
	gx0
 = 
x4
 + 
x2
; 
	gx4
 -= x2;

1102 
	gd¡
[5] = ()
DCT_DESCALE
(
x1
*
po¡sÿË
[5], 
po¡shiá
);

1103 
	gd¡
[1] = ()
DCT_DESCALE
(
x0
*
po¡sÿË
[1], 
po¡shiá
);

1104 
	gd¡
[7] = ()
DCT_DESCALE
(
x4
*
po¡sÿË
[7], 
po¡shiá
);

1105 
	gd¡
[3] = ()
DCT_DESCALE
(
x3
*
po¡sÿË
[3], 
po¡shiá
);

1110 
	gMÙiÚJ³gWr™”
::
wr™eF¿meD©a
ĞcÚ¡ 
uch¬
* 
d©a
, 
¡•
, 
cŞÜ¥aû
, 
šput_chªÃls
 )

1113 
boŞ
 
	gš™_ÿt_bË
 = 
çl£
;

1114 cÚ¡ 
	gCAT_TAB_SIZE
 = 4096;

1115 
uch¬
 
	gÿt_bË
[
CAT_TAB_SIZE
*2+1];

1116 ifĞ!
	gš™_ÿt_bË
 )

1118  
	gi
 = -
CAT_TAB_SIZE
; i <= CAT_TAB_SIZE; i++ )

1120 
Cv32suf
 
	ga
;

1121 
	ga
.
	gf
 = ()
i
;

1122 
	gÿt_bË
[
i
+
CAT_TAB_SIZE
] = ((
a
.i >> 23) & 255) - (126 & (i ? -1 : 0));

1124 
	gš™_ÿt_bË
 = 
Œue
;

1128 
CV_As£¹
Ğ
d©a
 && 
width
 > 0 && 
height
 > 0 );

1136 
	gx
, 
	gy
;

1137 
	gi
, 
	gj
;

1138 cÚ¡ 
	gmax_qu®™y
 = 12;

1139 
	gfdù_qb
[2][64];

1140 
	ghuff_dc_b
[2][16];

1141 
	ghuff_ac_b
[2][256];

1143 
	gx_sÿË
 = 
chªÃls
 > 1 ? 2 : 1, 
	gy_sÿË
 = 
x_sÿË
;

1144 
	gdc_´ed
[] = { 0, 0, 0 };

1145 
	gx_¡•
 = 
x_sÿË
 * 8;

1146 
	gy_¡•
 = 
y_sÿË
 * 8;

1147 
	gblock
[6][64];

1148 
	gbufãr
[4096];

1149 * 
	ghbufãr
 = (*)
bufãr
;

1150 
	gluma_couÁ
 = 
x_sÿË
*
y_sÿË
;

1151 
	gblock_couÁ
 = 
luma_couÁ
 + 
chªÃls
 - 1;

1152 
	gY_¡•
 = 
x_sÿË
*8;

1153 cÚ¡ 
	gUV_¡•
 = 16;

1154 
	gu_¶ªe_ofs
 = 
¡•
*
height
;

1155 
	gv_¶ªe_ofs
 = 
u_¶ªe_ofs
 + 
¡•
*
height
;

1156 
	g_qu®™y
 = 
qu®™y
*0.01*
max_qu®™y
;

1158 ifĞ
	g_qu®™y
 < 1. ) _quality = 1.;

1159 ifĞ
	g_qu®™y
 > 
	gmax_qu®™y
 ) _qu®™y = 
max_qu®™y
;

1161 
	gšv_qu®™y
 = 1./
_qu®™y
;

1164 
	g¡rm
.
putBy‹s
Ğ(cÚ¡ 
uch¬
*)
j³gH—d”
, (jpegHeader) - 1 );

1167  
	gi
 = 0; i < (
	gchªÃls
 > 1 ? 2 : 1); i++ )

1169 cÚ¡ 
uch¬
* 
	gqbË
 = 
i
 =ğ0 ? 
j³gTabËK1_T
 : 
j³gTabËK2_T
;

1170 
	gchroma_sÿË
 = 
i
 > 0 ? 
luma_couÁ
 : 1;

1172 
	g¡rm
.
jputShÜt
( 0xffdb );

1173 
	g¡rm
.
jputShÜt
( 2 + 65*1 );

1174 
	g¡rm
.
putBy‹
Ğ0*16 + 
i
 );

1177  
	gj
 = 0; j < 64; j++ )

1179 
	gidx
 = 
zigzag
[
j
];

1180 
	gqv®
 = 
cvRound
(
qbË
[
idx
]*
šv_qu®™y
);

1181 ifĞ
	gqv®
 < 1 )

1182 
	gqv®
 = 1;

1183 ifĞ
	gqv®
 > 255 )

1184 
	gqv®
 = 255;

1185 
	gfdù_qb
[
i
][
idx
] = ()(
cvRound
((1 << (
po¡shiá
 + 11)))/

1186 (
qv®
*
chroma_sÿË
*
idù_´esÿË
[
idx
]));

1187 
	g¡rm
.
putBy‹
Ğ
qv®
 );

1192  
	gi
 = 0; i < (
	gchªÃls
 > 1 ? 4 : 2); i++ )

1194 cÚ¡ 
uch¬
* 
	ghbË
 = 
i
 =ğ0 ? 
j³gTabËK3
 : i =ğ1 ? 
j³gTabËK5
 :

1195 
i
 =ğ2 ? 
j³gTabËK4
 : 
j³gTabËK6
;

1196 
	gis_ac_b
 = 
i
 & 1;

1197 
	gidx
 = 
i
 >= 2;

1198 
	gbËSize
 = 16 + (
is_ac_b
 ? 162 : 12);

1200 
	g¡rm
.
jputShÜt
( 0xFFC4 );

1201 
	g¡rm
.
jputShÜt
Ğ3 + 
bËSize
 );

1202 
	g¡rm
.
putBy‹
Ğ
is_ac_b
*16 + 
idx
 );

1203 
	g¡rm
.
putBy‹s
Ğ
hbË
, 
bËSize
 );

1205 
	gB™SŒ—m
::
ü—‹EncodeHuffmªTabË
Ğ
B™SŒ—m
::
ü—‹SourûHuffmªTabË
(

1206 
hbË
, 
hbufãr
, 16, 9 ), 
is_ac_b
 ? 
huff_ac_b
[
idx
] :

1207 
huff_dc_b
[
idx
], 
is_ac_b
 ? 256 : 16 );

1211 
	g¡rm
.
jputShÜt
( 0xFFC0 );

1212 
	g¡rm
.
jputShÜt
Ğ8 + 3*
chªÃls
 );

1213 
	g¡rm
.
putBy‹
( 8 );

1214 
	g¡rm
.
jputShÜt
Ğ
height
 );

1215 
	g¡rm
.
jputShÜt
Ğ
width
 );

1216 
	g¡rm
.
putBy‹
Ğ
chªÃls
 );

1218  
	gi
 = 0; i < 
	gchªÃls
; i++ )

1220 
	g¡rm
.
putBy‹
Ğ
i
 + 1 );

1221 ifĞ
	gi
 == 0 )

1222 
¡rm
.
putBy‹
(
x_sÿË
*16 + 
y_sÿË
);

1224 
	g¡rm
.
putBy‹
(1*16 + 1);

1225 
	g¡rm
.
putBy‹
Ğ
i
 > 0 );

1229 
	g¡rm
.
jputShÜt
( 0xFFDA );

1230 
	g¡rm
.
jputShÜt
Ğ6 + 2*
chªÃls
 );

1231 
	g¡rm
.
putBy‹
Ğ
chªÃls
 );

1233  
	gi
 = 0; i < 
	gchªÃls
; i++ )

1235 
	g¡rm
.
putBy‹
Ğ
i
+1 );

1236 
	g¡rm
.
putBy‹
Ğ(
i
>0)*16 + (i>0) );

1239 
	g¡rm
.
jputShÜt
(0*256 + 63);

1242 
	g¡rm
.
putBy‹
( 0 );

1244 
	gcu¼v®
 = 0, 
	gcode
 = 0, 
	g‹mpv®
 = 0;

1245 
	gb™_idx
 = 32;

1247 
	#JPUT_BITS
(
v®
, 
b™s
) \

1248 
b™_idx
 -ğ(
b™s
); \

1249 
‹mpv®
 = (
v®
è& 
b™_mask
[(
b™s
)]; \

1250 ifĞ
b™_idx
 <= 0 ) \

1252 
¡rm
.
	`jput
(
cu¼v®
 | (()
‹mpv®
 >> -
b™_idx
)); \

1253 
b™_idx
 += 32; \

1254 
cu¼v®
 = 
b™_idx
 < 32 ? (
‹mpv®
 << bit_idx) : 0; \

1257 
cu¼v®
 |ğ(
‹mpv®
 << 
b™_idx
)

	)

1259 
	#JPUT_HUFF
(
v®
, 
bË
) \

1260 
code
 = 
bË
[(
v®
) + 2]; \

1261 
	`JPUT_BITS
(
code
 >> 8, ()(cod& 255))

	)

1264  
	gy
 = 0; y < 
	gheight
; y +ğ
y_¡•
, 
	gd©a
 +ğy_¡•*
¡•
 )

1266  
x
 = 0; 
	gx
 < 
	gwidth
; x +ğ
x_¡•
 )

1268 
x_lim™
 = 
x_¡•
;

1269 
	gy_lim™
 = 
y_¡•
;

1270 cÚ¡ 
uch¬
* 
	gpix_d©a
 = 
d©a
 + 
x
*
šput_chªÃls
;

1271 * 
	gY_d©a
 = 
block
[0];

1273 ifĞ
	gx
 + 
	gx_lim™
 > 
	gwidth
 ) x_lim™ = 
width
 - 
x
;

1274 ifĞ
	gy
 + 
	gy_lim™
 > 
	gheight
 ) y_lim™ = 
height
 - 
y
;

1276 
mem£t
Ğ
block
, 0, 
block_couÁ
*64*(block[0][0]));

1278 ifĞ
	gchªÃls
 > 1 )

1280 * 
	gUV_d©a
 = 
block
[
luma_couÁ
];

1283 ifĞ
	gcŞÜ¥aû
 =ğ
COLORSPACE_YUV444P
 && 
y_lim™
 =ğ16 && 
x_lim™
 == 16 )

1285  
i
 = 0; 
	gi
 < 
	gy_lim™
; i +ğ2, 
	gpix_d©a
 +ğ
¡•
*2, 
	gY_d©a
 +ğ
Y_¡•
*2, 
	gUV_d©a
 +ğ
UV_¡•
 )

1287 #ifdeà
WITH_NEON


1289 
ušt16x8_t
 
masklo
 = 
vdupq_n_u16
(255);

1290 
ušt16x8_t
 
	gÏÃ
 = 
vld1q_u16
((*)(
pix_d©a
+
v_¶ªe_ofs
));

1291 
ušt16x8_t
 
	gt1
 = 
vaddq_u16
(
vshrq_n_u16
(
ÏÃ
, 8), 
vªdq_u16
Öªe, 
masklo
));

1292 
	gÏÃ
 = 
vld1q_u16
((*)(
pix_d©a
 + 
v_¶ªe_ofs
 + 
¡•
));

1293 
ušt16x8_t
 
	gt2
 = 
vaddq_u16
(
vshrq_n_u16
(
ÏÃ
, 8), 
vªdq_u16
Öªe, 
masklo
));

1294 
	gt1
 = 
vaddq_u16
(
t1
, 
t2
);

1295 
v¡1q_s16
(
UV_d©a
, 
vsubq_s16
(
v»š‹½»tq_s16_u16
(
t1
), 
vdupq_n_s16
(128*4)));

1297 
	gÏÃ
 = 
vld1q_u16
((*)(
pix_d©a
+
u_¶ªe_ofs
));

1298 
	gt1
 = 
vaddq_u16
(
vshrq_n_u16
(
ÏÃ
, 8), 
vªdq_u16
Öªe, 
masklo
));

1299 
	gÏÃ
 = 
vld1q_u16
((*)(
pix_d©a
 + 
u_¶ªe_ofs
 + 
¡•
));

1300 
	gt2
 = 
vaddq_u16
(
vshrq_n_u16
(
ÏÃ
, 8), 
vªdq_u16
Öªe, 
masklo
));

1301 
	gt1
 = 
vaddq_u16
(
t1
, 
t2
);

1302 
v¡1q_s16
(
UV_d©a
 + 8, 
vsubq_s16
(
v»š‹½»tq_s16_u16
(
t1
), 
vdupq_n_s16
(128*4)));

1306 
št16x8_t
 
	gÏÃ
 = 
v»š‹½»tq_s16_u16
(
vmovl_u8
(
vld1_u8
(
pix_d©a
)));

1307 
št16x8_t
 
	gd–
 = 
vdupq_n_s16
(128);

1308 
	gÏÃ
 = 
vsubq_s16
(
ÏÃ
, 
d–
);

1309 
v¡1q_s16
(
Y_d©a
, 
ÏÃ
);

1311 
	gÏÃ
 = 
v»š‹½»tq_s16_u16
(
vmovl_u8
(
vld1_u8
(
pix_d©a
+8)));

1312 
	gÏÃ
 = 
vsubq_s16
(
ÏÃ
, 
d–
);

1313 
v¡1q_s16
(
Y_d©a
 + 8, 
ÏÃ
);

1315 
	gÏÃ
 = 
v»š‹½»tq_s16_u16
(
vmovl_u8
(
vld1_u8
(
pix_d©a
+
¡•
)));

1316 
	gÏÃ
 = 
vsubq_s16
(
ÏÃ
, 
d–
);

1317 
v¡1q_s16
(
Y_d©a
+
Y_¡•
, 
ÏÃ
);

1319 
	gÏÃ
 = 
v»š‹½»tq_s16_u16
(
vmovl_u8
(
vld1_u8
(
pix_d©a
 + 
¡•
 + 8)));

1320 
	gÏÃ
 = 
vsubq_s16
(
ÏÃ
, 
d–
);

1321 
v¡1q_s16
(
Y_d©a
+
Y_¡•
 + 8, 
ÏÃ
);

1324  
	gj
 = 0; j < 
	gx_lim™
; j +ğ2, 
	gpix_d©a
 += 2 )

1326 
Y_d©a
[
j
] = 
pix_d©a
[0] - 128;

1327 
	gY_d©a
[
j
+1] = 
pix_d©a
[1] - 128;

1328 
	gY_d©a
[
j
+
Y_¡•
] = 
pix_d©a
[
¡•
] - 128;

1329 
	gY_d©a
[
j
+
Y_¡•
+1] = 
pix_d©a
[
¡•
+1] - 128;

1331 
	gUV_d©a
[
j
>>1] = 
pix_d©a
[
v_¶ªe_ofs
] +…ix_data[v_plane_ofs+1] +

1332 
pix_d©a
[
v_¶ªe_ofs
+
¡•
] +…ix_data[v_plane_ofs+step+1] - 128*4;

1333 
	gUV_d©a
[(
j
>>1)+8] = 
pix_d©a
[
u_¶ªe_ofs
] +…ix_data[u_plane_ofs+1] +

1334 
pix_d©a
[
u_¶ªe_ofs
+
¡•
] +…ix_data[u_plane_ofs+step+1] - 128*4;

1338 
	gpix_d©a
 -ğ
x_lim™
*
šput_chªÃls
;

1344  
	gi
 = 0; i < 
	gy_lim™
; i++, 
	gpix_d©a
 +ğ
¡•
, 
	gY_d©a
 +ğ
Y_¡•
 )

1346  
j
 = 0; 
	gj
 < 
	gx_lim™
; j++, 
	gpix_d©a
 +ğ
šput_chªÃls
 )

1348 
Y
, 
U
, 
V
;

1350 ifĞ
	gcŞÜ¥aû
 =ğ
COLORSPACE_BGR
 )

1352 
r
 = 
pix_d©a
[2];

1353 
	gg
 = 
pix_d©a
[1];

1354 
	gb
 = 
pix_d©a
[0];

1356 
	gY
 = 
DCT_DESCALE
Ğ
r
*
y_r
 + 
g
*
y_g
 + 
b
*
y_b
, 
fixc
) - 128;

1357 
	gU
 = 
DCT_DESCALE
Ğ
r
*
cb_r
 + 
g
*
cb_g
 + 
b
*
cb_b
, 
fixc
 );

1358 
	gV
 = 
DCT_DESCALE
Ğ
r
*
ü_r
 + 
g
*
ü_g
 + 
b
*
ü_b
, 
fixc
 );

1360 ifĞ
	gcŞÜ¥aû
 =ğ
COLORSPACE_RGBA
 )

1362 
r
 = 
pix_d©a
[0];

1363 
	gg
 = 
pix_d©a
[1];

1364 
	gb
 = 
pix_d©a
[2];

1366 
	gY
 = 
DCT_DESCALE
Ğ
r
*
y_r
 + 
g
*
y_g
 + 
b
*
y_b
, 
fixc
) - 128;

1367 
	gU
 = 
DCT_DESCALE
Ğ
r
*
cb_r
 + 
g
*
cb_g
 + 
b
*
cb_b
, 
fixc
 );

1368 
	gV
 = 
DCT_DESCALE
Ğ
r
*
ü_r
 + 
g
*
ü_g
 + 
b
*
ü_b
, 
fixc
 );

1372 
	gY
 = 
pix_d©a
[0] - 128;

1373 
	gU
 = 
pix_d©a
[
v_¶ªe_ofs
] - 128;

1374 
	gV
 = 
pix_d©a
[
u_¶ªe_ofs
] - 128;

1377 
	gj2
 = 
j
 >> (
x_sÿË
 - 1);

1378 
	gY_d©a
[
j
] = ()
Y
;

1379 
	gUV_d©a
[
j2
] = ()(
UV_d©a
[j2] + 
U
);

1380 
	gUV_d©a
[
j2
 + 8] = ()(
UV_d©a
[j2 + 8] + 
V
);

1383 
	gpix_d©a
 -ğ
x_lim™
*
šput_chªÃls
;

1384 ifĞ((
	gi
+1è& (
	gy_sÿË
 - 1)) == 0 )

1386 
UV_d©a
 +ğ
UV_¡•
;

1395  
	gi
 = 0; i < 
	gy_lim™
; i++, 
	gpix_d©a
 +ğ
¡•
, 
	gY_d©a
 +ğ
Y_¡•
 )

1397  
j
 = 0; 
	gj
 < 
	gx_lim™
; j++ )

1398 
	gY_d©a
[
j
] = ()(
pix_d©a
[j]*4 - 128*4);

1402  
	gi
 = 0; i < 
	gblock_couÁ
; i++ )

1404 
	gis_chroma
 = 
i
 >ğ
luma_couÁ
;

1405 
	g¤c_¡•
 = 
x_sÿË
 * 8;

1406 
	grun
 = 0, 
	gv®
;

1407 cÚ¡ * 
	g¤c_±r
 = 
block
[
i
 & -2] + (i & 1)*8;

1408 cÚ¡ * 
	ghbË
 = 
huff_ac_b
[
is_chroma
];

1411 
¯n_fdù8x8
Ğ
¤c_±r
, 
bufãr
, 
¤c_¡•
, 
fdù_qb
[
is_chroma
] );

1414 
	gj
 = 
is_chroma
 + (
i
 > 
luma_couÁ
);

1415 
	gv®
 = 
bufãr
[0] - 
dc_´ed
[
j
];

1416 
	gdc_´ed
[
j
] = 
bufãr
[0];

1419 
	gÿt
 = 
ÿt_bË
[
v®
 + 
CAT_TAB_SIZE
];

1422 
JPUT_HUFF
Ğ
ÿt
, 
huff_dc_b
[
is_chroma
] );

1423 
JPUT_BITS
Ğ
v®
 - (v® < 0 ? 1 : 0), 
ÿt
 );

1426  
	gj
 = 1; j < 64; j++ )

1428 
	gv®
 = 
bufãr
[
zigzag
[
j
]];

1430 ifĞ
	gv®
 == 0 )

1432 
run
++;

1436  
	grun
 >= 16 )

1438 
JPUT_HUFF
Ğ0xF0, 
hbË
 );

1439 
	grun
 -= 16;

1443 
	gÿt
 = 
ÿt_bË
[
v®
 + 
CAT_TAB_SIZE
];

1445 
JPUT_HUFF
Ğ
ÿt
 + 
run
*16, 
hbË
 );

1446 
JPUT_BITS
Ğ
v®
 - (v® < 0 ? 1 : 0), 
ÿt
 );

1449 
	grun
 = 0;

1453 ifĞ
	grun
 )

1455 
JPUT_HUFF
Ğ0x00, 
hbË
 );

1462 
	g¡rm
.
jæush
(
cu¼v®
, 
b™_idx
);

1463 
	g¡rm
.
jputShÜt
( 0xFFD9 );

1467 
size_t
 
	gpos
 = 
¡rm
.
g‘Pos
();

1468 
size_t
 
	gpos1
 = (
pos
 + 3) & ~3;

1469  ; 
	gpos
 < 
	gpos1
;…os++ )

1470 
	g¡rm
.
putBy‹
(0);

1475 
	gPŒ
<
	gIVideoWr™”
> 
	$ü—‹MÙiÚJ³gWr™”
ĞcÚ¡ 
SŒšg
& 
f’ame
, 
ås
, 
Size
 
äameSize
, 
boŞ
 
iscŞÜ
 )

1477 
PŒ
<
IVideoWr™”
> 
iwr™”
 = 
makePŒ
<
mj³g
::
MÙiÚJ³gWr™”
>(
f’ame
, 
ås
, 
äameSize
, 
iscŞÜ
);

1478 ifĞ!
iwr™”
->
	`isO³Ãd
() )

1479 
iwr™”
.
	`»Ëa£
();

1480  
iwr™”
;

1481 
	}
}

	@cap_msmf.cpp

41 
	~"´ecomp.hµ
"

42 #ià(
defšed
 
WIN32
 || defšed 
_WIN32
è&& defšed 
HAVE_MSMF


51 #ià
WINVER
 < 
_WIN32_WINNT_WIN7


52 #undeà
WINVER


53 
	#WINVER
 
_WIN32_WINNT_WIN7


	)

55 #ià
defšed
 
_MSC_VER
 && _MSC_VER >= 1600

56 
	#HAVE_CONCURRENCY


	)

58 
	~<wšdows.h
>

59 
	~<guiddef.h
>

60 
	~<mfidl.h
>

61 
	~<Mçpi.h
>

62 
	~<måÏy.h
>

63 
	~<mfobjeùs.h
>

64 
	~<tch¬.h
>

65 
	~<¡r§ã.h
>

66 
	~<Mä—dwr™e.h
>

67 
	~<Ãw
>

68 
	~<m­
>

69 
	~<veùÜ
>

70 
	~<¡ršg
>

71 
	~<¡dio.h
>

72 
	~<¡d¬g.h
>

73 
	~<¡ršg.h
>

75 #ifdeà
_MSC_VER


76 #´agm¨
w¬nšg
(
di§bË
:4503)

77 #´agm¨
comm’t
(
lib
, "mfplat")

78 #´agm¨
comm’t
(
lib
, "mf")

79 #´agm¨
comm’t
(
lib
, "mfuuid")

80 #´agm¨
comm’t
(
lib
, "Strmiids")

81 #´agm¨
comm’t
(
lib
, "Mfreadwrite")

82 #ià(
WINVER
 >= 0x0602)

83 #´agm¨
comm’t
(
lib
, "MinCore_Downlevel")

87 
	~<mã¼Ü.h
>

89 #ifdeà
WINRT


91 
	~<w¾/ş›Á.h
>

92 #ifdeà
__ılu¥lus_wš¹


93 
	~<age.h
>

94 
	~<vccÜlib.h
>

97 
	~<w¾\async.h
>

98 
	~<w¾\im¶em’ts.h
>

99 
	~<w¾\moduË.h
>

100 
	~<w¾\w¿µ”s\cÜew¿µ”s.h
>

101 
	~<wšdows.medŸ.ÿ±u».h
>

102 
	~<wšdows.deviûs.’um”©iÚ.h
>

103 #ifdeà
HAVE_CONCURRENCY


104 
	~<cÚüt.h
>

105 #iâdeà
__ılu¥lus_wš¹


106 
	$__deş¥ec
(
nÜ‘uº
è
__¡dÿÎ
 
	`__abi_WšRT¿i£Exû±iÚ
();

108 
šlše
 
	$__abi_ThrowIfFaed
(
__hrArg
)

110 ià(
__hrArg
 < 0)

112 
	`__abi_WšRT¿i£Exû±iÚ
(
__hrArg
);

114 
	}
}

116 
	sGuid


118 
	mpublic
:

119 
Guid
();

120 
Guid
(
__rcGUID_t
);

121 
	mİ”©Ü
 ::
__rcGUID_t
();

122 
boŞ
 
Equ®s
(
Guid
 
__guidArg
);

123 
boŞ
 
Equ®s
(
__rcGUID_t
 
__guidArg
);

124 
Guid
(
__aArg
, 
__bArg
, 
__cArg
, 
__št8
 
__dArg
,

125 
__št8
 
__eArg
, __št8 
__fArg
, __št8 
__gArg
, __št8 
__hArg
,

126 
__št8
 
__iArg
, __št8 
__jArg
, __št8 
__kArg
);

127 
Guid
(
__aArg
, 
__bArg
, 
__cArg
, cÚ¡ 
__št8
* 
__dArg
);

128 
	m´iv©e
:

129 
__a
;

130 
	m__b
;

131 
	m__c
;

132 
	m__d
;

133 
	m__e
;

134 
	m__f
;

135 
	m__g
;

136 
	m__h
;

137 
	m__i
;

138 
	m__j
;

139 
	m__k
;

142 
¡©ic_as£¹
((
Guid
è=ğ(::
_GUID
), "Incorect size for Guid");

143 
¡©ic_as£¹
((
__rcGUID_t
è=ğ(::
_GUID
), "Incorect size for __rcGUID_t");

146 
šlše
 
	gGuid
::
	$Guid
(è: 
	`__a
(0), 
	`__b
(0), 
	`__c
(0), 
	`__d
(0), 
	`__e
(0), 
	`__f
(0), 
	`__g
(0), 
	`__h
(0), 
	`__i
(0), 
	`__j
(0), 
	$__k
(0)

148 
	}
}

150 
šlše
 
	gGuid
::
	$Guid
(
__rcGUID_t
 
__guid
) :

151 
	`__a
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a1
),

152 
	`__b
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a2
),

153 
	`__c
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a3
),

154 
	`__d
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[0]),

155 
	`__e
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[1]),

156 
	`__f
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[2]),

157 
	`__g
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[3]),

158 
	`__h
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[4]),

159 
	`__i
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[5]),

160 
	`__j
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[6]),

161 
	`__k
(
»š‹½»t_ÿ¡
<cÚ¡ 
__s_GUID
&>(
__guid
).
D©a4
[7])

163 
	}
}

165 
šlše
 
	gGuid
::
İ”©Ü
 ::
	$__rcGUID_t
()

167  
»š‹½»t_ÿ¡
<
__rcGUID_t
>(*
this
);

168 
	}
}

170 
šlše
 
boŞ
 
	gGuid
::
	$Equ®s
(
Guid
 
__guidArg
)

172  *
this
 =ğ
__guidArg
;

173 
	}
}

175 
šlše
 
boŞ
 
	gGuid
::
	$Equ®s
(
__rcGUID_t
 
__guidArg
)

177  *
this
 =ğ
¡©ic_ÿ¡
< 
Guid
>(
__guidArg
);

178 
	}
}

180 
šlše
 
boŞ
 
	gİ”©Ü
==(
Guid
 
__aArg
, Guid 
	g__bArg
)

182 autØ
	g__a
 = 
»š‹½»t_ÿ¡
<*>(&
__aArg
);

183 autØ
	g__b
 = 
»š‹½»t_ÿ¡
<*>(&
__bArg
);

185  (
	g__a
[0] =ğ
__b
[0] && 
__a
[1] == __b[1] && __a[2] == __b[2] && __a[3] == __b[3]);

188 
šlše
 
boŞ
 
	gİ”©Ü
!=(
Guid
 
__aArg
, Guid 
	g__bArg
)

190  !(
	g__aArg
 =ğ
__bArg
);

193 
šlše
 
boŞ
 
	gİ”©Ü
<(
Guid
 
	g__aArg
, Guid 
	g__bArg
)

195 autØ
	g__a
 = 
»š‹½»t_ÿ¡
<*>(&
__aArg
);

196 autØ
	g__b
 = 
»š‹½»t_ÿ¡
<*>(&
__bArg
);

198 ià(
	g__a
[0] !ğ
__b
[0])

200  
__a
[0] < 
__b
[0];

203 ià(
	g__a
[1] !ğ
__b
[1])

205  
__a
[1] < 
__b
[1];

208 ià(
	g__a
[2] !ğ
__b
[2])

210  
__a
[2] < 
__b
[2];

213 ià(
	g__a
[3] !ğ
__b
[3])

215  
__a
[3] < 
__b
[3];

218  
	gçl£
;

221 
šlše
 
	gGuid
::
	$Guid
(
__aArg
, 
__bArg
, 
__cArg
, 
__št8
 
__dArg
,

222 
__št8
 
__eArg
, __št8 
__fArg
, __št8 
__gArg
, __št8 
__hArg
,

223 
__št8
 
__iArg
, __št8 
__jArg
, __št8 
__kArg
) :

224 
	`__a
(
__aArg
), 
	`__b
(
__bArg
), 
	`__c
(
__cArg
), 
	`__d
(
__dArg
), 
	`__e
(
__eArg
), 
	`__f
(
__fArg
), 
	`__g
(
__gArg
), 
	`__h
(
__hArg
), 
	`__i
(
__iArg
), 
	`__j
(
__jArg
), 
	$__k
(
__kArg
)

226 
	}
}

228 
šlše
 
	gGuid
::
	$Guid
(
__aArg
, 
__bArg
, 
__cArg
, cÚ¡ 
__št8
 
__dArg
[8]) :

229 
	`__a
(
__aArg
), 
	`__b
(
__bArg
), 
	$__c
(
__cArg
)

231 
__d
 = 
__dArg
[0];

232 
__e
 = 
__dArg
[1];

233 
__f
 = 
__dArg
[2];

234 
__g
 = 
__dArg
[3];

235 
__h
 = 
__dArg
[4];

236 
__i
 = 
__dArg
[5];

237 
__j
 = 
__dArg
[6];

238 
__k
 = 
__dArg
[7];

239 
	}
}

241 
	$__deş¥ec
(
£Ëùªy
è
Guid
 
	`__wš¹_GUID_NULL
(0x00000000, 0x0000, 0x0000, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00);

254 
__š‹rçû
 
	`__deş¥ec
(
	`uuid
("00000000-0000-0000-C000-000000000046")è
__abi_IUnknown


256 
public
:

257 
vœtu®
 
__¡dÿÎ
 
	`__abi_Qu”yIÁ”çû
(
Guid
&, **) = 0;

258 
vœtu®
 
__¡dÿÎ
 
	`__abi_AddRef
() = 0;

259 
vœtu®
 
__¡dÿÎ
 
	`__abi_R–—£
() = 0;

260 
	}
};

262 
	~"µÉasks_wš¹.h
"

265 
	~<comdef.h
>

268 
	gIMFMedŸTy³
;

269 #iâdeà
WINRT


270 
	gIMFAùiv©e
;

271 
	gIMFMedŸSourû
;

273 
	gIMFA‰ribu‹s
;

275 
	gÇme¥aû


278 
	g‹m¶©e
 <
şass
 
	gT
> 
SaãR–—£
(
T
 **
µT
)

280 ià(*
	gµT
)

282 (*
	gµT
)->
R–—£
();

283 *
	gµT
 = 
NULL
;

287 #ifdeà
_DEBUG


289 şas 
	cDPO


291 
	gpublic
:

292 ~
DPO
();

293 
	gDPO
& 
g‘In¡ªû
();

294 
´štOut
(cÚ¡ 
wch¬_t
 *
fÜm©
, ...);

295 
£tV”bo£
(
boŞ
 
¡©e
);

296 
boŞ
 
	gv”bo£
;

297 
	g´iv©e
:

298 
DPO
();

300 
	#DebugPrštOut
(...è
DPO
::
	`g‘In¡ªû
().
	$´štOut
(
__VA_ARGS__
)

	)

302 
	#DebugPrštOut
(...è()

	)

305 
	~"ÿp_msmf.hµ
"

308 
	sMedŸTy³


310 
MF_MT_FRAME_SIZE
;

311 
height
;

312 
width
;

313 
MF_MT_YUV_MATRIX
;

314 
MF_MT_VIDEO_LIGHTING
;

315 
MF_MT_DEFAULT_STRIDE
;

316 
MF_MT_VIDEO_CHROMA_SITING
;

317 
GUID
 
MF_MT_AM_FORMAT_TYPE
;

318 
wch¬_t
 *
pMF_MT_AM_FORMAT_TYPEName
;

319 
MF_MT_FIXED_SIZE_SAMPLES
;

320 
MF_MT_VIDEO_NOMINAL_RANGE
;

321 
MF_MT_FRAME_RATE_NUMERATOR
;

322 
MF_MT_FRAME_RATE_DENOMINATOR
;

323 
MF_MT_PIXEL_ASPECT_RATIO
;

324 
MF_MT_PIXEL_ASPECT_RATIO_low
;

325 
MF_MT_ALL_SAMPLES_INDEPENDENT
;

326 
MF_MT_FRAME_RATE_RANGE_MIN
;

327 
MF_MT_FRAME_RATE_RANGE_MIN_low
;

328 
MF_MT_SAMPLE_SIZE
;

329 
MF_MT_VIDEO_PRIMARIES
;

330 
MF_MT_INTERLACE_MODE
;

331 
MF_MT_FRAME_RATE_RANGE_MAX
;

332 
MF_MT_FRAME_RATE_RANGE_MAX_low
;

333 
GUID
 
MF_MT_MAJOR_TYPE
;

334 
GUID
 
MF_MT_SUBTYPE
;

335 
wch¬_t
 *
pMF_MT_MAJOR_TYPEName
;

336 
wch¬_t
 *
pMF_MT_SUBTYPEName
;

337 
	`MedŸTy³
();

338 ~
	`MedŸTy³
();

339 
	`CË¬
();

340 
	}
};

343 şas 
	cFÜm©R—d”


345 
	gpublic
:

346 
MedŸTy³
 
R—d
(
IMFMedŸTy³
 *
pTy³
);

347 ~
FÜm©R—d”
();

348 
	g´iv©e
:

349 
FÜm©R—d”
();

352 
DWORD
 
WINAPI
 
MašTh»adFunùiÚ
Ğ
LPVOID
 
ÍP¬am
 );

353 (*
	tem”g’syStİEv’tC®lback
)(, *);

355 şas 
	cRawImage


357 
public
:

358 ~
	`RawImage
();

360 
	`C»©eIn¡ªû
(
RawImage
 **
µRImage
,
size
);

361 
	`£tCİy
(cÚ¡ 
BYTE
 * 
pSam¶eBufãr
);

362 
	`ç¡Cİy
(cÚ¡ 
BYTE
 * 
pSam¶eBufãr
);

363 * 
	`g‘pPix–s
();

364 
boŞ
 
	`isNew
();

365 
	`g‘Size
();

366 
´iv©e
:

367 
boŞ
 
ri_Ãw
;

368 
ri_size
;

369 *
ri_pix–s
;

370 
	`RawImage
(
size
);

371 
	}
};

373 şas 
	cImageG¿bb”C®lback
 : 
public
 
IMFSam¶eG¿bb”SškC®lback


375 
public
:

376 
·u£G¿bbšg
();

377 
»sumeG¿bbšg
();

378 
RawImage
 *
g‘RawImage
();

380 
STDMETHODIMP
 
OnClockS¹
(
MFTIME
 
hnsSy¡emTime
, 
LONGLONG
 
ÎClockS¹Off£t
);

381 
STDMETHODIMP
 
OnClockStİ
(
MFTIME
 
hnsSy¡emTime
);

382 
STDMETHODIMP
 
OnClockPau£
(
MFTIME
 
hnsSy¡emTime
);

383 
STDMETHODIMP
 
OnClockRe¡¬t
(
MFTIME
 
hnsSy¡emTime
);

384 
STDMETHODIMP
 
OnClockS‘R©e
(
MFTIME
 
hnsSy¡emTime
, 
æR©e
);

386 
STDMETHODIMP
 
OnS‘P»£Á©iÚClock
(
IMFP»£Á©iÚClock
* 
pClock
);

387 
STDMETHODIMP
 
OnProûssSam¶e
(
REFGUID
 
guidMajÜMedŸTy³
, 
DWORD
 
dwSam¶eFÏgs
,

388 
LONGLONG
 
ÎSam¶eTime
, LONGLONG 
ÎSam¶eDu¿tiÚ
, cÚ¡ 
BYTE
 * 
pSam¶eBufãr
,

389 
DWORD
 
dwSam¶eSize
);

390 
STDMETHODIMP
 
OnShutdown
();

392 cÚ¡ 
HANDLE
 
	gig_hF¿meR—dy
;

393 cÚ¡ 
HANDLE
 
	gig_hF¿meG¿bbed
;

394 cÚ¡ 
HANDLE
 
	gig_hFšish
;

395 
	g´Ùeùed
:

396 
ImageG¿bb”C®lback
(
boŞ
 
synchrÚous
);

397 
boŞ
 
	gig_RIE
;

398 
boŞ
 
	gig_Clo£
;

399 
boŞ
 
	gig_SynchrÚous
;

400 
	gm_cRef
;

402 
RawImage
 *
	gig_RIFœ¡
;

403 
RawImage
 *
	gig_RISecÚd
;

404 
RawImage
 *
	gig_RIOut
;

405 
	g´iv©e
:

406 
ImageG¿bb”C®lback
& 
İ”©Ü
=(const ImageGrabberCallback&);

409 #ifdeà
WINRT


410 cÚ¡ 
	$__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_CV_ImageG¿bb”WšRT
[] = 
L
"cv.ImageGrabberWinRT";

412 
şass
 
ImageG¿bb”WšRT
 :

413 
public
 
Miüosoá
::
WRL
::
RuÁimeCÏss
<

414 
Miüosoá
::
WRL
::
RuÁimeCÏssFÏgs
< Miüosoá::WRL::
RuÁimeCÏssTy³
::
WšRtCÏssicComMix
>,

415 
IMFSam¶eG¿bb”SškC®lback
>, 
public
 
ImageG¿bb”C®lback


417 
	`In¥eùabËCÏss
(
RuÁimeCÏss_CV_ImageG¿bb”WšRT
, 
Ba£Tru¡
)

418 
public
:

419 
	`ImageG¿bb”WšRT
(
boŞ
 
synchrÚous
);

420 ~
	`ImageG¿bb”WšRT
();

422 
HRESULT
 
	`š™ImageG¿bb”
(
	`MAKE_WRL_REF
(
_MedŸC­tu»
è
pSourû
,

423 
GUID
 
VideoFÜm©
);

424 
HRESULT
 
	`¡¬tG¿bbšg
(
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)* 
aùiÚ
);

425 
HRESULT
 
	`¡İG¿bbšg
(
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)* 
aùiÚ
);

427 
STDMETHODIMP
 
	`OnClockS¹
(
MFTIME
 
hnsSy¡emTime
, 
LONGLONG
 
ÎClockS¹Off£t
è{  
ImageG¿bb”C®lback
::OnClockStart(hnsSystemTime,†lClockStartOffset); }

428 
STDMETHODIMP
 
	`OnClockStİ
(
MFTIME
 
hnsSy¡emTime
è{  
ImageG¿bb”C®lback
::OnClockStop(hnsSystemTime); }

429 
STDMETHODIMP
 
	`OnClockPau£
(
MFTIME
 
hnsSy¡emTime
è{  
ImageG¿bb”C®lback
::OnClockPause(hnsSystemTime); }

430 
STDMETHODIMP
 
	`OnClockRe¡¬t
(
MFTIME
 
hnsSy¡emTime
è{  
ImageG¿bb”C®lback
::OnClockRestart(hnsSystemTime); }

431 
STDMETHODIMP
 
	`OnClockS‘R©e
(
MFTIME
 
hnsSy¡emTime
, 
æR©e
è{  
ImageG¿bb”C®lback
::OnClockSetRate(hnsSystemTime, flRate); }

433 
STDMETHODIMP
 
	`OnS‘P»£Á©iÚClock
(
IMFP»£Á©iÚClock
* 
pClock
è{  
ImageG¿bb”C®lback
::OnSetPresentationClock(pClock); }

434 
STDMETHODIMP
 
	`OnProûssSam¶e
(
REFGUID
 
guidMajÜMedŸTy³
, 
DWORD
 
dwSam¶eFÏgs
,

435 
LONGLONG
 
ÎSam¶eTime
, LONGLONG 
ÎSam¶eDu¿tiÚ
, cÚ¡ 
BYTE
 * 
pSam¶eBufãr
,

436 
DWORD
 
dwSam¶eSize
è{  
ImageG¿bb”C®lback
::
	`OnProûssSam¶e
(
guidMajÜMedŸTy³
, 
dwSam¶eFÏgs
, 
ÎSam¶eTime
, 
ÎSam¶eDu¿tiÚ
, 
pSam¶eBufãr
, dwSampleSize); }

437 
STDMETHODIMP
 
	`OnShutdown
(è{  
ImageG¿bb”C®lback
::OnShutdown(); }

439 
HRESULT
 
	`C»©eIn¡ªû
(
ImageG¿bb”WšRT
 **
µIG
, 
boŞ
 
synchrÚous
 = 
çl£
);

440 
´iv©e
:

441 
	`MAKE_WRL_AGILE_REF
(
_MedŸC­tu»
è
ig_pMedC­Sourû
;

442 
MedŸSšk
* 
ig_pMedŸSšk
;

443 
	}
};

447 şas 
	cImageG¿bb”
 : 
public
 
ImageG¿bb”C®lback


449 
public
:

450 ~
ImageG¿bb”
();

451 
HRESULT
 
š™ImageG¿bb”
(
IMFMedŸSourû
 *
pSourû
);

452 
HRESULT
 
¡¬tG¿bbšg
();

453 
¡İG¿bbšg
();

455 
STDMETHODIMP
 
Qu”yIÁ”çû
(
REFIID
 
iid
, ** 
µv
);

456 
STDMETHODIMP_
(
ULONG
è
AddRef
();

457 
STDMETHODIMP_
(
ULONG
è
R–—£
();

459 
HRESULT
 
C»©eIn¡ªû
(
ImageG¿bb”
 **
µIG
, 
deviûID
, 
boŞ
 
synchrÚous
 = 
çl£
);

461 
	g´iv©e
:

462 
ig_DeviûID
;

464 
IMFMedŸSourû
 *
	gig_pSourû
;

465 
IMFMedŸSessiÚ
 *
	gig_pSessiÚ
;

466 
IMFTİŞogy
 *
	gig_pTİŞogy
;

467 
ImageG¿bb”
(
deviûID
, 
boŞ
 
synchrÚous
);

468 
HRESULT
 
C»©eTİŞogy
(
IMFMedŸSourû
 *
pSourû
, 
IMFAùiv©e
 *
pSškAùiv©e
, 
IMFTİŞogy
 **
µTİo
);

469 
HRESULT
 
AddSourûNode
(
IMFTİŞogy
 *
pTİŞogy
, 
IMFMedŸSourû
 *
pSourû
,

470 
IMFP»£Á©iÚDesütÜ
 *
pPD
, 
IMFSŒ—mDesütÜ
 *
pSD
, 
IMFTİŞogyNode
 **
µNode
);

471 
HRESULT
 
AddOuutNode
(
IMFTİŞogy
 *
pTİŞogy
, 
IMFAùiv©e
 *
pAùiv©e
, 
DWORD
 
dwId
, 
IMFTİŞogyNode
 **
µNode
);

473 
	gImageG¿bb”
& 
	gİ”©Ü
=(cÚ¡ 
ImageG¿bb”
&);

477 şas 
	cImageG¿bb”Th»ad


479 
ä›nd
 
DWORD
 
WINAPI
 
MašTh»adFunùiÚ
Ğ
LPVOID
 
ÍP¬am
 );

480 
	gpublic
:

481 ~
ImageG¿bb”Th»ad
();

482 
HRESULT
 
C»©eIn¡ªû
(
ImageG¿bb”Th»ad
 **
µIGT
, 
IMFMedŸSourû
 *
pSourû
, 
deviûID
, 
boŞ
 
synchrÚious
 = 
çl£
);

483 
¡¬t
();

484 
¡İ
();

485 
£tEm”g’cyStİEv’t
(*
u£rD©a
, (*
func
)(, *));

486 
ImageG¿bb”
 *
g‘ImageG¿bb”
();

487 
	g´Ùeùed
:

488 
vœtu®
 
run
();

489 
	g´iv©e
:

490 
ImageG¿bb”Th»ad
(
IMFMedŸSourû
 *
pSourû
, 
deviûID
, 
boŞ
 
synchrÚious
);

491 
HANDLE
 
	gigt_HªdË
;

492 
DWORD
 
	gigt_Th»adIdA¼ay
;

493 
ImageG¿bb”
 *
	gigt_pImageG¿bb”
;

494 
em”g’syStİEv’tC®lback
 
	gigt_func
;

495 *
	gigt_u£rD©a
;

496 
boŞ
 
	gigt_¡İ
;

497 
	gigt_DeviûID
;

501 
	sP¬am‘r


503 
	gCu¼’tV®ue
;

504 
	gMš
;

505 
	gMax
;

506 
	gS‹p
;

507 
	gDeçuÉ
;

508 
	gFÏg
;

509 
P¬am‘r
();

513 
	sCamP¬am‘rs


515 
P¬am‘r
 
	gBrighŠess
;

516 
P¬am‘r
 
	gCÚŒa¡
;

517 
P¬am‘r
 
	gHue
;

518 
P¬am‘r
 
	gS©u¿tiÚ
;

519 
P¬am‘r
 
	gSh¬²ess
;

520 
P¬am‘r
 
	gGamma
;

521 
P¬am‘r
 
	gCŞÜEÇbË
;

522 
P¬am‘r
 
	gWh™eB®ªû
;

523 
P¬am‘r
 
	gBacklightCom³n§tiÚ
;

524 
P¬am‘r
 
	gGaš
;

525 
P¬am‘r
 
	gPª
;

526 
P¬am‘r
 
	gTt
;

527 
P¬am‘r
 
	gRŞl
;

528 
P¬am‘r
 
	gZoom
;

529 
P¬am‘r
 
	gExposu»
;

530 
P¬am‘r
 
	gIris
;

531 
P¬am‘r
 
	gFocus
;

534 
	g¡d
::
	tw¡ršg
 
	tSŒšg
;

535 
	g¡d
::
	tveùÜ
<> 
	tveùÜNum
;

536 
	g¡d
::
	tm­
<
	tSŒšg
, 
	tveùÜNum
> 
	tSUBTYPEM­
;

537 
	g¡d
::
	tm­
<
	tUINT64
, 
	tSUBTYPEM­
> 
	tF¿meR©eM­
;

538 (*
	tem”g’syStİEv’tC®lback
)(, *);

541 şas 
	cvideoDeviû


543 
public
:

544 
	`videoDeviû
();

545 ~
	`videoDeviû
();

546 
	`şo£Deviû
();

547 
CamP¬am‘rs
 
	`g‘P¬am‘rs
();

548 
	`£tP¬am‘rs
(
CamP¬am‘rs
 
·¿m‘rs
);

549 
	`£tEm”g’cyStİEv’t
(*
u£rD©a
, (*
func
)(, *));

550 #ifdeà
WINRT


551 
	`»adInfoOfDeviû
(
	`MAKE_WRL_REF
(
_IDeviûInfÜm©iÚ
è
pDeviû
, 
Num
);

552 
	`wa™FÜDeviû
()

554 ià(
vd_pAùiÚ
) {

555 #ifdeà
HAVE_CONCURRENCY


556 
CREATE_TASK
 
	`DEFINE_RET_TYPE
()(
vd_pAùiÚ
).
	`wa™
();

558 
vd_pAùiÚ
 = 
nuÎ±r
;

562 
	`»adInfoOfDeviû
(
IMFAùiv©e
 *
pAùiv©e
, 
Num
);

564 
wch¬_t
 *
	`g‘Name
();

565 
	`g‘CouÁFÜm©s
();

566 
	`g‘Width
();

567 
	`g‘Height
();

568 
	`g‘F¿meR©e
() const;

569 
MedŸTy³
 
	`g‘FÜm©
(
id
);

570 
boŞ
 
	`£tupDeviû
(
w
, 
h
, 
id—lF¿m”©e
 = 0);

571 
boŞ
 
	`£tupDeviû
(
id
);

572 
boŞ
 
	`isDeviûS‘up
();

573 
boŞ
 
	`isDeviûMedŸSourû
();

574 
boŞ
 
	`isDeviûRawD©aSourû
();

575 
boŞ
 
	`isF¿meNew
();

576 
IMFMedŸSourû
 *
	`g‘MedŸSourû
();

577 
RawImage
 *
	`g‘RawImageOut
();

578 
´iv©e
:

579 
	ety³Lock


581 
MedŸSourûLock
,

582 
RawD©aLock
,

583 
O³nLock


584 } 
vd_LockOut
;

585 
wch¬_t
 *
vd_pFr›ndlyName
;

586 
ImageG¿bb”Th»ad
 *
vd_pImGrTh
;

587 
CamP¬am‘rs
 
vd_P»vP¬am‘rs
;

588 
vd_Width
;

589 
vd_Height
;

590 
vd_F¿meR©e
;

591 
vd_Cu¼’tNumb”
;

592 
boŞ
 
vd_IsS‘u³d
;

593 
¡d
::
m­
<
UINT64
, 
F¿meR©eM­
> 
vd_C­tu»FÜm©s
;

594 
¡d
::
veùÜ
<
MedŸTy³
> 
vd_Cu¼’tFÜm©s
;

595 
IMFMedŸSourû
 *
vd_pSourû
;

596 #ifdeà
WINRT


597 
	`MAKE_WRL_AGILE_REF
(
_MedŸC­tu»
è
vd_pMedC­
;

598 
Ev’tRegi¡¿tiÚTok’
 
vd_cook›
;

599 
ImageG¿bb”WšRT
 *
vd_pImGr
;

600 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
vd_pAùiÚ
;

601 #ifdeà
HAVE_CONCURRENCY


602 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
 
vd_lock
;

605 
em”g’syStİEv’tC®lback
 
vd_func
;

606 *
vd_u£rD©a
;

607 
HRESULT
 
	`’um”©eC­tu»FÜm©s
(
IMFMedŸSourû
 *
pSourû
);

608 
	`£tDeviûFÜm©
(
IMFMedŸSourû
 *
pSourû
, 
dwFÜm©Index
);

609 
	`budLib¿ryofTy³s
();

610 
	`fšdTy³
(
size
, 
äameR©e
 = 0);

611 #ifdeà
WINRT


612 
HRESULT
 
	`’um”©eC­tu»FÜm©s
(
	`MAKE_WRL_REF
(
_MedŸC­tu»
è
pSourû
);

613 
	`£tDeviûFÜm©
(
	`MAKE_WRL_REF
(
_MedŸC­tu»
è
pSourû
, 
dwFÜm©Index
, MAKE_WRL_REF(
_AsyncAùiÚ
)* 
pAùiÚ
);

614 
	`»£tDeviû
(
	`MAKE_WRL_REF
(
_IDeviûInfÜm©iÚ
è
pDeviû
);

615 #ifdeà
HAVE_CONCURRENCY


616 
	`checkDeviû
(
_DeviûCÏss
 
devCÏss
, 
DEFINE_TASK
<>* 
pTask
, 
	`MAKE_WRL_REF
(
_IDeviûInfÜm©iÚ
)* 
µDeviû
);

619 
	`»£tDeviû
(
IMFAùiv©e
 *
pAùiv©e
);

620 
	`checkDeviû
(
IMFA‰ribu‹s
 *
pA‰ribu‹s
, 
IMFAùiv©e
 **
pDeviû
);

622 
	`š™Deviû
();

623 
	}
};

626 şas 
	cvideoDeviûs


628 
	gpublic
:

629 ~
videoDeviûs
();

630 #ifdeà
WINRT


631 
š™Deviûs
(
_DeviûCÏss
 
devCÏss
);

632 
wa™In™
() {

633 ià(
	gvds_’umTask
) {

634 #ifdeà
HAVE_CONCURRENCY


635 
CREATE_TASK
 
DEFINE_RET_TYPE
()(
	gvds_’umTask
).
wa™
();

637 
	gvds_’umTask
 = 
nuÎ±r
;

641 
š™Deviûs
(
IMFA‰ribu‹s
 *
pA‰ribu‹s
);

643 
	gvideoDeviûs
& 
g‘In¡ªû
();

644 
videoDeviû
 *
g‘Deviû
(
i
);

645 
g‘CouÁ
();

646 
ş—rDeviûs
();

647 
	g´iv©e
:

648 
UINT32
 
couÁ
;

649 #ifdeà
WINRT


650 
MAKE_WRL_REF
(
_AsyncAùiÚ
è
	gvds_’umTask
;

652 
	g¡d
::
veùÜ
<
videoDeviû
 *> 
vds_Deviûs
;

653 
videoDeviûs
();

657 şas 
	cMedŸ_Found©iÚ


659 
	gpublic
:

660 
vœtu®
 ~
MedŸ_Found©iÚ
();

661 
	gMedŸ_Found©iÚ
& 
g‘In¡ªû
();

662 
boŞ
 
budLi¡OfDeviûs
();

663 
	g´iv©e
:

664 
MedŸ_Found©iÚ
();

668 şas 
	cvideoIÅut


670 
	gpublic
:

671 
vœtu®
 ~
videoIÅut
();

673 
	gvideoIÅut
& 
g‘In¡ªû
();

675 
şo£Deviû
(
deviûID
);

677 
£tEm”g’cyStİEv’t
(
deviûID
, *
u£rD©a
, (*
func
)(, *));

679 
şo£AÎDeviûs
();

681 
CamP¬am‘rs
 
g‘P¬am‘rs
(
deviûID
);

683 
£tP¬am‘rs
(
deviûID
, 
CamP¬am‘rs
 
·¿m‘rs
);

685 
li¡Deviûs
(
boŞ
 
s’t
 = 
çl£
);

687 
g‘CouÁFÜm©s
(
deviûID
) const;

689 
g‘Width
(
deviûID
) const;

691 
g‘Height
(
deviûID
) const;

693 
g‘F¿meR©e
(
deviûID
) const;

695 
wch¬_t
 *
g‘NameVideoDeviû
(
deviûID
);

697 
IMFMedŸSourû
 *
g‘MedŸSourû
(
deviûID
);

699 
MedŸTy³
 
g‘FÜm©
(
deviûID
, 
id
);

701 
boŞ
 
isDeviûsAcûabË
();

703 
boŞ
 
isDeviûS‘up
(
deviûID
);

705 
boŞ
 
isDeviûMedŸSourû
(
deviûID
);

707 
boŞ
 
isDeviûRawD©aSourû
(
deviûID
);

708 #ifdeà
_DEBUG


710 
£tV”bo£
(
boŞ
 
¡©e
);

713 
boŞ
 
£tupDeviû
(
deviûID
, 
id
 = 0);

715 
boŞ
 
£tupDeviû
(
deviûID
, 
w
, 
h
, 
id—lF¿m”©e
 = 30);

717 
boŞ
 
isF¿meNew
(
deviûID
);

718 #ifdeà
WINRT


719 
wa™FÜDeviû
(
deviûID
);

722 
boŞ
 
g‘Pix–s
(
deviûID
, * 
pix–s
, boŞ 
æRedAndBlue
 = 
çl£
, boŞ 
æImage
 = false);

723 
´oûssPix–s
(* 
¤c
, * 
d¡
, 
width
, 
height
, 
bµ
, 
boŞ
 
bRGB
, boŞ 
bFl
);

724 
	g´iv©e
:

725 
boŞ
 
acûssToDeviûs
;

726 
videoIÅut
();

727 
upd©eLi¡OfDeviûs
();

730 #ifdeà
_DEBUG


731 
	gDPO
::
	$DPO
():
	$v”bo£
(
Œue
)

733 
	}
}

735 
DPO
::~
	$DPO
()

737 
	}
}

739 
DPO
& DPO::
	$g‘In¡ªû
()

741 
DPO
 
š¡ªû
;

742  
š¡ªû
;

743 
	}
}

745 
	gDPO
::
	$´štOut
(cÚ¡ 
wch¬_t
 *
fÜm©
, ...)

747 if(
v”bo£
)

749 
i
 = 0;

750 
wch¬_t
 *
p
 = 
NULL
;

751 
va_li¡
 
¬gs
;

752 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

753 ifĞ::
	`IsDebugg”P»£Á
() )

755 
WCHAR
 
szMsg
[512];

756 ::
	`SŒšgCchVPrštfW
(
szMsg
, (szMsg)/(szMsg[0]), 
fÜm©
, 
¬gs
);

757 ::
	`OuutDebugSŒšgW
(
szMsg
);

761 if(
	`wcscmp
(
fÜm©
, 
L
"%i"))

763 
i
 = 
	`va_¬g
 (
¬gs
, );

765 if(
	`wcscmp
(
fÜm©
, 
L
"%s"))

767 
p
 = 
	`va_¬g
 (
¬gs
, 
wch¬_t
 *);

769 
	`w´štf
(
fÜm©
, 
i
,
p
);

771 
	`va_’d
 (
¬gs
);

773 
	}
}

775 
	gDPO
::
	$£tV”bo£
(
boŞ
 
¡©e
)

777 
v”bo£
 = 
¡©e
;

778 
	}
}

781 
LPCWSTR
 
G‘GUIDNameCÚ¡New
(cÚ¡ 
GUID
& 
guid
);

782 
HRESULT
 
G‘GUIDNameNew
(cÚ¡ 
GUID
& 
guid
, 
WCHAR
 **
µwsz
);

783 
HRESULT
 
LogA‰ribu‹V®ueByIndexNew
(
IMFA‰ribu‹s
 *
pA‰r
, 
DWORD
 
šdex
);

784 
HRESULT
 
S³cŸlCa£A‰ribu‹V®ueNew
(
GUID
 
guid
, cÚ¡ 
PROPVARIANT
& 
v¬
, 
MedŸTy³
 &
out
);

786 *
	$G‘P¬am‘r
(
GUID
 
guid
, 
MedŸTy³
 &
out
)

788 if(
guid
 =ğ
MF_MT_YUV_MATRIX
)

789  &(
out
.
MF_MT_YUV_MATRIX
);

790 if(
guid
 =ğ
MF_MT_VIDEO_LIGHTING
)

791  &(
out
.
MF_MT_VIDEO_LIGHTING
);

792 if(
guid
 =ğ
MF_MT_DEFAULT_STRIDE
)

793  (*)&(
out
.
MF_MT_DEFAULT_STRIDE
);

794 if(
guid
 =ğ
MF_MT_VIDEO_CHROMA_SITING
)

795  &(
out
.
MF_MT_VIDEO_CHROMA_SITING
);

796 if(
guid
 =ğ
MF_MT_VIDEO_NOMINAL_RANGE
)

797  &(
out
.
MF_MT_VIDEO_NOMINAL_RANGE
);

798 if(
guid
 =ğ
MF_MT_ALL_SAMPLES_INDEPENDENT
)

799  &(
out
.
MF_MT_ALL_SAMPLES_INDEPENDENT
);

800 if(
guid
 =ğ
MF_MT_FIXED_SIZE_SAMPLES
)

801  &(
out
.
MF_MT_FIXED_SIZE_SAMPLES
);

802 if(
guid
 =ğ
MF_MT_SAMPLE_SIZE
)

803  &(
out
.
MF_MT_SAMPLE_SIZE
);

804 if(
guid
 =ğ
MF_MT_VIDEO_PRIMARIES
)

805  &(
out
.
MF_MT_VIDEO_PRIMARIES
);

806 if(
guid
 =ğ
MF_MT_INTERLACE_MODE
)

807  &(
out
.
MF_MT_INTERLACE_MODE
);

808  
NULL
;

809 
	}
}

811 
HRESULT
 
	$LogA‰ribu‹V®ueByIndexNew
(
IMFA‰ribu‹s
 *
pA‰r
, 
DWORD
 
šdex
, 
MedŸTy³
 &
out
)

813 
WCHAR
 *
pGuidName
 = 
NULL
;

814 
WCHAR
 *
pGuidV®Name
 = 
NULL
;

815 
GUID
 
guid
 = { 0 };

816 
PROPVARIANT
 
v¬
;

817 
	`PrİV¬ŸÁIn™
(&
v¬
);

818 
HRESULT
 
hr
 = 
pA‰r
->
	`G‘I‹mByIndex
(
šdex
, &
guid
, &
v¬
);

819 ià(
	`FAILED
(
hr
))

821 
dÚe
;

823 
hr
 = 
	`G‘GUIDNameNew
(
guid
, &
pGuidName
);

824 ià(
	`FAILED
(
hr
))

826 
dÚe
;

828 
hr
 = 
	`S³cŸlCa£A‰ribu‹V®ueNew
(
guid
, 
v¬
, 
out
);

829 *
p
;

830 ià(
	`FAILED
(
hr
))

832 
dÚe
;

834 ià(
hr
 =ğ
S_FALSE
)

836 
v¬
.
vt
)

838 
VT_UI4
:

839 
p
 = 
	`G‘P¬am‘r
(
guid
, 
out
);

840 if(
p
)

842 *
p
 = 
v¬
.
ulV®
;

845 
VT_UI8
:

847 
VT_R8
:

849 
VT_CLSID
:

850 if(
guid
 =ğ
MF_MT_AM_FORMAT_TYPE
)

852 
hr
 = 
	`G‘GUIDNameNew
(*
v¬
.
puuid
, &
pGuidV®Name
);

853 ià(
	`SUCCEEDED
(
hr
))

855 
out
.
MF_MT_AM_FORMAT_TYPE
 = *
v¬
.
puuid
;

856 
out
.
pMF_MT_AM_FORMAT_TYPEName
 = 
pGuidV®Name
;

857 
pGuidV®Name
 = 
NULL
;

860 if(
guid
 =ğ
MF_MT_MAJOR_TYPE
)

862 
hr
 = 
	`G‘GUIDNameNew
(*
v¬
.
puuid
, &
pGuidV®Name
);

863 ià(
	`SUCCEEDED
(
hr
))

865 
out
.
MF_MT_MAJOR_TYPE
 = *
v¬
.
puuid
;

866 
out
.
pMF_MT_MAJOR_TYPEName
 = 
pGuidV®Name
;

867 
pGuidV®Name
 = 
NULL
;

870 if(
guid
 =ğ
MF_MT_SUBTYPE
)

872 
hr
 = 
	`G‘GUIDNameNew
(*
v¬
.
puuid
, &
pGuidV®Name
);

873 ià(
	`SUCCEEDED
(
hr
))

875 
out
.
MF_MT_SUBTYPE
 = *
v¬
.
puuid
;

876 
out
.
pMF_MT_SUBTYPEName
 = 
pGuidV®Name
;

877 
pGuidV®Name
 = 
NULL
;

881 
VT_LPWSTR
:

883 
VT_VECTOR
 | 
VT_UI1
:

885 
VT_UNKNOWN
:

891 
dÚe
:

892 
	`CoTaskMemF»e
(
pGuidName
);

893 
	`CoTaskMemF»e
(
pGuidV®Name
);

894 
	`PrİV¬ŸÁCË¬
(&
v¬
);

895  
hr
;

896 
	}
}

898 
HRESULT
 
	$G‘GUIDNameNew
(cÚ¡ 
GUID
& 
guid
, 
WCHAR
 **
µwsz
)

900 
HRESULT
 
hr
 = 
S_OK
;

901 
WCHAR
 *
pName
 = 
NULL
;

902 
LPCWSTR
 
pcwsz
 = 
	`G‘GUIDNameCÚ¡New
(
guid
);

903 ià(
pcwsz
)

905 
size_t
 
cchL’gth
 = 0;

906 
hr
 = 
	`SŒšgCchL’gthW
(
pcwsz
, 
STRSAFE_MAX_CCH
, &
cchL’gth
);

907 ià(
	`FAILED
(
hr
))

909 
dÚe
;

911 
pName
 = (
WCHAR
*)
	`CoTaskMemAÎoc
((
cchL’gth
 + 1) * (WCHAR));

912 ià(
pName
 =ğ
NULL
)

914 
hr
 = 
E_OUTOFMEMORY
;

915 
dÚe
;

917 
hr
 = 
	`SŒšgCchCİyW
(
pName
, 
cchL’gth
 + 1, 
pcwsz
);

918 ià(
	`FAILED
(
hr
))

920 
dÚe
;

925 
hr
 = 
	`SŒšgFromCLSID
(
guid
, &
pName
);

927 
dÚe
:

928 ià(
	`FAILED
(
hr
))

930 *
µwsz
 = 
NULL
;

931 
	`CoTaskMemF»e
(
pName
);

935 *
µwsz
 = 
pName
;

937  
hr
;

938 
	}
}

940 
	$LogUINT32AsUINT64New
(cÚ¡ 
PROPVARIANT
& 
v¬
, 
UINT32
 &
uHigh
, UINT32 &
uLow
)

942 
	`UÅack2UINT32AsUINT64
(
v¬
.
uhV®
.
QuadP¬t
, &
uHigh
, &
uLow
);

943 
	}
}

945 
	$Off£tToFlßtNew
(cÚ¡ 
MFOff£t
& 
off£t
)

947  
off£t
.
v®ue
 + (
¡©ic_ÿ¡
<>(off£t.
äaù
) / 65536.0f);

948 
	}
}

950 
HRESULT
 
	$LogVideoA»aNew
(cÚ¡ 
PROPVARIANT
& 
v¬
)

952 ià(
v¬
.
ÿub
.
cEËms
 < (
MFVideoA»a
))

954  
S_OK
;

956  
S_OK
;

957 
	}
}

959 
HRESULT
 
	$S³cŸlCa£A‰ribu‹V®ueNew
(
GUID
 
guid
, cÚ¡ 
PROPVARIANT
& 
v¬
, 
MedŸTy³
 &
out
)

961 ià(
guid
 =ğ
MF_MT_DEFAULT_STRIDE
)

963 
out
.
MF_MT_DEFAULT_STRIDE
 = 
v¬
.
štV®
;

965 ià(
guid
 =ğ
MF_MT_FRAME_SIZE
)

967 
UINT32
 
uHigh
 = 0, 
uLow
 = 0;

968 
	`LogUINT32AsUINT64New
(
v¬
, 
uHigh
, 
uLow
);

969 
out
.
width
 = 
uHigh
;

970 
out
.
height
 = 
uLow
;

971 
out
.
MF_MT_FRAME_SIZE
 = out.
width
 * out.
height
;

974 ià(
guid
 =ğ
MF_MT_FRAME_RATE
)

976 
UINT32
 
uHigh
 = 0, 
uLow
 = 0;

977 
	`LogUINT32AsUINT64New
(
v¬
, 
uHigh
, 
uLow
);

978 
out
.
MF_MT_FRAME_RATE_NUMERATOR
 = 
uHigh
;

979 
out
.
MF_MT_FRAME_RATE_DENOMINATOR
 = 
uLow
;

982 ià(
guid
 =ğ
MF_MT_FRAME_RATE_RANGE_MAX
)

984 
UINT32
 
uHigh
 = 0, 
uLow
 = 0;

985 
	`LogUINT32AsUINT64New
(
v¬
, 
uHigh
, 
uLow
);

986 
out
.
MF_MT_FRAME_RATE_RANGE_MAX
 = 
uHigh
;

987 
out
.
MF_MT_FRAME_RATE_RANGE_MAX_low
 = 
uLow
;

990 ià(
guid
 =ğ
MF_MT_FRAME_RATE_RANGE_MIN
)

992 
UINT32
 
uHigh
 = 0, 
uLow
 = 0;

993 
	`LogUINT32AsUINT64New
(
v¬
, 
uHigh
, 
uLow
);

994 
out
.
MF_MT_FRAME_RATE_RANGE_MIN
 = 
uHigh
;

995 
out
.
MF_MT_FRAME_RATE_RANGE_MIN_low
 = 
uLow
;

998 ià(
guid
 =ğ
MF_MT_PIXEL_ASPECT_RATIO
)

1000 
UINT32
 
uHigh
 = 0, 
uLow
 = 0;

1001 
	`LogUINT32AsUINT64New
(
v¬
, 
uHigh
, 
uLow
);

1002 
out
.
MF_MT_PIXEL_ASPECT_RATIO
 = 
uHigh
;

1003 
out
.
MF_MT_PIXEL_ASPECT_RATIO_low
 = 
uLow
;

1007  
S_FALSE
;

1009  
S_OK
;

1010 
	}
}

1012 #iâdeà
IF_EQUAL_RETURN


1013 
	#IF_EQUAL_RETURN
(
·¿m
, 
v®
èif(v® =ğ·¿mè 
L
#v®

	)

1016 
LPCWSTR
 
	$G‘GUIDNameCÚ¡New
(cÚ¡ 
GUID
& 
guid
)

1018 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MAJOR_TYPE
);

1019 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MAJOR_TYPE
);

1020 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_SUBTYPE
);

1021 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_ALL_SAMPLES_INDEPENDENT
);

1022 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_FIXED_SIZE_SAMPLES
);

1023 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_COMPRESSED
);

1024 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_SAMPLE_SIZE
);

1025 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_WRAPPED_TYPE
);

1026 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_NUM_CHANNELS
);

1027 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_SAMPLES_PER_SECOND
);

1028 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_FLOAT_SAMPLES_PER_SECOND
);

1029 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_AVG_BYTES_PER_SECOND
);

1030 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_BLOCK_ALIGNMENT
);

1031 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_BITS_PER_SAMPLE
);

1032 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_VALID_BITS_PER_SAMPLE
);

1033 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_SAMPLES_PER_BLOCK
);

1034 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_CHANNEL_MASK
);

1035 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_FOLDDOWN_MATRIX
);

1036 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_WMADRC_PEAKREF
);

1037 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_WMADRC_PEAKTARGET
);

1038 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_WMADRC_AVGREF
);

1039 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_WMADRC_AVGTARGET
);

1040 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AUDIO_PREFER_WAVEFORMATEX
);

1041 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AAC_PAYLOAD_TYPE
);

1042 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AAC_AUDIO_PROFILE_LEVEL_INDICATION
);

1043 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_FRAME_SIZE
);

1044 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_FRAME_RATE
);

1045 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_FRAME_RATE_RANGE_MAX
);

1046 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_FRAME_RATE_RANGE_MIN
);

1047 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_PIXEL_ASPECT_RATIO
);

1048 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DRM_FLAGS
);

1049 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_PAD_CONTROL_FLAGS
);

1050 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_SOURCE_CONTENT_HINT
);

1051 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_VIDEO_CHROMA_SITING
);

1052 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_INTERLACE_MODE
);

1053 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_TRANSFER_FUNCTION
);

1054 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_VIDEO_PRIMARIES
);

1055 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_CUSTOM_VIDEO_PRIMARIES
);

1056 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_YUV_MATRIX
);

1057 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_VIDEO_LIGHTING
);

1058 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_VIDEO_NOMINAL_RANGE
);

1059 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_GEOMETRIC_APERTURE
);

1060 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MINIMUM_DISPLAY_APERTURE
);

1061 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_PAN_SCAN_APERTURE
);

1062 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_PAN_SCAN_ENABLED
);

1063 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AVG_BITRATE
);

1064 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AVG_BIT_ERROR_RATE
);

1065 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MAX_KEYFRAME_SPACING
);

1066 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DEFAULT_STRIDE
);

1067 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_PALETTE
);

1068 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_USER_DATA
);

1069 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_AM_FORMAT_TYPE
);

1070 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG_START_TIME_CODE
);

1071 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG2_PROFILE
);

1072 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG2_LEVEL
);

1073 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG2_FLAGS
);

1074 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG_SEQUENCE_HEADER
);

1075 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DV_AAUX_SRC_PACK_0
);

1076 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DV_AAUX_CTRL_PACK_0
);

1077 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DV_AAUX_SRC_PACK_1
);

1078 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DV_AAUX_CTRL_PACK_1
);

1079 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DV_VAUX_SRC_PACK
);

1080 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_DV_VAUX_CTRL_PACK
);

1081 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_ARBITRARY_HEADER
);

1082 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_ARBITRARY_FORMAT
);

1083 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_IMAGE_LOSS_TOLERANT
);

1084 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG4_SAMPLE_DESCRIPTION
);

1085 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_MPEG4_CURRENT_SAMPLE_ENTRY
);

1086 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_ORIGINAL_4CC
);

1087 
	`IF_EQUAL_RETURN
(
guid
, 
MF_MT_ORIGINAL_WAVE_FORMAT_TAG
);

1089 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_Audio
);

1090 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_Video
);

1091 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_PrÙeùed
);

1092 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_SAMI
);

1093 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_Süt
);

1094 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_Image
);

1095 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_HTML
);

1096 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_Bš¬y
);

1097 
	`IF_EQUAL_RETURN
(
guid
, 
MFMedŸTy³_FeT¿nsãr
);

1098 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_AI44
);

1099 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_ARGB32
);

1100 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_AYUV
);

1101 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_DV25
);

1102 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_DV50
);

1103 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_DVH1
);

1104 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_DVSD
);

1105 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_DVSL
);

1106 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_H264
);

1107 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_I420
);

1108 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_IYUV
);

1109 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_M4S2
);

1110 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MJPG
);

1111 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MP43
);

1112 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MP4S
);

1113 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MP4V
);

1114 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MPG1
);

1115 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MSS1
);

1116 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_MSS2
);

1117 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_NV11
);

1118 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_NV12
);

1119 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_P010
);

1120 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_P016
);

1121 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_P210
);

1122 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_P216
);

1123 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_RGB24
);

1124 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_RGB32
);

1125 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_RGB555
);

1126 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_RGB565
);

1127 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_RGB8
);

1128 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_UYVY
);

1129 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_v210
);

1130 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_v410
);

1131 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_WMV1
);

1132 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_WMV2
);

1133 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_WMV3
);

1134 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_WVC1
);

1135 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_Y210
);

1136 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_Y216
);

1137 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_Y410
);

1138 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_Y416
);

1139 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_Y41P
);

1140 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_Y41T
);

1141 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_YUY2
);

1142 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_YV12
);

1143 
	`IF_EQUAL_RETURN
(
guid
, 
MFVideoFÜm©_YVYU
);

1144 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_PCM
);

1145 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_Flßt
);

1146 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_DTS
);

1147 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_DŞby_AC3_SPDIF
);

1148 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_DRM
);

1149 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_WMAudioV8
);

1150 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_WMAudioV9
);

1151 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_WMAudio_Los¦ess
);

1152 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_WMASPDIF
);

1153 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_MSP1
);

1154 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_MP3
);

1155 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_MPEG
);

1156 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_AAC
);

1157 
	`IF_EQUAL_RETURN
(
guid
, 
MFAudioFÜm©_ADTS
);

1158  
NULL
;

1159 
	}
}

1161 
	gFÜm©R—d”
::
	$FÜm©R—d”
()

1163 
	}
}

1165 
MedŸTy³
 
FÜm©R—d”
::
	$R—d
(
IMFMedŸTy³
 *
pTy³
)

1167 
UINT32
 
couÁ
 = 0;

1168 
MedŸTy³
 
out
;

1169 
HRESULT
 
hr
 = 
pTy³
->
	`LockStÜe
();

1170 ià(
	`FAILED
(
hr
))

1172  
out
;

1174 
hr
 = 
pTy³
->
	`G‘CouÁ
(&
couÁ
);

1175 ià(
	`FAILED
(
hr
))

1177  
out
;

1179 
UINT32
 
i
 = 0; i < 
couÁ
; i++)

1181 
hr
 = 
	`LogA‰ribu‹V®ueByIndexNew
(
pTy³
, 
i
, 
out
);

1182 ià(
	`FAILED
(
hr
))

1187 
hr
 = 
pTy³
->
	`UÆockStÜe
();

1188 ià(
	`FAILED
(
hr
))

1190  
out
;

1192  
out
;

1193 
	}
}

1195 
	gFÜm©R—d”
::~
	$FÜm©R—d”
()

1197 
	}
}

1199 
	#CHECK_HR
(
x
èià(
	$FAILED
(
x
)è{ 
dÚe
; 
	}

	)
}

1201 
	gImageG¿bb”C®lback
::
	$ImageG¿bb”C®lback
(
boŞ
 
synchrÚous
):

1202 
	`m_cRef
(1),

1203 
	`ig_RIE
(
Œue
),

1204 
	`ig_Clo£
(
çl£
),

1205 
	`ig_SynchrÚous
(
synchrÚous
),

1206 
	`ig_hF¿meR—dy
(
synchrÚous
 ? 
	$C»©eEv’t
(
NULL
, 
FALSE
, FALSE, NULL): 0),

1207 
	`ig_hF¿meG¿bbed
(
synchrÚous
 ? 
	$C»©eEv’t
(
NULL
, 
FALSE
, 
TRUE
, NULL): 0),

1208 
	`ig_hFšish
(
	$C»©eEv’t
(
NULL
, 
TRUE
, 
FALSE
, NULL))

1209 {
	}
}

1211 
	gImageG¿bb”
::
	$ImageG¿bb”
(
deviûID
, 
boŞ
 
synchrÚous
):

1212 
	`ImageG¿bb”C®lback
(
synchrÚous
),

1213 
	`ig_DeviûID
(
deviûID
),

1214 
	`ig_pSourû
(
NULL
),

1215 
	`ig_pSessiÚ
(
NULL
),

1216 
	$ig_pTİŞogy
(
NULL
)

1217 {
	}
}

1219 
	gImageG¿bb”
::~
	$ImageG¿bb”
()

1221 ià(
ig_pSessiÚ
)

1223 
ig_pSessiÚ
->
	`Shutdown
();

1226 
	`Clo£HªdË
(
ig_hFšish
);

1228 ià(
ig_SynchrÚous
)

1230 
	`Clo£HªdË
(
ig_hF¿meR—dy
);

1231 
	`Clo£HªdË
(
ig_hF¿meG¿bbed
);

1234 
	`SaãR–—£
(&
ig_pSessiÚ
);

1235 
	`SaãR–—£
(&
ig_pTİŞogy
);

1237 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: De¡royšg in¡ªû oàthImageG¿bb” cÏss\n", 
ig_DeviûID
);

1238 
	}
}

1240 #ifdeà
WINRT


1242 
	gImageG¿bb”WšRT
::
	$ImageG¿bb”WšRT
(
boŞ
 
synchrÚous
):

1243 
	`ImageG¿bb”C®lback
(
synchrÚous
),

1244 
	$ig_pMedŸSšk
(
NULL
)

1246 
ig_pMedC­Sourû
 = 
nuÎ±r
;

1247 
	}
}

1249 
	gImageG¿bb”WšRT
::~
	$ImageG¿bb”WšRT
()

1252 ià(
ig_pMedŸSšk
 !ğ
NULL
) {

1253 ((
IMFMedŸSšk
*)
ig_pMedŸSšk
)->
	`Shutdown
();

1255 
	`SaãR–—£
(&
ig_pMedŸSšk
);

1256 
	`RELEASE_AGILE_WRL
(
ig_pMedC­Sourû
)

1258 
	`Clo£HªdË
(
ig_hFšish
);

1260 ià(
ig_SynchrÚous
)

1262 
	`Clo£HªdË
(
ig_hF¿meR—dy
);

1263 
	`Clo£HªdË
(
ig_hF¿meG¿bbed
);

1266 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE: Destroying instance ofhe ImageGrabberWinRT class\n");

1267 
	}
}

1269 
HRESULT
 
	gImageG¿bb”WšRT
::
š™ImageG¿bb”
(
	$MAKE_WRL_REF
(
_MedŸC­tu»
è
pSourû
,

1270 
GUID
 
VideoFÜm©
)

1272 
HRESULT
 
hr
;

1273 
	`MAKE_WRL_OBJ
(
_VideoDeviûCÚŒŞËr
è
pDevCÚt
;

1274 
	`WRL_PROP_GET
(
pSourû
, 
VideoDeviûCÚŒŞËr
, 
pDevCÚt
, 
hr
)

1275 ià(
	`FAILED
(
hr
))  hr;

1276 
	`GET_WRL_OBJ_FROM_OBJ
(
_MedŸDeviûCÚŒŞËr
, 
pMedDevCÚt
, 
pDevCÚt
, 
hr
)

1277 ià(
	`FAILED
(
hr
))  hr;

1278 
	`MAKE_WRL_OBJ
(
_MedŸEncodšgPrİ”t›s
è
pMedEncPrİs
;

1279 
	`WRL_METHOD
(
pMedDevCÚt
, 
G‘MedŸSŒ—mPrİ”t›s
, 
pMedEncPrİs
, 
hr
, 
	`WRL_ENUM_GET
(
_MedŸSŒ—mTy³
, 
MedŸSŒ—mTy³
, 
VideoP»v›w
))

1280 ià(
	`FAILED
(
hr
))  hr;

1281 
	`GET_WRL_OBJ_FROM_OBJ
(
_VideoEncodšgPrİ”t›s
, 
pVidPrİs
, 
pMedEncPrİs
, 
hr
);

1282 ià(
	`FAILED
(
hr
))  hr;

1283 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
 = 
NULL
;

1284 
hr
 = 
MedŸSšk
::
	`CÚv”tPrİ”t›sToMedŸTy³
(
	`DEREF_AS_NATIVE_WRL_OBJ
(
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s
, 
pMedEncPrİs
), &
pTy³
);

1285 ià(
	`FAILED
(
hr
))  hr;

1286 
MedŸTy³
 
MT
 = 
FÜm©R—d”
::
	`R—d
(
pTy³
.
	`G‘
());

1287 
sizeRawImage
 = 0;

1288 if(
VideoFÜm©
 =ğ
MFVideoFÜm©_RGB24
)

1290 
sizeRawImage
 = 
MT
.
MF_MT_FRAME_SIZE
 * 3;

1292 if(
VideoFÜm©
 =ğ
MFVideoFÜm©_RGB32
)

1294 
sizeRawImage
 = 
MT
.
MF_MT_FRAME_SIZE
 * 4;

1296 
sizeRawImage
 = 
MT
.
MF_MT_SAMPLE_SIZE
;

1297 
	`CHECK_HR
(
hr
 = 
RawImage
::
	`C»©eIn¡ªû
(&
ig_RIFœ¡
, 
sizeRawImage
));

1298 
	`CHECK_HR
(
hr
 = 
RawImage
::
	`C»©eIn¡ªû
(&
ig_RISecÚd
, 
sizeRawImage
));

1299 
ig_RIOut
 = 
ig_RISecÚd
;

1300 
ig_pMedC­Sourû
 = 
pSourû
;

1301 
dÚe
:

1302  
hr
;

1303 
	}
}

1305 
HRESULT
 
	gImageG¿bb”WšRT
::
¡İG¿bbšg
(
MAKE_WRL_REF
(
_AsyncAùiÚ
)* 
aùiÚ
)

1307 
HRESULT
 
hr
 = 
S_OK
;

1308 ià(
	gig_pMedC­Sourû
 !ğ
nuÎ±r
) {

1309 
GET_WRL_OBJ_FROM_REF
(
_MedŸC­tu»VideoP»v›w
, 
imedP»vC­
, 
DEREF_AGILE_WRL_OBJ
(
ig_pMedC­Sourû
), 
hr
)

1310 ià(
FAILED
(
hr
))  hr;

1311 
MAKE_WRL_REF
(
_AsyncAùiÚ
è
	gpAùiÚ
;

1312 
WRL_METHOD_BASE
(
imedP»vC­
, 
StİP»v›wAsync
, 
pAùiÚ
, 
hr
)

1313 ià(
SUCCEEDED
(
hr
)) {

1314 #ifdeà
HAVE_CONCURRENCY


1315 
	gDEFINE_TASK
<> 
	g_sk
 = 
CREATE_TASK
 
DEFINE_RET_TYPE
()(
pAùiÚ
);

1316 *
	gaùiÚ
 = 
»š‹½»t_ÿ¡
<
MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
BEGIN_CREATE_ASYNC
(, 
_sk
, 
this
)

1317 
HRESULT
 
	ghr
 = 
S_OK
;

1318 
	g_sk
.
wa™
();

1319 
SaãR–—£
(&
ig_pMedŸSšk
);

1320 
S‘Ev’t
(
ig_hFšish
);

1321 
END_CREATE_ASYNC
(
hr
));

1323 *
	gaùiÚ
 = 
nuÎ±r
;

1327  
	ghr
;

1330 
HRESULT
 
	gImageG¿bb”WšRT
::
¡¬tG¿bbšg
(
MAKE_WRL_REF
(
_AsyncAùiÚ
)* 
aùiÚ
)

1332 
HRESULT
 
hr
 = 
S_OK
;

1333 
GET_WRL_OBJ_FROM_REF
(
_MedŸC­tu»VideoP»v›w
, 
imedP»vC­
, 
DEREF_AGILE_WRL_OBJ
(
ig_pMedC­Sourû
), 
hr
)

1334 ià(
FAILED
(
hr
)è 
	ghr
;

1335 
ACTIVATE_OBJ
(
RuÁimeCÏss_Wšdows_Found©iÚ_CŞËùiÚs_Prİ”tyS‘
, 
_Prİ”tyS‘
, 
pS‘
, 
hr
)

1336 ià(
FAILED
(
hr
)è 
	ghr
;

1337 
GET_WRL_OBJ_FROM_OBJ
(
_M­
, 
¥S‘tšg
, 
pS‘
, 
hr
)

1338 ià(
FAILED
(
hr
)è 
	ghr
;

1339 
ACTIVATE_STATIC_OBJ
(
RuÁimeCÏss_Wšdows_Found©iÚ_Prİ”tyV®ue
, 
MAKE_WRL_OBJ
(
_Prİ”tyV®ueStics
), 
¥PrİV®
, 
hr
)

1340 ià(
FAILED
(
hr
)è 
	ghr
;

1341 
_ObjeùObj
 
	gpV®
;

1342 
boŞ—n
 
	gbR•Ïûd
;

1343 
WRL_METHOD
(
¥PrİV®
, 
C»©eUIÁ32
, 
pV®
, 
hr
, ()
WRL_ENUM_GET
(
_MedŸSŒ—mTy³
, 
MedŸSŒ—mTy³
, 
VideoP»v›w
))

1344 ià(
FAILED
(
hr
)è 
	ghr
;

1345 
WRL_METHOD
(
¥S‘tšg
, 
In£¹
, 
bR•Ïûd
, 
hr
, 
DEREF_WRL_OBJ
(
_SŒšgReã»nû
(
MF_PROP_VIDTYPE
)), DEREF_WRL_OBJ(
pV®
))

1346 ià(
FAILED
(
hr
)è 
	ghr
;

1347 
WRL_METHOD
(
¥S‘tšg
, 
In£¹
, 
bR•Ïûd
, 
hr
, 
DEREF_WRL_OBJ
(
_SŒšgReã»nû
(
MF_PROP_SAMPLEGRABBERCALLBACK
)), 
»š‹½»t_ÿ¡
<
_Objeù
>(
this
))

1348 ià(
FAILED
(
hr
)è 
	ghr
;

1349 
MAKE_WRL_OBJ
(
_VideoDeviûCÚŒŞËr
è
	gpDevCÚt
;

1350 
WRL_PROP_GET
(
ig_pMedC­Sourû
, 
VideoDeviûCÚŒŞËr
, 
pDevCÚt
, 
hr
)

1351 ià(
FAILED
(
hr
)è 
	ghr
;

1352 
GET_WRL_OBJ_FROM_OBJ
(
_MedŸDeviûCÚŒŞËr
, 
pMedDevCÚt
, 
pDevCÚt
, 
hr
)

1353 ià(
FAILED
(
hr
)è 
	ghr
;

1354 
MAKE_WRL_OBJ
(
_MedŸEncodšgPrİ”t›s
è
	gpMedEncPrİs
;

1355 
WRL_METHOD
(
pMedDevCÚt
, 
G‘MedŸSŒ—mPrİ”t›s
, 
pMedEncPrİs
, 
hr
, 
WRL_ENUM_GET
(
_MedŸSŒ—mTy³
, 
MedŸSŒ—mTy³
, 
VideoP»v›w
))

1356 ià(
FAILED
(
hr
)è 
	ghr
;

1357 
GET_WRL_OBJ_FROM_OBJ
(
_VideoEncodšgPrİ”t›s
, 
pVidPrİs
, 
pMedEncPrİs
, 
hr
);

1358 ià(
FAILED
(
hr
)è 
	ghr
;

1359 
ACTIVATE_OBJ
(
RuÁimeCÏss_Wšdows_MedŸ_MedŸPrİ”t›s_MedŸEncodšgProfe
, 
_MedŸEncodšgProfe
, 
pEncPrİs
, 
hr
)

1360 ià(
FAILED
(
hr
)è 
	ghr
;

1361 
WRL_PROP_PUT
(
pEncPrİs
, 
Video
, 
DEREF_WRL_OBJ
(
pVidPrİs
), 
hr
)

1362 ià(
FAILED
(
hr
)è 
	ghr
;

1363 
WRL_METHOD
(
¥S‘tšg
, 
In£¹
, 
bR•Ïûd
, 
hr
, 
DEREF_WRL_OBJ
(
_SŒšgReã»nû
(
MF_PROP_VIDENCPROPS
)), DEREF_WRL_OBJ(
pVidPrİs
))

1364 ià(
SUCCEEDED
(
hr
)) {

1366 
WRL_METHOD
(
imedP»vC­
, 
_S¹P»v›wToCu¡omSškIdAsync
, *
aùiÚ
, 
hr
, 
DEREF_WRL_OBJ
(
pEncPrİs
), DEREF_WRL_OBJ(
_SŒšgReã»nû
(
RuÁimeCÏss_CV_MedŸSšk
)), DEREF_WRL_OBJ(
pS‘
))

1367 ià(
FAILED
(
hr
è&& 
	ghr
 =ğ
REGDB_E_CLASSNOTREG
) {

1368 
hr
 = 
Miüosoá
::
WRL
::
Make
<
MedŸSšk
>().
CİyTo
(&
ig_pMedŸSšk
);

1369 ià(
FAILED
(
hr
)è 
	ghr
;

1370 
	ghr
 = ((
ABI
::
Wšdows
::
MedŸ
::
IMedŸEx‹nsiÚ
*)
ig_pMedŸSšk
)->
S‘Prİ”t›s
(
DEREF_AS_NATIVE_WRL_OBJ
(ABI::Wšdows::
Found©iÚ
::
CŞËùiÚs
::
IPrİ”tyS‘
, 
pS‘
));

1371 ià(
FAILED
(
hr
)è 
	ghr
;

1372 
WRL_METHOD
(
imedP»vC­
, 
S¹P»v›wToCu¡omSškAsync
, *
aùiÚ
, 
hr
, 
DEREF_WRL_OBJ
(
pEncPrİs
), 
»š‹½»t_ÿ¡
<
MAKE_WRL_REF
(
_MedŸEx‹nsiÚ
)>(
ig_pMedŸSšk
))

1375  
	ghr
;

1378 
HRESULT
 
	gImageG¿bb”WšRT
::
	$C»©eIn¡ªû
(
ImageG¿bb”WšRT
 **
µIG
, 
boŞ
 
synchrÚous
)

1380 *
µIG
 = 
Miüosoá
::
WRL
::
Make
<
ImageG¿bb”WšRT
>(
synchrÚous
).
	`D‘ach
();

1381 ià(
µIG
 =ğ
NULL
)

1383  
E_OUTOFMEMORY
;

1385 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE: Creating instance of ImageGrabberWinRT\n");

1386  
S_OK
;

1387 
	}
}

1390 
HRESULT
 
	gImageG¿bb”
::
	$š™ImageG¿bb”
(
IMFMedŸSourû
 *
pSourû
)

1392 
_ComPŒ
<
IMFAùiv©e
> 
pSškAùiv©e
 = 
NULL
;

1393 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
 = 
NULL
;

1394 
_ComPŒ
<
IMFP»£Á©iÚDesütÜ
> 
pPD
 = 
NULL
;

1395 
_ComPŒ
<
IMFSŒ—mDesütÜ
> 
pSD
 = 
NULL
;

1396 
_ComPŒ
<
IMFMedŸTy³HªdËr
> 
pHªdËr
 = 
NULL
;

1397 
_ComPŒ
<
IMFMedŸTy³
> 
pCu¼’tTy³
 = 
NULL
;

1398 
MedŸTy³
 
MT
;

1400 ià(
ig_pSessiÚ
)

1402 
ig_pSessiÚ
->
	`Shutdown
();

1404 
	`SaãR–—£
(&
ig_pSessiÚ
);

1405 
	`SaãR–—£
(&
ig_pTİŞogy
);

1406 
ig_pSourû
 = 
pSourû
;

1407 
HRESULT
 
hr
 = 
pSourû
->
	`C»©eP»£Á©iÚDesütÜ
(&
pPD
);

1408 ià(
	`FAILED
(
hr
))

1410 
”r
;

1412 
BOOL
 
fS–eùed
;

1413 
hr
 = 
pPD
->
	`G‘SŒ—mDesütÜByIndex
(0, &
fS–eùed
, &
pSD
);

1414 ià(
	`FAILED
(
hr
)) {

1415 
”r
;

1417 
hr
 = 
pSD
->
	`G‘MedŸTy³HªdËr
(&
pHªdËr
);

1418 ià(
	`FAILED
(
hr
)) {

1419 
”r
;

1421 
DWORD
 
cTy³s
 = 0;

1422 
hr
 = 
pHªdËr
->
	`G‘MedŸTy³CouÁ
(&
cTy³s
);

1423 ià(
	`FAILED
(
hr
)) {

1424 
”r
;

1426 if(
cTy³s
 > 0)

1428 
hr
 = 
pHªdËr
->
	`G‘Cu¼’tMedŸTy³
(&
pCu¼’tTy³
);

1429 ià(
	`FAILED
(
hr
)) {

1430 
”r
;

1432 
MT
 = 
FÜm©R—d”
::
	`R—d
(
pCu¼’tTy³
.
	`G‘
());

1434 
”r
:

1435 
	`CHECK_HR
(
hr
);

1436 
	`CHECK_HR
(
hr
 = 
RawImage
::
	`C»©eIn¡ªû
(&
ig_RIFœ¡
, 
MT
.
MF_MT_SAMPLE_SIZE
));

1437 
	`CHECK_HR
(
hr
 = 
RawImage
::
	`C»©eIn¡ªû
(&
ig_RISecÚd
, 
MT
.
MF_MT_SAMPLE_SIZE
));

1438 
ig_RIOut
 = 
ig_RISecÚd
;

1442 
	`CHECK_HR
(
hr
 = 
	`MFC»©eMedŸTy³
(
pTy³
.
	`G‘Add»ssOf
()));

1443 
	`CHECK_HR
(
hr
 = 
pTy³
->
	`S‘GUID
(
MF_MT_MAJOR_TYPE
, 
MT
.MF_MT_MAJOR_TYPE));

1444 
	`CHECK_HR
(
hr
 = 
pTy³
->
	`S‘GUID
(
MF_MT_SUBTYPE
, 
MT
.MF_MT_SUBTYPE));

1446 
	`CHECK_HR
(
hr
 = 
	`MFC»©eSam¶eG¿bb”SškAùiv©e
(
pTy³
.
	`G‘
(), 
this
, 
pSškAùiv©e
.
	`G‘Add»ssOf
()));

1448 
	`CHECK_HR
(
hr
 = 
pSškAùiv©e
->
	`S‘UINT32
(
MF_SAMPLEGRABBERSINK_IGNORE_CLOCK
, 
TRUE
));

1450 
	`CHECK_HR
(
hr
 = 
	`MFC»©eMedŸSessiÚ
(
NULL
, &
ig_pSessiÚ
));

1452 
	`CHECK_HR
(
hr
 = 
	`C»©eTİŞogy
(
pSourû
, 
pSškAùiv©e
.
	`G‘
(), &
ig_pTİŞogy
));

1453 
dÚe
:

1455 ià(
	`FAILED
(
hr
))

1457 ià(
ig_pSessiÚ
)

1459 
ig_pSessiÚ
->
	`Shutdown
();

1461 
	`SaãR–—£
(&
ig_pSessiÚ
);

1462 
	`SaãR–—£
(&
ig_pTİŞogy
);

1464  
hr
;

1465 
	}
}

1467 
	gImageG¿bb”
::
	$¡İG¿bbšg
()

1469 if(
ig_pSessiÚ
)

1470 
ig_pSessiÚ
->
	`Stİ
();

1471 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: Stİpšg oàoàg¿bbšg oàimages\n", 
ig_DeviûID
);

1472 
	}
}

1474 
HRESULT
 
	gImageG¿bb”
::
	$¡¬tG¿bbšg
()

1476 
PROPVARIANT
 
v¬
;

1477 
	`PrİV¬ŸÁIn™
(&
v¬
);

1478 
HRESULT
 
hr
 = 
ig_pSessiÚ
->
	`S‘TİŞogy
(0, 
ig_pTİŞogy
);

1479 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: S¹ G¿bbšg oàthimages\n", 
ig_DeviûID
);

1480 
hr
 = 
ig_pSessiÚ
->
	`S¹
(&
GUID_NULL
, &
v¬
);

1483 
_ComPŒ
<
IMFMedŸEv’t
> 
pEv’t
 = 
NULL
;

1484 
HRESULT
 
hrStus
 = 
S_OK
;

1485 
MedŸEv’tTy³
 
m‘
;

1486 if(!
ig_pSessiÚ
) ;

1487 
hr
 = 
ig_pSessiÚ
->
	`G‘Ev’t
(0, &
pEv’t
);

1488 if(!
	`SUCCEEDED
(
hr
))

1490 
hr
 = 
S_OK
;

1491 
dÚe
;

1493 
hr
 = 
pEv’t
->
	`G‘Stus
(&
hrStus
);

1494 if(!
	`SUCCEEDED
(
hr
))

1496 
hr
 = 
S_OK
;

1497 
dÚe
;

1499 
hr
 = 
pEv’t
->
	`G‘Ty³
(&
m‘
);

1500 if(!
	`SUCCEEDED
(
hr
))

1502 
hr
 = 
S_OK
;

1503 
dÚe
;

1505 ià(
m‘
 =ğ
MESessiÚEnded
)

1507 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: MESessiÚEnded\n", 
ig_DeviûID
);

1508 
ig_pSessiÚ
->
	`Stİ
();

1511 ià(
m‘
 =ğ
MESessiÚStİ³d
)

1513 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: MESessiÚStİ³d \n", 
ig_DeviûID
);

1516 #ià(
WINVER
 >= 0x0602)

1517 ià(
m‘
 =ğ
MEVideoC­tu»DeviûRemoved
)

1519 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: MEVideoC­tu»DeviûRemoved \n", 
ig_DeviûID
);

1523 ià((
m‘
 =ğ
MEE¼Ü
è|| (m‘ =ğ
MENÚF©®E¼Ü
))

1525 
pEv’t
->
	`G‘Stus
(&
hrStus
);

1526 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: MEE¼Ü | MENÚF©®E¼Ü: %u\n", 
ig_DeviûID
, 
hrStus
);

1530 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: Fšish s¹G¿bbšg \n", 
ig_DeviûID
);

1532 
dÚe
:

1533 
	`S‘Ev’t
(
ig_hFšish
);

1535  
hr
;

1536 
	}
}

1538 
	gImageG¿bb”C®lback
::
	$·u£G¿bbšg
()

1540 
	}
}

1542 
ImageG¿bb”C®lback
::
	$»sumeG¿bbšg
()

1544 
	}
}

1546 
HRESULT
 
ImageG¿bb”
::
	$C»©eTİŞogy
(
IMFMedŸSourû
 *
pSourû
, 
IMFAùiv©e
 *
pSškAùiv©e
, 
IMFTİŞogy
 **
µTİo
)

1548 
IMFTİŞogy
* 
pTİŞogy
 = 
NULL
;

1549 
_ComPŒ
<
IMFP»£Á©iÚDesütÜ
> 
pPD
 = 
NULL
;

1550 
_ComPŒ
<
IMFSŒ—mDesütÜ
> 
pSD
 = 
NULL
;

1551 
_ComPŒ
<
IMFMedŸTy³HªdËr
> 
pHªdËr
 = 
NULL
;

1552 
_ComPŒ
<
IMFTİŞogyNode
> 
pNode1
 = 
NULL
;

1553 
_ComPŒ
<
IMFTİŞogyNode
> 
pNode2
 = 
NULL
;

1554 
HRESULT
 
hr
 = 
S_OK
;

1555 
DWORD
 
cSŒ—ms
 = 0;

1556 
	`CHECK_HR
(
hr
 = 
	`MFC»©eTİŞogy
(&
pTİŞogy
));

1557 
	`CHECK_HR
(
hr
 = 
pSourû
->
	`C»©eP»£Á©iÚDesütÜ
(
pPD
.
	`G‘Add»ssOf
()));

1558 
	`CHECK_HR
(
hr
 = 
pPD
->
	`G‘SŒ—mDesütÜCouÁ
(&
cSŒ—ms
));

1559 
DWORD
 
i
 = 0; i < 
cSŒ—ms
; i++)

1562 
BOOL
 
fS–eùed
 = 
FALSE
;

1563 
GUID
 
majÜTy³
;

1564 
	`CHECK_HR
(
hr
 = 
pPD
->
	`G‘SŒ—mDesütÜByIndex
(
i
, &
fS–eùed
, &
pSD
));

1565 
	`CHECK_HR
(
hr
 = 
pSD
->
	`G‘MedŸTy³HªdËr
(&
pHªdËr
));

1566 
	`CHECK_HR
(
hr
 = 
pHªdËr
->
	`G‘MajÜTy³
(&
majÜTy³
));

1567 ià(
majÜTy³
 =ğ
MFMedŸTy³_Video
 && 
fS–eùed
)

1569 
	`CHECK_HR
(
hr
 = 
	`AddSourûNode
(
pTİŞogy
, 
pSourû
, 
pPD
.
	`G‘
(), 
pSD
.G‘(), 
pNode1
.
	`G‘Add»ssOf
()));

1570 
	`CHECK_HR
(
hr
 = 
	`AddOuutNode
(
pTİŞogy
, 
pSškAùiv©e
, 0, 
pNode2
.
	`G‘Add»ssOf
()));

1571 
	`CHECK_HR
(
hr
 = 
pNode1
->
	`CÚÃùOuut
(0, 
pNode2
.
	`G‘
(), 0));

1576 
	`CHECK_HR
(
hr
 = 
pPD
->
	`De£ËùSŒ—m
(
i
));

1579 *
µTİo
 = 
pTİŞogy
;

1580 (*
µTİo
)->
	`AddRef
();

1582 
dÚe
:

1583  
hr
;

1584 
	}
}

1586 
HRESULT
 
	gImageG¿bb”
::
	$AddSourûNode
(

1587 
IMFTİŞogy
 *
pTİŞogy
,

1588 
IMFMedŸSourû
 *
pSourû
,

1589 
IMFP»£Á©iÚDesütÜ
 *
pPD
,

1590 
IMFSŒ—mDesütÜ
 *
pSD
,

1591 
IMFTİŞogyNode
 **
µNode
)

1593 
_ComPŒ
<
IMFTİŞogyNode
> 
pNode
 = 
NULL
;

1594 
HRESULT
 
hr
 = 
S_OK
;

1595 
	`CHECK_HR
(
hr
 = 
	`MFC»©eTİŞogyNode
(
MF_TOPOLOGY_SOURCESTREAM_NODE
, 
pNode
.
	`G‘Add»ssOf
()));

1596 
	`CHECK_HR
(
hr
 = 
pNode
->
	`S‘Unknown
(
MF_TOPONODE_SOURCE
, 
pSourû
));

1597 
	`CHECK_HR
(
hr
 = 
pNode
->
	`S‘Unknown
(
MF_TOPONODE_PRESENTATION_DESCRIPTOR
, 
pPD
));

1598 
	`CHECK_HR
(
hr
 = 
pNode
->
	`S‘Unknown
(
MF_TOPONODE_STREAM_DESCRIPTOR
, 
pSD
));

1599 
	`CHECK_HR
(
hr
 = 
pTİŞogy
->
	`AddNode
(
pNode
.
	`G‘
()));

1601 *
µNode
 = 
pNode
.
	`G‘
();

1602 (*
µNode
)->
	`AddRef
();

1604 
dÚe
:

1605  
hr
;

1606 
	}
}

1608 
HRESULT
 
	gImageG¿bb”
::
	$AddOuutNode
(

1609 
IMFTİŞogy
 *
pTİŞogy
,

1610 
IMFAùiv©e
 *
pAùiv©e
,

1611 
DWORD
 
dwId
,

1612 
IMFTİŞogyNode
 **
µNode
)

1614 
_ComPŒ
<
IMFTİŞogyNode
> 
pNode
 = 
NULL
;

1615 
HRESULT
 
hr
 = 
S_OK
;

1616 
	`CHECK_HR
(
hr
 = 
	`MFC»©eTİŞogyNode
(
MF_TOPOLOGY_OUTPUT_NODE
, 
pNode
.
	`G‘Add»ssOf
()));

1617 
	`CHECK_HR
(
hr
 = 
pNode
->
	`S‘Objeù
(
pAùiv©e
));

1618 
	`CHECK_HR
(
hr
 = 
pNode
->
	`S‘UINT32
(
MF_TOPONODE_STREAMID
, 
dwId
));

1619 
	`CHECK_HR
(
hr
 = 
pNode
->
	`S‘UINT32
(
MF_TOPONODE_NOSHUTDOWN_ON_REMOVE
, 
FALSE
));

1620 
	`CHECK_HR
(
hr
 = 
pTİŞogy
->
	`AddNode
(
pNode
.
	`G‘
()));

1622 *
µNode
 = 
pNode
.
	`G‘
();

1623 (*
µNode
)->
	`AddRef
();

1625 
dÚe
:

1626  
hr
;

1627 
	}
}

1629 
HRESULT
 
	gImageG¿bb”
::
	$C»©eIn¡ªû
(
ImageG¿bb”
 **
µIG
, 
deviûID
, 
boŞ
 
synchrÚious
)

1631 *
µIG
 = 
	`Ãw
 (
¡d
::
nÙhrow
è
	`ImageG¿bb”
(
deviûID
, 
synchrÚious
);

1632 ià(
µIG
 =ğ
NULL
)

1634  
E_OUTOFMEMORY
;

1636 
	`DebugPrštOut
(
L
"IMAGEGRABBER VIDEODEVICE %i: C»©šg in¡ªû oàImageG¿bb”\n", 
deviûID
);

1637  
S_OK
;

1638 
	}
}

1640 
STDMETHODIMP
 
	gImageG¿bb”
::
	$Qu”yIÁ”çû
(
REFIID
 
riid
, ** 
µv
)

1642 
HRESULT
 
hr
 = 
E_NOINTERFACE
;

1643 *
µv
 = 
NULL
;

1644 if(
riid
 =ğ
IID_IUnknown
 ||„iid =ğ
IID_IMFSam¶eG¿bb”SškC®lback
)

1646 *
µv
 = 
¡©ic_ÿ¡
<
IMFSam¶eG¿bb”SškC®lback
 *>(
this
);

1647 
hr
 = 
S_OK
;

1649 if(
riid
 =ğ
IID_IMFClockS‹Sšk
)

1651 *
µv
 = 
¡©ic_ÿ¡
<
IMFClockS‹Sšk
 *>(
this
);

1652 
hr
 = 
S_OK
;

1654 if(
	`SUCCEEDED
(
hr
))

1656 
»š‹½»t_ÿ¡
<
IUnknown
 *>(*
µv
)->
	`AddRef
();

1658  
hr
;

1659 
	}
}

1661 
	$STDMETHODIMP_
(
ULONG
è
ImageG¿bb”
::
	$AddRef
()

1663  
	`IÁ”lockedInüem’t
(&
m_cRef
);

1664 
	}
}

1666 
	$STDMETHODIMP_
(
ULONG
è
ImageG¿bb”
::
	$R–—£
()

1668 
ULONG
 
cRef
 = 
	`IÁ”lockedDeüem’t
(&
m_cRef
);

1669 ià(
cRef
 == 0)

1671 
d–‘e
 
this
;

1673  
cRef
;

1674 
	}
}

1676 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnClockS¹
(
MFTIME
 
hnsSy¡emTime
, 
LONGLONG
 
ÎClockS¹Off£t
)

1678 ()
hnsSy¡emTime
;

1679 ()
ÎClockS¹Off£t
;

1680  
S_OK
;

1681 
	}
}

1683 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnClockStİ
(
MFTIME
 
hnsSy¡emTime
)

1685 ()
hnsSy¡emTime
;

1686  
S_OK
;

1687 
	}
}

1689 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnClockPau£
(
MFTIME
 
hnsSy¡emTime
)

1691 ()
hnsSy¡emTime
;

1692  
S_OK
;

1693 
	}
}

1695 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnClockRe¡¬t
(
MFTIME
 
hnsSy¡emTime
)

1697 ()
hnsSy¡emTime
;

1698  
S_OK
;

1699 
	}
}

1701 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnClockS‘R©e
(
MFTIME
 
hnsSy¡emTime
, 
æR©e
)

1703 ()
æR©e
;

1704 ()
hnsSy¡emTime
;

1705  
S_OK
;

1706 
	}
}

1708 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnS‘P»£Á©iÚClock
(
IMFP»£Á©iÚClock
* 
pClock
)

1710 ()
pClock
;

1711  
S_OK
;

1712 
	}
}

1714 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnProûssSam¶e
(
REFGUID
 
guidMajÜMedŸTy³
, 
DWORD
 
dwSam¶eFÏgs
,

1715 
LONGLONG
 
ÎSam¶eTime
, LONGLONG 
ÎSam¶eDu¿tiÚ
, cÚ¡ 
BYTE
 * 
pSam¶eBufãr
,

1716 
DWORD
 
dwSam¶eSize
)

1718 ()
guidMajÜMedŸTy³
;

1719 ()
ÎSam¶eTime
;

1720 ()
dwSam¶eFÏgs
;

1721 ()
ÎSam¶eDu¿tiÚ
;

1722 ()
dwSam¶eSize
;

1724 
HANDLE
 
tmp
[] = {
ig_hFšish
, 
ig_hF¿meG¿bbed
, 
NULL
};

1726 
DWORD
 
¡©us
 = 
	`Wa™FÜMuÉËObjeùs
(2, 
tmp
, 
FALSE
, 
INFINITE
);

1727 ià(
¡©us
 =ğ
WAIT_OBJECT_0
)

1729 
	`DebugPrštOut
(
L
"OnProcessFrame called‡fter ig_hFinishƒvent\n");

1730  
S_OK
;

1733 if(
ig_RIE
)

1735 
ig_RIFœ¡
->
	`ç¡Cİy
(
pSam¶eBufãr
);

1736 
ig_RIOut
 = 
ig_RIFœ¡
;

1740 
ig_RISecÚd
->
	`ç¡Cİy
(
pSam¶eBufãr
);

1741 
ig_RIOut
 = 
ig_RISecÚd
;

1744 ià(
ig_SynchrÚous
)

1746 
	`S‘Ev’t
(
ig_hF¿meR—dy
);

1750 
ig_RIE
 = !ig_RIE;

1753  
S_OK
;

1754 
	}
}

1756 
STDMETHODIMP
 
	gImageG¿bb”C®lback
::
	$OnShutdown
()

1758 
	`S‘Ev’t
(
ig_hFšish
);

1759  
S_OK
;

1760 
	}
}

1762 
RawImage
 *
	gImageG¿bb”C®lback
::
	$g‘RawImage
()

1764  
ig_RIOut
;

1765 
	}
}

1767 
DWORD
 
WINAPI
 
	$MašTh»adFunùiÚ
Ğ
LPVOID
 
ÍP¬am
 )

1769 
ImageG¿bb”Th»ad
 *
pIGT
 = (ImageG¿bb”Th»ad *)
ÍP¬am
;

1770 
pIGT
->
	`run
();

1772 
	}
}

1774 
HRESULT
 
	gImageG¿bb”Th»ad
::
	$C»©eIn¡ªû
(
ImageG¿bb”Th»ad
 **
µIGT
, 
IMFMedŸSourû
 *
pSourû
, 
deviûID
, 
boŞ
 
synchrÚious
)

1776 *
µIGT
 = 
	`Ãw
 (
¡d
::
nÙhrow
è
	`ImageG¿bb”Th»ad
(
pSourû
, 
deviûID
, 
synchrÚious
);

1777 ià(
µIGT
 =ğ
NULL
)

1779 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: MemÜy cªnÙ b®loÿ‹d\n", 
deviûID
);

1780  
E_OUTOFMEMORY
;

1783 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: C»©šg oàthš¡ªû oàImageG¿bb”Th»ad\n", 
deviûID
);

1784  
S_OK
;

1785 
	}
}

1787 
	gImageG¿bb”Th»ad
::
	$ImageG¿bb”Th»ad
(
IMFMedŸSourû
 *
pSourû
, 
deviûID
, 
boŞ
 
synchrÚious
) :

1788 
	`igt_func
(
NULL
),

1789 
	`igt_HªdË
(
NULL
),

1790 
	$igt_¡İ
(
çl£
)

1792 
HRESULT
 
hr
 = 
ImageG¿bb”
::
	`C»©eIn¡ªû
(&
igt_pImageG¿bb”
, 
deviûID
, 
synchrÚious
);

1793 
igt_DeviûID
 = 
deviûID
;

1794 if(
	`SUCCEEDED
(
hr
))

1796 
hr
 = 
igt_pImageG¿bb”
->
	`š™ImageG¿bb”
(
pSourû
);

1797 if(!
	`SUCCEEDED
(
hr
))

1799 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: Th”i ¨´obËm w™h in™Ÿliz©iÚ oàthš¡ªû oàthImageG¿bb” cÏss\n", 
deviûID
);

1803 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: In™Ÿliz©iÚ oàš¡ªû oàthImageG¿bb” cÏss\n", 
deviûID
);

1808 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: Th”i ¨´obËm w™h c»©iÚ oàthš¡ªû oàthImageG¿bb” cÏss\n", 
deviûID
);

1810 
	}
}

1812 
	gImageG¿bb”Th»ad
::
£tEm”g’cyStİEv’t
(*
u£rD©a
, (*
func
)(, *))

1814 if(
func
)

1816 
igt_func
 = 
func
;

1817 
igt_u£rD©a
 = 
u£rD©a
;

1819 
	}
}

1821 
	gImageG¿bb”Th»ad
::~
	$ImageG¿bb”Th»ad
()

1823 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: De¡rošg ImageG¿bb”Th»ad\n", 
igt_DeviûID
);

1824 ià(
igt_HªdË
)

1825 
	`Wa™FÜSšgËObjeù
(
igt_HªdË
, 
INFINITE
);

1826 
d–‘e
 
igt_pImageG¿bb”
;

1827 
	}
}

1829 
	gImageG¿bb”Th»ad
::
	$¡İ
()

1831 
igt_¡İ
 = 
Œue
;

1832 if(
igt_pImageG¿bb”
)

1834 
igt_pImageG¿bb”
->
	`¡İG¿bbšg
();

1836 
	}
}

1838 
	gImageG¿bb”Th»ad
::
	$¡¬t
()

1840 
igt_HªdË
 = 
	`C»©eTh»ad
(

1841 
NULL
,

1843 
MašTh»adFunùiÚ
,

1844 
this
,

1846 &
igt_Th»adIdA¼ay
);

1847 
	}
}

1849 
	gImageG¿bb”Th»ad
::
	$run
()

1851 if(
igt_pImageG¿bb”
)

1853 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: Th»ad fÜ g¿bbšg image i ¡¬‹d\n", 
igt_DeviûID
);

1854 
HRESULT
 
hr
 = 
igt_pImageG¿bb”
->
	`¡¬tG¿bbšg
();

1855 if(!
	`SUCCEEDED
(
hr
))

1857 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: Th”i ¨´obËm w™h s¹šgh´oûs oàg¿bbšg\n", 
igt_DeviûID
);

1862 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %˜Thth»ad i fšished w™houˆexecutiÚ oàg¿bbšg\n", 
igt_DeviûID
);

1864 if(!
igt_¡İ
)

1866 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: Em”g’cy Stİh»ad\n", 
igt_DeviûID
);

1867 if(
igt_func
)

1869 
	`igt_func
(
igt_DeviûID
, 
igt_u£rD©a
);

1873 
	`DebugPrštOut
(
L
"IMAGEGRABBERTHREAD VIDEODEVICE %i: Fšishh»ad\n", 
igt_DeviûID
);

1874 
	}
}

1876 
ImageG¿bb”
 *
	gImageG¿bb”Th»ad
::
	$g‘ImageG¿bb”
()

1878  
igt_pImageG¿bb”
;

1879 
	}
}

1881 
	gMedŸ_Found©iÚ
::
	$MedŸ_Found©iÚ
()

1883 
HRESULT
 
hr
 = 
	`MFS¹up
(
MF_VERSION
);

1884 if(!
	`SUCCEEDED
(
hr
))

1886 
	`DebugPrštOut
(
L
"MEDIA FOUNDATION: It cannot be created!!!\n");

1888 
	}
}

1890 
	gMedŸ_Found©iÚ
::~
	$MedŸ_Found©iÚ
()

1892 
HRESULT
 
hr
 = 
	`MFShutdown
();

1893 if(!
	`SUCCEEDED
(
hr
))

1895 
	`DebugPrštOut
(
L
"MEDIA FOUNDATION: Resources cannot be„eleased\n");

1897 
	}
}

1899 
boŞ
 
	gMedŸ_Found©iÚ
::
	$budLi¡OfDeviûs
()

1901 
HRESULT
 
hr
 = 
S_OK
;

1902 #ifdeà
WINRT


1903 
videoDeviûs
 *
vDs
 = &videoDeviûs::
	`g‘In¡ªû
();

1904 
hr
 = 
vDs
->
	`š™Deviûs
(
	`WRL_ENUM_GET
(
_DeviûCÏss
, 
DeviûCÏss
, 
VideoC­tu»
));

1906 
_ComPŒ
<
IMFA‰ribu‹s
> 
pA‰ribu‹s
 = 
NULL
;

1907 
	`CoIn™Ÿlize
(
NULL
);

1908 
hr
 = 
	`MFC»©eA‰ribu‹s
(
pA‰ribu‹s
.
	`G‘Add»ssOf
(), 1);

1909 ià(
	`SUCCEEDED
(
hr
))

1911 
hr
 = 
pA‰ribu‹s
->
	`S‘GUID
(

1912 
MF_DEVSOURCE_ATTRIBUTE_SOURCE_TYPE
,

1913 
MF_DEVSOURCE_ATTRIBUTE_SOURCE_TYPE_VIDCAP_GUID


1916 ià(
	`SUCCEEDED
(
hr
))

1918 
videoDeviûs
 *
vDs
 = &videoDeviûs::
	`g‘In¡ªû
();

1919 
hr
 = 
vDs
->
	`š™Deviûs
(
pA‰ribu‹s
.
	`G‘
());

1922 ià(
	`FAILED
(
hr
))

1924 
	`DebugPrštOut
(
L
"MEDIA FOUNDATION: The‡ccessohe video cameras denied\n");

1927  (
	`SUCCEEDED
(
hr
));

1928 
	}
}

1930 
	gMedŸ_Found©iÚ
& MedŸ_Found©iÚ::
	$g‘In¡ªû
()

1932 
MedŸ_Found©iÚ
 
š¡ªû
;

1933  
š¡ªû
;

1934 
	}
}

1936 
	gRawImage
::
	$RawImage
(
size
): 
	`ri_Ãw
(
çl£
), 
	$ri_pix–s
(
NULL
)

1938 
ri_size
 = 
size
;

1939 
ri_pix–s
 = 
Ãw
 [
size
];

1940 
	`mem£t
((*)
ri_pix–s
,0,
ri_size
);

1941 
	}
}

1943 
boŞ
 
	gRawImage
::
	$isNew
()

1945  
ri_Ãw
;

1946 
	}
}

1948 
	gRawImage
::
	$g‘Size
()

1950  
ri_size
;

1951 
	}
}

1953 
	gRawImage
::~
	$RawImage
()

1955 
d–‘e
 []
ri_pix–s
;

1956 
ri_pix–s
 = 
NULL
;

1957 
	}
}

1959 
	gRawImage
::
	$C»©eIn¡ªû
(
RawImage
 **
µRImage
,
size
)

1961 *
µRImage
 = 
	`Ãw
 (
¡d
::
nÙhrow
è
	`RawImage
(
size
);

1962 ià(
µRImage
 =ğ
NULL
)

1964  
E_OUTOFMEMORY
;

1966  
S_OK
;

1967 
	}
}

1969 
	gRawImage
::
	$£tCİy
(cÚ¡ 
BYTE
 * 
pSam¶eBufãr
)

1971 
	`memıy
(
ri_pix–s
, 
pSam¶eBufãr
, 
ri_size
);

1972 
ri_Ãw
 = 
Œue
;

1973 
	}
}

1975 
	gRawImage
::
	$ç¡Cİy
(cÚ¡ 
BYTE
 * 
pSam¶eBufãr
)

1977 
	`memıy
(
ri_pix–s
, 
pSam¶eBufãr
, 
ri_size
);

1978 
ri_Ãw
 = 
Œue
;

1979 
	}
}

1981 * 
	gRawImage
::
	$g‘pPix–s
()

1983 
ri_Ãw
 = 
çl£
;

1984  
ri_pix–s
;

1985 
	}
}

1987 
	gvideoDeviû
::
	$videoDeviû
(): 
	`vd_IsS‘u³d
(
çl£
), 
	`vd_LockOut
(
O³nLock
), 
	`vd_pFr›ndlyName
(
NULL
),

1988 
	`vd_Width
(0), 
	`vd_Height
(0), 
	`vd_F¿meR©e
(0), 
	`vd_pSourû
(
NULL
), 
	`vd_pImGrTh
(NULL), 
	`vd_func
(NULL), 
	$vd_u£rD©a
(
NULL
)

1990 #ifdeà
WINRT


1991 
vd_pMedC­
 = 
nuÎ±r
;

1992 
vd_cook›
.
v®ue
 = 0;

1993 
vd_pImGr
 = 
NULL
;

1994 
vd_pAùiÚ
 = 
nuÎ±r
;

1996 
	}
}

1998 
	gvideoDeviû
::
	$£tP¬am‘rs
(
CamP¬am‘rs
 
·¿m‘rs
)

2000 if(
vd_IsS‘u³d
)

2002 if(
vd_pSourû
)

2004 
P¬am‘r
 *
pP¬am‘r
 = (P¬am‘¸*)(&
·¿m‘rs
);

2005 
P¬am‘r
 *
pP»vP¬am‘r
 = (P¬am‘¸*)(&
vd_P»vP¬am‘rs
);

2006 
IAMVideoProcAmp
 *
pProcAmp
 = 
NULL
;

2007 
HRESULT
 
hr
 = 
vd_pSourû
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
pProcAmp
));

2008 ià(
	`SUCCEEDED
(
hr
))

2010 
i
 = 0; i < 10; i++)

2012 if(
pP»vP¬am‘r
[
i
].
Cu¼’tV®ue
 !ğ
pP¬am‘r
[i].Cu¼’tV®u||…P»vP¬am‘r[i].
FÏg
 !=…Parametr[i].Flag)

2013 
hr
 = 
pProcAmp
->
	`S‘
(
VideoProcAmp_BrighŠess
 + 
i
, 
pP¬am‘r
[i].
Cu¼’tV®ue
,…P¬am‘r[i].
FÏg
);

2015 
pProcAmp
->
	`R–—£
();

2017 
IAMCam”aCÚŒŞ
 *
pProcCÚŒŞ
 = 
NULL
;

2018 
hr
 = 
vd_pSourû
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
pProcCÚŒŞ
));

2019 ià(
	`SUCCEEDED
(
hr
))

2021 
i
 = 0; i < 7; i++)

2023 if(
pP»vP¬am‘r
[10 + 
i
].
Cu¼’tV®ue
 !ğ
pP¬am‘r
[10 + i].Cu¼’tV®u||…P»vP¬am‘r[10 + i].
FÏg
 !=…Parametr[10 + i].Flag)

2024 
hr
 = 
pProcCÚŒŞ
->
	`S‘
(
Cam”aCÚŒŞ_Pª
+
i
, 
pP¬am‘r
[10 + i].
Cu¼’tV®ue
,…P¬am‘r[10 + i].
FÏg
);

2026 
pProcCÚŒŞ
->
	`R–—£
();

2028 
vd_P»vP¬am‘rs
 = 
·¿m‘rs
;

2031 
	}
}

2033 
CamP¬am‘rs
 
	gvideoDeviû
::
	$g‘P¬am‘rs
()

2035 
CamP¬am‘rs
 
out
;

2036 if(
vd_IsS‘u³d
)

2038 if(
vd_pSourû
)

2040 
P¬am‘r
 *
pP¬am‘r
 = (P¬am‘¸*)(&
out
);

2041 
IAMVideoProcAmp
 *
pProcAmp
 = 
NULL
;

2042 
HRESULT
 
hr
 = 
vd_pSourû
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
pProcAmp
));

2043 ià(
	`SUCCEEDED
(
hr
))

2045 
i
 = 0; i < 10; i++)

2047 
P¬am‘r
 
‹mp
;

2048 
hr
 = 
pProcAmp
->
	`G‘Rªge
(
VideoProcAmp_BrighŠess
+
i
, &
‹mp
.
Mš
, &‹mp.
Max
, &‹mp.
S‹p
, &‹mp.
DeçuÉ
, &‹mp.
FÏg
);

2049 ià(
	`SUCCEEDED
(
hr
))

2051 
‹mp
.
Cu¼’tV®ue
 =emp.
DeçuÉ
;

2052 
pP¬am‘r
[
i
] = 
‹mp
;

2055 
pProcAmp
->
	`R–—£
();

2057 
IAMCam”aCÚŒŞ
 *
pProcCÚŒŞ
 = 
NULL
;

2058 
hr
 = 
vd_pSourû
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
pProcCÚŒŞ
));

2059 ià(
	`SUCCEEDED
(
hr
))

2061 
i
 = 0; i < 7; i++)

2063 
P¬am‘r
 
‹mp
;

2064 
hr
 = 
pProcCÚŒŞ
->
	`G‘Rªge
(
Cam”aCÚŒŞ_Pª
+
i
, &
‹mp
.
Mš
, &‹mp.
Max
, &‹mp.
S‹p
, &‹mp.
DeçuÉ
, &‹mp.
FÏg
);

2065 ià(
	`SUCCEEDED
(
hr
))

2067 
‹mp
.
Cu¼’tV®ue
 =emp.
DeçuÉ
;

2068 
pP¬am‘r
[10 + 
i
] = 
‹mp
;

2071 
pProcCÚŒŞ
->
	`R–—£
();

2075  
out
;

2076 
	}
}

2078 #ifdeà
WINRT


2079 
	gvideoDeviû
::
»£tDeviû
(
	$MAKE_WRL_REF
(
_IDeviûInfÜm©iÚ
è
pDeviû
)

2081 
videoDeviû
::
	$»£tDeviû
(
IMFAùiv©e
 *
pAùiv©e
)

2084 
HRESULT
 
hr
 = 
E_FAIL
;

2085 
vd_Cu¼’tFÜm©s
.
	`ş—r
();

2086 if(
vd_pFr›ndlyName
)

2087 
	`CoTaskMemF»e
(
vd_pFr›ndlyName
);

2088 
vd_pFr›ndlyName
 = 
NULL
;

2089 #ifdeà
WINRT


2090 ià(
pDeviû
)

2092 
	`ACTIVATE_OBJ
(
RuÁimeCÏss_Wšdows_MedŸ_C­tu»_MedŸC­tu»
, 
_MedŸC­tu»
, 
pIMedC­
, 
hr
)

2093 ià(
	`FAILED
(
hr
))  hr;

2094 
	`ACTIVATE_OBJ
(
RuÁimeCÏss_Wšdows_MedŸ_C­tu»_MedŸC­tu»In™Ÿliz©iÚS‘tšgs
, 
_MedŸC­tu»In™Ÿliz©iÚS‘tšgs
, 
pC­In™S‘
, 
hr
)

2095 ià(
	`FAILED
(
hr
))  hr;

2096 
_SŒšgObj
 
¡r
;

2097 
	`WRL_PROP_GET
(
pDeviû
, 
Name
, *
	`REF_WRL_OBJ
(
¡r
), 
hr
)

2098 ià(
	`FAILED
(
hr
))  hr;

2099 
Ëngth
 = 0;

2100 
PCWSTR
 
w¡r
 = 
	`WšdowsG‘SŒšgRawBufãr
(
»š‹½»t_ÿ¡
<
HSTRING
>(
	`DEREF_WRL_OBJ
(
¡r
)), &
Ëngth
);

2101 
vd_pFr›ndlyName
 = (
wch¬_t
*)
	`CoTaskMemAÎoc
((
Ëngth
 + 1) * (wchar_t));

2102 
	`wcsıy
(
vd_pFr›ndlyName
, 
w¡r
);

2103 
	`WRL_PROP_GET
(
pDeviû
, 
Id
, *
	`REF_WRL_OBJ
(
¡r
), 
hr
)

2104 ià(
	`FAILED
(
hr
))  hr;

2105 
	`WRL_PROP_PUT
(
pC­In™S‘
, 
VideoDeviûId
, 
	`DEREF_WRL_OBJ
(
¡r
), 
hr
)

2106 ià(
	`FAILED
(
hr
))  hr;

2107 
	`WRL_PROP_PUT
(
pC­In™S‘
, 
SŒ—mšgC­tu»Mode
, 
	`WRL_ENUM_GET
(
_SŒ—mšgC­tu»Mode
, SŒ—mšgC­tu»Mode, 
Video
), 
hr
)

2108 ià(
	`FAILED
(
hr
))  hr;

2109 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pAùiÚ
;

2110 
	`WRL_METHOD
(
	`DEREF_WRL_OBJ
(
pIMedC­
), 
_In™ŸlizeW™hS‘tšgsAsync
, 
pAùiÚ
, 
hr
, DEREF_WRL_OBJ(
pC­In™S‘
))

2111 #ifdeà
HAVE_CONCURRENCY


2112 
DEFINE_TASK
<> 
_sk
 = 
CREATE_TASK
 
	`DEFINE_RET_TYPE
()(
pAùiÚ
);

2113 ià(
	`FAILED
(
hr
))  hr;

2114 
	`MAKE_WRL_AGILE_REF
(
_MedŸC­tu»
è
pAgeMedC­
;

2115 
pAgeMedC­
 = 
	`PREPARE_TRANSFER_WRL_OBJ
(
pIMedC­
);

2116 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
::
scİed_lock
 
	`_LockHŞd”
(
vd_lock
);

2117 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pOldAùiÚ
 = 
vd_pAùiÚ
;

2118 
	`SAVE_CURRENT_CONTEXT
(
cÚ‹xt
);

2119 
vd_pAùiÚ
 = 
»š‹½»t_ÿ¡
<
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
	`BEGIN_CREATE_ASYNC
(, 
_sk
, 
pOldAùiÚ
, 
cÚ‹xt
, &
pAgeMedC­
, 
this
)

2120 
HRESULT
 
hr
 = 
S_OK
;

2121 ià(
pOldAùiÚ
è
CREATE_TASK
 
	`DEFINE_RET_TYPE
()ÕOldAùiÚ).
	`wa™
();

2122 
_sk
.
	`wa™
();

2123 ià(
	`SUCCEEDED
(
hr
)) {

2125 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
pAgeMedC­
, 
this
)

2126 
	`’um”©eC­tu»FÜm©s
(
	`DEREF_AGILE_WRL_OBJ
(
pAgeMedC­
));

2127 
END_CALL_IN_CONTEXT_BASE


2129 
	`budLib¿ryofTy³s
();

2130 
	`RELEASE_AGILE_WRL
(
pAgeMedC­
)

2131 
	`END_CREATE_ASYNC
(
hr
));

2135 if(
pAùiv©e
)

2137 
IMFMedŸSourû
 *
pSourû
 = 
NULL
;

2138 
hr
 = 
pAùiv©e
->
	`G‘AÎoÿ‹dSŒšg
(

2139 
MF_DEVSOURCE_ATTRIBUTE_FRIENDLY_NAME
,

2140 &
vd_pFr›ndlyName
,

2141 
NULL


2143 
hr
 = 
pAùiv©e
->
	`Aùiv©eObjeù
(

2144 
	`__uuidof
(
IMFMedŸSourû
),

2145 (**)&
pSourû


2147 
	`’um”©eC­tu»FÜm©s
(
pSourû
);

2148 
	`budLib¿ryofTy³s
();

2149 
	`SaãR–—£
(&
pSourû
);

2150 if(
	`FAILED
(
hr
))

2152 
vd_pFr›ndlyName
 = 
NULL
;

2153 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: IMFMedŸSourû iÁ”çû cªnÙ bü—‹d \n", 
vd_Cu¼’tNumb”
);

2157  
hr
;

2158 
	}
}

2160 #ifdeà
WINRT


2161 
	gvideoDeviû
::
»adInfoOfDeviû
(
	$MAKE_WRL_REF
(
_IDeviûInfÜm©iÚ
è
pDeviû
, 
Num
)

2163 
HRESULT
 
hr
 = -1;

2164 
vd_Cu¼’tNumb”
 = 
Num
;

2165 
hr
 = 
	`»£tDeviû
(
pDeviû
);

2166  
hr
;

2167 
	}
}

2169 
	gvideoDeviû
::
	$»adInfoOfDeviû
(
IMFAùiv©e
 *
pAùiv©e
, 
Num
)

2171 
vd_Cu¼’tNumb”
 = 
Num
;

2172  
	`»£tDeviû
(
pAùiv©e
);

2173 
	}
}

2176 #ifdeà
WINRT


2177 #ifdeà
HAVE_CONCURRENCY


2178 
	gvideoDeviû
::
checkDeviû
(
_DeviûCÏss
 
devCÏss
, 
DEFINE_TASK
<>* 
pTask
, 
MAKE_WRL_REF
(
_IDeviûInfÜm©iÚ
)* 
µDeviû
)

2180 
HRESULT
 
	ghr
 = 
S_OK
;

2181 
ACTIVATE_STATIC_OBJ
(
RuÁimeCÏss_Wšdows_Deviûs_Enum”©iÚ_DeviûInfÜm©iÚ
, 
MAKE_WRL_OBJ
(
_DeviûInfÜm©iÚStics
), 
pDevSt
, 
hr
)

2182 ià(
FAILED
(
hr
)è 
	ghr
;

2183 
MAKE_WRL_REF
(
_AsyncO³¿tiÚ
<MAKE_WRL_REF(
_DeviûInfÜm©iÚCŞËùiÚ
)>è
	gpAùiÚ
;

2184 
WRL_METHOD
(
pDevSt
, 
_FšdAÎAsyncDeviûCÏss
, 
pAùiÚ
, 
hr
, 
devCÏss
)

2185 ià(
SUCCEEDED
(
hr
)) {

2186 *
	gpTask
 = 
CREATE_TASK
 
DEFINE_RET_TYPE
()([
pAùiÚ
, &
µDeviû
, 
this
](è-> 
DEFINE_RET_FORMAL
() {

2187 
HRESULT
 
	ghr
 = 
S_OK
;

2188 
MAKE_WRL_OBJ
(
_VeùÜV›w
<
MAKE_WRL_REF
(
_DeviûInfÜm©iÚ
)>è
	gpVeùÜ
 =

2189 
CREATE_TASK
 
DEFINE_RET_TYPE
(
MAKE_WRL_REF
(
_VeùÜV›w
<MAKE_WRL_REF(
_DeviûInfÜm©iÚ
)>))(
pAùiÚ
).
g‘
();

2190 
UINT32
 
	gcouÁ
 = 0;

2191 ià(
SUCCEEDED
(
hr
)è
WRL_PROP_GET
(
pVeùÜ
, 
Size
, 
couÁ
, hr)

2192 ià(
SUCCEEDED
(
hr
è&& 
	gcouÁ
 > 0) {

2193 
UINT32
 
	gi
 = 0; i < 
	gcouÁ
; i++) {

2194 
MAKE_WRL_OBJ
(
_IDeviûInfÜm©iÚ
è
	gpDeviû
;

2195 
WRL_METHOD
(
pVeùÜ
, 
G‘At
, 
pDeviû
, 
hr
, 
i
)

2196 ià(
SUCCEEDED
(
hr
)) {

2197 
_SŒšgObj
 
	g¡r
;

2198 
	gËngth
 = 0;

2199 
WRL_PROP_GET
(
pDeviû
, 
Name
, *
REF_WRL_OBJ
(
¡r
), 
hr
)

2200 
PCWSTR
 
	gw¡r
 = 
WšdowsG‘SŒšgRawBufãr
(
»š‹½»t_ÿ¡
<
HSTRING
>(
DEREF_WRL_OBJ
(
¡r
)), &
Ëngth
);

2201 ià(
wcscmp
(
w¡r
, 
vd_pFr›ndlyName
) == 0) {

2202 *
µDeviû
 = 
PREPARE_TRANSFER_WRL_OBJ
(
pDeviû
);

2207 
	gRET_VAL_BASE
;

2210  
	ghr
;

2214 
	gvideoDeviû
::
	$checkDeviû
(
IMFA‰ribu‹s
 *
pA‰ribu‹s
, 
IMFAùiv©e
 **
pDeviû
)

2216 
IMFAùiv©e
 **
µDeviûs
 = 
NULL
;

2217 
UINT32
 
couÁ
;

2218 
wch¬_t
 *
ÃwFr›ndlyName
 = 
NULL
;

2219 
HRESULT
 
hr
 = 
	`MFEnumDeviûSourûs
(
pA‰ribu‹s
, &
µDeviûs
, &
couÁ
);

2220 ià(
	`SUCCEEDED
(
hr
))

2222 if(
couÁ
 > 0)

2224 if(
couÁ
 > 
vd_Cu¼’tNumb”
)

2226 
hr
 = 
µDeviûs
[
vd_Cu¼’tNumb”
]->
	`G‘AÎoÿ‹dSŒšg
(

2227 
MF_DEVSOURCE_ATTRIBUTE_FRIENDLY_NAME
,

2228 &
ÃwFr›ndlyName
,

2229 
NULL


2231 ià(
	`SUCCEEDED
(
hr
))

2233 if(
	`wcscmp
(
ÃwFr›ndlyName
, 
vd_pFr›ndlyName
) != 0)

2235 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Cho£Àdeviû cªnÙ bfound \n", 
vd_Cu¼’tNumb”
);

2236 
hr
 = 
E_INVALIDARG
;

2237 
pDeviû
 = 
NULL
;

2241 *
pDeviû
 = 
µDeviûs
[
vd_Cu¼’tNumb”
];

2242 (*
pDeviû
)->
	`AddRef
();

2247 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Namoàdeviû cªnÙ bgÙ‹À\n", 
vd_Cu¼’tNumb”
);

2252 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Numb” oàdeviû mÜthª cÜ»Á‚umb” oàthdeviû \n", 
vd_Cu¼’tNumb”
);

2253 
hr
 = 
E_INVALIDARG
;

2255 
UINT32
 
i
 = 0; i < 
couÁ
; i++)

2257 
	`SaãR–—£
(&
µDeviûs
[
i
]);

2259 
	`SaãR–—£
(
µDeviûs
);

2262 
hr
 = 
E_FAIL
;

2266 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Li¡ oàDeviûSourû ÿÂÙ b’um”©ed \n", 
vd_Cu¼’tNumb”
);

2268  
hr
;

2269 
	}
}

2272 
	gvideoDeviû
::
	$š™Deviû
()

2274 
HRESULT
 
hr
 = 
S_OK
;

2275 
	`CoIn™Ÿlize
(
NULL
);

2276 #ifdeà
WINRT


2277 #ifdeà
HAVE_CONCURRENCY


2278 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
::
scİed_lock
 
	`_LockHŞd”
(
vd_lock
);

2279 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pOldAùiÚ
 = 
vd_pAùiÚ
;

2280 
	`SAVE_CURRENT_CONTEXT
(
cÚ‹xt
);

2281 
vd_pAùiÚ
 = 
»š‹½»t_ÿ¡
<
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
	`BEGIN_CREATE_ASYNC
(, 
pOldAùiÚ
, 
cÚ‹xt
, 
this
)

2282 
HRESULT
 
hr
;

2283 ià(
pOldAùiÚ
è
CREATE_TASK
 
	`DEFINE_RET_TYPE
()ÕOldAùiÚ).
	`wa™
();

2284 
DEFINE_TASK
<> 
pTask
;

2285 
	`MAKE_WRL_OBJ
(
_IDeviûInfÜm©iÚ
è
pDevInfo
;

2286 
hr
 = 
	`checkDeviû
(
	`WRL_ENUM_GET
(
_DeviûCÏss
, 
DeviûCÏss
, 
VideoC­tu»
), &
pTask
, 
	`REF_WRL_OBJ
(
pDevInfo
));

2287 ià(
	`SUCCEEDED
(
hr
)è
pTask
.
	`wa™
();

2288 ià(
	`SUCCEEDED
(
hr
)) {

2289 
DEFINE_TASK
<> 
_sk
;

2290 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
pDevInfo
, &
_sk
, cÚ‹xt, 
this
)

2291 
HRESULT
 
hr
;

2292 
	`ACTIVATE_OBJ
(
RuÁimeCÏss_Wšdows_MedŸ_C­tu»_MedŸC­tu»
, 
_MedŸC­tu»
, 
pIMedC­
, 
hr
)

2293 ià(
	`SUCCEEDED
(
hr
)) {

2294 
	`RELEASE_WRL
(
vd_pMedC­
);

2295 
vd_pMedC­
 = 
	`PREPARE_TRANSFER_WRL_OBJ
(
pIMedC­
);

2296 
	`ACTIVATE_OBJ
(
RuÁimeCÏss_Wšdows_MedŸ_C­tu»_MedŸC­tu»In™Ÿliz©iÚS‘tšgs
, 
_MedŸC­tu»In™Ÿliz©iÚS‘tšgs
, 
pC­In™S‘
, 
hr
)

2297 
_SŒšgObj
 
¡r
;

2298 ià(
	`SUCCEEDED
(
hr
)) {

2299 
	`WRL_PROP_GET
(
pDevInfo
, 
Id
, *
	`REF_WRL_OBJ
(
¡r
), 
hr
)

2300 ià(
	`SUCCEEDED
(
hr
)) {

2301 
	`WRL_PROP_PUT
(
pC­In™S‘
, 
VideoDeviûId
, 
	`DEREF_WRL_OBJ
(
¡r
), 
hr
)

2304 ià(
	`SUCCEEDED
(
hr
))

2305 
	`WRL_PROP_PUT
(
pC­In™S‘
, 
SŒ—mšgC­tu»Mode
, 
	`WRL_ENUM_GET
(
_SŒ—mšgC­tu»Mode
, SŒ—mšgC­tu»Mode, 
Video
), 
hr
)

2306 ià(
	`SUCCEEDED
(
hr
)è
»š‹½»t_ÿ¡
<
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
IMedŸC­tu»
*>(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
))->
	`add_Faed
(
Miüosoá
::
WRL
::
C®lback
<ABI::Wšdows::MedŸ::C­tu»::
IMedŸC­tu»FaedEv’tHªdËr
>([
this
, 
cÚ‹xt
](ABI::Wšdows::MedŸ::C­tu»::IMedŸC­tu»*, ABI::Wšdows::MedŸ::C­tu»::
IMedŸC­tu»FaedEv’tArgs
*è-> 
HRESULT
 {

2307 
HRESULT
 
hr
;

2308 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
this
)

2309 
	`şo£Deviû
();

2310 
END_CALL_IN_CONTEXT_BASE


2311  
hr
;

2312 }).
	`G‘
(), &
vd_cook›
);

2313 
	`MAKE_WRL_OBJ
(
_AsyncAùiÚ
è
pAùiÚ
;

2314 ià(
	`SUCCEEDED
(
hr
)è
	`WRL_METHOD
(
vd_pMedC­
, 
_In™ŸlizeW™hS‘tšgsAsync
, *
	`REF_WRL_OBJ
(
pAùiÚ
), hr, 
	`DEREF_WRL_OBJ
(
pC­In™S‘
))

2315 ià(
	`SUCCEEDED
(
hr
)è
_sk
 = 
CREATE_TASK
 
	`DEFINE_RET_TYPE
()(
	`DEREF_WRL_OBJ
(
pAùiÚ
));

2317 
	`END_CALL_IN_CONTEXT
(
hr
)

2318 
_sk
.
	`wa™
();

2320 
	`END_CREATE_ASYNC
(
hr
));

2323 
_ComPŒ
<
IMFA‰ribu‹s
> 
pA‰ribu‹s
 = 
NULL
;

2324 
IMFAùiv©e
 *
vd_pAùiv©e
 = 
NULL
;

2325 
hr
 = 
	`MFC»©eA‰ribu‹s
(
pA‰ribu‹s
.
	`G‘Add»ssOf
(), 1);

2326 ià(
	`SUCCEEDED
(
hr
))

2328 
hr
 = 
pA‰ribu‹s
->
	`S‘GUID
(

2329 
MF_DEVSOURCE_ATTRIBUTE_SOURCE_TYPE
,

2330 
MF_DEVSOURCE_ATTRIBUTE_SOURCE_TYPE_VIDCAP_GUID


2333 ià(
	`SUCCEEDED
(
hr
))

2335 
hr
 = 
	`checkDeviû
(
pA‰ribu‹s
.
	`G‘
(), &
vd_pAùiv©e
);

2336 ià(
	`SUCCEEDED
(
hr
è&& 
vd_pAùiv©e
)

2338 
	`SaãR–—£
(&
vd_pSourû
);

2339 
hr
 = 
vd_pAùiv©e
->
	`Aùiv©eObjeù
(

2340 
	`__uuidof
(
IMFMedŸSourû
),

2341 (**)&
vd_pSourû


2343 ià(
	`SUCCEEDED
(
hr
))

2346 
	`SaãR–—£
(&
vd_pAùiv©e
);

2350 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Deviûh”i nÙ \n", 
vd_Cu¼’tNumb”
);

2355 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Th©Œibu‹ oàvideØÿm”a ÿÂÙ bg‘tšg \n", 
vd_Cu¼’tNumb”
);

2358  
hr
;

2359 
	}
}

2361 
MedŸTy³
 
	gvideoDeviû
::
	$g‘FÜm©
(
id
)

2363 if(
id
 < 
vd_Cu¼’tFÜm©s
.
	`size
())

2365  
vd_Cu¼’tFÜm©s
[
id
];

2367  
	`MedŸTy³
();

2368 
	}
}

2369 
	gvideoDeviû
::
	$g‘CouÁFÜm©s
()

2371  ()
vd_Cu¼’tFÜm©s
.
	`size
();

2372 
	}
}

2373 
	gvideoDeviû
::
£tEm”g’cyStİEv’t
(*
u£rD©a
, (*
func
)(, *))

2375 
vd_func
 = 
func
;

2376 
vd_u£rD©a
 = 
u£rD©a
;

2377 
	}
}

2378 
	gvideoDeviû
::
	$şo£Deviû
()

2380 if(
vd_IsS‘u³d
)

2382 
vd_IsS‘u³d
 = 
çl£
;

2384 #ifdeà
WINRT


2385 #ifdeà
HAVE_CONCURRENCY


2386 ià(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
)) {

2387 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
aùiÚ
;

2388 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
::
scİed_lock
 
	`_LockHŞd”
(
vd_lock
);

2389 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pOldAùiÚ
 = 
vd_pAùiÚ
;

2390 
vd_pImGr
->
	`¡İG¿bbšg
(&
aùiÚ
);

2391 
»š‹½»t_ÿ¡
<
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
IMedŸC­tu»
*>(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
))->
	`»move_Faed
(
vd_cook›
);

2392 
vd_cook›
.
v®ue
 = 0;

2393 
vd_pAùiÚ
 = 
»š‹½»t_ÿ¡
<
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
	`BEGIN_CREATE_ASYNC
(, 
aùiÚ
, 
pOldAùiÚ
, 
this
)

2394 
HRESULT
 
hr
 = 
S_OK
;

2395 ià(
pOldAùiÚ
è
CREATE_TASK
 
	`DEFINE_RET_TYPE
()ÕOldAùiÚ).
	`wa™
();

2396 
CREATE_TASK
 
	`DEFINE_RET_TYPE
()(
aùiÚ
).
	`wa™
();

2397 
	`RELEASE_WRL
(
vd_pMedC­
)

2398 if(
vd_LockOut
 =ğ
RawD©aLock
) {

2399 
d–‘e
 
vd_pImGr
;

2401 
vd_pImGr
 = 
NULL
;

2402 
vd_LockOut
 = 
O³nLock
;

2403 
	`END_CREATE_ASYNC
(
hr
));

2409 
vd_pSourû
->
	`Shutdown
();

2410 
	`SaãR–—£
(&
vd_pSourû
);

2411 if(
vd_LockOut
 =ğ
RawD©aLock
)

2413 
vd_pImGrTh
->
	`¡İ
();

2414 
	`SË•
(500);

2415 
d–‘e
 
vd_pImGrTh
;

2417 
vd_pImGrTh
 = 
NULL
;

2418 
vd_LockOut
 = 
O³nLock
;

2419 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Deviû i ¡İ³d \n", 
vd_Cu¼’tNumb”
);

2421 
	}
}

2422 
	gvideoDeviû
::
	$g‘Width
()

2424 if(
vd_IsS‘u³d
)

2425  
vd_Width
;

2428 
	}
}

2429 
	gvideoDeviû
::
	$g‘Height
()

2431 if(
vd_IsS‘u³d
)

2432  
vd_Height
;

2435 
	}
}

2437 
	gvideoDeviû
::
	$g‘F¿meR©e
() const

2439 if(
vd_IsS‘u³d
)

2440  
vd_F¿meR©e
;

2443 
	}
}

2445 
IMFMedŸSourû
 *
	gvideoDeviû
::
	$g‘MedŸSourû
()

2447 
IMFMedŸSourû
 *
out
 = 
NULL
;

2448 if(
vd_LockOut
 =ğ
O³nLock
)

2450 
vd_LockOut
 = 
MedŸSourûLock
;

2451 
out
 = 
vd_pSourû
;

2453  
out
;

2454 
	}
}

2455 
	gvideoDeviû
::
	$fšdTy³
(
size
, 
äameR©e
)

2459 
F¿meR©eM­
 
FRM
;

2460 
¡d
::
m­
<
UINT64
, 
F¿meR©eM­
>::
cÚ¡_™”©Ü
 
fmt
;

2461 
fmt
 = 
vd_C­tu»FÜm©s
.
	`fšd
(
size
);

2462 ifĞ
fmt
 !ğ
vd_C­tu»FÜm©s
.
	`’d
() )

2463 
FRM
 = 
fmt
->
£cÚd
;

2464 ifĞ!
vd_C­tu»FÜm©s
.
	`em±y
() )

2465 
FRM
 = 
vd_C­tu»FÜm©s
.
	`rbegš
()->
£cÚd
;

2467 ifĞ
FRM
.
	`em±y
() )

2470 
UINT64
 
äameR©eMax
 = 0; 
SUBTYPEM­
 
STMMax
;

2471 if(
äameR©e
 == 0)

2473 
¡d
::
m­
<
UINT64
, 
SUBTYPEM­
>::
™”©Ü
 
f
 = 
FRM
.
	`begš
();

2474 ; 
f
 !ğ
FRM
.
	`’d
(); f++)

2477 if((*
f
).
fœ¡
 >ğ
äameR©eMax
)

2479 
äameR©eMax
 = (*
f
).
fœ¡
;

2480 
STMMax
 = (*
f
).
£cÚd
;

2486 
¡d
::
m­
<
UINT64
, 
SUBTYPEM­
>::
™”©Ü
 
f
 = 
FRM
.
	`begš
();

2487 ; 
f
 !ğ
FRM
.
	`’d
(); f++)

2490 ifĞ(*
f
).
fœ¡
 >ğ
äameR©eMax
 && (*f).fœ¡ <ğ
äameR©e
 )

2492 
äameR©eMax
 = (*
f
).
fœ¡
;

2493 
STMMax
 = (*
f
).
£cÚd
;

2498 ifĞ
STMMax
.
	`em±y
() )

2499 
STMMax
 = 
FRM
.
	`begš
()->
£cÚd
;

2502 ifĞ
STMMax
.
	`em±y
() )

2505 
veùÜNum
 
VN
 = 
STMMax
.
	`begš
()->
£cÚd
;

2506 ifĞ
VN
.
	`em±y
() )

2509  
VN
[0];

2510 
	}
}

2512 
	gvideoDeviû
::
	$budLib¿ryofTy³s
()

2514 
size
;

2515 
äam”©e
;

2516 
¡d
::
veùÜ
<
MedŸTy³
>::
™”©Ü
 
i
 = 
vd_Cu¼’tFÜm©s
.
	`begš
();

2517 
couÁ
 = 0;

2518 ; 
i
 !ğ
vd_Cu¼’tFÜm©s
.
	`’d
(); i++)

2521 ifĞ(*
i
).
MF_MT_SUBTYPE
 =ğ
MFVideoFÜm©_RGB24
 )

2523 
size
 = (*
i
).
MF_MT_FRAME_SIZE
;

2524 
äam”©e
 = (*
i
).
MF_MT_FRAME_RATE_NUMERATOR
 / (*i).
MF_MT_FRAME_RATE_DENOMINATOR
;

2525 
F¿meR©eM­
 
FRM
 = 
vd_C­tu»FÜm©s
[
size
];

2526 
SUBTYPEM­
 
STM
 = 
FRM
[
äam”©e
];

2527 
SŒšg
 
	`subTy³
((*
i
).
pMF_MT_SUBTYPEName
);

2528 
veùÜNum
 
VN
 = 
STM
[
subTy³
];

2529 
VN
.
	`push_back
(
couÁ
);

2530 
STM
[
subTy³
] = 
VN
;

2531 
FRM
[
äam”©e
] = 
STM
;

2532 
vd_C­tu»FÜm©s
[
size
] = 
FRM
;

2534 
couÁ
++;

2536 
	}
}

2538 #ifdeà
WINRT


2539 
	gvideoDeviû
::
£tDeviûFÜm©
(
	$MAKE_WRL_REF
(
_MedŸC­tu»
è
pSourû
, 
dwFÜm©Index
, 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)* 
pAùiÚ
)

2541 
HRESULT
 
hr
;

2542 
	`MAKE_WRL_OBJ
(
_VideoDeviûCÚŒŞËr
è
pDevCÚt
;

2543 
	`WRL_PROP_GET
(
pSourû
, 
VideoDeviûCÚŒŞËr
, 
pDevCÚt
, 
hr
)

2544 ià(
	`FAILED
(
hr
))  hr;

2545 
	`GET_WRL_OBJ_FROM_OBJ
(
_MedŸDeviûCÚŒŞËr
, 
pMedDevCÚt
, 
pDevCÚt
, 
hr
)

2546 ià(
	`FAILED
(
hr
))  hr;

2547 
	`MAKE_WRL_OBJ
(
_VeùÜV›w
<
	`MAKE_WRL_REF
(
_MedŸEncodšgPrİ”t›s
)>è
pVeùÜ
;

2548 
	`WRL_METHOD
(
pMedDevCÚt
, 
G‘AvaabËMedŸSŒ—mPrİ”t›s
, 
pVeùÜ
, 
hr
, 
	`WRL_ENUM_GET
(
_MedŸSŒ—mTy³
, 
MedŸSŒ—mTy³
, 
VideoP»v›w
))

2549 ià(
	`FAILED
(
hr
))  hr;

2550 
	`MAKE_WRL_OBJ
(
_MedŸEncodšgPrİ”t›s
è
pMedEncPrİs
;

2551 
	`WRL_METHOD
(
pVeùÜ
, 
G‘At
, 
pMedEncPrİs
, 
hr
, 
dwFÜm©Index
)

2552 ià(
	`FAILED
(
hr
))  hr;

2553 
	`WRL_METHOD
(
pMedDevCÚt
, 
S‘MedŸSŒ—mPrİ”t›sAsync
, *
pAùiÚ
, 
hr
, 
	`WRL_ENUM_GET
(
_MedŸSŒ—mTy³
, 
MedŸSŒ—mTy³
, 
VideoP»v›w
), 
	`DEREF_WRL_OBJ
(
pMedEncPrİs
))

2554  
hr
;

2555 
	}
}

2558 
	gvideoDeviû
::
	$£tDeviûFÜm©
(
IMFMedŸSourû
 *
pSourû
, 
dwFÜm©Index
)

2560 
_ComPŒ
<
IMFP»£Á©iÚDesütÜ
> 
pPD
 = 
NULL
;

2561 
_ComPŒ
<
IMFSŒ—mDesütÜ
> 
pSD
 = 
NULL
;

2562 
_ComPŒ
<
IMFMedŸTy³HªdËr
> 
pHªdËr
 = 
NULL
;

2563 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
 = 
NULL
;

2564 
HRESULT
 
hr
 = 
pSourû
->
	`C»©eP»£Á©iÚDesütÜ
(
pPD
.
	`G‘Add»ssOf
());

2565 ià(
	`FAILED
(
hr
))

2567 
dÚe
;

2569 
BOOL
 
fS–eùed
;

2570 
hr
 = 
pPD
->
	`G‘SŒ—mDesütÜByIndex
(0, &
fS–eùed
, 
pSD
.
	`G‘Add»ssOf
());

2571 ià(
	`FAILED
(
hr
))

2573 
dÚe
;

2575 
hr
 = 
pSD
->
	`G‘MedŸTy³HªdËr
(
pHªdËr
.
	`G‘Add»ssOf
());

2576 ià(
	`FAILED
(
hr
))

2578 
dÚe
;

2580 
hr
 = 
pHªdËr
->
	`G‘MedŸTy³ByIndex
((
DWORD
)
dwFÜm©Index
, 
pTy³
.
	`G‘Add»ssOf
());

2581 ià(
	`FAILED
(
hr
))

2583 
dÚe
;

2585 
hr
 = 
pHªdËr
->
	`S‘Cu¼’tMedŸTy³
(
pTy³
.
	`G‘
());

2587 
dÚe
:

2588  
hr
;

2589 
	}
}

2591 
boŞ
 
	gvideoDeviû
::
	$isDeviûS‘up
()

2593  
vd_IsS‘u³d
;

2594 
	}
}

2596 
RawImage
 * 
	gvideoDeviû
::
	$g‘RawImageOut
()

2598 if(!
vd_IsS‘u³d
è 
NULL
;

2599 #ifdeà
WINRT


2600 if(
vd_pImGr
è vd_pImGr->
	`g‘RawImage
();

2602 if(
vd_pImGrTh
)

2603  
vd_pImGrTh
->
	`g‘ImageG¿bb”
()->
	`g‘RawImage
();

2606 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Thš¡ªû oàImageG¿bb”Th»ad cÏs dÛ nÙƒxi¡ \n", 
vd_Cu¼’tNumb”
);

2608  
NULL
;

2609 
	}
}

2611 
boŞ
 
	gvideoDeviû
::
	$isF¿meNew
()

2613 if(!
vd_IsS‘u³d
è 
çl£
;

2614 if(
vd_LockOut
 =ğ
RawD©aLock
 || vd_LockOuˆ=ğ
O³nLock
)

2616 if(
vd_LockOut
 =ğ
O³nLock
)

2618 
vd_LockOut
 = 
RawD©aLock
;

2621 #ifdeà
WINRT


2622 ià(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
)) {

2623 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
aùiÚ
;

2624 ià(
	`FAILED
(
ImageG¿bb”WšRT
::
	`C»©eIn¡ªû
(&
vd_pImGr
))è 
çl£
;

2625 ià(
	`FAILED
(
vd_pImGr
->
	`š™ImageG¿bb”
(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
), 
MFVideoFÜm©_RGB24
)è|| FAILED(vd_pImGr->
	`¡¬tG¿bbšg
(&
aùiÚ
))) {

2626 
d–‘e
 
vd_pImGr
;

2627  
çl£
;

2629 #ifdeà
HAVE_CONCURRENCY


2630 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
::
scİed_lock
 
	`_LockHŞd”
(
vd_lock
);

2631 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pOldAùiÚ
 = 
vd_pAùiÚ
;

2632 
DEFINE_TASK
<> 
_sk
 = 
CREATE_TASK
 
	`DEFINE_RET_TYPE
()(
aùiÚ
);

2633 
vd_pAùiÚ
 = 
»š‹½»t_ÿ¡
<
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
	`BEGIN_CREATE_ASYNC
(, 
_sk
, 
pOldAùiÚ
, 
this
)

2634 
HRESULT
 
hr
 = 
S_OK
;

2635 ià(
pOldAùiÚ
è
CREATE_TASK
 
	`DEFINE_RET_TYPE
()ÕOldAùiÚ).
	`wa™
();

2636 
_sk
.
	`wa™
();

2637 
	`END_CREATE_ASYNC
(
hr
));

2639  
Œue
;

2642 
HRESULT
 
hr
 = 
ImageG¿bb”Th»ad
::
	`C»©eIn¡ªû
(&
vd_pImGrTh
, 
vd_pSourû
, 
vd_Cu¼’tNumb”
);

2643 if(
	`FAILED
(
hr
))

2645 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Thš¡ªû oàImageG¿bb”Th»ad cÏs ÿÂÙ bü—‹d.\n", 
vd_Cu¼’tNumb”
);

2646  
çl£
;

2648 
vd_pImGrTh
->
	`£tEm”g’cyStİEv’t
(
vd_u£rD©a
, 
vd_func
);

2649 
vd_pImGrTh
->
	`¡¬t
();

2650  
Œue
;

2652 #ifdeà
WINRT


2653 if(
vd_pImGr
)

2654  
vd_pImGr
->
	`g‘RawImage
()->
	`isNew
();

2656 if(
vd_pImGrTh
)

2657  
vd_pImGrTh
->
	`g‘ImageG¿bb”
()->
	`g‘RawImage
()->
	`isNew
();

2659  
çl£
;

2660 
	}
}

2662 
boŞ
 
	gvideoDeviû
::
	$isDeviûMedŸSourû
()

2664 if(
vd_LockOut
 =ğ
MedŸSourûLock
è 
Œue
;

2665  
çl£
;

2666 
	}
}

2668 
boŞ
 
	gvideoDeviû
::
	$isDeviûRawD©aSourû
()

2670 if(
vd_LockOut
 =ğ
RawD©aLock
è 
Œue
;

2671  
çl£
;

2672 
	}
}

2674 
boŞ
 
	gvideoDeviû
::
	$£tupDeviû
(
id
)

2676 if(!
vd_IsS‘u³d
)

2678 
HRESULT
 
hr
 = 
	`š™Deviû
();

2679 if(
	`SUCCEEDED
(
hr
))

2681 #ifdeà
WINRT


2682 #ifdeà
HAVE_CONCURRENCY


2683 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
::
scİed_lock
 
	`_LockHŞd”
(
vd_lock
);

2684 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pOldAùiÚ
 = 
vd_pAùiÚ
;

2685 
	`SAVE_CURRENT_CONTEXT
(
cÚ‹xt
);

2686 
vd_pAùiÚ
 = 
»š‹½»t_ÿ¡
<
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
	`BEGIN_CREATE_ASYNC
(, 
pOldAùiÚ
, 
cÚ‹xt
, 
id
, 
this
)

2687 
HRESULT
 
hr
;

2688 ià(
pOldAùiÚ
è
CREATE_TASK
 
	`DEFINE_RET_TYPE
()ÕOldAùiÚ).
	`wa™
();

2691 
vd_Width
 = 
vd_Cu¼’tFÜm©s
[
id
].
width
;

2692 
vd_Height
 = 
vd_Cu¼’tFÜm©s
[
id
].
height
;

2693 
vd_F¿meR©e
 = 
vd_Cu¼’tFÜm©s
[
id
].
MF_MT_FRAME_RATE_NUMERATOR
 /

2694 
vd_Cu¼’tFÜm©s
[
id
].
MF_MT_FRAME_RATE_DENOMINATOR
;

2695 #ifdeà
WINRT


2696 #ifdeà
HAVE_CONCURRENCY


2697 ià(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
)) {

2698 
DEFINE_TASK
<> 
_sk
;

2699 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
id
, &
_sk
, 
this
)

2700 
	`MAKE_WRL_REF
(
_AsyncAùiÚ
è
pAùiÚ
;

2701 
HRESULT
 
hr
 = 
	`£tDeviûFÜm©
(
	`DEREF_AGILE_WRL_OBJ
(
vd_pMedC­
), (
DWORD
è
id
, &
pAùiÚ
);

2702 ià(
	`SUCCEEDED
(
hr
)è
_sk
 = 
CREATE_TASK
 
	`DEFINE_RET_TYPE
()(
pAùiÚ
);

2703 
	`END_CALL_IN_CONTEXT
(
hr
)

2704 ià(
	`SUCCEEDED
(
hr
)è
_sk
.
	`wa™
();

2708 
hr
 = 
	`£tDeviûFÜm©
(
vd_pSourû
, (
DWORD
è
id
);

2709 
vd_IsS‘u³d
 = (
	`SUCCEEDED
(
hr
));

2710 if(
vd_IsS‘u³d
)

2711 
	`DebugPrštOut
(
L
"\n\nVIDEODEVICE %i: Deviû i £tu³d \n", 
vd_Cu¼’tNumb”
);

2712 
vd_P»vP¬am‘rs
 = 
	`g‘P¬am‘rs
();

2713 #ifdeà
WINRT


2714 #ifdeà
HAVE_CONCURRENCY


2715 
	`END_CREATE_ASYNC
(
hr
));

2717  
Œue
;

2719  
vd_IsS‘u³d
;

2724 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: IÁ”çû IMFMedŸSourû cªnÙ bgÙ \n", 
vd_Cu¼’tNumb”
);

2725  
çl£
;

2730 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Deviû i £tu³d‡Ì—dy \n", 
vd_Cu¼’tNumb”
);

2731  
çl£
;

2733 
	}
}

2735 
boŞ
 
	gvideoDeviû
::
	$£tupDeviû
(
w
, 
h
, 
id—lF¿m”©e
)

2737 
id
 = 
	`fšdTy³
(
w
 * 
h
, 
id—lF¿m”©e
);

2738 ifĞ
id
 < 0 )

2739  
çl£
;

2741  
	`£tupDeviû
(
id
);

2742 
	}
}

2744 
wch¬_t
 *
	gvideoDeviû
::
	$g‘Name
()

2746  
vd_pFr›ndlyName
;

2747 
	}
}

2749 
	gvideoDeviû
::~
	$videoDeviû
()

2751 
	`şo£Deviû
();

2752 #ifdeà
WINRT


2753 
	`RELEASE_WRL
(
vd_pMedC­
)

2755 
	`SaãR–—£
(&
vd_pSourû
);

2756 if(
vd_pFr›ndlyName
)

2757 
	`CoTaskMemF»e
(
vd_pFr›ndlyName
);

2758 
	}
}

2760 #ifdeà
WINRT


2761 
HRESULT
 
	gvideoDeviû
::
’um”©eC­tu»FÜm©s
(
	$MAKE_WRL_REF
(
_MedŸC­tu»
è
pSourû
)

2763 
HRESULT
 
hr
;

2764 
	`MAKE_WRL_OBJ
(
_VideoDeviûCÚŒŞËr
è
pDevCÚt
;

2765 
	`WRL_PROP_GET
(
pSourû
, 
VideoDeviûCÚŒŞËr
, 
pDevCÚt
, 
hr
)

2766 ià(
	`FAILED
(
hr
))  hr;

2767 
	`GET_WRL_OBJ_FROM_OBJ
(
_MedŸDeviûCÚŒŞËr
, 
pMedDevCÚt
, 
pDevCÚt
, 
hr
)

2768 ià(
	`FAILED
(
hr
))  hr;

2769 
	`MAKE_WRL_OBJ
(
_VeùÜV›w
<
	`MAKE_WRL_REF
(
_MedŸEncodšgPrİ”t›s
)>è
pVeùÜ
;

2770 
	`WRL_METHOD
(
pMedDevCÚt
, 
G‘AvaabËMedŸSŒ—mPrİ”t›s
, 
pVeùÜ
, 
hr
, 
	`WRL_ENUM_GET
(
_MedŸSŒ—mTy³
, 
MedŸSŒ—mTy³
, 
VideoP»v›w
))

2771 ià(
	`FAILED
(
hr
))  hr;

2772 
UINT32
 
couÁ
;

2773 
	`WRL_PROP_GET
(
pVeùÜ
, 
Size
, 
couÁ
, 
hr
)

2774 ià(
	`FAILED
(
hr
))  hr;

2775 
UINT32
 
i
 = 0; i < 
couÁ
; i++) {

2776 
	`MAKE_WRL_OBJ
(
_MedŸEncodšgPrİ”t›s
è
pMedEncPrİs
;

2777 
	`WRL_METHOD
(
pVeùÜ
, 
G‘At
, 
pMedEncPrİs
, 
hr
, 
i
)

2778 ià(
	`FAILED
(
hr
))  hr;

2779 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
 = 
NULL
;

2780 
hr
 = 
MedŸSšk
::
	`CÚv”tPrİ”t›sToMedŸTy³
(
	`DEREF_AS_NATIVE_WRL_OBJ
(
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s
, 
pMedEncPrİs
), &
pTy³
);

2781 ià(
	`FAILED
(
hr
))  hr;

2782 
MedŸTy³
 
MT
 = 
FÜm©R—d”
::
	`R—d
(
pTy³
.
	`G‘
());

2783 
vd_Cu¼’tFÜm©s
.
	`push_back
(
MT
);

2785  
hr
;

2786 
	}
}

2789 
HRESULT
 
	gvideoDeviû
::
	$’um”©eC­tu»FÜm©s
(
IMFMedŸSourû
 *
pSourû
)

2791 
_ComPŒ
<
IMFP»£Á©iÚDesütÜ
> 
pPD
 = 
NULL
;

2792 
_ComPŒ
<
IMFSŒ—mDesütÜ
> 
pSD
 = 
NULL
;

2793 
_ComPŒ
<
IMFMedŸTy³HªdËr
> 
pHªdËr
 = 
NULL
;

2794 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
 = 
NULL
;

2795 
HRESULT
 
hr
 = 
pSourû
->
	`C»©eP»£Á©iÚDesütÜ
(
pPD
.
	`G‘Add»ssOf
());

2796 ià(
	`FAILED
(
hr
))

2798 
dÚe
;

2800 
BOOL
 
fS–eùed
;

2801 
hr
 = 
pPD
->
	`G‘SŒ—mDesütÜByIndex
(0, &
fS–eùed
, 
pSD
.
	`G‘Add»ssOf
());

2802 ià(
	`FAILED
(
hr
))

2804 
dÚe
;

2806 
hr
 = 
pSD
->
	`G‘MedŸTy³HªdËr
(
pHªdËr
.
	`G‘Add»ssOf
());

2807 ià(
	`FAILED
(
hr
))

2809 
dÚe
;

2811 
DWORD
 
cTy³s
 = 0;

2812 
hr
 = 
pHªdËr
->
	`G‘MedŸTy³CouÁ
(&
cTy³s
);

2813 ià(
	`FAILED
(
hr
))

2815 
dÚe
;

2817 
DWORD
 
i
 = 0; i < 
cTy³s
; i++)

2819 
hr
 = 
pHªdËr
->
	`G‘MedŸTy³ByIndex
(
i
, 
pTy³
.
	`G‘Add»ssOf
());

2820 ià(
	`FAILED
(
hr
))

2822 
dÚe
;

2824 
MedŸTy³
 
MT
 = 
FÜm©R—d”
::
	`R—d
(
pTy³
.
	`G‘
());

2825 
vd_Cu¼’tFÜm©s
.
	`push_back
(
MT
);

2828 
dÚe
:

2829  
hr
;

2830 
	}
}

2832 
	gvideoDeviûs
::
	$videoDeviûs
(): 
	$couÁ
(0)

2834 #ifdeà
WINRT


2835 
vds_’umTask
 = 
nuÎ±r
;

2837 
	}
}

2839 
	gvideoDeviûs
::
	$ş—rDeviûs
()

2841 
¡d
::
veùÜ
<
videoDeviû
 *>::
™”©Ü
 
i
 = 
vds_Deviûs
.
	`begš
();

2842 ; 
i
 !ğ
vds_Deviûs
.
	`’d
(); ++i)

2843 
	`d–‘e
 (*
i
);

2844 
vds_Deviûs
.
	`ş—r
();

2845 
	}
}

2847 
	gvideoDeviûs
::~
	$videoDeviûs
()

2849 
	`ş—rDeviûs
();

2850 
	}
}

2852 
videoDeviû
 * 
	gvideoDeviûs
::
	$g‘Deviû
(
i
)

2854 if(
i
 >ğ
vds_Deviûs
.
	`size
())

2856  
NULL
;

2858 if(
i
 < 0)

2860  
NULL
;

2862  
vds_Deviûs
[
i
];

2863 
	}
}

2865 #ifdeà
WINRT


2866 
	gvideoDeviûs
::
	$š™Deviûs
(
_DeviûCÏss
 
devCÏss
)

2868 
HRESULT
 
hr
 = 
S_OK
;

2869 
	`ACTIVATE_STATIC_OBJ
(
RuÁimeCÏss_Wšdows_Deviûs_Enum”©iÚ_DeviûInfÜm©iÚ
, 
	`MAKE_WRL_OBJ
(
_DeviûInfÜm©iÚStics
), 
pDevSt
, 
hr
)

2870 ià(
	`FAILED
(
hr
))  hr;

2871 
	`MAKE_WRL_REF
(
_AsyncO³¿tiÚ
<MAKE_WRL_REF(
_DeviûInfÜm©iÚCŞËùiÚ
)>è
pAùiÚ
;

2872 
	`WRL_METHOD
(
pDevSt
, 
_FšdAÎAsyncDeviûCÏss
, 
pAùiÚ
, 
hr
, 
devCÏss
)

2873 ià(
	`SUCCEEDED
(
hr
)) {

2874 #ifdeà
HAVE_CONCURRENCY


2875 
	`SAVE_CURRENT_CONTEXT
(
cÚ‹xt
);

2876 
vds_’umTask
 = 
»š‹½»t_ÿ¡
<
	`MAKE_WRL_REF
(
_AsyncAùiÚ
)>(
	`BEGIN_CREATE_ASYNC
(, 
pAùiÚ
, 
cÚ‹xt
, 
this
)

2877 
HRESULT
 
hr
 = 
S_OK
;

2878 
	`MAKE_WRL_OBJ
(
_VeùÜV›w
<
	`MAKE_WRL_REF
(
_DeviûInfÜm©iÚ
)>è
pVeùÜ
 =

2879 
CREATE_TASK
 
	`DEFINE_RET_TYPE
(
	`MAKE_WRL_REF
(
_VeùÜV›w
<MAKE_WRL_REF(
_DeviûInfÜm©iÚ
)>))(
pAùiÚ
).
	`g‘
();

2880 ià(
	`SUCCEEDED
(
hr
)è
	`WRL_PROP_GET
(
pVeùÜ
, 
Size
, 
couÁ
, hr)

2881 ià(
	`SUCCEEDED
(
hr
è&& 
couÁ
 > 0) {

2882 
UINT32
 
i
 = 0; i < 
couÁ
; i++) {

2883 
videoDeviû
 *
vd
 = 
Ãw
 videoDevice;

2884 
	`MAKE_WRL_OBJ
(
_IDeviûInfÜm©iÚ
è
pDeviû
;

2885 
	`WRL_METHOD
(
pVeùÜ
, 
G‘At
, 
pDeviû
, 
hr
, 
i
)

2886 ià(
	`SUCCEEDED
(
hr
)) {

2887 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
vd
, 
pDeviû
, 
i
)

2888 
vd
->
	`»adInfoOfDeviû
(
	`DEREF_WRL_OBJ
(
pDeviû
), 
i
);

2889 
END_CALL_IN_CONTEXT_BASE


2890 
vds_Deviûs
.
	`push_back
(
vd
);

2894 
	`END_CREATE_ASYNC
(
hr
));

2897  
hr
;

2898 
	}
}

2900 
	gvideoDeviûs
::
	$š™Deviûs
(
IMFA‰ribu‹s
 *
pA‰ribu‹s
)

2902 
	`ş—rDeviûs
();

2903 
IMFAùiv©e
 **
µDeviûs
 = 
NULL
;

2904 
HRESULT
 
hr
 = 
	`MFEnumDeviûSourûs
(
pA‰ribu‹s
, &
µDeviûs
, &
couÁ
);

2905 ià(
	`SUCCEEDED
(
hr
))

2907 if(
couÁ
 > 0)

2909 
UINT32
 
i
 = 0; i < 
couÁ
; i++)

2911 
videoDeviû
 *
vd
 = 
Ãw
 videoDevice;

2912 
vd
->
	`»adInfoOfDeviû
(
µDeviûs
[
i
], i);

2913 
vds_Deviûs
.
	`push_back
(
vd
);

2914 
	`SaãR–—£
(&
µDeviûs
[
i
]);

2916 
	`SaãR–—£
(
µDeviûs
);

2919 
hr
 = 
E_INVALIDARG
;

2923 
	`DebugPrštOut
(
L
"VIDEODEVICES: The instances ofhe videoDevice class cannot be created\n");

2925  
hr
;

2926 
	}
}

2929 
	gvideoDeviûs
::
	$g‘CouÁ
()

2931  ()
vds_Deviûs
.
	`size
();

2932 
	}
}

2934 
	gvideoDeviûs
& videoDeviûs::
	$g‘In¡ªû
()

2936 
videoDeviûs
 
š¡ªû
;

2937  
š¡ªû
;

2938 
	}
}

2940 
	gP¬am‘r
::
	$P¬am‘r
()

2942 
Cu¼’tV®ue
 = 0;

2943 
Mš
 = 0;

2944 
Max
 = 0;

2945 
S‹p
 = 0;

2946 
DeçuÉ
 = 0;

2947 
FÏg
 = 0;

2948 
	}
}

2950 
	gMedŸTy³
::
	$MedŸTy³
()

2952 
pMF_MT_AM_FORMAT_TYPEName
 = 
NULL
;

2953 
pMF_MT_MAJOR_TYPEName
 = 
NULL
;

2954 
pMF_MT_SUBTYPEName
 = 
NULL
;

2955 
	`CË¬
();

2956 
	}
}

2958 
	gMedŸTy³
::~
	$MedŸTy³
()

2960 
	`CË¬
();

2961 
	}
}

2963 
	gMedŸTy³
::
	$CË¬
()

2965 
MF_MT_FRAME_SIZE
 = 0;

2966 
height
 = 0;

2967 
width
 = 0;

2968 
MF_MT_YUV_MATRIX
 = 0;

2969 
MF_MT_VIDEO_LIGHTING
 = 0;

2970 
MF_MT_DEFAULT_STRIDE
 = 0;

2971 
MF_MT_VIDEO_CHROMA_SITING
 = 0;

2972 
MF_MT_FIXED_SIZE_SAMPLES
 = 0;

2973 
MF_MT_VIDEO_NOMINAL_RANGE
 = 0;

2974 
MF_MT_FRAME_RATE_NUMERATOR
 = 0;

2975 
MF_MT_FRAME_RATE_DENOMINATOR
 = 0;

2976 
MF_MT_PIXEL_ASPECT_RATIO
 = 0;

2977 
MF_MT_PIXEL_ASPECT_RATIO_low
 = 0;

2978 
MF_MT_ALL_SAMPLES_INDEPENDENT
 = 0;

2979 
MF_MT_FRAME_RATE_RANGE_MIN
 = 0;

2980 
MF_MT_FRAME_RATE_RANGE_MIN_low
 = 0;

2981 
MF_MT_SAMPLE_SIZE
 = 0;

2982 
MF_MT_VIDEO_PRIMARIES
 = 0;

2983 
MF_MT_INTERLACE_MODE
 = 0;

2984 
MF_MT_FRAME_RATE_RANGE_MAX
 = 0;

2985 
MF_MT_FRAME_RATE_RANGE_MAX_low
 = 0;

2986 
	`mem£t
(&
MF_MT_MAJOR_TYPE
, 0, (
GUID
));

2987 
	`mem£t
(&
MF_MT_AM_FORMAT_TYPE
, 0, (
GUID
));

2988 
	`mem£t
(&
MF_MT_SUBTYPE
, 0, (
GUID
));

2989 
	}
}

2991 
	gvideoIÅut
::
	$videoIÅut
(): 
	$acûssToDeviûs
(
çl£
)

2993 
	`DebugPrštOut
(
L
"\n***** VIDEOINPUT LIBRARY - 2013 (Author: Evgeny Pereguda) *****\n\n");

2994 
	`upd©eLi¡OfDeviûs
();

2995 if(!
acûssToDeviûs
)

2996 
	`DebugPrštOut
(
L
"INITIALIZATION: There is‚ot‡ny suitable video device\n");

2997 
	}
}

2999 
	gvideoIÅut
::
	$upd©eLi¡OfDeviûs
()

3001 
MedŸ_Found©iÚ
 *
MF
 = &MedŸ_Found©iÚ::
	`g‘In¡ªû
();

3002 
acûssToDeviûs
 = 
MF
->
	`budLi¡OfDeviûs
();

3003 if(!
acûssToDeviûs
)

3004 
	`DebugPrštOut
(
L
"UPDATING: There is‚ot‡ny suitable video device\n");

3005 
	}
}

3007 
	gvideoIÅut
::~
	$videoIÅut
()

3009 
	`DebugPrštOut
(
L
"\n***** CLOSE VIDEOINPUT LIBRARY - 2013 *****\n\n");

3010 
	}
}

3012 
IMFMedŸSourû
 *
	gvideoIÅut
::
	$g‘MedŸSourû
(
deviûID
)

3014 if(
acûssToDeviûs
)

3016 
videoDeviû
 * 
VD
 = 
videoDeviûs
::
	`g‘In¡ªû
().
	`g‘Deviû
(
deviûID
);

3017 if(
VD
)

3019 
IMFMedŸSourû
 *
out
 = 
VD
->
	`g‘MedŸSourû
();

3020 if(!
out
)

3021 
	`DebugPrštOut
(
L
"VideoDeviû %i: Th”i nÙ‡ny su™abË IMFMedŸSourû iÁ”çû\n", 
deviûID
);

3022  
out
;

3027 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3029  
NULL
;

3030 
	}
}

3032 
boŞ
 
	gvideoIÅut
::
	$£tupDeviû
(
deviûID
, 
id
)

3034 ià(
deviûID
 < 0 )

3036 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3037  
çl£
;

3039 if(
acûssToDeviûs
)

3041 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3042 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3043 if(
VD
)

3045 
boŞ
 
out
 = 
VD
->
	`£tupDeviû
(
id
);

3046 if(!
out
)

3047 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Thi deviû cªnÙ b¡¬‹d\n", 
deviûID
);

3048  
out
;

3053 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3055  
çl£
;

3056 
	}
}

3058 
boŞ
 
	gvideoIÅut
::
	$£tupDeviû
(
deviûID
, 
w
, 
h
, 
id—lF¿m”©e
)

3060 ià(
deviûID
 < 0 )

3062 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3063  
çl£
;

3065 if(
acûssToDeviûs
)

3067 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3068 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3069 if(
VD
)

3071 
boŞ
 
out
 = 
VD
->
	`£tupDeviû
(
w
, 
h
, 
id—lF¿m”©e
);

3072 if(!
out
)

3073 
	`DebugPrštOut
(
L
"VIDEODEVICE %i:hi deviû cªnÙ b¡¬‹d\n", 
deviûID
);

3074  
out
;

3079 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): Th”i nÙ‡ny su™abË videØdeviû\n", 
deviûID
);

3081  
çl£
;

3082 
	}
}

3084 
MedŸTy³
 
	gvideoIÅut
::
	$g‘FÜm©
(
deviûID
, 
id
)

3086 ià(
deviûID
 < 0)

3088 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3089  
	`MedŸTy³
();

3091 if(
acûssToDeviûs
)

3093 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3094 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3095 if(
VD
)

3096  
VD
->
	`g‘FÜm©
(
id
);

3100 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3102  
	`MedŸTy³
();

3103 
	}
}

3105 
boŞ
 
	gvideoIÅut
::
	$isDeviûS‘up
(
deviûID
)

3107 ià(
deviûID
 < 0)

3109 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3110  
çl£
;

3112 if(
acûssToDeviûs
)

3114 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3115 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3116 if(
VD
)

3117  
VD
->
	`isDeviûS‘up
();

3121 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3123  
çl£
;

3124 
	}
}

3126 
boŞ
 
	gvideoIÅut
::
	$isDeviûMedŸSourû
(
deviûID
)

3128 ià(
deviûID
 < 0)

3130 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3131  
çl£
;

3133 if(
acûssToDeviûs
)

3135 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3136 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3137 if(
VD
)

3138  
VD
->
	`isDeviûMedŸSourû
();

3142 
	`DebugPrštOut
(
L
"Device(s): There is‚ot‡ny suitable video device\n");

3144  
çl£
;

3145 
	}
}

3147 
boŞ
 
	gvideoIÅut
::
	$isDeviûRawD©aSourû
(
deviûID
)

3149 ià(
deviûID
 < 0)

3151 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3152  
çl£
;

3154 if(
acûssToDeviûs
)

3156 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3157 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3158 if(
VD
)

3160 
boŞ
 
isRaw
 = 
VD
->
	`isDeviûRawD©aSourû
();

3161  
isRaw
;

3166 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3168  
çl£
;

3169 
	}
}

3171 
boŞ
 
	gvideoIÅut
::
	$isF¿meNew
(
deviûID
)

3173 ià(
deviûID
 < 0)

3175 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3176  
çl£
;

3178 if(
acûssToDeviûs
)

3180 if(!
	`isDeviûS‘up
(
deviûID
))

3182 if(
	`isDeviûMedŸSourû
(
deviûID
))

3183  
çl£
;

3185 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3186 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3187 if(
VD
)

3189  
VD
->
	`isF¿meNew
();

3194 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3196  
çl£
;

3197 
	}
}

3199 #ifdeà
WINRT


3200 
	gvideoIÅut
::
	$wa™FÜDeviû
(
deviûID
)

3202 ià(
deviûID
 < 0)

3204 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3207 if(
acûssToDeviûs
)

3209 if(!
	`isDeviûS‘up
(
deviûID
))

3211 if(
	`isDeviûMedŸSourû
(
deviûID
))

3214 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3215 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3216 if(
VD
)

3218 
VD
->
	`wa™FÜDeviû
();

3223 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3226 
	}
}

3229 
	gvideoIÅut
::
	$g‘CouÁFÜm©s
(
deviûID
) const

3231 ià(
deviûID
 < 0)

3233 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3236 if(
acûssToDeviûs
)

3238 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3239 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3240 if(
VD
)

3241  
VD
->
	`g‘CouÁFÜm©s
();

3245 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3248 
	}
}

3250 
	gvideoIÅut
::
	$şo£AÎDeviûs
()

3252 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3253 
i
 = 0; i < 
VDS
->
	`g‘CouÁ
(); i++)

3254 
	`şo£Deviû
(
i
);

3255 
	}
}

3257 
	gvideoIÅut
::
	$£tP¬am‘rs
(
deviûID
, 
CamP¬am‘rs
 
·¿m‘rs
)

3259 ià(
deviûID
 < 0)

3261 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3264 if(
acûssToDeviûs
)

3266 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3267 
videoDeviû
 *
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3268 if(
VD
)

3269 
VD
->
	`£tP¬am‘rs
(
·¿m‘rs
);

3273 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3275 
	}
}

3277 
CamP¬am‘rs
 
	gvideoIÅut
::
	$g‘P¬am‘rs
(
deviûID
)

3279 
CamP¬am‘rs
 
out
;

3280 ià(
deviûID
 < 0)

3282 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3283  
out
;

3285 if(
acûssToDeviûs
)

3287 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3288 
videoDeviû
 *
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3289 if(
VD
)

3290 
out
 = 
VD
->
	`g‘P¬am‘rs
();

3294 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3296  
out
;

3297 
	}
}

3299 
	gvideoIÅut
::
	$şo£Deviû
(
deviûID
)

3301 ià(
deviûID
 < 0)

3303 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3306 if(
acûssToDeviûs
)

3308 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3309 
videoDeviû
 *
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3310 if(
VD
)

3311 
VD
->
	`şo£Deviû
();

3315 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3317 
	}
}

3319 
	gvideoIÅut
::
	$g‘Width
(
deviûID
) const

3321 ià(
deviûID
 < 0)

3323 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3326 if(
acûssToDeviûs
)

3328 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3329 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3330 if(
VD
)

3331  
VD
->
	`g‘Width
();

3335 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3338 
	}
}

3340 
	gvideoIÅut
::
	$g‘Height
(
deviûID
) const

3342 ià(
deviûID
 < 0)

3344 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3347 if(
acûssToDeviûs
)

3349 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3350 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3351 if(
VD
)

3352  
VD
->
	`g‘Height
();

3356 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3359 
	}
}

3361 
	gvideoIÅut
::
	$g‘F¿meR©e
(
deviûID
) const

3363 ià(
deviûID
 < 0)

3365 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3368 if(
acûssToDeviûs
)

3370 
videoDeviû
 * 
VD
 = 
videoDeviûs
::
	`g‘In¡ªû
().
	`g‘Deviû
(
deviûID
);

3371 if(
VD
)

3372  
VD
->
	`g‘F¿meR©e
();

3376 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3379 
	}
}

3381 
wch¬_t
 *
	gvideoIÅut
::
	$g‘NameVideoDeviû
(
deviûID
)

3383 ià(
deviûID
 < 0)

3385 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3386  
NULL
;

3388 if(
acûssToDeviûs
)

3390 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3391 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3392 if(
VD
)

3393  
VD
->
	`g‘Name
();

3397 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3399  
L
"Empty";

3400 
	}
}

3402 
	gvideoIÅut
::
	$li¡Deviûs
(
boŞ
 
s’t
)

3404 
out
 = 0;

3405 if(
acûssToDeviûs
)

3407 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3408 #ifdeà
WINRT


3409 
VDS
->
	`wa™In™
();

3411 
out
 = 
VDS
->
	`g‘CouÁ
();

3412 if(!
s’t
è
	`DebugPrštOut
(
L
"\nVIDEOINPUT SPY MODE!\n\n");

3413 if(!
s’t
è
	`DebugPrštOut
(
L
"SETUP: Looking For Capture Devices\n");

3414 
i
 = 0; i < 
out
; i++)

3416 if(!
s’t
è
	`DebugPrštOut
(
L
"SETUP: %iè% \n",
i
, 
	`g‘NameVideoDeviû
(i));

3418 if(!
s’t
è
	`DebugPrštOut
(
L
"SETUP: %˜Deviû(sèfound\n\n", 
out
);

3422 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3424  
out
;

3425 
	}
}

3427 
	gvideoIÅut
& videoIÅut::
	$g‘In¡ªû
()

3429 
videoIÅut
 
š¡ªû
;

3430  
š¡ªû
;

3431 
	}
}

3433 
boŞ
 
	gvideoIÅut
::
	$isDeviûsAcûabË
()

3435  
acûssToDeviûs
;

3436 
	}
}

3438 #ifdeà
_DEBUG


3439 
	gvideoIÅut
::
	$£tV”bo£
(
boŞ
 
¡©e
)

3441 
DPO
 *
dpo
 = &DPO::
	`g‘In¡ªû
();

3442 
dpo
->
	`£tV”bo£
(
¡©e
);

3443 
	}
}

3446 
	gvideoIÅut
::
£tEm”g’cyStİEv’t
(
deviûID
, *
u£rD©a
, (*
func
)(, *))

3448 ià(
deviûID
 < 0)

3450 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3453 if(
acûssToDeviûs
)

3455 if(
func
)

3457 
videoDeviûs
 *
VDS
 = &videoDeviûs::
	`g‘In¡ªû
();

3458 
videoDeviû
 * 
VD
 = 
VDS
->
	`g‘Deviû
(
deviûID
);

3459 if(
VD
)

3460 
VD
->
	`£tEm”g’cyStİEv’t
(
u£rD©a
, 
func
);

3465 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3467 
	}
}

3469 
boŞ
 
	gvideoIÅut
::
	$g‘Pix–s
(
deviûID
, * 
d¡Bufãr
, 
boŞ
 
æRedAndBlue
, boŞ 
æImage
)

3471 
boŞ
 
sucûss
 = 
çl£
;

3472 ià(
deviûID
 < 0)

3474 
	`DebugPrštOut
(
L
"VIDEODEVICE %i: Inv®id deviû ID\n", 
deviûID
);

3475  
sucûss
;

3477 if(
acûssToDeviûs
)

3479 
boŞ
 
isRaw
 = 
	`isDeviûRawD©aSourû
(
deviûID
);

3480 if(
isRaw
)

3482 
videoDeviû
 *
VD
 = 
videoDeviûs
::
	`g‘In¡ªû
().
	`g‘Deviû
(
deviûID
);

3483 
RawImage
 *
RIOut
 = 
VD
->
	`g‘RawImageOut
();

3484 if(
RIOut
)

3486 cÚ¡ 
by‹s
 = 3;

3487 cÚ¡ 
height
 = 
VD
->
	`g‘Height
();

3488 cÚ¡ 
width
 = 
VD
->
	`g‘Width
();

3489 cÚ¡ 
size
 = 
by‹s
 * 
width
 * 
height
;

3490 if(
size
 =ğ
RIOut
->
	`g‘Size
())

3492 
	`´oûssPix–s
(
RIOut
->
	`g‘pPix–s
(), 
d¡Bufãr
, 
width
, 
height
, 
by‹s
, 
æRedAndBlue
, 
æImage
);

3493 
sucûss
 = 
Œue
;

3497 
	`DebugPrštOut
(
L
"ERROR: GetPixels() - bufferSizes do‚ot match!\n");

3502 
	`DebugPrštOut
(
L
"ERROR: G‘Pix–s(è- UÇbËØg¿b f¿mfÜ deviû %i\n", 
deviûID
);

3507 
	`DebugPrštOut
(
L
"ERROR: G‘Pix–s(è- NÙ„aw d©¨sourû deviû %i\n", 
deviûID
);

3512 
	`DebugPrštOut
(
L
"VIDEODEVICE(s): There is‚ot‡ny suitable video device\n");

3514  
sucûss
;

3515 
	}
}

3517 
	gvideoIÅut
::
	$´oûssPix–s
(* 
¤c
, * 
d¡
, 
width
,

3518 
height
, 
bµ
, 
boŞ
 
bRGB
, boŞ 
bFl
)

3520 
widthInBy‹s
 = 
width
 * 
bµ
;

3521 
numBy‹s
 = 
widthInBy‹s
 * 
height
;

3522 *
d¡IÁ
, *
¤cIÁ
;

3523 if(!
bRGB
)

3525 if(
bFl
)

3527 
y
 = 0; y < 
height
; y++)

3529 
d¡IÁ
 = (*)(
d¡
 + (
y
 * 
widthInBy‹s
));

3530 
¤cIÁ
 = (*)(
¤c
 + ( (
height
 -
y
 -1è* 
widthInBy‹s
));

3531 
	`memıy
(
d¡IÁ
, 
¤cIÁ
, 
widthInBy‹s
);

3536 
	`memıy
(
d¡
, 
¤c
, 
numBy‹s
);

3541 if(
bFl
)

3543 
x
 = 0;

3544 
y
 = (
height
 - 1è* 
widthInBy‹s
;

3545 
¤c
 +ğ
y
;

3546 
i
 = 0; i < 
numBy‹s
; i+=3)

3548 if(
x
 >ğ
width
)

3550 
x
 = 0;

3551 
¤c
 -ğ
widthInBy‹s
*2;

3553 *
d¡
 = *(
¤c
+2);

3554 
d¡
++;

3555 *
d¡
 = *(
¤c
+1);

3556 
d¡
++;

3557 *
d¡
 = *
¤c
;

3558 
d¡
++;

3559 
¤c
+=3;

3560 
x
++;

3565 
i
 = 0; i < 
numBy‹s
; i+=3)

3567 *
d¡
 = *(
¤c
+2);

3568 
d¡
++;

3569 *
d¡
 = *(
¤c
+1);

3570 
d¡
++;

3571 *
d¡
 = *
¤c
;

3572 
d¡
++;

3573 
¤c
+=3;

3577 
	}
}

3581 şas 
	cCvC­tu»CAM_MSMF
 : 
public
 
CvC­tu»


3583 
public
:

3584 
CvC­tu»CAM_MSMF
();

3585 
	mvœtu®
 ~
CvC­tu»CAM_MSMF
();

3586 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

3587 
vœtu®
 
şo£
();

3588 
vœtu®
 
	$g‘Prİ”ty
() const;

3589 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

3590 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

3591 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

3592 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_MSMF
; }

3593 
´Ùeùed
:

3594 
	`š™
();

3595 
šdex
, 
width
, 
height
, 
fourcc
;

3596 
I¶Image
* 
äame
;

3597 
videoIÅut
 
VI
;

3598 #ifdeà
WINRT


3599 #ifdeà
HAVE_CONCURRENCY


3600 
DEFINE_TASK
<
boŞ
> 
İ’Task
;

3601 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
 
lock
;

3604 
	}
};

3606 #ifdeà
_DEBUG


3607 
	sSuµ»ssVideoIÅutMes§ges


3609 
Suµ»ssVideoIÅutMes§ges
(è{ 
	mvideoIÅut
::
£tV”bo£
(
Œue
); }

3612 
Suµ»ssVideoIÅutMes§ges
 
	gdo_™
;

3615 
	gCvC­tu»CAM_MSMF
::
	$CvC­tu»CAM_MSMF
():

3616 
	`šdex
(-1),

3617 
	`width
(-1),

3618 
	`height
(-1),

3619 
	`fourcc
(-1),

3620 
	`äame
(
NULL
),

3621 
	`VI
(
videoIÅut
::
	$g‘In¡ªû
())

3623 
	`CoIn™Ÿlize
(0);

3624 
	}
}

3626 
	gCvC­tu»CAM_MSMF
::~
	$CvC­tu»CAM_MSMF
()

3628 
	`şo£
();

3629 
	`CoUnš™Ÿlize
();

3630 
	}
}

3632 
	gCvC­tu»CAM_MSMF
::
	$şo£
()

3634 ifĞ
šdex
 >= 0 )

3636 
VI
.
	`şo£Deviû
(
šdex
);

3637 
šdex
 = -1;

3638 
	`cvR–—£Image
(&
äame
);

3640 
width
 = 
height
 = -1;

3641 
	}
}

3644 
boŞ
 
	gCvC­tu»CAM_MSMF
::
	$İ’
Ğ
_šdex
 )

3646 #ifdeà
WINRT


3647 #ifdeà
HAVE_CONCURRENCY


3648 
	`SAVE_CURRENT_CONTEXT
(
cÚ‹xt
);

3649 autØ
func
 = [
_šdex
, 
cÚ‹xt
, 
this
](
	`DEFINE_RET_VAL
(
boŞ
)è-> 
	`DEFINE_RET_FORMAL
(bool) {

3652 
Œy_šdex
 = 
_šdex
;

3653 
deviûs
 = 0;

3654 
	`şo£
();

3655 
deviûs
 = 
VI
.
	`li¡Deviûs
(
Œue
);

3656 ià(
deviûs
 == 0)

3657  
çl£
;

3658 
Œy_šdex
 =ry_šdex < 0 ? 0 : (Œy_šdex > 
deviûs
-1 ? devices-1 :ry_index);

3659 #ifdeà
WINRT


3660 
HRESULT
 
hr
;

3661 #ifdeà
HAVE_CONCURRENCY


3662 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
this
, 
Œy_šdex
)

3665 
VI
.
	`£tupDeviû
(
Œy_šdex
, 0, 0, 0);

3666 #ifdeà
WINRT


3667 #ifdeà
HAVE_CONCURRENCY


3668 
END_CALL_IN_CONTEXT_BASE


3669 
VI
.
	`wa™FÜDeviû
(
Œy_šdex
);

3670 
	`BEGIN_CALL_IN_CONTEXT
(
hr
, 
cÚ‹xt
, 
this
, 
Œy_šdex
)

3671 
HRESULT
 
hr
 = 
S_OK
;

3674 ifĞ!
VI
.
	`isF¿meNew
(
Œy_šdex
) )

3675 #ifdeà
WINRT


3676 
hr
 = 
E_FAIL
;

3678  
çl£
;

3680 
šdex
 = 
Œy_šdex
;

3681 #ifdeà
WINRT


3682 #ifdeà
HAVE_CONCURRENCY


3683 
END_CALL_IN_CONTEXT_BASE


3684 
	`RET_VAL
(
Œue
)

3686 
CÚcu¼’cy
::
ü™iÿl_£ùiÚ
::
scİed_lock
 
	`_LockHŞd”
(
lock
);

3687 
	`CREATE_OR_CONTINUE_TASK
(
İ’Task
, 
boŞ
, 
func
)

3690  
Œue
;

3691 
	}
}

3693 
boŞ
 
	gCvC­tu»CAM_MSMF
::
	$g¿bF¿me
()

3695 
VI
.
	`isDeviûS‘up
(
šdex
è&& !VI.
	`isF¿meNew
(index))

3696 
	`SË•
(1);

3697  
VI
.
	`isDeviûS‘up
(
šdex
);

3698 
	}
}

3700 
I¶Image
* 
	gCvC­tu»CAM_MSMF
::
	$»Œ›veF¿me
()

3702 cÚ¡ 
w
 = ()
VI
.
	`g‘Width
(
šdex
);

3703 cÚ¡ 
h
 = ()
VI
.
	`g‘Height
(
šdex
);

3704 ifĞ!
äame
 || 
w
 !ğäame->
width
 || 
h
 !ğäame->
height
 )

3706 ià(
äame
)

3707 
	`cvR–—£Image
Ğ&
äame
 );

3708 
äame
 = 
	`cvC»©eImage
Ğ
	`cvSize
(
w
,
h
), 8, 3 );

3710 
VI
.
	`g‘Pix–s
Ğ
šdex
, (
uch¬
*)
äame
->
imageD©a
, 
çl£
, 
Œue
 );

3711  
äame
;

3712 
	}
}

3714 
	gCvC­tu»CAM_MSMF
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

3717  
´İ”ty_id
 )

3719 
CV_CAP_PROP_FRAME_WIDTH
:

3720  
VI
.
	`g‘Width
(
šdex
);

3721 
CV_CAP_PROP_FRAME_HEIGHT
:

3722  
VI
.
	`g‘Height
(
šdex
);

3723 
CV_CAP_PROP_FPS
:

3724  
VI
.
	`g‘F¿meR©e
(
šdex
);

3729 
	}
}

3730 
boŞ
 
	gCvC­tu»CAM_MSMF
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

3733 
ås
 = 0;

3734 
boŞ
 
hªdËd
 = 
çl£
;

3735  
´İ”ty_id
 )

3737 
CV_CAP_PROP_FRAME_WIDTH
:

3738 
width
 = 
	`cvRound
(
v®ue
);

3739 
ås
 = 
VI
.
	`g‘F¿meR©e
(
šdex
);

3740 
hªdËd
 = 
Œue
;

3742 
CV_CAP_PROP_FRAME_HEIGHT
:

3743 
height
 = 
	`cvRound
(
v®ue
);

3744 
ås
 = 
VI
.
	`g‘F¿meR©e
(
šdex
);

3745 
hªdËd
 = 
Œue
;

3747 
CV_CAP_PROP_FPS
:

3748 
width
 = ()
VI
.
	`g‘Height
(
šdex
);

3749 
height
 = ()
VI
.
	`g‘Width
(
šdex
);

3750 
ås
 = 
	`cvRound
(
v®ue
);

3754 iàĞ
hªdËd
 ) {

3755 ifĞ
width
 > 0 && 
height
 > 0 )

3757 ifĞ(
width
 !ğ()
VI
.
	`g‘Width
(
šdex
è|| 
height
 !ğ()VI.
	`g‘Height
(šdexè|| 
ås
 !ğVI.
	`g‘F¿meR©e
(index))

3758 && 
VI
.
	`isDeviûS‘up
(
šdex
))

3760 
VI
.
	`şo£Deviû
(
šdex
);

3761 
VI
.
	`£tupDeviû
(
šdex
, 
width
, 
height
, 
ås
);

3763 
width
 = 
height
 = -1;

3764  
VI
.
	`isDeviûS‘up
(
šdex
);

3766  
Œue
;

3769  
çl£
;

3770 
	}
}

3772 şas 
	cCvC­tu»Fe_MSMF
 : 
public
 
CvC­tu»


3774 
public
:

3775 
CvC­tu»Fe_MSMF
();

3776 
	mvœtu®
 ~
CvC­tu»Fe_MSMF
();

3778 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
 );

3779 
vœtu®
 
şo£
();

3781 
vœtu®
 
	$g‘Prİ”ty
() const;

3782 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

3783 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

3784 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

3785 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_MSMF
; }

3786 
´Ùeùed
:

3787 
ImageG¿bb”Th»ad
* 
g¿bb”Th»ad
;

3788 
IMFMedŸSourû
* 
videoFeSourû
;

3789 
¡d
::
veùÜ
<
MedŸTy³
> 
ÿ±u»FÜm©s
;

3790 
ÿ±u»FÜm©Index
;

3791 
I¶Image
* 
äame
;

3792 
boŞ
 
isO³Ãd
;

3794 
HRESULT
 
	`’um”©eC­tu»FÜm©s
(
IMFMedŸSourû
 *
pSourû
);

3795 
HRESULT
 
	$g‘SourûDu¿tiÚ
(
IMFMedŸSourû
 *
pSourû
, 
MFTIME
 *
pDu¿tiÚ
) const;

3796 
	}
};

3798 
	gCvC­tu»Fe_MSMF
::
	$CvC­tu»Fe_MSMF
():

3799 
	`g¿bb”Th»ad
(
NULL
),

3800 
	`videoFeSourû
(
NULL
),

3801 
	`ÿ±u»FÜm©Index
(0),

3802 
	`äame
(
NULL
),

3803 
	$isO³Ãd
(
çl£
)

3805 
	`MFS¹up
(
MF_VERSION
);

3806 
	}
}

3808 
	gCvC­tu»Fe_MSMF
::~
	$CvC­tu»Fe_MSMF
()

3810 
	`şo£
();

3811 
	`MFShutdown
();

3812 
	}
}

3814 
boŞ
 
	gCvC­tu»Fe_MSMF
::
	$İ’
(cÚ¡ * 
f’ame
)

3816 ià(!
f’ame
)

3817  
çl£
;

3819 
wch¬_t
* 
unicodeFeName
 = 
Ãw
 wch¬_t[
	`¡¾’
(
f’ame
)+1];

3820 
	`MuÉiBy‹ToWideCh¬
(
CP_ACP
, 0, 
f’ame
, -1, 
unicodeFeName
, ()
	`¡¾’
(filename)+1);

3822 
MF_OBJECT_TYPE
 
ObjeùTy³
 = 
MF_OBJECT_INVALID
;

3824 
_ComPŒ
<
IMFSourûResŞv”
> 
pSourûResŞv”
 = 
NULL
;

3825 
IUnknown
* 
pUnkSourû
 = 
NULL
;

3827 
HRESULT
 
hr
 = 
	`MFC»©eSourûResŞv”
(
pSourûResŞv”
.
	`G‘Add»ssOf
());

3829 ià(
	`SUCCEEDED
(
hr
))

3831 
hr
 = 
pSourûResŞv”
->
	`C»©eObjeùFromURL
(

3832 
unicodeFeName
,

3833 
MF_RESOLUTION_MEDIASOURCE
,

3834 
NULL
,

3835 &
ObjeùTy³
,

3836 &
pUnkSourû


3841 ià(
	`SUCCEEDED
(
hr
))

3843 
hr
 = 
pUnkSourû
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
videoFeSourû
));

3846 
	`SaãR–—£
(&
pUnkSourû
);

3848 ià(
	`SUCCEEDED
(
hr
))

3850 
hr
 = 
	`’um”©eC­tu»FÜm©s
(
videoFeSourû
);

3853 ifĞ
ÿ±u»FÜm©s
.
	`em±y
() )

3855 
isO³Ãd
 = 
çl£
;

3859 ià(
	`SUCCEEDED
(
hr
))

3861 
hr
 = 
ImageG¿bb”Th»ad
::
	`C»©eIn¡ªû
(&
g¿bb”Th»ad
, 
videoFeSourû
, ()-2, 
Œue
);

3864 
isO³Ãd
 = 
	`SUCCEEDED
(
hr
);

3867 ià(
isO³Ãd
)

3869 
g¿bb”Th»ad
->
	`¡¬t
();

3872  
isO³Ãd
;

3873 
	}
}

3875 
	gCvC­tu»Fe_MSMF
::
	$şo£
()

3877 ià(
g¿bb”Th»ad
)

3879 
isO³Ãd
 = 
çl£
;

3880 
	`S‘Ev’t
(
g¿bb”Th»ad
->
	`g‘ImageG¿bb”
()->
ig_hFšish
);

3881 
g¿bb”Th»ad
->
	`¡İ
();

3882 
d–‘e
 
g¿bb”Th»ad
;

3885 ià(
videoFeSourû
)

3887 
videoFeSourû
->
	`Shutdown
();

3889 
	}
}

3891 
boŞ
 
	gCvC­tu»Fe_MSMF
::
	$£tPrİ”ty
(
´İ”ty_id
, 
v®ue
)

3895 (è
´İ”ty_id
;

3896 (è
v®ue
;

3897  
çl£
;

3898 
	}
}

3900 
	gCvC­tu»Fe_MSMF
::
	$g‘Prİ”ty
(
´İ”ty_id
) const

3903  
´İ”ty_id
 )

3905 
CV_CAP_PROP_FRAME_WIDTH
:

3906  
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
width
;

3907 
CV_CAP_PROP_FRAME_HEIGHT
:

3908  
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
height
;

3909 
CV_CAP_PROP_FRAME_COUNT
:

3911 
MFTIME
 
du¿tiÚ
;

3912 
	`g‘SourûDu¿tiÚ
(
this
->
videoFeSourû
, &
du¿tiÚ
);

3913 
ås
 = (()
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
MF_MT_FRAME_RATE_NUMERATOR
) /

3914 (()
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
MF_MT_FRAME_RATE_DENOMINATOR
);

3915  ()
	`æoÜ
((()
du¿tiÚ
/1e7)*
ås
+0.5);

3917 
CV_CAP_PROP_FOURCC
:

3918  
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
MF_MT_SUBTYPE
.
D©a1
;

3919 
CV_CAP_PROP_FPS
:

3920  (()
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
MF_MT_FRAME_RATE_NUMERATOR
) /

3921 (()
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
MF_MT_FRAME_RATE_DENOMINATOR
);

3925 
	}
}

3927 
boŞ
 
	gCvC­tu»Fe_MSMF
::
	$g¿bF¿me
()

3929 
DWORD
 
wa™ResuÉ
 = (DWORD)-1;

3930 ià(
isO³Ãd
)

3932 
	`S‘Ev’t
(
g¿bb”Th»ad
->
	`g‘ImageG¿bb”
()->
ig_hF¿meG¿bbed
);

3933 
HANDLE
 
tmp
[] = {
g¿bb”Th»ad
->
	`g‘ImageG¿bb”
()->
ig_hF¿meR—dy
, g¿bb”Th»ad->g‘ImageG¿bb”()->
ig_hFšish
, 0};

3934 
wa™ResuÉ
 = 
	`Wa™FÜMuÉËObjeùs
(2, 
tmp
, 
FALSE
, 
INFINITE
);

3937  
isO³Ãd
 && 
g¿bb”Th»ad
->
	`g‘ImageG¿bb”
()->
	`g‘RawImage
()->
	`isNew
(è&& (
wa™ResuÉ
 =ğ
WAIT_OBJECT_0
);

3938 
	}
}

3940 
I¶Image
* 
	gCvC­tu»Fe_MSMF
::
	$»Œ›veF¿me
()

3942 
width
 = 
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].width;

3943 
height
 = 
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].height;

3944 
by‹s
 = 3;

3945 ifĞ!
äame
 || ()
width
 !ğäame->width || ()
height
 != frame->height )

3947 ià(
äame
)

3948 
	`cvR–—£Image
Ğ&
äame
 );

3949 
äame
 = 
	`cvC»©eImage
Ğ
	`cvSize
(
width
,
height
), 8, 3 );

3952 
RawImage
 *
RIOut
 = 
g¿bb”Th»ad
->
	`g‘ImageG¿bb”
()->
	`g‘RawImage
();

3953 
size
 = 
by‹s
 * 
width
 * 
height
;

3955 
boŞ
 
v”tiÿlFl
 = 
ÿ±u»FÜm©s
[
ÿ±u»FÜm©Index
].
MF_MT_DEFAULT_STRIDE
 < 0;

3957 if(
RIOut
 && 
size
 =ğRIOut->
	`g‘Size
())

3959 
videoIÅut
::
	`´oûssPix–s
(
RIOut
->
	`g‘pPix–s
(), (*)
äame
->
imageD©a
, 
width
,

3960 
height
, 
by‹s
, 
çl£
, 
v”tiÿlFl
);

3963  
äame
;

3964 
	}
}

3966 
HRESULT
 
	gCvC­tu»Fe_MSMF
::
	$’um”©eC­tu»FÜm©s
(
IMFMedŸSourû
 *
pSourû
)

3968 
_ComPŒ
<
IMFP»£Á©iÚDesütÜ
> 
pPD
 = 
NULL
;

3969 
_ComPŒ
<
IMFSŒ—mDesütÜ
> 
pSD
 = 
NULL
;

3970 
_ComPŒ
<
IMFMedŸTy³HªdËr
> 
pHªdËr
 = 
NULL
;

3971 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
 = 
NULL
;

3972 
HRESULT
 
hr
 = 
pSourû
->
	`C»©eP»£Á©iÚDesütÜ
(
pPD
.
	`G‘Add»ssOf
());

3973 ià(
	`FAILED
(
hr
))

3975 
dÚe
;

3978 
BOOL
 
fS–eùed
;

3979 
hr
 = 
pPD
->
	`G‘SŒ—mDesütÜByIndex
(0, &
fS–eùed
, 
pSD
.
	`G‘Add»ssOf
());

3980 ià(
	`FAILED
(
hr
))

3982 
dÚe
;

3984 
hr
 = 
pSD
->
	`G‘MedŸTy³HªdËr
(
pHªdËr
.
	`G‘Add»ssOf
());

3985 ià(
	`FAILED
(
hr
))

3987 
dÚe
;

3989 
DWORD
 
cTy³s
 = 0;

3990 
hr
 = 
pHªdËr
->
	`G‘MedŸTy³CouÁ
(&
cTy³s
);

3991 ià(
	`FAILED
(
hr
))

3993 
dÚe
;

3995 
DWORD
 
i
 = 0; i < 
cTy³s
; i++)

3997 
hr
 = 
pHªdËr
->
	`G‘MedŸTy³ByIndex
(
i
, 
pTy³
.
	`G‘Add»ssOf
());

3998 ià(
	`FAILED
(
hr
))

4000 
dÚe
;

4002 
MedŸTy³
 
MT
 = 
FÜm©R—d”
::
	`R—d
(
pTy³
.
	`G‘
());

4004 ifĞ
MT
.
MF_MT_SUBTYPE
 =ğ
MFVideoFÜm©_RGB24
 )

4005 
ÿ±u»FÜm©s
.
	`push_back
(
MT
);

4008 
dÚe
:

4009  
hr
;

4010 
	}
}

4012 
HRESULT
 
	gCvC­tu»Fe_MSMF
::
	$g‘SourûDu¿tiÚ
(
IMFMedŸSourû
 *
pSourû
, 
MFTIME
 *
pDu¿tiÚ
) const

4014 *
pDu¿tiÚ
 = 0;

4016 
IMFP»£Á©iÚDesütÜ
 *
pPD
 = 
NULL
;

4018 
HRESULT
 
hr
 = 
pSourû
->
	`C»©eP»£Á©iÚDesütÜ
(&
pPD
);

4019 ià(
	`SUCCEEDED
(
hr
))

4021 
hr
 = 
pPD
->
	`G‘UINT64
(
MF_PD_DURATION
, (
UINT64
*)
pDu¿tiÚ
);

4022 
pPD
->
	`R–—£
();

4024  
hr
;

4025 
	}
}

4027 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_MSMF
Ğ
šdex
 )

4029 
CvC­tu»CAM_MSMF
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_MSMF;

4030 
Œy


4032 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

4033  
ÿ±u»
;

4035 
	`ÿtch
(...)

4037 
d–‘e
 
ÿ±u»
;

4038 
throw
;

4040 
d–‘e
 
ÿ±u»
;

4042 
	}
}

4044 
CvC­tu»
* 
	$cvC»©eFeC­tu»_MSMF
 (cÚ¡ * 
f’ame
)

4046 
CvC­tu»Fe_MSMF
* 
ÿ±u»
 = 
Ãw
 CvCaptureFile_MSMF;

4047 
Œy


4049 ifĞ
ÿ±u»
->
	`İ’
(
f’ame
) )

4050  
ÿ±u»
;

4053 
d–‘e
 
ÿ±u»
;

4054  
NULL
;

4057 
	`ÿtch
(...)

4059 
d–‘e
 
ÿ±u»
;

4060 
throw
;

4062 
	}
}

4070 şas 
	cCvVideoWr™”_MSMF
 : 
public
 
CvVideoWr™”


4072 
public
:

4073 
CvVideoWr™”_MSMF
();

4074 
	mvœtu®
 ~
CvVideoWr™”_MSMF
();

4075 
vœtu®
 
boŞ
 
İ’
(cÚ¡ * 
f’ame
, 
fourcc
,

4076 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
);

4077 
vœtu®
 
şo£
();

4078 
vœtu®
 
boŞ
 
wr™eF¿me
(cÚ¡ 
I¶Image
* 
img
);

4080 
	m´iv©e
:

4081 
UINT32
 
videoWidth
;

4082 
UINT32
 
	mvideoHeight
;

4083 
	mås
;

4084 
UINT32
 
	mb™R©e
;

4085 
UINT32
 
	mäameSize
;

4086 
GUID
 
	m’codšgFÜm©
;

4087 
GUID
 
	mšputFÜm©
;

4089 
DWORD
 
	m¡»amIndex
;

4090 
	m_ComPŒ
<
	mIMFSškWr™”
> 
	msškWr™”
;

4092 
boŞ
 
	mš™Ÿ‹d
;

4094 
LONGLONG
 
	m¹S¹
;

4095 
UINT64
 
	m¹Du¿tiÚ
;

4097 
HRESULT
 
In™ŸlizeSškWr™”
(cÚ¡ * 
f’ame
);

4098 cÚ¡ 
GUID
 
FourCC2GUID
(
fourcc
);

4099 
HRESULT
 
Wr™eF¿me
(
DWORD
 *
videoF¿meBufãr
, cÚ¡ 
LONGLONG
& 
¹S¹
, cÚ¡ LONGLONG& 
¹Du¿tiÚ
);

4102 
	gCvVideoWr™”_MSMF
::
	$CvVideoWr™”_MSMF
():

4103 
	$š™Ÿ‹d
(
çl£
)

4105 
	}
}

4107 
CvVideoWr™”_MSMF
::~
	$CvVideoWr™”_MSMF
()

4109 
	`şo£
();

4110 
	}
}

4112 cÚ¡ 
GUID
 
	gCvVideoWr™”_MSMF
::
	$FourCC2GUID
(
fourcc
)

4114 
fourcc
)

4116 
	`CV_FOURCC_MACRO
('d', 'v', '2', '5'):

4117  
MFVideoFÜm©_DV25
; ;

4118 
	`CV_FOURCC_MACRO
('d', 'v', '5', '0'):

4119  
MFVideoFÜm©_DV50
; ;

4120 
	`CV_FOURCC_MACRO
('d', 'v', 'c', ' '):

4121  
MFVideoFÜm©_DVC
; ;

4122 
	`CV_FOURCC_MACRO
('d', 'v', 'h', '1'):

4123  
MFVideoFÜm©_DVH1
; ;

4124 
	`CV_FOURCC_MACRO
('d', 'v', 'h', 'd'):

4125  
MFVideoFÜm©_DVHD
; ;

4126 
	`CV_FOURCC_MACRO
('d', 'v', 's', 'd'):

4127  
MFVideoFÜm©_DVSD
; ;

4128 
	`CV_FOURCC_MACRO
('d', 'v', 's', 'l'):

4129  
MFVideoFÜm©_DVSL
; ;

4130 #ià(
WINVER
 >= 0x0602)

4131 
	`CV_FOURCC_MACRO
('H', '2', '6', '3'):

4132  
MFVideoFÜm©_H263
; ;

4134 
	`CV_FOURCC_MACRO
('H', '2', '6', '4'):

4135  
MFVideoFÜm©_H264
; ;

4136 
	`CV_FOURCC_MACRO
('M', '4', 'S', '2'):

4137  
MFVideoFÜm©_M4S2
; ;

4138 
	`CV_FOURCC_MACRO
('M', 'J', 'P', 'G'):

4139  
MFVideoFÜm©_MJPG
; ;

4140 
	`CV_FOURCC_MACRO
('M', 'P', '4', '3'):

4141  
MFVideoFÜm©_MP43
; ;

4142 
	`CV_FOURCC_MACRO
('M', 'P', '4', 'S'):

4143  
MFVideoFÜm©_MP4S
; ;

4144 
	`CV_FOURCC_MACRO
('M', 'P', '4', 'V'):

4145  
MFVideoFÜm©_MP4V
; ;

4146 
	`CV_FOURCC_MACRO
('M', 'P', 'G', '1'):

4147  
MFVideoFÜm©_MPG1
; ;

4148 
	`CV_FOURCC_MACRO
('M', 'S', 'S', '1'):

4149  
MFVideoFÜm©_MSS1
; ;

4150 
	`CV_FOURCC_MACRO
('M', 'S', 'S', '2'):

4151  
MFVideoFÜm©_MSS2
; ;

4152 
	`CV_FOURCC_MACRO
('W', 'M', 'V', '1'):

4153  
MFVideoFÜm©_WMV1
; ;

4154 
	`CV_FOURCC_MACRO
('W', 'M', 'V', '2'):

4155  
MFVideoFÜm©_WMV2
; ;

4156 
	`CV_FOURCC_MACRO
('W', 'M', 'V', '3'):

4157  
MFVideoFÜm©_WMV3
; ;

4158 
	`CV_FOURCC_MACRO
('W', 'V', 'C', '1'):

4159  
MFVideoFÜm©_WVC1
; ;

4161  
MFVideoFÜm©_H264
;

4163 
	}
}

4165 
boŞ
 
	gCvVideoWr™”_MSMF
::
	$İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

4166 
_ås
, 
CvSize
 
äameSize
, 
boŞ
 )

4168 
videoWidth
 = 
äameSize
.
width
;

4169 
videoHeight
 = 
äameSize
.
height
;

4170 
ås
 = 
_ås
;

4171 
b™R©e
 = (
UINT32
)
ås
*
videoWidth
*
videoHeight
;

4172 
’codšgFÜm©
 = 
	`FourCC2GUID
(
fourcc
);

4173 
šputFÜm©
 = 
MFVideoFÜm©_RGB32
;

4175 
HRESULT
 
hr
 = 
	`CoIn™ŸlizeEx
(
NULL
, 
COINIT_APARTMENTTHREADED
);

4176 ià(
	`SUCCEEDED
(
hr
))

4178 
hr
 = 
	`MFS¹up
(
MF_VERSION
);

4179 ià(
	`SUCCEEDED
(
hr
))

4181 
hr
 = 
	`In™ŸlizeSškWr™”
(
f’ame
);

4182 ià(
	`SUCCEEDED
(
hr
))

4184 
š™Ÿ‹d
 = 
Œue
;

4185 
¹S¹
 = 0;

4186 
	`MFF¿meR©eToAv”ageTimeP”F¿me
((
UINT32
)
ås
, 1, &
¹Du¿tiÚ
);

4191  
	`SUCCEEDED
(
hr
);

4192 
	}
}

4194 
	gCvVideoWr™”_MSMF
::
	$şo£
()

4196 ià(!
š™Ÿ‹d
)

4201 
š™Ÿ‹d
 = 
çl£
;

4202 
sškWr™”
->
	`Fš®ize
();

4203 
	`MFShutdown
();

4204 
	}
}

4206 
boŞ
 
	gCvVideoWr™”_MSMF
::
	$wr™eF¿me
(cÚ¡ 
I¶Image
* 
img
)

4208 ià(!
img
)

4209  
çl£
;

4211 
Ëngth
 = 
img
->
width
 * img->
height
 * 4;

4212 
DWORD
* 
rg‘
 = 
Ãw
 DWORD[
Ëngth
];

4214 
rowIdx
 = 0;„owIdx < 
img
->
height
;„owIdx++)

4216 * 
rowS¹
 = 
img
->
imageD©a
 + 
rowIdx
*img->
widthS‹p
;

4217 
cŞIdx
 = 0; cŞIdx < 
img
->
width
; colIdx++)

4219 
BYTE
 
b
 = 
rowS¹
[
cŞIdx
 * 
img
->
nChªÃls
 + 0];

4220 
BYTE
 
g
 = 
rowS¹
[
cŞIdx
 * 
img
->
nChªÃls
 + 1];

4221 
BYTE
 
r
 = 
rowS¹
[
cŞIdx
 * 
img
->
nChªÃls
 + 2];

4223 
rg‘
[
rowIdx
*
img
->
width
+
cŞIdx
] = (
r
 << 16è+ (
g
 << 8è+ 
b
;

4228 
HRESULT
 
hr
 = 
	`Wr™eF¿me
(
rg‘
, 
¹S¹
, 
¹Du¿tiÚ
);

4229 ià(
	`FAILED
(
hr
))

4231 
d–‘e
[] 
rg‘
;

4232  
çl£
;

4234 
¹S¹
 +ğ
¹Du¿tiÚ
;

4236 
d–‘e
[] 
rg‘
;

4238  
Œue
;

4239 
	}
}

4241 
HRESULT
 
	gCvVideoWr™”_MSMF
::
	$In™ŸlizeSškWr™”
(cÚ¡ * 
f’ame
)

4243 
_ComPŒ
<
IMFA‰ribu‹s
> 
¥A‰r
;

4244 
_ComPŒ
<
IMFMedŸTy³
> 
medŸTy³Out
;

4245 
_ComPŒ
<
IMFMedŸTy³
> 
medŸTy³In
;

4246 
_ComPŒ
<
IMFBy‹SŒ—m
> 
¥By‹SŒ—m
;

4248 
	`MFC»©eA‰ribu‹s
(&
¥A‰r
, 10);

4249 
¥A‰r
->
	`S‘UINT32
(
MF_READWRITE_ENABLE_HARDWARE_TRANSFORMS
, 
Œue
);

4251 
wch¬_t
* 
unicodeFeName
 = 
Ãw
 wch¬_t[
	`¡¾’
(
f’ame
)+1];

4252 
	`MuÉiBy‹ToWideCh¬
(
CP_ACP
, 0, 
f’ame
, -1, 
unicodeFeName
, ()
	`¡¾’
(filename)+1);

4254 
HRESULT
 
hr
 = 
	`MFC»©eSškWr™”FromURL
(
unicodeFeName
, 
NULL
, 
¥A‰r
.
	`G‘
(), &
sškWr™”
);

4256 
d–‘e
[] 
unicodeFeName
;

4259 ià(
	`SUCCEEDED
(
hr
))

4261 
hr
 = 
	`MFC»©eMedŸTy³
(&
medŸTy³Out
);

4263 ià(
	`SUCCEEDED
(
hr
))

4265 
hr
 = 
medŸTy³Out
->
	`S‘GUID
(
MF_MT_MAJOR_TYPE
, 
MFMedŸTy³_Video
);

4267 ià(
	`SUCCEEDED
(
hr
))

4269 
hr
 = 
medŸTy³Out
->
	`S‘GUID
(
MF_MT_SUBTYPE
, 
’codšgFÜm©
);

4271 ià(
	`SUCCEEDED
(
hr
))

4273 
hr
 = 
medŸTy³Out
->
	`S‘UINT32
(
MF_MT_AVG_BITRATE
, 
b™R©e
);

4275 ià(
	`SUCCEEDED
(
hr
))

4277 
hr
 = 
medŸTy³Out
->
	`S‘UINT32
(
MF_MT_INTERLACE_MODE
, 
MFVideoIÁ”Ïû_Prog»ssive
);

4279 ià(
	`SUCCEEDED
(
hr
))

4281 
hr
 = 
	`MFS‘A‰ribu‹Size
(
medŸTy³Out
.
	`G‘
(), 
MF_MT_FRAME_SIZE
, 
videoWidth
, 
videoHeight
);

4283 ià(
	`SUCCEEDED
(
hr
))

4285 
hr
 = 
	`MFS‘A‰ribu‹R©io
(
medŸTy³Out
.
	`G‘
(), 
MF_MT_FRAME_RATE
, (
UINT32
)
ås
, 1);

4287 ià(
	`SUCCEEDED
(
hr
))

4289 
hr
 = 
	`MFS‘A‰ribu‹R©io
(
medŸTy³Out
.
	`G‘
(), 
MF_MT_PIXEL_ASPECT_RATIO
, 1, 1);

4292 ià(
	`SUCCEEDED
(
hr
))

4294 
hr
 = 
sškWr™”
->
	`AddSŒ—m
(
medŸTy³Out
.
	`G‘
(), &
¡»amIndex
);

4298 ià(
	`SUCCEEDED
(
hr
))

4300 
hr
 = 
	`MFC»©eMedŸTy³
(&
medŸTy³In
);

4302 ià(
	`SUCCEEDED
(
hr
))

4304 
hr
 = 
medŸTy³In
->
	`S‘GUID
(
MF_MT_MAJOR_TYPE
, 
MFMedŸTy³_Video
);

4306 ià(
	`SUCCEEDED
(
hr
))

4308 
hr
 = 
medŸTy³In
->
	`S‘GUID
(
MF_MT_SUBTYPE
, 
šputFÜm©
);

4310 ià(
	`SUCCEEDED
(
hr
))

4312 
hr
 = 
medŸTy³In
->
	`S‘UINT32
(
MF_MT_INTERLACE_MODE
, 
MFVideoIÁ”Ïû_Prog»ssive
);

4314 ià(
	`SUCCEEDED
(
hr
))

4316 
hr
 = 
	`MFS‘A‰ribu‹Size
(
medŸTy³In
.
	`G‘
(), 
MF_MT_FRAME_SIZE
, 
videoWidth
, 
videoHeight
);

4318 ià(
	`SUCCEEDED
(
hr
))

4320 
hr
 = 
	`MFS‘A‰ribu‹R©io
(
medŸTy³In
.
	`G‘
(), 
MF_MT_FRAME_RATE
, (
UINT32
)
ås
, 1);

4322 ià(
	`SUCCEEDED
(
hr
))

4324 
hr
 = 
	`MFS‘A‰ribu‹R©io
(
medŸTy³In
.
	`G‘
(), 
MF_MT_PIXEL_ASPECT_RATIO
, 1, 1);

4327 ià(
	`SUCCEEDED
(
hr
))

4329 
hr
 = 
sškWr™”
->
	`S‘IÅutMedŸTy³
(
¡»amIndex
, 
medŸTy³In
.
	`G‘
(), 
NULL
);

4333 ià(
	`SUCCEEDED
(
hr
))

4335 
hr
 = 
sškWr™”
->
	`BegšWr™šg
();

4338  
hr
;

4339 
	}
}

4341 
HRESULT
 
	gCvVideoWr™”_MSMF
::
	$Wr™eF¿me
(
DWORD
 *
videoF¿meBufãr
, cÚ¡ 
LONGLONG
& 
S¹
, cÚ¡ LONGLONG& 
Du¿tiÚ
)

4343 
_ComPŒ
<
IMFSam¶e
> 
§m¶e
;

4344 
_ComPŒ
<
IMFMedŸBufãr
> 
bufãr
;

4346 cÚ¡ 
LONG
 
cbWidth
 = 4 * 
videoWidth
;

4347 cÚ¡ 
DWORD
 
cbBufãr
 = 
cbWidth
 * 
videoHeight
;

4349 
BYTE
 *
pD©a
 = 
NULL
;

4352 
HRESULT
 
hr
 = 
	`MFC»©eMemÜyBufãr
(
cbBufãr
, &
bufãr
);

4355 ià(
	`SUCCEEDED
(
hr
))

4357 
hr
 = 
bufãr
->
	`Lock
(&
pD©a
, 
NULL
, NULL);

4360 ià(
	`SUCCEEDED
(
hr
))

4362 #ià
	`defšed
(
_M_ARM
)

4363 
hr
 = 
	`MFCİyImage
(

4364 
pD©a
,

4365 -
cbWidth
,

4366 (
BYTE
*)
videoF¿meBufãr
,

4367 
cbWidth
,

4368 
cbWidth
,

4369 
videoHeight


4372 
hr
 = 
	`MFCİyImage
(

4373 
pD©a
,

4374 
cbWidth
,

4375 (
BYTE
*)
videoF¿meBufãr
,

4376 
cbWidth
,

4377 
cbWidth
,

4378 
videoHeight


4383 ià(
bufãr
)

4385 
bufãr
->
	`UÆock
();

4389 ià(
	`SUCCEEDED
(
hr
))

4391 
hr
 = 
bufãr
->
	`S‘Cu¼’tL’gth
(
cbBufãr
);

4395 ià(
	`SUCCEEDED
(
hr
))

4397 
hr
 = 
	`MFC»©eSam¶e
(&
§m¶e
);

4399 ià(
	`SUCCEEDED
(
hr
))

4401 
hr
 = 
§m¶e
->
	`AddBufãr
(
bufãr
.
	`G‘
());

4405 ià(
	`SUCCEEDED
(
hr
))

4407 
hr
 = 
§m¶e
->
	`S‘Sam¶eTime
(
S¹
);

4409 ià(
	`SUCCEEDED
(
hr
))

4411 
hr
 = 
§m¶e
->
	`S‘Sam¶eDu¿tiÚ
(
Du¿tiÚ
);

4415 ià(
	`SUCCEEDED
(
hr
))

4417 
hr
 = 
sškWr™”
->
	`Wr™eSam¶e
(
¡»amIndex
, 
§m¶e
.
	`G‘
());

4420  
hr
;

4421 
	}
}

4423 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”_MSMF
ĞcÚ¡ * 
f’ame
, 
fourcc
,

4424 
ås
, 
CvSize
 
äameSize
, 
isCŞÜ
 )

4426 
CvVideoWr™”_MSMF
* 
wr™”
 = 
Ãw
 CvVideoWriter_MSMF;

4427 ifĞ
wr™”
->
	`İ’
Ğ
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
 != 0 ))

4428  
wr™”
;

4429 
d–‘e
 
wr™”
;

4430  
NULL
;

4431 
	}
}

	@cap_msmf.hpp

1 #ifdeà
WINRT


2 
	#ICu¡omSŒ—mSšk
 
SŒ—mSšk


	)

3 #iâdeà
__ılu¥lus_wš¹


5 
	#__is_wš¹_¬¿y
(
ty³
èÑy³ =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_UIÁ8A¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_IÁ16A¼ay
 ||\

6 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_UIÁ16A¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_IÁ32A¼ay
 ||\

7 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_UIÁ32A¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_IÁ64A¼ay
 ||\

8 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_UIÁ64A¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_SšgËA¼ay
 ||\

9 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_DoubËA¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_Ch¬16A¼ay
 ||\

10 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_BoŞ—nA¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_SŒšgA¼ay
 ||\

11 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_In¥eùabËA¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_D©eTimeA¼ay
 ||\

12 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_TimeS·nA¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_GuidA¼ay
 ||\

13 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_PoštA¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_SizeA¼ay
 ||\

14 
ty³
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
::
Prİ”tyTy³_ReùA¼ay
 ||y³ =ğABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_Oth”Ty³A¼ay
)

	)

16 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
, 
boŞ
 
	gbUnknown
 = 
¡d
::
is_ba£_of
<
IUnknown
, _Ty³>::
v®ue
>

17 
	swš¹_ty³


20 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

21 
	gwš¹_ty³
<
	g_Ty³
, 
	gŒue
>

23 
IUnknown
* 
ü—‹
(
_Ty³
* 
_ObjInCtx
) {

24  
	g»š‹½»t_ÿ¡
<
	gIUnknown
*>(
	g_ObjInCtx
);

26 
IID
 
g‘uuid
(è{  
__uuidof
(
_Ty³
); }

27 cÚ¡ 
	gABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
_PrİTy³
 = 
ABI
::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_Oth”Ty³
;

29 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

30 
	gwš¹_ty³
<
	g_Ty³
, 
	gçl£
>

32 
IUnknown
* 
ü—‹
(
_Ty³
* 
_ObjInCtx
) {

33 
	gMiüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
_PObj
;

34 
	gMiüosoá
::
WRL
::
ComPŒ
<
IAùiv©iÚFaùÜy
> 
objFaùÜy
;

35 
HRESULT
 
	ghr
 = 
Wšdows
::
Found©iÚ
::
G‘Aùiv©iÚFaùÜy
(
Miüosoá
::
WRL
::
W¿µ”s
::
HSŒšgReã»nû
(
RuÁimeCÏss_Wšdows_Found©iÚ_Prİ”tyV®ue
).
G‘
(), 
objFaùÜy
.
R–—£AndG‘Add»ssOf
());

36 ià(
FAILED
(
hr
)è 
	gnuÎ±r
;

37 
	gMiüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ueStics
> 
¥PrİV®
;

38 ià(
SUCCEEDED
(
hr
))

39 
	ghr
 = 
objFaùÜy
.
As
(&
¥PrİV®
);

40 ià(
SUCCEEDED
(
hr
)) {

41 
	ghr
 = 
wš¹_ty³
<
_Ty³
>::
ü—‹
(
¥PrİV®
.
G‘
(), 
_ObjInCtx
, 
_PObj
.
G‘Add»ssOf
());

42 ià(
SUCCEEDED
(
hr
))

43  
	g»š‹½»t_ÿ¡
<
	gIUnknown
*>(
	g_PObj
.
D‘ach
());

45  
	gnuÎ±r
;

47 
IID
 
g‘uuid
(è{  
__uuidof
(
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ue
); }

48 cÚ¡ 
	gABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
_PrİTy³
 = 
ABI
::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_Oth”Ty³
;

51 
	g‹m¶©e
<>

52 
	gwš¹_ty³
<>

54 
HRESULT
 
ü—‹
(
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ueStics
* 
¥PrİV®
, * 
_ObjInCtx
, 
IIn¥eùabË
** 
µIn¥
) {

55 ()
	g_ObjInCtx
;

56  
	g¥PrİV®
->
C»©eEm±y
(
µIn¥
);

58 cÚ¡ 
	gABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
_PrİTy³
 = 
ABI
::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_Em±y
;

60 
	#MAKE_TYPE
(
Ty³
, 
Name
è
‹m¶©e
<>\

61 
wš¹_ty³
<
Ty³
>\

63 
HRESULT
 
	`ü—‹
(
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ueStics
* 
¥PrİV®
, 
Ty³
* 
_ObjInCtx
, 
IIn¥eùabË
** 
µIn¥
) {\

64  
¥PrİV®
->
C»©e
##
	`Name
(*
_ObjInCtx
, 
µIn¥
);\

66 cÚ¡ 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
_PrİTy³
 = ABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_
##
Name
;\

67 };

	)

69 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

70 
	swš¹_¬¿y_ty³


72 
IUnknown
* 
ü—‹
(
_Ty³
* 
_ObjInCtx
, 
size_t
 
N
) {

73 
	mMiüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
_PObj
;

74 
	mMiüosoá
::
WRL
::
ComPŒ
<
IAùiv©iÚFaùÜy
> 
objFaùÜy
;

75 
HRESULT
 
	mhr
 = 
Wšdows
::
Found©iÚ
::
G‘Aùiv©iÚFaùÜy
(
Miüosoá
::
WRL
::
W¿µ”s
::
HSŒšgReã»nû
(
RuÁimeCÏss_Wšdows_Found©iÚ_Prİ”tyV®ue
).
G‘
(), 
objFaùÜy
.
R–—£AndG‘Add»ssOf
());

76 ià(
FAILED
(
hr
)è 
	mnuÎ±r
;

77 
	mMiüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ueStics
> 
¥PrİV®
;

78 ià(
SUCCEEDED
(
hr
))

79 
	mhr
 = 
objFaùÜy
.
As
(&
¥PrİV®
);

80 ià(
SUCCEEDED
(
hr
)) {

81 
	mhr
 = 
wš¹_¬¿y_ty³
<
_Ty³
>::
ü—‹
(
¥PrİV®
.
G‘
(), 
N
, 
_ObjInCtx
, 
_PObj
.
G‘Add»ssOf
());

82 ià(
SUCCEEDED
(
hr
))

83  
	m»š‹½»t_ÿ¡
<
	mIUnknown
*>(
	m_PObj
.
D‘ach
());

85  
	mnuÎ±r
;

87 cÚ¡ 
	mABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
_PrİTy³
 = 
ABI
::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_Oth”Ty³A¼ay
;

89 
	g‹m¶©e
<>

90 
	swš¹_´İ_ty³
 {};

92 
	g‹m¶©e
 <>

93 
	gwš¹_´İ_ty³
<
	gABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_Em±y
> {

94 
	t_Ty³
;

97 
	g‹m¶©e
 <>

98 
	gwš¹_´İ_ty³
<
	gABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_Oth”Ty³
> {

99 
	t_Ty³
;

102 
	g‹m¶©e
 <>

103 
	gwš¹_´İ_ty³
<
	gABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_Oth”Ty³A¼ay
> {

104 
	t_Ty³
;

107 
	#MAKE_PROP
(
Prİ
, 
Ty³
è
‹m¶©e
 <>\

108 
wš¹_´İ_ty³
<
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_
##
Prİ
> {\

109 
Ty³
 
	t_Ty³
;\

110 };

	)

112 
	#MAKE_ARRAY_TYPE
(
Ty³
, 
Name
è
	`MAKE_PROP
(Name, Type)\

113 
	`MAKE_PROP
(
Name
##
A¼ay
, 
Ty³
*)\

114 
	`MAKE_TYPE
(
Ty³
, 
Name
)\

115 
‹m¶©e
<>\

116 
wš¹_¬¿y_ty³
<
Ty³
*>\

118 
HRESULT
 
	`ü—‹
(
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ueStics
* 
¥PrİV®
, 
UINT32
 
__v®ueSize
, 
Ty³
** 
_ObjInCtx
, 
IIn¥eùabË
** 
µIn¥
) {\

119  
¥PrİV®
->
C»©e
##
Name
##
	`A¼ay
(
__v®ueSize
, *
_ObjInCtx
, 
µIn¥
);\

121 cÚ¡ 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
_PrİTy³
 = ABI::Wšdows::Found©iÚ::Prİ”tyTy³::
Prİ”tyTy³_
##
Name
##
A¼ay
;\

122 
¡d
::
veùÜ
<
Ty³
> 
	`Prİ”tyV®ueToVeùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ue
* 
´İV®ue
)\

124 
UINT32
 
uL’
 = 0;\

125 
Ty³
* 
pA¼ay
 = 
nuÎ±r
;\

126 
´İV®ue
->
G‘
##
Name
##
	`A¼ay
(&
uL’
, &
pA¼ay
);\

127  
¡d
::
veùÜ
<
Ty³
>(
pA¼ay
,…A¼ay + 
uL’
);\

129 };

	)

130 
	$MAKE_ARRAY_TYPE
(
BYTE
, 
UIÁ8
)

131 
	$MAKE_ARRAY_TYPE
(
INT16
, 
IÁ16
)

132 
	$MAKE_ARRAY_TYPE
(
UINT16
, 
UIÁ16
)

133 
	$MAKE_ARRAY_TYPE
(
INT32
, 
IÁ32
)

134 
	$MAKE_ARRAY_TYPE
(
UINT32
, 
UIÁ32
)

135 
	$MAKE_ARRAY_TYPE
(
INT64
, 
IÁ64
)

136 
	$MAKE_ARRAY_TYPE
(
UINT64
, 
UIÁ64
)

137 
	$MAKE_ARRAY_TYPE
(
FLOAT
, 
SšgË
)

138 
	$MAKE_ARRAY_TYPE
(
DOUBLE
, 
DoubË
)

139 
	$MAKE_ARRAY_TYPE
(
WCHAR
, 
Ch¬16
)

141 
	$MAKE_ARRAY_TYPE
(
HSTRING
, 
SŒšg
)

142 
	$MAKE_ARRAY_TYPE
(
IIn¥eùabË
*, 
In¥eùabË
)

143 
	$MAKE_ARRAY_TYPE
(
GUID
, 
Guid
)

144 
	`MAKE_ARRAY_TYPE
(
ABI
::
Wšdows
::
Found©iÚ
::
D©eTime
, DateTime)

145 
	`MAKE_ARRAY_TYPE
(
ABI
::
Wšdows
::
Found©iÚ
::
TimeS·n
, TimeSpan)

146 
	`MAKE_ARRAY_TYPE
(
ABI
::
Wšdows
::
Found©iÚ
::
Pošt
, Point)

147 
	`MAKE_ARRAY_TYPE
(
ABI
::
Wšdows
::
Found©iÚ
::
Size
, Size)

148 
	`MAKE_ARRAY_TYPE
(
ABI
::
Wšdows
::
Found©iÚ
::
Reù
, Rect)

150 
‹m¶©e
 < 
ty³Çme
 
T
 >

151 
	sD”efH–³r


153 
T
 
	tD”efTy³
;

156 
‹m¶©e
 < 
ty³Çme
 
T
 >

157 
D”efH–³r
<
T
*>

159 
T
 
	tD”efTy³
;

160 
	}
};

162 
	#__is_v®id_wš¹_ty³
(
_Ty³
è(
¡d
::
is_void
<_Ty³>::
v®ue
 || \

163 
¡d
::
is_§me
<
_Ty³
, 
BYTE
>::
v®ue
 || \

164 
¡d
::
is_§me
<
_Ty³
, 
INT16
>::
v®ue
 || \

165 
¡d
::
is_§me
<
_Ty³
, 
UINT16
>::
v®ue
 || \

166 
¡d
::
is_§me
<
_Ty³
, 
INT32
>::
v®ue
 || \

167 
¡d
::
is_§me
<
_Ty³
, 
UINT32
>::
v®ue
 || \

168 
¡d
::
is_§me
<
_Ty³
, 
INT64
>::
v®ue
 || \

169 
¡d
::
is_§me
<
_Ty³
, 
UINT64
>::
v®ue
 || \

170 
¡d
::
is_§me
<
_Ty³
, 
FLOAT
>::
v®ue
 || \

171 
¡d
::
is_§me
<
_Ty³
, 
DOUBLE
>::
v®ue
 || \

172 
¡d
::
is_§me
<
_Ty³
, 
WCHAR
>::
v®ue
 || \

173 
¡d
::
is_§me
<
_Ty³
, 
boŞ—n
>::
v®ue
 || \

174 
¡d
::
is_§me
<
_Ty³
, 
HSTRING
>::
v®ue
 || \

175 
¡d
::
is_§me
<
_Ty³
, 
IIn¥eùabË
 *>::
v®ue
 || \

176 
¡d
::
is_ba£_of
<
Miüosoá
::
WRL
::
D‘as
::
RuÁimeCÏssBa£
, 
_Ty³
>::
v®ue
 || \

177 
¡d
::
is_ba£_of
<
IIn¥eùabË
, 
ty³Çme
 
D”efH–³r
<
_Ty³
>::
D”efTy³
>::
v®ue
 || \

178 
¡d
::
is_§me
<
_Ty³
, 
GUID
>::
v®ue
 || \

179 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
D©eTime
>::
v®ue
 || \

180 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
TimeS·n
>::
v®ue
 || \

181 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
Pošt
>::
v®ue
 || \

182 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
Size
>::
v®ue
 || \

183 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
Reù
>::
v®ue
 || \

184 
¡d
::
is_§me
<
_Ty³
, 
BYTE
*>::
v®ue
 || \

185 
¡d
::
is_§me
<
_Ty³
, 
INT16
*>::
v®ue
 || \

186 
¡d
::
is_§me
<
_Ty³
, 
UINT16
*>::
v®ue
 || \

187 
¡d
::
is_§me
<
_Ty³
, 
INT32
*>::
v®ue
 || \

188 
¡d
::
is_§me
<
_Ty³
, 
UINT32
*>::
v®ue
 || \

189 
¡d
::
is_§me
<
_Ty³
, 
INT64
*>::
v®ue
 || \

190 
¡d
::
is_§me
<
_Ty³
, 
UINT64
*>::
v®ue
 || \

191 
¡d
::
is_§me
<
_Ty³
, 
FLOAT
*>::
v®ue
 || \

192 
¡d
::
is_§me
<
_Ty³
, 
DOUBLE
*>::
v®ue
 || \

193 
¡d
::
is_§me
<
_Ty³
, 
WCHAR
*>::
v®ue
 || \

194 
¡d
::
is_§me
<
_Ty³
, 
boŞ—n
*>::
v®ue
 || \

195 
¡d
::
is_§me
<
_Ty³
, 
HSTRING
*>::
v®ue
 || \

196 
¡d
::
is_§me
<
_Ty³
, 
IIn¥eùabË
 **>::
v®ue
 || \

197 
¡d
::
is_§me
<
_Ty³
, 
GUID
*>::
v®ue
 || \

198 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
D©eTime
*>::
v®ue
 || \

199 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
TimeS·n
*>::
v®ue
 || \

200 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
Pošt
*>::
v®ue
 || \

201 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
Size
*>::
v®ue
 || \

202 
¡d
::
is_§me
<
_Ty³
, 
ABI
::
Wšdows
::
Found©iÚ
::
Reù
*>::
v®ue
)

	)

205 
EXTERN_C
 cÚ¡ 
IID
 
	gIID_ICu¡omSŒ—mSšk
;

207 
şass
 
DECLSPEC_UUID
("4F8A1939-2FD3-46DB-AE70-DB7E0DD79B73"è
DECLSPEC_NOVTABLE
 
	gICu¡omSŒ—mSšk
 : 
public
 
IUnknown


209 
public
:

210 
vœtu®
 
HRESULT
 
In™Ÿlize
() = 0;

211 
vœtu®
 
HRESULT
 
Shutdown
() = 0;

212 
vœtu®
 
HRESULT
 
S¹
(
MFTIME
 
¡¬t
) = 0;

213 
vœtu®
 
HRESULT
 
Pau£
() = 0;

214 
vœtu®
 
HRESULT
 
Re¡¬t
() = 0;

215 
vœtu®
 
HRESULT
 
Stİ
() = 0;

219 
	#MF_PROP_SAMPLEGRABBERCALLBACK
 
L
"§m¶eg¿bb”ÿÎback"

	)

220 
	#MF_PROP_VIDTYPE
 
L
"vidty³"

	)

221 
	#MF_PROP_VIDENCPROPS
 
L
"vid’ırİs"

	)

223 
	~<š™guid.h
>

227 
DEFINE_GUID
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
,

231 
DEFINE_GUID
(
MF_STREAMSINK_ID
, 0x4bd133cc, 0xeb9b, 0x496e, 0x88, 0x65, 0x8, 0x13, 0xbf, 0xbc, 0x6f, 0xaa);

234 
DEFINE_GUID
(
MF_STREAMSINK_MEDIASINKINTERFACE
,

238 
DEFINE_GUID
(
MF_MEDIASINK_PREFERREDTYPE
,

241 
	~<ut™y
>

242 #ifdeà
_UNICODE


243 
	#MAKE_MAP
(
e
è
¡d
::
m­
<e, std::
w¡ršg
>

	)

244 
	#MAKE_ENUM
(
e
è
¡d
::
·œ
<e, std::
w¡ršg
>

	)

245 
	#MAKE_ENUM_PAIR
(
e
, 
¡r
è
¡d
::
·œ
<e, std::
w¡ršg
>(¡r, 
L
#¡r)

	)

247 
	#MAKE_MAP
(
e
è
¡d
::
m­
<e, std::
¡ršg
>

	)

248 
	#MAKE_ENUM
(
e
è
¡d
::
·œ
<e, std::
¡ršg
>

	)

249 
	#MAKE_ENUM_PAIR
(
e
, 
¡r
è
¡d
::
·œ
<e, std::
¡ršg
>(¡r, #¡r)

	)

252 
	$MAKE_ENUM
(
MedŸEv’tTy³
è
MedŸEv’tTy³Paœs
[] = {

253 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEUnknown
),

254 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEE¼Ü
),

255 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEEx‹ndedTy³
),

256 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MENÚF©®E¼Ü
),

257 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEG’”icV1AnchÜ
),

258 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚUnknown
),

259 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚTİŞogyS‘
),

260 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚTİŞog›sCË¬ed
),

261 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚS¹ed
),

262 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚPau£d
),

263 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚStİ³d
),

264 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚClo£d
),

265 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚEnded
),

266 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚR©eChªged
),

267 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚSüubSam¶eCom¶‘e
),

268 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚC­ab™›sChªged
),

269 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚTİŞogyStus
),

270 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚNÙifyP»£Á©iÚTime
),

271 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MENewP»£Á©iÚ
),

272 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MELiûn£Acquis™iÚS¹
),

273 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MELiûn£Acquis™iÚCom¶‘ed
),

274 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEIndividu®iz©iÚS¹
),

275 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEIndividu®iz©iÚCom¶‘ed
),

276 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEEÇbËrProg»ss
),

277 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEEÇbËrCom¶‘ed
),

278 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEPŞicyE¼Ü
),

279 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEPŞicyR•Üt
),

280 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEBufãršgS¹ed
),

281 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEBufãršgStİ³d
),

282 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MECÚÃùS¹
),

283 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MECÚÃùEnd
),

284 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MERecÚÃùS¹
),

285 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MERecÚÃùEnd
),

286 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MER’d””Ev’t
),

287 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚSŒ—mSškFÜm©Chªged
),

288 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESessiÚV1AnchÜ
),

289 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûUnknown
),

290 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûS¹ed
),

291 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mS¹ed
),

292 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûS“ked
),

293 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mS“ked
),

294 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MENewSŒ—m
),

295 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEUpd©edSŒ—m
),

296 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûStİ³d
),

297 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mStİ³d
),

298 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûPau£d
),

299 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mPau£d
),

300 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEEndOfP»£Á©iÚ
),

301 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEEndOfSŒ—m
),

302 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEMedŸSam¶e
),

303 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mTick
),

304 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mThšMode
),

305 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mFÜm©Chªged
),

306 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûR©eChªged
),

307 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEEndOfP»£Á©iÚSegm’t
),

308 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûCh¬aù”i¡icsChªged
),

309 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûR©eChªgeReque¡ed
),

310 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûM‘ad©aChªged
),

311 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESequ’ûrSourûTİŞogyUpd©ed
),

312 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESourûV1AnchÜ
),

313 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESškUnknown
),

314 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškS¹ed
),

315 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškStİ³d
),

316 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškPau£d
),

317 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškR©eChªged
),

318 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškReque¡Sam¶e
),

319 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškM¬k”
),

320 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškP»rŞËd
),

321 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškSüubSam¶eCom¶‘e
),

322 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškFÜm©Chªged
),

323 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESŒ—mSškDeviûChªged
),

324 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEQu®™yNÙify
),

325 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESškInv®id©ed
),

326 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚNameChªged
),

327 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚVŞumeChªged
),

328 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚDeviûRemoved
),

329 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚS”v”Shutdown
),

330 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚGroupšgP¬amChªged
),

331 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚIcÚChªged
),

332 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚFÜm©Chªged
),

333 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚDiscÚÃùed
),

334 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEAudioSessiÚExşusiveModeOv”ride
),

335 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESškV1AnchÜ
),

336 #ià(
WINVER
 >= 0x0602)

337 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEC­tu»AudioSessiÚVŞumeChªged
),

338 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEC­tu»AudioSessiÚDeviûRemoved
),

339 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEC­tu»AudioSessiÚFÜm©Chªged
),

340 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEC­tu»AudioSessiÚDiscÚÃùed
),

341 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEC­tu»AudioSessiÚExşusiveModeOv”ride
),

342 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEC­tu»AudioSessiÚS”v”Shutdown
),

343 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MESškV2AnchÜ
),

345 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
METru¡Unknown
),

346 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEPŞicyChªged
),

347 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MECÚ‹ÁPrÙeùiÚMes§ge
),

348 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEPŞicyS‘
),

349 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
METru¡V1AnchÜ
),

350 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMLiûn£BackupCom¶‘ed
),

351 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMLiûn£BackupProg»ss
),

352 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMLiûn£Re¡ÜeCom¶‘ed
),

353 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMLiûn£Re¡ÜeProg»ss
),

354 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMLiûn£Acquis™iÚCom¶‘ed
),

355 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMIndividu®iz©iÚCom¶‘ed
),

356 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMIndividu®iz©iÚProg»ss
),

357 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMProxim™yCom¶‘ed
),

358 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMLiûn£StÜeCËªed
),

359 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMRevoÿtiÚDowÆßdCom¶‘ed
),

360 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEWMDRMV1AnchÜ
),

361 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MET¿nsfÜmUnknown
),

362 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MET¿nsfÜmN“dIÅut
),

363 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MET¿nsfÜmHaveOuut
),

364 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MET¿nsfÜmD¿šCom¶‘e
),

365 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MET¿nsfÜmM¬k”
),

366 #ià(
WINVER
 >= 0x0602)

367 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEBy‹SŒ—mCh¬aù”i¡icsChªged
),

368 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEVideoC­tu»DeviûRemoved
),

369 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MEVideoC­tu»DeviûP»em±ed
),

371 
	`MAKE_ENUM_PAIR
(
MedŸEv’tTy³
, 
MERe£rvedMax
)

372 
	}
};

373 
	$MAKE_MAP
(
MedŸEv’tTy³
è
	`MedŸEv’tTy³M­
(
MedŸEv’tTy³Paœs
, MediaEventTypePairs + (MediaEventTypePairs) / (MediaEventTypePairs[0]));

375 
	$MAKE_ENUM
(
MFSTREAMSINK_MARKER_TYPE
è
SŒ—mSškM¬k”Ty³Paœs
[] = {

376 
	`MAKE_ENUM_PAIR
(
MFSTREAMSINK_MARKER_TYPE
, 
MFSTREAMSINK_MARKER_DEFAULT
),

377 
	`MAKE_ENUM_PAIR
(
MFSTREAMSINK_MARKER_TYPE
, 
MFSTREAMSINK_MARKER_ENDOFSEGMENT
),

378 
	`MAKE_ENUM_PAIR
(
MFSTREAMSINK_MARKER_TYPE
, 
MFSTREAMSINK_MARKER_TICK
),

379 
	`MAKE_ENUM_PAIR
(
MFSTREAMSINK_MARKER_TYPE
, 
MFSTREAMSINK_MARKER_EVENT
)

380 
	}
};

381 
	$MAKE_MAP
(
MFSTREAMSINK_MARKER_TYPE
è
	`SŒ—mSškM¬k”Ty³M­
(
SŒ—mSškM¬k”Ty³Paœs
, StreamSinkMarkerTypePairs + (StreamSinkMarkerTypePairs) / (StreamSinkMarkerTypePairs[0]));

383 #ifdeà
WINRT


385 #ifdeà
__ılu¥lus_wš¹


386 
	#_CÚ‹xtC®lback
 
CÚcu¼’cy
::
d‘as
::
_CÚ‹xtC®lback


	)

387 
	#BEGIN_CALL_IN_CONTEXT
(
hr
, 
v¬
, ...èh¸ğ
S_OK
;\

388 
v¬
.
	`_C®lInCÚ‹xt
([
__VA_ARGS__
](è{

	)

389 
	#END_CALL_IN_CONTEXT
(
hr
èià(
	`FAILED
(hr)è
throw
 
PÏtfÜm
::
Exû±iÚ
::
	`C»©eExû±iÚ
(hr);\

390 
	}
});

	)

391 
	#END_CALL_IN_CONTEXT_BASE
 });

	)

393 
	#_CÚ‹xtC®lback
 
CÚcu¼’cy_wš¹
::
d‘as
::
_CÚ‹xtC®lback


	)

394 
	#BEGIN_CALL_IN_CONTEXT
(
hr
, 
v¬
, ...èh¸ğv¬.
	`_C®lInCÚ‹xt
([
__VA_ARGS__
](è-> 
HRESULT
 {

	)

395 
	#END_CALL_IN_CONTEXT
(
hr
)  hr;\

396 });

	)

397 
	#END_CALL_IN_CONTEXT_BASE
  
S_OK
;\

398 });

	)

400 
	#GET_CURRENT_CONTEXT
 
_CÚ‹xtC®lback
::
	`_C­tu»Cu¼’t
()

	)

401 
	#SAVE_CURRENT_CONTEXT
(
v¬
è
_CÚ‹xtC®lback
 v¬ = 
GET_CURRENT_CONTEXT


	)

403 
	#COMMA
 ,

	)

405 #ifdeà
__ılu¥lus_wš¹


406 
	#_Objeù
 
PÏtfÜm
::
Objeù
^

	)

407 
	#_ObjeùObj
 
PÏtfÜm
::
Objeù
^

	)

408 
	#_SŒšg
 
PÏtfÜm
::
SŒšg
^

	)

409 
	#_SŒšgObj
 
PÏtfÜm
::
SŒšg
^

	)

410 
	#_SŒšgReã»nû
 
»f
 
Ãw
 
PÏtfÜm
::
SŒšg


	)

411 
	#_SŒšgReã»nûObj
 
PÏtfÜm
::
SŒšg
^

	)

412 
	#_DeviûInfÜm©iÚCŞËùiÚ
 
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚCŞËùiÚ


	)

413 
	#_MedŸC­tu»
 
Wšdows
::
MedŸ
::
C­tu»
::
MedŸC­tu»


	)

414 
	#_MedŸC­tu»VideoP»v›w
 
Wšdows
::
MedŸ
::
C­tu»
::
MedŸC­tu»


	)

415 
	#_MedŸC­tu»In™Ÿliz©iÚS‘tšgs
 
Wšdows
::
MedŸ
::
C­tu»
::
MedŸC­tu»In™Ÿliz©iÚS‘tšgs


	)

416 
	#_VideoDeviûCÚŒŞËr
 
Wšdows
::
MedŸ
::
Deviûs
::
VideoDeviûCÚŒŞËr


	)

417 
	#_MedŸDeviûCÚŒŞËr
 
Wšdows
::
MedŸ
::
Deviûs
::
VideoDeviûCÚŒŞËr


	)

418 
	#_MedŸEncodšgPrİ”t›s
 
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s


	)

419 
	#_VideoEncodšgPrİ”t›s
 
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
VideoEncodšgPrİ”t›s


	)

420 
	#_MedŸSŒ—mTy³
 
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³


	)

421 
	#_AsyncInfo
 
Wšdows
::
Found©iÚ
::
IAsyncInfo


	)

422 
	#_AsyncAùiÚ
 
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ


	)

423 
	#_AsyncO³¿tiÚ
 
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ


	)

424 
	#_DeviûCÏss
 
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûCÏss


	)

425 
	#_IDeviûInfÜm©iÚ
 
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚ


	)

426 
	#_DeviûInfÜm©iÚ
 
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚ


	)

427 
	#_DeviûInfÜm©iÚStics
 
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚ


	)

428 
	#_MedŸEncodšgProfe
 
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
MedŸEncodšgProfe


	)

429 
	#_SŒ—mšgC­tu»Mode
 
Wšdows
::
MedŸ
::
C­tu»
::
SŒ—mšgC­tu»Mode


	)

430 
	#_Prİ”tyS‘
 
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
Prİ”tyS‘


	)

431 
	#_M­
 
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
Prİ”tyS‘


	)

432 
	#_Prİ”tyV®ueStics
 
Wšdows
::
Found©iÚ
::
Prİ”tyV®ue


	)

433 
	#_VeùÜV›w
 
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IVeùÜV›w


	)

434 
	#_S¹P»v›wToCu¡omSškIdAsync
 
S¹P»v›wToCu¡omSškAsync


	)

435 
	#_In™ŸlizeW™hS‘tšgsAsync
 
In™ŸlizeAsync


	)

436 
	#_FšdAÎAsyncDeviûCÏss
 
FšdAÎAsync


	)

437 
	#_MedŸEx‹nsiÚ
 
Wšdows
::
MedŸ
::
IMedŸEx‹nsiÚ


	)

438 
	#BEGIN_CREATE_ASYNC
(
ty³
, ...è(
CÚcu¼’cy
::
	`ü—‹_async
([
__VA_ARGS__
](è{

	)

439 
	#END_CREATE_ASYNC
(
hr
èià(
	`FAILED
(hr)è
throw
 
PÏtfÜm
::
Exû±iÚ
::
	`C»©eExû±iÚ
(hr);\

440 }))

	)

441 
	#DEFINE_TASK
 
CÚcu¼’cy
::
sk


	)

442 
	#CREATE_TASK
 
CÚcu¼’cy
::
ü—‹_sk


	)

443 
	#CREATE_OR_CONTINUE_TASK
(
_sk
, 
»‰y³
, 
func
è_sk = (_sk =ğ
CÚcu¼’cy
::
sk
<»‰y³>()è? CÚcu¼’cy::
	`ü—‹_sk
(funcè: _sk.
	`th’
([func]Ô‘ty³è->„‘ty³ {  
	`func
(); });

	)

444 
	#DEFINE_RET_VAL
(
x
)

	)

445 
	#DEFINE_RET_TYPE
(
x
)

	)

446 
	#DEFINE_RET_FORMAL
(
x
è
	)
x

447 
	#RET_VAL
(
x
è x;

	)

448 
	#RET_VAL_BASE


	)

449 
	#MAKE_STRING
(
¡r
è
	)
str

450 
	#GET_STL_STRING
(
¡r
è
¡d
::
	`w¡ršg
(¡r->
	`D©a
())

	)

451 
	#GET_STL_STRING_RAW
(
¡r
è
¡d
::
	`w¡ršg
(¡r->
	`D©a
())

	)

452 
	#MAKE_WRL_OBJ
(
x
èx^

	)

453 
	#MAKE_WRL_REF
(
x
èx^

	)

454 
	#MAKE_OBJ_REF
(
x
èx^

	)

455 
	#MAKE_WRL_AGILE_REF
(
x
è
PÏtfÜm
::
Age
<x^>

	)

456 
	#MAKE_PROPERTY_BACKING
(
Ty³
, 
PrİName
è
´İ”ty
 Ty³ PrİName;

	)

457 
	#MAKE_PROPERTY
(
Ty³
, 
PrİName
, 
PrİV®ue
)

	)

458 
	#MAKE_PROPERTY_STRING
(
Ty³
, 
PrİName
, 
PrİV®ue
)

	)

459 
	#MAKE_READONLY_PROPERTY
(
Ty³
, 
PrİName
, 
PrİV®ue
è
´İ”ty
 Type PropName\

461 
Ty³
 
	`g‘
(è{  
PrİV®ue
; }\

462 }

	)

463 
	#THROW_INVALID_ARG
 
throw
 
»f
 
Ãw
 
PÏtfÜm
::
	`Inv®idArgum’tExû±iÚ
();

	)

464 
	#RELEASE_AGILE_WRL
(
x
èx = 
nuÎ±r
;

	)

465 
	#RELEASE_WRL
(
x
èx = 
nuÎ±r
;

	)

466 
	#GET_WRL_OBJ_FROM_REF
(
objty³
, 
obj
, 
Üig
, 
hr
) objtype^ obj = orig;\

467 
hr
 = 
S_OK
;

	)

468 
	#GET_WRL_OBJ_FROM_OBJ
(
objty³
, 
obj
, 
Üig
, 
hr
èobjty³^ obj = 
§ã_ÿ¡
<objtype^>(orig);\

469 
hr
 = 
S_OK
;

	)

470 
	#WRL_ENUM_GET
(
obj
, 
´efix
, 
´İ
èobj::##
	)
prop

471 
	#WRL_PROP_GET
(
obj
, 
´İ
, 
¬g
, 
hr
)‡rg = obj->##prop;\

472 
hr
 = 
S_OK
;

	)

473 
	#WRL_PROP_PUT
(
obj
, 
´İ
, 
¬g
, 
hr
) obj->##prop =‡rg;\

474 
hr
 = 
S_OK
;

	)

475 
	#WRL_METHOD_BASE
(
obj
, 
m‘hod
, 
»t
, 
hr
è»ˆğobj->##
	`m‘hod
();\

476 
hr
 = 
S_OK
;

	)

477 
	#WRL_METHOD
(
obj
, 
m‘hod
, 
»t
, 
hr
, ...è»ˆğobj->##
	`m‘hod
(
__VA_ARGS__
);\

478 
hr
 = 
S_OK
;

	)

479 
	#WRL_METHOD_NORET_BASE
(
obj
, 
m‘hod
, 
hr
èobj->##
	`m‘hod
();\

480 
hr
 = 
S_OK
;

	)

481 
	#WRL_METHOD_NORET
(
obj
, 
m‘hod
, 
hr
, ...èobj->##
	`m‘hod
(
__VA_ARGS__
);\

482 
hr
 = 
S_OK
;

	)

483 
	#REF_WRL_OBJ
(
obj
è&
	)
obj

484 
	#DEREF_WRL_OBJ
(
obj
è
	)
obj

485 
	#DEREF_AGILE_WRL_OBJ
(
obj
èobj.
	`G‘
()

	)

486 
	#DEREF_AS_NATIVE_WRL_OBJ
(
ty³
, 
obj
è
»š‹½»t_ÿ¡
<ty³*>(obj)

	)

487 
	#PREPARE_TRANSFER_WRL_OBJ
(
obj
è
	)
obj

488 
	#ACTIVATE_LOCAL_OBJ_BASE
(
objty³
è
»f
 
Ãw
 
	`objty³
()

	)

489 
	#ACTIVATE_LOCAL_OBJ
(
objty³
, ...è
»f
 
Ãw
 
	`objty³
(
__VA_ARGS__
)

	)

490 
	#ACTIVATE_EVENT_HANDLER
(
objty³
, ...è
»f
 
Ãw
 
	`objty³
(
__VA_ARGS__
)

	)

491 
	#ACTIVATE_OBJ
(
¹şass
, 
objty³
, 
obj
, 
hr
è
	`MAKE_WRL_OBJ
(objty³èobj = 
»f
 
Ãw
 
	`objty³
();\

492 
hr
 = 
S_OK
;

	)

493 
	#ACTIVATE_STATIC_OBJ
(
¹şass
, 
objty³
, 
obj
, 
hr
) objtype obj;\

494 
hr
 = 
S_OK
;

	)

496 
	#_Objeù
 
IIn¥eùabË
*

	)

497 
	#_ObjeùObj
 
Miüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
>

	)

498 
	#_SŒšg
 
HSTRING


	)

499 
	#_SŒšgObj
 
Miüosoá
::
WRL
::
W¿µ”s
::
HSŒšg


	)

500 
	#_SŒšgReã»nû
 
Miüosoá
::
WRL
::
W¿µ”s
::
HSŒšgReã»nû


	)

501 
	#_SŒšgReã»nûObj
 
Miüosoá
::
WRL
::
W¿µ”s
::
HSŒšgReã»nû


	)

502 
	#_DeviûInfÜm©iÚCŞËùiÚ
 
ABI
::
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚCŞËùiÚ


	)

503 
	#_MedŸC­tu»
 
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
IMedŸC­tu»


	)

504 
	#_MedŸC­tu»VideoP»v›w
 
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
IMedŸC­tu»VideoP»v›w


	)

505 
	#_MedŸC­tu»In™Ÿliz©iÚS‘tšgs
 
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
IMedŸC­tu»In™Ÿliz©iÚS‘tšgs


	)

506 
	#_VideoDeviûCÚŒŞËr
 
ABI
::
Wšdows
::
MedŸ
::
Deviûs
::
IVideoDeviûCÚŒŞËr


	)

507 
	#_MedŸDeviûCÚŒŞËr
 
ABI
::
Wšdows
::
MedŸ
::
Deviûs
::
IMedŸDeviûCÚŒŞËr


	)

508 
	#_MedŸEncodšgPrİ”t›s
 
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s


	)

509 
	#_VideoEncodšgPrİ”t›s
 
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IVideoEncodšgPrİ”t›s


	)

510 
	#_MedŸSŒ—mTy³
 
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³


	)

511 
	#_AsyncInfo
 
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo


	)

512 
	#_AsyncAùiÚ
 
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ


	)

513 
	#_AsyncO³¿tiÚ
 
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ


	)

514 
	#_DeviûCÏss
 
ABI
::
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûCÏss


	)

515 
	#_IDeviûInfÜm©iÚ
 
ABI
::
Wšdows
::
Deviûs
::
Enum”©iÚ
::
IDeviûInfÜm©iÚ


	)

516 
	#_DeviûInfÜm©iÚ
 
ABI
::
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚ


	)

517 
	#_DeviûInfÜm©iÚStics
 
ABI
::
Wšdows
::
Deviûs
::
Enum”©iÚ
::
IDeviûInfÜm©iÚStics


	)

518 
	#_MedŸEncodšgProfe
 
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgProfe


	)

519 
	#_SŒ—mšgC­tu»Mode
 
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
SŒ—mšgC­tu»Mode


	)

520 
	#_Prİ”tyS‘
 
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IPrİ”tyS‘


	)

521 
	#_M­
 
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IM­
<
HSTRING
, 
IIn¥eùabË
 *>

	)

522 
	#_Prİ”tyV®ueStics
 
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ueStics


	)

523 
	#_VeùÜV›w
 
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IVeùÜV›w


	)

524 
	#_S¹P»v›wToCu¡omSškIdAsync
 
S¹P»v›wToCu¡omSškIdAsync


	)

525 
	#_In™ŸlizeW™hS‘tšgsAsync
 
In™ŸlizeW™hS‘tšgsAsync


	)

526 
	#_FšdAÎAsyncDeviûCÏss
 
FšdAÎAsyncDeviûCÏss


	)

527 
	#_MedŸEx‹nsiÚ
 
ABI
::
Wšdows
::
MedŸ
::
IMedŸEx‹nsiÚ


	)

528 
	#BEGIN_CREATE_ASYNC
(
ty³
, ...è
CÚcu¼’cy_wš¹
::
ü—‹_async
<ty³>([
__VA_ARGS__
](è-> 
HRESULT
 {

	)

529 
	#END_CREATE_ASYNC
(
hr
)  hr;\

530 })

	)

531 
	#DEFINE_TASK
 
CÚcu¼’cy_wš¹
::
sk


	)

532 
	#CREATE_TASK
 
CÚcu¼’cy_wš¹
::
ü—‹_sk


	)

533 
	#CREATE_OR_CONTINUE_TASK
(
_sk
, 
»‰y³
, 
func
è_sk = (_sk =ğ
CÚcu¼’cy_wš¹
::
sk
<»‰y³>()è? CÚcu¼’cy_wš¹::
ü—‹_sk
<»‰y³>(funcè: _sk.
	`th’
([func]Ô‘ty³,„‘ty³* 
»tV®
è-> 
HRESULT
 {  
	`func
Ô‘V®); });

	)

534 
	#DEFINE_RET_VAL
(
x
èx* 
»tV®


	)

535 
	#DEFINE_RET_TYPE
(
x
è<x>

	)

536 
	#DEFINE_RET_FORMAL
(
x
è
HRESULT


	)

537 
	#RET_VAL
(
x
è*
»tV®
 = x;\

538  
S_OK
;

	)

539 
	#RET_VAL_BASE
  
S_OK
;

	)

540 
	#MAKE_STRING
(
¡r
è
Miüosoá
::
WRL
::
W¿µ”s
::
	`HSŒšgReã»nû
(
L
##¡r)

	)

541 
	#GET_STL_STRING
(
¡r
è
¡d
::
	`w¡ršg
(¡r.
	`G‘RawBufãr
(
NULL
))

	)

542 
	#GET_STL_STRING_RAW
(
¡r
è
	`WšdowsG‘SŒšgRawBufãr
(¡r, 
NULL
)

	)

543 
	#MAKE_WRL_OBJ
(
x
è
Miüosoá
::
WRL
::
ComPŒ
<x>

	)

544 
	#MAKE_WRL_REF
(
x
èx*

	)

545 
	#MAKE_OBJ_REF
(
x
è
	)
x

546 
	#MAKE_WRL_AGILE_REF
(
x
èx*

	)

547 
	#MAKE_PROPERTY_BACKING
(
Ty³
, 
PrİName
èTy³ PrİName;

	)

548 
	#MAKE_PROPERTY
(
Ty³
, 
PrİName
, 
PrİV®ue
è
STDMETHODIMP
 
g‘_
##
	`PrİName
(Ty³* 
pV®
è{ iàÕV®è{ *pV® = PrİV®ue; } {  
E_INVALIDARG
; }  
S_OK
; }\

549 
STDMETHODIMP
 
put_
##
	`PrİName
(
Ty³
 
V®
è{ 
PrİV®ue
 = V®;  
S_OK
; }

	)

550 
	#MAKE_PROPERTY_STRING
(
Ty³
, 
PrİName
, 
PrİV®ue
è
STDMETHODIMP
 
g‘_
##
	`PrİName
(Ty³* 
pV®
è{ iàÕV®è{  ::
	`WšdowsDu¶iÿ‹SŒšg
(PrİV®ue.
	`G‘
(),…V®); } {  
E_INVALIDARG
; } }\

551 
STDMETHODIMP
 
put_
##
	`PrİName
(
Ty³
 
V®
è{  
PrİV®ue
.
	`S‘
(V®); }

	)

552 
	#MAKE_READONLY_PROPERTY
(
Ty³
, 
PrİName
, 
PrİV®ue
è
STDMETHODIMP
 
g‘_
##
	`PrİName
(Ty³* 
pV®
è{ iàÕV®è{ *pV® = PrİV®ue; } {  
E_INVALIDARG
; }  
S_OK
; }

	)

553 
	#THROW_INVALID_ARG
 
	`RoOrigš©eE¼Ü
(
E_INVALIDARG
, 
nuÎ±r
);

	)

554 
	#RELEASE_AGILE_WRL
(
x
èià(xè{ (x)->
	`R–—£
(); x = 
nuÎ±r
; }

	)

555 
	#RELEASE_WRL
(
x
èià(xè{ (x)->
	`R–—£
(); x = 
nuÎ±r
; }

	)

556 
	#GET_WRL_OBJ_FROM_REF
(
objty³
, 
obj
, 
Üig
, 
hr
è
Miüosoá
::
WRL
::
ComPŒ
<objtype> obj;\

557 
hr
 = 
Üig
->
	`Qu”yIÁ”çû
(
	`__uuidof
(
objty³
), &
obj
);

	)

558 
	#GET_WRL_OBJ_FROM_OBJ
(
objty³
, 
obj
, 
Üig
, 
hr
è
Miüosoá
::
WRL
::
ComPŒ
<objtype> obj;\

559 
hr
 = 
Üig
.
	`As
(&
obj
);

	)

560 
	#WRL_ENUM_GET
(
obj
, 
´efix
, 
´İ
èobj::´efix##
_
##
	)
prop

561 
	#WRL_PROP_GET
(
obj
, 
´İ
, 
¬g
, 
hr
èh¸ğobj->
g‘_
##
	`´İ
(&¬g);

	)

562 
	#WRL_PROP_PUT
(
obj
, 
´İ
, 
¬g
, 
hr
èh¸ğobj->
put_
##
	`´İ
×rg);

	)

563 
	#WRL_METHOD_BASE
(
obj
, 
m‘hod
, 
»t
, 
hr
èh¸ğobj->##
	`m‘hod
(&»t);

	)

564 
	#WRL_METHOD
(
obj
, 
m‘hod
, 
»t
, 
hr
, ...èh¸ğobj->##
	`m‘hod
(
__VA_ARGS__
, &»t);

	)

565 
	#WRL_METHOD_NORET_BASE
(
obj
, 
m‘hod
, 
hr
èh¸ğobj->##
	`m‘hod
();

	)

566 
	#REF_WRL_OBJ
(
obj
èobj.
	`G‘Add»ssOf
()

	)

567 
	#DEREF_WRL_OBJ
(
obj
èobj.
	`G‘
()

	)

568 
	#DEREF_AGILE_WRL_OBJ
(
obj
è
	)
obj

569 
	#DEREF_AS_NATIVE_WRL_OBJ
(
ty³
, 
obj
èobj.
	`G‘
()

	)

570 
	#PREPARE_TRANSFER_WRL_OBJ
(
obj
èobj.
	`D‘ach
()

	)

571 
	#ACTIVATE_LOCAL_OBJ_BASE
(
objty³
è
Miüosoá
::
WRL
::
Make
<objty³>()

	)

572 
	#ACTIVATE_LOCAL_OBJ
(
objty³
, ...è
Miüosoá
::
WRL
::
Make
<objty³>(
__VA_ARGS__
)

	)

573 
	#ACTIVATE_EVENT_HANDLER
(
objty³
, ...è
Miüosoá
::
WRL
::
C®lback
<objty³>(
__VA_ARGS__
).
	`G‘
()

	)

574 
	#ACTIVATE_OBJ
(
¹şass
, 
objty³
, 
obj
, 
hr
è
	`MAKE_WRL_OBJ
(objtype) obj;\

576 
Miüosoá
::
WRL
::
ComPŒ
<
IAùiv©iÚFaùÜy
> 
objFaùÜy
;\

577 
hr
 = 
Wšdows
::
Found©iÚ
::
	`G‘Aùiv©iÚFaùÜy
(
Miüosoá
::
WRL
::
W¿µ”s
::
	`HSŒšgReã»nû
(
¹şass
).
	`G‘
(), 
objFaùÜy
.
	`R–—£AndG‘Add»ssOf
());\

578 ià(
	`SUCCEEDED
(
hr
)) {\

579 
Miüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
pIn¥
;\

580 
hr
 = 
objFaùÜy
->
	`Aùiv©eIn¡ªû
(
pIn¥
.
	`G‘Add»ssOf
());\

581 ià(
	`SUCCEEDED
(
hr
)èh¸ğ
pIn¥
.
	`As
(&
obj
);\

583 }

	)

584 
	#ACTIVATE_STATIC_OBJ
(
¹şass
, 
objty³
, 
obj
, 
hr
) objtype obj;\

586 
Miüosoá
::
WRL
::
ComPŒ
<
IAùiv©iÚFaùÜy
> 
objFaùÜy
;\

587 
hr
 = 
Wšdows
::
Found©iÚ
::
	`G‘Aùiv©iÚFaùÜy
(
Miüosoá
::
WRL
::
W¿µ”s
::
	`HSŒšgReã»nû
(
¹şass
).
	`G‘
(), 
objFaùÜy
.
	`R–—£AndG‘Add»ssOf
());\

588 ià(
	`SUCCEEDED
(
hr
)) {\

589 ià(
	`SUCCEEDED
(
hr
)èh¸ğ
objFaùÜy
.
	`As
(&
obj
);\

591 }

	)

594 
	#_ComPŒ
 
Miüosoá
::
WRL
::
ComPŒ


	)

597 
	#_COM_SMARTPTR_DECLARE
(
T
,
v¬
èT ## 
PŒ
 
	)
var

599 
	g‹m¶©e
 <
şass
 
	gT
>

600 şas 
	cComPŒ


602 
	mpublic
:

603 
	$ComPŒ
(è
	$throw
()

606 
	$ComPŒ
(
T
* 
Í
è
	$throw
()

608 
p
 = 
Í
;

609 
	}
}

610 
ComPŒ
(
_In_
 cÚ¡ ComPŒ<
T
>& 
Í
è
	$throw
()

612 
p
 = 
Í
.p;

613 
	}
}

614 
	gvœtu®
 ~
	$ComPŒ
()

616 
	}
}

618 
T
** 
	gİ”©Ü
&(è
	$throw
()

620 
	`as£¹
(
p
 =ğ
NULL
);

621  
p
.
İ”©Ü
&();

622 
	}
}

623 
T
* 
	gİ”©Ü
->(ècÚ¡ 
	$throw
()

625 
	`as£¹
(
p
 !ğ
NULL
);

626  
p
.
İ”©Ü
->();

627 
	}
}

628 
boŞ
 
	gİ”©Ü
!(ècÚ¡ 
	$throw
()

630  
p
.
İ”©Ü
==(
NULL
);

631 
	}
}

632 
boŞ
 
	gİ”©Ü
==(
_In_İt_
 
T
* 
pT
ècÚ¡ 
	$throw
()

634  
p
.
İ”©Ü
==(
pT
);

635 
	}
}

636 
boŞ
 
	gİ”©Ü
!=(
_In_İt_
 
T
* 
pT
ècÚ¡ 
	$throw
()

638  
p
.
İ”©Ü
!=(
pT
);

639 
	}
}

640 
İ”©Ü
 
	$boŞ
()

642  
p
.
İ”©Ü
!=(
NULL
);

643 
	}
}

645 
T
* cÚ¡* 
	$G‘Add»ssOf
(ècÚ¡ 
	$throw
()

647  &
p
;

648 
	}
}

650 
T
** 
	$G‘Add»ssOf
(è
	$throw
()

652  &
p
;

653 
	}
}

655 
T
** 
	$R–—£AndG‘Add»ssOf
(è
	$throw
()

657 
p
.
	`R–—£
();

658  &
p
;

659 
	}
}

661 
T
* 
	$G‘
(ècÚ¡ 
	$throw
()

663  
p
;

664 
	}
}

667 
	$A‰ach
(
_In_İt_
 
T
* 
p2
è
	$throw
()

669 
p
.
	`A‰ach
(
p2
);

670 
	}
}

672 
T
* 
	$D‘ach
(è
	$throw
()

674  
p
.
	`D‘ach
();

675 
	}
}

676 
_Check_»tuº_
 
HRESULT
 
	$CİyTo
(
_D”ef_out_İt_
 
T
** 
µT
è
	$throw
()

678 
	`as£¹
(
µT
 !ğ
NULL
);

679 ià(
µT
 =ğ
NULL
)

680  
E_POINTER
;

681 *
µT
 = 
p
;

682 ià(
p
 !ğ
NULL
)

683 
p
->
	`AddRef
();

684  
S_OK
;

685 
	}
}

687 
	$Re£t
()

689 
p
.
	`R–—£
();

690 
	}
}

693 
	g‹m¶©e
<
ty³Çme
 
	gU
>

694 
HRESULT
 
	$As
(
_Inout_
 
U
** 
Í
ècÚ¡ 
	$throw
()

696  
p
->
	`Qu”yIÁ”çû
(
	`__uuidof
(
U
), 
»š‹½»t_ÿ¡
<**>(
Í
));

697 
	}
}

699 
	g‹m¶©e
<
ty³Çme
 
	gU
>

700 
HRESULT
 
As
(
_Out_
 
ComPŒ
<
U
>* 
Í
ècÚ¡ 
	$throw
()

702  
p
->
	`Qu”yIÁ”çû
(
	`__uuidof
(
U
), 
»š‹½»t_ÿ¡
<**>(
Í
->
	`R–—£AndG‘Add»ssOf
()));

703 
	}
}

704 
	g´iv©e
:

705 
_COM_SMARTPTR_TYPEDEF
(
T
, 
__uuidof
(T));

706 
_COM_SMARTPTR_DECLARE
(
T
, 
p
);

709 
	#_ComPŒ
 
ComPŒ


	)

712 
	g‹m¶©e
 <
şass
 
	gTBa£
=
IMFA‰ribu‹s
>

713 şas 
	cCBa£A‰ribu‹s
 : 
public
 
TBa£


715 
´Ùeùed
:

719 
	$CBa£A‰ribu‹s
()

727 
	$CBa£A‰ribu‹s
(
HRESULT
& 
hr
, 
UINT32
 
cIn™ŸlSize
 = 0)

729 
hr
 = 
	`In™Ÿlize
(
cIn™ŸlSize
);

730 
	}
}

739 
	$CBa£A‰ribu‹s
(
HRESULT
& 
hr
, 
IUnknown
 *
pUnk
)

741 
hr
 = 
	`In™Ÿlize
(
pUnk
);

742 
	}
}

744 
	gvœtu®
 ~
	$CBa£A‰ribu‹s
()

746 
	}
}

749 
HRESULT
 
	$In™Ÿlize
(
UINT32
 
cIn™ŸlSize
 = 0)

751 ià(
_¥A‰ribu‹s
.
	`G‘
(è=ğ
nuÎ±r
)

753  
	`MFC»©eA‰ribu‹s
(&
_¥A‰ribu‹s
, 
cIn™ŸlSize
);

757  
S_OK
;

759 
	}
}

763 
HRESULT
 
	$In™Ÿlize
(
IUnknown
 *
pUnk
)

765 ià(
_¥A‰ribu‹s
)

767 
_¥A‰ribu‹s
.
	`Re£t
();

768 
_¥A‰ribu‹s
 = 
nuÎ±r
;

772  
pUnk
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
_¥A‰ribu‹s
));

773 
	}
}

775 
	gpublic
:

779 
STDMETHODIMP
 
	$G‘I‹m
(
REFGUID
 
guidKey
, 
PROPVARIANT
* 
pV®ue
)

781 
	`as£¹
(
_¥A‰ribu‹s
);

782  
_¥A‰ribu‹s
->
	`G‘I‹m
(
guidKey
, 
pV®ue
);

783 
	}
}

785 
STDMETHODIMP
 
	$G‘I‹mTy³
(
REFGUID
 
guidKey
, 
MF_ATTRIBUTE_TYPE
* 
pTy³
)

787 
	`as£¹
(
_¥A‰ribu‹s
);

788  
_¥A‰ribu‹s
->
	`G‘I‹mTy³
(
guidKey
, 
pTy³
);

789 
	}
}

791 
STDMETHODIMP
 
	$Com·»I‹m
(
REFGUID
 
guidKey
, 
REFPROPVARIANT
 
V®ue
, 
BOOL
* 
pbResuÉ
)

793 
	`as£¹
(
_¥A‰ribu‹s
);

794  
_¥A‰ribu‹s
->
	`Com·»I‹m
(
guidKey
, 
V®ue
, 
pbResuÉ
);

795 
	}
}

797 
STDMETHODIMP
 
	$Com·»
(

798 
IMFA‰ribu‹s
* 
pTheœs
,

799 
MF_ATTRIBUTES_MATCH_TYPE
 
M©chTy³
,

800 
BOOL
* 
pbResuÉ


803 
	`as£¹
(
_¥A‰ribu‹s
);

804  
_¥A‰ribu‹s
->
	`Com·»
(
pTheœs
, 
M©chTy³
, 
pbResuÉ
);

805 
	}
}

807 
STDMETHODIMP
 
	$G‘UINT32
(
REFGUID
 
guidKey
, 
UINT32
* 
punV®ue
)

809 
	`as£¹
(
_¥A‰ribu‹s
);

810  
_¥A‰ribu‹s
->
	`G‘UINT32
(
guidKey
, 
punV®ue
);

811 
	}
}

813 
STDMETHODIMP
 
	$G‘UINT64
(
REFGUID
 
guidKey
, 
UINT64
* 
punV®ue
)

815 
	`as£¹
(
_¥A‰ribu‹s
);

816  
_¥A‰ribu‹s
->
	`G‘UINT64
(
guidKey
, 
punV®ue
);

817 
	}
}

819 
STDMETHODIMP
 
	$G‘DoubË
(
REFGUID
 
guidKey
, * 
pfV®ue
)

821 
	`as£¹
(
_¥A‰ribu‹s
);

822  
_¥A‰ribu‹s
->
	`G‘DoubË
(
guidKey
, 
pfV®ue
);

823 
	}
}

825 
STDMETHODIMP
 
	$G‘GUID
(
REFGUID
 
guidKey
, 
GUID
* 
pguidV®ue
)

827 
	`as£¹
(
_¥A‰ribu‹s
);

828  
_¥A‰ribu‹s
->
	`G‘GUID
(
guidKey
, 
pguidV®ue
);

829 
	}
}

831 
STDMETHODIMP
 
	$G‘SŒšgL’gth
(
REFGUID
 
guidKey
, 
UINT32
* 
pcchL’gth
)

833 
	`as£¹
(
_¥A‰ribu‹s
);

834  
_¥A‰ribu‹s
->
	`G‘SŒšgL’gth
(
guidKey
, 
pcchL’gth
);

835 
	}
}

837 
STDMETHODIMP
 
	$G‘SŒšg
(
REFGUID
 
guidKey
, 
LPWSTR
 
pwszV®ue
, 
UINT32
 
cchBufSize
, UINT32* 
pcchL’gth
)

839 
	`as£¹
(
_¥A‰ribu‹s
);

840  
_¥A‰ribu‹s
->
	`G‘SŒšg
(
guidKey
, 
pwszV®ue
, 
cchBufSize
, 
pcchL’gth
);

841 
	}
}

843 
STDMETHODIMP
 
	$G‘AÎoÿ‹dSŒšg
(
REFGUID
 
guidKey
, 
LPWSTR
* 
µwszV®ue
, 
UINT32
* 
pcchL’gth
)

845 
	`as£¹
(
_¥A‰ribu‹s
);

846  
_¥A‰ribu‹s
->
	`G‘AÎoÿ‹dSŒšg
(
guidKey
, 
µwszV®ue
, 
pcchL’gth
);

847 
	}
}

849 
STDMETHODIMP
 
	$G‘BlobSize
(
REFGUID
 
guidKey
, 
UINT32
* 
pcbBlobSize
)

851 
	`as£¹
(
_¥A‰ribu‹s
);

852  
_¥A‰ribu‹s
->
	`G‘BlobSize
(
guidKey
, 
pcbBlobSize
);

853 
	}
}

855 
STDMETHODIMP
 
	$G‘Blob
(
REFGUID
 
guidKey
, 
UINT8
* 
pBuf
, 
UINT32
 
cbBufSize
, UINT32* 
pcbBlobSize
)

857 
	`as£¹
(
_¥A‰ribu‹s
);

858  
_¥A‰ribu‹s
->
	`G‘Blob
(
guidKey
, 
pBuf
, 
cbBufSize
, 
pcbBlobSize
);

859 
	}
}

861 
STDMETHODIMP
 
	$G‘AÎoÿ‹dBlob
(
REFGUID
 
guidKey
, 
UINT8
** 
µBuf
, 
UINT32
* 
pcbSize
)

863 
	`as£¹
(
_¥A‰ribu‹s
);

864  
_¥A‰ribu‹s
->
	`G‘AÎoÿ‹dBlob
(
guidKey
, 
µBuf
, 
pcbSize
);

865 
	}
}

867 
STDMETHODIMP
 
	$G‘Unknown
(
REFGUID
 
guidKey
, 
REFIID
 
riid
, 
LPVOID
* 
µv
)

869 
	`as£¹
(
_¥A‰ribu‹s
);

870  
_¥A‰ribu‹s
->
	`G‘Unknown
(
guidKey
, 
riid
, 
µv
);

871 
	}
}

873 
STDMETHODIMP
 
	$S‘I‹m
(
REFGUID
 
guidKey
, 
REFPROPVARIANT
 
V®ue
)

875 
	`as£¹
(
_¥A‰ribu‹s
);

876  
_¥A‰ribu‹s
->
	`S‘I‹m
(
guidKey
, 
V®ue
);

877 
	}
}

879 
STDMETHODIMP
 
	$D–‘eI‹m
(
REFGUID
 
guidKey
)

881 
	`as£¹
(
_¥A‰ribu‹s
);

882  
_¥A‰ribu‹s
->
	`D–‘eI‹m
(
guidKey
);

883 
	}
}

885 
STDMETHODIMP
 
	$D–‘eAÎI‹ms
()

887 
	`as£¹
(
_¥A‰ribu‹s
);

888  
_¥A‰ribu‹s
->
	`D–‘eAÎI‹ms
();

889 
	}
}

891 
STDMETHODIMP
 
	$S‘UINT32
(
REFGUID
 
guidKey
, 
UINT32
 
unV®ue
)

893 
	`as£¹
(
_¥A‰ribu‹s
);

894  
_¥A‰ribu‹s
->
	`S‘UINT32
(
guidKey
, 
unV®ue
);

895 
	}
}

897 
STDMETHODIMP
 
	$S‘UINT64
(
REFGUID
 
guidKey
,
UINT64
 
unV®ue
)

899 
	`as£¹
(
_¥A‰ribu‹s
);

900  
_¥A‰ribu‹s
->
	`S‘UINT64
(
guidKey
, 
unV®ue
);

901 
	}
}

903 
STDMETHODIMP
 
	$S‘DoubË
(
REFGUID
 
guidKey
, 
fV®ue
)

905 
	`as£¹
(
_¥A‰ribu‹s
);

906  
_¥A‰ribu‹s
->
	`S‘DoubË
(
guidKey
, 
fV®ue
);

907 
	}
}

909 
STDMETHODIMP
 
	$S‘GUID
(
REFGUID
 
guidKey
, REFGUID 
guidV®ue
)

911 
	`as£¹
(
_¥A‰ribu‹s
);

912  
_¥A‰ribu‹s
->
	`S‘GUID
(
guidKey
, 
guidV®ue
);

913 
	}
}

915 
STDMETHODIMP
 
	$S‘SŒšg
(
REFGUID
 
guidKey
, 
LPCWSTR
 
wszV®ue
)

917 
	`as£¹
(
_¥A‰ribu‹s
);

918  
_¥A‰ribu‹s
->
	`S‘SŒšg
(
guidKey
, 
wszV®ue
);

919 
	}
}

921 
STDMETHODIMP
 
	$S‘Blob
(
REFGUID
 
guidKey
, cÚ¡ 
UINT8
* 
pBuf
, 
UINT32
 
cbBufSize
)

923 
	`as£¹
(
_¥A‰ribu‹s
);

924  
_¥A‰ribu‹s
->
	`S‘Blob
(
guidKey
, 
pBuf
, 
cbBufSize
);

925 
	}
}

927 
STDMETHODIMP
 
	$S‘Unknown
(
REFGUID
 
guidKey
, 
IUnknown
* 
pUnknown
)

929 
	`as£¹
(
_¥A‰ribu‹s
);

930  
_¥A‰ribu‹s
->
	`S‘Unknown
(
guidKey
, 
pUnknown
);

931 
	}
}

933 
STDMETHODIMP
 
	$LockStÜe
()

935 
	`as£¹
(
_¥A‰ribu‹s
);

936  
_¥A‰ribu‹s
->
	`LockStÜe
();

937 
	}
}

939 
STDMETHODIMP
 
	$UÆockStÜe
()

941 
	`as£¹
(
_¥A‰ribu‹s
);

942  
_¥A‰ribu‹s
->
	`UÆockStÜe
();

943 
	}
}

945 
STDMETHODIMP
 
	$G‘CouÁ
(
UINT32
* 
pcI‹ms
)

947 
	`as£¹
(
_¥A‰ribu‹s
);

948  
_¥A‰ribu‹s
->
	`G‘CouÁ
(
pcI‹ms
);

949 
	}
}

951 
STDMETHODIMP
 
	$G‘I‹mByIndex
(
UINT32
 
unIndex
, 
GUID
* 
pguidKey
, 
PROPVARIANT
* 
pV®ue
)

953 
	`as£¹
(
_¥A‰ribu‹s
);

954  
_¥A‰ribu‹s
->
	`G‘I‹mByIndex
(
unIndex
, 
pguidKey
, 
pV®ue
);

955 
	}
}

957 
STDMETHODIMP
 
	$CİyAÎI‹ms
(
IMFA‰ribu‹s
* 
pDe¡
)

959 
	`as£¹
(
_¥A‰ribu‹s
);

960  
_¥A‰ribu‹s
->
	`CİyAÎI‹ms
(
pDe¡
);

961 
	}
}

965 
HRESULT
 
	$S”ŸlizeToSŒ—m
(
DWORD
 
dwO±iÚs
, 
ISŒ—m
* 
pStm
)

968 
	`as£¹
(
_¥A‰ribu‹s
);

969  
	`MFS”ŸlizeA‰ribu‹sToSŒ—m
(
_¥A‰ribu‹s
.
	`G‘
(), 
dwO±iÚs
, 
pStm
);

970 
	}
}

972 
HRESULT
 
	$De£rŸlizeFromSŒ—m
(
DWORD
 
dwO±iÚs
, 
ISŒ—m
* 
pStm
)

974 
	`as£¹
(
_¥A‰ribu‹s
);

975  
	`MFDe£rŸlizeA‰ribu‹sFromSŒ—m
(
_¥A‰ribu‹s
.
	`G‘
(), 
dwO±iÚs
, 
pStm
);

976 
	}
}

984 
HRESULT
 
	$S”ŸlizeToBlob
(
UINT8
 **
µBufãr
, 
UINT
 *
pcbSize
)

986 
	`as£¹
(
_¥A‰ribu‹s
);

988 ià(
µBufãr
 =ğ
NULL
)

990  
E_POINTER
;

992 ià(
pcbSize
 =ğ
NULL
)

994  
E_POINTER
;

997 
HRESULT
 
hr
 = 
S_OK
;

998 
UINT32
 
cbSize
 = 0;

999 
BYTE
 *
pBufãr
 = 
NULL
;

1001 
	`CHECK_HR
(
hr
 = 
	`MFG‘A‰ribu‹sAsBlobSize
(
_¥A‰ribu‹s
.
	`G‘
(), &
cbSize
));

1003 
pBufãr
 = (
BYTE
*)
	`CoTaskMemAÎoc
(
cbSize
);

1004 ià(
pBufãr
 =ğ
NULL
)

1006 
	`CHECK_HR
(
hr
 = 
E_OUTOFMEMORY
);

1009 
	`CHECK_HR
(
hr
 = 
	`MFG‘A‰ribu‹sAsBlob
(
_¥A‰ribu‹s
.
	`G‘
(), 
pBufãr
, 
cbSize
));

1011 *
µBufãr
 = 
pBufãr
;

1012 *
pcbSize
 = 
cbSize
;

1014 
dÚe
:

1015 ià(
	`FAILED
(
hr
))

1017 *
µBufãr
 = 
NULL
;

1018 *
pcbSize
 = 0;

1019 
	`CoTaskMemF»e
(
pBufãr
);

1021  
hr
;

1022 
	}
}

1024 
HRESULT
 
	$De£rŸlizeFromBlob
(cÚ¡ 
UINT8
* 
pBufãr
, 
UINT
 
cbSize
)

1026 
	`as£¹
(
_¥A‰ribu‹s
);

1027  
	`MFIn™A‰ribu‹sFromBlob
(
_¥A‰ribu‹s
.
	`G‘
(), 
pBufãr
, 
cbSize
);

1028 
	}
}

1030 
HRESULT
 
	$G‘R©io
(
REFGUID
 
guidKey
, 
UINT32
* 
²Num”©Ü
, UINT32* 
punD’omš©Ü
)

1032 
	`as£¹
(
_¥A‰ribu‹s
);

1033  
	`MFG‘A‰ribu‹R©io
(
_¥A‰ribu‹s
.
	`G‘
(), 
guidKey
, 
²Num”©Ü
, 
punD’omš©Ü
);

1034 
	}
}

1036 
HRESULT
 
	$S‘R©io
(
REFGUID
 
guidKey
, 
UINT32
 
unNum”©Ü
, UINT32 
unD’omš©Ü
)

1038 
	`as£¹
(
_¥A‰ribu‹s
);

1039  
	`MFS‘A‰ribu‹R©io
(
_¥A‰ribu‹s
.
	`G‘
(), 
guidKey
, 
unNum”©Ü
, 
unD’omš©Ü
);

1040 
	}
}

1043 
HRESULT
 
	$G‘Size
(
REFGUID
 
guidKey
, 
UINT32
* 
punWidth
, UINT32* 
punHeight
)

1045 
	`as£¹
(
_¥A‰ribu‹s
);

1046  
	`MFG‘A‰ribu‹Size
(
_¥A‰ribu‹s
.
	`G‘
(), 
guidKey
, 
punWidth
, 
punHeight
);

1047 
	}
}

1050 
HRESULT
 
	$S‘Size
(
REFGUID
 
guidKey
, 
UINT32
 
unWidth
, UINT32 
unHeight
)

1052 
	`as£¹
(
_¥A‰ribu‹s
);

1053  
	`MFS‘A‰ribu‹Size
 (
_¥A‰ribu‹s
.
	`G‘
(), 
guidKey
, 
unWidth
, 
unHeight
);

1054 
	}
}

1056 
	g´Ùeùed
:

1057 
_ComPŒ
<
IMFA‰ribu‹s
> 
_¥A‰ribu‹s
;

1060 
şass
 
	gSŒ—mSšk
 :

1061 #ifdeà
WINRT


1062 
public
 
Miüosoá
::
WRL
::
RuÁimeCÏss
<

1063 
Miüosoá
::
WRL
::
RuÁimeCÏssFÏgs
< Miüosoá::WRL::
RuÁimeCÏssTy³
::
CÏssicCom
>,

1064 
	gIMFSŒ—mSšk
,

1065 
	gIMFMedŸEv’tG’”©Ü
,

1066 
	gIMFMedŸTy³HªdËr
,

1067 
	gCBa£A‰ribu‹s
<> >

1069 
public
 
	gIMFSŒ—mSšk
,

1070 
public
 
	gIMFMedŸTy³HªdËr
,

1071 
public
 
	gCBa£A‰ribu‹s
<>,

1072 
public
 
	gICu¡omSŒ—mSšk


1075 
	gpublic
:

1077 #ià
defšed
(
_MSC_VER
) && _MSC_VER >= 1700

1078 
STDMETHOD
(
Qu”yIÁ”çû
)(
REFIID
 
riid
, 
_OuŒ_»suÉ_nuÎÚçu»_
 **
	gµv
)

1080 
STDMETHOD
(
Qu”yIÁ”çû
)(
REFIID
 
	griid
, **
	gµv
)

1083 ià(
	gµv
 =ğ
nuÎ±r
) {

1084  
E_POINTER
;

1086 (*
	gµv
èğ
nuÎ±r
;

1087 
HRESULT
 
	ghr
 = 
S_OK
;

1088 ià(
	griid
 =ğ
IID_IM¬sh®
) {

1089  
M¬sh®QI
(
riid
, 
µv
);

1091 #ifdeà
WINRT


1092 
	ghr
 = 
RuÁimeCÏssT
::
Qu”yIÁ”çû
(
riid
, 
µv
);

1094 ià(
	griid
 =ğ
IID_IUnknown
 || 
riid
 =ğ
IID_IMFSŒ—mSšk
) {

1095 *
µv
 = 
¡©ic_ÿ¡
<
IMFSŒ—mSšk
*>(
this
);

1096 
AddRef
();

1097 } ià(
	griid
 =ğ
IID_IMFMedŸEv’tG’”©Ü
) {

1098 *
µv
 = 
¡©ic_ÿ¡
<
IMFMedŸEv’tG’”©Ü
*>(
this
);

1099 
AddRef
();

1100 } ià(
	griid
 =ğ
IID_IMFMedŸTy³HªdËr
) {

1101 *
µv
 = 
¡©ic_ÿ¡
<
IMFMedŸTy³HªdËr
*>(
this
);

1102 
AddRef
();

1103 } ià(
	griid
 =ğ
IID_IMFA‰ribu‹s
) {

1104 *
µv
 = 
¡©ic_ÿ¡
<
IMFA‰ribu‹s
*>(
this
);

1105 
AddRef
();

1106 } ià(
	griid
 =ğ
IID_ICu¡omSŒ—mSšk
) {

1107 *
µv
 = 
¡©ic_ÿ¡
<
ICu¡omSŒ—mSšk
*>(
this
);

1108 
AddRef
();

1110 
	ghr
 = 
E_NOINTERFACE
;

1114  
	ghr
;

1117 #ifdeà
WINRT


1118 
STDMETHOD
(
RuÁimeCÏssIn™Ÿlize
)(è{  
	gS_OK
; }

1120 
ULONG
 
STDMETHODCALLTYPE
 
AddRef
()

1122  
IÁ”lockedInüem’t
(&
m_cRef
);

1124 
ULONG
 
STDMETHODCALLTYPE
 
R–—£
()

1126 
ULONG
 
	gcRef
 = 
IÁ”lockedDeüem’t
(&
m_cRef
);

1127 ià(
	gcRef
 == 0)

1129 
d–‘e
 
this
;

1131  
	gcRef
;

1134 
HRESULT
 
M¬sh®QI
(
REFIID
 
riid
, 
LPVOID
* 
µv
)

1136 
HRESULT
 
	ghr
 = 
S_OK
;

1137 ià(
	gm_¥FTM
 =ğ
nuÎ±r
) {

1138 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1139 ià(
	gm_¥FTM
 =ğ
nuÎ±r
) {

1140 
hr
 = 
CoC»©eF»eTh»adedM¬sh®”
((
IMFSŒ—mSšk
*)
this
, &
m_¥FTM
);

1142 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1145 ià(
SUCCEEDED
(
hr
)) {

1146 ià(
	gm_¥FTM
 =ğ
nuÎ±r
) {

1147 
hr
 = 
E_UNEXPECTED
;

1150 
	ghr
 = 
m_¥FTM
.
G‘
()->
Qu”yIÁ”çû
(
riid
, 
µv
);

1153  
	ghr
;

1155 
	eS‹


1157 
	gS‹_Ty³NÙS‘
 = 0,

1158 
	gS‹_R—dy
,

1159 
	gS‹_S¹ed
,

1160 
	gS‹_Stİ³d
,

1161 
	gS‹_Pau£d
,

1162 
	gS‹_CouÁ


1164 
SŒ—mSšk
(è: 
m_IsShutdown
(
çl£
),

1165 
m_S¹Time
(0), 
m_fG‘S¹TimeFromSam¶e
(
çl£
), 
m_fWa™šgFÜFœ¡Sam¶e
(false),

1166 
m_¡©e
(
S‹_Ty³NÙS‘
), 
m_pP¬’t
(
nuÎ±r
),

1167 
m_imageWidthInPix–s
(0), 
m_imageHeightInPix–s
(0) {

1168 #ifdeà
WINRT


1169 
	gm_tok’
.
	gv®ue
 = 0;

1171 
	gm_bCÚÃùed
 = 
çl£
;

1173 
In™ŸlizeCr™iÿlSeùiÚEx
(&
m_ü™Sec
, 3000, 0);

1174 
Z”oMemÜy
(&
m_guiCu¼’tSubty³
, (m_guiCurrentSubtype));

1175 
	gCBa£A‰ribu‹s
::
In™Ÿlize
(0U);

1176 
DebugPrštOut
(
L
"StreamSink::StreamSink\n");

1178 
	gvœtu®
 ~
SŒ—mSšk
() {

1179 
D–‘eCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1180 
as£¹
(
m_IsShutdown
);

1181 
DebugPrštOut
(
L
"StreamSink::~StreamSink\n");

1184 
HRESULT
 
In™Ÿlize
()

1186 
HRESULT
 
	ghr
;

1188 
	ghr
 = 
MFC»©eEv’tQueue
(&
m_¥Ev’tQueue
);

1189 ià(
SUCCEEDED
(
hr
))

1191 
	g_ComPŒ
<
	gIMFMedŸSšk
> 
	gpMedSšk
;

1192 
	ghr
 = 
CBa£A‰ribu‹s
<>::
G‘Unknown
(
MF_STREAMSINK_MEDIASINKINTERFACE
, 
__uuidof
(
IMFMedŸSšk
), (
LPVOID
*)
pMedSšk
.
G‘Add»ssOf
());

1193 
as£¹
(
pMedSšk
.
G‘
(è!ğ
NULL
);

1194 ià(
SUCCEEDED
(
hr
)) {

1195 
	ghr
 = 
pMedSšk
.
G‘
()->
Qu”yIÁ”çû
(
IID_PPV_ARGS
(&
m_pP¬’t
));

1198  
	ghr
;

1201 
HRESULT
 
CheckShutdown
() const

1203 ià(
	gm_IsShutdown
)

1205  
	gMF_E_SHUTDOWN
;

1209  
	gS_OK
;

1213 
HRESULT
 
S¹
(
MFTIME
 
¡¬t
)

1215 
HRESULT
 
	ghr
 = 
S_OK
;

1216 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1217 ià(
	gm_¡©e
 !ğ
S‹_Ty³NÙS‘
) {

1218 ià(
¡¬t
 !ğ
PRESENTATION_CURRENT_POSITION
)

1220 
m_S¹Time
 = 
¡¬t
;

1221 
	gm_fG‘S¹TimeFromSam¶e
 = 
çl£
;

1225 
	gm_fG‘S¹TimeFromSam¶e
 = 
Œue
;

1227 
	gm_¡©e
 = 
S‹_S¹ed
;

1228 
GUID
 
	gguiMajÜTy³
;

1229 
	gm_fWa™šgFÜFœ¡Sam¶e
 = 
SUCCEEDED
(
m_¥Cu¼’tTy³
->
G‘MajÜTy³
(&
guiMajÜTy³
)è&& (guiMajÜTy³ =ğ
MFMedŸTy³_Video
);

1230 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškS¹ed
, 
GUID_NULL
, 
hr
, 
NULL
);

1231 ià(
SUCCEEDED
(
hr
)) {

1232 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškReque¡Sam¶e
, 
GUID_NULL
, 
hr
, 
NULL
);

1235 
	ghr
 = 
MF_E_NOT_INITIALIZED
;

1236 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1237  
	ghr
;

1241 
HRESULT
 
Pau£
()

1243 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1245 
HRESULT
 
	ghr
 = 
S_OK
;

1247 ià(
	gm_¡©e
 !ğ
S‹_Stİ³d
 && 
m_¡©e
 !ğ
S‹_Ty³NÙS‘
) {

1248 
m_¡©e
 = 
S‹_Pau£d
;

1249 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškPau£d
, 
GUID_NULL
, 
hr
, 
NULL
);

1250 } ià(
	ghr
 =ğ
S‹_Ty³NÙS‘
)

1251 
hr
 = 
MF_E_NOT_INITIALIZED
;

1253 
	ghr
 = 
MF_E_INVALIDREQUEST
;

1254 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1255  
	ghr
;

1258 
HRESULT
 
Re¡¬t
()

1260 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1262 
HRESULT
 
	ghr
 = 
S_OK
;

1264 ià(
	gm_¡©e
 =ğ
S‹_Pau£d
) {

1265 
m_¡©e
 = 
S‹_S¹ed
;

1266 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškS¹ed
, 
GUID_NULL
, 
hr
, 
NULL
);

1267 ià(
SUCCEEDED
(
hr
)) {

1268 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškReque¡Sam¶e
, 
GUID_NULL
, 
hr
, 
NULL
);

1270 } ià(
	ghr
 =ğ
S‹_Ty³NÙS‘
)

1271 
hr
 = 
MF_E_NOT_INITIALIZED
;

1273 
	ghr
 = 
MF_E_INVALIDREQUEST
;

1274 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1275  
	ghr
;

1278 
HRESULT
 
Stİ
()

1280 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1282 
HRESULT
 
	ghr
 = 
S_OK
;

1283 ià(
	gm_¡©e
 !ğ
S‹_Ty³NÙS‘
) {

1284 
m_¡©e
 = 
S‹_Stİ³d
;

1285 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškStİ³d
, 
GUID_NULL
, 
hr
, 
NULL
);

1287 
	ghr
 = 
MF_E_NOT_INITIALIZED
;

1288 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1289  
	ghr
;

1293 
HRESULT
 
Shutdown
()

1295 
	g_ComPŒ
<
	gIMFSam¶eG¿bb”SškC®lback
> 
	gpSam¶eC®lback
;

1296 
HRESULT
 
	ghr
 = 
S_OK
;

1297 
as£¹
(!
m_IsShutdown
);

1298 
	ghr
 = 
m_pP¬’t
->
G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
G‘Add»ssOf
());

1299 ià(
SUCCEEDED
(
hr
)) {

1300 
	ghr
 = 
pSam¶eC®lback
->
OnShutdown
();

1303 ià(
	gm_¥Ev’tQueue
) {

1304 
	ghr
 = 
m_¥Ev’tQueue
->
Shutdown
();

1306 ià(
	gm_pP¬’t
)

1307 
	gm_pP¬’t
->
R–—£
();

1308 
	gm_¥Cu¼’tTy³
.
Re£t
();

1309 
	gm_IsShutdown
 = 
TRUE
;

1311  
	ghr
;

1315 
HRESULT
 
STDMETHODCALLTYPE
 
G‘MedŸSšk
(

1316  
__RPC__d”ef_out_İt
 
IMFMedŸSšk
 **
µMedŸSšk
) {

1317 ià(
	gµMedŸSšk
 =ğ
NULL
)

1319  
E_INVALIDARG
;

1322 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1324 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1326 ià(
SUCCEEDED
(
hr
))

1328 
	g_ComPŒ
<
	gIMFMedŸSšk
> 
	gpMedSšk
;

1329 
	ghr
 = 
CBa£A‰ribu‹s
<>::
G‘Unknown
(
MF_STREAMSINK_MEDIASINKINTERFACE
, 
__uuidof
(
IMFMedŸSšk
), (
LPVOID
*)
pMedSšk
.
G‘Add»ssOf
());

1330 ià(
SUCCEEDED
(
hr
)) {

1331 *
	gµMedŸSšk
 = 
pMedSšk
.
D‘ach
();

1335 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1336 
DebugPrštOut
(
L
"SŒ—mSšk::G‘MedŸSšk: HRESULT=%i\n", 
hr
);

1337  
	ghr
;

1340 
HRESULT
 
STDMETHODCALLTYPE
 
G‘Id’tif›r
(

1341  
__RPC__out
 
DWORD
 *
pdwId’tif›r
) {

1342 ià(
	gpdwId’tif›r
 =ğ
NULL
)

1344  
E_INVALIDARG
;

1347 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1349 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1351 ià(
SUCCEEDED
(
hr
))

1353 
	ghr
 = 
G‘UINT32
(
MF_STREAMSINK_ID
, (
UINT32
*)
pdwId’tif›r
);

1356 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1357 
DebugPrštOut
(
L
"SŒ—mSšk::G‘Id’tif›r: HRESULT=%i\n", 
hr
);

1358  
	ghr
;

1361 
HRESULT
 
STDMETHODCALLTYPE
 
G‘MedŸTy³HªdËr
(

1362  
__RPC__d”ef_out_İt
 
IMFMedŸTy³HªdËr
 **
µHªdËr
) {

1363 ià(
	gµHªdËr
 =ğ
NULL
)

1365  
E_INVALIDARG
;

1368 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1370 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1373 ià(
SUCCEEDED
(
hr
))

1375 
	ghr
 = 
Qu”yIÁ”çû
(
IID_IMFMedŸTy³HªdËr
, (**)
µHªdËr
);

1378 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1379 
DebugPrštOut
(
L
"SŒ—mSšk::G‘MedŸTy³HªdËr: HRESULT=%i\n", 
hr
);

1380  
	ghr
;

1383 
HRESULT
 
STDMETHODCALLTYPE
 
ProûssSam¶e
(
IMFSam¶e
 *
pSam¶e
) {

1384 
	g_ComPŒ
<
	gIMFMedŸBufãr
> 
	gpIÅut
;

1385 
	g_ComPŒ
<
	gIMFSam¶eG¿bb”SškC®lback
> 
	gpSam¶eC®lback
;

1386 
BYTE
 *
	gpSrc
 = 
NULL
;

1388 
LONGLONG
 
	ghnsTime
 = 0;

1389 
LONGLONG
 
	ghnsDu¿tiÚ
 = 0;

1390 
DWORD
 
	gcbMaxL’gth
;

1391 
DWORD
 
	gcbCu¼’tL’gth
 = 0;

1392 
GUID
 
	gguidMajÜTy³
;

1393 ià(
	gpSam¶e
 =ğ
NULL
)

1395  
E_INVALIDARG
;

1397 
HRESULT
 
	ghr
 = 
S_OK
;

1399 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1401 ià(
	gm_¡©e
 !ğ
S‹_S¹ed
 && 
m_¡©e
 !ğ
S‹_Pau£d
) {

1402 ià(
m_¡©e
 =ğ
S‹_Ty³NÙS‘
)

1403 
hr
 = 
MF_E_NOT_INITIALIZED
;

1405 
	ghr
 = 
MF_E_INVALIDREQUEST
;

1407 ià(
SUCCEEDED
(
hr
))

1408 
	ghr
 = 
CheckShutdown
();

1409 ià(
SUCCEEDED
(
hr
)) {

1410 
	ghr
 = 
pSam¶e
->
CÚv”tToCÚtiguousBufãr
(&
pIÅut
);

1411 ià(
SUCCEEDED
(
hr
)) {

1412 
	ghr
 = 
pSam¶e
->
G‘Sam¶eTime
(&
hnsTime
);

1414 ià(
SUCCEEDED
(
hr
)) {

1415 
	ghr
 = 
pSam¶e
->
G‘Sam¶eDu¿tiÚ
(&
hnsDu¿tiÚ
);

1417 ià(
SUCCEEDED
(
hr
)) {

1418 
	ghr
 = 
G‘MajÜTy³
(&
guidMajÜTy³
);

1420 ià(
SUCCEEDED
(
hr
)) {

1421 
	ghr
 = 
m_pP¬’t
->
G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
G‘Add»ssOf
());

1423 ià(
SUCCEEDED
(
hr
)) {

1424 
	ghr
 = 
pIÅut
->
Lock
(&
pSrc
, &
cbMaxL’gth
, &
cbCu¼’tL’gth
);

1426 ià(
SUCCEEDED
(
hr
)) {

1427 
	ghr
 = 
pSam¶eC®lback
->
OnProûssSam¶e
(
guidMajÜTy³
, 0, 
hnsTime
, 
hnsDu¿tiÚ
, 
pSrc
, 
cbCu¼’tL’gth
);

1428 
	gpIÅut
->
UÆock
();

1430 ià(
SUCCEEDED
(
hr
)) {

1431 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškReque¡Sam¶e
, 
GUID_NULL
, 
S_OK
, 
NULL
);

1434 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1435  
	ghr
;

1438 
HRESULT
 
STDMETHODCALLTYPE
 
PÏûM¬k”
(

1439  
MFSTREAMSINK_MARKER_TYPE
 
eM¬k”Ty³
,

1440  
__RPC__š
 cÚ¡ 
PROPVARIANT
 * ,

1441  
__RPC__š
 cÚ¡ 
PROPVARIANT
 * ) {

1442 
	geM¬k”Ty³
;

1443 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1445 
HRESULT
 
	ghr
 = 
S_OK
;

1446 ià(
	gm_¡©e
 =ğ
S‹_Ty³NÙS‘
)

1447 
hr
 = 
MF_E_NOT_INITIALIZED
;

1449 ià(
SUCCEEDED
(
hr
))

1450 
	ghr
 = 
CheckShutdown
();

1452 ià(
SUCCEEDED
(
hr
))

1455 
	ghr
 = 
QueueEv’t
(
MESŒ—mSškReque¡Sam¶e
, 
GUID_NULL
, 
S_OK
, 
NULL
);

1458 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1459 
DebugPrštOut
(
L
"SŒ—mSšk::PÏûM¬k”: HRESULT=%˜%s\n", 
hr
, 
SŒ—mSškM¬k”Ty³M­
.
©
(
eM¬k”Ty³
).
c_¡r
());

1460  
	ghr
;

1463 
HRESULT
 
STDMETHODCALLTYPE
 
Flush
() {

1464 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1466 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1468 ià(
SUCCEEDED
(
hr
))

1472 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1473 
DebugPrštOut
(
L
"SŒ—mSšk::Flush: HRESULT=%i\n", 
hr
);

1474  
	ghr
;

1478 
HRESULT
 
STDMETHODCALLTYPE
 
G‘Ev’t
(

1479 
DWORD
 
dwFÏgs
, 
IMFMedŸEv’t
 **
µEv’t
) {

1484 
HRESULT
 
	ghr
 = 
S_OK
;

1486 
	g_ComPŒ
<
	gIMFMedŸEv’tQueue
> 
	gpQueue
;

1489 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1492 
	ghr
 = 
CheckShutdown
();

1495 ià(
SUCCEEDED
(
hr
))

1497 
	gpQueue
 = 
m_¥Ev’tQueue
.
G‘
();

1499 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1503 ià(
SUCCEEDED
(
hr
))

1505 
	ghr
 = 
pQueue
->
G‘Ev’t
(
dwFÏgs
, 
µEv’t
);

1507 
MedŸEv’tTy³
 
	gmeTy³
 = 
MEUnknown
;

1508 ià(
SUCCEEDED
(
hr
è&& SUCCEEDED((*
µEv’t
)->
G‘Ty³
(&
meTy³
)è&& 
	gmeTy³
 =ğ
MESŒ—mSškStİ³d
) {

1510 
HRESULT
 
hrStus
 = 
S_OK
;

1511 ià(
SUCCEEDED
(
hr
))

1512 
	ghr
 = (*
µEv’t
)->
G‘Stus
(&
hrStus
);

1513 ià(
SUCCEEDED
(
hr
))

1514 
DebugPrštOut
(
L
"SŒ—mSšk::G‘Ev’t: HRESULT=%˜%s\n", 
hrStus
, 
MedŸEv’tTy³M­
.
©
(
meTy³
).
c_¡r
());

1516 
DebugPrštOut
(
L
"SŒ—mSšk::G‘Ev’t: HRESULT=%i\n", 
hr
);

1517  
	ghr
;

1520 
HRESULT
 
STDMETHODCALLTYPE
 
BegšG‘Ev’t
(

1521 
IMFAsyncC®lback
 *
pC®lback
, 
IUnknown
 *
punkS‹
) {

1522 
HRESULT
 
	ghr
 = 
S_OK
;

1524 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1526 
	ghr
 = 
CheckShutdown
();

1528 ià(
SUCCEEDED
(
hr
))

1530 
	ghr
 = 
m_¥Ev’tQueue
->
BegšG‘Ev’t
(
pC®lback
, 
punkS‹
);

1532 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1533 
DebugPrštOut
(
L
"SŒ—mSšk::BegšG‘Ev’t: HRESULT=%i\n", 
hr
);

1534  
	ghr
;

1537 
HRESULT
 
STDMETHODCALLTYPE
 
EndG‘Ev’t
(

1538 
IMFAsyncResuÉ
 *
pResuÉ
, 
IMFMedŸEv’t
 **
µEv’t
) {

1539 
HRESULT
 
	ghr
 = 
S_OK
;

1541 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1543 
	ghr
 = 
CheckShutdown
();

1545 ià(
SUCCEEDED
(
hr
))

1547 
	ghr
 = 
m_¥Ev’tQueue
->
EndG‘Ev’t
(
pResuÉ
, 
µEv’t
);

1550 
MedŸEv’tTy³
 
	gmeTy³
 = 
MEUnknown
;

1551 ià(
SUCCEEDED
(
hr
è&& SUCCEEDED((*
µEv’t
)->
G‘Ty³
(&
meTy³
)è&& 
	gmeTy³
 =ğ
MESŒ—mSškStİ³d
) {

1554 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1555 
HRESULT
 
	ghrStus
 = 
S_OK
;

1556 ià(
SUCCEEDED
(
hr
))

1557 
	ghr
 = (*
µEv’t
)->
G‘Stus
(&
hrStus
);

1558 ià(
SUCCEEDED
(
hr
))

1559 
DebugPrštOut
(
L
"SŒ—mSšk::EndG‘Ev’t: HRESULT=%˜%s\n", 
hrStus
, 
MedŸEv’tTy³M­
.
©
(
meTy³
).
c_¡r
());

1561 
DebugPrštOut
(
L
"SŒ—mSšk::EndG‘Ev’t: HRESULT=%i\n", 
hr
);

1562  
	ghr
;

1565 
HRESULT
 
STDMETHODCALLTYPE
 
QueueEv’t
(

1566 
MedŸEv’tTy³
 
m‘
, 
REFGUID
 
guidEx‹ndedTy³
,

1567 
HRESULT
 
hrStus
, cÚ¡ 
PROPVARIANT
 *
pvV®ue
) {

1568 
HRESULT
 
	ghr
 = 
S_OK
;

1570 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1572 
	ghr
 = 
CheckShutdown
();

1574 ià(
SUCCEEDED
(
hr
))

1576 
	ghr
 = 
m_¥Ev’tQueue
->
QueueEv’tP¬amV¬
(
m‘
, 
guidEx‹ndedTy³
, 
hrStus
, 
pvV®ue
);

1579 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1580 
DebugPrštOut
(
L
"SŒ—mSšk::QueueEv’t: HRESULT=%˜%s\n", 
hrStus
, 
MedŸEv’tTy³M­
.
©
(
m‘
).
c_¡r
());

1581 
DebugPrštOut
(
L
"SŒ—mSšk::QueueEv’t: HRESULT=%i\n", 
hr
);

1582  
	ghr
;

1588 
STDMETHODIMP
 
IsMedŸTy³SuµÜ‹d
(

1589  
IMFMedŸTy³
 *
pMedŸTy³
,

1590  
IMFMedŸTy³
 **
µMedŸTy³
)

1592 ià(
	gpMedŸTy³
 =ğ
nuÎ±r
)

1594  
E_INVALIDARG
;

1597 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1599 
GUID
 
	gmajÜTy³
 = 
GUID_NULL
;

1601 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1603 ià(
SUCCEEDED
(
hr
))

1605 
	ghr
 = 
pMedŸTy³
->
G‘GUID
(
MF_MT_MAJOR_TYPE
, &
majÜTy³
);

1609 ià(
SUCCEEDED
(
hr
))

1611 ià(
	gmajÜTy³
 !ğ
MFMedŸTy³_Video
 && 
majÜTy³
 !ğ
MFMedŸTy³_Audio
)

1613 
hr
 = 
MF_E_INVALIDTYPE
;

1617 ià(
SUCCEEDED
(
hr
è&& 
	gm_¥Cu¼’tTy³
 !ğ
nuÎ±r
)

1619 
GUID
 
guiNewSubty³
;

1620 ià(
FAILED
(
pMedŸTy³
->
G‘GUID
(
MF_MT_SUBTYPE
, &
guiNewSubty³
)) ||

1621 
	gguiNewSubty³
 !ğ
m_guiCu¼’tSubty³
)

1623 
hr
 = 
MF_E_INVALIDTYPE
;

1627 ià(
	gµMedŸTy³
)

1629 *
	gµMedŸTy³
 = 
nuÎ±r
;

1632 ià(
	gµMedŸTy³
 && 
SUCCEEDED
(
hr
)) {

1633 
	g_ComPŒ
<
	gIMFMedŸTy³
> 
	gpTy³
;

1634 
	ghr
 = 
MFC»©eMedŸTy³
(
µMedŸTy³
);

1635 ià(
SUCCEEDED
(
hr
)) {

1636 
	ghr
 = 
m_pP¬’t
->
G‘Unknown
(
MF_MEDIASINK_PREFERREDTYPE
, 
__uuidof
(
IMFMedŸTy³
), (
LPVOID
*)&
pTy³
);

1638 ià(
SUCCEEDED
(
hr
)) {

1639 
	ghr
 = 
pTy³
->
LockStÜe
();

1641 
boŞ
 
	gbLocked
 = 
çl£
;

1642 ià(
SUCCEEDED
(
hr
)) {

1643 
	gbLocked
 = 
Œue
;

1644 
UINT32
 
	guiCouÁ
;

1645 
UINT32
 
	guiTÙ®
;

1646 
	ghr
 = 
pTy³
->
G‘CouÁ
(&
uiTÙ®
);

1647 
	guiCouÁ
 = 0; 
SUCCEEDED
(
hr
è&& uiCouÁ < 
	guiTÙ®
; uiCount++) {

1648 
GUID
 
	gguid
;

1649 
PROPVARIANT
 
	g´İv®
;

1650 
	ghr
 = 
pTy³
->
G‘I‹mByIndex
(
uiCouÁ
, &
guid
, &
´İv®
);

1651 ià(
SUCCEEDED
(
hr
è&& (
	gguid
 =ğ
MF_MT_FRAME_SIZE
 || 
guid
 =ğ
MF_MT_MAJOR_TYPE
 || guid =ğ
MF_MT_PIXEL_ASPECT_RATIO
 ||

1652 
guid
 =ğ
MF_MT_ALL_SAMPLES_INDEPENDENT
 || guid =ğ
MF_MT_INTERLACE_MODE
 || guid =ğ
MF_MT_SUBTYPE
)) {

1653 
hr
 = (*
µMedŸTy³
)->
S‘I‹m
(
guid
, 
´İv®
);

1654 
PrİV¬ŸÁCË¬
(&
´İv®
);

1658 ià(
	gbLocked
) {

1659 
	ghr
 = 
pTy³
->
UÆockStÜe
();

1662 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1663 
DebugPrštOut
(
L
"SŒ—mSšk::IsMedŸTy³SuµÜ‹d: HRESULT=%i\n", 
hr
);

1664  
	ghr
;

1669 
STDMETHODIMP
 
G‘MedŸTy³CouÁ
(
DWORD
 *
pdwTy³CouÁ
)

1671 ià(
	gpdwTy³CouÁ
 =ğ
nuÎ±r
)

1673  
E_INVALIDARG
;

1676 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1678 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1680 ià(
SUCCEEDED
(
hr
))

1683 *
	gpdwTy³CouÁ
 = 1;

1686 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1687 
DebugPrštOut
(
L
"SŒ—mSšk::G‘MedŸTy³CouÁ: HRESULT=%i\n", 
hr
);

1688  
	ghr
;

1693 
STDMETHODIMP
 
G‘MedŸTy³ByIndex
(

1694  
DWORD
 
dwIndex
,

1695  
IMFMedŸTy³
 **
µTy³
)

1697 ià(
	gµTy³
 =ğ
NULL
) {

1698  
E_INVALIDARG
;

1701 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1703 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1705 ià(
	gdwIndex
 > 0)

1707 
	ghr
 = 
MF_E_NO_MORE_TYPES
;

1711 ià(
SUCCEEDED
(
hr
)) {

1712 
	g_ComPŒ
<
	gIMFMedŸTy³
> 
	gpTy³
;

1713 
	ghr
 = 
MFC»©eMedŸTy³
(
µTy³
);

1714 ià(
SUCCEEDED
(
hr
)) {

1715 
	ghr
 = 
m_pP¬’t
->
G‘Unknown
(
MF_MEDIASINK_PREFERREDTYPE
, 
__uuidof
(
IMFMedŸTy³
), (
LPVOID
*)&
pTy³
);

1717 ià(
SUCCEEDED
(
hr
)) {

1718 
	ghr
 = 
pTy³
->
LockStÜe
();

1720 
boŞ
 
	gbLocked
 = 
çl£
;

1721 ià(
SUCCEEDED
(
hr
)) {

1722 
	gbLocked
 = 
Œue
;

1723 
UINT32
 
	guiCouÁ
;

1724 
UINT32
 
	guiTÙ®
;

1725 
	ghr
 = 
pTy³
->
G‘CouÁ
(&
uiTÙ®
);

1726 
	guiCouÁ
 = 0; 
SUCCEEDED
(
hr
è&& uiCouÁ < 
	guiTÙ®
; uiCount++) {

1727 
GUID
 
	gguid
;

1728 
PROPVARIANT
 
	g´İv®
;

1729 
	ghr
 = 
pTy³
->
G‘I‹mByIndex
(
uiCouÁ
, &
guid
, &
´İv®
);

1730 ià(
SUCCEEDED
(
hr
è&& (
	gguid
 =ğ
MF_MT_FRAME_SIZE
 || 
guid
 =ğ
MF_MT_MAJOR_TYPE
 || guid =ğ
MF_MT_PIXEL_ASPECT_RATIO
 ||

1731 
guid
 =ğ
MF_MT_ALL_SAMPLES_INDEPENDENT
 || guid =ğ
MF_MT_INTERLACE_MODE
 || guid =ğ
MF_MT_SUBTYPE
)) {

1732 
hr
 = (*
µTy³
)->
S‘I‹m
(
guid
, 
´İv®
);

1733 
PrİV¬ŸÁCË¬
(&
´İv®
);

1737 ià(
	gbLocked
) {

1738 
	ghr
 = 
pTy³
->
UÆockStÜe
();

1743 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1744 
DebugPrštOut
(
L
"SŒ—mSšk::G‘MedŸTy³ByIndex: HRESULT=%i\n", 
hr
);

1745  
	ghr
;

1750 
STDMETHODIMP
 
S‘Cu¼’tMedŸTy³
(
IMFMedŸTy³
 *
pMedŸTy³
)

1752 ià(
	gpMedŸTy³
 =ğ
NULL
) {

1753  
E_INVALIDARG
;

1755 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1757 
HRESULT
 
	ghr
 = 
S_OK
;

1758 ià(
	gm_¡©e
 !ğ
S‹_Ty³NÙS‘
 && 
m_¡©e
 !ğ
S‹_R—dy
)

1759 
hr
 = 
MF_E_INVALIDREQUEST
;

1760 ià(
SUCCEEDED
(
hr
))

1761 
	ghr
 = 
CheckShutdown
();

1766 ià(
	gm_¡©e
 >ğ
S‹_R—dy
)

1768 ià(
SUCCEEDED
(
hr
))

1770 
hr
 = 
IsMedŸTy³SuµÜ‹d
(
pMedŸTy³
, 
NULL
);

1774 ià(
SUCCEEDED
(
hr
))

1776 
	ghr
 = 
MFC»©eMedŸTy³
(
m_¥Cu¼’tTy³
.
R–—£AndG‘Add»ssOf
());

1777 ià(
SUCCEEDED
(
hr
))

1779 
	ghr
 = 
pMedŸTy³
->
CİyAÎI‹ms
(
m_¥Cu¼’tTy³
.
G‘
());

1781 ià(
SUCCEEDED
(
hr
))

1783 
	ghr
 = 
m_¥Cu¼’tTy³
->
G‘GUID
(
MF_MT_SUBTYPE
, &
m_guiCu¼’tSubty³
);

1785 
GUID
 
	gguid
;

1786 ià(
SUCCEEDED
(
hr
)) {

1787 
	ghr
 = 
m_¥Cu¼’tTy³
->
G‘MajÜTy³
(&
guid
);

1789 ià(
SUCCEEDED
(
hr
è&& 
	gguid
 =ğ
MFMedŸTy³_Video
) {

1790 
hr
 = 
MFG‘A‰ribu‹Size
(
m_¥Cu¼’tTy³
.
G‘
(), 
MF_MT_FRAME_SIZE
, &
m_imageWidthInPix–s
, &
m_imageHeightInPix–s
);

1792 ià(
SUCCEEDED
(
hr
))

1794 
	gm_¡©e
 = 
S‹_R—dy
;

1798 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1799 
DebugPrštOut
(
L
"SŒ—mSšk::S‘Cu¼’tMedŸTy³: HRESULT=%i\n", 
hr
);

1800  
	ghr
;

1804 
STDMETHODIMP
 
G‘Cu¼’tMedŸTy³
(
IMFMedŸTy³
 **
µMedŸTy³
)

1806 ià(
	gµMedŸTy³
 =ğ
NULL
) {

1807  
E_INVALIDARG
;

1810 
EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

1812 
HRESULT
 
	ghr
 = 
CheckShutdown
();

1814 ià(
SUCCEEDED
(
hr
)) {

1815 ià(
	gm_¥Cu¼’tTy³
 =ğ
nuÎ±r
) {

1816 
hr
 = 
MF_E_NOT_INITIALIZED
;

1820 ià(
SUCCEEDED
(
hr
)) {

1821 
	ghr
 = 
m_¥Cu¼’tTy³
.
CİyTo
(
µMedŸTy³
);

1824 
L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

1825 
DebugPrštOut
(
L
"SŒ—mSšk::G‘Cu¼’tMedŸTy³: HRESULT=%i\n", 
hr
);

1826  
	ghr
;

1831 
STDMETHODIMP
 
G‘MajÜTy³
(
GUID
 *
pguidMajÜTy³
)

1833 
HRESULT
 
	ghr
;

1834 ià(
	gpguidMajÜTy³
 =ğ
nuÎ±r
) {

1835  
E_INVALIDARG
;

1838 
	g_ComPŒ
<
	gIMFMedŸTy³
> 
	gpTy³
;

1839 
	ghr
 = 
m_pP¬’t
->
G‘Unknown
(
MF_MEDIASINK_PREFERREDTYPE
, 
__uuidof
(
IMFMedŸTy³
), (
LPVOID
*)&
pTy³
);

1840 ià(
SUCCEEDED
(
hr
)) {

1841 
	ghr
 = 
pTy³
->
G‘MajÜTy³
(
pguidMajÜTy³
);

1843 
DebugPrštOut
(
L
"SŒ—mSšk::G‘MajÜTy³: HRESULT=%i\n", 
hr
);

1844  
	ghr
;

1846 
	g´iv©e
:

1847 #ifdeà
WINRT


1848 
Ev’tRegi¡¿tiÚTok’
 
m_tok’
;

1850 
boŞ
 
	gm_bCÚÃùed
;

1853 
boŞ
 
	gm_IsShutdown
;

1854 
CRITICAL_SECTION
 
	gm_ü™Sec
;

1855 #iâdeà
WINRT


1856 
	gm_cRef
;

1858 
IMFA‰ribu‹s
* 
	gm_pP¬’t
;

1859 
	g_ComPŒ
<
	gIMFMedŸTy³
> 
	gm_¥Cu¼’tTy³
;

1860 
	g_ComPŒ
<
	gIMFMedŸEv’tQueue
> 
	gm_¥Ev’tQueue
;

1862 
	g_ComPŒ
<
	gIUnknown
> 
	gm_¥FTM
;

1863 
S‹
 
	gm_¡©e
;

1864 
boŞ
 
	gm_fG‘S¹TimeFromSam¶e
;

1865 
boŞ
 
	gm_fWa™šgFÜFœ¡Sam¶e
;

1866 
MFTIME
 
	gm_S¹Time
;

1867 
GUID
 
	gm_guiCu¼’tSubty³
;

1868 
UINT32
 
	gm_imageWidthInPix–s
;

1869 
UINT32
 
	gm_imageHeightInPix–s
;

1893 
	g‹m¶©e
 <
şass
 
	gT
>

1894 
	sNoOp


1896 
İ”©Ü
()(
	mT
& )

1901 
	g‹m¶©e
 <
şass
 
	gT
>

1902 şas 
	cLi¡


1904 
	m´Ùeùed
:

1907 
	sNode


1909 
Node
 *
´ev
;

1910 
Node
 *
	mÃxt
;

1911 
T
 
	m™em
;

1913 
Node
(è: 
´ev
(
nuÎ±r
), 
Ãxt
(nullptr)

1917 
Node
(
T
 
™em
è: 
´ev
(
nuÎ±r
), 
Ãxt
(nullptr)

1919 
	mthis
->
	m™em
 = 
™em
;

1922 
T
 
I‹m
(ècÚ¡ {  
	m™em
; }

1925 
	gpublic
:

1928 şas 
	cPOSITION


1930 
ä›nd
 
şass
 
Li¡
<
T
>;

1932 
	gpublic
:

1933 
POSITION
(è: 
pNode
(
nuÎ±r
)

1937 
boŞ
 
İ”©Ü
==(cÚ¡ 
POSITION
 &
p
) const

1939  
pNode
 =ğ
p
.pNode;

1942 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
POSITION
 &
p
) const

1944  
pNode
 !ğ
p
.pNode;

1947 
	g´iv©e
:

1948 cÚ¡ 
Node
 *
pNode
;

1950 
POSITION
(
Node
 *
p
è: 
pNode
(p)

1955 
	g´Ùeùed
:

1956 
Node
 
m_ªchÜ
;

1957 
DWORD
 
	gm_couÁ
;

1959 
Node
* 
	$FrÚt
() const

1961  
m_ªchÜ
.
Ãxt
;

1962 
	}
}

1964 
Node
* 
	$Back
() const

1966  
m_ªchÜ
.
´ev
;

1967 
	}
}

1969 
vœtu®
 
HRESULT
 
	$In£¹Aá”
(
T
 
™em
, 
Node
 *
pBefÜe
)

1971 ià(
pBefÜe
 =ğ
nuÎ±r
)

1973  
E_POINTER
;

1976 
Node
 *
pNode
 = 
Ãw
 
	`Node
(
™em
);

1977 ià(
pNode
 =ğ
nuÎ±r
)

1979  
E_OUTOFMEMORY
;

1982 
Node
 *
pAá”
 = 
pBefÜe
->
Ãxt
;

1984 
pBefÜe
->
Ãxt
 = 
pNode
;

1985 
pAá”
->
´ev
 = 
pNode
;

1987 
pNode
->
´ev
 = 
pBefÜe
;

1988 
pNode
->
Ãxt
 = 
pAá”
;

1990 
m_couÁ
++;

1992  
S_OK
;

1993 
	}
}

1995 
vœtu®
 
HRESULT
 
	$G‘I‹m
(cÚ¡ 
Node
 *
pNode
, 
T
* 
µI‹m
)

1997 ià(
pNode
 =ğ
nuÎ±r
 || 
µI‹m
 ==‚ullptr)

1999  
E_POINTER
;

2002 *
µI‹m
 = 
pNode
->
™em
;

2003  
S_OK
;

2004 
	}
}

2009 
vœtu®
 
HRESULT
 
	$RemoveI‹m
(
Node
 *
pNode
, 
T
 *
µI‹m
)

2011 ià(
pNode
 =ğ
nuÎ±r
)

2013  
E_POINTER
;

2016 
	`as£¹
(
pNode
 !ğ&
m_ªchÜ
);

2017 ià(
pNode
 =ğ&
m_ªchÜ
)

2019  
E_INVALIDARG
;

2023 
T
 
™em
;

2026 
pNode
->
Ãxt
->
´ev
 =…Node->prev;

2029 
pNode
->
´ev
->
Ãxt
 =…Node->next;

2031 
™em
 = 
pNode
->item;

2032 
d–‘e
 
pNode
;

2034 
m_couÁ
--;

2036 ià(
µI‹m
)

2038 *
µI‹m
 = 
™em
;

2041  
S_OK
;

2042 
	}
}

2044 
	gpublic
:

2046 
	$Li¡
()

2048 
m_ªchÜ
.
Ãxt
 = &m_anchor;

2049 
m_ªchÜ
.
´ev
 = &m_anchor;

2051 
m_couÁ
 = 0;

2052 
	}
}

2054 
	gvœtu®
 ~
	$Li¡
()

2056 
	`CË¬
();

2057 
	}
}

2060 
HRESULT
 
	$In£¹Back
(
T
 
™em
)

2062  
	`In£¹Aá”
(
™em
, 
m_ªchÜ
.
´ev
);

2063 
	}
}

2066 
HRESULT
 
	$In£¹FrÚt
(
T
 
™em
)

2068  
	`In£¹Aá”
(
™em
, &
m_ªchÜ
);

2069 
	}
}

2071 
HRESULT
 
	$In£¹Pos
(
POSITION
 
pos
, 
T
 
™em
)

2073 ià(
pos
.
pNode
 =ğ
nuÎ±r
)

2075  
	`In£¹Back
(
™em
);

2078  
	`In£¹Aá”
(
™em
, 
pos
.
pNode
->
´ev
);

2079 
	}
}

2083 
HRESULT
 
	$RemoveBack
(
T
 *
µI‹m
)

2085 ià(
	`IsEm±y
())

2087  
E_FAIL
;

2091  
	`RemoveI‹m
(
	`Back
(), 
µI‹m
);

2093 
	}
}

2097 
HRESULT
 
	$RemoveFrÚt
(
T
 *
µI‹m
)

2099 ià(
	`IsEm±y
())

2101  
E_FAIL
;

2105  
	`RemoveI‹m
(
	`FrÚt
(), 
µI‹m
);

2107 
	}
}

2110 
HRESULT
 
	$G‘Back
(
T
 *
µI‹m
)

2112 ià(
	`IsEm±y
())

2114  
E_FAIL
;

2118  
	`G‘I‹m
(
	`Back
(), 
µI‹m
);

2120 
	}
}

2123 
HRESULT
 
	$G‘FrÚt
(
T
 *
µI‹m
)

2125 ià(
	`IsEm±y
())

2127  
E_FAIL
;

2131  
	`G‘I‹m
(
	`FrÚt
(), 
µI‹m
);

2133 
	}
}

2137 
DWORD
 
	$G‘CouÁ
(ècÚ¡ {  
m_couÁ
; 
	}
}

2139 
boŞ
 
	$IsEm±y
() const

2141  (
	`G‘CouÁ
() == 0);

2142 
	}
}

2146 
	g‹m¶©e
 <
şass
 
	gFN
>

2147 
	$CË¬
(
FN
& 
ş—r_â
)

2149 
Node
 *
n
 = 
m_ªchÜ
.
Ãxt
;

2152 
n
 !ğ&
m_ªchÜ
)

2154 
	`ş—r_â
(
n
->
™em
);

2156 
Node
 *
tmp
 = 
n
->
Ãxt
;

2157 
d–‘e
 
n
;

2158 
n
 = 
tmp
;

2162 
m_ªchÜ
.
Ãxt
 = &m_anchor;

2163 
m_ªchÜ
.
´ev
 = &m_anchor;

2165 
m_couÁ
 = 0;

2166 
	}
}

2169 
vœtu®
 
	$CË¬
()

2171 
NoOp
<
T
> 
ş—rOp
;

2172 
CË¬
<>(
ş—rOp
);

2173 
	}
}

2178 
POSITION
 
	$FrÚtPos™iÚ
()

2180 ià(
	`IsEm±y
())

2182  
	`POSITION
(
nuÎ±r
);

2186  
	`POSITION
(
	`FrÚt
());

2188 
	}
}

2190 
POSITION
 
	$EndPos™iÚ
() const

2192  
	`POSITION
();

2193 
	}
}

2195 
HRESULT
 
	$G‘I‹mPos
(
POSITION
 
pos
, 
T
 *
µI‹m
)

2197 ià(
pos
.
pNode
)

2199  
	`G‘I‹m
(
pos
.
pNode
, 
µI‹m
);

2203  
E_FAIL
;

2205 
	}
}

2207 
POSITION
 
	$Next
(cÚ¡ 
POSITION
 
pos
)

2209 ià(
pos
.
pNode
 && (pos.pNode->
Ãxt
 !ğ&
m_ªchÜ
))

2211  
	`POSITION
(
pos
.
pNode
->
Ãxt
);

2215  
	`POSITION
(
nuÎ±r
);

2217 
	}
}

2222 
HRESULT
 
	$Remove
(
POSITION
& 
pos
, 
T
 *
µI‹m
)

2224 ià(
pos
.
pNode
)

2227 
Node
 *
pNode
 = 
cÚ¡_ÿ¡
<Node*>(
pos
.pNode);

2229 
pos
 = 
	`POSITION
();

2231  
	`RemoveI‹m
(
pNode
, 
µI‹m
);

2235  
E_INVALIDARG
;

2237 
	}
}

2248 şas 
	cComAutoR–—£


2250 
	mpublic
:

2251 
	$İ”©Ü
()(
IUnknown
 *
p
)

2253 ià(
p
)

2255 
p
->
	`R–—£
();

2258 
	}
};

2260 şas 
	cMemD–‘e


2262 
	mpublic
:

2263 
	$İ”©Ü
()(*
p
)

2265 ià(
p
)

2267 
d–‘e
 
p
;

2270 
	}
};

2285 #ifdeà
_MSC_VER


2286 #´agm¨
w¬nšg
(
push
)

2287 #´agm¨
w¬nšg
(
di§bË
: 4127)

2290 
	g‹m¶©e
 <
şass
 
	gT
, 
boŞ
 
	gNULLABLE
 = 
FALSE
>

2291 
şass
 
ComPŒLi¡
 : 
public
 
Li¡
<
T
*>

2293 
public
:

2295 
T
* 
	tPŒ
;

2297 
CË¬
()

2299 
ComAutoR–—£
 
	gÿr
;

2300 
	gLi¡
<
	gPŒ
>::
CË¬
(
ÿr
);

2303 ~
ComPŒLi¡
()

2305 
CË¬
();

2308 
	g´Ùeùed
:

2309 
HRESULT
 
In£¹Aá”
(
PŒ
 
™em
, 
Node
 *
pBefÜe
)

2312 ià(
	g™em
 =ğ
nuÎ±r
 && !
NULLABLE
)

2314  
E_POINTER
;

2317 ià(
	g™em
)

2319 
	g™em
->
AddRef
();

2322 
HRESULT
 
	ghr
 = 
Li¡
<
PŒ
>::
In£¹Aá”
(
™em
, 
pBefÜe
);

2323 ià(
FAILED
(
hr
è&& 
	g™em
 !ğ
nuÎ±r
)

2325 
™em
->
R–—£
();

2327  
	ghr
;

2330 
HRESULT
 
G‘I‹m
(cÚ¡ 
Node
 *
pNode
, 
PŒ
* 
µI‹m
)

2332 
PŒ
 
	gpI‹m
 = 
nuÎ±r
;

2336 
HRESULT
 
	ghr
 = 
Li¡
<
PŒ
>::
G‘I‹m
(
pNode
, &
pI‹m
);

2337 ià(
SUCCEEDED
(
hr
))

2339 
as£¹
(
pI‹m
 || 
NULLABLE
);

2340 ià(
	gpI‹m
)

2342 *
	gµI‹m
 = 
pI‹m
;

2343 (*
	gµI‹m
)->
AddRef
();

2346  
	ghr
;

2349 
HRESULT
 
RemoveI‹m
(
Node
 *
pNode
, 
PŒ
 *
µI‹m
)

2356 
PŒ
 
	gpI‹m
 = 
nuÎ±r
;

2358 
HRESULT
 
	ghr
 = 
Li¡
<
PŒ
>::
RemoveI‹m
(
pNode
, &
pI‹m
);

2360 ià(
SUCCEEDED
(
hr
))

2362 
as£¹
(
pI‹m
 || 
NULLABLE
);

2363 ià(
	gµI‹m
 && 
	gpI‹m
)

2365 *
	gµI‹m
 = 
pI‹m
;

2366 (*
	gµI‹m
)->
AddRef
();

2369 ià(
	gpI‹m
)

2371 
	gpI‹m
->
R–—£
();

2372 
	gpI‹m
 = 
nuÎ±r
;

2376  
	ghr
;

2380 #ifdeà
_MSC_VER


2381 #´agm¨
w¬nšg
(
pİ
)

2396 cÚ¡ 
	$__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_CV_MedŸSšk
[] = 
L
"cv.MediaSink";

2398 
şass
 
MedŸSšk
 :

2399 #ifdeà
WINRT


2400 
public
 
Miüosoá
::
WRL
::
RuÁimeCÏss
<

2401 
Miüosoá
::
WRL
::
RuÁimeCÏssFÏgs
< Miüosoá::WRL::
RuÁimeCÏssTy³
::
WšRtCÏssicComMix
 >,

2402 
Miüosoá
::
WRL
::
Im¶em’ts
<
ABI
::
Wšdows
::
MedŸ
::
IMedŸEx‹nsiÚ
>,

2403 
IMFMedŸSšk
,

2404 
IMFClockS‹Sšk
,

2405 
Miüosoá
::
WRL
::
FtmBa£
,

2406 
CBa£A‰ribu‹s
<>>

2408 
public
 
IMFMedŸSšk
,…ubliø
IMFClockS‹Sšk
,…ubliø
CBa£A‰ribu‹s
<>

2411 #ifdeà
WINRT


2412 
	`In¥eùabËCÏss
(
RuÁimeCÏss_CV_MedŸSšk
, 
Ba£Tru¡
)

2413 
public
:

2415 
public
:

2416 
ULONG
 
STDMETHODCALLTYPE
 
	`AddRef
()

2418  
	`IÁ”lockedInüem’t
(&
m_cRef
);

2420 
ULONG
 
STDMETHODCALLTYPE
 
	`R–—£
()

2422 
ULONG
 
cRef
 = 
	`IÁ”lockedDeüem’t
(&
m_cRef
);

2423 ià(
cRef
 == 0)

2425 
d–‘e
 
this
;

2427  
cRef
;

2429 #ià
	`defšed
(
_MSC_VER
) && _MSC_VER >= 1700

2430 
	`STDMETHOD
(
Qu”yIÁ”çû
)(
REFIID
 
riid
, 
_OuŒ_»suÉ_nuÎÚçu»_
 **
µv
)

2432 
	`STDMETHOD
(
Qu”yIÁ”çû
)(
REFIID
 
riid
, **
µv
)

2435 ià(
µv
 =ğ
nuÎ±r
) {

2436  
E_POINTER
;

2438 (*
µv
èğ
nuÎ±r
;

2439 
HRESULT
 
hr
 = 
S_OK
;

2440 ià(
riid
 =ğ
IID_IUnknown
 ||

2441 
riid
 =ğ
IID_IMFMedŸSšk
) {

2442 (*
µv
èğ
¡©ic_ÿ¡
<
IMFMedŸSšk
*>(
this
);

2443 
	`AddRef
();

2444 } ià(
riid
 =ğ
IID_IMFClockS‹Sšk
) {

2445 (*
µv
èğ
¡©ic_ÿ¡
<
IMFClockS‹Sšk
*>(
this
);

2446 
	`AddRef
();

2447 } ià(
riid
 =ğ
IID_IMFA‰ribu‹s
) {

2448 (*
µv
èğ
¡©ic_ÿ¡
<
IMFA‰ribu‹s
*>(
this
);

2449 
	`AddRef
();

2451 
hr
 = 
E_NOINTERFACE
;

2454  
hr
;

2457 
	`MedŸSšk
(è: 
	`m_IsShutdown
(
çl£
), 
	`m_ÎS¹Time
(0) {

2458 
CBa£A‰ribu‹s
<>::
	`In™Ÿlize
(0U);

2459 
	`In™ŸlizeCr™iÿlSeùiÚEx
(&
m_ü™Sec
, 3000, 0);

2460 
	`DebugPrštOut
(
L
"MediaSink::MediaSink\n");

2463 
vœtu®
 ~
	`MedŸSšk
() {

2464 
	`DebugPrštOut
(
L
"MediaSink::~MediaSink\n");

2465 
	`D–‘eCr™iÿlSeùiÚ
(&
m_ü™Sec
);

2466 
	`as£¹
(
m_IsShutdown
);

2468 
HRESULT
 
	`CheckShutdown
() const

2470 ià(
m_IsShutdown
)

2472  
MF_E_SHUTDOWN
;

2476  
S_OK
;

2479 #ifdeà
WINRT


2480 
STDMETHODIMP
 
	`S‘Prİ”t›s
(
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IPrİ”tyS‘
 *
pCÚfigu¿tiÚ
)

2482 
HRESULT
 
hr
 = 
S_OK
;

2483 ià(
pCÚfigu¿tiÚ
) {

2484 
Miüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
¥In¥
;

2485 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IM­
<
HSTRING
, 
IIn¥eùabË
 *>> 
¥S‘tšg
;

2486 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ue
> 
¥PrİV®
;

2487 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s
> 
pMedEncPrİs
;

2488 
UINT32
 
uiTy³
 = 
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³_VideoP»v›w
;

2490 
hr
 = 
pCÚfigu¿tiÚ
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
¥S‘tšg
));

2491 ià(
	`FAILED
(
hr
)) {

2492 
hr
 = 
E_FAIL
;

2495 ià(
	`SUCCEEDED
(
hr
)) {

2496 
hr
 = 
¥S‘tšg
->
	`Lookup
(
Miüosoá
::
WRL
::
W¿µ”s
::
	`HSŒšgReã»nû
(
MF_PROP_SAMPLEGRABBERCALLBACK
).
	`G‘
(), 
¥In¥
.
	`R–—£AndG‘Add»ssOf
());

2497 ià(
	`FAILED
(
hr
)) {

2498 
hr
 = 
E_INVALIDARG
;

2500 ià(
	`SUCCEEDED
(
hr
)) {

2501 
hr
 = 
	`S‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
¥In¥
.
	`G‘
());

2504 ià(
	`SUCCEEDED
(
hr
)) {

2505 
hr
 = 
¥S‘tšg
->
	`Lookup
(
Miüosoá
::
WRL
::
W¿µ”s
::
	`HSŒšgReã»nû
(
MF_PROP_VIDTYPE
).
	`G‘
(), 
¥In¥
.
	`R–—£AndG‘Add»ssOf
());

2506 ià(
	`FAILED
(
hr
)) {

2507 
hr
 = 
E_INVALIDARG
;

2509 ià(
	`SUCCEEDED
(
hr
)) {

2510 ià(
	`SUCCEEDED
(
hr
 = 
¥In¥
.
	`As
(&
¥PrİV®
))) {

2511 
hr
 = 
¥PrİV®
->
	`G‘UIÁ32
(&
uiTy³
);

2515 ià(
	`SUCCEEDED
(
hr
)) {

2516 
hr
 = 
¥S‘tšg
->
	`Lookup
(
Miüosoá
::
WRL
::
W¿µ”s
::
	`HSŒšgReã»nû
(
MF_PROP_VIDENCPROPS
).
	`G‘
(), 
¥In¥
.
	`R–—£AndG‘Add»ssOf
());

2517 ià(
	`FAILED
(
hr
)) {

2518 
hr
 = 
E_INVALIDARG
;

2520 ià(
	`SUCCEEDED
(
hr
)) {

2521 
hr
 = 
¥In¥
.
	`As
(&
pMedEncPrİs
);

2524 ià(
	`SUCCEEDED
(
hr
)) {

2525 
hr
 = 
	`S‘MedŸSŒ—mPrİ”t›s
((
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³
)
uiTy³
, 
pMedEncPrİs
.
	`G‘
());

2529  
hr
;

2531 
DWORD
 
	`G‘SŒ—mId
(
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³
 
medŸSŒ—mTy³
)

2533  3 - 
medŸSŒ—mTy³
;

2535 
HRESULT
 
	`AddA‰ribu‹
(
_In_
 
GUID
 
guidKey
, _In_ 
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ue
 *
pV®ue
, _In_ 
IMFA‰ribu‹s
* 
pA‰r
)

2537 
HRESULT
 
hr
 = 
S_OK
;

2538 
PROPVARIANT
 
v¬
;

2539 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³
 
ty³
;

2540 
hr
 = 
pV®ue
->
	`g‘_Ty³
(&
ty³
);

2541 
	`Z”oMemÜy
(&
v¬
, (var));

2543 ià(
	`SUCCEEDED
(
hr
))

2545 
ty³
)

2547 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_UIÁ8A¼ay
:

2549 
UINT32
 
cbBlob
;

2550 
BYTE
 *
pbBlog
 = 
nuÎ±r
;

2551 
hr
 = 
pV®ue
->
	`G‘UIÁ8A¼ay
(&
cbBlob
, &
pbBlog
);

2552 ià(
	`SUCCEEDED
(
hr
))

2554 ià(
pbBlog
 =ğ
nuÎ±r
)

2556 
hr
 = 
E_INVALIDARG
;

2560 
hr
 = 
pA‰r
->
	`S‘Blob
(
guidKey
, 
pbBlog
, 
cbBlob
);

2563 
	`CoTaskMemF»e
(
pbBlog
);

2567 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_DoubË
:

2569 
DOUBLE
 
v®ue
;

2570 
hr
 = 
pV®ue
->
	`G‘DoubË
(&
v®ue
);

2571 ià(
	`SUCCEEDED
(
hr
))

2573 
hr
 = 
pA‰r
->
	`S‘DoubË
(
guidKey
, 
v®ue
);

2578 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_Guid
:

2580 
GUID
 
v®ue
;

2581 
hr
 = 
pV®ue
->
	`G‘Guid
(&
v®ue
);

2582 ià(
	`SUCCEEDED
(
hr
))

2584 
hr
 = 
pA‰r
->
	`S‘GUID
(
guidKey
, 
v®ue
);

2589 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_SŒšg
:

2591 
Miüosoá
::
WRL
::
W¿µ”s
::
HSŒšg
 
v®ue
;

2592 
hr
 = 
pV®ue
->
	`G‘SŒšg
(
v®ue
.
	`G‘Add»ssOf
());

2593 ià(
	`SUCCEEDED
(
hr
))

2595 
UINT32
 
Ën
 = 0;

2596 
LPCWSTR
 
szV®ue
 = 
	`WšdowsG‘SŒšgRawBufãr
(
v®ue
.
	`G‘
(), &
Ën
);

2597 
hr
 = 
pA‰r
->
	`S‘SŒšg
(
guidKey
, 
szV®ue
);

2602 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_UIÁ32
:

2604 
UINT32
 
v®ue
;

2605 
hr
 = 
pV®ue
->
	`G‘UIÁ32
(&
v®ue
);

2606 ià(
	`SUCCEEDED
(
hr
))

2608 
pA‰r
->
	`S‘UINT32
(
guidKey
, 
v®ue
);

2613 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_UIÁ64
:

2615 
UINT64
 
v®ue
;

2616 
hr
 = 
pV®ue
->
	`G‘UIÁ64
(&
v®ue
);

2617 ià(
	`SUCCEEDED
(
hr
))

2619 
hr
 = 
pA‰r
->
	`S‘UINT64
(
guidKey
, 
v®ue
);

2624 
ABI
::
Wšdows
::
Found©iÚ
::
Prİ”tyTy³_In¥eùabË
:

2626 
Miüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
v®ue
;

2627 
hr
 = 
TYPE_E_TYPEMISMATCH
;

2628 ià(
	`SUCCEEDED
(
hr
))

2630 
pA‰r
->
	`S‘Unknown
(
guidKey
, 
v®ue
.
	`G‘
());

2639  
hr
;

2641 
HRESULT
 
	`CÚv”tPrİ”t›sToMedŸTy³
(
_In_
 
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s
 *
pMEP
, 
_OuŒ_
 
IMFMedŸTy³
 **
µMT
)

2643 
HRESULT
 
hr
 = 
S_OK
;

2644 
_ComPŒ
<
IMFMedŸTy³
> 
¥MT
;

2645 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IM­
<
GUID
, 
IIn¥eùabË
*>> 
¥M­
;

2646 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
II‹¿bË
<ABI::Wšdows::Found©iÚ::CŞËùiÚs::
IKeyV®uePaœ
<
GUID
, 
IIn¥eùabË
*>*>> 
¥I‹¿bË
;

2647 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
II‹¿tÜ
<ABI::Wšdows::Found©iÚ::CŞËùiÚs::
IKeyV®uePaœ
<
GUID
, 
IIn¥eùabË
*>*>> 
¥I‹¿tÜ
;

2649 ià(
pMEP
 =ğ
nuÎ±r
 || 
µMT
 ==‚ullptr)

2651  
E_INVALIDARG
;

2653 *
µMT
 = 
nuÎ±r
;

2655 
hr
 = 
pMEP
->
	`g‘_Prİ”t›s
(
¥M­
.
	`G‘Add»ssOf
());

2657 ià(
	`SUCCEEDED
(
hr
))

2659 
hr
 = 
¥M­
.
	`As
(&
¥I‹¿bË
);

2661 ià(
	`SUCCEEDED
(
hr
))

2663 
hr
 = 
¥I‹¿bË
->
	`Fœ¡
(&
¥I‹¿tÜ
);

2665 ià(
	`SUCCEEDED
(
hr
))

2667 
	`MFC»©eMedŸTy³
(
¥MT
.
	`R–—£AndG‘Add»ssOf
());

2670 
boŞ—n
 
hasCu¼’t
 = 
çl£
;

2671 ià(
	`SUCCEEDED
(
hr
))

2673 
hr
 = 
¥I‹¿tÜ
->
	`g‘_HasCu¼’t
(&
hasCu¼’t
);

2676 
hasCu¼’t
)

2678 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
::
IKeyV®uePaœ
<
GUID
, 
IIn¥eùabË
*> > 
¥KeyV®uePaœ
;

2679 
Miüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
¥V®ue
;

2680 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ue
> 
¥PrİV®ue
;

2681 
GUID
 
guidKey
;

2683 
hr
 = 
¥I‹¿tÜ
->
	`g‘_Cu¼’t
(&
¥KeyV®uePaœ
);

2684 ià(
	`FAILED
(
hr
))

2688 
hr
 = 
¥KeyV®uePaœ
->
	`g‘_Key
(&
guidKey
);

2689 ià(
	`FAILED
(
hr
))

2693 
hr
 = 
¥KeyV®uePaœ
->
	`g‘_V®ue
(&
¥V®ue
);

2694 ià(
	`FAILED
(
hr
))

2698 
hr
 = 
¥V®ue
.
	`As
(&
¥PrİV®ue
);

2699 ià(
	`FAILED
(
hr
))

2703 
hr
 = 
	`AddA‰ribu‹
(
guidKey
, 
¥PrİV®ue
.
	`G‘
(), 
¥MT
.Get());

2704 ià(
	`FAILED
(
hr
))

2709 
hr
 = 
¥I‹¿tÜ
->
	`MoveNext
(&
hasCu¼’t
);

2710 ià(
	`FAILED
(
hr
))

2717 ià(
	`SUCCEEDED
(
hr
))

2719 
Miüosoá
::
WRL
::
ComPŒ
<
IIn¥eùabË
> 
¥V®ue
;

2720 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IPrİ”tyV®ue
> 
¥PrİV®ue
;

2721 
GUID
 
guiMajÜTy³
;

2723 
hr
 = 
¥M­
->
	`Lookup
(
MF_MT_MAJOR_TYPE
, 
¥V®ue
.
	`G‘Add»ssOf
());

2725 ià(
	`SUCCEEDED
(
hr
))

2727 
hr
 = 
¥V®ue
.
	`As
(&
¥PrİV®ue
);

2729 ià(
	`SUCCEEDED
(
hr
))

2731 
hr
 = 
¥PrİV®ue
->
	`G‘Guid
(&
guiMajÜTy³
);

2733 ià(
	`SUCCEEDED
(
hr
))

2735 ià(
guiMajÜTy³
 !ğ
MFMedŸTy³_Video
 && guiMajÜTy³ !ğ
MFMedŸTy³_Audio
)

2737 
hr
 = 
E_UNEXPECTED
;

2742 ià(
	`SUCCEEDED
(
hr
))

2744 *
µMT
 = 
¥MT
.
	`D‘ach
();

2747  
hr
;

2750 
HRESULT
 
	`S‘MedŸSŒ—mPrİ”t›s
(
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³
 MediaStreamType,

2751 
_In_İt_
 
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
::
IMedŸEncodšgPrİ”t›s
 *
medŸEncodšgPrİ”t›s
)

2753 
HRESULT
 
hr
 = 
S_OK
;

2754 
_ComPŒ
<
IMFMedŸTy³
> 
¥MedŸTy³
;

2756 ià(
MedŸSŒ—mTy³
 !ğ
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³_VideoP»v›w
 &&

2757 
MedŸSŒ—mTy³
 !ğ
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³_VideoRecÜd
 &&

2758 
MedŸSŒ—mTy³
 !ğ
ABI
::
Wšdows
::
MedŸ
::
C­tu»
::
MedŸSŒ—mTy³_Audio
)

2760  
E_INVALIDARG
;

2763 
	`RemoveSŒ—mSšk
(
	`G‘SŒ—mId
(
MedŸSŒ—mTy³
));

2765 ià(
medŸEncodšgPrİ”t›s
 !ğ
nuÎ±r
)

2767 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥SŒ—mSšk
;

2768 
hr
 = 
	`CÚv”tPrİ”t›sToMedŸTy³
(
medŸEncodšgPrİ”t›s
, &
¥MedŸTy³
);

2769 ià(
	`SUCCEEDED
(
hr
))

2771 
hr
 = 
	`AddSŒ—mSšk
(
	`G‘SŒ—mId
(
MedŸSŒ—mTy³
), 
nuÎ±r
, 
¥SŒ—mSšk
.
	`G‘Add»ssOf
());

2773 ià(
	`SUCCEEDED
(
hr
)) {

2774 
hr
 = 
	`S‘Unknown
(
MF_MEDIASINK_PREFERREDTYPE
, 
¥MedŸTy³
.
	`D‘ach
());

2778  
hr
;

2782 
HRESULT
 
STDMETHODCALLTYPE
 
	`G‘Ch¬aù”i¡ics
(

2783  
__RPC__out
 
DWORD
 *
pdwCh¬aù”i¡ics
) {

2784 
HRESULT
 
hr
;

2785 ià(
pdwCh¬aù”i¡ics
 =ğ
NULL
è 
E_INVALIDARG
;

2786 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

2787 ià(
	`SUCCEEDED
(
hr
 = 
	`CheckShutdown
())) {

2789 *
pdwCh¬aù”i¡ics
 = 
MEDIASINK_FIXED_STREAMS
;

2791 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

2792 
	`DebugPrštOut
(
L
"MedŸSšk::G‘Ch¬aù”i¡ics: HRESULT=%i\n", 
hr
);

2793  
hr
;

2796 
HRESULT
 
STDMETHODCALLTYPE
 
	`AddSŒ—mSšk
(

2797 
DWORD
 
dwSŒ—mSškId’tif›r
, 
IMFMedŸTy³
 * , 
IMFSŒ—mSšk
 **
µSŒ—mSšk
) {

2798 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥MFSŒ—m
;

2799 
_ComPŒ
<
ICu¡omSŒ—mSšk
> 
pSŒ—m
;

2800 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

2801 
HRESULT
 
hr
 = 
	`CheckShutdown
();

2803 ià(
	`SUCCEEDED
(
hr
))

2805 
hr
 = 
	`G‘SŒ—mSškById
(
dwSŒ—mSškId’tif›r
, &
¥MFSŒ—m
);

2808 ià(
	`SUCCEEDED
(
hr
))

2810 
hr
 = 
MF_E_STREAMSINK_EXISTS
;

2814 
hr
 = 
S_OK
;

2817 ià(
	`SUCCEEDED
(
hr
))

2819 #ifdeà
WINRT


2820 
pSŒ—m
 = 
Miüosoá
::
WRL
::
Make
<
SŒ—mSšk
>();

2821 ià(
pSŒ—m
 =ğ
nuÎ±r
) {

2822 
hr
 = 
E_OUTOFMEMORY
;

2824 ià(
	`SUCCEEDED
(
hr
))

2825 
hr
 = 
pSŒ—m
.
As
<
IMFSŒ—mSšk
>(&
¥MFSŒ—m
);

2827 
SŒ—mSšk
* 
pSšk
 = 
Ãw
 
	`SŒ—mSšk
();

2828 ià(
pSšk
) {

2829 
hr
 = 
pSšk
->
	`Qu”yIÁ”çû
(
IID_IMFSŒ—mSšk
, (**)
¥MFSŒ—m
.
	`G‘Add»ssOf
());

2830 ià(
	`SUCCEEDED
(
hr
)) {

2831 
hr
 = 
¥MFSŒ—m
.
	`As
(&
pSŒ—m
);

2833 ià(
	`FAILED
(
hr
)è
d–‘e
 
pSšk
;

2839 
_ComPŒ
<
IMFA‰ribu‹s
> 
pA‰r
;

2840 ià(
	`SUCCEEDED
(
hr
)) {

2841 
hr
 = 
pSŒ—m
.
	`As
(&
pA‰r
);

2843 ià(
	`SUCCEEDED
(
hr
)) {

2844 
hr
 = 
pA‰r
->
	`S‘UINT32
(
MF_STREAMSINK_ID
, 
dwSŒ—mSškId’tif›r
);

2845 ià(
	`SUCCEEDED
(
hr
)) {

2846 
hr
 = 
pA‰r
->
	`S‘Unknown
(
MF_STREAMSINK_MEDIASINKINTERFACE
, (
IMFMedŸSšk
*)
this
);

2849 ià(
	`SUCCEEDED
(
hr
)) {

2850 
hr
 = 
pSŒ—m
->
	`In™Ÿlize
();

2853 ià(
	`SUCCEEDED
(
hr
))

2855 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
pos
 = 
m_¡»ams
.
	`FrÚtPos™iÚ
();

2856 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
posEnd
 = 
m_¡»ams
.
	`EndPos™iÚ
();

2859 ; 
pos
 !ğ
posEnd
;…o ğ
m_¡»ams
.
	`Next
(pos))

2861 
DWORD
 
dwCu¼Id
;

2862 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥Cu¼
;

2863 
hr
 = 
m_¡»ams
.
	`G‘I‹mPos
(
pos
, &
¥Cu¼
);

2864 ià(
	`FAILED
(
hr
))

2868 
hr
 = 
¥Cu¼
->
	`G‘Id’tif›r
(&
dwCu¼Id
);

2869 ià(
	`FAILED
(
hr
))

2874 ià(
dwCu¼Id
 > 
dwSŒ—mSškId’tif›r
)

2880 ià(
	`SUCCEEDED
(
hr
))

2882 
hr
 = 
m_¡»ams
.
	`In£¹Pos
(
pos
, 
¥MFSŒ—m
.
	`G‘
());

2886 ià(
	`SUCCEEDED
(
hr
))

2888 *
µSŒ—mSšk
 = 
¥MFSŒ—m
.
	`D‘ach
();

2890 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

2891 
	`DebugPrštOut
(
L
"MedŸSšk::AddSŒ—mSšk: HRESULT=%i\n", 
hr
);

2892  
hr
;

2895 
HRESULT
 
STDMETHODCALLTYPE
 
	`RemoveSŒ—mSšk
(
DWORD
 
dwSŒ—mSškId’tif›r
) {

2896 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

2897 
HRESULT
 
hr
 = 
	`CheckShutdown
();

2898 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
pos
 = 
m_¡»ams
.
	`FrÚtPos™iÚ
();

2899 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
’dPos
 = 
m_¡»ams
.
	`EndPos™iÚ
();

2900 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥SŒ—m
;

2902 ià(
	`SUCCEEDED
(
hr
))

2904 ; 
pos
 !ğ
’dPos
;…o ğ
m_¡»ams
.
	`Next
(pos))

2906 
hr
 = 
m_¡»ams
.
	`G‘I‹mPos
(
pos
, &
¥SŒ—m
);

2907 
DWORD
 
dwId
;

2909 ià(
	`FAILED
(
hr
))

2914 
hr
 = 
¥SŒ—m
->
	`G‘Id’tif›r
(&
dwId
);

2915 ià(
	`FAILED
(
hr
è|| 
dwId
 =ğ
dwSŒ—mSškId’tif›r
)

2921 ià(
pos
 =ğ
’dPos
)

2923 
hr
 = 
MF_E_INVALIDSTREAMNUMBER
;

2927 ià(
	`SUCCEEDED
(
hr
))

2929 
hr
 = 
m_¡»ams
.
	`Remove
(
pos
, 
nuÎ±r
);

2930 
_ComPŒ
<
ICu¡omSŒ—mSšk
> 
¥Cu¡omSšk
;

2931 #ifdeà
WINRT


2932 
¥Cu¡omSšk
 = 
¡©ic_ÿ¡
<
SŒ—mSšk
*>(
¥SŒ—m
.
	`G‘
());

2933 
hr
 = 
S_OK
;

2935 
hr
 = 
¥SŒ—m
.
	`As
(&
¥Cu¡omSšk
);

2937 ià(
	`SUCCEEDED
(
hr
))

2938 
hr
 = 
¥Cu¡omSšk
->
	`Shutdown
();

2940 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

2941 
	`DebugPrštOut
(
L
"MedŸSšk::RemoveSŒ—mSšk: HRESULT=%i\n", 
hr
);

2942  
hr
;

2945 
HRESULT
 
STDMETHODCALLTYPE
 
	`G‘SŒ—mSškCouÁ
(
DWORD
 *
pSŒ—mSškCouÁ
) {

2946 ià(
pSŒ—mSškCouÁ
 =ğ
NULL
)

2948  
E_INVALIDARG
;

2951 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

2953 
HRESULT
 
hr
 = 
	`CheckShutdown
();

2955 ià(
	`SUCCEEDED
(
hr
))

2957 *
pSŒ—mSškCouÁ
 = 
m_¡»ams
.
	`G‘CouÁ
();

2960 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

2961 
	`DebugPrštOut
(
L
"MedŸSšk::G‘SŒ—mSškCouÁ: HRESULT=%i\n", 
hr
);

2962  
hr
;

2965 
HRESULT
 
STDMETHODCALLTYPE
 
	`G‘SŒ—mSškByIndex
(

2966 
DWORD
 
dwIndex
, 
IMFSŒ—mSšk
 **
µSŒ—mSšk
) {

2967 ià(
µSŒ—mSšk
 =ğ
NULL
)

2969  
E_INVALIDARG
;

2972 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥SŒ—m
;

2973 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

2974 
DWORD
 
cSŒ—ms
 = 
m_¡»ams
.
	`G‘CouÁ
();

2976 ià(
dwIndex
 >ğ
cSŒ—ms
)

2978  
MF_E_INVALIDINDEX
;

2981 
HRESULT
 
hr
 = 
	`CheckShutdown
();

2983 ià(
	`SUCCEEDED
(
hr
))

2985 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
pos
 = 
m_¡»ams
.
	`FrÚtPos™iÚ
();

2986 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
’dPos
 = 
m_¡»ams
.
	`EndPos™iÚ
();

2987 
DWORD
 
dwCu¼’t
 = 0;

2989 ; 
pos
 !ğ
’dPos
 && 
dwCu¼’t
 < 
dwIndex
;…o ğ
m_¡»ams
.
	`Next
(pos), ++dwCurrent)

2994 ià(
pos
 =ğ
’dPos
)

2996 
hr
 = 
MF_E_UNEXPECTED
;

3000 
hr
 = 
m_¡»ams
.
	`G‘I‹mPos
(
pos
, &
¥SŒ—m
);

3004 ià(
	`SUCCEEDED
(
hr
))

3006 *
µSŒ—mSšk
 = 
¥SŒ—m
.
	`D‘ach
();

3008 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3009 
	`DebugPrštOut
(
L
"MedŸSšk::G‘SŒ—mSškByIndex: HRESULT=%i\n", 
hr
);

3010  
hr
;

3013 
HRESULT
 
STDMETHODCALLTYPE
 
	`G‘SŒ—mSškById
(

3014 
DWORD
 
dwSŒ—mSškId’tif›r
, 
IMFSŒ—mSšk
 **
µSŒ—mSšk
) {

3015 ià(
µSŒ—mSšk
 =ğ
NULL
)

3017  
E_INVALIDARG
;

3020 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

3021 
HRESULT
 
hr
 = 
	`CheckShutdown
();

3022 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥ResuÉ
;

3024 ià(
	`SUCCEEDED
(
hr
))

3026 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
pos
 = 
m_¡»ams
.
	`FrÚtPos™iÚ
();

3027 
ComPŒLi¡
<
IMFSŒ—mSšk
>::
POSITION
 
’dPos
 = 
m_¡»ams
.
	`EndPos™iÚ
();

3029 ; 
pos
 !ğ
’dPos
;…o ğ
m_¡»ams
.
	`Next
(pos))

3031 
_ComPŒ
<
IMFSŒ—mSšk
> 
¥SŒ—m
;

3032 
hr
 = 
m_¡»ams
.
	`G‘I‹mPos
(
pos
, &
¥SŒ—m
);

3033 
DWORD
 
dwId
;

3035 ià(
	`FAILED
(
hr
))

3040 
hr
 = 
¥SŒ—m
->
	`G‘Id’tif›r
(&
dwId
);

3041 ià(
	`FAILED
(
hr
))

3045 ià(
dwId
 =ğ
dwSŒ—mSškId’tif›r
)

3047 
¥ResuÉ
 = 
¥SŒ—m
;

3052 ià(
pos
 =ğ
’dPos
)

3054 
hr
 = 
MF_E_INVALIDSTREAMNUMBER
;

3058 ià(
	`SUCCEEDED
(
hr
))

3060 
	`as£¹
(
¥ResuÉ
);

3061 *
µSŒ—mSšk
 = 
¥ResuÉ
.
	`D‘ach
();

3063 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3064 
	`DebugPrštOut
(
L
"MedŸSšk::G‘SŒ—mSškById: HRESULT=%i\n", 
hr
);

3065  
hr
;

3068 
HRESULT
 
STDMETHODCALLTYPE
 
	`S‘P»£Á©iÚClock
(

3069 
IMFP»£Á©iÚClock
 *
pP»£Á©iÚClock
) {

3070 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

3072 
HRESULT
 
hr
 = 
	`CheckShutdown
();

3076 ià(
	`SUCCEEDED
(
hr
)) {

3077 ià(
m_¥Clock
) {

3078 
hr
 = 
m_¥Clock
->
	`RemoveClockS‹Sšk
(
this
);

3083 ià(
	`SUCCEEDED
(
hr
)) {

3084 ià(
pP»£Á©iÚClock
) {

3085 
hr
 = 
pP»£Á©iÚClock
->
	`AddClockS‹Sšk
(
this
);

3089 
_ComPŒ
<
IMFSam¶eG¿bb”SškC®lback
> 
pSam¶eC®lback
;

3090 ià(
	`SUCCEEDED
(
hr
)) {

3093 
m_¥Clock
 = 
pP»£Á©iÚClock
;

3094 
hr
 = 
	`G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
	`G‘Add»ssOf
());

3096 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3097 ià(
	`SUCCEEDED
(
hr
))

3098 
hr
 = 
pSam¶eC®lback
->
	`OnS‘P»£Á©iÚClock
(
pP»£Á©iÚClock
);

3099 
	`DebugPrštOut
(
L
"MedŸSšk::S‘P»£Á©iÚClock: HRESULT=%i\n", 
hr
);

3100  
hr
;

3103 
HRESULT
 
STDMETHODCALLTYPE
 
	`G‘P»£Á©iÚClock
(

3104 
IMFP»£Á©iÚClock
 **
µP»£Á©iÚClock
) {

3105 ià(
µP»£Á©iÚClock
 =ğ
NULL
) {

3106  
E_INVALIDARG
;

3109 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

3111 
HRESULT
 
hr
 = 
	`CheckShutdown
();

3113 ià(
	`SUCCEEDED
(
hr
)) {

3114 ià(!
m_¥Clock
) {

3115 
hr
 = 
MF_E_NO_CLOCK
;

3118 
hr
 = 
m_¥Clock
.
	`CİyTo
(
µP»£Á©iÚClock
);

3121 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3122 
	`DebugPrštOut
(
L
"MedŸSšk::G‘P»£Á©iÚClock: HRESULT=%i\n", 
hr
);

3123  
hr
;

3126 
HRESULT
 
STDMETHODCALLTYPE
 
	`Shutdown
() {

3127 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

3129 
HRESULT
 
hr
 = 
	`CheckShutdown
();

3131 ià(
	`SUCCEEDED
(
hr
)) {

3132 
	`FÜEach
(
m_¡»ams
, 
	`ShutdownFunc
());

3133 
m_¡»ams
.
	`CË¬
();

3134 
m_¥Clock
.
	`R–—£AndG‘Add»ssOf
();

3136 
_ComPŒ
<
IMFMedŸTy³
> 
pTy³
;

3137 
hr
 = 
CBa£A‰ribu‹s
<>::
	`G‘Unknown
(
MF_MEDIASINK_PREFERREDTYPE
, 
	`__uuidof
(
IMFMedŸTy³
), (
LPVOID
*)
pTy³
.
	`G‘Add»ssOf
());

3138 ià(
	`SUCCEEDED
(
hr
)) {

3139 
hr
 = 
	`D–‘eI‹m
(
MF_MEDIASINK_PREFERREDTYPE
);

3141 
m_IsShutdown
 = 
Œue
;

3144 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3145 
	`DebugPrštOut
(
L
"MedŸSšk::Shutdown: HRESULT=%i\n", 
hr
);

3146  
hr
;

3148 şas 
	cShutdownFunc


3150 
public
:

3151 
HRESULT
 
	`İ”©Ü
()(
IMFSŒ—mSšk
 *
pSŒ—m
) const

3153 
_ComPŒ
<
ICu¡omSŒ—mSšk
> 
¥Cu¡omSšk
;

3154 
HRESULT
 
hr
;

3155 #ifdeà
WINRT


3156 
¥Cu¡omSšk
 = 
¡©ic_ÿ¡
<
SŒ—mSšk
*>(
pSŒ—m
);

3158 
hr
 = 
pSŒ—m
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(
¥Cu¡omSšk
.
	`G‘Add»ssOf
()));

3159 ià(
	`FAILED
(
hr
))  hr;

3161 
hr
 = 
¥Cu¡omSšk
->
	`Shutdown
();

3162  
hr
;

3164 
	}
};

3166 şas 
	cS¹Func


3168 
	gpublic
:

3169 
S¹Func
(
LONGLONG
 
ÎS¹Time
)

3170 : 
_ÎS¹Time
(
ÎS¹Time
)

3174 
HRESULT
 
İ”©Ü
()(
IMFSŒ—mSšk
 *
pSŒ—m
) const

3176 
_ComPŒ
<
ICu¡omSŒ—mSšk
> 
¥Cu¡omSšk
;

3177 
HRESULT
 
	ghr
;

3178 #ifdeà
WINRT


3179 
	g¥Cu¡omSšk
 = 
¡©ic_ÿ¡
<
SŒ—mSšk
*>(
pSŒ—m
);

3181 
	ghr
 = 
pSŒ—m
->
Qu”yIÁ”çû
(
IID_PPV_ARGS
(
¥Cu¡omSšk
.
G‘Add»ssOf
()));

3182 ià(
FAILED
(
hr
)è 
	ghr
;

3184 
	ghr
 = 
¥Cu¡omSšk
->
S¹
(
_ÎS¹Time
);

3185  
	ghr
;

3188 
LONGLONG
 
	g_ÎS¹Time
;

3191 şas 
	cStİFunc


3193 
	gpublic
:

3194 
HRESULT
 
İ”©Ü
()(
IMFSŒ—mSšk
 *
pSŒ—m
) const

3196 
_ComPŒ
<
ICu¡omSŒ—mSšk
> 
¥Cu¡omSšk
;

3197 
HRESULT
 
	ghr
;

3198 #ifdeà
WINRT


3199 
	g¥Cu¡omSšk
 = 
¡©ic_ÿ¡
<
SŒ—mSšk
*>(
pSŒ—m
);

3201 
	ghr
 = 
pSŒ—m
->
Qu”yIÁ”çû
(
IID_PPV_ARGS
(
¥Cu¡omSšk
.
G‘Add»ssOf
()));

3202 ià(
FAILED
(
hr
)è 
	ghr
;

3204 
	ghr
 = 
¥Cu¡omSšk
->
Stİ
();

3205  
	ghr
;

3209 
	g‹m¶©e
 <
şass
 
	gT
, cÏs 
	gTFunc
>

3210 
HRESULT
 
FÜEach
(
ComPŒLi¡
<
T
> &
cŞ
, 
TFunc
 
â
)

3212 
	gComPŒLi¡
<
	gT
>::
POSITION
 
pos
 = 
cŞ
.
FrÚtPos™iÚ
();

3213 
	gComPŒLi¡
<
	gT
>::
POSITION
 
’dPos
 = 
cŞ
.
EndPos™iÚ
();

3214 
HRESULT
 
	ghr
 = 
S_OK
;

3216 ; 
	gpos
 !ğ
’dPos
;…o ğ
cŞ
.
Next
(
pos
))

3218 
_ComPŒ
<
T
> 
¥SŒ—m
;

3220 
	ghr
 = 
cŞ
.
G‘I‹mPos
(
pos
, &
¥SŒ—m
);

3221 ià(
FAILED
(
hr
))

3226 
	ghr
 = 
â
(
¥SŒ—m
.
G‘
());

3229  
	ghr
;

3232 
HRESULT
 
STDMETHODCALLTYPE
 
	$OnClockS¹
(

3233 
MFTIME
 
hnsSy¡emTime
,

3234 
LONGLONG
 
ÎClockS¹Off£t
) {

3235 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

3236 
HRESULT
 
hr
 = 
	`CheckShutdown
();

3238 ià(
	`SUCCEEDED
(
hr
))

3241 
m_ÎS¹Time
 = 
ÎClockS¹Off£t
;

3242 
hr
 = 
	`FÜEach
(
m_¡»ams
, 
	`S¹Func
(
ÎClockS¹Off£t
));

3244 
_ComPŒ
<
IMFSam¶eG¿bb”SškC®lback
> 
pSam¶eC®lback
;

3245 ià(
	`SUCCEEDED
(
hr
))

3246 
hr
 = 
	`G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
	`G‘Add»ssOf
());

3247 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3248 ià(
	`SUCCEEDED
(
hr
))

3249 
hr
 = 
pSam¶eC®lback
->
	`OnClockS¹
(
hnsSy¡emTime
, 
ÎClockS¹Off£t
);

3250 
	`DebugPrštOut
(
L
"MedŸSšk::OnClockS¹: HRESULT=%i\n", 
hr
);

3251  
hr
;

3252 
	}
}

3254 
HRESULT
 
STDMETHODCALLTYPE
 
	$OnClockStİ
(

3255 
MFTIME
 
hnsSy¡emTime
) {

3256 
	`EÁ”Cr™iÿlSeùiÚ
(&
m_ü™Sec
);

3257 
HRESULT
 
hr
 = 
	`CheckShutdown
();

3259 ià(
	`SUCCEEDED
(
hr
))

3262 
hr
 = 
	`FÜEach
(
m_¡»ams
, 
	`StİFunc
());

3264 
_ComPŒ
<
IMFSam¶eG¿bb”SškC®lback
> 
pSam¶eC®lback
;

3265 ià(
	`SUCCEEDED
(
hr
))

3266 
hr
 = 
	`G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
	`G‘Add»ssOf
());

3267 
	`L—veCr™iÿlSeùiÚ
(&
m_ü™Sec
);

3268 ià(
	`SUCCEEDED
(
hr
))

3269 
hr
 = 
pSam¶eC®lback
->
	`OnClockStİ
(
hnsSy¡emTime
);

3270 
	`DebugPrštOut
(
L
"MedŸSšk::OnClockStİ: HRESULT=%i\n", 
hr
);

3271  
hr
;

3272 
	}
}

3274 
HRESULT
 
STDMETHODCALLTYPE
 
	$OnClockPau£
(

3275 
MFTIME
 
hnsSy¡emTime
) {

3276 
HRESULT
 
hr
;

3277 
_ComPŒ
<
IMFSam¶eG¿bb”SškC®lback
> 
pSam¶eC®lback
;

3278 
hr
 = 
	`G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
	`G‘Add»ssOf
());

3279 ià(
	`SUCCEEDED
(
hr
))

3280 
hr
 = 
pSam¶eC®lback
->
	`OnClockPau£
(
hnsSy¡emTime
);

3281 
	`DebugPrštOut
(
L
"MedŸSšk::OnClockPau£: HRESULT=%i\n", 
hr
);

3282  
hr
;

3283 
	}
}

3285 
HRESULT
 
STDMETHODCALLTYPE
 
	$OnClockRe¡¬t
(

3286 
MFTIME
 
hnsSy¡emTime
) {

3287 
HRESULT
 
hr
;

3288 
_ComPŒ
<
IMFSam¶eG¿bb”SškC®lback
> 
pSam¶eC®lback
;

3289 
hr
 = 
	`G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
	`G‘Add»ssOf
());

3290 ià(
	`SUCCEEDED
(
hr
))

3291 
hr
 = 
pSam¶eC®lback
->
	`OnClockRe¡¬t
(
hnsSy¡emTime
);

3292 
	`DebugPrštOut
(
L
"MedŸSšk::OnClockRe¡¬t: HRESULT=%i\n", 
hr
);

3293  
hr
;

3294 
	}
}

3296 
HRESULT
 
STDMETHODCALLTYPE
 
	$OnClockS‘R©e
(

3297 
MFTIME
 
hnsSy¡emTime
,

3298 
æR©e
) {

3299 
HRESULT
 
hr
;

3300 
_ComPŒ
<
IMFSam¶eG¿bb”SškC®lback
> 
pSam¶eC®lback
;

3301 
hr
 = 
	`G‘Unknown
(
MF_MEDIASINK_SAMPLEGRABBERCALLBACK
, 
IID_IMFSam¶eG¿bb”SškC®lback
, (
LPVOID
*)
pSam¶eC®lback
.
	`G‘Add»ssOf
());

3302 ià(
	`SUCCEEDED
(
hr
))

3303 
hr
 = 
pSam¶eC®lback
->
	`OnClockS‘R©e
(
hnsSy¡emTime
, 
æR©e
);

3304 
	`DebugPrštOut
(
L
"MedŸSšk::OnClockS‘R©e: HRESULT=%i\n", 
hr
);

3305  
hr
;

3306 
	}
}

3307 
	g´iv©e
:

3308 #iâdeà
WINRT


3309 
m_cRef
;

3311 
CRITICAL_SECTION
 
	gm_ü™Sec
;

3312 
boŞ
 
	gm_IsShutdown
;

3313 
	gComPŒLi¡
<
	gIMFSŒ—mSšk
> 
	gm_¡»ams
;

3314 
	g_ComPŒ
<
	gIMFP»£Á©iÚClock
> 
	gm_¥Clock
;

3315 
LONGLONG
 
	gm_ÎS¹Time
;

3318 #ifdeà
WINRT


3319 
Aùiv©abËCÏss
(
MedŸSšk
);

	@cap_openni.cpp

41 
	~"´ecomp.hµ
"

42 
	~"İ’cv2/cÜe.hµ
"

43 
	~"İ’cv2/img´oc.hµ
"

45 #ifdeà
HAVE_OPENNI


47 #ià
defšed
 
TBB_INTERFACE_VERSION
 && TBB_INTERFACE_VERSION < 5000

48 #undeà
HAVE_TBB


51 
	~<queue
>

53 #iâdeà
i386


54 
	#i386
 0

	)

56 #iâdeà
__¬m__


57 
	#__¬m__
 0

	)

59 #iâdeà
_ARC


60 
	#_ARC
 0

	)

62 #iâdeà
__APPLE__


63 
	#__APPLE__
 0

	)

66 
	~"XnCµW¿µ”.h
"

68 cÚ¡ 
	gcv
::
SŒšg
 
XMLCÚfig
 =

98 şas 
	cAµroxim©eSyncG¿bb”


100 
	mpublic
:

101 
Aµroxim©eSyncG¿bb”
Ğ
xn
::
CÚ‹xt
 &
_cÚ‹xt
,

102 
xn
::
D•thG’”©Ü
 &
_d•thG’”©Ü
,

103 
xn
::
ImageG’”©Ü
 &
_imageG’”©Ü
,

104 
_maxBufãrSize
, 
boŞ
 
_isCœşeBufãr
, 
_maxTimeDu¿tiÚ
 ) :

105 
cÚ‹xt
(
_cÚ‹xt
), 
d•thG’”©Ü
(
_d•thG’”©Ü
), 
imageG’”©Ü
(
_imageG’”©Ü
),

106 
maxBufãrSize
(
_maxBufãrSize
), 
isCœşeBufãr
(
_isCœşeBufãr
), 
	$maxTimeDu¿tiÚ
(
_maxTimeDu¿tiÚ
)

108 #ifdeà
HAVE_TBB


109 
sk
 = 0;

112 
	`CV_As£¹
Ğ
d•thG’”©Ü
.
	`IsV®id
() );

113 
	`CV_As£¹
Ğ
imageG’”©Ü
.
	`IsV®id
() );

116 
	$£tMaxBufãrSize
Ğ
_maxBufãrSize
 )

118 
maxBufãrSize
 = 
_maxBufãrSize
;

119 #ifdeà
HAVE_TBB


120 
sk
->
	`£tMaxBufãrSize
();

122 
	}
}

123 
šlše
 
	$g‘MaxBufãrSize
(ècÚ¡ {  
maxBufãrSize
; 
	}
}

125 
	$£tIsCœşeBufãr
Ğ
boŞ
 
_isCœşeBufãr
 ) { 
isCœşeBufãr
 = _isCœşeBufãr; 
	}
}

126 
boŞ
 
	$g‘IsCœşeBufãr
(ècÚ¡ {  
isCœşeBufãr
; 
	}
}

128 
	$£tMaxTimeDu¿tiÚ
Ğ
_maxTimeDu¿tiÚ
 ) { 
maxTimeDu¿tiÚ
 = _maxTimeDu¿tiÚ; 
	}
}

129 
	$g‘MaxTimeDu¿tiÚ
(ècÚ¡ {  
maxTimeDu¿tiÚ
; 
	}
}

131 
boŞ
 
g¿b
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
,

132 
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

134 
CV_As£¹
Ğ
sk
 );

137  
	gsk
->
g¿b
(
d•thM‘aD©a
, 
imageM‘aD©a
è=ğ
çl£
 )

139 #iâdeà
HAVE_TBB


140 
sk
->
¥š
();

143  
	gŒue
;

147 
	$¡¬t
()

149 
	`CV_As£¹
Ğ
d•thG’”©Ü
.
	`IsV®id
() );

150 
	`CV_As£¹
Ğ
imageG’”©Ü
.
	`IsV®id
() );

151 #ifdeà
HAVE_TBB


152 
sk
 = 
	`Ãw
Ğ
tbb
::sk::
	`®loÿ‹_roÙ
(èè
	`TBBAµroxim©eSynchrÚiz”Task
Ğ*
this
 );

153 
tbb
::
sk
::
	`’queue
(*task);

155 
sk
.
	`»£t
Ğ
Ãw
 
	`Aµroxim©eSynchrÚiz”
Ğ*
this
 ) );

157 
	}
}

159 
	$fšish
()

161 #ifdeà
HAVE_TBB


162 ifĞ
sk
 )

163 
tbb
::
sk
::
	`de¡roy
( *task );

165 
sk
.
	`»Ëa£
();

167 
	}
}

169 
boŞ
 
	$isRun
(ècÚ¡ {  
sk
 !ğ0; 
	}
}

171 
	gxn
::
CÚ‹xt
 &
cÚ‹xt
;

172 
	gxn
::
D•thG’”©Ü
 &
d•thG’”©Ü
;

173 
	gxn
::
ImageG’”©Ü
 &
imageG’”©Ü
;

175 
	g´iv©e
:

176 
Aµroxim©eSyncG¿bb”
(const ApproximateSyncGrabber&);

177 
	gAµroxim©eSyncG¿bb”
& 
	gİ”©Ü
=(cÚ¡ 
Aµroxim©eSyncG¿bb”
&);

179 
	gmaxBufãrSize
;

180 
boŞ
 
	gisCœşeBufãr
;

181 
	gmaxTimeDu¿tiÚ
;

183 şas 
	cAµroxim©eSynchrÚiz”Ba£


185 
	gpublic
:

186 
Aµroxim©eSynchrÚiz”Ba£
Ğ
Aµroxim©eSyncG¿bb”
& 
_­´oxSyncG¿bb”
 ) :

187 
­´oxSyncG¿bb”
(
_­´oxSyncG¿bb”
), 
isD•thFËd
(
çl£
), 
isImageFËd
(false)

190 
	gvœtu®
 ~
Aµroxim©eSynchrÚiz”Ba£
() {}

192 
vœtu®
 
boŞ
 
isSpšCÚtšue
() const = 0;

193 
vœtu®
 
pushD•thM‘aD©a
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
 ) = 0;

194 
vœtu®
 
pushImageM‘aD©a
Ğ
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 ) = 0;

195 
vœtu®
 
boŞ
 
pİD•thM‘aD©a
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
 ) = 0;

196 
vœtu®
 
boŞ
 
pİImageM‘aD©a
Ğ
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 ) = 0;

198 
¥š
()

200 
isSpšCÚtšue
(è=ğ
Œue
)

202 
XnStus
 
¡©us
 = 
­´oxSyncG¿bb”
.
cÚ‹xt
.
Wa™AnyUpd©eAÎ
();

203 ifĞ
	g¡©us
 !ğ
XN_STATUS_OK
 )

208 
	g­´oxSyncG¿bb”
.
	gd•thG’”©Ü
.
G‘M‘aD©a
(
d•th
);

209 
	g­´oxSyncG¿bb”
.
	gimageG’”©Ü
.
G‘M‘aD©a
(
image
);

211 ifĞ
	gd•th
.
D©a
(è&& d•th.
IsD©aNew
() )

212 
pushD•thM‘aD©a
Ğ
d•th
 );

214 ifĞ
	gimage
.
D©a
(è&& image.
IsD©aNew
() )

215 
pushImageM‘aD©a
Ğ
image
 );

219 
vœtu®
 
boŞ
 
g¿b
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
,

220 
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

224 ifĞ!
	gisD•thFËd
 )

225 
	gisD•thFËd
 = 
pİD•thM‘aD©a
(
d•th
);

226 ifĞ!
	gisImageFËd
 )

227 
	gisImageFËd
 = 
pİImageM‘aD©a
(
image
);

229 ifĞ!
	gisD•thFËd
 || !
	gisImageFËd
 )

232 
	gtimeDiff
 = 1e-3 * 
¡d
::
abs
(
¡©ic_ÿ¡
<>(
d•th
.
Time¡amp
()è- stic_ÿ¡<>(
image
.Timestamp()));

234 ifĞ
	gtimeDiff
 <ğ
­´oxSyncG¿bb”
.
maxTimeDu¿tiÚ
 )

236 
d•thM‘aD©a
.
In™From
(
d•th
);

237 
	gimageM‘aD©a
.
In™From
(
image
);

238 
	gisD•thFËd
 = 
isImageFËd
 = 
çl£
;

239  
	gŒue
;

243 ifĞ
	gd•th
.
Time¡amp
(è< 
	gimage
.Timestamp() )

244 
	gisD•thFËd
 = 
çl£
;

246 
	gisImageFËd
 = 
çl£
;

250  
	gçl£
;

253 
	g´Ùeùed
:

254 
Aµroxim©eSyncG¿bb”
& 
­´oxSyncG¿bb”
;

255 
	gxn
::
D•thM‘aD©a
 
d•th
;

256 
	gxn
::
ImageM‘aD©a
 
image
;

257 
boŞ
 
	gisD•thFËd
;

258 
boŞ
 
	gisImageFËd
;

262 şas 
	cAµroxim©eSynchrÚiz”
: 
public
 
Aµroxim©eSynchrÚiz”Ba£


264 
public
:

265 
Aµroxim©eSynchrÚiz”
Ğ
Aµroxim©eSyncG¿bb”
& 
_­´oxSyncG¿bb”
 ) :

266 
Aµroxim©eSynchrÚiz”Ba£
(
_­´oxSyncG¿bb”
)

269 
vœtu®
 
boŞ
 
isSpšCÚtšue
() const

271 
maxBufãrSize
 = 
­´oxSyncG¿bb”
.
g‘MaxBufãrSize
();

272  (
	gmaxBufãrSize
 <ğ0è|| (
¡©ic_ÿ¡
<>(
d•thQueue
.
size
()è< 
maxBufãrSize
 &&

273 
¡©ic_ÿ¡
<>(
imageQueue
.
size
()è< 
maxBufãrSize
);

276 
vœtu®
 
šlše
 
pushD•thM‘aD©a
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
 )

278 
cv
::
PŒ
<
xn
::
D•thM‘aD©a
> 
d•thPŒ
 = cv::
makePŒ
<xn::DepthMetaData>();

279 
	gd•thPŒ
->
CİyFrom
(
d•thM‘aD©a
);

280 
	gd•thQueue
.
push
(
d•thPŒ
);

282 
vœtu®
 
šlše
 
pushImageM‘aD©a
Ğ
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

284 
cv
::
PŒ
<
xn
::
ImageM‘aD©a
> 
imagePŒ
 = cv::
makePŒ
<xn::ImageMetaData>();

285 
	gimagePŒ
->
CİyFrom
(
imageM‘aD©a
);

286 
	gimageQueue
.
push
(
imagePŒ
);

288 
vœtu®
 
šlše
 
boŞ
 
pİD•thM‘aD©a
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
 )

290 ifĞ
d•thQueue
.
em±y
() )

291  
çl£
;

293 
	gd•thM‘aD©a
.
CİyFrom
(*
d•thQueue
.
äÚt
());

294 
	gd•thQueue
.
pİ
();

295  
	gŒue
;

297 
vœtu®
 
šlše
 
boŞ
 
pİImageM‘aD©a
Ğ
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

299 ifĞ
imageQueue
.
em±y
() )

300  
çl£
;

302 
	gimageM‘aD©a
.
CİyFrom
(*
imageQueue
.
äÚt
());

303 
	gimageQueue
.
pİ
();

304  
	gŒue
;

307 
	g´iv©e
:

308 
¡d
::
queue
<
cv
::
PŒ
<
xn
::
D•thM‘aD©a
> > 
d•thQueue
;

309 
	g¡d
::
queue
<
cv
::
PŒ
<
xn
::
ImageM‘aD©a
> > 
imageQueue
;

312 #ifdeà
HAVE_TBB


314 şas 
	cTBBAµroxim©eSynchrÚiz”
: 
public
 
Aµroxim©eSynchrÚiz”Ba£


316 
public
:

317 
TBBAµroxim©eSynchrÚiz”
Ğ
Aµroxim©eSyncG¿bb”
& 
_­´oxSyncG¿bb”
 ) :

318 
Aµroxim©eSynchrÚiz”Ba£
(
_­´oxSyncG¿bb”
)

320 
£tMaxBufãrSize
();

323 
£tMaxBufãrSize
()

325 
	gmaxBufãrSize
 = 
­´oxSyncG¿bb”
.
g‘MaxBufãrSize
();

326 ifĞ
	gmaxBufãrSize
 >= 0 )

328 
d•thQueue
.
£t_ÿ·c™y
Ğ
maxBufãrSize
 );

329 
	gimageQueue
.
£t_ÿ·c™y
Ğ
maxBufãrSize
 );

333 
vœtu®
 
šlše
 
boŞ
 
isSpšCÚtšue
(ècÚ¡ {  
	gŒue
; }

335 
vœtu®
 
šlše
 
pushD•thM‘aD©a
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
 )

337 
cv
::
PŒ
<
xn
::
D•thM‘aD©a
> 
d•thPŒ
 = cv::
makePŒ
<xn::D•thM‘aD©a>(), 
	gtmp
;

338 
	gd•thPŒ
->
CİyFrom
(
d•thM‘aD©a
);

340 
	gtbb
::
mu‹x
 
mtx
;

341 
	gmtx
.
lock
();

342 ifĞ
	gd•thQueue
.
Œy_push
(
d•thPŒ
è=ğ
çl£
 )

344 ifĞ
­´oxSyncG¿bb”
.
g‘IsCœşeBufãr
() )

346 
CV_As£¹
Ğ
d•thQueue
.
Œy_pİ
(
tmp
) );

347 
CV_As£¹
Ğ
d•thQueue
.
Œy_push
(
d•thPŒ
) );

350 
	gmtx
.
uÆock
();

353 
vœtu®
 
šlše
 
pushImageM‘aD©a
Ğ
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

355 
cv
::
PŒ
<
xn
::
ImageM‘aD©a
> 
imagePŒ
 = cv::
makePŒ
<xn::ImageM‘aD©a>(), 
	gtmp
;

356 
	gimagePŒ
->
CİyFrom
(
imageM‘aD©a
);

358 
	gtbb
::
mu‹x
 
mtx
;

359 
	gmtx
.
lock
();

360 ifĞ
	gimageQueue
.
Œy_push
(
imagePŒ
è=ğ
çl£
 )

362 ifĞ
­´oxSyncG¿bb”
.
g‘IsCœşeBufãr
() )

364 
CV_As£¹
Ğ
imageQueue
.
Œy_pİ
(
tmp
) );

365 
CV_As£¹
Ğ
imageQueue
.
Œy_push
(
imagePŒ
) );

368 
	gmtx
.
uÆock
();

371 
vœtu®
 
šlše
 
boŞ
 
pİD•thM‘aD©a
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
 )

373 
cv
::
PŒ
<
xn
::
D•thM‘aD©a
> 
d•thPŒ
;

374 
boŞ
 
	gisPİ
 = 
d•thQueue
.
Œy_pİ
(
d•thPŒ
);

375 ifĞ
	gisPİ
 )

376 
	gd•thM‘aD©a
.
CİyFrom
(*
d•thPŒ
);

377  
	gisPİ
;

379 
vœtu®
 
šlše
 
boŞ
 
pİImageM‘aD©a
Ğ
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

381 
cv
::
PŒ
<
xn
::
ImageM‘aD©a
> 
imagePŒ
;

382 
boŞ
 
	gisPİ
 = 
imageQueue
.
Œy_pİ
(
imagePŒ
);

383 ifĞ
	gisPİ
 )

384 
	gimageM‘aD©a
.
CİyFrom
(*
imagePŒ
);

385  
	gisPİ
;

388 
	g´iv©e
:

389 
tbb
::
cÚcu¼’t_bounded_queue
<
cv
::
PŒ
<
xn
::
D•thM‘aD©a
> > 
d•thQueue
;

390 
	gtbb
::
cÚcu¼’t_bounded_queue
<
cv
::
PŒ
<
xn
::
ImageM‘aD©a
> > 
imageQueue
;

393 şas 
	cTBBAµroxim©eSynchrÚiz”Task
: 
public
 
tbb
::
sk


395 
public
:

396 
TBBAµroxim©eSynchrÚiz”Task
Ğ
Aµroxim©eSyncG¿bb”
& 
­´oxSyncG¿bb”
 ) :

397 
synchrÚiz”
(
­´oxSyncG¿bb”
)

400 
£tMaxBufãrSize
()

402 
synchrÚiz”
.
£tMaxBufãrSize
();

405 
boŞ
 
g¿b
Ğ
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
,

406 
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
 )

408  
synchrÚiz”
.
g¿b
Ğ
d•thM‘aD©a
, 
imageM‘aD©a
 );

411 
	g´iv©e
:

412 
tbb
::
sk
* 
execu‹
()

414 
synchrÚiz”
.
¥š
();

417 
TBBAµroxim©eSynchrÚiz”
 
	gsynchrÚiz”
;

421 #ifdeà
HAVE_TBB


422 
TBBAµroxim©eSynchrÚiz”Task
* 
	gsk
;

424 
	gcv
::
PŒ
<
Aµroxim©eSynchrÚiz”
> 
sk
;

429 şas 
	cCvC­tu»_O³nNI
 : 
public
 
CvC­tu»


431 
public
:

432 ’um { 
DEVICE_DEFAULT
=0, 
	mDEVICE_MS_KINECT
=0, 
	mDEVICE_ASUS_XTION
=1, 
	mDEVICE_MAX
=1 };

434 cÚ¡ 
	gINVALID_PIXEL_VAL
 = 0;

435 cÚ¡ 
	gINVALID_COORDINATE_VAL
 = 0;

437 #ifdeà
HAVE_TBB


438 cÚ¡ 
	gDEFAULT_MAX_BUFFER_SIZE
 = 8;

440 cÚ¡ 
	gDEFAULT_MAX_BUFFER_SIZE
 = 2;

442 cÚ¡ 
	gDEFAULT_IS_CIRCLE_BUFFER
 = 0;

443 cÚ¡ 
	gDEFAULT_MAX_TIME_DURATION
 = 20;

445 
CvC­tu»_O³nNI
(
šdex
=0);

446 
CvC­tu»_O³nNI
(cÚ¡ * 
f’ame
);

447 
	gvœtu®
 ~
CvC­tu»_O³nNI
();

449 
vœtu®
 
	$g‘Prİ”ty
(
´İIdx
) const;

450 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(
´obIdx
, 
´İV®
);

451 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

452 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
(
ouutTy³
);

454 
boŞ
 
	$isO³Ãd
() const;

456 
´Ùeùed
:

457 
	sOuutM­


459 
public
:

460 
cv
::
M©
 
m©
;

461 
I¶Image
* 
	`g‘I¶ImagePŒ
();

462 
´iv©e
:

463 
I¶Image
 
lH—d”
;

464 
	}
};

466 cÚ¡ 
	gouutM­sTy³sCouÁ
 = 7;

468 
XnM­OuutMode
 
deçuÉM­OuutMode
();

470 
I¶Image
* 
»Œ›veD•thM­
();

471 
I¶Image
* 
»Œ›vePoštCloudM­
();

472 
I¶Image
* 
»Œ›veDi¥¬™yM­
();

473 
I¶Image
* 
»Œ›veDi¥¬™yM­_32F
();

474 
I¶Image
* 
»Œ›veV®idD•thMask
();

475 
I¶Image
* 
»Œ›veBGRImage
();

476 
I¶Image
* 
»Œ›veG¿yImage
();

478 
boŞ
 
»adCam”asP¬ams
();

480 
	$g‘D•thG’”©ÜPrİ”ty
(
´İIdx
) const;

481 
boŞ
 
	`£tD•thG’”©ÜPrİ”ty
(
´İIdx
, 
´İV®
);

482 
	$g‘ImageG’”©ÜPrİ”ty
(
´İIdx
) const;

483 
boŞ
 
	`£tImageG’”©ÜPrİ”ty
(
´İIdx
, 
´İV®
);

484 
	$g‘CommÚPrİ”ty
(
´İIdx
) const;

485 
boŞ
 
	`£tCommÚPrİ”ty
(
´İIdx
, 
´İV®
);

488 
xn
::
CÚ‹xt
 
cÚ‹xt
;

489 
boŞ
 
isCÚ‹xtO³Ãd
;

491 
xn
::
ProduùiÚNode
 
´oduùiÚNode
;

494 
xn
::
D•thG’”©Ü
 
d•thG’”©Ü
;

495 
xn
::
D•thM‘aD©a
 
d•thM‘aD©a
;

497 
xn
::
ImageG’”©Ü
 
imageG’”©Ü
;

498 
xn
::
ImageM‘aD©a
 
imageM‘aD©a
;

500 
maxBufãrSize
, 
maxTimeDu¿tiÚ
;

501 
boŞ
 
isCœşeBufãr
;

502 
cv
::
PŒ
<
Aµroxim©eSyncG¿bb”
> 
­´oxSyncG¿bb”
;

507 
XnDoubË
 
ba£lše
;

509 
XnUIÁ64
 
d•thFoÿlL’gth_VGA
;

512 
XnUIÁ64
 
shadowV®ue
;

514 
XnUIÁ64
 
noSam¶eV®ue
;

516 
¡d
::
veùÜ
<
OuutM­
> 
ouutM­s
;

517 
	}
};

519 
I¶Image
* 
	gCvC­tu»_O³nNI
::
OuutM­
::
	$g‘I¶ImagePŒ
()

521 ifĞ
m©
.
	`em±y
() )

524 
lH—d”
 = 
	`I¶Image
(
m©
);

525  &
lH—d”
;

526 
	}
}

528 
boŞ
 
	gCvC­tu»_O³nNI
::
	$isO³Ãd
() const

530  
isCÚ‹xtO³Ãd
;

531 
	}
}

533 
XnM­OuutMode
 
	gCvC­tu»_O³nNI
::
	$deçuÉM­OuutMode
()

535 
XnM­OuutMode
 
mode
;

536 
mode
.
nXRes
 = 
XN_VGA_X_RES
;

537 
mode
.
nYRes
 = 
XN_VGA_Y_RES
;

538 
mode
.
nFPS
 = 30;

539  
mode
;

540 
	}
}

542 
	gCvC­tu»_O³nNI
::
	$CvC­tu»_O³nNI
Ğ
šdex
 )

544 
deviûTy³
 = 
DEVICE_DEFAULT
;

545 
XnStus
 
¡©us
;

547 
isCÚ‹xtO³Ãd
 = 
çl£
;

548 
maxBufãrSize
 = 
DEFAULT_MAX_BUFFER_SIZE
;

549 
isCœşeBufãr
 = 
DEFAULT_IS_CIRCLE_BUFFER
;

550 
maxTimeDu¿tiÚ
 = 
DEFAULT_MAX_TIME_DURATION
;

552 ifĞ
šdex
 >= 10 )

554 
deviûTy³
 = 
šdex
 / 10;

555 
šdex
 %= 10;

558 ifĞ
deviûTy³
 > 
DEVICE_MAX
 )

562 
¡©us
 = 
cÚ‹xt
.
	`In™
();

563 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

565 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØš™ŸlizthcÚ‹xt: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

570 
xn
::
NodeInfoLi¡
 
deviûsLi¡
;

571 
¡©us
 = 
cÚ‹xt
.
	`Enum”©eProduùiÚT»es
Ğ
XN_NODE_TYPE_DEVICE
, 
NULL
, 
deviûsLi¡
, 0 );

572 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

574 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØ’um”©´oduùiÚ»es: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

579 
xn
::
NodeInfoLi¡
::
I‹¿tÜ
 
™
 = 
deviûsLi¡
.
	`Begš
();

580  
i
 = 0; i < 
šdex
 && 
™
!=
deviûsLi¡
.
	`End
(); ++i ) it++;

581 iàĞ
™
 =ğ
deviûsLi¡
.
	`End
() )

583 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : Faed deviû w™h index %d\n", 
šdex
);

587 
xn
::
NodeInfo
 
deviûNode
 = *
™
;

588 
¡©us
 = 
cÚ‹xt
.
	`C»©eProduùiÚT»e
Ğ
deviûNode
, 
´oduùiÚNode
 );

589 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

591 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØü—‹…roduùiÚ»e: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

595 
xn
::
SütNode
 
sütNode
;

596 
¡©us
 = 
cÚ‹xt
.
	`RunXmlSüt
Ğ
XMLCÚfig
.
	`c_¡r
(), 
sütNode
 );

597 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

599 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØruÀxmÈsüt: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

605 
xn
::
NodeInfoLi¡
 
d•thLi¡
;

606 
¡©us
 = 
cÚ‹xt
.
	`Enum”©eExi¡šgNodes
Ğ
d•thLi¡
, 
XN_NODE_TYPE_DEPTH
 );

607 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

609 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØ’um”©d•th g’”©Üs: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

612 ifĞ
d•thLi¡
.
	`IsEm±y
() )

614 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::CvCapture_OpenNI : The device doesn't have depth generator. Such devices‡ren't supported‚ow.\n");

617 
¡©us
 = 
d•thG’”©Ü
.
	`C»©e
Ğ
cÚ‹xt
 );

618 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

620 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØü—‹ d•th g’”©Ü: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

625 
xn
::
NodeInfoLi¡
 
imageLi¡
;

626 
¡©us
 = 
cÚ‹xt
.
	`Enum”©eExi¡šgNodes
Ğ
imageLi¡
, 
XN_NODE_TYPE_IMAGE
 );

627 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

629 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØ’um”©imagg’”©Üs: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

633 ifĞ!
imageLi¡
.
	`IsEm±y
() )

635 
¡©us
 = 
imageG’”©Ü
.
	`C»©e
Ğ
cÚ‹xt
 );

636 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

638 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØü—‹ imagg’”©Ü: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

644 ifĞ
d•thG’”©Ü
.
	`IsV®id
() )

646 
	`CV_DbgAs£¹
Ğ
d•thG’”©Ü
.
	`S‘M­OuutMode
(
	`deçuÉM­OuutMode
()è=ğ
XN_STATUS_OK
 );

648 ifĞ
imageG’”©Ü
.
	`IsV®id
() )

650 
	`CV_DbgAs£¹
Ğ
imageG’”©Ü
.
	`S‘M­OuutMode
(
	`deçuÉM­OuutMode
()è=ğ
XN_STATUS_OK
 );

653 ifĞ
deviûTy³
 =ğ
DEVICE_ASUS_XTION
 )

656 
imageG’”©Ü
.
	`S‘IÁPrİ”ty
("InputFormat", 1 );

657 
imageG’”©Ü
.
	`S‘Pix–FÜm©
(
XN_PIXEL_FORMAT_RGB24
);

658 
d•thG’”©Ü
.
	`S‘IÁPrİ”ty
("RegistrationType", 1 );

662 
¡©us
 = 
cÚ‹xt
.
	`S¹G’”©šgAÎ
();

663 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

665 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØ¡¬ˆg’”©šg O³nNI d©a: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

669 ifĞ!
	`»adCam”asP¬ams
() )

671 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::CvCapture_OpenNI : Could‚ot„ead cameras…arameters\n");

675 
ouutM­s
.
	`»size
Ğ
ouutM­sTy³sCouÁ
 );

677 
isCÚ‹xtO³Ãd
 = 
Œue
;

679 
	`£tPrİ”ty
(
CV_CAP_PROP_OPENNI_REGISTRATION
, 1.0);

680 
	}
}

682 
	gCvC­tu»_O³nNI
::
	$CvC­tu»_O³nNI
(cÚ¡ * 
f’ame
)

684 
XnStus
 
¡©us
;

686 
isCÚ‹xtO³Ãd
 = 
çl£
;

687 
maxBufãrSize
 = 
DEFAULT_MAX_BUFFER_SIZE
;

688 
isCœşeBufãr
 = 
DEFAULT_IS_CIRCLE_BUFFER
;

689 
maxTimeDu¿tiÚ
 = 
DEFAULT_MAX_TIME_DURATION
;

692 
¡©us
 = 
cÚ‹xt
.
	`In™
();

693 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

695 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØš™ŸlizthcÚ‹xt: %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

700 
¡©us
 = 
cÚ‹xt
.
	`O³nFeRecÜdšg
Ğ
f’ame
, 
´oduùiÚNode
 );

701 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

703 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::CvC­tu»_O³nNI : FaedØİ’ iÅuˆf(%s): %s\n", 
f’ame
, 
	`xnG‘StusSŒšg
(
¡©us
));

707 
cÚ‹xt
.
	`FšdExi¡šgNode
Ğ
XN_NODE_TYPE_DEPTH
, 
d•thG’”©Ü
 );

708 
cÚ‹xt
.
	`FšdExi¡šgNode
Ğ
XN_NODE_TYPE_IMAGE
, 
imageG’”©Ü
 );

710 ifĞ!
	`»adCam”asP¬ams
() )

712 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::CvCapture_OpenNI : Could‚ot„ead cameras…arameters\n");

716 
ouutM­s
.
	`»size
Ğ
ouutM­sTy³sCouÁ
 );

718 
isCÚ‹xtO³Ãd
 = 
Œue
;

719 
	}
}

721 
	gCvC­tu»_O³nNI
::~
	$CvC­tu»_O³nNI
()

723 
cÚ‹xt
.
	`StİG’”©šgAÎ
();

724 
cÚ‹xt
.
	`R–—£
();

725 
	}
}

727 
boŞ
 
	gCvC­tu»_O³nNI
::
	$»adCam”asP¬ams
()

729 
XnDoubË
 
pix–Size
 = 0;

730 ifĞ
d•thG’”©Ü
.
	`G‘R—lPrİ”ty
Ğ"ZPPS", 
pix–Size
 ) !ğ
XN_STATUS_OK
 )

732 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::readCamerasParams : Could‚ot„ead…ixel size!\n");

733  
çl£
;

737 
pix–Size
 *= 2.0;

740 
XnUIÁ64
 
z”oPÏnDi¡ªû
;

741 ifĞ
d•thG’”©Ü
.
	`G‘IÁPrİ”ty
Ğ"ZPD", 
z”oPÏnDi¡ªû
 ) !ğ
XN_STATUS_OK
 )

743 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::readCamerasParams : Could‚ot„ead virtual…lane distance!\n");

744  
çl£
;

747 ifĞ
d•thG’”©Ü
.
	`G‘R—lPrİ”ty
Ğ"LDDIS", 
ba£lše
 ) !ğ
XN_STATUS_OK
 )

749 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::readCamerasParams : Could‚ot„ead base†ine!\n");

750  
çl£
;

754 
ba£lše
 *= 10;

757 
d•thFoÿlL’gth_VGA
 = (
XnUIÁ64
)(()
z”oPÏnDi¡ªû
 / ()
pix–Size
);

759 ifĞ
d•thG’”©Ü
.
	`G‘IÁPrİ”ty
Ğ"ShadowV®ue", 
shadowV®ue
 ) !ğ
XN_STATUS_OK
 )

761 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::readCamerasParams : Could‚ot„ead…roperty \"ShadowValue\"!\n");

762  
çl£
;

765 ifĞ
d•thG’”©Ü
.
	`G‘IÁPrİ”ty
("NoSam¶eV®ue", 
noSam¶eV®ue
 ) !ğ
XN_STATUS_OK
 )

767 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::readCamerasParams : Could‚ot„ead…roperty \"NoSampleValue\"!\n");

768  
çl£
;

771  
Œue
;

772 
	}
}

774 
	gCvC­tu»_O³nNI
::
	$g‘Prİ”ty
Ğ
´İIdx
 ) const

776 
´İV®ue
 = 0;

778 ifĞ
	`isO³Ãd
() )

780 
pu»PrİIdx
 = 
´İIdx
 & ~
CV_CAP_OPENNI_GENERATORS_MASK
;

782 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_IMAGE_GENERATOR
 )

784 
´İV®ue
 = 
	`g‘ImageG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
 );

786 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_DEPTH_GENERATOR
 )

788 
´İV®ue
 = 
	`g‘D•thG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
 );

792 
´İV®ue
 = 
	`g‘CommÚPrİ”ty
Ğ
pu»PrİIdx
 );

796  
´İV®ue
;

797 
	}
}

799 
boŞ
 
	gCvC­tu»_O³nNI
::
	$£tPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

801 
boŞ
 
isS‘
 = 
çl£
;

802 ifĞ
	`isO³Ãd
() )

804 
pu»PrİIdx
 = 
´İIdx
 & ~
CV_CAP_OPENNI_GENERATORS_MASK
;

806 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_IMAGE_GENERATOR
 )

808 
isS‘
 = 
	`£tImageG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
, 
´İV®ue
 );

810 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_DEPTH_GENERATOR
 )

812 
isS‘
 = 
	`£tD•thG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
, 
´İV®ue
 );

816 
isS‘
 = 
	`£tCommÚPrİ”ty
Ğ
pu»PrİIdx
, 
´İV®ue
 );

820  
isS‘
;

821 
	}
}

823 
	gCvC­tu»_O³nNI
::
	$g‘CommÚPrİ”ty
Ğ
´İIdx
 ) const

825 
´İV®ue
 = 0;

827  
´İIdx
 )

834 
CV_CAP_PROP_OPENNI_GENERATOR_PRESENT
 :

835 
CV_CAP_PROP_FRAME_WIDTH
 :

836 
CV_CAP_PROP_FRAME_HEIGHT
 :

837 
CV_CAP_PROP_FPS
 :

838 
CV_CAP_PROP_OPENNI_FRAME_MAX_DEPTH
 :

839 
CV_CAP_PROP_OPENNI_BASELINE
 :

840 
CV_CAP_PROP_OPENNI_FOCAL_LENGTH
 :

841 
CV_CAP_PROP_OPENNI_REGISTRATION
 :

842 
´İV®ue
 = 
	`g‘D•thG’”©ÜPrİ”ty
Ğ
´İIdx
 );

844 
CV_CAP_PROP_OPENNI_APPROX_FRAME_SYNC
 :

845 
´İV®ue
 = !
­´oxSyncG¿bb”
.
	`em±y
(è&&‡µroxSyncG¿bb”->
	`isRun
() ? 1. : 0.;

847 
CV_CAP_PROP_OPENNI_MAX_BUFFER_SIZE
 :

848 
´İV®ue
 = 
maxBufãrSize
;

850 
CV_CAP_PROP_OPENNI_CIRCLE_BUFFER
 :

851 
´İV®ue
 = 
isCœşeBufãr
 ? 1. : 0.;

853 
CV_CAP_PROP_OPENNI_MAX_TIME_DURATION
 :

854 
´İV®ue
 = 
maxTimeDu¿tiÚ
;

857 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Such…¬am‘” (´İIdx=%dèi¢'ˆsuµÜ‹d fÜ g‘tšg.\n", 
´İIdx
) );

860  
´İV®ue
;

861 
	}
}

863 
boŞ
 
	gCvC­tu»_O³nNI
::
	$£tCommÚPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

865 
boŞ
 
isS‘
 = 
çl£
;

867  
´İIdx
 )

871 
CV_CAP_PROP_OPENNI_REGISTRATION
:

872 
isS‘
 = 
	`£tD•thG’”©ÜPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 );

874 
CV_CAP_PROP_OPENNI_APPROX_FRAME_SYNC
 :

875 ifĞ
´İV®ue
 && 
d•thG’”©Ü
.
	`IsV®id
(è&& 
imageG’”©Ü
.IsValid() )

878 ifĞ
­´oxSyncG¿bb”
.
	`em±y
() )

880 
­´oxSyncG¿bb”
.
	`»£t
(
Ãw
 
	`Aµroxim©eSyncG¿bb”
Ğ
cÚ‹xt
, 
d•thG’”©Ü
, 
imageG’”©Ü
, 
maxBufãrSize
, 
isCœşeBufãr
, 
maxTimeDu¿tiÚ
 ));

884 
­´oxSyncG¿bb”
->
	`fšish
();

887 
­´oxSyncG¿bb”
->
	`£tMaxBufãrSize
(
maxBufãrSize
);

888 
­´oxSyncG¿bb”
->
	`£tIsCœşeBufãr
(
isCœşeBufãr
);

889 
­´oxSyncG¿bb”
->
	`£tMaxTimeDu¿tiÚ
(
maxTimeDu¿tiÚ
);

891 
­´oxSyncG¿bb”
->
	`¡¬t
();

893 ifĞ!
´İV®ue
 && !
­´oxSyncG¿bb”
.
	`em±y
() )

896 
­´oxSyncG¿bb”
->
	`fšish
();

899 
CV_CAP_PROP_OPENNI_MAX_BUFFER_SIZE
 :

900 
maxBufãrSize
 = 
	`cvRound
(
´İV®ue
);

901 ifĞ!
­´oxSyncG¿bb”
.
	`em±y
() )

902 
­´oxSyncG¿bb”
->
	`£tMaxBufãrSize
(
maxBufãrSize
);

904 
CV_CAP_PROP_OPENNI_CIRCLE_BUFFER
 :

905 ifĞ!
­´oxSyncG¿bb”
.
	`em±y
() )

906 
­´oxSyncG¿bb”
->
	`£tIsCœşeBufãr
(
isCœşeBufãr
);

908 
CV_CAP_PROP_OPENNI_MAX_TIME_DURATION
 :

909 
maxTimeDu¿tiÚ
 = 
	`cvRound
(
´İV®ue
);

910 ifĞ!
­´oxSyncG¿bb”
.
	`em±y
() )

911 
­´oxSyncG¿bb”
->
	`£tMaxTimeDu¿tiÚ
(
maxTimeDu¿tiÚ
);

914 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Such…¬am‘” (´İIdx=%dèi¢'ˆsuµÜ‹d fÜ s‘tšg.\n", 
´İIdx
) );

917  
isS‘
;

918 
	}
}

920 
	gCvC­tu»_O³nNI
::
	$g‘D•thG’”©ÜPrİ”ty
Ğ
´İIdx
 ) const

922 
´İV®ue
 = 0;

923 ifĞ!
d•thG’”©Ü
.
	`IsV®id
() )

924  
´İV®ue
;

926 
XnM­OuutMode
 
mode
;

928  
´İIdx
 )

930 
CV_CAP_PROP_OPENNI_GENERATOR_PRESENT
 :

931 
	`CV_DbgAs£¹
Ğ
d•thG’”©Ü
.
	`IsV®id
() );

932 
´İV®ue
 = 1.;

934 
CV_CAP_PROP_FRAME_WIDTH
 :

935 ifĞ
d•thG’”©Ü
.
	`G‘M­OuutMode
(
mode
è=ğ
XN_STATUS_OK
 )

936 
´İV®ue
 = 
mode
.
nXRes
;

938 
CV_CAP_PROP_FRAME_HEIGHT
 :

939 ifĞ
d•thG’”©Ü
.
	`G‘M­OuutMode
(
mode
è=ğ
XN_STATUS_OK
 )

940 
´İV®ue
 = 
mode
.
nYRes
;

942 
CV_CAP_PROP_FPS
 :

943 ifĞ
d•thG’”©Ü
.
	`G‘M­OuutMode
(
mode
è=ğ
XN_STATUS_OK
 )

944 
´İV®ue
 = 
mode
.
nFPS
;

946 
CV_CAP_PROP_OPENNI_FRAME_MAX_DEPTH
 :

947 
´İV®ue
 = 
d•thG’”©Ü
.
	`G‘DeviûMaxD•th
();

949 
CV_CAP_PROP_OPENNI_BASELINE
 :

950 
´İV®ue
 = 
ba£lše
;

952 
CV_CAP_PROP_OPENNI_FOCAL_LENGTH
 :

953 
´İV®ue
 = ()
d•thFoÿlL’gth_VGA
;

955 
CV_CAP_PROP_OPENNI_REGISTRATION
 :

956 
´İV®ue
 = 
d•thG’”©Ü
.
	`G‘AÉ”ÇtiveV›wPoštC­
().
	`IsV›wPoštAs
(
cÚ¡_ÿ¡
<
CvC­tu»_O³nNI
 *>(
this
)->
imageG’”©Ü
) ? 1.0 : 0.0;

958 
CV_CAP_PROP_POS_MSEC
 :

959 
´İV®ue
 = ()
d•thG’”©Ü
.
	`G‘Time¡amp
();

961 
CV_CAP_PROP_POS_FRAMES
 :

962 
´İV®ue
 = 
d•thG’”©Ü
.
	`G‘F¿meID
();

965 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("D•th g’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ g‘tšg.\n", 
´İIdx
) );

968  
´İV®ue
;

969 
	}
}

971 
boŞ
 
	gCvC­tu»_O³nNI
::
	$£tD•thG’”©ÜPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

973 
boŞ
 
isS‘
 = 
çl£
;

975 
	`CV_As£¹
Ğ
d•thG’”©Ü
.
	`IsV®id
() );

977  
´İIdx
 )

979 
CV_CAP_PROP_OPENNI_REGISTRATION
:

981 ifĞ
´İV®ue
 != 0.0 )

985 ifĞ
imageG’”©Ü
.
	`IsV®id
() )

987 ifĞ!
d•thG’”©Ü
.
	`G‘AÉ”ÇtiveV›wPoštC­
().
	`IsV›wPoštAs
(
imageG’”©Ü
) )

989 ifĞ
d•thG’”©Ü
.
	`G‘AÉ”ÇtiveV›wPoštC­
().
	`IsV›wPoštSuµÜ‹d
(
imageG’”©Ü
) )

991 
XnStus
 
¡©us
 = 
d•thG’”©Ü
.
	`G‘AÉ”ÇtiveV›wPoštC­
().
	`S‘V›wPošt
(
imageG’”©Ü
);

992 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

993 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::£tD•thG’”©ÜPrİ”ty : %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

995 
isS‘
 = 
Œue
;

998 
	`årštf
(
¡d”r
, "CvCapture_OpenNI::setDepthGeneratorProperty : Unsupported viewpoint.\n");

1001 
isS‘
 = 
Œue
;

1006 
XnStus
 
¡©us
 = 
d•thG’”©Ü
.
	`G‘AÉ”ÇtiveV›wPoštC­
().
	`Re£tV›wPošt
();

1007 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

1008 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::£tD•thG’”©ÜPrİ”ty : %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

1010 
isS‘
 = 
Œue
;

1015 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("D•th g’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ s‘tšg.\n", 
´İIdx
) );

1018  
isS‘
;

1019 
	}
}

1021 
	gCvC­tu»_O³nNI
::
	$g‘ImageG’”©ÜPrİ”ty
Ğ
´İIdx
 ) const

1023 
´İV®ue
 = 0.;

1024 ifĞ!
imageG’”©Ü
.
	`IsV®id
() )

1025  
´İV®ue
;

1027 
XnM­OuutMode
 
mode
;

1028  
´İIdx
 )

1030 
CV_CAP_PROP_OPENNI_GENERATOR_PRESENT
 :

1031 
	`CV_DbgAs£¹
Ğ
imageG’”©Ü
.
	`IsV®id
() );

1032 
´İV®ue
 = 1.;

1034 
CV_CAP_PROP_FRAME_WIDTH
 :

1035 ifĞ
imageG’”©Ü
.
	`G‘M­OuutMode
(
mode
è=ğ
XN_STATUS_OK
 )

1036 
´İV®ue
 = 
mode
.
nXRes
;

1038 
CV_CAP_PROP_FRAME_HEIGHT
 :

1039 ifĞ
imageG’”©Ü
.
	`G‘M­OuutMode
(
mode
è=ğ
XN_STATUS_OK
 )

1040 
´İV®ue
 = 
mode
.
nYRes
;

1042 
CV_CAP_PROP_FPS
 :

1043 ifĞ
imageG’”©Ü
.
	`G‘M­OuutMode
(
mode
è=ğ
XN_STATUS_OK
 )

1044 
´İV®ue
 = 
mode
.
nFPS
;

1046 
CV_CAP_PROP_POS_MSEC
 :

1047 
´İV®ue
 = ()
imageG’”©Ü
.
	`G‘Time¡amp
();

1049 
CV_CAP_PROP_POS_FRAMES
 :

1050 
´İV®ue
 = ()
imageG’”©Ü
.
	`G‘F¿meID
();

1053 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Imagg’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ g‘tšg.\n", 
´İIdx
) );

1056  
´İV®ue
;

1057 
	}
}

1059 
boŞ
 
	gCvC­tu»_O³nNI
::
	$£tImageG’”©ÜPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

1061 
boŞ
 
isS‘
 = 
çl£
;

1062 ifĞ!
imageG’”©Ü
.
	`IsV®id
() )

1063  
isS‘
;

1065  
´İIdx
 )

1067 
CV_CAP_PROP_OPENNI_OUTPUT_MODE
 :

1069 
XnM­OuutMode
 
mode
;

1071  
	`cvRound
(
´İV®ue
) )

1073 
CV_CAP_OPENNI_VGA_30HZ
 :

1074 
mode
.
nXRes
 = 
XN_VGA_X_RES
;

1075 
mode
.
nYRes
 = 
XN_VGA_Y_RES
;

1076 
mode
.
nFPS
 = 30;

1078 
CV_CAP_OPENNI_SXGA_15HZ
 :

1079 
mode
.
nXRes
 = 
XN_SXGA_X_RES
;

1080 
mode
.
nYRes
 = 
XN_SXGA_Y_RES
;

1081 
mode
.
nFPS
 = 15;

1083 
CV_CAP_OPENNI_SXGA_30HZ
 :

1084 
mode
.
nXRes
 = 
XN_SXGA_X_RES
;

1085 
mode
.
nYRes
 = 
XN_SXGA_Y_RES
;

1086 
mode
.
nFPS
 = 30;

1088 
CV_CAP_OPENNI_QVGA_30HZ
 :

1089 
mode
.
nXRes
 = 
XN_QVGA_X_RES
;

1090 
mode
.
nYRes
 = 
XN_QVGA_Y_RES
;

1091 
mode
.
nFPS
 = 30;

1093 
CV_CAP_OPENNI_QVGA_60HZ
 :

1094 
mode
.
nXRes
 = 
XN_QVGA_X_RES
;

1095 
mode
.
nYRes
 = 
XN_QVGA_Y_RES
;

1096 
mode
.
nFPS
 = 60;

1099 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, "Unsupported image generator output mode.\n");

1102 
XnStus
 
¡©us
 = 
imageG’”©Ü
.
	`S‘M­OuutMode
Ğ
mode
 );

1103 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

1104 
	`årštf
(
¡d”r
, "CvC­tu»_O³nNI::£tImageG’”©ÜPrİ”ty : %s\n", 
	`xnG‘StusSŒšg
(
¡©us
));

1106 
isS‘
 = 
Œue
;

1110 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Imagg’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ s‘tšg.\n", 
´İIdx
) );

1113  
isS‘
;

1114 
	}
}

1116 
boŞ
 
	gCvC­tu»_O³nNI
::
	$g¿bF¿me
()

1118 ifĞ!
	`isO³Ãd
() )

1119  
çl£
;

1121 
boŞ
 
isG¿bbed
 = 
çl£
;

1122 ifĞ!
­´oxSyncG¿bb”
.
	`em±y
(è&&‡µroxSyncG¿bb”->
	`isRun
() )

1124 
isG¿bbed
 = 
­´oxSyncG¿bb”
->
	`g¿b
Ğ
d•thM‘aD©a
, 
imageM‘aD©a
 );

1128 
XnStus
 
¡©us
 = 
cÚ‹xt
.
	`Wa™AndUpd©eAÎ
();

1129 ifĞ
¡©us
 !ğ
XN_STATUS_OK
 )

1130  
çl£
;

1132 ifĞ
d•thG’”©Ü
.
	`IsV®id
() )

1133 
d•thG’”©Ü
.
	`G‘M‘aD©a
Ğ
d•thM‘aD©a
 );

1134 ifĞ
imageG’”©Ü
.
	`IsV®id
() )

1135 
imageG’”©Ü
.
	`G‘M‘aD©a
Ğ
imageM‘aD©a
 );

1136 
isG¿bbed
 = 
Œue
;

1139  
isG¿bbed
;

1140 
	}
}

1142 
šlše
 
g‘D•thM­FromM‘aD©a
ĞcÚ¡ 
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
, 
cv
::
M©
& 
d•thM­
, 
XnUIÁ64
 
noSam¶eV®ue
, XnUIÁ64 
shadowV®ue
 )

1144 
	gcŞs
 = 
d•thM‘aD©a
.
XRes
();

1145 
	grows
 = 
d•thM‘aD©a
.
YRes
();

1147 
	gd•thM­
.
ü—‹
Ğ
rows
, 
cŞs
, 
CV_16UC1
 );

1149 cÚ¡ 
XnD•thPix–
* 
	gpD•thM­
 = 
d•thM‘aD©a
.
D©a
();

1152 
memıy
Ğ
d•thM­
.
d©a
, 
pD•thM­
, 
cŞs
*
rows
*(
XnD•thPix–
) );

1154 
	gcv
::
M©
 
badMask
 = (
d•thM­
 =ğ()
noSam¶eV®ue
è| (d•thM­ =ğ()
shadowV®ue
) | (depthMap == 0);

1157 
	gd•thM­
.
£tTo
Ğ
cv
::
SÿÏr
::
®l
Ğ
CvC­tu»_O³nNI
::
INVALID_PIXEL_VAL
 ), 
badMask
 );

1160 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veD•thM­
()

1162 ifĞ!
d•thM‘aD©a
.
	`D©a
() )

1165 
	`g‘D•thM­FromM‘aD©a
Ğ
d•thM‘aD©a
, 
ouutM­s
[
CV_CAP_OPENNI_DEPTH_MAP
].
m©
, 
noSam¶eV®ue
, 
shadowV®ue
 );

1167  
ouutM­s
[
CV_CAP_OPENNI_DEPTH_MAP
].
	`g‘I¶ImagePŒ
();

1168 
	}
}

1170 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›vePoštCloudM­
()

1172 ifĞ!
d•thM‘aD©a
.
	`D©a
() )

1175 
cv
::
M©
 
d•th
;

1176 
	`g‘D•thM­FromM‘aD©a
Ğ
d•thM‘aD©a
, 
d•th
, 
noSam¶eV®ue
, 
shadowV®ue
 );

1178 cÚ¡ 
badPošt
 = 
INVALID_PIXEL_VAL
;

1179 cÚ¡ 
badCoÜd
 = 
INVALID_COORDINATE_VAL
;

1180 
cŞs
 = 
d•thM‘aD©a
.
	`XRes
(), 
rows
 = d•thM‘aD©a.
	`YRes
();

1181 
cv
::
M©
 
	`poštCloud_XYZ
Ğ
rows
, 
cŞs
, 
CV_32FC3
, cv::
SÿÏr
::
	`®l
(
badPošt
) );

1183 
¡d
::
veùÜ
<
XnPošt3D
> 
	`´oj
(
cŞs
*
rows
);

1184 
¡d
::
veùÜ
<
XnPošt3D
> 
	`»®
(
cŞs
*
rows
);

1185  
y
 = 0; y < 
rows
; y++ )

1187  
x
 = 0; x < 
cŞs
; x++ )

1189 
šd
 = 
y
*
cŞs
+
x
;

1190 
´oj
[
šd
].
X
 = ()
x
;

1191 
´oj
[
šd
].
Y
 = ()
y
;

1192 
´oj
[
šd
].
Z
 = 
d•th
.
©
<>(
y
, 
x
);

1195 
d•thG’”©Ü
.
	`CÚv”tProjeùiveToR—lWÜld
(
cŞs
*
rows
, &
´oj
.
	`äÚt
(), &
»®
.front());

1197  
y
 = 0; y < 
rows
; y++ )

1199  
x
 = 0; x < 
cŞs
; x++ )

1202 ifĞ
d•th
.
©
<>(
y
, 
x
è=ğ
badPošt
 )

1203 
poštCloud_XYZ
.
©
<
cv
::
Pošt3f
>(
y
,
x
èğcv::
	`Pošt3f
Ğ
badCoÜd
, badCoord, badCoord );

1206 
šd
 = 
y
*
cŞs
+
x
;

1207 
poštCloud_XYZ
.
©
<
cv
::
Pošt3f
>(
y
,
x
èğcv::
	`Pošt3f
Ğ
»®
[
šd
].
X
*0.001f,„—l[šd].
Y
*0.001f,„—l[šd].
Z
*0.001f);

1212 
ouutM­s
[
CV_CAP_OPENNI_POINT_CLOUD_MAP
].
m©
 = 
poštCloud_XYZ
;

1214  
ouutM­s
[
CV_CAP_OPENNI_POINT_CLOUD_MAP
].
	`g‘I¶ImagePŒ
();

1215 
	}
}

1217 
compu‹Di¥¬™y_32F
ĞcÚ¡ 
xn
::
D•thM‘aD©a
& 
d•thM‘aD©a
, 
cv
::
M©
& 
di¥
, 
XnDoubË
 
ba£lše
, 
XnUIÁ64
 
F
,

1218 
XnUIÁ64
 
noSam¶eV®ue
, XnUIÁ64 
shadowV®ue
 )

1220 
	gcv
::
M©
 
d•th
;

1221 
g‘D•thM­FromM‘aD©a
Ğ
d•thM‘aD©a
, 
d•th
, 
noSam¶eV®ue
, 
shadowV®ue
 );

1222 
CV_As£¹
Ğ
d•th
.
ty³
(è=ğ
CV_16UC1
 );

1227 
	gmuÉ
 = ()(
ba£lše
 * 
F
 );

1229 
	gdi¥
.
ü—‹
Ğ
d•th
.
size
(), 
CV_32FC1
);

1230 
	gdi¥
 = 
cv
::
SÿÏr
::
®l
Ğ
CvC­tu»_O³nNI
::
INVALID_PIXEL_VAL
 );

1231  
	gy
 = 0; y < 
	gdi¥
.
	grows
; y++ )

1233  
	gx
 = 0; x < 
	gdi¥
.
	gcŞs
; x++ )

1235 
	gcurD•th
 = 
d•th
.
©
<>(
y
,
	gx
);

1236 ifĞ
	gcurD•th
 !ğ
CvC­tu»_O³nNI
::
INVALID_PIXEL_VAL
 )

1237 
di¥
.
©
<>(
y
,
	gx
èğ
muÉ
 / 
curD•th
;

1242 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veDi¥¬™yM­
()

1244 ifĞ!
d•thM‘aD©a
.
	`D©a
() )

1247 
cv
::
M©
 
di¥32
;

1248 
	`compu‹Di¥¬™y_32F
Ğ
d•thM‘aD©a
, 
di¥32
, 
ba£lše
, 
d•thFoÿlL’gth_VGA
, 
noSam¶eV®ue
, 
shadowV®ue
 );

1250 
di¥32
.
	`cÚv”tTo
Ğ
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP
].
m©
, 
CV_8UC1
 );

1252  
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP
].
	`g‘I¶ImagePŒ
();

1253 
	}
}

1255 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veDi¥¬™yM­_32F
()

1257 ifĞ!
d•thM‘aD©a
.
	`D©a
() )

1260 
	`compu‹Di¥¬™y_32F
Ğ
d•thM‘aD©a
, 
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP_32F
].
m©
, 
ba£lše
, 
d•thFoÿlL’gth_VGA
, 
noSam¶eV®ue
, 
shadowV®ue
 );

1262  
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP_32F
].
	`g‘I¶ImagePŒ
();

1263 
	}
}

1265 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veV®idD•thMask
()

1267 ifĞ!
d•thM‘aD©a
.
	`D©a
() )

1270 
cv
::
M©
 
d•th
;

1271 
	`g‘D•thM­FromM‘aD©a
Ğ
d•thM‘aD©a
, 
d•th
, 
noSam¶eV®ue
, 
shadowV®ue
 );

1273 
ouutM­s
[
CV_CAP_OPENNI_VALID_DEPTH_MASK
].
m©
 = 
d•th
 !ğ
CvC­tu»_O³nNI
::
INVALID_PIXEL_VAL
;

1275  
ouutM­s
[
CV_CAP_OPENNI_VALID_DEPTH_MASK
].
	`g‘I¶ImagePŒ
();

1276 
	}
}

1278 
šlše
 
g‘BGRImageFromM‘aD©a
ĞcÚ¡ 
xn
::
ImageM‘aD©a
& 
imageM‘aD©a
, 
cv
::
M©
& 
bgrImage
 )

1280 ifĞ
imageM‘aD©a
.
Pix–FÜm©
(è!ğ
XN_PIXEL_FORMAT_RGB24
 )

1281 
CV_E¼Ü
Ğ
CV_StsUnsuµÜ‹dFÜm©
, "Unsupported format of grabbed image\n" );

1283 
	gcv
::
M©
 
rgbImage
Ğ
imageM‘aD©a
.
YRes
(), imageM‘aD©a.
XRes
(), 
CV_8UC3
 );

1284 cÚ¡ 
XnRGB24Pix–
* 
	gpRgbImage
 = 
imageM‘aD©a
.
RGB24D©a
();

1287 
memıy
Ğ
rgbImage
.
d©a
, 
pRgbImage
,„gbImage.
tÙ®
()*(
XnRGB24Pix–
) );

1288 
	gcv
::
cvtCŞÜ
Ğ
rgbImage
, 
bgrImage
, 
CV_RGB2BGR
 );

1291 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veBGRImage
()

1293 ifĞ!
imageM‘aD©a
.
	`D©a
() )

1296 
	`g‘BGRImageFromM‘aD©a
Ğ
imageM‘aD©a
, 
ouutM­s
[
CV_CAP_OPENNI_BGR_IMAGE
].
m©
 );

1298  
ouutM­s
[
CV_CAP_OPENNI_BGR_IMAGE
].
	`g‘I¶ImagePŒ
();

1299 
	}
}

1301 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veG¿yImage
()

1303 ifĞ!
imageM‘aD©a
.
	`D©a
() )

1306 
	`CV_As£¹
Ğ
imageM‘aD©a
.
	`By‹sP”Pix–
() == 3 );

1308 
cv
::
M©
 
rgbImage
;

1309 
	`g‘BGRImageFromM‘aD©a
Ğ
imageM‘aD©a
, 
rgbImage
 );

1310 
cv
::
	`cvtCŞÜ
Ğ
rgbImage
, 
ouutM­s
[
CV_CAP_OPENNI_GRAY_IMAGE
].
m©
, 
CV_BGR2GRAY
 );

1312  
ouutM­s
[
CV_CAP_OPENNI_GRAY_IMAGE
].
	`g‘I¶ImagePŒ
();

1313 
	}
}

1315 
I¶Image
* 
	gCvC­tu»_O³nNI
::
	$»Œ›veF¿me
Ğ
ouutTy³
 )

1317 
I¶Image
* 
image
 = 0;

1318 
	`CV_As£¹
Ğ
ouutTy³
 < 
ouutM­sTy³sCouÁ
 && outputType >= 0);

1320 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_DEPTH_MAP
 )

1322 
image
 = 
	`»Œ›veD•thM­
();

1324 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_POINT_CLOUD_MAP
 )

1326 
image
 = 
	`»Œ›vePoštCloudM­
();

1328 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_DISPARITY_MAP
 )

1330 
image
 = 
	`»Œ›veDi¥¬™yM­
();

1332 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_DISPARITY_MAP_32F
 )

1334 
image
 = 
	`»Œ›veDi¥¬™yM­_32F
();

1336 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_VALID_DEPTH_MASK
 )

1338 
image
 = 
	`»Œ›veV®idD•thMask
();

1340 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_BGR_IMAGE
 )

1342 
image
 = 
	`»Œ›veBGRImage
();

1344 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_GRAY_IMAGE
 )

1346 
image
 = 
	`»Œ›veG¿yImage
();

1349  
image
;

1350 
	}
}

1353 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_O³nNI
Ğ
šdex
 )

1355 
CvC­tu»_O³nNI
* 
ÿ±u»
 = 
Ãw
 
	`CvC­tu»_O³nNI
Ğ
šdex
 );

1357 ifĞ
ÿ±u»
->
	`isO³Ãd
() )

1358  
ÿ±u»
;

1360 
d–‘e
 
ÿ±u»
;

1362 
	}
}

1364 
CvC­tu»
* 
	$cvC»©eFeC­tu»_O³nNI
ĞcÚ¡ * 
f’ame
 )

1366 
CvC­tu»_O³nNI
* 
ÿ±u»
 = 
Ãw
 
	`CvC­tu»_O³nNI
Ğ
f’ame
 );

1368 ifĞ
ÿ±u»
->
	`isO³Ãd
() )

1369  
ÿ±u»
;

1371 
d–‘e
 
ÿ±u»
;

1373 
	}
}

	@cap_openni2.cpp

41 
	~"´ecomp.hµ
"

42 
	~"İ’cv2/cÜe.hµ
"

43 
	~"İ’cv2/img´oc.hµ
"

45 #ifdeà
HAVE_OPENNI2


47 #ià
defšed
 
TBB_INTERFACE_VERSION
 && TBB_INTERFACE_VERSION < 5000

48 #undeà
HAVE_TBB


51 
	~<queue
>

53 #iâdeà
i386


54 
	#i386
 0

	)

56 #iâdeà
__¬m__


57 
	#__¬m__
 0

	)

59 #iâdeà
_ARC


60 
	#_ARC
 0

	)

62 #iâdeà
__APPLE__


63 
	#__APPLE__
 0

	)

66 
	#CV_STREAM_TIMEOUT
 2000

	)

68 
	#CV_DEPTH_STREAM
 0

	)

69 
	#CV_COLOR_STREAM
 1

	)

71 
	~"O³nNI.h
"

72 
	~"PS1080.h
"

75 şas 
	cCvC­tu»_O³nNI2
 : 
public
 
CvC­tu»


77 
public
:

78 ’um { 
DEVICE_DEFAULT
=0, 
	mDEVICE_MS_KINECT
=0, 
	mDEVICE_ASUS_XTION
=1, 
	mDEVICE_MAX
=1 };

80 cÚ¡ 
	gINVALID_PIXEL_VAL
 = 0;

81 cÚ¡ 
	gINVALID_COORDINATE_VAL
 = 0;

83 #ifdeà
HAVE_TBB


84 cÚ¡ 
	gDEFAULT_MAX_BUFFER_SIZE
 = 8;

86 cÚ¡ 
	gDEFAULT_MAX_BUFFER_SIZE
 = 2;

88 cÚ¡ 
	gDEFAULT_IS_CIRCLE_BUFFER
 = 0;

89 cÚ¡ 
	gDEFAULT_MAX_TIME_DURATION
 = 20;

91 
CvC­tu»_O³nNI2
(
šdex
 = 0);

92 
CvC­tu»_O³nNI2
(cÚ¡ * 
f’ame
);

93 
	gvœtu®
 ~
CvC­tu»_O³nNI2
();

95 
vœtu®
 
	$g‘Prİ”ty
(
´İIdx
) const;

96 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(
´obIdx
, 
´İV®
);

97 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

98 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
(
ouutTy³
);

100 
boŞ
 
	$isO³Ãd
() const;

102 
´Ùeùed
:

103 
	sOuutM­


105 
public
:

106 
cv
::
M©
 
m©
;

107 
I¶Image
* 
	`g‘I¶ImagePŒ
();

108 
´iv©e
:

109 
I¶Image
 
lH—d”
;

110 
	}
};

112 cÚ¡ 
	gouutM­sTy³sCouÁ
 = 7;

114 
	gİ’ni
::
VideoMode
 
deçuÉCŞÜOuutMode
();

115 
	gİ’ni
::
VideoMode
 
deçuÉD•thOuutMode
();

117 
I¶Image
* 
»Œ›veD•thM­
();

118 
I¶Image
* 
»Œ›vePoštCloudM­
();

119 
I¶Image
* 
»Œ›veDi¥¬™yM­
();

120 
I¶Image
* 
»Œ›veDi¥¬™yM­_32F
();

121 
I¶Image
* 
»Œ›veV®idD•thMask
();

122 
I¶Image
* 
»Œ›veBGRImage
();

123 
I¶Image
* 
»Œ›veG¿yImage
();

125 
boŞ
 
»adCam”asP¬ams
();

127 
	$g‘D•thG’”©ÜPrİ”ty
(
´İIdx
) const;

128 
boŞ
 
	`£tD•thG’”©ÜPrİ”ty
(
´İIdx
, 
´İV®
);

129 
	$g‘ImageG’”©ÜPrİ”ty
(
´İIdx
) const;

130 
boŞ
 
	`£tImageG’”©ÜPrİ”ty
(
´İIdx
, 
´İV®
);

131 
	$g‘CommÚPrİ”ty
(
´İIdx
) const;

132 
boŞ
 
	`£tCommÚPrİ”ty
(
´İIdx
, 
´İV®
);

135 
İ’ni
::
Deviû
 
deviû
;

136 
boŞ
 
isCÚ‹xtO³Ãd
;

137 
İ’ni
::
RecÜd”
 
»cÜd”
;

140 
İ’ni
::
VideoSŒ—m
 
d•th
, 
cŞÜ
, **
¡»ams
;

141 
İ’ni
::
VideoF¿meRef
 
d•thF¿me
, 
cŞÜF¿me
;

142 
cv
::
M©
 
d•thImage
, 
cŞÜImage
;

144 
maxBufãrSize
, 
maxTimeDu¿tiÚ
;

145 
boŞ
 
isCœşeBufãr
;

151 
ba£lše
;

153 
d•thFoÿlL’gth_VGA
;

156 
shadowV®ue
;

158 
noSam¶eV®ue
;

160 
cu¼’tSŒ—m
;

162 
numSŒ—m
;

163 
¡d
::
veùÜ
<
OuutM­
> 
ouutM­s
;

164 
	}
};

166 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
OuutM­
::
	$g‘I¶ImagePŒ
()

168 ifĞ
m©
.
	`em±y
() )

171 
lH—d”
 = 
	`I¶Image
(
m©
);

172  &
lH—d”
;

173 
	}
}

175 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$isO³Ãd
() const

177  
isCÚ‹xtO³Ãd
;

178 
	}
}

180 
	gİ’ni
::
VideoMode
 
CvC­tu»_O³nNI2
::
	$deçuÉCŞÜOuutMode
()

182 
İ’ni
::
VideoMode
 
mode
;

183 
mode
.
	`£tResŞutiÚ
(640, 480);

184 
mode
.
	`£tFps
(30);

185 
mode
.
	`£tPix–FÜm©
(
İ’ni
::
PIXEL_FORMAT_RGB888
);

186  
mode
;

187 
	}
}

189 
	gİ’ni
::
VideoMode
 
CvC­tu»_O³nNI2
::
	$deçuÉD•thOuutMode
()

191 
İ’ni
::
VideoMode
 
mode
;

192 
mode
.
	`£tResŞutiÚ
(640, 480);

193 
mode
.
	`£tFps
(30);

194 
mode
.
	`£tPix–FÜm©
(
İ’ni
::
PIXEL_FORMAT_DEPTH_1_MM
);

195  
mode
;

196 
	}
}

198 
	gCvC­tu»_O³nNI2
::
	$CvC­tu»_O³nNI2
Ğ
šdex
 )

200 
numSŒ—m
 = 2;

201 cÚ¡ * 
deviûURI
 = 
İ’ni
::
ANY_DEVICE
;

202 
İ’ni
::
Stus
 
¡©us
;

203 
deviûTy³
 = 
DEVICE_DEFAULT
;

205 
noSam¶eV®ue
 = 
shadowV®ue
 = 0;

207 
isCÚ‹xtO³Ãd
 = 
çl£
;

208 
maxBufãrSize
 = 
DEFAULT_MAX_BUFFER_SIZE
;

209 
isCœşeBufãr
 = 
DEFAULT_IS_CIRCLE_BUFFER
;

210 
maxTimeDu¿tiÚ
 = 
DEFAULT_MAX_TIME_DURATION
;

212 ifĞ
šdex
 >= 10 )

214 
deviûTy³
 = 
šdex
 / 10;

215 
šdex
 %= 10;

219 ià(
deviûTy³
 =ğ
DEVICE_ASUS_XTION
)

220 
numSŒ—m
 = 1;

222 ifĞ
deviûTy³
 > 
DEVICE_MAX
 )

226 
¡©us
 = 
İ’ni
::
O³nNI
::
	`š™Ÿlize
();

228 ià(
¡©us
 !ğ
İ’ni
::
STATUS_OK
)

230 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("FaedØš™Ÿlize:", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

234 
¡©us
 = 
deviû
.
	`İ’
(
deviûURI
);

235 ifĞ
¡©us
 !ğ
İ’ni
::
STATUS_OK
 )

237 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("O³nCVKšeù: Deviû o³Àçed s“: %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

238 
İ’ni
::
O³nNI
::
	`shutdown
();

245 
¡©us
 = 
d•th
.
	`ü—‹
(
deviû
, 
İ’ni
::
SENSOR_DEPTH
);

246 ià(
¡©us
 =ğ
İ’ni
::
STATUS_OK
)

248 ià(
d•th
.
	`isV®id
())

250 
	`CV_As£¹
(
d•th
.
	`£tVideoMode
(
	`deçuÉD•thOuutMode
()è=ğ
İ’ni
::
STATUS_OK
);

253 
¡©us
 = 
d•th
.
	`¡¬t
();

254 ià(
¡©us
 !ğ
İ’ni
::
STATUS_OK
)

256 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::CvC­tu»_O³nNI2 : Couldn'ˆ¡¬ˆd•th sŒ—m: %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

257 
d•th
.
	`de¡roy
();

263 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::CvC­tu»_O³nNI2 : Couldn'ˆfšd d•th sŒ—m:: %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

267 
¡»ams
 = 
Ãw
 
İ’ni
::
VideoSŒ—m
*[
numSŒ—m
];

268 
¡»ams
[
CV_DEPTH_STREAM
] = &
d•th
;

271 
¡©us
 = 
cŞÜ
.
	`ü—‹
(
deviû
, 
İ’ni
::
SENSOR_COLOR
);

272 ià(
¡©us
 =ğ
İ’ni
::
STATUS_OK
)

275 ià(
cŞÜ
.
	`isV®id
())

277 
	`CV_As£¹
(
cŞÜ
.
	`£tVideoMode
(
	`deçuÉCŞÜOuutMode
()è=ğ
İ’ni
::
STATUS_OK
);

279 
¡©us
 = 
cŞÜ
.
	`¡¬t
();

280 ià(
¡©us
 !ğ
İ’ni
::
STATUS_OK
)

282 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::CvC­tu»_O³nNI2 : Couldn'ˆ¡¬ˆcŞÜ sŒ—m: %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

283 
cŞÜ
.
	`de¡roy
();

286 
¡»ams
[
CV_COLOR_STREAM
] = &
cŞÜ
;

288 ià(
numSŒ—m
 == 2)

290 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::CvC­tu»_O³nNI2 : Couldn'ˆfšd cŞÜ sŒ—m: %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

294 ifĞ!
	`»adCam”asP¬ams
() )

296 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvCapture_OpenNI2::CvCapture_OpenNI2 : Could‚ot„ead cameras…arameters\n"));

309 
ouutM­s
.
	`»size
Ğ
ouutM­sTy³sCouÁ
 );

311 
isCÚ‹xtO³Ãd
 = 
Œue
;

313 
	`£tPrİ”ty
(
CV_CAP_PROP_OPENNI_REGISTRATION
, 1.0);

314 
	}
}

316 
	gCvC­tu»_O³nNI2
::
	$CvC­tu»_O³nNI2
(cÚ¡ * 
f’ame
)

318 
numSŒ—m
 = 2;

319 
İ’ni
::
Stus
 
¡©us
;

321 
isCÚ‹xtO³Ãd
 = 
çl£
;

322 
maxBufãrSize
 = 
DEFAULT_MAX_BUFFER_SIZE
;

323 
isCœşeBufãr
 = 
DEFAULT_IS_CIRCLE_BUFFER
;

324 
maxTimeDu¿tiÚ
 = 
DEFAULT_MAX_TIME_DURATION
;

327 
¡©us
 = 
İ’ni
::
O³nNI
::
	`š™Ÿlize
();

329 ià(
¡©us
 !ğ
İ’ni
::
STATUS_OK
)

331 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("FaedØš™Ÿlize:", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

336 
¡©us
 = 
deviû
.
	`İ’
(
f’ame
);

337 ifĞ
¡©us
 !ğ
İ’ni
::
STATUS_OK
 )

339 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::CvC­tu»_O³nNI2 : FaedØİ’ iÅuˆf(%s): %s\n", 
f’ame
, 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

343 ifĞ!
	`»adCam”asP¬ams
() )

345 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvCapture_OpenNI2::CvCapture_OpenNI2 : Could‚ot„ead cameras…arameters\n"));

349 
ouutM­s
.
	`»size
Ğ
ouutM­sTy³sCouÁ
 );

351 
isCÚ‹xtO³Ãd
 = 
Œue
;

352 
	}
}

354 
	gCvC­tu»_O³nNI2
::~
	$CvC­tu»_O³nNI2
()

356 
this
->
d•thF¿me
.
	`»Ëa£
();

357 
this
->
cŞÜF¿me
.
	`»Ëa£
();

358 
this
->
d•th
.
	`¡İ
();

359 
this
->
cŞÜ
.
	`¡İ
();

360 
İ’ni
::
O³nNI
::
	`shutdown
();

361 
	}
}

363 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$»adCam”asP¬ams
()

365 
pix–Size
 = 0;

366 ià(
d•th
.
g‘Prİ”ty
<>(
XN_STREAM_PROPERTY_ZERO_PLANE_PIXEL_SIZE
, &
pix–Size
è!ğ
İ’ni
::
STATUS_OK
)

368 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvCapture_OpenNI2::readCamerasParams : Could‚ot„ead…ixel size!\n"));

369  
çl£
;

373 
pix–Size
 *= 2.0;

376 
z”oPÏnDi¡ªû
;

377 ià(
d•th
.
	`g‘Prİ”ty
(
XN_STREAM_PROPERTY_ZERO_PLANE_DISTANCE
, &
z”oPÏnDi¡ªû
è!ğ
İ’ni
::
STATUS_OK
)

379 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvCapture_OpenNI2::readCamerasParams : Could‚ot„ead virtual…lane distance!\n"));

380  
çl£
;

383 ià(
d•th
.
g‘Prİ”ty
<>(
XN_STREAM_PROPERTY_EMITTER_DCMOS_DISTANCE
, &
ba£lše
è!ğ
İ’ni
::
STATUS_OK
)

385 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvCapture_OpenNI2::readCamerasParams : Could‚ot„ead base†ine!\n"));

386  
çl£
;

390 
ba£lše
 *= 10;

393 
d•thFoÿlL’gth_VGA
 = ()(()
z”oPÏnDi¡ªû
 / ()
pix–Size
);

395  
Œue
;

396 
	}
}

398 
	gCvC­tu»_O³nNI2
::
	$g‘Prİ”ty
Ğ
´İIdx
 ) const

400 
´İV®ue
 = 0;

402 ifĞ
	`isO³Ãd
() )

404 
pu»PrİIdx
 = 
´İIdx
 & ~
CV_CAP_OPENNI_GENERATORS_MASK
;

406 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_IMAGE_GENERATOR
 )

408 
´İV®ue
 = 
	`g‘ImageG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
 );

410 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_DEPTH_GENERATOR
 )

412 
´İV®ue
 = 
	`g‘D•thG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
 );

416 
´İV®ue
 = 
	`g‘CommÚPrİ”ty
Ğ
pu»PrİIdx
 );

420  
´İV®ue
;

421 
	}
}

423 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$£tPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

425 
boŞ
 
isS‘
 = 
çl£
;

426 ifĞ
	`isO³Ãd
() )

428 
pu»PrİIdx
 = 
´İIdx
 & ~
CV_CAP_OPENNI_GENERATORS_MASK
;

430 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_IMAGE_GENERATOR
 )

432 
isS‘
 = 
	`£tImageG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
, 
´İV®ue
 );

434 ifĞ(
´İIdx
 & 
CV_CAP_OPENNI_GENERATORS_MASK
è=ğ
CV_CAP_OPENNI_DEPTH_GENERATOR
 )

436 
isS‘
 = 
	`£tD•thG’”©ÜPrİ”ty
Ğ
pu»PrİIdx
, 
´İV®ue
 );

440 
isS‘
 = 
	`£tCommÚPrİ”ty
Ğ
pu»PrİIdx
, 
´İV®ue
 );

444  
isS‘
;

445 
	}
}

447 
	gCvC­tu»_O³nNI2
::
	$g‘CommÚPrİ”ty
Ğ
´İIdx
 ) const

449 
´İV®ue
 = 0;

451  
´İIdx
 )

458 
CV_CAP_PROP_OPENNI_GENERATOR_PRESENT
 :

459 
CV_CAP_PROP_FRAME_WIDTH
 :

460 
CV_CAP_PROP_FRAME_HEIGHT
 :

461 
CV_CAP_PROP_FPS
 :

462 
CV_CAP_PROP_OPENNI_FRAME_MAX_DEPTH
 :

463 
CV_CAP_PROP_OPENNI_BASELINE
 :

464 
CV_CAP_PROP_OPENNI_FOCAL_LENGTH
 :

465 
CV_CAP_PROP_OPENNI_REGISTRATION
 :

466 
´İV®ue
 = 
	`g‘D•thG’”©ÜPrİ”ty
Ğ
´İIdx
 );

468 
CV_CAP_PROP_OPENNI2_SYNC
 :

469 
´İV®ue
 = 
cÚ¡_ÿ¡
<
CvC­tu»_O³nNI2
 *>(
this
)->
deviû
.
	`g‘D•thCŞÜSyncEÇbËd
();

470 
CV_CAP_PROP_OPENNI2_MIRROR
:

472 
boŞ
 
isMœrÜšg
 = 
cŞÜ
.
	`g‘MœrÜšgEÇbËd
(è&& 
d•th
.getMirroringEnabled();

473 
´İV®ue
 = 
isMœrÜšg
 ? 1.0 : 0.0;

477 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Such…¬am‘” (´İIdx=%dèi¢'ˆsuµÜ‹d fÜ g‘tšg.\n", 
´İIdx
) );

480  
´İV®ue
;

481 
	}
}

483 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$£tCommÚPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

485 
boŞ
 
isS‘
 = 
çl£
;

487  
´İIdx
 )

489 
CV_CAP_PROP_OPENNI2_MIRROR
:

491 
boŞ
 
mœrÜ
 = 
´İV®ue
 > 0.0 ? 
Œue
 : 
çl£
;

492 
isS‘
 = 
cŞÜ
.
	`£tMœrÜšgEÇbËd
(
mœrÜ
è=ğ
İ’ni
::
STATUS_OK
;

493 
isS‘
 = 
d•th
.
	`£tMœrÜšgEÇbËd
(
mœrÜ
è=ğ
İ’ni
::
STATUS_OK
;

498 
CV_CAP_PROP_OPENNI_REGISTRATION
:

499 
isS‘
 = 
	`£tD•thG’”©ÜPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 );

501 
CV_CAP_PROP_OPENNI2_SYNC
:

502 
isS‘
 = 
deviû
.
	`£tD•thCŞÜSyncEÇbËd
(
´İV®ue
 > 0.0è=ğ
İ’ni
::
STATUS_OK
;

505 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Such…¬am‘” (´İIdx=%dèi¢'ˆsuµÜ‹d fÜ s‘tšg.\n", 
´İIdx
) );

508  
isS‘
;

509 
	}
}

511 
	gCvC­tu»_O³nNI2
::
	$g‘D•thG’”©ÜPrİ”ty
Ğ
´İIdx
 ) const

513 
´İV®ue
 = 0;

514 ifĞ!
d•th
.
	`isV®id
() )

515  
´İV®ue
;

517 
İ’ni
::
VideoMode
 
mode
;

519  
´İIdx
 )

521 
CV_CAP_PROP_OPENNI_GENERATOR_PRESENT
 :

522 
	`CV_DbgAs£¹
(
d•th
.
	`isV®id
());

523 
´İV®ue
 = 1.;

525 
CV_CAP_PROP_FRAME_WIDTH
 :

526 
´İV®ue
 = 
d•th
.
	`g‘VideoMode
().
	`g‘ResŞutiÚX
();

528 
CV_CAP_PROP_FRAME_HEIGHT
 :

529 
´İV®ue
 = 
d•th
.
	`g‘VideoMode
().
	`g‘ResŞutiÚY
();

531 
CV_CAP_PROP_FPS
 :

532 
mode
 = 
d•th
.
	`g‘VideoMode
();

533 
´İV®ue
 = 
mode
.
	`g‘Fps
();

535 
CV_CAP_PROP_OPENNI_FRAME_MAX_DEPTH
 :

536 
´İV®ue
 = 
d•th
.
	`g‘MaxPix–V®ue
();

538 
CV_CAP_PROP_OPENNI_BASELINE
 :

539 
´İV®ue
 = 
ba£lše
;

541 
CV_CAP_PROP_OPENNI_FOCAL_LENGTH
 :

542 
´İV®ue
 = ()
d•thFoÿlL’gth_VGA
;

544 
CV_CAP_PROP_OPENNI_REGISTRATION
 :

545 
´İV®ue
 = 
deviû
.
	`g‘ImageRegi¡¿tiÚMode
();

547 
CV_CAP_PROP_POS_MSEC
 :

548 
´İV®ue
 = ()
d•thF¿me
.
	`g‘Time¡amp
();

550 
CV_CAP_PROP_POS_FRAMES
 :

551 
´İV®ue
 = 
d•thF¿me
.
	`g‘F¿meIndex
();

554 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("D•th g’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ g‘tšg.\n", 
´İIdx
) );

557  
´İV®ue
;

558 
	}
}

560 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$£tD•thG’”©ÜPrİ”ty
Ğ
´İIdx
, 
´İV®ue
 )

562 
boŞ
 
isS‘
 = 
çl£
;

564 
	`CV_As£¹
Ğ
d•th
.
	`isV®id
() );

566  
´İIdx
 )

568 
CV_CAP_PROP_OPENNI_REGISTRATION
:

570 ifĞ
´İV®ue
 < 1.0 )

574 iàĞ
cŞÜ
.
	`isV®id
() )

576 
İ’ni
::
ImageRegi¡¿tiÚMode
 
mode
 = 
´İV®ue
 < 1.0 ? o³Âi::
IMAGE_REGISTRATION_DEPTH_TO_COLOR
 : o³Âi::
IMAGE_REGISTRATION_OFF
;

577 ifĞ!
deviû
.
	`g‘ImageRegi¡¿tiÚMode
(è=ğ
mode
 )

579 ià(
deviû
.
	`isImageRegi¡¿tiÚModeSuµÜ‹d
(
mode
))

581 
İ’ni
::
Stus
 
¡©us
 = 
deviû
.
	`£tImageRegi¡¿tiÚMode
(
mode
);

582 ifĞ
¡©us
 !ğ
İ’ni
::
STATUS_OK
 )

583 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::£tD•thG’”©ÜPrİ”ty : %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

585 
isS‘
 = 
Œue
;

588 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvCapture_OpenNI2::setDepthGeneratorProperty : Unsupported viewpoint.\n"));

591 
isS‘
 = 
Œue
;

596 
İ’ni
::
Stus
 
¡©us
 = 
deviû
.
	`£tImageRegi¡¿tiÚMode
(İ’ni::
IMAGE_REGISTRATION_OFF
);

597 ifĞ
¡©us
 !ğ
İ’ni
::
STATUS_OK
 )

598 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::£tD•thG’”©ÜPrİ”ty : %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

600 
isS‘
 = 
Œue
;

605 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("D•th g’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ s‘tšg.\n", 
´İIdx
) );

608  
isS‘
;

609 
	}
}

611 
	gCvC­tu»_O³nNI2
::
	$g‘ImageG’”©ÜPrİ”ty
Ğ
´İIdx
 ) const

613 
´İV®ue
 = 0.;

614 ifĞ!
cŞÜ
.
	`isV®id
() )

615  
´İV®ue
;

617 
İ’ni
::
VideoMode
 
mode
;

618  
´İIdx
 )

620 
CV_CAP_PROP_OPENNI_GENERATOR_PRESENT
 :

621 
	`CV_DbgAs£¹
Ğ
cŞÜ
.
	`isV®id
() );

622 
´İV®ue
 = 1.;

624 
CV_CAP_PROP_FRAME_WIDTH
 :

625 
´İV®ue
 = 
cŞÜ
.
	`g‘VideoMode
().
	`g‘ResŞutiÚX
();

627 
CV_CAP_PROP_FRAME_HEIGHT
 :

628 
´İV®ue
 = 
cŞÜ
.
	`g‘VideoMode
().
	`g‘ResŞutiÚY
();

630 
CV_CAP_PROP_FPS
 :

631 
´İV®ue
 = 
cŞÜ
.
	`g‘VideoMode
().
	`g‘Fps
();

633 
CV_CAP_PROP_POS_MSEC
 :

634 
´İV®ue
 = ()
cŞÜF¿me
.
	`g‘Time¡amp
();

636 
CV_CAP_PROP_POS_FRAMES
 :

637 
´İV®ue
 = ()
cŞÜF¿me
.
	`g‘F¿meIndex
();

640 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Imagg’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ g‘tšg.\n", 
´İIdx
) );

643  
´İV®ue
;

644 
	}
}

646 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$£tImageG’”©ÜPrİ”ty
(
´İIdx
, 
´İV®ue
)

648 
boŞ
 
isS‘
 = 
çl£
;

649 ifĞ!
cŞÜ
.
	`isV®id
() )

650  
isS‘
;

652  
´İIdx
 )

654 
CV_CAP_PROP_OPENNI_OUTPUT_MODE
 :

656 
İ’ni
::
VideoMode
 
mode
 = 
cŞÜ
.
	`g‘VideoMode
();

658  
	`cvRound
(
´İV®ue
) )

660 
CV_CAP_OPENNI_VGA_30HZ
 :

661 
mode
.
	`£tResŞutiÚ
(640,480);

662 
mode
.
	`£tFps
(30);

664 
CV_CAP_OPENNI_SXGA_15HZ
 :

665 
mode
.
	`£tResŞutiÚ
(1280, 960);

666 
mode
.
	`£tFps
(15);

668 
CV_CAP_OPENNI_SXGA_30HZ
 :

669 
mode
.
	`£tResŞutiÚ
(1280, 960);

670 
mode
.
	`£tFps
(30);

672 
CV_CAP_OPENNI_QVGA_30HZ
 :

673 
mode
.
	`£tResŞutiÚ
(320, 240);

674 
mode
.
	`£tFps
(30);

676 
CV_CAP_OPENNI_QVGA_60HZ
 :

677 
mode
.
	`£tResŞutiÚ
(320, 240);

678 
mode
.
	`£tFps
(60);

681 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, "Unsupported image generator output mode.\n");

684 
İ’ni
::
Stus
 
¡©us
 = 
cŞÜ
.
	`£tVideoMode
Ğ
mode
 );

685 ifĞ
¡©us
 !ğ
İ’ni
::
STATUS_OK
 )

686 
	`CV_E¼Ü
(
CV_StsE¼Ü
, 
cv
::
	`fÜm©
("CvC­tu»_O³nNI2::£tImageG’”©ÜPrİ”ty : %s\n", 
İ’ni
::
O³nNI
::
	`g‘Ex‹ndedE¼Ü
()));

688 
isS‘
 = 
Œue
;

692 
	`CV_E¼Ü
Ğ
CV_StsBadArg
, 
cv
::
	`fÜm©
("Imagg’”©Ü dÛ nÙ suµÜˆsuch…¬am‘” (´İIdx=%dèfÜ s‘tšg.\n", 
´İIdx
) );

695  
isS‘
;

696 
	}
}

698 
boŞ
 
	gCvC­tu»_O³nNI2
::
	$g¿bF¿me
()

700 ifĞ!
	`isO³Ãd
() )

701  
çl£
;

703 
boŞ
 
isG¿bbed
 = 
çl£
;

705 
İ’ni
::
Stus
 
¡©us
 = o³Âi::
O³nNI
::
	`wa™FÜAnySŒ—m
(
¡»ams
, 
numSŒ—m
, &
cu¼’tSŒ—m
, 
CV_STREAM_TIMEOUT
);

706 ifĞ
¡©us
 !ğ
İ’ni
::
STATUS_OK
 )

707  
çl£
;

709 ifĞ
d•th
.
	`isV®id
() )

710 
d•th
.
	`»adF¿me
(&
d•thF¿me
);

711 ià(
cŞÜ
.
	`isV®id
())

712 
cŞÜ
.
	`»adF¿me
(&
cŞÜF¿me
);

713 
isG¿bbed
 = 
Œue
;

715  
isG¿bbed
;

716 
	}
}

718 
šlše
 
g‘D•thM­FromM‘aD©a
(cÚ¡ 
İ’ni
::
VideoF¿meRef
& 
d•thM‘aD©a
, 
cv
::
M©
& 
d•thM­
, 
noSam¶eV®ue
, 
shadowV®ue
)

720 
	gd•thM­
.
ü—‹
(
d•thM‘aD©a
.
g‘Height
(), d•thM‘aD©a.
g‘Width
(), 
CV_16UC1
);

721 
	gd•thM­
.
	gd©a
 = (
uch¬
*)
d•thM‘aD©a
.
g‘D©a
();

723 
	gcv
::
M©
 
badMask
 = (
d•thM­
 =ğ()
noSam¶eV®ue
è| (d•thM­ =ğ()
shadowV®ue
) | (depthMap == 0);

726 
	gd•thM­
.
£tTo
Ğ
cv
::
SÿÏr
::
®l
Ğ
CvC­tu»_O³nNI2
::
INVALID_PIXEL_VAL
 ), 
badMask
 );

729 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veD•thM­
()

731 ifĞ!
d•th
.
	`isV®id
() )

734 
	`g‘D•thM­FromM‘aD©a
Ğ
d•thF¿me
, 
ouutM­s
[
CV_CAP_OPENNI_DEPTH_MAP
].
m©
, 
noSam¶eV®ue
, 
shadowV®ue
 );

736  
ouutM­s
[
CV_CAP_OPENNI_DEPTH_MAP
].
	`g‘I¶ImagePŒ
();

737 
	}
}

739 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›vePoštCloudM­
()

741 ifĞ!
d•thF¿me
.
	`isV®id
() )

744 
cv
::
M©
 
d•thImg
;

745 
	`g‘D•thM­FromM‘aD©a
(
d•thF¿me
, 
d•thImg
, 
noSam¶eV®ue
, 
shadowV®ue
);

747 cÚ¡ 
badPošt
 = 
INVALID_PIXEL_VAL
;

748 cÚ¡ 
badCoÜd
 = 
INVALID_COORDINATE_VAL
;

749 
cŞs
 = 
d•thF¿me
.
	`g‘Width
(), 
rows
 = d•thF¿me.
	`g‘Height
();

750 
cv
::
M©
 
	`poštCloud_XYZ
Ğ
rows
, 
cŞs
, 
CV_32FC3
, cv::
SÿÏr
::
	`®l
(
badPošt
) );

752 
wÜldX
, 
wÜldY
, 
wÜldZ
;

753  
y
 = 0; y < 
rows
; y++ )

755 
x
 = 0; x < 
cŞs
; x++)

757 
İ’ni
::
CoÜdš©eCÚv”‹r
::
	`cÚv”tD•thToWÜld
(
d•th
, 
x
, 
y
, 
d•thImg
.
©
<>(y, x), &
wÜldX
, &
wÜldY
, &
wÜldZ
);

759 ià(
d•thImg
.
©
<>(
y
, 
x
è=ğ
badPošt
)

760 
poštCloud_XYZ
.
©
<
cv
::
Pošt3f
>(
y
, 
x
èğcv::
	`Pošt3f
(
badCoÜd
, badCoord, badCoord);

763 
poštCloud_XYZ
.
©
<
cv
::
Pošt3f
>(
y
, 
x
èğcv::
	`Pošt3f
(
wÜldX
*0.001f, 
wÜldY
*0.001f, 
wÜldZ
*0.001f);

768 
ouutM­s
[
CV_CAP_OPENNI_POINT_CLOUD_MAP
].
m©
 = 
poštCloud_XYZ
;

770  
ouutM­s
[
CV_CAP_OPENNI_POINT_CLOUD_MAP
].
	`g‘I¶ImagePŒ
();

771 
	}
}

773 
compu‹Di¥¬™y_32F
ĞcÚ¡ 
İ’ni
::
VideoF¿meRef
& 
d•thM‘aD©a
, 
cv
::
M©
& 
di¥
, 
ba£lše
, 
F
, 
noSam¶eV®ue
, 
shadowV®ue
)

775 
	gcv
::
M©
 
d•th
;

776 
g‘D•thM­FromM‘aD©a
Ğ
d•thM‘aD©a
, 
d•th
, 
noSam¶eV®ue
, 
shadowV®ue
 );

777 
CV_As£¹
Ğ
d•th
.
ty³
(è=ğ
CV_16UC1
 );

781 
	gmuÉ
 = ()(
ba£lše
 * 
F
 );

783 
	gdi¥
.
ü—‹
Ğ
d•th
.
size
(), 
CV_32FC1
);

784 
	gdi¥
 = 
cv
::
SÿÏr
::
®l
Ğ
CvC­tu»_O³nNI2
::
INVALID_PIXEL_VAL
 );

785  
	gy
 = 0; y < 
	gdi¥
.
	grows
; y++ )

787  
	gx
 = 0; x < 
	gdi¥
.
	gcŞs
; x++ )

789 
	gcurD•th
 = 
d•th
.
©
<>(
y
,
	gx
);

790 ifĞ
	gcurD•th
 !ğ
CvC­tu»_O³nNI2
::
INVALID_PIXEL_VAL
 )

791 
di¥
.
©
<>(
y
,
	gx
èğ
muÉ
 / 
curD•th
;

796 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veDi¥¬™yM­
()

798 ià(!
d•thF¿me
.
	`isV®id
())

801 
cv
::
M©
 
di¥32
;

802 
	`compu‹Di¥¬™y_32F
(
d•thF¿me
, 
di¥32
, 
ba£lše
, 
d•thFoÿlL’gth_VGA
, 
noSam¶eV®ue
, 
shadowV®ue
);

804 
di¥32
.
	`cÚv”tTo
Ğ
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP
].
m©
, 
CV_8UC1
 );

806  
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP
].
	`g‘I¶ImagePŒ
();

807 
	}
}

809 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veDi¥¬™yM­_32F
()

811 ià(!
d•thF¿me
.
	`isV®id
())

814 
	`compu‹Di¥¬™y_32F
(
d•thF¿me
, 
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP_32F
].
m©
, 
ba£lše
, 
d•thFoÿlL’gth_VGA
, 
noSam¶eV®ue
, 
shadowV®ue
);

816  
ouutM­s
[
CV_CAP_OPENNI_DISPARITY_MAP_32F
].
	`g‘I¶ImagePŒ
();

817 
	}
}

819 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veV®idD•thMask
()

821 ià(!
d•thF¿me
.
	`isV®id
())

824 
cv
::
M©
 
d
;

825 
	`g‘D•thM­FromM‘aD©a
(
d•thF¿me
, 
d
, 
noSam¶eV®ue
, 
shadowV®ue
);

827 
ouutM­s
[
CV_CAP_OPENNI_VALID_DEPTH_MASK
].
m©
 = 
d
 !ğ
CvC­tu»_O³nNI2
::
INVALID_PIXEL_VAL
;

829  
ouutM­s
[
CV_CAP_OPENNI_VALID_DEPTH_MASK
].
	`g‘I¶ImagePŒ
();

830 
	}
}

832 
šlše
 
g‘BGRImageFromM‘aD©a
ĞcÚ¡ 
İ’ni
::
VideoF¿meRef
& 
imageM‘aD©a
, 
cv
::
M©
& 
bgrImage
 )

834 
cv
::
M©
 
bufãrImage
;

835 ifĞ
	gimageM‘aD©a
.
g‘VideoMode
().
g‘Pix–FÜm©
(è!ğ
İ’ni
::
PIXEL_FORMAT_RGB888
 )

836 
CV_E¼Ü
Ğ
CV_StsUnsuµÜ‹dFÜm©
, "Unsupported format of grabbed image\n" );

838 
	gbgrImage
.
ü—‹
(
imageM‘aD©a
.
g‘Height
(), imageM‘aD©a.
g‘Width
(), 
CV_8UC3
);

839 
	gbufãrImage
.
ü—‹
(
imageM‘aD©a
.
g‘Height
(), imageM‘aD©a.
g‘Width
(), 
CV_8UC3
);

840 
	gbufãrImage
.
	gd©a
 = (
uch¬
*)
imageM‘aD©a
.
g‘D©a
();

842 
	gcv
::
cvtCŞÜ
(
bufãrImage
, 
bgrImage
, 
cv
::
COLOR_RGB2BGR
);

845 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veBGRImage
()

847 ifĞ!
cŞÜ
.
	`isV®id
() )

850 
	`g‘BGRImageFromM‘aD©a
Ğ
cŞÜF¿me
, 
ouutM­s
[
CV_CAP_OPENNI_BGR_IMAGE
].
m©
 );

852  
ouutM­s
[
CV_CAP_OPENNI_BGR_IMAGE
].
	`g‘I¶ImagePŒ
();

853 
	}
}

855 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veG¿yImage
()

857 ià(!
cŞÜF¿me
.
	`isV®id
())

860 
	`CV_As£¹
(
cŞÜF¿me
.
	`g‘VideoMode
().
	`g‘Pix–FÜm©
(è=ğ
İ’ni
::
PIXEL_FORMAT_RGB888
);

862 
cv
::
M©
 
rgbImage
;

863 
	`g‘BGRImageFromM‘aD©a
(
cŞÜF¿me
, 
rgbImage
);

864 
cv
::
	`cvtCŞÜ
Ğ
rgbImage
, 
ouutM­s
[
CV_CAP_OPENNI_GRAY_IMAGE
].
m©
, 
CV_BGR2GRAY
 );

866  
ouutM­s
[
CV_CAP_OPENNI_GRAY_IMAGE
].
	`g‘I¶ImagePŒ
();

867 
	}
}

869 
I¶Image
* 
	gCvC­tu»_O³nNI2
::
	$»Œ›veF¿me
Ğ
ouutTy³
 )

871 
I¶Image
* 
image
 = 0;

872 
	`CV_As£¹
Ğ
ouutTy³
 < 
ouutM­sTy³sCouÁ
 && outputType >= 0);

874 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_DEPTH_MAP
 )

876 
image
 = 
	`»Œ›veD•thM­
();

878 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_POINT_CLOUD_MAP
 )

880 
image
 = 
	`»Œ›vePoštCloudM­
();

882 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_DISPARITY_MAP
 )

884 
image
 = 
	`»Œ›veDi¥¬™yM­
();

886 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_DISPARITY_MAP_32F
 )

888 
image
 = 
	`»Œ›veDi¥¬™yM­_32F
();

890 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_VALID_DEPTH_MASK
 )

892 
image
 = 
	`»Œ›veV®idD•thMask
();

894 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_BGR_IMAGE
 )

896 
image
 = 
	`»Œ›veBGRImage
();

898 ifĞ
ouutTy³
 =ğ
CV_CAP_OPENNI_GRAY_IMAGE
 )

900 
image
 = 
	`»Œ›veG¿yImage
();

903  
image
;

904 
	}
}

906 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_O³nNI
Ğ
šdex
 )

908 
CvC­tu»_O³nNI2
* 
ÿ±u»
 = 
Ãw
 
	`CvC­tu»_O³nNI2
Ğ
šdex
 );

910 ifĞ
ÿ±u»
->
	`isO³Ãd
() )

911  
ÿ±u»
;

913 
d–‘e
 
ÿ±u»
;

915 
	}
}

917 
CvC­tu»
* 
	$cvC»©eFeC­tu»_O³nNI
ĞcÚ¡ * 
f’ame
 )

919 
CvC­tu»_O³nNI2
* 
ÿ±u»
 = 
Ãw
 
	`CvC­tu»_O³nNI2
Ğ
f’ame
 );

921 ifĞ
ÿ±u»
->
	`isO³Ãd
() )

922  
ÿ±u»
;

924 
d–‘e
 
ÿ±u»
;

926 
	}
}

	@cap_pvapi.cpp

46 
	~"´ecomp.hµ
"

48 #ifdeà
HAVE_PVAPI


49 #ià!
defšed
 
WIN32
 && !defšed 
_WIN32
 && !defšed 
_LINUX


50 
	#_LINUX


	)

53 #ià
defšed
(
_x64
è|| defšed (
__x86_64
è|| defšed (
_M_X64
)

54 
	#_x64
 1

	)

55 #–ià
defšed
(
_x86
è|| defšed(
__i386
è|| defšed (
_M_IX86
)

56 
	#_x86
 1

	)

59 
	~<PvApi.h
>

60 #ifdeà
WIN32


61 
	~<io.h
>

63 
	~<time.h
>

64 
	~<uni¡d.h
>

69 
	#MAX_CAMERAS
 10

	)

73 şas 
	cCvC­tu»CAM_PvAPI
 : 
public
 
CvC­tu»


75 
public
:

76 
CvC­tu»CAM_PvAPI
();

77 
	mvœtu®
 ~
	$CvC­tu»CAM_PvAPI
()

79 
	`şo£
();

82 
vœtu®
 
boŞ
 
	`İ’
Ğ
šdex
 );

83 
vœtu®
 
	`şo£
();

84 
vœtu®
 
	$g‘Prİ”ty
() const;

85 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

86 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

87 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

88 
vœtu®
 
	$g‘C­tu»Domaš
()

90  
CV_CAP_PVAPI
;

91 
	}
}

93 
	g´Ùeùed
:

94 #iâdeà
WIN32


95 
vœtu®
 
SË•
(
time
);

98 
¡İC­tu»
();

99 
boŞ
 
¡¬tC­tu»
();

100 
boŞ
 
»sizeC­tu»F¿me
 (
äameWidth
, 
äameHeight
);

104 
	gUID
;

105 
tPvHªdË
 
	gHªdË
;

106 
tPvF¿me
 
	gF¿me
;

107 } 
	ttCam”a
;

109 
I¶Image
 *
	gäame
;

110 
tCam”a
 
	gCam”a
;

111 
tPvE¼
 
	gE¼code
;

115 
	gCvC­tu»CAM_PvAPI
::
	$CvC­tu»CAM_PvAPI
()

117 
äame
 = 
NULL
;

118 
	`mem£t
(&
this
->
Cam”a
, 0, (this->Camera));

119 
	}
}

121 #iâdeà
WIN32


122 
	gCvC­tu»CAM_PvAPI
::
	$SË•
(
time
)

124 
time¥ec
 
t
,
r
;

126 
t
.
tv_£c
 = 
time
 / 1000;

127 
t
.
tv_n£c
 = (
time
 % 1000) * 1000000;

129 
	`Çno¦“p
(&
t
,&
r
)==-1)

130 
t
 = 
r
;

131 
	}
}

134 
	gCvC­tu»CAM_PvAPI
::
	$şo£
()

137 
	`¡İC­tu»
();

138 
	`PvCam”aClo£
(
Cam”a
.
HªdË
);

139 
	`PvUnIn™Ÿlize
();

140 
	}
}

143 
boŞ
 
	gCvC­tu»CAM_PvAPI
::
	$İ’
Ğ
šdex
 )

145 
tPvCam”aInfo
 
ÿm”aLi¡
[
MAX_CAMERAS
];

147 
tPvCam”aInfo
 
ÿmInfo
;

148 
tPvIpS‘tšgs
 
S‘tšgs
;

151 ià(
	`PvIn™Ÿlize
()) {

155 
	`SË•
(1000);

159 
numCam”as
=
	`PvCam”aLi¡
(
ÿm”aLi¡
, 
MAX_CAMERAS
, 
NULL
);

161 ià(
numCam”as
 <ğ0 || 
šdex
 >=‚umCameras)

162  
çl£
;

164 
Cam”a
.
UID
 = 
ÿm”aLi¡
[
šdex
].
UniqueId
;

166 ià(!
	`PvCam”aInfo
(
Cam”a
.
UID
,&
ÿmInfo
è&& !
	`PvCam”aIpS‘tšgsG‘
(Cam”a.UID,&
S‘tšgs
))

180 
	`årštf
(
¡d”r
,"ERROR: could‚ot„etrieve camera IP settings.\n");

181  
çl£
;

185 ià(
	`PvCam”aO³n
(
Cam”a
.
UID
, 
ePvAcûssMa¡”
, &(Cam”a.
HªdË
))==
ePvE¼Sucûss
)

187 
tPvUšt32
 
äameWidth
, 
äameHeight
;

188 
maxSize
;

190 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Width", &
äameWidth
);

191 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Height", &
äameHeight
);

198 
maxSize
 = 8228;

200 ià(
	`PvC­tu»Adju¡Pack‘Size
(
Cam”a
.
HªdË
,
maxSize
)!=
ePvE¼Sucûss
)

201  
çl£
;

203 
	`»sizeC­tu»F¿me
(
äameWidth
, 
äameHeight
);

205  
	`¡¬tC­tu»
();

208 
	`årštf
(
¡d”r
,"Error cannot open camera\n");

209  
çl£
;

211 
	}
}

213 
boŞ
 
	gCvC­tu»CAM_PvAPI
::
	$g¿bF¿me
()

216  
	`PvC­tu»QueueF¿me
(
Cam”a
.
HªdË
, &(Cam”a.
F¿me
), 
NULL
è=ğ
ePvE¼Sucûss
;

217 
	}
}

220 
I¶Image
* 
	gCvC­tu»CAM_PvAPI
::
	$»Œ›veF¿me
()

222 ià(
	`PvC­tu»Wa™FÜF¿meDÚe
(
Cam”a
.
HªdË
, &(Cam”a.
F¿me
), 1000è=ğ
ePvE¼Sucûss
)

224  
äame
;

226  
NULL
;

227 
	}
}

229 
	gCvC­tu»CAM_PvAPI
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

231 
tPvUšt32
 
nTemp
;

233  
´İ”ty_id
 )

235 
CV_CAP_PROP_FRAME_WIDTH
:

236 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Width", &
nTemp
);

237  ()
nTemp
;

238 
CV_CAP_PROP_FRAME_HEIGHT
:

239 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Height", &
nTemp
);

240  ()
nTemp
;

241 
CV_CAP_PROP_EXPOSURE
:

242 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
,"Exposu»V®ue",&
nTemp
);

243  ()
nTemp
;

244 
CV_CAP_PROP_FPS
:

245 
tPvFlßt32
 
nfTemp
;

246 
	`PvA‰rFlßt32G‘
(
Cam”a
.
HªdË
, "StF¿meR©e", &
nfTemp
);

247  ()
nfTemp
;

248 
CV_CAP_PROP_PVAPI_MULTICASTIP
:

249 
mEÇbË
[2];

250 
mIp
[11];

251 
	`PvA‰rEnumG‘
(
Cam”a
.
HªdË
,"MuÉiÿ¡EÇbË",
mEÇbË
,(mEÇbË),
NULL
);

252 ià(
	`¡rcmp
(
mEÇbË
, "Off") == 0)

258 

;

259 
a
,
b
,
c
,
d
;

260 
	`PvA‰rSŒšgG‘
(
Cam”a
.
HªdË
, "MuÉiÿ¡IPAdd»ss",
mIp
,(mIp),
NULL
);

261 
	`ssÿnf
(
mIp
, "%d.%d.%d.%d", &
a
, &
b
, &
c
, &
d
); 

 = ((a*256 + b)*256 + c)*256 + d;

262  ()

;

264 
CV_CAP_PROP_GAIN
:

265 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "GašV®ue", &
nTemp
);

266  ()
nTemp
;

267 
CV_CAP_PROP_PVAPI_FRAMESTARTTRIGGERMODE
:

268 
Œigg”Mode
[256];

269 
	`PvA‰rEnumG‘
(
Cam”a
.
HªdË
, "F¿meS¹Trigg”Mode", 
Œigg”Mode
, 256, 
NULL
);

270 ià(
	`¡rcmp
(
Œigg”Mode
, "Freerun")==0)

272 ià(
	`¡rcmp
(
Œigg”Mode
, "SyncIn1")==0)

274 ià(
	`¡rcmp
(
Œigg”Mode
, "SyncIn2")==0)

276 ià(
	`¡rcmp
(
Œigg”Mode
, "FixedRate")==0)

278 ià(
	`¡rcmp
(
Œigg”Mode
, "Software")==0)

282 
CV_CAP_PROP_PVAPI_DECIMATIONHORIZONTAL
:

283 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Decim©iÚHÜizÚl", &
nTemp
);

284  ()
nTemp
;

285 
CV_CAP_PROP_PVAPI_DECIMATIONVERTICAL
:

286 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Decim©iÚV”tiÿl", &
nTemp
);

287  ()
nTemp
;

288 
CV_CAP_PROP_PVAPI_BINNINGX
:

289 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
,"BšnšgX",&
nTemp
);

290  ()
nTemp
;

291 
CV_CAP_PROP_PVAPI_BINNINGY
:

292 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
,"BšnšgY",&
nTemp
);

293  ()
nTemp
;

294 
CV_CAP_PROP_PVAPI_PIXELFORMAT
:

295 
pix–FÜm©
[256];

296 
	`PvA‰rEnumG‘
(
Cam”a
.
HªdË
, "Pix–FÜm©", 
pix–FÜm©
,256,
NULL
);

297 ià(
	`¡rcmp
(
pix–FÜm©
, "Mono8")==0)

299 ià(
	`¡rcmp
(
pix–FÜm©
, "Mono16")==0)

301 ià(
	`¡rcmp
(
pix–FÜm©
, "Bayer8")==0)

303 ià(
	`¡rcmp
(
pix–FÜm©
, "Bayer16")==0)

305 ià(
	`¡rcmp
(
pix–FÜm©
, "Rgb24")==0)

307 ià(
	`¡rcmp
(
pix–FÜm©
, "Bgr24")==0)

309 ià(
	`¡rcmp
(
pix–FÜm©
, "Rgba32")==0)

311 ià(
	`¡rcmp
(
pix–FÜm©
, "Bgra32")==0)

315 
	}
}

317 
boŞ
 
	gCvC­tu»CAM_PvAPI
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

319 
tPvE¼
 
”rÜ
;

321  
´İ”ty_id
 )

323 
CV_CAP_PROP_FRAME_WIDTH
:

325 
tPvUšt32
 
cu¼Height
;

327 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Height", &
cu¼Height
);

329 
	`¡İC­tu»
();

331 ià(!
	`»sizeC­tu»F¿me
(
v®ue
, 
cu¼Height
))

333 
	`¡¬tC­tu»
();

334  
çl£
;

337 
	`¡¬tC­tu»
();

341 
CV_CAP_PROP_FRAME_HEIGHT
:

343 
tPvUšt32
 
cu¼Width
;

345 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Width", &
cu¼Width
);

347 
	`¡İC­tu»
();

350 ià(!
	`»sizeC­tu»F¿me
(
cu¼Width
, 
v®ue
))

352 
	`¡¬tC­tu»
();

353  
çl£
;

356 
	`¡¬tC­tu»
();

360 
CV_CAP_PROP_EXPOSURE
:

361 ià((
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
,"Exposu»V®ue",(
tPvUšt32
)
v®ue
)==
ePvE¼Sucûss
))

364  
çl£
;

365 
CV_CAP_PROP_PVAPI_MULTICASTIP
:

366 ià(
v®ue
==-1)

368 ià((
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
,"MuÉiÿ¡EÇbË", "Off")==
ePvE¼Sucûss
))

371  
çl£
;

375 
cv
::
SŒšg
 

=cv::
	`fÜm©
("%d.%d.%d.%d", (()
v®ue
>>24)&255, (()value>>16)&255, (()value>>8)&255, ()value&255);

376 ià((
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
,"MuÉiÿ¡EÇbË", "On")==
ePvE¼Sucûss
) &&

377 (
	`PvA‰rSŒšgS‘
(
Cam”a
.
HªdË
, "MuÉiÿ¡IPAdd»ss", 

.
	`c_¡r
())==
ePvE¼Sucûss
))

380  
çl£
;

382 
CV_CAP_PROP_GAIN
:

383 ià(
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
,"GašV®ue",(
tPvUšt32
)
v®ue
)!=
ePvE¼Sucûss
)

385  
çl£
;

388 
CV_CAP_PROP_PVAPI_FRAMESTARTTRIGGERMODE
:

389 ià(
v®ue
==0)

390 
”rÜ
 = 
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "FrameStartTriggerMode", "Freerun");

391 ià(
v®ue
==1)

392 
”rÜ
 = 
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "FrameStartTriggerMode", "SyncIn1");

393 ià(
v®ue
==2)

394 
”rÜ
 = 
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "FrameStartTriggerMode", "SyncIn2");

395 ià(
v®ue
==3)

396 
”rÜ
 = 
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "FrameStartTriggerMode", "FixedRate");

397 ià(
v®ue
==4)

398 
”rÜ
 = 
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "FrameStartTriggerMode", "Software");

400 
”rÜ
 = 
ePvE¼OutOfRªge
;

401 if(
”rÜ
==
ePvE¼Sucûss
)

404  
çl£
;

405 
CV_CAP_PROP_PVAPI_DECIMATIONHORIZONTAL
:

406 ià(
v®ue
 >= 1 && value <= 8)

407 
”rÜ
 = 
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
, "Decim©iÚHÜizÚl", 
v®ue
);

409 
”rÜ
 = 
ePvE¼OutOfRªge
;

410 if(
”rÜ
==
ePvE¼Sucûss
)

413  
çl£
;

414 
CV_CAP_PROP_PVAPI_DECIMATIONVERTICAL
:

415 ià(
v®ue
 >= 1 && value <= 8)

416 
”rÜ
 = 
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
, "Decim©iÚV”tiÿl", 
v®ue
);

418 
”rÜ
 = 
ePvE¼OutOfRªge
;

419 if(
”rÜ
==
ePvE¼Sucûss
)

422  
çl£
;

423 
CV_CAP_PROP_PVAPI_BINNINGX
:

424 
”rÜ
 = 
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
, "BšnšgX", 
v®ue
);

425 if(
”rÜ
==
ePvE¼Sucûss
)

428  
çl£
;

429 
CV_CAP_PROP_PVAPI_BINNINGY
:

430 
”rÜ
 = 
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
, "BšnšgY", 
v®ue
);

431 if(
”rÜ
==
ePvE¼Sucûss
)

434  
çl£
;

435 
CV_CAP_PROP_PVAPI_PIXELFORMAT
:

437 
cv
::
SŒšg
 
pix–FÜm©
;

439 ià(
v®ue
==1)

440 
pix–FÜm©
 = "Mono8";

441 ià(
v®ue
==2)

442 
pix–FÜm©
 = "Mono16";

443 ià(
v®ue
==3)

444 
pix–FÜm©
 = "Bayer8";

445 ià(
v®ue
==4)

446 
pix–FÜm©
 = "Bayer16";

447 ià(
v®ue
==5)

448 
pix–FÜm©
 = "Rgb24";

449 ià(
v®ue
==6)

450 
pix–FÜm©
 = "Bgr24";

451 ià(
v®ue
==7)

452 
pix–FÜm©
 = "Rgba32";

453 ià(
v®ue
==8)

454 
pix–FÜm©
 = "Bgra32";

456  
çl£
;

458 ià((
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
,"Pix–FÜm©", 
pix–FÜm©
.
	`c_¡r
())==
ePvE¼Sucûss
))

460 
tPvUšt32
 
cu¼Width
;

461 
tPvUšt32
 
cu¼Height
;

463 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Width", &
cu¼Width
);

464 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "Height", &
cu¼Height
);

466 
	`¡İC­tu»
();

468 ià(!
	`»sizeC­tu»F¿me
(
cu¼Width
, 
cu¼Height
))

470 
	`¡¬tC­tu»
();

471  
çl£
;

474 
	`¡¬tC­tu»
();

475  
Œue
;

478  
çl£
;

481  
çl£
;

483  
Œue
;

484 
	}
}

486 
	gCvC­tu»CAM_PvAPI
::
	$¡İC­tu»
()

488 
	`PvCommªdRun
(
Cam”a
.
HªdË
, "AcquisitionStop");

489 
	`PvC­tu»End
(
Cam”a
.
HªdË
);

490 
	}
}

492 
boŞ
 
	gCvC­tu»CAM_PvAPI
::
	$¡¬tC­tu»
()

495 
	`PvC­tu»S¹
(
Cam”a
.
HªdË
);

498 if(
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "Acquis™iÚMode", "CÚtšuous")!ğ
ePvE¼Sucûss
)

500 
	`årštf
(
¡d”r
,"Could‚ot set PvAPI Acquisition Mode\n");

501  
çl£
;

504 if(
	`PvCommªdRun
(
Cam”a
.
HªdË
, "Acquis™iÚS¹")!ğ
ePvE¼Sucûss
)

506 
	`årštf
(
¡d”r
,"Could‚ot start PvAPI‡cquisition\n");

507  
çl£
;

510 if(
	`PvA‰rEnumS‘
(
Cam”a
.
HªdË
, "F¿meS¹Trigg”Mode", "F»”un")!ğ
ePvE¼Sucûss
)

512 
	`årštf
(
¡d”r
,"Error setting PvAPIriggero \"Freerun\"");

513  
çl£
;

516  
Œue
;

517 
	}
}

519 
boŞ
 
	gCvC­tu»CAM_PvAPI
::
	$»sizeC­tu»F¿me
 (
äameWidth
, 
äameHeight
)

521 
pix–FÜm©
[256];

522 
tPvUšt32
 
äameSize
;

523 
tPvUšt32
 
£nsÜHeight
;

524 
tPvUšt32
 
£nsÜWidth
;

526 ià(
äame
)

528 
	`cvR–—£Image
(&
äame
);

529 
äame
 = 
NULL
;

532 ià(
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "S’sÜWidth", &
£nsÜWidth
è!ğ
ePvE¼Sucûss
)

534  
çl£
;

537 ià(
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "S’sÜHeight", &
£nsÜHeight
è!ğ
ePvE¼Sucûss
)

539  
çl£
;

543 ià((
äameWidth
 < 0è|| ((
tPvUšt32
)äameWidth > 
£nsÜWidth
))

545 
äameWidth
 = 
£nsÜWidth
;

548 ià((
äameHeight
 < 0è|| ((
tPvUšt32
)äameHeighˆ> 
£nsÜHeight
))

550 
äameHeight
 = 
£nsÜHeight
;

554 ià(
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
, "Height", 
äameHeight
è!ğ
ePvE¼Sucûss
)

556  
çl£
;

559 ià(
	`PvA‰rUšt32S‘
(
Cam”a
.
HªdË
, "Width", 
äameWidth
è!ğ
ePvE¼Sucûss
)

561  
çl£
;

564 
	`PvA‰rEnumG‘
(
Cam”a
.
HªdË
, "Pix–FÜm©", 
pix–FÜm©
,256,
NULL
);

565 
	`PvA‰rUšt32G‘
(
Cam”a
.
HªdË
, "TÙ®By‹sP”F¿me", &
äameSize
);

568 iàĞ(
	`¡rcmp
(
pix–FÜm©
, "Mono8")==0) || (strcmp(pixelFormat, "Bayer8")==0) )

570 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(()
äameWidth
, ()
äameHeight
), 
IPL_DEPTH_8U
, 1);

571 
äame
->
widthS‹p
 = ()
äameWidth
;

572 
Cam”a
.
F¿me
.
ImageBufãrSize
 = 
äameSize
;

573 
Cam”a
.
F¿me
.
ImageBufãr
 = 
äame
->
imageD©a
;

575 iàĞ(
	`¡rcmp
(
pix–FÜm©
, "Mono16")==0) || (strcmp(pixelFormat, "Bayer16")==0) )

577 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(()
äameWidth
, ()
äameHeight
), 
IPL_DEPTH_16U
, 1);

578 
äame
->
widthS‹p
 = ()
äameWidth
*2;

579 
Cam”a
.
F¿me
.
ImageBufãrSize
 = 
äameSize
;

580 
Cam”a
.
F¿me
.
ImageBufãr
 = 
äame
->
imageD©a
;

582 iàĞ(
	`¡rcmp
(
pix–FÜm©
, "Rgb24")==0) || (strcmp(pixelFormat, "Bgr24")==0) )

584 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(()
äameWidth
, ()
äameHeight
), 
IPL_DEPTH_8U
, 3);

585 
äame
->
widthS‹p
 = ()
äameWidth
*3;

586 
Cam”a
.
F¿me
.
ImageBufãrSize
 = 
äameSize
;

587 
Cam”a
.
F¿me
.
ImageBufãr
 = 
äame
->
imageD©a
;

589 iàĞ(
	`¡rcmp
(
pix–FÜm©
, "Rgba32")==0) || (strcmp(pixelFormat, "Bgra32")==0) )

591 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(()
äameWidth
, ()
äameHeight
), 
IPL_DEPTH_8U
, 4);

592 
äame
->
widthS‹p
 = ()
äameWidth
*4;

593 
Cam”a
.
F¿me
.
ImageBufãrSize
 = 
äameSize
;

594 
Cam”a
.
F¿me
.
ImageBufãr
 = 
äame
->
imageD©a
;

597  
çl£
;

599  
Œue
;

600 
	}
}

602 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_PvAPI
Ğ
šdex
 )

604 
CvC­tu»CAM_PvAPI
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_PvAPI;

606 iàĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

607  
ÿ±u»
;

609 
d–‘e
 
ÿ±u»
;

610  
NULL
;

611 
	}
}

	@cap_qt.cpp

43 
	~"´ecomp.hµ
"

57 
	~<c¡dio
>

58 
	~<ÿs£¹
>

61 
	~<C¬bÚ/C¬bÚ.h
>

62 
	~<CÜeFound©iÚ/CÜeFound©iÚ.h
>

63 
	~<QuickTime/QuickTime.h
>

67 
	gdid_’‹r_mov›s
 = 0;

70 #´agm¨
m¬k
 
R—dšg
 
Video
 
Fes


73 
	sCvC­tu»_QT_Mov›


75 
Mov›
 
	mmyMov›
;

76 
GWÜldPŒ
 
	mmyGWÜld
;

78 
CvSize
 
	msize
;

79 
TimeV®ue
 
	mmov›_¡¬t_time
;

80 
	mnumb”_of_äames
;

81 
	mÃxt_äame_time
;

82 
	mÃxt_äame_numb”
;

84 
I¶Image
 * 
	mimage_rgb
;

85 
I¶Image
 * 
	mimage_bgr
;

87 } 
	tCvC­tu»_QT_Mov›
;

90 
icvO³nFe_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, cÚ¡ * 
f’ame
);

91 
icvClo£_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
);

92 
icvG‘Prİ”ty_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, 
´İ”ty_id
);

93 
icvS‘Prİ”ty_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
);

94 
icvG¿bF¿me_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
);

95 cÚ¡ * 
icvR‘r›veF¿me_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, );

98 
CvC­tu»_QT_Mov›
 * 
	$icvC­tu»FromFe_QT
 (cÚ¡ * 
f’ame
)

100 
did_’‹r_mov›s
 = 0;

101 ià(! 
did_’‹r_mov›s
)

103 
	`EÁ”Mov›s
();

104 
did_’‹r_mov›s
 = 1;

107 
CvC­tu»_QT_Mov›
 * 
ÿ±u»
 = 0;

109 ià(
f’ame
)

111 
ÿ±u»
 = (
CvC­tu»_QT_Mov›
 *è
	`cvAÎoc
 ( (*capture));

112 
	`mem£t
 (
ÿ±u»
, 0, (*capture));

114 ià(!
	`icvO³nFe_QT_Mov›
 (
ÿ±u»
, 
f’ame
))

115 
	`cvF»e
Ğ&
ÿ±u»
 );

118  
ÿ±u»
;

119 
	}
}

132 
	$icvO³nFe_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, cÚ¡ * 
f’ame
)

134 
Reù
 
myReù
;

135 
myResID
 = 0;

136 
HªdË
 
myD©aRef
 = 
n
;

137 
OSTy³
 
myD©aRefTy³
 = 0;

138 
OSE¼
 
myE¼
 = 
noE¼
;

142 
	`CË¬Mov›sStickyE¼Ü
 ();

145 
ÿ±u»
->
myMov›
 = 0;

146 
ÿ±u»
->
myGWÜld
 = 
n
;

149 
ÿ±u»
->
Ãxt_äame_time
 = -1;

150 
ÿ±u»
->
Ãxt_äame_numb”
 = -1;

151 
ÿ±u»
->
numb”_of_äames
 = -1;

152 
ÿ±u»
->
mov›_¡¬t_time
 = -1;

153 
ÿ±u»
->
size
 = 
	`cvSize
 (-1,-1);

157 
CFSŒšgRef
 
šP©h
 = 
	`CFSŒšgC»©eW™hCSŒšg
 (
kCFAÎoÿtÜDeçuÉ
, 
f’ame
, 
kCFSŒšgEncodšgISOL©š1
);

158 
	`OPENCV_ASSERT
 ((
šP©h
 !ğ
n
), "icvOpenFile_QT_Movie", "couldnt create CFString from‡ string");

161 
myE¼
 = 
	`QTNewD©aReã»nûFromFuÎP©hCFSŒšg
 (
šP©h
, 
kQTPOSIXP©hStyË
, 0, & 
myD©aRef
, & 
myD©aRefTy³
);

162 ià(
myE¼
 !ğ
noE¼
)

164 
	`årštf
 (
¡d”r
, "Couldn't create QTNewDataReferenceFromFullPathCFString().\n");

169 
myE¼
 = 
	`NewMov›FromD©aRef
(& 
ÿ±u»
->
myMov›
, 
ÃwMov›Aùive
 | 
ÃwMov›AsyncOK
 ,

170 & 
myResID
, 
myD©aRef
, 
myD©aRefTy³
);

173 
	`Di¥o£HªdË
 (
myD©aRef
);

176 ià(
myE¼
 !ğ
noE¼
)

178 
	`årštf
 (
¡d”r
, "Couldn'ˆü—‹‡ NewMov›FromD©aRef(è-ƒ¼Ü i %d.\n", 
myE¼
);

186 
OSTy³
 
whichMedŸTy³
 = 
Visu®MedŸCh¬aù”i¡ic
;

187 
TimeV®ue
 
theTime
 = -1;

190 
	`G‘Mov›NextIÁ”e¡šgTime
 (
ÿ±u»
->
myMov›
, (
ÃxtTimeMedŸSam¶e
 + 
ÃxtTimeEdgeOK
),

191 1, & 
whichMedŸTy³
, 
	`TimeV®ue
 (0), 0, & 
theTime
, 
NULL
);

192 ià(
theTime
 == -1)

194 
	`årštf
 (
¡d”r
, "Couldn't inquire first frameime\n");

197 
ÿ±u»
->
mov›_¡¬t_time
 = 
theTime
;

198 
ÿ±u»
->
Ãxt_äame_time
 = 
theTime
;

199 
ÿ±u»
->
Ãxt_äame_numb”
 = 0;

202 
ÿ±u»
->
numb”_of_äames
 = 0;

203 
theTime
 >= 0)

205 
	`G‘Mov›NextIÁ”e¡šgTime
 (
ÿ±u»
->
myMov›
, (
ÃxtTimeMedŸSam¶e
),

206 1, & 
whichMedŸTy³
, 
theTime
, 0, &heTime, 
NULL
);

207 
ÿ±u»
->
numb”_of_äames
++;

212 
	`G‘Mov›sE¼Ü
 ();

213 
	`G‘Mov›Box
 (
ÿ±u»
->
myMov›
, & 
myReù
);

214 
ÿ±u»
->
size
 = 
	`cvSize
 (
myReù
.
right
 - myReù.
Ëá
, myReù.
bÙtom
 - myReù.
tİ
);

217 
myE¼
 = 
	`QTNewGWÜld
 (& 
ÿ±u»
->
myGWÜld
, 
k32ARGBPix–FÜm©
 ,

218 & 
myReù
, 
n
,‚il, 0);

219 
	`OPENCV_ASSERT
 (
myE¼
 =ğ
noE¼
, "icvOpenFile_QT_Movie", "couldnt create QTNewGWorld() for output image");

220 
	`S‘Mov›GWÜld
 (
ÿ±u»
->
myMov›
, c­tu»->
myGWÜld
, 
n
);

223 
ÿ±u»
->
image_rgb
 = 
	`cvC»©eImageH—d”
 (ÿ±u»->
size
, 
IPL_DEPTH_8U
, 4);

226 
ÿ±u»
->
image_bgr
 = 
	`cvC»©eImage
 (ÿ±u»->
size
, 
IPL_DEPTH_8U
, 3);

230 
	}
}

238 
	$icvClo£_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
)

240 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvClose_QT_Movie", "'capture' is‡ NULL-pointer");

243 ià(
ÿ±u»
->
myMov›
)

245 
	`cvR–—£Image
 (& 
ÿ±u»
->
image_bgr
);

246 
	`cvR–—£ImageH—d”
 (& 
ÿ±u»
->
image_rgb
);

247 
	`Di¥o£GWÜld
 (
ÿ±u»
->
myGWÜld
);

248 
	`Di¥o£Mov›
 (
ÿ±u»
->
myMov›
);

253 
	}
}

261 
	$icvG‘Prİ”ty_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, 
´İ”ty_id
)

263 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvGetProperty_QT_Movie", "'capture' is‡ NULL-pointer");

264 
	`OPENCV_ASSERT
 (
ÿ±u»
->
myMov›
, "icvGetProperty_QT_Movie", "invalid Movie handle");

265 
	`OPENCV_ASSERT
 (
ÿ±u»
->
numb”_of_äames
 > 0, "icvGetProperty_QT_Movie", "movie has invalid‚umber of frames");

266 
	`OPENCV_ASSERT
 (
ÿ±u»
->
mov›_¡¬t_time
 >= 0, "icvGetProperty_QT_Movie", "movie has invalid startime");

269 
´İ”ty_id
)

271 
CV_CAP_PROP_POS_FRAMES
:

272  (
ÿ±u»
->
Ãxt_äame_numb”
);

274 
CV_CAP_PROP_POS_MSEC
:

275 
CV_CAP_PROP_POS_AVI_RATIO
:

277 
TimeV®ue
 
pos™iÚ
 = 
ÿ±u»
->
Ãxt_äame_time
 - c­tu»->
mov›_¡¬t_time
;

279 ià(
´İ”ty_id
 =ğ
CV_CAP_PROP_POS_MSEC
)

281 
TimeSÿË
 
timesÿË
 = 
	`G‘Mov›TimeSÿË
 (
ÿ±u»
->
myMov›
);

282  (
¡©ic_ÿ¡
<> (
pos™iÚ
è* 1000.0 / 
timesÿË
);

286 
TimeV®ue
 
du¿tiÚ
 = 
	`G‘Mov›Du¿tiÚ
 (
ÿ±u»
->
myMov›
);

287  (
¡©ic_ÿ¡
<> (
pos™iÚ
è/ 
du¿tiÚ
);

292 
CV_CAP_PROP_FRAME_WIDTH
:

293  
¡©ic_ÿ¡
<> (
ÿ±u»
->
size
.
width
);

295 
CV_CAP_PROP_FRAME_HEIGHT
:

296  
¡©ic_ÿ¡
<> (
ÿ±u»
->
size
.
height
);

298 
CV_CAP_PROP_FPS
:

300 
TimeV®ue
 
du¿tiÚ
 = 
	`G‘Mov›Du¿tiÚ
 (
ÿ±u»
->
myMov›
);

301 
TimeSÿË
 
timesÿË
 = 
	`G‘Mov›TimeSÿË
 (
ÿ±u»
->
myMov›
);

303  (
ÿ±u»
->
numb”_of_äames
 / (
¡©ic_ÿ¡
<> (
du¿tiÚ
è/ 
timesÿË
));

306 
CV_CAP_PROP_FRAME_COUNT
:

307  
¡©ic_ÿ¡
<> (
ÿ±u»
->
numb”_of_äames
);

309 
CV_CAP_PROP_FOURCC
:

310 
CV_CAP_PROP_FORMAT
:

311 
CV_CAP_PROP_MODE
:

314 
	`OPENCV_ERROR
 (
CV_StsBadArg
, "icvSetProperty_QT_Movie", "unknown or unhandled…roperty_id");

315  
CV_StsBadArg
;

319 
	}
}

328 
	$icvS‘Prİ”ty_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
)

330 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvSetProperty_QT_Movie", "'capture' is‡ NULL-pointer");

331 
	`OPENCV_ASSERT
 (
ÿ±u»
->
myMov›
, "icvSetProperty_QT_Movie", "invalid Movie handle");

332 
	`OPENCV_ASSERT
 (
ÿ±u»
->
numb”_of_äames
 > 0, "icvSetProperty_QT_Movie", "movie has invalid‚umber of frames");

333 
	`OPENCV_ASSERT
 (
ÿ±u»
->
mov›_¡¬t_time
 >= 0, "icvSetProperty_QT_Movie", "movie has invalid startime");

340 
´İ”ty_id
)

342 
CV_CAP_PROP_POS_MSEC
:

343 
CV_CAP_PROP_POS_AVI_RATIO
:

345 
TimeV®ue
 
de¡š©iÚ
;

346 
OSTy³
 
myTy³
 = 
Visu®MedŸCh¬aù”i¡ic
;

347 
OSE¼
 
myE¼
 = 
noE¼
;

349 ià(
´İ”ty_id
 =ğ
CV_CAP_PROP_POS_MSEC
)

351 
TimeSÿË
 
timesÿË
 = 
	`G‘Mov›TimeSÿË
 (
ÿ±u»
->
myMov›
);

352 
de¡š©iÚ
 = 
¡©ic_ÿ¡
<
TimeV®ue
> (
v®ue
 / 1000.0 * 
timesÿË
 + 
ÿ±u»
->
mov›_¡¬t_time
);

356 
TimeV®ue
 
du¿tiÚ
 = 
	`G‘Mov›Du¿tiÚ
 (
ÿ±u»
->
myMov›
);

357 
de¡š©iÚ
 = 
¡©ic_ÿ¡
<
TimeV®ue
> (
v®ue
 * 
du¿tiÚ
 + 
ÿ±u»
->
mov›_¡¬t_time
);

361 ià(
ÿ±u»
->
Ãxt_äame_time
 =ğ
de¡š©iÚ
)

365 ià(
ÿ±u»
->
Ãxt_äame_time
 < 
de¡š©iÚ
)

367 
ÿ±u»
->
Ãxt_äame_time
 < 
de¡š©iÚ
)

369 
ÿ±u»
->
Ãxt_äame_numb”
++;

370 
	`G‘Mov›NextIÁ”e¡šgTime
 (
ÿ±u»
->
myMov›
, 
ÃxtTimeS‹p
, 1, & 
myTy³
, c­tu»->
Ãxt_äame_time
,

371 1, & 
ÿ±u»
->
Ãxt_äame_time
, 
NULL
);

372 
myE¼
 = 
	`G‘Mov›sE¼Ü
();

373 ià(
myE¼
 !ğ
noE¼
)

375 
	`årštf
 (
¡d”r
, "Couldn't go ono GetMovieNextInterestingTime() in icvGrabFrame_QT.\n");

382 
ÿ±u»
->
Ãxt_äame_time
 > 
de¡š©iÚ
)

384 
ÿ±u»
->
Ãxt_äame_numb”
--;

385 
	`G‘Mov›NextIÁ”e¡šgTime
 (
ÿ±u»
->
myMov›
, 
ÃxtTimeS‹p
, 1, & 
myTy³
, c­tu»->
Ãxt_äame_time
,

386 -1, & 
ÿ±u»
->
Ãxt_äame_time
, 
NULL
);

387 
myE¼
 = 
	`G‘Mov›sE¼Ü
();

388 ià(
myE¼
 !ğ
noE¼
)

390 
	`årštf
 (
¡d”r
, "Couldn't go backo GetMovieNextInterestingTime() in icvGrabFrame_QT.\n");

398 
CV_CAP_PROP_POS_FRAMES
:

400 
TimeV®ue
 
de¡š©iÚ
 = 
¡©ic_ÿ¡
<TimeV®ue> (
v®ue
);

401 
dœeùiÚ
 = (
de¡š©iÚ
 > 
ÿ±u»
->
Ãxt_äame_numb”
) ? 1 : -1;

402 
OSTy³
 
myTy³
 = 
Visu®MedŸCh¬aù”i¡ic
;

403 
OSE¼
 
myE¼
 = 
noE¼
;

405 
de¡š©iÚ
 !ğ
ÿ±u»
->
Ãxt_äame_numb”
)

407 
ÿ±u»
->
Ãxt_äame_numb”
 +ğ
dœeùiÚ
;

408 
	`G‘Mov›NextIÁ”e¡šgTime
 (
ÿ±u»
->
myMov›
, 
ÃxtTimeS‹p
, 1, & 
myTy³
, c­tu»->
Ãxt_äame_time
,

409 
dœeùiÚ
, & 
ÿ±u»
->
Ãxt_äame_time
, 
NULL
);

410 
myE¼
 = 
	`G‘Mov›sE¼Ü
();

411 ià(
myE¼
 !ğ
noE¼
)

413 
	`årštf
 (
¡d”r
, "Couldn't stepo desired frame‚umber in icvGrabFrame_QT.\n");

422 
	`OPENCV_ERROR
 (
CV_StsBadArg
, "icvSetProperty_QT_Movie", "unknown or unhandled…roperty_id");

428 
	}
}

438 
	$icvG¿bF¿me_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
)

440 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvGrabFrame_QT_Movie", "'capture' is‡ NULL-pointer");

441 
	`OPENCV_ASSERT
 (
ÿ±u»
->
myMov›
, "icvGrabFrame_QT_Movie", "invalid Movie handle");

443 
TimeV®ue
 
myCu¼Time
;

444 
OSTy³
 
myTy³
 = 
Visu®MedŸCh¬aù”i¡ic
;

445 
OSE¼
 
myE¼
 = 
noE¼
;

449 
	`S‘Mov›TimeV®ue
 (
ÿ±u»
->
myMov›
, c­tu»->
Ãxt_äame_time
);

450 
myE¼
 = 
	`G‘Mov›sE¼Ü
();

451 ià(
myE¼
 !ğ
noE¼
)

453 
	`årštf
 (
¡d”r
, "Couldn't SetMovieTimeValue() in icvGrabFrame_QT_Movie.\n");

458 
myCu¼Time
 = 
	`G‘Mov›Time
 (
ÿ±u»
->
myMov›
, 
NULL
);

461 
ÿ±u»
->
Ãxt_äame_numb”
++;

462 
	`G‘Mov›NextIÁ”e¡šgTime
 (
ÿ±u»
->
myMov›
, 
ÃxtTimeS‹p
, 1, & 
myTy³
, 
myCu¼Time
, 1, & c­tu»->
Ãxt_äame_time
, 
NULL
);

463 
myE¼
 = 
	`G‘Mov›sE¼Ü
();

464 ià(
myE¼
 !ğ
noE¼
)

466 
	`årštf
 (
¡d”r
, "Couldn't GetMovieNextInterestingTime() in icvGrabFrame_QT_Movie.\n");

472 
	}
}

481 cÚ¡ * 
	$icvR‘r›veF¿me_QT_Mov›
 (
CvC­tu»_QT_Mov›
 * 
ÿ±u»
, )

483 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvRetrieveFrame_QT_Movie", "'capture' is‡ NULL-pointer");

484 
	`OPENCV_ASSERT
 (
ÿ±u»
->
myMov›
, "icvRetrieveFrame_QT_Movie", "invalid Movie handle");

485 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_rgb
, "icvRetrieveFrame_QT_Movie", "invalid source image");

486 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_bgr
, "icvRetrieveFrame_QT_Movie", "invalid destination image");

488 
PixM­HªdË
 
myPixM­HªdË
 = 
n
;

489 
OSE¼
 
myE¼
 = 
noE¼
;

494 
	`Upd©eMov›
 (
ÿ±u»
->
myMov›
);

495 
myE¼
 = 
	`G‘Mov›sE¼Ü
 ();

496 ià(
myE¼
 !ğ
noE¼
)

498 
	`årštf
 (
¡d”r
, "Couldn't UpdateMovie() in icvRetrieveFrame_QT_Movie().\n");

503 
	`Mov›sTask
 (
ÿ±u»
->
myMov›
, 0L);

504 
myE¼
 = 
	`G‘Mov›sE¼Ü
 ();

505 ià(
myE¼
 !ğ
noE¼
)

507 
	`årštf
 (
¡d”r
, "MoviesTask() didn't succeed in icvRetrieveFrame_QT_Movie().\n");

515 
myPixM­HªdË
 = 
	`G‘GWÜldPixM­
 (
ÿ±u»
->
myGWÜld
);

516 
	`LockPix–s
 (
myPixM­HªdË
);

517 
	`cvS‘D©a
 (
ÿ±u»
->
image_rgb
, 
	`G‘PixBa£Addr
 (
myPixM­HªdË
è+ 1, 
	`G‘PixRowBy‹s
 (myPixMapHandle));

520 
	`cvCvtCŞÜ
 (
ÿ±u»
->
image_rgb
, c­tu»->
image_bgr
, 
CV_RGBA2BGR
);

523 
	`UÆockPix–s
 (
myPixM­HªdË
);

526  
ÿ±u»
->
image_bgr
;

527 
	}
}

531 #´agm¨
m¬k
 -

532 #´agm¨
m¬k
 
C­turšg
 
äom
 
Video
 
Cam”as


534 #ifdeà
USE_VDIG_VERSION


537 
	sCvC­tu»_QT_Cam_vdig


539 
CompÚ’tIn¡ªû
 
	mg¿bb”
;

540 
	mchªÃl
;

541 
GWÜldPŒ
 
	mmyGWÜld
;

542 
PixM­HªdË
 
	mpixm­
;

544 
CvSize
 
	msize
;

545 
	mnumb”_of_äames
;

547 
I¶Image
 * 
	mimage_rgb
;

548 
I¶Image
 * 
	mimage_bgr
;

550 } 
	tCvC­tu»_QT_Cam
;

554 
	sCvC­tu»_QT_Cam_b¬g


556 
SeqG¿bCompÚ’t
 
	mg¿bb”
;

557 
SGChªÃl
 
	mchªÃl
;

558 
GWÜldPŒ
 
	mgwÜld
;

559 
Reù
 
	mbounds
;

560 
ImageSequ’û
 
	m£qu’û
;

562 vŞ©
boŞ
 
	mgÙ_äame
;

564 
CvSize
 
	msize
;

565 
I¶Image
 * 
	mimage_rgb
;

566 
I¶Image
 * 
	mimage_bgr
;

568 } 
	tCvC­tu»_QT_Cam
;

572 
icvO³nCam”a_QT
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, cÚ¡ 
šdex
);

573 
icvClo£_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
);

574 
icvG‘Prİ”ty_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, 
´İ”ty_id
);

575 
icvS‘Prİ”ty_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
);

576 
icvG¿bF¿me_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
);

577 cÚ¡ * 
icvR‘r›veF¿me_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, );

586 
CvC­tu»_QT_Cam
 * 
	$icvC­tu»FromCam_QT
 (cÚ¡ 
šdex
)

588 ià(! 
did_’‹r_mov›s
)

590 
	`EÁ”Mov›s
();

591 
did_’‹r_mov›s
 = 1;

594 
CvC­tu»_QT_Cam
 * 
ÿ±u»
 = 0;

596 ià(
šdex
 >= 0)

598 
ÿ±u»
 = (
CvC­tu»_QT_Cam
 *è
	`cvAÎoc
 ( (*capture));

599 
	`mem£t
 (
ÿ±u»
, 0, (*capture));

601 ià(!
	`icvO³nCam”a_QT
 (
ÿ±u»
, 
šdex
))

602 
	`cvF»e
 (&
ÿ±u»
);

605  
ÿ±u»
;

606 
	}
}

609 
	$icvG‘Prİ”ty_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, 
´İ”ty_id
)

611 
	`as£¹
 (0);

613 
	}
}

616 
	$icvS‘Prİ”ty_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
)

618 
	`as£¹
 (0);

620 
	}
}

622 #ifdeà
USE_VDIG_VERSION


623 #´agm¨
m¬k
 
C­turšg
 
usšg
 
VDIG


632 
	$icvO³nCam”a_QT
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, cÚ¡ 
šdex
)

634 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvOpenCamera_QT", "'capture' is‡ NULL-pointer");

635 
	`OPENCV_ASSERT
 (
šdex
 >=0, "icvOpenCamera_QT", "camera index is‚egative");

637 
CompÚ’tDesütiÚ
 
compÚ’t_desütiÚ
;

638 
CompÚ’t
 
compÚ’t
 = 0;

639 
numb”_of_šputs
 = 0;

640 
Reù
 
myReù
;

641 
CompÚ’tResuÉ
 
»suÉ
 = 
noE¼
;

645 
compÚ’t_desütiÚ
.
compÚ’tTy³
 = 
videoDig™iz”CompÚ’tTy³
;

646 
compÚ’t_desütiÚ
.
compÚ’tSubTy³
 = 0L;

647 
compÚ’t_desütiÚ
.
compÚ’tMªuçùu»r
 = 0L;

648 
compÚ’t_desütiÚ
.
compÚ’tFÏgs
 = 0L;

649 
compÚ’t_desütiÚ
.
compÚ’tFÏgsMask
 = 0L;

653 
compÚ’t
 = 
	`FšdNextCompÚ’t
 (compÚ’t, & 
compÚ’t_desütiÚ
);

656 ià(
compÚ’t
)

659 #iâdeà
NDEBUG


660 
CompÚ’tDesütiÚ
 
desc
;

661 
HªdË
 
ÇmeHªdË
 = 
	`NewHªdËCË¬
 (200);

662 
ÇmeBufãr
 [255];

664 
»suÉ
 = 
	`G‘CompÚ’tInfo
 (
compÚ’t
, & 
desc
, 
ÇmeHªdË
, 
n
,‚il);

665 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt GetComponentInfo()");

666 
	`OPENCV_ASSERT
 (*
ÇmeHªdË
, "icvOpenCamera_QT", "No‚ame„eturned by GetComponentInfo()");

667 
	`¢´štf
 (
ÇmeBufãr
, (**
ÇmeHªdË
) + 1, "%s", (*) (*‚ameHandle + 1));

668 
	`´štf
 ("- Videodeviû: %s\n", 
ÇmeBufãr
);

669 
	`Di¥o£HªdË
 (
ÇmeHªdË
);

673 
ÿ±u»
->
g¿bb”
 = 
	`O³nCompÚ’t
 (
compÚ’t
);

674 ià(
ÿ±u»
->
g¿bb”
)

676 
»suÉ
 = 
	`VDG‘Numb”OfIÅuts
 (
ÿ±u»
->
g¿bb”
, & c­tu»->
chªÃl
);

677 ià(
»suÉ
 !ğ
noE¼
)

678 
	`årštf
 (
¡d”r
, "CouldÁ G‘Numb”OfIÅuts: %d\n", (è
»suÉ
);

681 #iâdeà
NDEBUG


682 
	`´štf
 (" Numb” oàšputs: %d\n", (è
ÿ±u»
->
chªÃl
 + 1);

686 
numb”_of_šputs
 +ğ
ÿ±u»
->
chªÃl
 + 1;

690 ià(
numb”_of_šputs
 > 
šdex
)

693 
ÿ±u»
->
chªÃl
 = 
šdex
 - 
numb”_of_šputs
 + capture->channel + 1;

694 
	`OPENCV_ASSERT
 (
ÿ±u»
->
chªÃl
 >= 0, "icvOpenCamera_QT", "negative channel‚umber");

697 #iâdeà
NDEBUG


698 
Çme
[256];

699 
SŒ255
 
ÇmeBufãr
;

701 
»suÉ
 = 
	`VDG‘IÅutName
 (
ÿ±u»
->
g¿bb”
, c­tu»->
chªÃl
, 
ÇmeBufãr
);

702 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "ictOpenCamera_QT", "couldnt GetInputName()");

703 
	`¢´štf
 (
Çme
, *
ÇmeBufãr
, "%s", (*) (nameBuffer + 1));

704 
	`´štf
 (" Choosšg iÅuˆ%d - %s\n", (è
ÿ±u»
->
chªÃl
, 
Çme
);

713 
	`Clo£CompÚ’t
 (
ÿ±u»
->
g¿bb”
);

717 
compÚ’t
);

720 ià(! 
compÚ’t
)

722 
	`årštf
(
¡d”r
, "NÙƒnough iÅut avaabË - cª'ˆchoo£ iÅuˆ%d\n", 
šdex
);

728 
	`CË¬Mov›sStickyE¼Ü
();

731 
»suÉ
 = 
	`VDS‘IÅut
 (
ÿ±u»
->
g¿bb”
, c­tu»->
chªÃl
);

732 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt select video digitizer input");

735 
»suÉ
 = 
	`VDG‘AùiveSrcReù
 (
ÿ±u»
->
g¿bb”
, c­tu»->
chªÃl
, & 
myReù
);

736 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt create VDGetActiveSrcRect from digitizer");

737 
myReù
.
right
 = 640; myReù.
bÙtom
 = 480;

738 
ÿ±u»
->
size
 = 
	`cvSize
 (
myReù
.
right
 - myReù.
Ëá
, myReù.
bÙtom
 - myReù.
tİ
);

739 
	`´štf
 ("Sourû„eù i %d, %d -- %d, %d\n", (è
myReù
.
Ëá
, (èmyReù.
tİ
, (èmyReù.
right
, (èmyReù.
bÙtom
);

742 
»suÉ
 = 
	`QTNewGWÜld
 (& 
ÿ±u»
->
myGWÜld
, 
k32ARGBPix–FÜm©
, & 
myReù
, 
n
,‚il, 0);

743 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt create QTNewGWorld() for output image");

746 
ÿ±u»
->
pixm­
 = 
	`G‘GWÜldPixM­
 (ÿ±u»->
myGWÜld
);

747 
»suÉ
 = 
	`G‘Mov›sE¼Ü
 ();

748 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt get…ixmap");

751 
»suÉ
 = 
	`VDS‘Dig™iz”Reù
 (
ÿ±u»
->
g¿bb”
, & 
myReù
);

752 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt create VDGetActiveSrcRect from digitizer");

755 
»suÉ
 = 
	`VDS‘PÏyThruDe¡š©iÚ
 (
ÿ±u»
->
g¿bb”
, c­tu»->
pixm­
, & 
myReù
, 
n
,‚il);

756 
	`´štf
 ("QuickTim”rÜ: %d\n", (è
»suÉ
);

757 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set video destination");

760 
»suÉ
 = 
	`VDG‘PÏyThruDe¡š©iÚ
 (
ÿ±u»
->
g¿bb”
, & c­tu»->
pixm­
, 
n
,‚il,‚il);

761 
	`´štf
 ("QuickTim”rÜ: %d\n", (è
»suÉ
);

762 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt get video destination");

763 
	`OPENCV_ASSERT
 (
ÿ±u»
->
pixm­
 !ğ
n
, "icvOpenCamera_QT", "empty set video destination");

766 
	`G‘PixBounds
 (
ÿ±u»
->
pixm­
, & 
myReù
);

767 
ÿ±u»
->
size
 = 
	`cvSize
 (
myReù
.
right
 - myReù.
Ëá
, myReù.
bÙtom
 - myReù.
tİ
);

770 
ÿ±u»
->
image_rgb
 = 
	`cvC»©eImageH—d”
 (ÿ±u»->
size
, 
IPL_DEPTH_8U
, 4);

771 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_rgb
, "icvOpenCamera_QT", "couldnt create image header");

774 
ÿ±u»
->
image_bgr
 = 
	`cvC»©eImage
 (ÿ±u»->
size
, 
IPL_DEPTH_8U
, 3);

775 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_bgr
, "icvOpenCamera_QT", "couldnt create image");

778 
»suÉ
 = 
	`VDC­tu»S‹Chªgšg
 (
ÿ±u»
->
g¿bb”
, 
vdFÏgC­tu»IsFÜRecÜd
 | 
vdFÏgC­tu»S¹šg
 | 
vdFÏgC­tu»LowL©’cy
);

779 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set capture state");

784 
	}
}

786 
	$icvClo£_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
)

788 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvClose_QT_Cam", "'capture' is‡ NULL-pointer");

790 
CompÚ’tResuÉ
 
»suÉ
 = 
noE¼
;

793 
»suÉ
 = 
	`VDC­tu»S‹Chªgšg
 (
ÿ±u»
->
g¿bb”
, 
vdFÏgC­tu»Stİpšg
);

794 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set capture state");

797 
	`cvR–—£Image
 (& 
ÿ±u»
->
image_bgr
);

798 
	`cvR–—£ImageH—d”
 (& 
ÿ±u»
->
image_rgb
);

799 
	`Di¥o£GWÜld
 (
ÿ±u»
->
myGWÜld
);

800 
	`Clo£CompÚ’t
 (
ÿ±u»
->
g¿bb”
);

804 
	}
}

806 
	$icvG¿bF¿me_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
)

808 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvGrabFrame_QT_Cam", "'capture' is‡ NULL-pointer");

809 
	`OPENCV_ASSERT
 (
ÿ±u»
->
g¿bb”
, "icvGrabFrame_QT_Cam", "'grabber' is‡ NULL-pointer");

811 
CompÚ’tResuÉ
 
»suÉ
 = 
noE¼
;

814 
»suÉ
 = 
	`VDG¿bOÃF¿me
 (
ÿ±u»
->
g¿bb”
);

815 ià(
»suÉ
 !ğ
noE¼
)

817 
	`årštf
 (
¡d”r
, "VDGrabOneFrame failed\n");

823 
	}
}

825 cÚ¡ * 
	$icvR‘r›veF¿me_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, )

827 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvRetrieveFrame_QT_Cam", "'capture' is‡ NULL-pointer");

829 
PixM­HªdË
 
myPixM­HªdË
 = 
n
;

836 
myPixM­HªdË
 = 
ÿ±u»
->
pixm­
;

837 
	`LockPix–s
 (
myPixM­HªdË
);

838 
	`cvS‘D©a
 (
ÿ±u»
->
image_rgb
, 
	`G‘PixBa£Addr
 (
myPixM­HªdË
è+ 1, 
	`G‘PixRowBy‹s
 (myPixMapHandle));

841 
	`cvCvtCŞÜ
 (
ÿ±u»
->
image_rgb
, c­tu»->
image_bgr
, 
CV_RGBA2BGR
);

844 
	`UÆockPix–s
 (
myPixM­HªdË
);

847  
ÿ±u»
->
image_bgr
;

848 
	}
}

851 #´agm¨
m¬k
 
C­turšg
 
usšg
 
Sequ’û
 
G¿bb”


853 
OSE¼
 
	$icvD©aProc_QT_Cam
 (
SGChªÃl
 
chªÃl
, 
PŒ
 
¿w_d©a
, 
Ën
, *, , 
TimeV®ue
, , 
»fCÚ
)

855 
CvC­tu»_QT_Cam
 * 
ÿ±u»
 = (CvC­tu»_QT_Cam *è
»fCÚ
;

856 
CodecFÏgs
 
ignÜe
;

857 
CompÚ’tResuÉ
 
”r
 = 
noE¼
;

861 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvDataProc_QT_Cam", "'capture' is‡ NULL-pointer");

862 
	`OPENCV_ASSERT
 (
ÿ±u»
->
gwÜld
, "icvDataProc_QT_Cam", "'gworld' is‡ NULL-pointer");

863 
	`OPENCV_ASSERT
 (
¿w_d©a
, "icvDataProc_QT_Cam", "'raw_data' is‡ NULL-pointer");

866 ià(
ÿ±u»
->
£qu’û
 == 0)

868 
ImageDesütiÚHªdË
 
desütiÚ
 = (ImageDesütiÚHªdËè
	`NewHªdË
(0);

871 
”r
 = 
	`SGG‘ChªÃlSam¶eDesütiÚ
 (
chªÃl
, (
HªdË
è
desütiÚ
);

872 
	`OPENCV_ASSERT
 (
”r
 =ğ
noE¼
, "icvDataProc_QT_Cam", "couldnt get channel sample description");

876 
Reù
 
sourûReù
;

877 
sourûReù
.
tİ
 = 0;

878 
sourûReù
.
Ëá
 = 0;

879 
sourûReù
.
right
 = (**
desütiÚ
).
width
;

880 
sourûReù
.
bÙtom
 = (**
desütiÚ
).
height
;

882 
M©rixRecÜd
 
sÿËM©rix
;

883 
	`ReùM©rix
(&
sÿËM©rix
,&
sourûReù
,&
ÿ±u»
->
bounds
);

885 
”r
 = 
	`Decom´essSequ’ûBegš
 (&
ÿ±u»
->
£qu’û
, 
desütiÚ
, c­tu»->
gwÜld
, 0,&ÿ±u»->
bounds
,&
sÿËM©rix
, 
¤cCİy
, 
NULL
, 0, 
codecNÜm®Qu®™y
, 
be¡S³edCodec
);

888 
	`OPENCV_ASSERT
 (
”r
 =ğ
noE¼
, "icvDataProc_QT_Cam", "couldnt begin decompression sequence");

889 
	`Di¥o£HªdË
 ((
HªdË
è
desütiÚ
);

893 
”r
 = 
	`Decom´essSequ’ûF¿meS
 (
ÿ±u»
->
£qu’û
, 
¿w_d©a
, 
Ën
, 0, &
ignÜe
, 
n
);

894 ià(
”r
 !ğ
noE¼
)

896 
	`årštf
 (
¡d”r
, "icvD©aProc_QT_Cam: couldn'ˆdecom´es äam- %d\n", (è
”r
);

897  
”r
;

907 
ÿ±u»
->
gÙ_äame
 = 
Œue
;

908  
noE¼
;

909 
	}
}

912 
	$icvO³nCam”a_QT
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, cÚ¡ 
šdex
)

914 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvOpenCamera_QT", "'capture' is‡ NULL-pointer");

915 
	`OPENCV_ASSERT
 (
šdex
 >= 0, "icvOpenCamera_QT", "camera index is‚egative");

917 
PixM­HªdË
 
pixm­
 = 
n
;

918 
OSE¼
 
»suÉ
 = 
noE¼
;

921 
ÿ±u»
->
g¿bb”
 = 
	`O³nDeçuÉCompÚ’t
 (
SeqG¿bCompÚ’tTy³
, 0);

922 
	`OPENCV_ASSERT
 (
ÿ±u»
->
g¿bb”
, "icvOpenCamera_QT", "couldnt create image");

925 
»suÉ
 = 
	`SGIn™Ÿlize
 (
ÿ±u»
->
g¿bb”
);

926 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt initialize sequence grabber");

927 
»suÉ
 = 
	`SGS‘D©aRef
 (
ÿ±u»
->
g¿bb”
, 0, 0, 
£qG¿bDÚtMakeMov›
);

928 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set data„eference of sequence grabber");

931 
»suÉ
 = 
	`SGNewChªÃl
 (
ÿ±u»
->
g¿bb”
, 
VideoMedŸTy³
, & (ÿ±u»->
chªÃl
));

932 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt create‚ew video channel");

935 
SGDeviûLi¡
 
deviû_li¡
 = 0;

936 
»suÉ
 = 
	`SGG‘ChªÃlDeviûLi¡
 (
ÿ±u»
->
chªÃl
, 0, & 
deviû_li¡
);

937 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt get channel device†ist");

938 
i
 = 0, 
cu¼’t_šdex
 = 1; i < (*
deviû_li¡
)->
couÁ
; i++)

940 
SGDeviûName
 
deviû
 = (*
deviû_li¡
)->
’Œy
[
i
];

941 ià(
deviû
.
æags
 == 0)

943 ià(
cu¼’t_šdex
 =ğ
šdex
)

945 
»suÉ
 = 
	`SGS‘ChªÃlDeviû
 (
ÿ±u»
->
chªÃl
, 
deviû
.
Çme
);

946 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt sethe channel video device");

949 
cu¼’t_šdex
++;

952 
»suÉ
 = 
	`SGDi¥o£DeviûLi¡
 (
ÿ±u»
->
g¿bb”
, 
deviû_li¡
);

953 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt disposehe channel device†ist");

958 
»suÉ
 = 
	`SGG‘SrcVideoBounds
 (
ÿ±u»
->
chªÃl
, & (ÿ±u»->
bounds
));

959 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set video channel bounds");

962 
»suÉ
 = 
	`QTNewGWÜld
 (& (
ÿ±u»
->
gwÜld
), 
k32ARGBPix–FÜm©
, & (ÿ±u»->
bounds
), 0, 0, 0);

963 
»suÉ
 = 
	`SGS‘GWÜld
 (
ÿ±u»
->
g¿bb”
, c­tu»->
gwÜld
, 0);

964 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set GWorld for sequence grabber");

965 
»suÉ
 = 
	`SGS‘ChªÃlBounds
 (
ÿ±u»
->
chªÃl
, & (ÿ±u»->
bounds
));

966 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set video channel bounds");

967 
»suÉ
 = 
	`SGS‘ChªÃlU§ge
 (
ÿ±u»
->
chªÃl
, 
£qG¿bRecÜd
);

968 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set channel usage");

971 
»suÉ
 = 
	`SGS¹RecÜd
 (
ÿ±u»
->
g¿bb”
);

972 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt start„ecording");

975 
ImageDesütiÚHªdË
 
imageDesc
 = (ImageDesütiÚHªdË)
	`NewHªdË
(0);

976 
»suÉ
 = 
	`SGG‘ChªÃlSam¶eDesütiÚ
(
ÿ±u»
->
chªÃl
, (
HªdË
)
imageDesc
);

977 
	`OPENCV_ASSERT
Ğ
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldn't get image size");

978 
ÿ±u»
->
bounds
.
right
 = (**
imageDesc
).
width
;

979 
ÿ±u»
->
bounds
.
bÙtom
 = (**
imageDesc
).
height
;

980 
	`Di¥o£HªdË
 ((
HªdË
è
imageDesc
);

983 
»suÉ
 = 
	`SGStİ
 (
ÿ±u»
->
g¿bb”
);

984 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icveClose_QT_Cam", "couldnt stop„ecording");

987 
GWÜldPŒ
 
tmpgwÜld
;

988 
»suÉ
 = 
	`QTNewGWÜld
Ğ&
tmpgwÜld
, 
k32ARGBPix–FÜm©
, &(
ÿ±u»
->
bounds
), 0, 0, 0);

989 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt create offscreen GWorld");

990 
»suÉ
 = 
	`SGS‘GWÜld
Ğ
ÿ±u»
->
g¿bb”
, 
tmpgwÜld
, 0);

991 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set GWorld for sequence grabber");

992 
	`Di¥o£GWÜld
Ğ
ÿ±u»
->
gwÜld
 );

993 
ÿ±u»
->
gwÜld
 = 
tmpgwÜld
;

995 
»suÉ
 = 
	`SGS‘ChªÃlBounds
 (
ÿ±u»
->
chªÃl
, & (ÿ±u»->
bounds
));

996 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set video channel bounds");

999 
ÿ±u»
->
size
 = 
	`cvSize
 (ÿ±u»->
bounds
.
right
 - c­tu»->bounds.
Ëá
, c­tu»->bounds.
bÙtom
 - c­tu»->bounds.
tİ
);

1005 
ÿ±u»
->
image_rgb
 = 
	`cvC»©eImageH—d”
 (ÿ±u»->
size
, 
IPL_DEPTH_8U
, 4);

1006 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_rgb
, "icvOpenCamera_QT", "couldnt create image header");

1007 
pixm­
 = 
	`G‘GWÜldPixM­
 (
ÿ±u»
->
gwÜld
);

1008 
	`OPENCV_ASSERT
 (
pixm­
, "icvOpenCamera_QT", "didn't get GWorld PixMap handle");

1009 
	`LockPix–s
 (
pixm­
);

1010 
	`cvS‘D©a
 (
ÿ±u»
->
image_rgb
, 
	`G‘PixBa£Addr
 (
pixm­
è+ 1, 
	`G‘PixRowBy‹s
 (pixmap));

1013 
ÿ±u»
->
image_bgr
 = 
	`cvC»©eImage
 (ÿ±u»->
size
, 
IPL_DEPTH_8U
, 3);

1014 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_bgr
, "icvOpenCamera_QT", "couldnt create image");

1018 
»suÉ
 = 
	`SGS‘D©aProc
 (
ÿ±u»
->
g¿bb”
, 
	`NewSGD©aUPP
 (
icvD©aProc_QT_Cam
), () capture);

1019 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt set data…roc");

1022 
»suÉ
 = 
	`SGS¹RecÜd
 (
ÿ±u»
->
g¿bb”
);

1023 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icvOpenCamera_QT", "couldnt start„ecording");

1026 
	}
}

1029 
	$icvClo£_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
)

1031 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvClose_QT_Cam", "'capture' is‡ NULL-pointer");

1033 
OSE¼
 
»suÉ
 = 
noE¼
;

1037 
»suÉ
 = 
	`SGStİ
 (
ÿ±u»
->
g¿bb”
);

1038 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icveClose_QT_Cam", "couldnt stop„ecording");

1041 
»suÉ
 = 
	`Clo£CompÚ’t
 (
ÿ±u»
->
g¿bb”
);

1042 
	`OPENCV_ASSERT
 (
»suÉ
 =ğ
noE¼
, "icveClose_QT_Cam", "couldnt close sequence grabber component");

1045 
	`CDSequ’ûEnd
 (
ÿ±u»
->
£qu’û
);

1048 
	`cvR–—£Image
 (& 
ÿ±u»
->
image_bgr
);

1049 
	`cvR–—£ImageH—d”
 (& 
ÿ±u»
->
image_rgb
);

1050 
	`Di¥o£GWÜld
 (
ÿ±u»
->
gwÜld
);

1054 
	}
}

1056 
	$icvG¿bF¿me_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
)

1058 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvGrabFrame_QT_Cam", "'capture' is‡ NULL-pointer");

1059 
	`OPENCV_ASSERT
 (
ÿ±u»
->
g¿bb”
, "icvGrabFrame_QT_Cam", "'grabber' is‡ NULL-pointer");

1061 
CompÚ’tResuÉ
 
»suÉ
 = 
noE¼
;

1065 
»suÉ
 = 
	`SGIdË
 (
ÿ±u»
->
g¿bb”
);

1066 ià(
»suÉ
 !ğ
noE¼
)

1068 
	`årštf
 (
¡d”r
, "SGIdË faed iÀicvG¿bF¿me_QT_Cam w™hƒ¼Ü %d\n", (è
»suÉ
);

1074 
	}
}

1076 cÚ¡ * 
	$icvR‘r›veF¿me_QT_Cam
 (
CvC­tu»_QT_Cam
 * 
ÿ±u»
, )

1078 
	`OPENCV_ASSERT
 (
ÿ±u»
, "icvRetrieveFrame_QT_Cam", "'capture' is‡ NULL-pointer");

1079 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_rgb
, "icvRetrieveFrame_QT_Cam", "invalid source image");

1080 
	`OPENCV_ASSERT
 (
ÿ±u»
->
image_bgr
, "icvRetrieveFrame_QT_Cam", "invalid destination image");

1082 
OSE¼
 
myE¼
 = 
noE¼
;

1086 ! 
ÿ±u»
->
gÙ_äame
)

1088 
myE¼
 = 
	`SGIdË
 (
ÿ±u»
->
g¿bb”
);

1089 ià(
myE¼
 !ğ
noE¼
)

1091 
	`årštf
 (
¡d”r
, "SGIdle() didn't succeed in icvRetrieveFrame_QT_Cam().\n");

1097 
	`cvCvtCŞÜ
 (
ÿ±u»
->
image_rgb
, c­tu»->
image_bgr
, 
CV_RGBA2BGR
);

1100 
ÿ±u»
->
gÙ_äame
 = 
çl£
;

1103  
ÿ±u»
->
image_bgr
;

1104 
	}
}

1109 
	sCvVideoWr™”_QT
 {

1111 
D©aHªdËr
 
	md©a_hªdËr
;

1112 
Mov›
 
	mmov›
;

1113 
T¿ck
 
	mŒack
;

1114 
MedŸ
 
	mvideo
;

1116 
ICMCom´essiÚSessiÚRef
 
	mcom´essiÚ_£ssiÚ_»f
;

1118 
TimeV®ue
 
	mdu¿tiÚ_³r_§m¶e
;

1119 } 
	tCvVideoWr™”_QT
;

1122 
TimeSÿË
 cÚ¡ 
	gTIME_SCALE
 = 600;

1124 
OSStus
 
icvEncodedF¿meOuutC®lback
(

1125 * 
wr™”
,

1126 
ICMCom´essiÚSessiÚRef
 
com´essiÚ_£ssiÚ_»f
,

1127 
OSStus
 
”rÜ
,

1128 
ICMEncodedF¿meRef
 
’coded_äame_»f
,

1129 * 
»£rved


1132 
icvSourûT¿ckšgC®lback
(

1133 *
sourû_Œackšg_»f_cÚ
,

1134 
ICMSourûT¿ckšgFÏgs
 
sourû_Œackšg_æags
,

1135 *
sourû_äame_»f_cÚ
,

1136 *
»£rved


1139 
	$icvWr™eF¿me_QT
(

1140 
CvVideoWr™”_QT
 * 
video_wr™”
,

1141 cÚ¡ 
I¶Image
 * 
image


1143 
CVPix–BufãrRef
 
pix–_bufãr_»f
 = 
NULL
;

1144 
CVR‘uº
 
»tv®
 =

1145 
	`CVPix–BufãrC»©e
(

1146 
kCFAÎoÿtÜDeçuÉ
,

1147 
image
->
width
, image->
height
, 
k24RGBPix–FÜm©
,

1148 
NULL
 ,

1149 &
pix–_bufãr_»f


1153 
I¶Image
* 
image_rgb
 =

1154 
	`cvC»©eImageH—d”
(

1155 
	`cvSize
Ğ
image
->
width
, image->
height
 ),

1156 
IPL_DEPTH_8U
,

1160 
»tv®
 = 
	`CVPix–BufãrLockBa£Add»ss
Ğ
pix–_bufãr_»f
, 0 );

1162 * 
ba£_add»ss
 = 
	`CVPix–BufãrG‘Ba£Add»ss
Ğ
pix–_bufãr_»f
 );

1163 
size_t
 
by‹s_³r_row
 = 
	`CVPix–BufãrG‘By‹sP”Row
Ğ
pix–_bufãr_»f
 );

1164 
	`cvS‘D©a
Ğ
image_rgb
, 
ba£_add»ss
, 
by‹s_³r_row
 );

1166 
	`cvCÚv”tImage
Ğ
image
, 
image_rgb
, 
CV_CVTIMG_SWAP_RB
 );

1168 
»tv®
 = 
	`CVPix–BufãrUÆockBa£Add»ss
Ğ
pix–_bufãr_»f
, 0 );

1170 
	`cvR–—£ImageH—d”
Ğ&
image_rgb
 );

1172 
ICMSourûT¿ckšgC®lbackRecÜd
 
sourû_Œackšg_ÿÎback_»cÜd
;

1173 
sourû_Œackšg_ÿÎback_»cÜd
.
sourûT¿ckšgC®lback
 =

1174 
icvSourûT¿ckšgC®lback
;

1175 
sourû_Œackšg_ÿÎback_»cÜd
.
sourûT¿ckšgRefCÚ
 = 
NULL
;

1177 
OSStus
 
¡©us
 =

1178 
	`ICMCom´essiÚSessiÚEncodeF¿me
(

1179 
video_wr™”
->
com´essiÚ_£ssiÚ_»f
,

1180 
pix–_bufãr_»f
,

1182 
video_wr™”
->
du¿tiÚ_³r_§m¶e
,

1183 
kICMV®idTime_Di¥ÏyDu¿tiÚIsV®id
,

1184 
NULL
,

1185 &
sourû_Œackšg_ÿÎback_»cÜd
,

1186 
¡©ic_ÿ¡
<*>Ğ&
pix–_bufãr_»f
 )

1190 
	}
}

1192 
	$icvR–—£VideoWr™”_QT
Ğ
CvVideoWr™”_QT
 ** 
wr™”
 ) {

1193 iàĞĞ
wr™”
 !ğ
NULL
 ) && ( *writer != NULL ) ) {

1194 
CvVideoWr™”_QT
* 
video_wr™”
 = *
wr™”
;

1198 
	`ICMCom´essiÚSessiÚCom¶‘eF¿mes
(

1199 
video_wr™”
->
com´essiÚ_£ssiÚ_»f
, 1, 0, 0

1202 
	`EndMedŸEd™s
Ğ
video_wr™”
->
video
 );

1204 
	`ICMCom´essiÚSessiÚR–—£
Ğ
video_wr™”
->
com´essiÚ_£ssiÚ_»f
 );

1206 
	`In£¹MedŸIÁoT¿ck
(

1207 
video_wr™”
->
Œack
,

1210 
	`G‘MedŸDu¿tiÚ
Ğ
video_wr™”
->
video
 ),

1211 
	`FixR©io
( 1, 1 )

1214 
	`Upd©eMov›InStÜage
Ğ
video_wr™”
->
mov›
, video_wr™”->
d©a_hªdËr
 );

1216 
	`Clo£Mov›StÜage
Ğ
video_wr™”
->
d©a_hªdËr
 );

1233 
	`Di¥o£Mov›
Ğ
video_wr™”
->
mov›
 );

1235 
	`cvF»e
Ğ
wr™”
 );

1237 
	}
}

1239 
OSStus
 
	$icvEncodedF¿meOuutC®lback
(

1240 * 
wr™”
,

1241 
ICMCom´essiÚSessiÚRef
 
com´essiÚ_£ssiÚ_»f
,

1242 
OSStus
 
”rÜ
,

1243 
ICMEncodedF¿meRef
 
’coded_äame_»f
,

1244 * 
»£rved


1246 
CvVideoWr™”_QT
* 
video_wr™”
 = 
¡©ic_ÿ¡
<CvVideoWr™”_QT*>Ğ
wr™”
 );

1248 
OSStus
 
”r
 = 
	`AddMedŸSam¶eFromEncodedF¿me
Ğ
video_wr™”
->
video
,

1249 
’coded_äame_»f
, 
NULL
 );

1251  
”r
;

1252 
	}
}

1254 
	$icvSourûT¿ckšgC®lback
(

1255 *
sourû_Œackšg_»f_cÚ
,

1256 
ICMSourûT¿ckšgFÏgs
 
sourû_Œackšg_æags
,

1257 *
sourû_äame_»f_cÚ
,

1258 *
»£rved


1260 iàĞ
sourû_Œackšg_æags
 & 
kICMSourûT¿ckšg_R–—£dPix–Bufãr
 ) {

1261 
	`CVPix–BufãrR–—£
(

1262 *
¡©ic_ÿ¡
<
CVPix–BufãrRef
*>Ğ
sourû_äame_»f_cÚ
 )

1265 
	}
}

1268 
CvVideoWr™”_QT
* 
	$icvC»©eVideoWr™”_QT
(

1269 cÚ¡ * 
f’ame
,

1270 
fourcc
,

1271 
ås
,

1272 
CvSize
 
äame_size
,

1273 
is_cŞÜ


1275 
	`CV_FUNCNAME
( "icvCreateVideoWriter" );

1277 
CvVideoWr™”_QT
* 
video_wr™”
 =

1278 
¡©ic_ÿ¡
<
CvVideoWr™”_QT
*>Ğ
	`cvAÎoc
( ( CvVideoWriter_QT ) ) );

1279 
	`mem£t
Ğ
video_wr™”
, 0, Ğ
CvVideoWr™”_QT
 ) );

1281 
HªdË
 
d©a_»f
 = 
NULL
;

1282 
OSTy³
 
d©a_»f_ty³
;

1283 
D©aHªdËr
 
d©a_hªdËr
 = 
NULL
;

1284 
Mov›
 
mov›
 = 
NULL
;

1285 
ICMCom´essiÚSessiÚO±iÚsRef
 
İtiÚs_»f
 = 
NULL
;

1286 
ICMCom´essiÚSessiÚRef
 
com´essiÚ_£ssiÚ_»f
 = 
NULL
;

1287 
CFSŒšgRef
 
out_·th
 = 
n
;

1288 
T¿ck
 
video_Œack
 = 
n
;

1289 
MedŸ
 
video
 = 
n
;

1290 
OSE¼
 
”r
 = 
noE¼
;

1291 
CodecTy³
 
codecTy³
 = 
kRawCodecTy³
;

1293 
__BEGIN__


1296 iàĞ
f’ame
 =ğ
NULL
 ) {

1297 
	`CV_ERROR
Ğ
CV_StsBadArg
, "Video file‚ame must‚ot be NULL" );

1299 iàĞ
ås
 <= 0.0 ) {

1300 
	`CV_ERROR
Ğ
CV_StsBadArg
, "FPS must be†argerhan 0.0" );

1302 iàĞĞ
äame_size
.
width
 <ğ0 ) || ( f¿me_size.
height
 <= 0 ) ) {

1303 
	`CV_ERROR
Ğ
CV_StsBadArg
,

1308 iàĞ!
did_’‹r_mov›s
 ) {

1309 
”r
 = 
	`EÁ”Mov›s
();

1310 iàĞ
”r
 !ğ
noE¼
 ) {

1311 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Unableo initialize QuickTime" );

1313 
did_’‹r_mov›s
 = 1;

1317 
out_·th
 = 
	`CFSŒšgC»©eW™hCSŒšg
Ğ
kCFAÎoÿtÜDeçuÉ
, 
f’ame
, 
kCFSŒšgEncodšgISOL©š1
 );

1318 
	`CV_ASSERT
Ğ
out_·th
 !ğ
n
 );

1319 
”r
 = 
	`QTNewD©aReã»nûFromFuÎP©hCFSŒšg
Ğ
out_·th
, 
kQTPOSIXP©hStyË
,

1320 0, &
d©a_»f
, &
d©a_»f_ty³
 );

1321 
	`CFR–—£
Ğ
out_·th
 );

1322 iàĞ
”r
 !ğ
noE¼
 ) {

1323 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
,

1328 
”r
 = 
	`C»©eMov›StÜage
Ğ
d©a_»f
, 
d©a_»f_ty³
, 'TVOD',

1329 
smCu¼’tSüt
, 
ÃwMov›Aùive
, &
d©a_hªdËr
, &
mov›
 );

1331 iàĞ
”r
 !ğ
noE¼
 ) {

1332 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannot create movie storage" );

1336 
video_Œack
 = 
	`NewMov›T¿ck
 (
mov›
,

1337 
	`FixR©io
Ğ
äame_size
.
width
, 1 ),

1338 
	`FixR©io
Ğ
äame_size
.
height
, 1 ),

1339 
kNoVŞume
);

1340 
”r
 = 
	`G‘Mov›sE¼Ü
();

1341 iàĞ
”r
 !ğ
noE¼
 ) {

1342 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannot create videorack" );

1344 
video
 = 
	`NewT¿ckMedŸ
Ğ
video_Œack
, 
VideoMedŸTy³
, 
TIME_SCALE
, 
n
, 0 );

1345 
”r
 = 
	`G‘Mov›sE¼Ü
();

1346 iàĞ
”r
 !ğ
noE¼
 ) {

1347 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannot create video media" );

1354 
”r
 = 
	`ICMCom´essiÚSessiÚO±iÚsC»©e
Ğ
kCFAÎoÿtÜDeçuÉ
,

1355 &
İtiÚs_»f
 );

1356 iàĞ
”r
 !ğ
noE¼
 ) {

1357 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannot create compression session options" );

1359 
”r
 = 
	`ICMCom´essiÚSessiÚO±iÚsS‘AÎowTempÜ®Com´essiÚ
Ğ
İtiÚs_»f
,

1360 
Œue
 );

1361 iàĞ
”r
 !ğ
noE¼
) {

1362 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannotƒnableemporal compression" );

1364 
”r
 = 
	`ICMCom´essiÚSessiÚO±iÚsS‘AÎowF¿meReÜd”šg
Ğ
İtiÚs_»f
,

1365 
Œue
 );

1366 iàĞ
”r
 !ğ
noE¼
) {

1367 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannotƒnable frame„eordering" );

1370 
ICMEncodedF¿meOuutRecÜd
 
’coded_äame_ouut_»cÜd
;

1371 
’coded_äame_ouut_»cÜd
.
’codedF¿meOuutC®lback
 =

1372 
icvEncodedF¿meOuutC®lback
;

1373 
’coded_äame_ouut_»cÜd
.
’codedF¿meOuutRefCÚ
 =

1374 
¡©ic_ÿ¡
<*>Ğ
video_wr™”
 );

1375 
’coded_äame_ouut_»cÜd
.
äameD©aAÎoÿtÜ
 = 
NULL
;

1377 
”r
 = 
	`ICMCom´essiÚSessiÚC»©e
Ğ
kCFAÎoÿtÜDeçuÉ
, 
äame_size
.
width
,

1378 
äame_size
.
height
, 
codecTy³
, 
TIME_SCALE
, 
İtiÚs_»f
,

1379 
NULL
 , &
’coded_äame_ouut_»cÜd
,

1380 &
com´essiÚ_£ssiÚ_»f
 );

1381 
	`ICMCom´essiÚSessiÚO±iÚsR–—£
Ğ
İtiÚs_»f
 );

1382 iàĞ
”r
 !ğ
noE¼
 ) {

1383 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannot create compression session" );

1386 
”r
 = 
	`BegšMedŸEd™s
Ğ
video
 );

1387 iàĞ
”r
 !ğ
noE¼
 ) {

1388 
	`CV_ERROR
Ğ
CV_StsIÁ”Çl
, "Cannot begin mediaƒdits" );

1392 
video_wr™”
->
d©a_hªdËr
 = data_handler;

1393 
video_wr™”
->
mov›
 = movie;

1394 
video_wr™”
->
Œack
 = 
video_Œack
;

1395 
video_wr™”
->
video
 = video;

1396 
video_wr™”
->
com´essiÚ_£ssiÚ_»f
 = compression_session_ref;

1397 
video_wr™”
->
du¿tiÚ_³r_§m¶e
 =

1398 
¡©ic_ÿ¡
<
TimeV®ue
>Ğ¡©ic_ÿ¡<>Ğ
TIME_SCALE
 ) / 
ås
 );

1400 
__END__


1404 iàĞ
”r
 !ğ
noE¼
 ) {

1405 iàĞ
İtiÚs_»f
 !ğ
NULL
 ) {

1406 
	`ICMCom´essiÚSessiÚO±iÚsR–—£
Ğ
İtiÚs_»f
 );

1408 iàĞ
com´essiÚ_£ssiÚ_»f
 !ğ
NULL
 ) {

1409 
	`ICMCom´essiÚSessiÚR–—£
Ğ
com´essiÚ_£ssiÚ_»f
 );

1411 iàĞ
d©a_hªdËr
 !ğ
NULL
 ) {

1412 
	`Clo£Mov›StÜage
Ğ
d©a_hªdËr
 );

1414 iàĞ
mov›
 !ğ
NULL
 ) {

1415 
	`Di¥o£Mov›
Ğ
mov›
 );

1417 iàĞ
d©a_»f
 !ğ
NULL
 ) {

1418 
	`D–‘eMov›StÜage
Ğ
d©a_»f
, 
d©a_»f_ty³
 );

1419 
	`Di¥o£HªdË
Ğ
d©a_»f
 );

1421 
	`cvF»e
Ğ
»š‹½»t_ÿ¡
<**>Ğ&
video_wr™”
 ) );

1422 
video_wr™”
 = 
NULL
;

1425  
video_wr™”
;

1426 
	}
}

1435 şas 
	cCvC­tu»_QT_Mov›_CPP
 : 
public
 
CvC­tu»


1437 
public
:

1438 
	$CvC­tu»_QT_Mov›_CPP
(è{ 
ÿ±u»QT
 = 0; }

1439 
vœtu®
 ~
	$CvC­tu»_QT_Mov›_CPP
(è{ 
	`şo£
(); 
	}
}

1441 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
 );

1442 
vœtu®
 
şo£
();

1444 
vœtu®
 
	$g‘Prİ”ty
() const;

1445 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

1446 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

1447 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

1448 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_QT
; 
	}
}

1449 
	g´Ùeùed
:

1451 
CvC­tu»_QT_Mov›
* 
ÿ±u»QT
;

1454 
boŞ
 
	gCvC­tu»_QT_Mov›_CPP
::
	$İ’
ĞcÚ¡ * 
f’ame
 )

1456 
	`şo£
();

1457 
ÿ±u»QT
 = 
	`icvC­tu»FromFe_QT
Ğ
f’ame
 );

1458  
ÿ±u»QT
 != 0;

1459 
	}
}

1461 
	gCvC­tu»_QT_Mov›_CPP
::
	$şo£
()

1463 ifĞ
ÿ±u»QT
 )

1465 
	`icvClo£_QT_Mov›
Ğ
ÿ±u»QT
 );

1466 
	`cvF»e
Ğ&
ÿ±u»QT
 );

1468 
	}
}

1470 
boŞ
 
	gCvC­tu»_QT_Mov›_CPP
::
	$g¿bF¿me
()

1472  
ÿ±u»QT
 ? 
	`icvG¿bF¿me_QT_Mov›
Ğÿ±u»QT ) !ğ0 : 
çl£
;

1473 
	}
}

1475 
I¶Image
* 
	gCvC­tu»_QT_Mov›_CPP
::
	$»Œ›veF¿me
()

1477  
ÿ±u»QT
 ? (
I¶Image
*)
	`icvR‘r›veF¿me_QT_Mov›
( captureQT, 0 ) : 0;

1478 
	}
}

1480 
	gCvC­tu»_QT_Mov›_CPP
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

1482  
ÿ±u»QT
 ? 
	`icvG‘Prİ”ty_QT_Mov›
Ğÿ±u»QT, 
´İId
 ) : 0;

1483 
	}
}

1485 
boŞ
 
	gCvC­tu»_QT_Mov›_CPP
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

1487  
ÿ±u»QT
 ? 
	`icvS‘Prİ”ty_QT_Mov›
Ğÿ±u»QT, 
´İId
, 
v®ue
 ) !ğ0 : 
çl£
;

1488 
	}
}

1490 
CvC­tu»
* 
	$cvC»©eFeC­tu»_QT
ĞcÚ¡ * 
f’ame
 )

1492 
CvC­tu»_QT_Mov›_CPP
* 
ÿ±u»
 = 
Ãw
 CvCapture_QT_Movie_CPP;

1494 ifĞ
ÿ±u»
->
	`İ’
Ğ
f’ame
 ))

1495  
ÿ±u»
;

1497 
d–‘e
 
ÿ±u»
;

1499 
	}
}

1504 şas 
	cCvC­tu»_QT_Cam_CPP
 : 
public
 
CvC­tu»


1506 
public
:

1507 
	$CvC­tu»_QT_Cam_CPP
(è{ 
ÿ±u»QT
 = 0; }

1508 
vœtu®
 ~
	$CvC­tu»_QT_Cam_CPP
(è{ 
	`şo£
(); 
	}
}

1510 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

1511 
vœtu®
 
şo£
();

1513 
vœtu®
 
	$g‘Prİ”ty
() const;

1514 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

1515 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

1516 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

1517 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_QT
; 
	}
}

1518 
	g´Ùeùed
:

1520 
CvC­tu»_QT_Cam
* 
ÿ±u»QT
;

1523 
boŞ
 
	gCvC­tu»_QT_Cam_CPP
::
	$İ’
Ğ
šdex
 )

1525 
	`şo£
();

1526 
ÿ±u»QT
 = 
	`icvC­tu»FromCam_QT
Ğ
šdex
 );

1527  
ÿ±u»QT
 != 0;

1528 
	}
}

1530 
	gCvC­tu»_QT_Cam_CPP
::
	$şo£
()

1532 ifĞ
ÿ±u»QT
 )

1534 
	`icvClo£_QT_Cam
Ğ
ÿ±u»QT
 );

1535 
	`cvF»e
Ğ&
ÿ±u»QT
 );

1537 
	}
}

1539 
boŞ
 
	gCvC­tu»_QT_Cam_CPP
::
	$g¿bF¿me
()

1541  
ÿ±u»QT
 ? 
	`icvG¿bF¿me_QT_Cam
Ğÿ±u»QT ) !ğ0 : 
çl£
;

1542 
	}
}

1544 
I¶Image
* 
	gCvC­tu»_QT_Cam_CPP
::
	$»Œ›veF¿me
()

1546  
ÿ±u»QT
 ? (
I¶Image
*)
	`icvR‘r›veF¿me_QT_Cam
( captureQT, 0 ) : 0;

1547 
	}
}

1549 
	gCvC­tu»_QT_Cam_CPP
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

1551  
ÿ±u»QT
 ? 
	`icvG‘Prİ”ty_QT_Cam
Ğÿ±u»QT, 
´İId
 ) : 0;

1552 
	}
}

1554 
boŞ
 
	gCvC­tu»_QT_Cam_CPP
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

1556  
ÿ±u»QT
 ? 
	`icvS‘Prİ”ty_QT_Cam
Ğÿ±u»QT, 
´İId
, 
v®ue
 ) !ğ0 : 
çl£
;

1557 
	}
}

1559 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_QT
Ğ
šdex
 )

1561 
CvC­tu»_QT_Cam_CPP
* 
ÿ±u»
 = 
Ãw
 CvCapture_QT_Cam_CPP;

1563 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

1564  
ÿ±u»
;

1566 
d–‘e
 
ÿ±u»
;

1568 
	}
}

1572 şas 
	cCvVideoWr™”_QT_CPP
 : 
public
 
CvVideoWr™”


1574 
public
:

1575 
	$CvVideoWr™”_QT_CPP
(è{ 
wr™”QT
 = 0; }

1576 
vœtu®
 ~
	$CvVideoWr™”_QT_CPP
(è{ 
	`şo£
(); 
	}
}

1578 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1579 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 );

1580 
vœtu®
 
şo£
();

1581 
vœtu®
 
boŞ
 
wr™eF¿me
ĞcÚ¡ 
I¶Image
* );

1583 
	g´Ùeùed
:

1584 
CvVideoWr™”_QT
* 
wr™”QT
;

1587 
boŞ
 
	gCvVideoWr™”_QT_CPP
::
	$İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1588 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 )

1590 
	`şo£
();

1591 
wr™”QT
 = 
	`icvC»©eVideoWr™”_QT
Ğ
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
 );

1592  
wr™”QT
 != 0;

1593 
	}
}

1595 
	gCvVideoWr™”_QT_CPP
::
	$şo£
()

1597 ifĞ
wr™”QT
 )

1599 
	`icvR–—£VideoWr™”_QT
Ğ&
wr™”QT
 );

1600 
wr™”QT
 = 0;

1602 
	}
}

1604 
boŞ
 
	gCvVideoWr™”_QT_CPP
::
	$wr™eF¿me
ĞcÚ¡ 
I¶Image
* 
image
 )

1606 ifĞ!
wr™”QT
 || !
image
 )

1607  
çl£
;

1608  
	`icvWr™eF¿me_QT
Ğ
wr™”QT
, 
image
 ) >= 0;

1609 
	}
}

1611 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”_QT
ĞcÚ¡ * 
f’ame
, 
fourcc
,

1612 
ås
, 
CvSize
 
äameSize
, 
isCŞÜ
 )

1614 
CvVideoWr™”_QT_CPP
* 
wr™”
 = 
Ãw
 CvVideoWriter_QT_CPP;

1615 ifĞ
wr™”
->
	`İ’
Ğ
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
 != 0 ))

1616  
wr™”
;

1617 
d–‘e
 
wr™”
;

1619 
	}
}

	@cap_unicap.cpp

44 
	~"´ecomp.hµ
"

45 
	~<uni¡d.h
>

46 
	~<uniÿp.h
>

48 
	~<uc.h
>

51 #ifdeà
NDEBUG


52 
	#CV_WARN
(
mes§ge
)

	)

54 
	#CV_WARN
(
mes§ge
è
	`årštf
(
¡d”r
, "w¬nšg: % (%s:%d)\n", mes§ge, 
__FILE__
, 
__LINE__
)

	)

57 
CvC­tu»_Uniÿp
 : 
public
 
CvC­tu»


59 
CvC­tu»_Uniÿp
(è{ 
š™
(); }

60 
vœtu®
 ~
CvC­tu»_Uniÿp
(è{ 
şo£
(); }

62 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

63 
vœtu®
 
şo£
();

65 
vœtu®
 
g‘Prİ”ty
() const;

66 
vœtu®
 
boŞ
 
£tPrİ”ty
(, );

67 
vœtu®
 
boŞ
 
g¿bF¿me
();

68 
vœtu®
 
I¶Image
* 
»Œ›veF¿me
();

69 
vœtu®
 
g‘C­tu»Domaš
(è{  
CV_CAP_UNICAP
; }

71 
boŞ
 
shutdownDeviû
();

72 
boŞ
 
š™Deviû
();

74 
š™
()

76 
deviû_š™Ÿlized
 = 
çl£
;

77 
desœed_fÜm©
 = 0;

78 
desœed_size
 = 
cvSize
(0,0);

79 
cÚv”t_rgb
 = 
çl£
;

81 
hªdË
 = 0;

82 
mem£t
Ğ&
deviû
, 0, (device) );

83 
mem£t
Ğ&
fÜm©_¥ec
, 0, (format_spec) );

84 
mem£t
Ğ&
fÜm©
, 0, (format) );

85 
mem£t
Ğ&
¿w_bufãr
, 0, (raw_buffer) );

86 
mem£t
Ğ&
bufãr
, 0, (buffer) );

88 
¿w_äame
 = 
äame
 = 0;

91 
boŞ
 
deviû_š™Ÿlized
;

93 
desœed_deviû
;

94 
desœed_fÜm©
;

95 
CvSize
 
desœed_size
;

96 
boŞ
 
cÚv”t_rgb
;

98 
uniÿp_hªdË_t
 
hªdË
;

99 
uniÿp_deviû_t
 
deviû
;

100 
uniÿp_fÜm©_t
 
fÜm©_¥ec
;

101 
uniÿp_fÜm©_t
 
fÜm©
;

102 
uniÿp_d©a_bufãr_t
 
¿w_bufãr
;

103 
uniÿp_d©a_bufãr_t
 
bufãr
;

105 
I¶Image
 *
¿w_äame
;

106 
I¶Image
 *
äame
;

109 
boŞ
 
	gCvC­tu»_Uniÿp
::
	$shutdownDeviû
() {

110 
boŞ
 
»suÉ
 = 
çl£
;

111 
	`CV_FUNCNAME
("CvCapture_Unicap::shutdownDevice");

112 
__BEGIN__
;

114 ià(!
	`SUCCESS
(
	`uniÿp_¡İ_ÿ±u»
(
hªdË
)))

115 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo stop capture on device\n");

117 ià(!
	`SUCCESS
(
	`uniÿp_şo£
(
hªdË
)))

118 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo closehe device\n");

120 
	`cvR–—£Image
(&
¿w_äame
);

121 
	`cvR–—£Image
(&
äame
);

123 
deviû_š™Ÿlized
 = 
çl£
;

125 
»suÉ
 = 
Œue
;

126 
__END__
;

127  
»suÉ
;

128 
	}
}

130 
boŞ
 
	gCvC­tu»_Uniÿp
::
	$š™Deviû
() {

131 
boŞ
 
»suÉ
 = 
çl£
;

132 
	`CV_FUNCNAME
("CvCapture_Unicap::initDevice");

133 
__BEGIN__
;

135 ià(
deviû_š™Ÿlized
 && !
	`shutdownDeviû
())

136  
çl£
;

138 if(!
	`SUCCESS
(
	`uniÿp_’um”©e_deviûs
(
NULL
, &
deviû
, 
desœed_deviû
)))

139 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo get info for device\n");

141 if(!
	`SUCCESS
(
	`uniÿp_İ’
Ğ&
hªdË
, &
deviû
)))

142 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo open device\n");

144 
	`uniÿp_void_fÜm©
(&
fÜm©_¥ec
);

146 ià(!
	`SUCCESS
(
	`uniÿp_’um”©e_fÜm©s
(
hªdË
, &
fÜm©_¥ec
, &
fÜm©
, 
desœed_fÜm©
))) {

147 
	`shutdownDeviû
();

148 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo get video format\n");

151 
i
;

152 ià(
fÜm©
.
sizes
)

154 
i
 = 
fÜm©
.
size_couÁ
 - 1; i > 0; i--)

155 ià(
fÜm©
.
sizes
[
i
].
width
 =ğ
desœed_size
.width &&

156 
fÜm©
.
sizes
[
i
].
height
 =ğ
desœed_size
.height)

158 
fÜm©
.
size
.
width
 = fÜm©.
sizes
[
i
].width;

159 
fÜm©
.
size
.
height
 = fÜm©.
sizes
[
i
].height;

162 ià(!
	`SUCCESS
(
	`uniÿp_£t_fÜm©
(
hªdË
, &
fÜm©
))) {

163 
	`shutdownDeviû
();

164 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo set video format\n");

167 
	`mem£t
(&
¿w_bufãr
, 0x0, (
uniÿp_d©a_bufãr_t
));

168 
¿w_äame
 = 
	`cvC»©eImage
(
	`cvSize
(
fÜm©
.
size
.
width
,

169 
fÜm©
.
size
.
height
),

170 8, 
fÜm©
.
bµ
 / 8);

171 
	`memıy
(&
¿w_bufãr
.
fÜm©
, &format, (raw_buffer.format));

172 
¿w_bufãr
.
d©a
 = (*)
¿w_äame
->
imageD©a
;

173 
¿w_bufãr
.
bufãr_size
 = 
fÜm©
.
size
.
width
 *

174 
fÜm©
.
size
.
height
 * fÜm©.
bµ
 / 8;

176 
	`mem£t
(&
bufãr
, 0x0, (
uniÿp_d©a_bufãr_t
));

177 
	`memıy
(&
bufãr
.
fÜm©
, &format, (buffer.format));

179 
bufãr
.
fÜm©
.
fourcc
 = 
	`UCIL_FOURCC
('B','G','R','3');

180 
bufãr
.
fÜm©
.
bµ
 = 24;

185 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(
bufãr
.
fÜm©
.
size
.
width
,

186 
bufãr
.
fÜm©
.
size
.
height
),

187 8, 
bufãr
.
fÜm©
.
bµ
 / 8);

188 
bufãr
.
d©a
 = (*)
äame
->
imageD©a
;

189 
bufãr
.
bufãr_size
 = bufãr.
fÜm©
.
size
.
width
 *

190 
bufãr
.
fÜm©
.
size
.
height
 * bufãr.fÜm©.
bµ
 / 8;

192 if(!
	`SUCCESS
(
	`uniÿp_¡¬t_ÿ±u»
(
hªdË
))) {

193 
	`shutdownDeviû
();

194 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo start capture on device\n");

197 
deviû_š™Ÿlized
 = 
Œue
;

198 
»suÉ
 = 
Œue
;

199 
__END__
;

200  
»suÉ
;

201 
	}
}

203 
	gCvC­tu»_Uniÿp
::
	$şo£
() {

204 if(
deviû_š™Ÿlized
)

205 
	`shutdownDeviû
();

206 
	}
}

208 
boŞ
 
	gCvC­tu»_Uniÿp
::
	$g¿bF¿me
() {

209 
boŞ
 
»suÉ
 = 
çl£
;

211 
	`CV_FUNCNAME
("CvCapture_Unicap::grabFrame");

212 
__BEGIN__
;

214 
uniÿp_d©a_bufãr_t
 *
»tuºed_bufãr
;

216 
»Œy_couÁ
 = 100;

218 
»Œy_couÁ
--) {

219 if(!
	`SUCCESS
(
	`uniÿp_queue_bufãr
(
hªdË
, &
¿w_bufãr
)))

220 
	`CV_ERROR
(
CV_StsE¼Ü
, "unicap: failedo queue‡ buffer on device\n");

222 if(
	`SUCCESS
(
	`uniÿp_wa™_bufãr
(
hªdË
, &
»tuºed_bufãr
)))

224 
»suÉ
 = 
Œue
;

225 
EXIT
;

228 
	`CV_WARN
("unicap: failedo wait for buffer on device\n");

229 
	`u¦“p
(100 * 1000);

232 
__END__
;

233  
»suÉ
;

234 
	}
}

236 
I¶Image
 * 
	gCvC­tu»_Uniÿp
::
	$»Œ›veF¿me
() {

237 ià(
cÚv”t_rgb
) {

238 
	`uc_cÚv”t_bufãr
(&
bufãr
, &
¿w_bufãr
);

239  
äame
;

241  
¿w_äame
;

242 
	}
}

244 
	gCvC­tu»_Uniÿp
::
	$g‘Prİ”ty
(
id
) const

246 
id
) {

247 
CV_CAP_PROP_POS_MSEC
: ;

248 
CV_CAP_PROP_POS_FRAMES
: ;

249 
CV_CAP_PROP_POS_AVI_RATIO
: ;

250 
CV_CAP_PROP_FRAME_WIDTH
:

251  
desœed_size
.
width
;

252 
CV_CAP_PROP_FRAME_HEIGHT
:

253  
desœed_size
.
height
;

254 
CV_CAP_PROP_FPS
: ;

255 
CV_CAP_PROP_FOURCC
: ;

256 
CV_CAP_PROP_FRAME_COUNT
: ;

257 
CV_CAP_PROP_FORMAT
:

258  
desœed_fÜm©
;

259 
CV_CAP_PROP_MODE
: ;

260 
CV_CAP_PROP_BRIGHTNESS
: ;

261 
CV_CAP_PROP_CONTRAST
: ;

262 
CV_CAP_PROP_SATURATION
: ;

263 
CV_CAP_PROP_HUE
: ;

264 
CV_CAP_PROP_GAIN
: ;

265 
CV_CAP_PROP_CONVERT_RGB
:

266  
cÚv”t_rgb
;

270 
	}
}

272 
boŞ
 
	gCvC­tu»_Uniÿp
::
	$£tPrİ”ty
(
id
, 
v®ue
) {

273 
boŞ
 
»š™
 = 
çl£
;

275 
id
) {

276 
CV_CAP_PROP_POS_MSEC
: ;

277 
CV_CAP_PROP_POS_FRAMES
: ;

278 
CV_CAP_PROP_POS_AVI_RATIO
: ;

279 
CV_CAP_PROP_FRAME_WIDTH
:

280 
desœed_size
.
width
 = ()
v®ue
;

281 
»š™
 = 
Œue
;

283 
CV_CAP_PROP_FRAME_HEIGHT
:

284 
desœed_size
.
height
 = ()
v®ue
;

285 
»š™
 = 
Œue
;

287 
CV_CAP_PROP_FPS
: ;

288 
CV_CAP_PROP_FOURCC
: ;

289 
CV_CAP_PROP_FRAME_COUNT
: ;

290 
CV_CAP_PROP_FORMAT
:

291 
desœed_fÜm©
 = 
id
;

292 
»š™
 = 
Œue
;

294 
CV_CAP_PROP_MODE
: ;

295 
CV_CAP_PROP_BRIGHTNESS
: ;

296 
CV_CAP_PROP_CONTRAST
: ;

297 
CV_CAP_PROP_SATURATION
: ;

298 
CV_CAP_PROP_HUE
: ;

299 
CV_CAP_PROP_GAIN
: ;

300 
CV_CAP_PROP_CONVERT_RGB
:

301 
cÚv”t_rgb
 = 
v®ue
 != 0;

305 ià(
»š™
 && !
	`š™Deviû
())

306  
çl£
;

308  
Œue
;

309 
	}
}

311 
boŞ
 
	gCvC­tu»_Uniÿp
::
	$İ’
(
šdex
)

313 
	`şo£
();

314 
deviû_š™Ÿlized
 = 
çl£
;

316 
desœed_deviû
 = 
šdex
 < 0 ? 0 : index;

317 
desœed_fÜm©
 = 0;

318 
desœed_size
 = 
	`cvSize
(320, 240);

319 
cÚv”t_rgb
 = 
Œue
;

321  
	`š™Deviû
();

322 
	}
}

325 
CvC­tu»
 * 
	$cvC»©eCam”aC­tu»_Uniÿp
(cÚ¡ 
šdex
)

327 
CvC­tu»_Uniÿp
 *
ÿp
 = 
Ãw
 CvCapture_Unicap;

328 ifĞ
ÿp
->
	`İ’
(
šdex
) )

329  
ÿp
;

330 
d–‘e
 
ÿp
;

332 
	}
}

	@cap_v4l.cpp

210 
	~"´ecomp.hµ
"

212 #ià!
defšed
 
WIN32
 && (defšed 
HAVE_CAMV4L
 || defšed 
HAVE_CAMV4L2
 || defšed 
HAVE_VIDEOIO
)

214 
	#CLEAR
(
x
è
	`mem£t
 (&(x), 0,  (x))

	)

216 
	~<¡dio.h
>

217 
	~<uni¡d.h
>

218 
	~<fú.h
>

219 
	~<”ºo.h
>

220 
	~<sys/ioùl.h
>

221 
	~<sys/ty³s.h
>

222 
	~<sys/mmª.h
>

224 #ifdeà
HAVE_CAMV4L


225 
	~<lšux/videodev.h
>

228 
	~<¡ršg.h
>

229 
	~<¡dlib.h
>

230 
	~<as£¹.h
>

231 
	~<sys/¡©.h
>

232 
	~<sys/ioùl.h
>

234 #ifdeà
HAVE_CAMV4L2


235 
	~<asm/ty³s.h
>

236 
	~<lšux/videodev2.h
>

239 #ifdeà
HAVE_VIDEOIO


240 
	~<sys/videoio.h
>

241 
	#HAVE_CAMV4L2


	)

245 
	#DEFAULT_V4L_WIDTH
 640

	)

246 
	#DEFAULT_V4L_HEIGHT
 480

	)

248 
	#CHANNEL_NUMBER
 1

	)

249 
	#MAX_CAMERAS
 8

	)

253 
	#MAX_V4L_BUFFERS
 10

	)

254 
	#DEFAULT_V4L_BUFFERS
 4

	)

257 
	#V4L_ABORT_BADJPEG


	)

259 
	#MAX_DEVICE_DRIVER_NAME
 80

	)

263 #ifdeà
HAVE_CAMV4L2


266 
	sbufãr


268 * 
	m¡¬t
;

269 
size_t
 
	mËngth
;

272 
	gn_bufãrs
 = 0;

275 #iâdeà
V4L2_PIX_FMT_SBGGR8


276 
	#V4L2_PIX_FMT_SBGGR8
 
	`v4l2_fourcc
('B','A','8','1'è

	)

278 #iâdeà
V4L2_PIX_FMT_SN9C10X


279 
	#V4L2_PIX_FMT_SN9C10X
 
	`v4l2_fourcc
('S','9','1','0'è

	)

282 #iâdeà
V4L2_PIX_FMT_SGBRG


283 
	#V4L2_PIX_FMT_SGBRG
 
	`v4l2_fourcc
('G','B','R','G'è

	)

288 
	ePALETTE_TYPE
 {

289 
	mPALETTE_BGR24
 = 1,

290 
	mPALETTE_YVU420
,

291 
	mPALETTE_YUV411P
,

292 
	mPALETTE_YUYV
,

293 
	mPALETTE_UYVY
,

294 
	mPALETTE_SBGGR8
,

295 
	mPALETTE_SN9C10X
,

296 
	mPALETTE_MJPEG
,

297 
	mPALETTE_SGBRG
,

298 
	mPALETTE_RGB24


301 
	sCvC­tu»CAM_V4L


303 
	mdeviûHªdË
;

304 
	mbufãrIndex
;

305 
	mFœ¡C­tu»
;

306 #ifdeà
HAVE_CAMV4L


307 
video_ÿ·b™y
 
	mÿ·b™y
;

308 
video_wšdow
 
	mÿ±u»Wšdow
;

309 
video_piùu»
 
	mimagePrİ”t›s
;

310 
video_mbuf
 
	mmemÜyBufãr
;

311 
video_mm­
 *
	mmm­s
;

313 *
	mmemÜyM­
;

314 
I¶Image
 
	mäame
;

316 #ifdeà
HAVE_CAMV4L2


317 
PALETTE_TYPE
 
	m·Ë‰e
;

319 
bufãr
 
	mbufãrs
[
MAX_V4L_BUFFERS
 + 1];

320 
v4l2_ÿ·b™y
 
	mÿp
;

321 
v4l2_šput
 
	mšp
;

322 
v4l2_fÜm©
 
	mfÜm
;

323 
v4l2_üİ
 
	müİ
;

324 
v4l2_üİÿp
 
	müİÿp
;

325 
v4l2_»que¡bufãrs
 
	m»q
;

326 
v4l2_cÚŒŞ
 
	mcÚŒŞ
;

327 
v4l2_buf_ty³
 
	mty³
;

328 
v4l2_qu”yù¾
 
	mqu”yù¾
;

330 
timev®
 
	mtime¡amp
;

333 
	mv4l2_brighŠess
, 
	mv4l2_brighŠess_mš
, 
	mv4l2_brighŠess_max
;

334 
	mv4l2_cÚŒa¡
, 
	mv4l2_cÚŒa¡_mš
, 
	mv4l2_cÚŒa¡_max
;

335 
	mv4l2_§tu¿tiÚ
, 
	mv4l2_§tu¿tiÚ_mš
, 
	mv4l2_§tu¿tiÚ_max
;

336 
	mv4l2_hue
, 
	mv4l2_hue_mš
, 
	mv4l2_hue_max
;

337 
	mv4l2_gaš
, 
	mv4l2_gaš_mš
, 
	mv4l2_gaš_max
;

338 
	mv4l2_exposu»
, 
	mv4l2_exposu»_mš
, 
	mv4l2_exposu»_max
;

343 
	tCvC­tu»CAM_V4L
;

345 #ifdeà
HAVE_CAMV4L2


347 
	gV4L2_SUPPORT
 = 0;

351 
icvClo£CAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
 );

353 
icvG¿bF¿meCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
 );

354 
I¶Image
* 
icvR‘r›veF¿meCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, );

356 
icvG‘Prİ”tyCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
´İ”ty_id
 );

357 
icvS‘Prİ”tyCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
´İ”ty_id
, 
v®ue
 );

359 
icvS‘VideoSize
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
w
, 
h
);

363 
	gnumCam”as
 = 0;

364 
	gšdexLi¡
 = 0;

371 
	$icvIn™C­tu»_V4L
() {

372 
deviûHªdË
;

373 
Cam”aNumb”
;

374 
deviûName
[
MAX_DEVICE_DRIVER_NAME
];

376 
Cam”aNumb”
 = 0;

377 
Cam”aNumb”
 < 
MAX_CAMERAS
) {

379 
	`¥rštf
(
deviûName
, "/dev/video%1d", 
Cam”aNumb”
);

381 
deviûHªdË
 = 
	`İ’
(
deviûName
, 
O_RDONLY
);

382 ià(
deviûHªdË
 != -1) {

385 
šdexLi¡
|=(1 << 
Cam”aNumb”
);

386 
numCam”as
++;

388 ià(
deviûHªdË
 != -1)

389 
	`şo£
(
deviûHªdË
);

391 
Cam”aNumb”
++;

394 
	}
};

396 #ifdeà
HAVE_CAMV4L


399 
	$Œy_·Ë‰e
(
fd
,

400 
video_piùu»
 *
ÿm_pic
,

401 
·l
,

402 
d•th
)

404 
ÿm_pic
->
·Ë‰e
 = 
·l
;

405 
ÿm_pic
->
d•th
 = depth;

406 ià(
	`ioùl
(
fd
, 
VIDIOCSPICT
, 
ÿm_pic
) < 0)

408 ià(
	`ioùl
(
fd
, 
VIDIOCGPICT
, 
ÿm_pic
) < 0)

410 ià(
ÿm_pic
->
·Ë‰e
 =ğ
·l
)

413 
	}
}

417 #ifdeà
HAVE_CAMV4L2


419 
	$Œy_·Ë‰e_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
cŞÜ¥aû
)

421 
	`CLEAR
 (
ÿ±u»
->
fÜm
);

423 
ÿ±u»
->
fÜm
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

424 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
pix–fÜm©
 = 
cŞÜ¥aû
;

425 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
f›ld
 = 
V4L2_FIELD_ANY
;

426 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
 = 
DEFAULT_V4L_WIDTH
;

427 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
 = 
DEFAULT_V4L_HEIGHT
;

429 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_FMT
, &ÿ±u»->
fÜm
))

433 ià(
cŞÜ¥aû
 !ğ
ÿ±u»
->
fÜm
.
fmt
.
pix
.
pix–fÜm©
)

437 
	}
}

441 #ifdeà
HAVE_CAMV4L


443 
	$Œy_š™_v4l
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, *
deviûName
)

449 
d‘eù
 = 0;

456 
ÿ±u»
->
deviûHªdË
 = 
	`İ’
(
deviûName
, 
O_RDWR
);

458 ià(
ÿ±u»
->
deviûHªdË
 == 0)

460 
d‘eù
 = -1;

462 
	`icvClo£CAM_V4L
(
ÿ±u»
);

465 ià(
d‘eù
 == 0)

468 ià(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGCAP
, &ÿ±u»->
ÿ·b™y
) < 0)

470 
d‘eù
 = 0;

471 
	`icvClo£CAM_V4L
(
ÿ±u»
);

475 
d‘eù
 = 1;

479  
d‘eù
;

481 
	}
}

485 #ifdeà
HAVE_CAMV4L2


487 
	$Œy_š™_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
, *
deviûName
)

495 
deviûIndex
;

498 
ÿ±u»
->
deviûHªdË
 = 
	`İ’
 (
deviûName
, 
O_RDWR
 | 
O_NONBLOCK
, 0);

499 ià(-1 =ğ
ÿ±u»
->
deviûHªdË
)

501 #iâdeà
NDEBUG


502 
	`årštf
(
¡d”r
, "(DEBUGèŒy_š™_v4l2 o³À\"%s\": %s\n", 
deviûName
, 
	`¡»¼Ü
(
”ºo
));

504 
	`icvClo£CAM_V4L
(
ÿ±u»
);

508 
	`CLEAR
 (
ÿ±u»
->
ÿp
);

509 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCAP
, &ÿ±u»->
ÿp
))

511 #iâdeà
NDEBUG


512 
	`årštf
(
¡d”r
, "(DEBUGèŒy_š™_v4l2 VIDIOC_QUERYCAP \"%s\": %s\n", 
deviûName
, 
	`¡»¼Ü
(
”ºo
));

514 
	`icvClo£CAM_V4L
(
ÿ±u»
);

519 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_INPUT
, &
deviûIndex
))

521 #iâdeà
NDEBUG


522 
	`årštf
(
¡d”r
, "(DEBUGèŒy_š™_v4l2 VIDIOC_G_INPUT \"%s\": %s\n", 
deviûName
, 
	`¡»¼Ü
(
”ºo
));

524 
	`icvClo£CAM_V4L
(
ÿ±u»
);

529 
	`CLEAR
 (
ÿ±u»
->
šp
);

530 
ÿ±u»
->
šp
.
šdex
 = 
deviûIndex
;

531 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_ENUMINPUT
, &ÿ±u»->
šp
))

533 #iâdeà
NDEBUG


534 
	`årštf
(
¡d”r
, "(DEBUGèŒy_š™_v4l2 VIDIOC_ENUMINPUT \"%s\": %s\n", 
deviûName
, 
	`¡»¼Ü
(
”ºo
));

536 
	`icvClo£CAM_V4L
(
ÿ±u»
);

542 
	}
}

544 
	$auto£tup_ÿ±u»_mode_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
)

546 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_BGR24
) == 0)

548 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_BGR24
;

551 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_YVU420
) == 0)

553 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_YVU420
;

556 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_YUV411P
) == 0)

558 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_YUV411P
;

562 #ifdeà
HAVE_JPEG


563 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_MJPEG
) == 0 ||

564 
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_JPEG
) == 0)

566 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_MJPEG
;

571 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_YUYV
) == 0)

573 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_YUYV
;

575 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_UYVY
) == 0)

577 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_UYVY
;

580 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_SN9C10X
) == 0)

582 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_SN9C10X
;

584 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_SBGGR8
) == 0)

586 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_SBGGR8
;

588 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_SGBRG
) == 0)

590 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_SGBRG
;

592 ià(
	`Œy_·Ë‰e_v4l2
(
ÿ±u»
, 
V4L2_PIX_FMT_RGB24
) == 0)

594 
ÿ±u»
->
·Ë‰e
 = 
PALETTE_RGB24
;

598 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L2: Pixel format of incoming image is unsupported by OpenCV\n");

599 
	`icvClo£CAM_V4L
(
ÿ±u»
);

605 
	}
}

609 #ifdeà
HAVE_CAMV4L


611 
	$auto£tup_ÿ±u»_mode_v4l
(
CvC­tu»CAM_V4L
* 
ÿ±u»
)

614 if(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGPICT
, &ÿ±u»->
imagePrİ”t›s
) < 0) {

615 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Unableo determine size of incoming image\n");

616 
	`icvClo£CAM_V4L
(
ÿ±u»
);

622 ià(
	`Œy_·Ë‰e
(
ÿ±u»
->
deviûHªdË
, &ÿ±u»->
imagePrİ”t›s
, 
VIDEO_PALETTE_RGB24
, 24)) {

625 ià(
	`Œy_·Ë‰e
(
ÿ±u»
->
deviûHªdË
, &ÿ±u»->
imagePrİ”t›s
, 
VIDEO_PALETTE_YUV420P
, 16)) {

628 ià(
	`Œy_·Ë‰e
(
ÿ±u»
->
deviûHªdË
, &ÿ±u»->
imagePrİ”t›s
, 
VIDEO_PALETTE_YUV420
, 16)) {

631 ià(
	`Œy_·Ë‰e
(
ÿ±u»
->
deviûHªdË
, &ÿ±u»->
imagePrİ”t›s
, 
VIDEO_PALETTE_YUV411P
, 16)) {

635 
	`årštf
(
¡d”r
, "VIDEOIO ERROR: V4L: Pixel format of incoming image is unsupported by OpenCV\n");

636 
	`icvClo£CAM_V4L
(
ÿ±u»
);

642 
	}
}

646 #ifdeà
HAVE_CAMV4L2


649 
	$v4l2_sÿn_cÚŒŞs
(
CvC­tu»CAM_V4L
* 
ÿ±u»
)

652 
__u32
 
ù¾_id
;

654 
ù¾_id
 = 
V4L2_CID_BASE
;

655 
ù¾_id
 < 
V4L2_CID_LASTP1
;

656 
ù¾_id
++)

660 
	`CLEAR
 (
ÿ±u»
->
qu”yù¾
);

661 
ÿ±u»
->
qu”yù¾
.
id
 = 
ù¾_id
;

663 ià(0 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCTRL
,

664 &
ÿ±u»
->
qu”yù¾
))

667 ià(
ÿ±u»
->
qu”yù¾
.
æags
 & 
V4L2_CTRL_FLAG_DISABLED
)

670 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_BRIGHTNESS
)

672 
ÿ±u»
->
v4l2_brighŠess
 = 1;

673 
ÿ±u»
->
v4l2_brighŠess_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

674 
ÿ±u»
->
v4l2_brighŠess_max
 = c­tu»->
qu”yù¾
.
maximum
;

677 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_CONTRAST
)

679 
ÿ±u»
->
v4l2_cÚŒa¡
 = 1;

680 
ÿ±u»
->
v4l2_cÚŒa¡_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

681 
ÿ±u»
->
v4l2_cÚŒa¡_max
 = c­tu»->
qu”yù¾
.
maximum
;

684 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_SATURATION
)

686 
ÿ±u»
->
v4l2_§tu¿tiÚ
 = 1;

687 
ÿ±u»
->
v4l2_§tu¿tiÚ_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

688 
ÿ±u»
->
v4l2_§tu¿tiÚ_max
 = c­tu»->
qu”yù¾
.
maximum
;

691 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_HUE
)

693 
ÿ±u»
->
v4l2_hue
 = 1;

694 
ÿ±u»
->
v4l2_hue_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

695 
ÿ±u»
->
v4l2_hue_max
 = c­tu»->
qu”yù¾
.
maximum
;

698 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_GAIN
)

700 
ÿ±u»
->
v4l2_gaš
 = 1;

701 
ÿ±u»
->
v4l2_gaš_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

702 
ÿ±u»
->
v4l2_gaš_max
 = c­tu»->
qu”yù¾
.
maximum
;

705 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_EXPOSURE
)

707 
ÿ±u»
->
v4l2_exposu»
 = 1;

708 
ÿ±u»
->
v4l2_exposu»_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

709 
ÿ±u»
->
v4l2_exposu»_max
 = c­tu»->
qu”yù¾
.
maximum
;

715 ià(
”ºo
 =ğ
EINVAL
)

718 
	`³¼Ü
 ("VIDIOC_QUERYCTRL");

724 
ù¾_id
 = 
V4L2_CID_PRIVATE_BASE
;;ctrl_id++)

728 
	`CLEAR
 (
ÿ±u»
->
qu”yù¾
);

729 
ÿ±u»
->
qu”yù¾
.
id
 = 
ù¾_id
;

731 ià(0 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYCTRL
,

732 &
ÿ±u»
->
qu”yù¾
))

735 ià(
ÿ±u»
->
qu”yù¾
.
æags
 & 
V4L2_CTRL_FLAG_DISABLED
)

738 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_BRIGHTNESS
)

740 
ÿ±u»
->
v4l2_brighŠess
 = 1;

741 
ÿ±u»
->
v4l2_brighŠess_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

742 
ÿ±u»
->
v4l2_brighŠess_max
 = c­tu»->
qu”yù¾
.
maximum
;

745 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_CONTRAST
)

747 
ÿ±u»
->
v4l2_cÚŒa¡
 = 1;

748 
ÿ±u»
->
v4l2_cÚŒa¡_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

749 
ÿ±u»
->
v4l2_cÚŒa¡_max
 = c­tu»->
qu”yù¾
.
maximum
;

752 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_SATURATION
)

754 
ÿ±u»
->
v4l2_§tu¿tiÚ
 = 1;

755 
ÿ±u»
->
v4l2_§tu¿tiÚ_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

756 
ÿ±u»
->
v4l2_§tu¿tiÚ_max
 = c­tu»->
qu”yù¾
.
maximum
;

759 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_HUE
)

761 
ÿ±u»
->
v4l2_hue
 = 1;

762 
ÿ±u»
->
v4l2_hue_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

763 
ÿ±u»
->
v4l2_hue_max
 = c­tu»->
qu”yù¾
.
maximum
;

766 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_GAIN
)

768 
ÿ±u»
->
v4l2_gaš
 = 1;

769 
ÿ±u»
->
v4l2_gaš_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

770 
ÿ±u»
->
v4l2_gaš_max
 = c­tu»->
qu”yù¾
.
maximum
;

773 ià(
ÿ±u»
->
qu”yù¾
.
id
 =ğ
V4L2_CID_EXPOSURE
)

775 
ÿ±u»
->
v4l2_exposu»
 = 1;

776 
ÿ±u»
->
v4l2_exposu»_mš
 = c­tu»->
qu”yù¾
.
mšimum
;

777 
ÿ±u»
->
v4l2_exposu»_max
 = c­tu»->
qu”yù¾
.
maximum
;

782 ià(
”ºo
 =ğ
EINVAL
)

785 
	`³¼Ü
 ("VIDIOC_QUERYCTRL");

791 
	}
}

793 
	$_ÿ±u»_V4L2
 (
CvC­tu»CAM_V4L
 *
ÿ±u»
, *
deviûName
)

795 
d‘eù_v4l2
 = 0;

797 
d‘eù_v4l2
 = 
	`Œy_š™_v4l2
(
ÿ±u»
, 
deviûName
);

799 ià(
d‘eù_v4l2
 != 1) {

805 
V4L2_SUPPORT
 = 1;

808 
ÿ±u»
->
v4l2_brighŠess
 = 0;

809 
ÿ±u»
->
v4l2_cÚŒa¡
 = 0;

810 
ÿ±u»
->
v4l2_§tu¿tiÚ
 = 0;

811 
ÿ±u»
->
v4l2_hue
 = 0;

812 
ÿ±u»
->
v4l2_gaš
 = 0;

813 
ÿ±u»
->
v4l2_exposu»
 = 0;

815 
ÿ±u»
->
v4l2_brighŠess_mš
 = 0;

816 
ÿ±u»
->
v4l2_cÚŒa¡_mš
 = 0;

817 
ÿ±u»
->
v4l2_§tu¿tiÚ_mš
 = 0;

818 
ÿ±u»
->
v4l2_hue_mš
 = 0;

819 
ÿ±u»
->
v4l2_gaš_mš
 = 0;

820 
ÿ±u»
->
v4l2_exposu»_mš
 = 0;

822 
ÿ±u»
->
v4l2_brighŠess_max
 = 0;

823 
ÿ±u»
->
v4l2_cÚŒa¡_max
 = 0;

824 
ÿ±u»
->
v4l2_§tu¿tiÚ_max
 = 0;

825 
ÿ±u»
->
v4l2_hue_max
 = 0;

826 
ÿ±u»
->
v4l2_gaš_max
 = 0;

827 
ÿ±u»
->
v4l2_exposu»_max
 = 0;

829 
ÿ±u»
->
time¡amp
.
tv_£c
 = 0;

830 
ÿ±u»
->
time¡amp
.
tv_u£c
 = 0;

833 
	`v4l2_sÿn_cÚŒŞs
(
ÿ±u»
);

835 ià((
ÿ±u»
->
ÿp
.
ÿ·b™›s
 & 
V4L2_CAP_VIDEO_CAPTURE
) == 0) {

837 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L2: deviû % i uÇbËØÿ±u» videØmemÜy.\n",
deviûName
);

838 
	`icvClo£CAM_V4L
(
ÿ±u»
);

849 if(
ÿ±u»
->
šp
.
šdex
 > 0) {

850 
	`CLEAR
 (
ÿ±u»
->
šp
);

851 
ÿ±u»
->
šp
.
šdex
 = 
CHANNEL_NUMBER
;

854 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_ENUMINPUT
, &ÿ±u»->
šp
))

856 
	`årštf
 (
¡d”r
, "VIDEOIO ERROR: V4L2: Aren't‡bleo set channel‚umber\n");

857 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

863 
	`CLEAR
 (
ÿ±u»
->
fÜm
);

864 
ÿ±u»
->
fÜm
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

866 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
)) {

867 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L2: Could‚ot obtain specifics of capture window.\n\n");

868 
	`icvClo£CAM_V4L
(
ÿ±u»
);

872 ià(
V4L2_SUPPORT
 == 0)

876 ià(
	`auto£tup_ÿ±u»_mode_v4l2
(
ÿ±u»
) == -1)

879 
	`icvS‘VideoSize
(
ÿ±u»
, 
DEFAULT_V4L_WIDTH
, 
DEFAULT_V4L_HEIGHT
);

881 
mš
;

884 
mš
 = 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
 * 2;

886 ià(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
by‹¥”lše
 < 
mš
)

887 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
by‹¥”lše
 = 
mš
;

889 
mš
 = 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
by‹¥”lše
 * c­tu»->fÜm.fmt.pix.
height
;

891 ià(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
sizeimage
 < 
mš
)

892 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
sizeimage
 = 
mš
;

894 
	`CLEAR
 (
ÿ±u»
->
»q
);

896 
bufãr_numb”
 = 
DEFAULT_V4L_BUFFERS
;

898 
Œy_agaš
:

900 
ÿ±u»
->
»q
.
couÁ
 = 
bufãr_numb”
;

901 
ÿ±u»
->
»q
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

902 
ÿ±u»
->
»q
.
memÜy
 = 
V4L2_MEMORY_MMAP
;

904 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_REQBUFS
, &ÿ±u»->
»q
))

906 ià(
EINVAL
 =ğ
”ºo
)

908 
	`årštf
 (
¡d”r
, "% dÛ nÙ suµÜˆmemÜy m­pšg\n", 
deviûName
);

910 
	`³¼Ü
 ("VIDIOC_REQBUFS");

913 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

917 ià(
ÿ±u»
->
»q
.
couÁ
 < 
bufãr_numb”
)

919 ià(
bufãr_numb”
 == 1)

921 
	`årštf
 (
¡d”r
, "Insuffic›Á bufã¸memÜy oÀ%s\n", 
deviûName
);

924 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

927 
bufãr_numb”
--;

928 
	`årštf
 (
¡d”r
, "Insuffic›Á bufã¸memÜy oÀ% -- deü—£šg bufãrs\n", 
deviûName
);

930 
Œy_agaš
;

934 
n_bufãrs
 = 0;‚_bufãr < 
ÿ±u»
->
»q
.
couÁ
; ++n_buffers)

936 
v4l2_bufãr
 
buf
;

938 
	`CLEAR
 (
buf
);

940 
buf
.
ty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

941 
buf
.
memÜy
 = 
V4L2_MEMORY_MMAP
;

942 
buf
.
šdex
 = 
n_bufãrs
;

944 ià(-1 =ğ
	`ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QUERYBUF
, &
buf
)) {

945 
	`³¼Ü
 ("VIDIOC_QUERYBUF");

948 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

952 
ÿ±u»
->
bufãrs
[
n_bufãrs
].
Ëngth
 = 
buf
.length;

953 
ÿ±u»
->
bufãrs
[
n_bufãrs
].
¡¬t
 =

954 
	`mm­
 (
NULL
 ,

955 
buf
.
Ëngth
,

956 
PROT_READ
 | 
PROT_WRITE
 ,

957 
MAP_SHARED
 ,

958 
ÿ±u»
->
deviûHªdË
, 
buf
.
m
.
off£t
);

960 ià(
MAP_FAILED
 =ğ
ÿ±u»
->
bufãrs
[
n_bufãrs
].
¡¬t
) {

961 
	`³¼Ü
 ("mmap");

964 
	`icvClo£CAM_V4L
 (
ÿ±u»
);

968 ià(
n_bufãrs
 == 0) {

969 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
 = 
	`m®loc
Ğ
buf
.
Ëngth
 );

970 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
Ëngth
 = 
buf
.length;

975 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

976 
	`cvSize
Ğ
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

977 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
 ),

978 
IPL_DEPTH_8U
, 3, 
IPL_ORIGIN_TL
, 4 );

980 
ÿ±u»
->
äame
.
imageD©a
 = (*)
	`cvAÎoc
(ÿ±u»->äame.
imageSize
);

983 
	}
};

987 #ifdeà
HAVE_CAMV4L


989 
	$_ÿ±u»_V4L
 (
CvC­tu»CAM_V4L
 *
ÿ±u»
, *
deviûName
)

991 
d‘eù_v4l
 = 0;

993 
d‘eù_v4l
 = 
	`Œy_š™_v4l
(
ÿ±u»
, 
deviûName
);

995 ià((
d‘eù_v4l
 == -1)

998 
	`årštf
 (
¡d”r
, "VIDEOIO ERROR: V4L"

999 ": deviû %s: UÇbËØİ’ fÜ READ ONLY\n", 
deviûName
);

1004 ià((
d‘eù_v4l
 <= 0)

1007 
	`årštf
 (
¡d”r
, "VIDEOIO ERROR: V4L"

1008 ": deviû %s: UÇbËØqu”y‚umb” oàchªÃls\n", 
deviûName
);

1014 ià((
ÿ±u»
->
ÿ·b™y
.
ty³
 & 
VID_TYPE_CAPTURE
) == 0) {

1016 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: "

1017 "deviû % i uÇbËØÿ±u» videØmemÜy.\n",
deviûName
);

1018 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1034 if(
ÿ±u»
->
ÿ·b™y
.
chªÃls
>0) {

1036 
video_chªÃl
 
£ËùedChªÃl
;

1037 
	`mem£t
(&
£ËùedChªÃl
, 0, (selectedChannel));

1039 
£ËùedChªÃl
.
chªÃl
=
CHANNEL_NUMBER
;

1040 ià(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGCHAN
 , &
£ËùedChªÃl
) != -1) {

1043 ià(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSCHAN
 , &
£ËùedChªÃl
) == -1) {

1054 if(
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGWIN
, &ÿ±u»->
ÿ±u»Wšdow
) == -1) {

1055 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: "

1057 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1065 ià(
	`auto£tup_ÿ±u»_mode_v4l
(
ÿ±u»
) == -1)

1072 
	`ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGMBUF
, &ÿ±u»->
memÜyBufãr
);

1073 
ÿ±u»
->
memÜyM­
 = (*)
	`mm­
(0,

1074 
ÿ±u»
->
memÜyBufãr
.
size
,

1075 
PROT_READ
 | 
PROT_WRITE
,

1076 
MAP_SHARED
,

1077 
ÿ±u»
->
deviûHªdË
,

1079 ià(
ÿ±u»
->
memÜyM­
 =ğ
MAP_FAILED
) {

1080 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: M­pšg MemmÜy from videØsourûƒ¼Ü: %s\n", 
	`¡»¼Ü
(
”ºo
));

1081 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1086 
ÿ±u»
->
mm­s
 = (
video_mm­
 *)

1087 (
	`m®loc
(
ÿ±u»
->
memÜyBufãr
.
äames
 * (
video_mm­
)));

1088 ià(!
ÿ±u»
->
mm­s
) {

1089 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Could‚ot memory map video frames.\n");

1090 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1097 
	`cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

1098 
	`cvSize
Ğ
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

1099 
ÿ±u»
->
ÿ±u»Wšdow
.
height
 ),

1100 
IPL_DEPTH_8U
, 3, 
IPL_ORIGIN_TL
, 4 );

1102 
ÿ±u»
->
äame
.
imageD©a
 = (*)
	`cvAÎoc
(ÿ±u»->äame.
imageSize
);

1105 
	}
};

1109 
CvC­tu»CAM_V4L
 * 
	$icvC­tu»FromCAM_V4L
 (
šdex
)

1111 
autošdex
;

1112 
autošdex
 = 0;

1114 
deviûName
[
MAX_DEVICE_DRIVER_NAME
];

1116 ià(!
numCam”as
)

1117 
	`icvIn™C­tu»_V4L
();

1118 ià(!
numCam”as
)

1119  
NULL
;

1122 iàĞ(
šdex
>-1è&& ! ((1 << indexè& 
šdexLi¡
) )

1124 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: index %d i nÙ cÜ»ù!\n",
šdex
);

1125  
NULL
;

1129 
CvC­tu»CAM_V4L
 * 
ÿ±u»
 = (CvC­tu»CAM_V4L*)
	`cvAÎoc
((CvCaptureCAM_V4L));

1130 ià(!
ÿ±u»
) {

1131 
	`årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Could‚ot‡llocate memory for capture…rocess.\n");

1132  
NULL
;

1135 ià(
šdex
<0) {

1136 ; 
autošdex
<
MAX_CAMERAS
;autoindex++)

1137 ià(
šdexLi¡
 & (1<<
autošdex
))

1139 ià(
autošdex
==
MAX_CAMERAS
)

1140  
NULL
;

1141 
šdex
=
autošdex
;

1142 
autošdex
++;

1145 
	`¥rštf
(
deviûName
, "/dev/video%1d", 
šdex
);

1148 
	`mem£t
(
ÿ±u»
,0,(
CvC­tu»CAM_V4L
));

1151 
ÿ±u»
->
Fœ¡C­tu»
 = 1;

1153 #ifdeà
HAVE_CAMV4L2


1154 ià(
	`_ÿ±u»_V4L2
 (
ÿ±u»
, 
deviûName
) == -1) {

1155 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1156 
V4L2_SUPPORT
 = 0;

1158 #ifdeà
HAVE_CAMV4L


1159 ià(
	`_ÿ±u»_V4L
 (
ÿ±u»
, 
deviûName
) == -1) {

1160 
	`icvClo£CAM_V4L
(
ÿ±u»
);

1161  
NULL
;

1164 #ifdeà
HAVE_CAMV4L2


1165 
	}
} {

1166 
	gV4L2_SUPPORT
 = 1;

1170  
	gÿ±u»
;

1173 #ifdeà
HAVE_CAMV4L2


1175 
»ad_äame_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

1176 
v4l2_bufãr
 
	gbuf
;

1178 
CLEAR
 (
buf
);

1180 
	gbuf
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1181 
	gbuf
.
	gmemÜy
 = 
V4L2_MEMORY_MMAP
;

1183 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_DQBUF
, &
buf
)) {

1184 
	g”ºo
) {

1185 
	gEAGAIN
:

1188 
	gEIO
:

1189 ià(!(
buf
.
æags
 & (
V4L2_BUF_FLAG_QUEUED
 | 
V4L2_BUF_FLAG_DONE
)))

1191 ià(
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QBUF
, &
buf
) == -1)

1200 
³¼Ü
 ("VIDIOC_DQBUF");

1205 
as£¹
(
buf
.
šdex
 < 
ÿ±u»
->
»q
.
couÁ
);

1207 
memıy
(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
,

1208 
ÿ±u»
->
bufãrs
[
buf
.
šdex
].
¡¬t
,

1209 
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
Ëngth
 );

1210 
	gÿ±u»
->
	gbufãrIndex
 = 
MAX_V4L_BUFFERS
;

1214 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QBUF
, &
buf
))

1215 
³¼Ü
 ("VIDIOC_QBUF");

1218 
	gÿ±u»
->
	gtime¡amp
 = 
buf
.
time¡amp
;

1223 
mašloİ_v4l2
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

1224 
	gcouÁ
;

1226 
	gcouÁ
 = 1;

1228 
	gcouÁ
-- > 0) {

1230 
fd_£t
 
	gfds
;

1231 
timev®
 
	gtv
;

1232 
	gr
;

1234 
FD_ZERO
 (&
fds
);

1235 
FD_SET
 (
ÿ±u»
->
deviûHªdË
, &
fds
);

1238 
	gtv
.
	gtv_£c
 = 10;

1239 
	gtv
.
	gtv_u£c
 = 0;

1241 
	gr
 = 
£Ëù
 (
ÿ±u»
->
deviûHªdË
+1, &
fds
, 
NULL
, NULL, &
tv
);

1243 ià(-1 =ğ
r
) {

1244 ià(
EINTR
 =ğ
”ºo
)

1247 
³¼Ü
 ("select");

1250 ià(0 =ğ
r
) {

1251 
årštf
 (
¡d”r
, "selectimeout\n");

1257 ià(
»ad_äame_v4l2
 (
ÿ±u»
))

1265 
icvG¿bF¿meCAM_V4L
(
CvC­tu»CAM_V4L
* 
ÿ±u»
) {

1267 ià(
	gÿ±u»
->
	gFœ¡C­tu»
) {

1273 #ifdeà
HAVE_CAMV4L2


1275 #ifdeà
HAVE_CAMV4L


1276 ià(
	gV4L2_SUPPORT
 == 1)

1280 
ÿ±u»
->
bufãrIndex
 = 0;

1281 
	gÿ±u»
->
	gbufãrIndex
 < (()ÿ±u»->
	g»q
.
	gcouÁ
);

1282 ++
	gÿ±u»
->
	gbufãrIndex
)

1285 
v4l2_bufãr
 
	gbuf
;

1287 
CLEAR
 (
buf
);

1289 
	gbuf
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1290 
	gbuf
.
	gmemÜy
 = 
V4L2_MEMORY_MMAP
;

1291 
	gbuf
.
	gšdex
 = ()
ÿ±u»
->
bufãrIndex
;

1293 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_QBUF
, &
buf
)) {

1294 
³¼Ü
 ("VIDIOC_QBUF");

1300 
	gÿ±u»
->
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

1301 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_STREAMON
,

1302 &
ÿ±u»
->
ty³
)) {

1304 
³¼Ü
 ("VIDIOC_STREAMON");

1309 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

1312 #ifdeà
HAVE_CAMV4L


1315 
	gÿ±u»
->
	gbufãrIndex
 = 0;

1316 
	gÿ±u»
->
	gbufãrIndex
 < (ÿ±u»->
	gmemÜyBufãr
.
	gäames
-1);

1317 ++
	gÿ±u»
->
	gbufãrIndex
) {

1319 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gäame
 = capture->bufferIndex;

1320 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gwidth
 = c­tu»->
ÿ±u»Wšdow
.
width
;

1321 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gheight
 = c­tu»->
ÿ±u»Wšdow
.
height
;

1322 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gfÜm©
 = c­tu»->
imagePrİ”t›s
.
·Ë‰e
;

1324 ià(
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCMCAPTURE
, &ÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
]) == -1) {

1325 
årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Initial Capture Error: Unableo†oad initial memory buffers.\n");

1333 #ià
defšed
(
V4L_ABORT_BADJPEG
è&& defšed(
HAVE_CAMV4L2
)

1334 ià(
	gV4L2_SUPPORT
 == 1)

1338 
mašloİ_v4l2
(
ÿ±u»
);

1343 
	gÿ±u»
->
	gFœ¡C­tu»
 = 0;

1346 #ifdeà
HAVE_CAMV4L2


1348 ià(
	gV4L2_SUPPORT
 == 1)

1351 
mašloİ_v4l2
(
ÿ±u»
);

1355 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

1358 #ifdeà
HAVE_CAMV4L


1361 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gäame
 = capture->bufferIndex;

1362 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gwidth
 = c­tu»->
ÿ±u»Wšdow
.
width
;

1363 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gheight
 = c­tu»->
ÿ±u»Wšdow
.
height
;

1364 
	gÿ±u»
->
	gmm­s
[
ÿ±u»
->
bufãrIndex
].
	gfÜm©
 = c­tu»->
imagePrİ”t›s
.
·Ë‰e
;

1366 ià(
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOCMCAPTURE
,

1367 &
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
]) == -1) {

1372 ++
	gÿ±u»
->
	gbufãrIndex
;

1373 ià(
	gÿ±u»
->
	gbufãrIndex
 =ğ
ÿ±u»
->
memÜyBufãr
.
äames
) {

1374 
ÿ±u»
->
bufãrIndex
 = 0;

1410 
	#LIMIT
(
x
è((x)>0xffffff?0xff: ((x)<=0xffff?0:((x)>>16)))

	)

1412 
šlše
 

1413 
move_420_block
(
yTL
, 
yTR
, 
yBL
, 
yBR
, 
u
, 
v
,

1414 
rowPix–s
, * 
rgb
)

1416 cÚ¡ 
	grvSÿË
 = 91881;

1417 cÚ¡ 
	gguSÿË
 = -22553;

1418 cÚ¡ 
	ggvSÿË
 = -46801;

1419 cÚ¡ 
	gbuSÿË
 = 116129;

1420 cÚ¡ 
	gySÿË
 = 65536;

1421 
	gr
, 
	gg
, 
	gb
;

1423 
	gg
 = 
guSÿË
 * 
u
 + 
gvSÿË
 * 
v
;

1428 
	gr
 = 
rvSÿË
 * 
v
;

1429 
	gb
 = 
buSÿË
 * 
u
;

1432 
	gyTL
 *ğ
ySÿË
; 
	gyTR
 *= yScale;

1433 
	gyBL
 *ğ
ySÿË
; 
	gyBR
 *= yScale;

1436 
	grgb
[0] = 
LIMIT
(
b
+
yTL
);„gb[1] = LIMIT(
g
+yTL);

1437 
	grgb
[2] = 
LIMIT
(
r
+
yTL
);

1439 
	grgb
[3] = 
LIMIT
(
b
+
yTR
);„gb[4] = LIMIT(
g
+yTR);

1440 
	grgb
[5] = 
LIMIT
(
r
+
yTR
);

1443 
	grgb
 +ğ3 * 
rowPix–s
;

1444 
	grgb
[0] = 
LIMIT
(
b
+
yBL
);„gb[1] = LIMIT(
g
+yBL);

1445 
	grgb
[2] = 
LIMIT
(
r
+
yBL
);

1447 
	grgb
[3] = 
LIMIT
(
b
+
yBR
);„gb[4] = LIMIT(
g
+yBR);

1448 
	grgb
[5] = 
LIMIT
(
r
+
yBR
);

1451 
šlše
 

1452 
move_411_block
(
yTL
, 
yTR
, 
yBL
, 
yBR
, 
u
, 
v
,

1453 , * 
rgb
)

1455 cÚ¡ 
	grvSÿË
 = 91881;

1456 cÚ¡ 
	gguSÿË
 = -22553;

1457 cÚ¡ 
	ggvSÿË
 = -46801;

1458 cÚ¡ 
	gbuSÿË
 = 116129;

1459 cÚ¡ 
	gySÿË
 = 65536;

1460 
	gr
, 
	gg
, 
	gb
;

1462 
	gg
 = 
guSÿË
 * 
u
 + 
gvSÿË
 * 
v
;

1467 
	gr
 = 
rvSÿË
 * 
v
;

1468 
	gb
 = 
buSÿË
 * 
u
;

1471 
	gyTL
 *ğ
ySÿË
; 
	gyTR
 *= yScale;

1472 
	gyBL
 *ğ
ySÿË
; 
	gyBR
 *= yScale;

1475 
	grgb
[0] = 
LIMIT
(
b
+
yTL
);„gb[1] = LIMIT(
g
+yTL);

1476 
	grgb
[2] = 
LIMIT
(
r
+
yTL
);

1478 
	grgb
[3] = 
LIMIT
(
b
+
yTR
);„gb[4] = LIMIT(
g
+yTR);

1479 
	grgb
[5] = 
LIMIT
(
r
+
yTR
);

1482 
	grgb
 += 6;

1483 
	grgb
[0] = 
LIMIT
(
b
+
yBL
);„gb[1] = LIMIT(
g
+yBL);

1484 
	grgb
[2] = 
LIMIT
(
r
+
yBL
);

1486 
	grgb
[3] = 
LIMIT
(
b
+
yBR
);„gb[4] = LIMIT(
g
+yBR);

1487 
	grgb
[5] = 
LIMIT
(
r
+
yBR
);

1503 
yuv420p_to_rgb24
(
width
, 
height
,

1504 *
pIn0
, *
pOut0
)

1506 cÚ¡ 
	gnumpix
 = 
width
 * 
height
;

1507 cÚ¡ 
	gby‹s
 = 24 >> 3;

1508 
	gi
, 
	gj
, 
	gy00
, 
	gy01
, 
	gy10
, 
	gy11
, 
	gu
, 
	gv
;

1509 *
	gpY
 = 
pIn0
;

1510 *
	gpU
 = 
pY
 + 
numpix
;

1511 *
	gpV
 = 
pU
 + 
numpix
 / 4;

1512 *
	gpOut
 = 
pOut0
;

1514 
	gj
 = 0; j <ğ
height
 - 2; j += 2) {

1515 
i
 = 0; 
	gi
 <ğ
width
 - 2; i += 2) {

1516 
y00
 = *
pY
;

1517 
	gy01
 = *(
pY
 + 1);

1518 
	gy10
 = *(
pY
 + 
width
);

1519 
	gy11
 = *(
pY
 + 
width
 + 1);

1520 
	gu
 = (*
pU
++) - 128;

1521 
	gv
 = (*
pV
++) - 128;

1523 
move_420_block
(
y00
, 
y01
, 
y10
, 
y11
, 
u
, 
v
,

1524 
width
, 
pOut
);

1526 
	gpY
 += 2;

1527 
	gpOut
 +ğ2 * 
by‹s
;

1530 
	gpY
 +ğ
width
;

1531 
	gpOut
 +ğ
width
 * 
by‹s
;

1545 #ifdeà
HAVE_CAMV4L


1547 
yuv420_to_rgb24
(
width
, 
height
,

1548 *
pIn0
, *
pOut0
)

1550 cÚ¡ 
	gby‹s
 = 24 >> 3;

1551 
	gi
, 
	gj
, 
	gy00
, 
	gy01
, 
	gy10
, 
	gy11
, 
	gu
, 
	gv
;

1552 *
	gpY
 = 
pIn0
;

1553 *
	gpU
 = 
pY
 + 4;

1554 *
	gpV
 = 
pU
 + 
width
;

1555 *
	gpOut
 = 
pOut0
;

1557 
	gj
 = 0; j <ğ
height
 - 2; j += 2) {

1558 
i
 = 0; 
	gi
 <ğ
width
 - 4; i += 4) {

1559 
y00
 = *
pY
;

1560 
	gy01
 = *(
pY
 + 1);

1561 
	gy10
 = *(
pY
 + 
width
);

1562 
	gy11
 = *(
pY
 + 
width
 + 1);

1563 
	gu
 = (*
pU
++) - 128;

1564 
	gv
 = (*
pV
++) - 128;

1566 
move_420_block
(
y00
, 
y01
, 
y10
, 
y11
, 
u
, 
v
,

1567 
width
, 
pOut
);

1569 
	gpY
 += 2;

1570 
	gpOut
 +ğ2 * 
by‹s
;

1572 
	gy00
 = *
pY
;

1573 
	gy01
 = *(
pY
 + 1);

1574 
	gy10
 = *(
pY
 + 
width
);

1575 
	gy11
 = *(
pY
 + 
width
 + 1);

1576 
	gu
 = (*
pU
++) - 128;

1577 
	gv
 = (*
pV
++) - 128;

1579 
move_420_block
(
y00
, 
y01
, 
y10
, 
y11
, 
u
, 
v
,

1580 
width
, 
pOut
);

1582 
	gpY
 += 4;

1583 
	gpOut
 +ğ2 * 
by‹s
;

1586 
	gpY
 +ğ
width
;

1587 
	gpOut
 +ğ
width
 * 
by‹s
;

1608 
yuv411p_to_rgb24
(
width
, 
height
,

1609 *
pIn0
, *
pOut0
)

1611 cÚ¡ 
	gnumpix
 = 
width
 * 
height
;

1612 cÚ¡ 
	gby‹s
 = 24 >> 3;

1613 
	gi
, 
	gj
, 
	gy00
, 
	gy01
, 
	gy10
, 
	gy11
, 
	gu
, 
	gv
;

1614 *
	gpY
 = 
pIn0
;

1615 *
	gpU
 = 
pY
 + 
numpix
;

1616 *
	gpV
 = 
pU
 + 
numpix
 / 4;

1617 *
	gpOut
 = 
pOut0
;

1619 
	gj
 = 0; j <ğ
height
; j++) {

1620 
	gi
 = 0; i <ğ
width
 - 4; i += 4) {

1621 
y00
 = *
pY
;

1622 
	gy01
 = *(
pY
 + 1);

1623 
	gy10
 = *(
pY
 + 2);

1624 
	gy11
 = *(
pY
 + 3);

1625 
	gu
 = (*
pU
++) - 128;

1626 
	gv
 = (*
pV
++) - 128;

1628 
move_411_block
(
y00
, 
y01
, 
y10
, 
y11
, 
u
, 
v
,

1629 
width
, 
pOut
);

1631 
	gpY
 += 4;

1632 
	gpOut
 +ğ4 * 
by‹s
;

1640 
	#SAT
(
c
) \

1641 ià(
c
 & (~255)è{ ià(ø< 0èøğ0; øğ255; }

	)

1643 #ifdeà
HAVE_CAMV4L2


1645 
yuyv_to_rgb24
 (
width
, 
height
, *
¤c
, *
d¡
)

1647 *
	gs
;

1648 *
	gd
;

1649 
	gl
, 
	gc
;

1650 
	gr
, 
	gg
, 
	gb
, 
	gü
, 
	gcg
, 
	gcb
, 
	gy1
, 
	gy2
;

1652 
	gl
 = 
height
;

1653 
	gs
 = 
¤c
;

1654 
	gd
 = 
d¡
;

1655 
	gl
--) {

1656 
	gc
 = 
width
 >> 1;

1657 
	gc
--) {

1658 
	gy1
 = *
s
++;

1659 
	gcb
 = ((*
s
 - 128) * 454) >> 8;

1660 
	gcg
 = (*
s
++ - 128) * 88;

1661 
	gy2
 = *
s
++;

1662 
	gü
 = ((*
s
 - 128) * 359) >> 8;

1663 
	gcg
 = (
cg
 + (*
s
++ - 128) * 183) >> 8;

1665 
	gr
 = 
y1
 + 
ü
;

1666 
	gb
 = 
y1
 + 
cb
;

1667 
	gg
 = 
y1
 - 
cg
;

1668 
SAT
(
r
);

1669 
SAT
(
g
);

1670 
SAT
(
b
);

1672 *
	gd
++ = 
b
;

1673 *
	gd
++ = 
g
;

1674 *
	gd
++ = 
r
;

1676 
	gr
 = 
y2
 + 
ü
;

1677 
	gb
 = 
y2
 + 
cb
;

1678 
	gg
 = 
y2
 - 
cg
;

1679 
SAT
(
r
);

1680 
SAT
(
g
);

1681 
SAT
(
b
);

1683 *
	gd
++ = 
b
;

1684 *
	gd
++ = 
g
;

1685 *
	gd
++ = 
r
;

1691 
uyvy_to_rgb24
 (
width
, 
height
, *
¤c
, *
d¡
)

1693 *
	gs
;

1694 *
	gd
;

1695 
	gl
, 
	gc
;

1696 
	gr
, 
	gg
, 
	gb
, 
	gü
, 
	gcg
, 
	gcb
, 
	gy1
, 
	gy2
;

1698 
	gl
 = 
height
;

1699 
	gs
 = 
¤c
;

1700 
	gd
 = 
d¡
;

1701 
	gl
--) {

1702 
	gc
 = 
width
 >> 1;

1703 
	gc
--) {

1704 
	gcb
 = ((*
s
 - 128) * 454) >> 8;

1705 
	gcg
 = (*
s
++ - 128) * 88;

1706 
	gy1
 = *
s
++;

1707 
	gü
 = ((*
s
 - 128) * 359) >> 8;

1708 
	gcg
 = (
cg
 + (*
s
++ - 128) * 183) >> 8;

1709 
	gy2
 = *
s
++;

1711 
	gr
 = 
y1
 + 
ü
;

1712 
	gb
 = 
y1
 + 
cb
;

1713 
	gg
 = 
y1
 - 
cg
;

1714 
SAT
(
r
);

1715 
SAT
(
g
);

1716 
SAT
(
b
);

1718 *
	gd
++ = 
b
;

1719 *
	gd
++ = 
g
;

1720 *
	gd
++ = 
r
;

1722 
	gr
 = 
y2
 + 
ü
;

1723 
	gb
 = 
y2
 + 
cb
;

1724 
	gg
 = 
y2
 - 
cg
;

1725 
SAT
(
r
);

1726 
SAT
(
g
);

1727 
SAT
(
b
);

1729 *
	gd
++ = 
b
;

1730 *
	gd
++ = 
g
;

1731 *
	gd
++ = 
r
;

1737 #ifdeà
HAVE_JPEG


1740 
boŞ


1741 
mj³g_to_rgb24
 (
width
, 
height
,

1742 *
¤c
, 
Ëngth
,

1743 *
d¡
)

1745 
	gcv
::
M©
 
‹mp
=
cv
::
imdecode
(cv::M©(
¡d
::
veùÜ
<
uch¬
>(
¤c
, srø+ 
Ëngth
)), 1);

1746 ifĞ!
	g‹mp
.
	gd©a
 ||emp.
	gcŞs
 !ğ
width
 || 
‹mp
.
rows
 !ğ
height
 )

1747  
çl£
;

1748 
memıy
(
d¡
, 
‹mp
.
d©a
, 
width
*
height
*3);

1749  
	gŒue
;

1762 #ifdeà
HAVE_CAMV4L2


1763 
bay”2rgb24
(
WIDTH
, 
HEIGHT
, *
¤c
, *
d¡
)

1765 
	gi
;

1766 *
	g¿w±
, *
	gsÿÅt
;

1767 
	gsize
;

1769 
	g¿w±
 = 
¤c
;

1770 
	gsÿÅt
 = 
d¡
;

1771 
	gsize
 = 
WIDTH
*
HEIGHT
;

1773  
	gi
 = 0; i < 
	gsize
; i++ ) {

1774 iàĞ(
	gi
/
	gWIDTH
) % 2 == 0 ) {

1775 iàĞ(
i
 % 2) == 0 ) {

1777 iàĞ(
i
 > 
WIDTH
) && ((i % WIDTH) > 0) ) {

1778 *
sÿÅt
++ = (*(
¿w±
-
WIDTH
-1)+*(rawpt-WIDTH+1)+

1779 *(
¿w±
+
WIDTH
-1)+*(rawpt+WIDTH+1))/4;

1780 *
	gsÿÅt
++ = (*(
¿w±
-1)+*(rawpt+1)+

1781 *(
¿w±
+
WIDTH
)+*(rawpt-WIDTH))/4;

1782 *
	gsÿÅt
++ = *
¿w±
;

1785 *
	gsÿÅt
++ = *(
¿w±
+
WIDTH
+1);

1786 *
	gsÿÅt
++ = (*(
¿w±
+1)+*Ôaw±+
WIDTH
))/2;

1787 *
	gsÿÅt
++ = *
¿w±
;

1791 iàĞ(
	gi
 > 
	gWIDTH
) && ((i % WIDTH) < (WIDTH-1)) ) {

1792 *
	gsÿÅt
++ = (*(
¿w±
+
WIDTH
)+*(rawpt-WIDTH))/2;

1793 *
	gsÿÅt
++ = *
¿w±
;

1794 *
	gsÿÅt
++ = (*(
¿w±
-1)+*(rawpt+1))/2;

1797 *
	gsÿÅt
++ = *(
¿w±
+
WIDTH
);

1798 *
	gsÿÅt
++ = *
¿w±
;

1799 *
	gsÿÅt
++ = *(
¿w±
-1);

1803 iàĞ(
	gi
 % 2) == 0 ) {

1805 iàĞ(
i
 < (
WIDTH
*(
HEIGHT
-1))) && ((i % WIDTH) > 0) ) {

1806 *
sÿÅt
++ = (*(
¿w±
-1)+*(rawpt+1))/2;

1807 *
	gsÿÅt
++ = *
¿w±
;

1808 *
	gsÿÅt
++ = (*(
¿w±
+
WIDTH
)+*(rawpt-WIDTH))/2;

1811 *
	gsÿÅt
++ = *(
¿w±
+1);

1812 *
	gsÿÅt
++ = *
¿w±
;

1813 *
	gsÿÅt
++ = *(
¿w±
-
WIDTH
);

1817 iàĞ
	gi
 < (
	gWIDTH
*(
	gHEIGHT
-1)) && ((i % WIDTH) < (WIDTH-1)) ) {

1818 *
	gsÿÅt
++ = *
¿w±
;

1819 *
	gsÿÅt
++ = (*(
¿w±
-1)+*(rawpt+1)+

1820 *(
¿w±
-
WIDTH
)+*(rawpt+WIDTH))/4;

1821 *
	gsÿÅt
++ = (*(
¿w±
-
WIDTH
-1)+*(rawpt-WIDTH+1)+

1822 *(
¿w±
+
WIDTH
-1)+*(rawpt+WIDTH+1))/4;

1825 *
	gsÿÅt
++ = *
¿w±
;

1826 *
	gsÿÅt
++ = (*(
¿w±
-1)+*Ôaw±-
WIDTH
))/2;

1827 *
	gsÿÅt
++ = *(
¿w±
-
WIDTH
-1);

1831 
	g¿w±
++;

1841 
sgbrg2rgb24
(
WIDTH
, 
HEIGHT
, *
¤c
, *
d¡
)

1843 
	gi
;

1844 *
	g¿w±
, *
	gsÿÅt
;

1845 
	gsize
;

1847 
	g¿w±
 = 
¤c
;

1848 
	gsÿÅt
 = 
d¡
;

1849 
	gsize
 = 
WIDTH
*
HEIGHT
;

1851  
	gi
 = 0; i < 
	gsize
; i++ )

1853 iàĞ(
	gi
/
	gWIDTH
) % 2 == 0 )

1855 iàĞ(
i
 % 2) == 0 )

1857 iàĞ(
i
 > 
WIDTH
) && ((i % WIDTH) > 0) )

1859 *
sÿÅt
++ = (*(
¿w±
-1)+*(rawpt+1))/2;

1860 *
	gsÿÅt
++ = *(
¿w±
);

1861 *
	gsÿÅt
++ = (*(
¿w±
-
WIDTH
) + *(rawpt+WIDTH))/2;

1866 *
	gsÿÅt
++ = *(
¿w±
+1);

1867 *
	gsÿÅt
++ = *(
¿w±
);

1868 *
	gsÿÅt
++ = *(
¿w±
+
WIDTH
);

1872 iàĞ(
	gi
 > 
	gWIDTH
) && ((i % WIDTH) < (WIDTH-1)) )

1874 *
	gsÿÅt
++ = *(
¿w±
);

1875 *
	gsÿÅt
++ = (*(
¿w±
-1)+*Ôaw±+1)+*Ôaw±-
WIDTH
)+*(rawpt+WIDTH))/4;

1876 *
	gsÿÅt
++ = (*(
¿w±
-
WIDTH
-1) + *(rawpt-WIDTH+1) + *(rawpt+WIDTH-1) + *(rawpt+WIDTH+1))/4;

1881 *
	gsÿÅt
++ = *(
¿w±
);

1882 *
	gsÿÅt
++ = (*(
¿w±
-1)+*Ôaw±+
WIDTH
))/2;

1883 *
	gsÿÅt
++ = *(
¿w±
+
WIDTH
-1);

1888 iàĞ(
	gi
 % 2) == 0 )

1890 iàĞ(
i
 < (
WIDTH
*(
HEIGHT
-1))) && ((i % WIDTH) > 0) )

1892 *
sÿÅt
++ = (*(
¿w±
-
WIDTH
-1)+*(rawpt-WIDTH+1)+*(rawpt+WIDTH-1)+*(rawpt+WIDTH+1))/4;

1893 *
	gsÿÅt
++ = (*(
¿w±
-1)+*Ôaw±+1)+*Ôaw±-
WIDTH
)+*(rawpt+WIDTH))/4;

1894 *
	gsÿÅt
++ = *(
¿w±
);

1899 *
	gsÿÅt
++ = *(
¿w±
-
WIDTH
+1);

1900 *
	gsÿÅt
++ = (*(
¿w±
+1)+*Ôaw±-
WIDTH
))/2;

1901 *
	gsÿÅt
++ = *(
¿w±
);

1905 iàĞ
	gi
 < (
	gWIDTH
*(
	gHEIGHT
-1)) && ((i % WIDTH) < (WIDTH-1)) )

1907 *
	gsÿÅt
++ = (*(
¿w±
-
WIDTH
)+*(rawpt+WIDTH))/2;

1908 *
	gsÿÅt
++ = *(
¿w±
);

1909 *
	gsÿÅt
++ = (*(
¿w±
-1)+*(rawpt+1))/2;

1914 *
	gsÿÅt
++ = (*(
¿w±
-
WIDTH
));

1915 *
	gsÿÅt
++ = *(
¿w±
);

1916 *
	gsÿÅt
++ = (*(
¿w±
-1));

1920 
	g¿w±
++;

1925 
rgb24_to_rgb24
 (
width
, 
height
, *
¤c
, *
d¡
)

1927 cÚ¡ 
	gsize
 = 
width
 * 
height
;

1928 
	gi
 = 0; i < 
	gsize
; ++i, 
	g¤c
 +ğ3, 
	gd¡
 += 3)

1930 *(
d¡
 + 0èğ*(
¤c
 + 2);

1931 *(
	gd¡
 + 1èğ*(
¤c
 + 1);

1932 *(
	gd¡
 + 2èğ*(
¤c
 + 0);

1936 
	#CLAMP
(
x
è((x)<0?0:((x)>255)?255:(x))

	)

1939 
	gis_abs
;

1940 
	gËn
;

1941 
	gv®
;

1942 } 
	tcode_bË_t
;

1946 
code_bË_t
 
	gbË
[256];

1947 
	gš™_dÚe
 = 0;

1959 
sÚix_decom´ess_š™
()

1961 
	gi
;

1962 
	gis_abs
, 
	gv®
, 
	gËn
;

1964 
	gi
 = 0; i < 256; i++) {

1965 
	gis_abs
 = 0;

1966 
	gv®
 = 0;

1967 
	gËn
 = 0;

1968 ià((
	gi
 & 0x80) == 0) {

1970 
v®
 = 0;

1971 
	gËn
 = 1;

1973 ià((
	gi
 & 0xE0) == 0x80) {

1975 
v®
 = +4;

1976 
	gËn
 = 3;

1978 ià((
	gi
 & 0xE0) == 0xA0) {

1980 
v®
 = -4;

1981 
	gËn
 = 3;

1983 ià((
	gi
 & 0xF0) == 0xD0) {

1985 
v®
 = +11;

1986 
	gËn
 = 4;

1988 ià((
	gi
 & 0xF0) == 0xF0) {

1990 
v®
 = -11;

1991 
	gËn
 = 4;

1993 ià((
	gi
 & 0xF8) == 0xC8) {

1995 
v®
 = +20;

1996 
	gËn
 = 5;

1998 ià((
	gi
 & 0xFC) == 0xC0) {

2000 
v®
 = -20;

2001 
	gËn
 = 6;

2003 ià((
	gi
 & 0xFC) == 0xC4) {

2005 
v®
 = 0;

2006 
	gËn
 = 8;

2008 ià((
	gi
 & 0xF0) == 0xE0) {

2010 
is_abs
 = 1;

2011 
	gv®
 = (
i
 & 0x0F) << 4;

2012 
	gËn
 = 8;

2014 
	gbË
[
i
].
	gis_abs
 = 
is_abs
;

2015 
	gbË
[
i
].
	gv®
 = 
v®
;

2016 
	gbË
[
i
].
	gËn
 = 
Ën
;

2019 
	gš™_dÚe
 = 1;

2037 
sÚix_decom´ess
(
width
, 
height
, *
šp
, *
ou
)

2039 
	grow
, 
	gcŞ
;

2040 
	gv®
;

2041 
	gb™pos
;

2042 
	gcode
;

2043 *
	gaddr
;

2045 ià(!
	gš™_dÚe
) {

2050 
	gb™pos
 = 0;

2051 
	grow
 = 0;„ow < 
	gheight
;„ow++) {

2053 
	gcŞ
 = 0;

2058 ià(
	grow
 < 2) {

2059 
	gaddr
 = 
šp
 + (
b™pos
 >> 3);

2060 
	gcode
 = (
addr
[0] << (
b™pos
 & 7)) | (addr[1] >> (8 - (bitpos & 7)));

2061 
	gb™pos
 += 8;

2062 *
	gou
++ = 
code
;

2064 
	gaddr
 = 
šp
 + (
b™pos
 >> 3);

2065 
	gcode
 = (
addr
[0] << (
b™pos
 & 7)) | (addr[1] >> (8 - (bitpos & 7)));

2066 
	gb™pos
 += 8;

2067 *
	gou
++ = 
code
;

2069 
	gcŞ
 += 2;

2072 
	gcŞ
 < 
	gwidth
) {

2074 
	gaddr
 = 
šp
 + (
b™pos
 >> 3);

2075 
	gcode
 = (
addr
[0] << (
b™pos
 & 7)) | (addr[1] >> (8 - (bitpos & 7)));

2078 
	gb™pos
 +ğ
bË
[
code
].
Ën
;

2081 
	gv®
 = 
bË
[
code
].
v®
;

2082 ià(!
	gbË
[
code
].
	gis_abs
) {

2084 ià(
	gcŞ
 < 2) {

2086 
	gv®
 +ğ
ou
[-2*
width
];

2088 ià(
	grow
 < 2) {

2090 
	gv®
 +ğ
ou
[-2];

2094 
	gv®
 +ğ(
ou
[-2] + ou[-2*
width
]) / 2;

2099 *
	gou
++ = 
CLAMP
(
v®
);

2100 
	gcŞ
++;

2108 
I¶Image
* 
icvR‘r›veF¿meCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, ) {

2110 #ifdeà
HAVE_CAMV4L2


2111 ià(
	gV4L2_SUPPORT
 == 0)

2113 #ifdeà
HAVE_CAMV4L


2117 ià(
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSYNC
, &ÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
].
äame
) == -1) {

2118 
årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L: Could‚Ù SYNCØvideØ¡»am. %s\n", 
¡»¼Ü
(
”ºo
));

2128 #ifdeà
HAVE_CAMV4L2


2130 ià(
	gV4L2_SUPPORT
 == 1)

2133 if((()
ÿ±u»
->
äame
.
width
 !ğÿ±u»->
fÜm
.
fmt
.
pix
.width)

2134 || (()
ÿ±u»
->
äame
.
height
 !ğÿ±u»->
fÜm
.
fmt
.
pix
.height)) {

2135 
cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

2136 
cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

2137 
cvSize
Ğ
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2138 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
 ),

2139 
IPL_DEPTH_8U
, 3, 
IPL_ORIGIN_TL
, 4 );

2140 
	gÿ±u»
->
	gäame
.
	gimageD©a
 = (*)
cvAÎoc
(
ÿ±u»
->
äame
.
imageSize
);

2145 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

2148 #ifdeà
HAVE_CAMV4L


2151 if((
	gÿ±u»
->
	gäame
.
	gwidth
 !ğ
ÿ±u»
->
mm­s
[ÿ±u»->
bufãrIndex
].
width
)

2152 || (
ÿ±u»
->
äame
.
height
 !ğÿ±u»->
mm­s
[ÿ±u»->
bufãrIndex
].height)) {

2153 
cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

2154 
cvIn™ImageH—d”
Ğ&
ÿ±u»
->
äame
,

2155 
cvSize
Ğ
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

2156 
ÿ±u»
->
ÿ±u»Wšdow
.
height
 ),

2157 
IPL_DEPTH_8U
, 3, 
IPL_ORIGIN_TL
, 4 );

2158 
	gÿ±u»
->
	gäame
.
	gimageD©a
 = (*)
cvAÎoc
(
ÿ±u»
->
äame
.
imageSize
);

2164 #ifdeà
HAVE_CAMV4L2


2166 ià(
	gV4L2_SUPPORT
 == 1)

2168 
ÿ±u»
->
·Ë‰e
)

2170 
PALETTE_BGR24
:

2171 
memıy
((*)
ÿ±u»
->
äame
.
imageD©a
,

2172 (*)
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
,

2173 
ÿ±u»
->
äame
.
imageSize
);

2176 
	gPALETTE_YVU420
:

2177 
yuv420p_to_rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2178 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2179 (*)(
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
),

2180 (*)
ÿ±u»
->
äame
.
imageD©a
);

2183 
	gPALETTE_YUV411P
:

2184 
yuv411p_to_rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2185 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2186 (*)(
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
),

2187 (*)
ÿ±u»
->
äame
.
imageD©a
);

2189 #ifdeà
HAVE_JPEG


2190 
	gPALETTE_MJPEG
:

2191 ià(!
mj³g_to_rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2192 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2193 (*)(
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
]

2194 .
¡¬t
),

2195 
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
Ëngth
,

2196 (*)
ÿ±u»
->
äame
.
imageD©a
))

2201 
	gPALETTE_YUYV
:

2202 
yuyv_to_rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2203 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2204 (*)(
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
),

2205 (*)
ÿ±u»
->
äame
.
imageD©a
);

2207 
	gPALETTE_UYVY
:

2208 
uyvy_to_rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2209 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2210 (*)(
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
),

2211 (*)
ÿ±u»
->
äame
.
imageD©a
);

2213 
	gPALETTE_SBGGR8
:

2214 
bay”2rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2215 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2216 (*)
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
,

2217 (*)
ÿ±u»
->
äame
.
imageD©a
);

2220 
	gPALETTE_SN9C10X
:

2221 
sÚix_decom´ess_š™
();

2222 
sÚix_decom´ess
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2223 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2224 (*)
ÿ±u»
->
bufãrs
[ÿ±u»->
bufãrIndex
].
¡¬t
,

2225 (*)
ÿ±u»
->
bufãrs
[(ÿ±u»->
bufãrIndex
+1è% c­tu»->
»q
.
couÁ
].
¡¬t
);

2227 
bay”2rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2228 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2229 (*)
ÿ±u»
->
bufãrs
[(ÿ±u»->
bufãrIndex
+1è% c­tu»->
»q
.
couÁ
].
¡¬t
,

2230 (*)
ÿ±u»
->
äame
.
imageD©a
);

2233 
	gPALETTE_SGBRG
:

2234 
sgbrg2rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2235 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2236 (*)
ÿ±u»
->
bufãrs
[(ÿ±u»->
bufãrIndex
+1è% c­tu»->
»q
.
couÁ
].
¡¬t
,

2237 (*)
ÿ±u»
->
äame
.
imageD©a
);

2239 
	gPALETTE_RGB24
:

2240 
rgb24_to_rgb24
(
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
,

2241 
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
,

2242 (*)
ÿ±u»
->
bufãrs
[(ÿ±u»->
bufãrIndex
+1è% c­tu»->
»q
.
couÁ
].
¡¬t
,

2243 (*)
ÿ±u»
->
äame
.
imageD©a
);

2248 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

2251 #ifdeà
HAVE_CAMV4L


2254 
	gÿ±u»
->
	gimagePrİ”t›s
.
	g·Ë‰e
)

2256 
	gVIDEO_PALETTE_RGB24
:

2257 
memıy
((*)
ÿ±u»
->
äame
.
imageD©a
,

2258 (*)(
ÿ±u»
->
memÜyM­
 + c­tu»->
memÜyBufãr
.
off£ts
[ÿ±u»->
bufãrIndex
]),

2259 
ÿ±u»
->
äame
.
imageSize
);

2261 
	gVIDEO_PALETTE_YUV420P
:

2262 
yuv420p_to_rgb24
(
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

2263 
ÿ±u»
->
ÿ±u»Wšdow
.
height
,

2264 (*)(
ÿ±u»
->
memÜyM­
 + c­tu»->
memÜyBufãr
.
off£ts
[ÿ±u»->
bufãrIndex
]),

2265 (*)
ÿ±u»
->
äame
.
imageD©a
);

2267 
	gVIDEO_PALETTE_YUV420
:

2268 
yuv420_to_rgb24
(
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

2269 
ÿ±u»
->
ÿ±u»Wšdow
.
height
,

2270 (*)(
ÿ±u»
->
memÜyM­
 + c­tu»->
memÜyBufãr
.
off£ts
[ÿ±u»->
bufãrIndex
]),

2271 (*)
ÿ±u»
->
äame
.
imageD©a
);

2273 
	gVIDEO_PALETTE_YUV411P
:

2274 
yuv411p_to_rgb24
(
ÿ±u»
->
ÿ±u»Wšdow
.
width
,

2275 
ÿ±u»
->
ÿ±u»Wšdow
.
height
,

2276 (*)(
ÿ±u»
->
memÜyM­
 + c­tu»->
memÜyBufãr
.
off£ts
[ÿ±u»->
bufãrIndex
]),

2277 (*)
ÿ±u»
->
äame
.
imageD©a
);

2280 
årštf
Ğ
¡d”r
,

2282 
ÿ±u»
->
imagePrİ”t›s
.
·Ë‰e
);

2290 (&
	gÿ±u»
->
	gäame
);

2293 
icvG‘Prİ”tyCAM_V4L
 (
CvC­tu»CAM_V4L
* 
ÿ±u»
,

2294 
´İ”ty_id
 ) {

2296 #ifdeà
HAVE_CAMV4L2


2298 #ifdeà
HAVE_CAMV4L


2299 ià(
	gV4L2_SUPPORT
 == 1)

2304 
v4l2_mš
 = 0;

2305 
	gv4l2_max
 = 255;

2307 
CLEAR
 (
ÿ±u»
->
fÜm
);

2308 
	gÿ±u»
->
	gfÜm
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

2309 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
)) {

2311 
³¼Ü
 ("VIDIOC_G_FMT");

2315 
	g´İ”ty_id
) {

2316 
	gCV_CAP_PROP_FRAME_WIDTH
:

2317  
ÿ±u»
->
fÜm
.
fmt
.
pix
.
width
;

2318 
	gCV_CAP_PROP_FRAME_HEIGHT
:

2319  
ÿ±u»
->
fÜm
.
fmt
.
pix
.
height
;

2324 
	g´İ”ty_id
) {

2325 
	gCV_CAP_PROP_POS_MSEC
:

2326 ià(
ÿ±u»
->
Fœ¡C­tu»
) {

2329  1000 * 
	gÿ±u»
->
	gtime¡amp
.
	gtv_£c
 + ((èÿ±u»->time¡amp.
	gtv_u£c
) / 1000;

2332 
	gCV_CAP_PROP_BRIGHTNESS
:

2333 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_BRIGHTNESS
;

2335 
	gCV_CAP_PROP_CONTRAST
:

2336 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_CONTRAST
;

2338 
	gCV_CAP_PROP_SATURATION
:

2339 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_SATURATION
;

2341 
	gCV_CAP_PROP_HUE
:

2342 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_HUE
;

2344 
	gCV_CAP_PROP_GAIN
:

2345 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_GAIN
;

2347 
	gCV_CAP_PROP_EXPOSURE
:

2348 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_EXPOSURE
;

2351 
årštf
(
¡d”r
,

2353 
´İ”ty_id
);

2357 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_CTRL
,

2358 &
ÿ±u»
->
cÚŒŞ
)) {

2360 
årštf
Ğ
¡d”r
, "VIDEOIO ERROR: V4L2: ");

2361 
	g´İ”ty_id
) {

2362 
	gCV_CAP_PROP_BRIGHTNESS
:

2363 
årštf
 (
¡d”r
, "Brightness");

2365 
	gCV_CAP_PROP_CONTRAST
:

2366 
årštf
 (
¡d”r
, "Contrast");

2368 
	gCV_CAP_PROP_SATURATION
:

2369 
årštf
 (
¡d”r
, "Saturation");

2371 
	gCV_CAP_PROP_HUE
:

2372 
årštf
 (
¡d”r
, "Hue");

2374 
	gCV_CAP_PROP_GAIN
:

2375 
årštf
 (
¡d”r
, "Gain");

2377 
	gCV_CAP_PROP_EXPOSURE
:

2378 
årštf
 (
¡d”r
, "Exposure");

2381 
årštf
 (
¡d”r
, " is‚ot supported by your device\n");

2387 
	g´İ”ty_id
) {

2389 
	gCV_CAP_PROP_BRIGHTNESS
:

2390 
v4l2_mš
 = 
ÿ±u»
->
v4l2_brighŠess_mš
;

2391 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_brighŠess_max
;

2393 
	gCV_CAP_PROP_CONTRAST
:

2394 
v4l2_mš
 = 
ÿ±u»
->
v4l2_cÚŒa¡_mš
;

2395 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_cÚŒa¡_max
;

2397 
	gCV_CAP_PROP_SATURATION
:

2398 
v4l2_mš
 = 
ÿ±u»
->
v4l2_§tu¿tiÚ_mš
;

2399 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_§tu¿tiÚ_max
;

2401 
	gCV_CAP_PROP_HUE
:

2402 
v4l2_mš
 = 
ÿ±u»
->
v4l2_hue_mš
;

2403 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_hue_max
;

2405 
	gCV_CAP_PROP_GAIN
:

2406 
v4l2_mš
 = 
ÿ±u»
->
v4l2_gaš_mš
;

2407 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_gaš_max
;

2409 
	gCV_CAP_PROP_EXPOSURE
:

2410 
v4l2_mš
 = 
ÿ±u»
->
v4l2_exposu»_mš
;

2411 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_exposu»_max
;

2416  (()
	gÿ±u»
->
	gcÚŒŞ
.
	gv®ue
 - 
	gv4l2_mš
 + 1è/ (
	gv4l2_max
 - v4l2_min);

2420 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

2423 #ifdeà
HAVE_CAMV4L


2426 
	g»tv®
 = -1;

2428 ià(
ioùl
 (
ÿ±u»
->
deviûHªdË
,

2429 
VIDIOCGWIN
, &
ÿ±u»
->
ÿ±u»Wšdow
) < 0) {

2430 
årštf
 (
¡d”r
,

2433 
icvClo£CAM_V4L
(
ÿ±u»
);

2437 
	g´İ”ty_id
) {

2438 
	gCV_CAP_PROP_FRAME_WIDTH
:

2439 
»tv®
 = 
ÿ±u»
->
ÿ±u»Wšdow
.
width
;

2441 
	gCV_CAP_PROP_FRAME_HEIGHT
:

2442 
»tv®
 = 
ÿ±u»
->
ÿ±u»Wšdow
.
height
;

2444 
	gCV_CAP_PROP_BRIGHTNESS
:

2445 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
brighŠess
;

2447 
	gCV_CAP_PROP_CONTRAST
:

2448 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
cÚŒa¡
;

2450 
	gCV_CAP_PROP_SATURATION
:

2451 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
cŞour
;

2453 
	gCV_CAP_PROP_HUE
:

2454 
»tv®
 = 
ÿ±u»
->
imagePrİ”t›s
.
hue
;

2456 
	gCV_CAP_PROP_GAIN
:

2457 
årštf
(
¡d”r
,

2461 
	gCV_CAP_PROP_EXPOSURE
:

2462 
årštf
(
¡d”r
,

2467 
årštf
(
¡d”r
,

2469 
´İ”ty_id
);

2472 ià(
	g»tv®
 == -1) {

2478  (
	g»tv®
) / 0xFFFF;

2485 
icvS‘VideoSize
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
, 
w
, 
h
) {

2487 #ifdeà
HAVE_CAMV4L2


2489 ià(
	gV4L2_SUPPORT
 == 1)

2492 
CLEAR
 (
ÿ±u»
->
üİÿp
);

2493 
	gÿ±u»
->
	güİÿp
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

2495 ià(
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_CROPCAP
, &ÿ±u»->
üİÿp
) < 0) {

2496 
årštf
(
¡d”r
, "VIDEOIO ERROR: V4L/V4L2: VIDIOC_CROPCAP\n");

2499 
CLEAR
 (
ÿ±u»
->
üİ
);

2500 
	gÿ±u»
->
	güİ
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

2501 
	gÿ±u»
->
	güİ
.
	gc
ğ
ÿ±u»
->
üİÿp
.
deäeù
;

2504 ià(
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_CROP
, &ÿ±u»->
üİ
) < 0) {

2505 
årštf
(
¡d”r
, "VIDEOIO ERROR: V4L/V4L2: VIDIOC_S_CROP\n");

2509 
CLEAR
 (
ÿ±u»
->
fÜm
);

2510 
	gÿ±u»
->
	gfÜm
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

2513 
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
);

2516 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gpix
.
	gwidth
 = 
w
;

2517 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gpix
.
	gheight
 = 
h
;

2518 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gwš
.
	gchromakey
 = 0;

2519 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gwš
.
	gf›ld
 = 
V4L2_FIELD_ANY
;

2520 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gwš
.
	gşs
 = 0;

2521 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gwš
.
	gşcouÁ
 = 0;

2522 
	gÿ±u»
->
	gfÜm
.
	gfmt
.
	gpix
.
	gf›ld
 = 
V4L2_FIELD_ANY
;

2528 
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_FMT
, &ÿ±u»->
fÜm
);

2531 
v4l2_¡»am·rm
 
	g£tås
;

2532 
mem£t
 (&
£tås
, 0, (
v4l2_¡»am·rm
));

2533 
	g£tås
.
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

2534 
	g£tås
.
	g·rm
.
	gÿ±u»
.
	gtim•”äame
.
	gnum”©Ü
 = 1;

2535 
	g£tås
.
	g·rm
.
	gÿ±u»
.
	gtim•”äame
.
	gd’omš©Ü
 = 30;

2536 
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_S_PARM
, &
£tås
);

2540 
	gÿ±u»
->
	gFœ¡C­tu»
 = 1;

2543 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
, 
VIDIOC_G_FMT
, &ÿ±u»->
fÜm
))

2545 
årštf
(
¡d”r
, "VIDEOIO ERROR: V4L/V4L2: Could‚ot obtain specifics of capture window.\n\n");

2547 
icvClo£CAM_V4L
(
ÿ±u»
);

2556 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

2559 #ifdeà
HAVE_CAMV4L


2562 ià(
	gÿ±u»
==0)  0;

2563 ià(
	gw
>
	gÿ±u»
->
	gÿ·b™y
.
	gmaxwidth
) {

2564 
	gw
=
ÿ±u»
->
ÿ·b™y
.
maxwidth
;

2566 ià(
	gh
>
	gÿ±u»
->
	gÿ·b™y
.
	gmaxheight
) {

2567 
	gh
=
ÿ±u»
->
ÿ·b™y
.
maxheight
;

2570 
	gÿ±u»
->
	gÿ±u»Wšdow
.
	gwidth
=
w
;

2571 
	gÿ±u»
->
	gÿ±u»Wšdow
.
	gheight
=
h
;

2573 ià(
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSWIN
, &ÿ±u»->
ÿ±u»Wšdow
) < 0) {

2574 
icvClo£CAM_V4L
(
ÿ±u»
);

2578 ià(
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCGWIN
, &ÿ±u»->
ÿ±u»Wšdow
) < 0) {

2579 
icvClo£CAM_V4L
(
ÿ±u»
);

2583 
	gÿ±u»
->
	gFœ¡C­tu»
 = 1;

2592 
icvS‘CÚŒŞ
 (
CvC­tu»CAM_V4L
* 
ÿ±u»
,

2593 
´İ”ty_id
, 
v®ue
) {

2596 ià(
	gv®ue
 < 0.0) {

2597 
	gv®ue
 = 0.0;

2598 } ià(
	gv®ue
 > 1.0) {

2599 
	gv®ue
 = 1.0;

2602 #ifdeà
HAVE_CAMV4L2


2604 ià(
	gV4L2_SUPPORT
 == 1)

2608 
v4l2_mš
 = 0;

2609 
	gv4l2_max
 = 255;

2612 
CLEAR
 (
ÿ±u»
->
cÚŒŞ
);

2615 
	g´İ”ty_id
) {

2617 
	gCV_CAP_PROP_BRIGHTNESS
:

2618 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_BRIGHTNESS
;

2620 
	gCV_CAP_PROP_CONTRAST
:

2621 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_CONTRAST
;

2623 
	gCV_CAP_PROP_SATURATION
:

2624 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_SATURATION
;

2626 
	gCV_CAP_PROP_HUE
:

2627 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_HUE
;

2629 
	gCV_CAP_PROP_GAIN
:

2630 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_GAIN
;

2632 
	gCV_CAP_PROP_EXPOSURE
:

2633 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_EXPOSURE
;

2636 
årštf
(
¡d”r
,

2638 
´İ”ty_id
);

2643 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
,

2644 
VIDIOC_G_CTRL
, &
ÿ±u»
->
cÚŒŞ
)) {

2650 
	g´İ”ty_id
) {

2652 
	gCV_CAP_PROP_BRIGHTNESS
:

2653 
v4l2_mš
 = 
ÿ±u»
->
v4l2_brighŠess_mš
;

2654 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_brighŠess_max
;

2656 
	gCV_CAP_PROP_CONTRAST
:

2657 
v4l2_mš
 = 
ÿ±u»
->
v4l2_cÚŒa¡_mš
;

2658 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_cÚŒa¡_max
;

2660 
	gCV_CAP_PROP_SATURATION
:

2661 
v4l2_mš
 = 
ÿ±u»
->
v4l2_§tu¿tiÚ_mš
;

2662 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_§tu¿tiÚ_max
;

2664 
	gCV_CAP_PROP_HUE
:

2665 
v4l2_mš
 = 
ÿ±u»
->
v4l2_hue_mš
;

2666 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_hue_max
;

2668 
	gCV_CAP_PROP_GAIN
:

2669 
v4l2_mš
 = 
ÿ±u»
->
v4l2_gaš_mš
;

2670 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_gaš_max
;

2672 
	gCV_CAP_PROP_EXPOSURE
:

2673 
v4l2_mš
 = 
ÿ±u»
->
v4l2_exposu»_mš
;

2674 
	gv4l2_max
 = 
ÿ±u»
->
v4l2_exposu»_max
;

2679 
CLEAR
 (
ÿ±u»
->
cÚŒŞ
);

2682 
	g´İ”ty_id
) {

2684 
	gCV_CAP_PROP_BRIGHTNESS
:

2685 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_BRIGHTNESS
;

2687 
	gCV_CAP_PROP_CONTRAST
:

2688 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_CONTRAST
;

2690 
	gCV_CAP_PROP_SATURATION
:

2691 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_SATURATION
;

2693 
	gCV_CAP_PROP_HUE
:

2694 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_HUE
;

2696 
	gCV_CAP_PROP_GAIN
:

2697 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_GAIN
;

2699 
	gCV_CAP_PROP_EXPOSURE
:

2700 
ÿ±u»
->
cÚŒŞ
.
id
 = 
V4L2_CID_EXPOSURE
;

2703 
årštf
(
¡d”r
,

2705 
´İ”ty_id
);

2710 
	gÿ±u»
->
	gcÚŒŞ
.
	gv®ue
 = ()(
v®ue
 * (
v4l2_max
 - 
v4l2_mš
) + v4l2_min);

2713 ià(-1 =ğ
ioùl
 (
ÿ±u»
->
deviûHªdË
,

2714 
VIDIOC_S_CTRL
, &
ÿ±u»
->
cÚŒŞ
è&& 
	g”ºo
 !ğ
ERANGE
) {

2715 
³¼Ü
 ("VIDIOC_S_CTRL");

2720 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

2723 #ifdeà
HAVE_CAMV4L


2726 
	gv4l_v®ue
;

2729 
	gv4l_v®ue
 = ()(0xFFFF * 
v®ue
);

2731 
	g´İ”ty_id
) {

2732 
	gCV_CAP_PROP_BRIGHTNESS
:

2733 
ÿ±u»
->
imagePrİ”t›s
.
brighŠess
 = 
v4l_v®ue
;

2735 
	gCV_CAP_PROP_CONTRAST
:

2736 
ÿ±u»
->
imagePrİ”t›s
.
cÚŒa¡
 = 
v4l_v®ue
;

2738 
	gCV_CAP_PROP_SATURATION
:

2739 
ÿ±u»
->
imagePrİ”t›s
.
cŞour
 = 
v4l_v®ue
;

2741 
	gCV_CAP_PROP_HUE
:

2742 
ÿ±u»
->
imagePrİ”t›s
.
hue
 = 
v4l_v®ue
;

2744 
	gCV_CAP_PROP_GAIN
:

2745 
årštf
(
¡d”r
,

2748 
	gCV_CAP_PROP_EXPOSURE
:

2749 
årštf
(
¡d”r
,

2753 
årštf
(
¡d”r
,

2755 
´İ”ty_id
);

2759 ià(
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOCSPICT
, &ÿ±u»->
imagePrİ”t›s
)

2762 
årštf
(
¡d”r
,

2764 
icvClo£CAM_V4L
(
ÿ±u»
);

2775 
icvS‘Prİ”tyCAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
,

2776 
´İ”ty_id
, 
v®ue
 ){

2777 
	gwidth
 = 0, 
	gheight
 = 0;

2778 
	g»tv®
;

2781 
	g»tv®
 = 0;

2787 
	g´İ”ty_id
) {

2788 
	gCV_CAP_PROP_FRAME_WIDTH
:

2789 
width
 = 
cvRound
(
v®ue
);

2790 if(
	gwidth
 !=0 && 
height
 != 0) {

2791 
»tv®
 = 
icvS‘VideoSize
Ğ
ÿ±u»
, 
width
, 
height
);

2792 
	gwidth
 = 
height
 = 0;

2795 
	gCV_CAP_PROP_FRAME_HEIGHT
:

2796 
height
 = 
cvRound
(
v®ue
);

2797 if(
	gwidth
 !=0 && 
height
 != 0) {

2798 
»tv®
 = 
icvS‘VideoSize
Ğ
ÿ±u»
, 
width
, 
height
);

2799 
	gwidth
 = 
height
 = 0;

2802 
	gCV_CAP_PROP_BRIGHTNESS
:

2803 
CV_CAP_PROP_CONTRAST
:

2804 
CV_CAP_PROP_SATURATION
:

2805 
CV_CAP_PROP_HUE
:

2806 
CV_CAP_PROP_GAIN
:

2807 
CV_CAP_PROP_EXPOSURE
:

2808 
»tv®
 = 
icvS‘CÚŒŞ
(
ÿ±u»
, 
´İ”ty_id
, 
v®ue
);

2811 
årštf
(
¡d”r
,

2813 
´İ”ty_id
);

2817  
	g»tv®
;

2820 
icvClo£CAM_V4L
Ğ
CvC­tu»CAM_V4L
* 
ÿ±u»
 ){

2823 ià(
	gÿ±u»
)

2826 #ifdeà
HAVE_CAMV4L2


2827 ià(
	gV4L2_SUPPORT
 == 0)

2829 #ifdeà
HAVE_CAMV4L


2832 ià(
ÿ±u»
->
mm­s
)

2833 
ä“
(
ÿ±u»
->
mm­s
);

2834 ià(
	gÿ±u»
->
	gmemÜyM­
)

2835 
munm­
(
ÿ±u»
->
memÜyM­
, c­tu»->
memÜyBufãr
.
size
);

2839 #ià
defšed
(
HAVE_CAMV4L
è&& defšed(
HAVE_CAMV4L2
)

2842 #ifdeà
HAVE_CAMV4L2


2844 
	gÿ±u»
->
	gty³
 = 
V4L2_BUF_TYPE_VIDEO_CAPTURE
;

2845 ià(-1 =ğ
ioùl
(
ÿ±u»
->
deviûHªdË
, 
VIDIOC_STREAMOFF
, &ÿ±u»->
ty³
)) {

2846 
³¼Ü
 ("Unableo stophe stream.");

2849 
	gn_bufãrs_
 = 0;‚_bufãrs_ < 
	gÿ±u»
->
	g»q
.
	gcouÁ
; ++n_buffers_)

2851 ià(-1 =ğ
munm­
 (
ÿ±u»
->
bufãrs
[
n_bufãrs_
].
¡¬t
, c­tu»->bufãrs[n_bufãrs_].
Ëngth
)) {

2852 
³¼Ü
 ("munmap");

2856 ià(
	gÿ±u»
->
	gbufãrs
[
MAX_V4L_BUFFERS
].
	g¡¬t
)

2858 
ä“
(
ÿ±u»
->
bufãrs
[
MAX_V4L_BUFFERS
].
¡¬t
);

2859 
	gÿ±u»
->
	gbufãrs
[
MAX_V4L_BUFFERS
].
	g¡¬t
 = 0;

2864 ià(
	gÿ±u»
->
	gdeviûHªdË
 != -1)

2865 
şo£
(
ÿ±u»
->
deviûHªdË
);

2867 ià(
	gÿ±u»
->
	gäame
.
	gimageD©a
è
cvF»e
(&
ÿ±u»
->
äame
.
imageD©a
);

2873 şas 
	cCvC­tu»CAM_V4L_CPP
 : 
CvC­tu»


2875 
public
:

2876 
CvC­tu»CAM_V4L_CPP
(è{ 
ÿ±u»V4L
 = 0; }

2877 
	gvœtu®
 ~
CvC­tu»CAM_V4L_CPP
(è{ 
şo£
(); }

2879 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

2880 
vœtu®
 
şo£
();

2882 
vœtu®
 
g‘Prİ”ty
() const;

2883 
vœtu®
 
boŞ
 
£tPrİ”ty
(, );

2884 
vœtu®
 
boŞ
 
g¿bF¿me
();

2885 
vœtu®
 
I¶Image
* 
»Œ›veF¿me
();

2886 
	g´Ùeùed
:

2888 
CvC­tu»CAM_V4L
* 
ÿ±u»V4L
;

2891 
boŞ
 
	gCvC­tu»CAM_V4L_CPP
::
	$İ’
Ğ
šdex
 )

2893 
	`şo£
();

2894 
ÿ±u»V4L
 = 
	`icvC­tu»FromCAM_V4L
(
šdex
);

2895  
ÿ±u»V4L
 != 0;

2896 
	}
}

2898 
	gCvC­tu»CAM_V4L_CPP
::
	$şo£
()

2900 ifĞ
ÿ±u»V4L
 )

2902 
	`icvClo£CAM_V4L
Ğ
ÿ±u»V4L
 );

2903 
	`cvF»e
Ğ&
ÿ±u»V4L
 );

2905 
	}
}

2907 
boŞ
 
	gCvC­tu»CAM_V4L_CPP
::
	$g¿bF¿me
()

2909  
ÿ±u»V4L
 ? 
	`icvG¿bF¿meCAM_V4L
Ğÿ±u»V4L ) !ğ0 : 
çl£
;

2910 
	}
}

2912 
I¶Image
* 
	gCvC­tu»CAM_V4L_CPP
::
	$»Œ›veF¿me
()

2914  
ÿ±u»V4L
 ? 
	`icvR‘r›veF¿meCAM_V4L
( captureV4L, 0 ) : 0;

2915 
	}
}

2917 
	gCvC­tu»CAM_V4L_CPP
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

2919  
ÿ±u»V4L
 ? 
	`icvG‘Prİ”tyCAM_V4L
Ğÿ±u»V4L, 
´İId
 ) : 0.0;

2920 
	}
}

2922 
boŞ
 
	gCvC­tu»CAM_V4L_CPP
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

2924  
ÿ±u»V4L
 ? 
	`icvS‘Prİ”tyCAM_V4L
Ğÿ±u»V4L, 
´İId
, 
v®ue
 ) !ğ0 : 
çl£
;

2925 
	}
}

2927 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_V4L
Ğ
šdex
 )

2929 
CvC­tu»CAM_V4L_CPP
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_V4L_CPP;

2931 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

2932  (
CvC­tu»
*)
ÿ±u»
;

2934 
d–‘e
 
ÿ±u»
;

2936 
	}
}

	@cap_vfw.cpp

42 
	~"´ecomp.hµ
"

44 
	~<vfw.h
>

46 #ifdeà
__GNUC__


47 
	#WM_CAP_FIRSTA
 (
WM_USER
)

	)

48 
	#ÿpS’dMes§ge
(
hwnd
,
m
,
w
,
l
è(
	`IsWšdow
(hwnd)?
	`S’dMes§ge
(hwnd,m,w,l):0)

	)

51 #ià
defšed
 
_M_X64
 && defšed 
_MSC_VER


52 #´agm¨
İtimize
("",
off
)

53 #´agm¨
w¬nšg
(
di§bË
: 4748)

58 
BITMAPINFOHEADER
 
	$icvB™m­H—d”
Ğ
width
, 
height
, 
bµ
, 
com´essiÚ
 = 
BI_RGB
 )

60 
BITMAPINFOHEADER
 
bmih
;

61 
	`mem£t
Ğ&
bmih
, 0, (bmih));

62 
bmih
.
biSize
 = (bmih);

63 
bmih
.
biWidth
 = 
width
;

64 
bmih
.
biHeight
 = 
height
;

65 
bmih
.
biB™CouÁ
 = (
WORD
)
bµ
;

66 
bmih
.
biCom´essiÚ
 = 
com´essiÚ
;

67 
bmih
.
biPÏÃs
 = 1;

69  
bmih
;

70 
	}
}

73 
	$icvIn™C­tu»_VFW
()

75 
isIn™Ÿlized
 = 0;

76 ifĞ!
isIn™Ÿlized
 )

78 
	`AVIFeIn™
();

79 
isIn™Ÿlized
 = 1;

81 
	}
}

84 şas 
	cCvC­tu»AVI_VFW
 : 
public
 
CvC­tu»


86 
public
:

87 
	$CvC­tu»AVI_VFW
()

89 
	`CoIn™Ÿlize
(
NULL
);

90 
	`š™
();

93 
vœtu®
 ~
	$CvC­tu»AVI_VFW
()

95 
	`şo£
();

96 
	`CoUnš™Ÿlize
();

97 
	}
}

99 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
 );

100 
vœtu®
 
şo£
();

102 
vœtu®
 
	$g‘Prİ”ty
() const;

103 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

104 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

105 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

106 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_VFW
; 
	}
}

108 
	g´Ùeùed
:

109 
š™
();

111 
PAVIFILE
 
	gavife
;

112 
PAVISTREAM
 
	gavi¡»am
;

113 
PGETFRAME
 
	gg‘äame
;

114 
AVISTREAMINFO
 
	gavišfo
;

115 
BITMAPINFOHEADER
 * 
	gbmih
;

116 
CvSliû
 
	gfm_¿nge
;

117 
	gås
;

118 
	gpos
;

119 
I¶Image
* 
	gäame
;

120 
CvSize
 
	gsize
;

124 
	gCvC­tu»AVI_VFW
::
	$š™
()

126 
avife
 = 0;

127 
avi¡»am
 = 0;

128 
g‘äame
 = 0;

129 
	`mem£t
Ğ&
avišfo
, 0, (aviinfo) );

130 
bmih
 = 0;

131 
fm_¿nge
 = 
	`cvSliû
(0,0);

132 
ås
 = 0;

133 
pos
 = 0;

134 
äame
 = 0;

135 
size
 = 
	`cvSize
(0,0);

136 
	}
}

139 
	gCvC­tu»AVI_VFW
::
	$şo£
()

141 ifĞ
g‘äame
 )

142 
	`AVISŒ—mG‘F¿meClo£
Ğ
g‘äame
 );

144 ifĞ
avi¡»am
 )

145 
	`AVISŒ—mR–—£
Ğ
avi¡»am
 );

147 ifĞ
avife
 )

148 
	`AVIFeR–—£
Ğ
avife
 );

150 ià(
äame
)

151 
	`cvR–—£Image
Ğ&
äame
 );

153 
	`š™
();

154 
	}
}

157 
boŞ
 
	gCvC­tu»AVI_VFW
::
	$İ’
ĞcÚ¡ * 
f’ame
 )

159 
	`şo£
();

160 
	`icvIn™C­tu»_VFW
();

162 ifĞ!
f’ame
 )

163  
çl£
;

165 
HRESULT
 
hr
 = 
	`AVIFeO³n
Ğ&
avife
, 
f’ame
, 
OF_READ
, 
NULL
 );

166 ifĞ
	`SUCCEEDED
(
hr
))

168 
hr
 = 
	`AVIFeG‘SŒ—m
Ğ
avife
, &
avi¡»am
, 
¡»amty³VIDEO
, 0 );

169 ifĞ
	`SUCCEEDED
(
hr
))

171 
hr
 = 
	`AVISŒ—mInfo
Ğ
avi¡»am
, &
avišfo
, (aviinfo));

172 ifĞ
	`SUCCEEDED
(
hr
))

174 
size
.
width
 = 
avišfo
.
rcF¿me
.
right
 -‡višfo.rcF¿me.
Ëá
;

175 
size
.
height
 = 
avišfo
.
rcF¿me
.
bÙtom
 -‡višfo.rcF¿me.
tİ
;

176 
BITMAPINFOHEADER
 
bmihdr
 = 
	`icvB™m­H—d”
Ğ
size
.
width
, size.
height
, 24 );

178 
fm_¿nge
.
¡¬t_šdex
 = ()
avišfo
.
dwS¹
;

179 
fm_¿nge
.
’d_šdex
 = fm_¿nge.
¡¬t_šdex
 + ()
avišfo
.
dwL’gth
;

180 
ås
 = ()
avišfo
.
dwR©e
/avišfo.
dwSÿË
;

181 
pos
 = 
fm_¿nge
.
¡¬t_šdex
;

182 
g‘äame
 = 
	`AVISŒ—mG‘F¿meO³n
Ğ
avi¡»am
, &
bmihdr
 );

183 ifĞ
g‘äame
 != 0 )

184  
Œue
;

187 
bmihdr
 = 
	`icvB™m­H—d”
Ğ
size
.
width
, size.
height
, 8);

188 
g‘äame
 = 
	`AVISŒ—mG‘F¿meO³n
Ğ
avi¡»am
, &
bmihdr
 );

189 ifĞ
g‘äame
 != 0 )

190  
Œue
;

195 
	`şo£
();

196  
çl£
;

197 
	}
}

199 
boŞ
 
	gCvC­tu»AVI_VFW
::
	$g¿bF¿me
()

201 ifĞ
avi¡»am
 )

202 
bmih
 = (
BITMAPINFOHEADER
*)
	`AVISŒ—mG‘F¿me
Ğ
g‘äame
, 
pos
++ );

203  
bmih
 != 0;

204 
	}
}

206 
I¶Image
* 
	gCvC­tu»AVI_VFW
::
	$»Œ›veF¿me
()

208 ifĞ
avi¡»am
 && 
bmih
 )

210 
boŞ
 
isCŞÜ
 = 
bmih
->
biB™CouÁ
 == 24;

211 
nChªÃls
 = (
isCŞÜ
) ? 3 : 1;

212 
I¶Image
 
¤c
;

213 
	`cvIn™ImageH—d”
Ğ&
¤c
, 
	`cvSize
Ğ
bmih
->
biWidth
, bmih->
biHeight
 ),

214 
IPL_DEPTH_8U
, 
nChªÃls
, 
IPL_ORIGIN_BL
, 4 );

216 * 
d©aPŒ
 = (*)(
bmih
 + 1);

219 ià(!
isCŞÜ
)

221 
RGBQUAD_SIZE_PER_BYTE
 = (
RGBQUAD
)/(
BYTE
);

222 
off£tFromCŞÜm­ToD©a
 = ()
bmih
->
biCÌU£d
*
RGBQUAD_SIZE_PER_BYTE
;

223 
d©aPŒ
 +ğ
off£tFromCŞÜm­ToD©a
;

226 
	`cvS‘D©a
Ğ&
¤c
, 
d©aPŒ
, src.
widthS‹p
 );

228 ifĞ!
äame
 || f¿me->
width
 !ğ
¤c
.width || f¿me->
height
 != src.height )

230 
	`cvR–—£Image
Ğ&
äame
 );

231 
äame
 = 
	`cvC»©eImage
Ğ
	`cvG‘Size
(&
¤c
), 8, 
nChªÃls
 );

234 
	`cvFl
Ğ&
¤c
, 
äame
, 0 );

235  
äame
;

239 
	}
}

241 
	gCvC­tu»AVI_VFW
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

243  
´İ”ty_id
 )

245 
CV_CAP_PROP_POS_MSEC
:

246  
	`cvRound
(
pos
*1000./
ås
);

247 
CV_CAP_PROP_POS_FRAMES
:

248  
pos
;

249 
CV_CAP_PROP_POS_AVI_RATIO
:

250  (
pos
 - 
fm_¿nge
.
¡¬t_šdex
)/

251 (
fm_¿nge
.
’d_šdex
 - fm_¿nge.
¡¬t_šdex
 + 1e-10);

252 
CV_CAP_PROP_FRAME_WIDTH
:

253  
size
.
width
;

254 
CV_CAP_PROP_FRAME_HEIGHT
:

255  
size
.
height
;

256 
CV_CAP_PROP_FPS
:

257  
ås
;

258 
CV_CAP_PROP_FOURCC
:

259  
avišfo
.
fccHªdËr
;

260 
CV_CAP_PROP_FRAME_COUNT
:

261  
fm_¿nge
.
’d_šdex
 - fm_¿nge.
¡¬t_šdex
;

264 
	}
}

266 
boŞ
 
	gCvC­tu»AVI_VFW
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

268  
´İ”ty_id
 )

270 
CV_CAP_PROP_POS_MSEC
:

271 
CV_CAP_PROP_POS_FRAMES
:

272 
CV_CAP_PROP_POS_AVI_RATIO
:

274  
´İ”ty_id
 )

276 
CV_CAP_PROP_POS_MSEC
:

277 
pos
 = 
	`cvRound
(
v®ue
*
ås
*0.001);

279 
CV_CAP_PROP_POS_AVI_RATIO
:

280 
pos
 = 
	`cvRound
(
v®ue
*(
fm_¿nge
.
’d_šdex
 -

281 
fm_¿nge
.
¡¬t_šdex
) +

282 
fm_¿nge
.
¡¬t_šdex
);

285 
pos
 = 
	`cvRound
(
v®ue
);

287 ifĞ
pos
 < 
fm_¿nge
.
¡¬t_šdex
 )

288 
pos
 = 
fm_¿nge
.
¡¬t_šdex
;

289 ifĞ
pos
 > 
fm_¿nge
.
’d_šdex
 )

290 
pos
 = 
fm_¿nge
.
’d_šdex
;

294  
çl£
;

297  
Œue
;

298 
	}
}

300 
CvC­tu»
* 
	$cvC»©eFeC­tu»_VFW
 (cÚ¡ * 
f’ame
)

302 
CvC­tu»AVI_VFW
* 
ÿ±u»
 = 
Ãw
 CvCaptureAVI_VFW;

303 ifĞ
ÿ±u»
->
	`İ’
(
f’ame
) )

304  
ÿ±u»
;

305 
d–‘e
 
ÿ±u»
;

307 
	}
}

312 şas 
	cCvC­tu»CAM_VFW
 : 
public
 
CvC­tu»


314 
public
:

315 
	$CvC­tu»CAM_VFW
(è{ 
	`š™
(); }

316 
vœtu®
 ~
	$CvC­tu»CAM_VFW
(è{ 
	`şo£
(); 
	}
}

318 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

319 
vœtu®
 
şo£
();

320 
vœtu®
 
	$g‘Prİ”ty
() const;

321 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

322 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

323 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

324 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_VFW
; 
	}
}

326 
	g´Ùeùed
:

327 
š™
();

328 
şo£HIC
();

329 
LRESULT
 
PASCAL
 
äameC®lback
Ğ
HWND
 
hWnd
, 
VIDEOHDR
* 
hdr
 );

331 
CAPDRIVERCAPS
 
	gÿps
;

332 
HWND
 
	gÿpWnd
;

333 
VIDEOHDR
* 
	ghdr
;

334 
DWORD
 
	gfourcc
;

335 
	gwidth
, 
	gheight
;

336 
	gwidthS‘
, 
	gheightS‘
;

337 
HIC
 
	ghic
;

338 
I¶Image
* 
	gäame
;

342 
	gCvC­tu»CAM_VFW
::
	$š™
()

344 
	`mem£t
Ğ&
ÿps
, 0, (caps) );

345 
ÿpWnd
 = 0;

346 
hdr
 = 0;

347 
fourcc
 = 0;

348 
hic
 = 0;

349 
äame
 = 0;

350 
width
 = 
height
 = -1;

351 
widthS‘
 = 
heightS‘
 = 0;

352 
	}
}

354 
	gCvC­tu»CAM_VFW
::
	$şo£HIC
()

356 ifĞ
hic
 )

358 
	`ICDecom´essEnd
Ğ
hic
 );

359 
	`ICClo£
Ğ
hic
 );

360 
hic
 = 0;

362 
	}
}

365 
LRESULT
 
PASCAL
 
	gCvC­tu»CAM_VFW
::
	$äameC®lback
Ğ
HWND
 
hWnd
, 
VIDEOHDR
* 
hdr
 )

367 
CvC­tu»CAM_VFW
* 
ÿ±u»
 = 0;

369 ià(!
hWnd
è 
FALSE
;

371 
ÿ±u»
 = (
CvC­tu»CAM_VFW
*)
	`ÿpG‘U£rD©a
(
hWnd
);

372 
ÿ±u»
->
hdr
 = hdr;

374  (
LRESULT
)
TRUE
;

375 
	}
}

379 
boŞ
 
	gCvC­tu»CAM_VFW
::
	$İ’
Ğ
wIndex
 )

381 
szDeviûName
[80];

382 
szDeviûV”siÚ
[80];

383 
HWND
 
hWndC
 = 0;

385 
	`şo£
();

387 ifĞ()
wIndex
 >= 10 )

388 
wIndex
 = 0;

390  ; 
wIndex
 < 10; wIndex++ )

392 ifĞ
	`ÿpG‘Driv”DesütiÚ
Ğ
wIndex
, 
szDeviûName
,

393  (
szDeviûName
), 
szDeviûV”siÚ
,

394  (
szDeviûV”siÚ
)))

396 
hWndC
 = 
	`ÿpC»©eC­tu»Wšdow
 ( "My Own Capture Window",

397 
WS_POPUP
 | 
WS_CHILD
, 0, 0, 320, 240, 0, 0);

398 ifĞ
	`ÿpDriv”CÚÃù
 (
hWndC
, 
wIndex
))

400 
	`De¡royWšdow
Ğ
hWndC
 );

401 
hWndC
 = 0;

405 ifĞ
hWndC
 )

407 
ÿpWnd
 = 
hWndC
;

408 
hdr
 = 0;

409 
hic
 = 0;

410 
fourcc
 = (
DWORD
)-1;

412 
	`mem£t
Ğ&
ÿps
, 0, (caps));

413 
	`ÿpDriv”G‘C­s
Ğ
hWndC
, &
ÿps
, (caps));

414 
CAPSTATUS
 
¡©us
 = {};

415 
	`ÿpG‘Stus
(
hWndC
, &
¡©us
, (status));

416 ::
	`S‘WšdowPos
(
hWndC
, 
NULL
, 0, 0, 
¡©us
.
uiImageWidth
, stus.
uiImageHeight
, 
SWP_NOZORDER
|
SWP_NOMOVE
);

417 
	`ÿpS‘U£rD©a
Ğ
hWndC
, (
size_t
)
this
 );

418 
	`ÿpS‘C®lbackOnF¿me
Ğ
hWndC
, 
äameC®lback
 );

419 
CAPTUREPARMS
 
p
;

420 
	`ÿpC­tu»G‘S‘up
(
hWndC
,&
p
,(
CAPTUREPARMS
));

421 
p
.
dwReque¡MiüoSecP”F¿me
 = 66667/2;

422 
	`ÿpC­tu»S‘S‘up
(
hWndC
,&
p
,(
CAPTUREPARMS
));

424 
	`ÿpP»v›wSÿË
(
hWndC
,
FALSE
);

425 
	`ÿpP»v›wR©e
(
hWndC
,1);

428 cÚ¡ 
DWORD
 
size
 = 
	`ÿpG‘VideoFÜm©Size
(
ÿpWnd
);

429 ifĞ
size
 > 0 )

431 *
pbi
 = 
Ãw
 [
size
];

432 ifĞ
pbi
 )

434 ifĞ
	`ÿpG‘VideoFÜm©
(
ÿpWnd
, 
pbi
, 
size
) == size )

436 
BITMAPINFOHEADER
& 
vfmt
 = ((
BITMAPINFO
*)
pbi
)->
bmiH—d”
;

437 
widthS‘
 = 
vfmt
.
biWidth
;

438 
heightS‘
 = 
vfmt
.
biHeight
;

439 
fourcc
 = 
vfmt
.
biCom´essiÚ
;

441 
d–‘e
 []
pbi
;

445 ifĞ
widthS‘
 =ğ0 || 
heightS‘
 == 0 )

447 
widthS‘
 = 
¡©us
.
uiImageWidth
;

448 
heightS‘
 = 
¡©us
.
uiImageHeight
;

452  
ÿpWnd
 != 0;

453 
	}
}

456 
	gCvC­tu»CAM_VFW
::
	$şo£
()

458 ifĞ
ÿpWnd
 )

460 
	`ÿpS‘C®lbackOnF¿me
Ğ
ÿpWnd
, 
NULL
 );

461 
	`ÿpDriv”DiscÚÃù
Ğ
ÿpWnd
 );

462 
	`De¡royWšdow
Ğ
ÿpWnd
 );

463 
	`şo£HIC
();

465 
	`cvR–—£Image
Ğ&
äame
 );

466 
	`š™
();

467 
	}
}

470 
boŞ
 
	gCvC­tu»CAM_VFW
::
	$g¿bF¿me
()

472 ifĞ
ÿpWnd
 )

473  
	`ÿpG¿bF¿meNoStİ
(
ÿpWnd
è=ğ
TRUE
;

475  
çl£
;

476 
	}
}

479 
I¶Image
* 
	gCvC­tu»CAM_VFW
::
	$»Œ›veF¿me
()

481 
BITMAPINFO
 
vfmt
;

482 
	`mem£t
Ğ&
vfmt
, 0, (vfmt));

483 
BITMAPINFOHEADER
& 
vfmt0
 = 
vfmt
.
bmiH—d”
;

485 ifĞ!
ÿpWnd
 )

488 cÚ¡ 
DWORD
 
sz
 = 
	`ÿpG‘VideoFÜm©
Ğ
ÿpWnd
, &
vfmt
, (vfmt));

489 cÚ¡ 
´evWidth
 = 
äame
 ? f¿me->
width
 : 0;

490 cÚ¡ 
´evHeight
 = 
äame
 ? f¿me->
height
 : 0;

492 ifĞ!
hdr
 || hdr->
ÍD©a
 =ğ0 || 
sz
 == 0 )

495 ifĞ!
äame
 || f¿me->
width
 !ğ
vfmt0
.
biWidth
 || f¿me->
height
 !ğvfmt0.
biHeight
 )

497 
	`cvR–—£Image
Ğ&
äame
 );

498 
äame
 = 
	`cvC»©eImage
Ğ
	`cvSize
Ğ
vfmt0
.
biWidth
, vfmt0.
biHeight
 ), 8, 3 );

501 ifĞ
vfmt0
.
biCom´essiÚ
 !ğ
BI_RGB
 ||

502 
vfmt0
.
biB™CouÁ
 != 24 )

504 
BITMAPINFOHEADER
 
vfmt1
 = 
	`icvB™m­H—d”
Ğ
vfmt0
.
biWidth
, vfmt0.
biHeight
, 24 );

506 ifĞ
hic
 =ğ0 || 
fourcc
 !ğ
vfmt0
.
biCom´essiÚ
 ||

507 
´evWidth
 !ğ
vfmt0
.
biWidth
 || 
´evHeight
 !ğvfmt0.
biHeight
 )

509 
	`şo£HIC
();

510 
hic
 = 
	`ICO³n
Ğ
	`MAKEFOURCC
('V','I','D','C'),

511 
vfmt0
.
biCom´essiÚ
, 
ICMODE_DECOMPRESS
 );

512 ifĞ
hic
 )

514 ifĞ
	`ICDecom´essBegš
Ğ
hic
, &
vfmt0
, &
vfmt1
 ) !ğ
ICERR_OK
 )

516 
	`şo£HIC
();

522 ifĞ!
hic
 || 
	`ICDecom´ess
Ğhic, 0, &
vfmt0
, 
hdr
->
ÍD©a
,

523 &
vfmt1
, 
äame
->
imageD©a
 ) !ğ
ICERR_OK
 )

525 
	`şo£HIC
();

529 
	`cvFl
Ğ
äame
, frame, 0 );

533 
I¶Image
 
¤c
;

534 
	`cvIn™ImageH—d”
Ğ&
¤c
, 
	`cvSize
(
vfmt0
.
biWidth
, vfmt0.
biHeight
),

535 
IPL_DEPTH_8U
, 3, 
IPL_ORIGIN_BL
, 4 );

536 
	`cvS‘D©a
Ğ&
¤c
, 
hdr
->
ÍD©a
, src.
widthS‹p
 );

537 
	`cvFl
Ğ&
¤c
, 
äame
, 0 );

540  
äame
;

541 
	}
}

544 
	gCvC­tu»CAM_VFW
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

546  
´İ”ty_id
 )

548 
CV_CAP_PROP_FRAME_WIDTH
:

549  
widthS‘
;

550 
CV_CAP_PROP_FRAME_HEIGHT
:

551  
heightS‘
;

552 
CV_CAP_PROP_FOURCC
:

553  
fourcc
;

554 
CV_CAP_PROP_FPS
:

556 
CAPTUREPARMS
 
·¿ms
 = {};

557 ifĞ
	`ÿpC­tu»G‘S‘up
(
ÿpWnd
, &
·¿ms
, (params)) )

558  1e6 / 
·¿ms
.
dwReque¡MiüoSecP”F¿me
;

565 
	}
}

567 
boŞ
 
	gCvC­tu»CAM_VFW
::
	$£tPrİ”ty
(
´İ”ty_id
, 
v®ue
)

569 
boŞ
 
hªdËdSize
 = 
çl£
;

571  
´İ”ty_id
 )

573 
CV_CAP_PROP_FRAME_WIDTH
:

574 
width
 = 
	`cvRound
(
v®ue
);

575 
hªdËdSize
 = 
Œue
;

577 
CV_CAP_PROP_FRAME_HEIGHT
:

578 
height
 = 
	`cvRound
(
v®ue
);

579 
hªdËdSize
 = 
Œue
;

581 
CV_CAP_PROP_FOURCC
:

583 
CV_CAP_PROP_FPS
:

584 ifĞ
v®ue
 > 0 )

586 
CAPTUREPARMS
 
·¿ms
;

587 ifĞ
	`ÿpC­tu»G‘S‘up
(
ÿpWnd
, &
·¿ms
, (params)) )

589 
·¿ms
.
dwReque¡MiüoSecP”F¿me
 = 
	`cvRound
(1e6/
v®ue
);

590  
	`ÿpC­tu»S‘S‘up
(
ÿpWnd
, &
·¿ms
, Õ¬ams)è=ğ
TRUE
;

598 iàĞ
hªdËdSize
 )

601 ifĞ
width
 > 0 && 
height
 > 0 )

603 cÚ¡ 
DWORD
 
size
 = 
	`ÿpG‘VideoFÜm©Size
(
ÿpWnd
);

604 ifĞ
size
 == 0 )

605  
çl£
;

607 *
pbi
 = 
Ãw
 [
size
];

608 ifĞ!
pbi
 )

609  
çl£
;

611 ifĞ
	`ÿpG‘VideoFÜm©
(
ÿpWnd
, 
pbi
, 
size
) != size )

613 
d–‘e
 []
pbi
;

614  
çl£
;

617 
BITMAPINFOHEADER
& 
vfmt
 = ((
BITMAPINFO
*)
pbi
)->
bmiH—d”
;

618 
boŞ
 
sucûss
 = 
Œue
;

619 ifĞ
width
 !ğ
vfmt
.
biWidth
 || 
height
 !ğvfmt.
biHeight
 )

622 
vfmt
.
biWidth
 = 
width
;

623 
vfmt
.
biHeight
 = 
height
;

624 
vfmt
.
biSizeImage
 = 
height
 * ((
width
 * vfmt.
biB™CouÁ
 + 31) / 32) * 4;

625 
vfmt
.
biCom´essiÚ
 = 
BI_RGB
;

626 
sucûss
 = 
	`ÿpS‘VideoFÜm©
(
ÿpWnd
, 
pbi
, 
size
è=ğ
TRUE
;

628 ifĞ
sucûss
 )

631 
CAPSTATUS
 
¡©us
 = {};

632 
	`ÿpG‘Stus
(
ÿpWnd
, &
¡©us
, (status));

633 ::
	`S‘WšdowPos
(
ÿpWnd
, 
NULL
, 0, 0, 
¡©us
.
uiImageWidth
, stus.
uiImageHeight
, 
SWP_NOZORDER
|
SWP_NOMOVE
);

635 
widthS‘
 = 
width
;

636 
heightS‘
 = 
height
;

638 
d–‘e
 []
pbi
;

639 
width
 = 
height
 = -1;

641  
sucûss
;

644  
Œue
;

647  
çl£
;

648 
	}
}

650 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_VFW
Ğ
šdex
 )

652 
CvC­tu»CAM_VFW
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_VFW;

654 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

655  
ÿ±u»
;

657 
d–‘e
 
ÿ±u»
;

659 
	}
}

664 şas 
	cCvVideoWr™”_VFW
 : 
public
 
CvVideoWr™”


666 
public
:

667 
	$CvVideoWr™”_VFW
(è{ 
	`š™
(); }

668 
vœtu®
 ~
	$CvVideoWr™”_VFW
(è{ 
	`şo£
(); 
	}
}

670 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
, 
fourcc
,

671 
ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 );

672 
vœtu®
 
şo£
();

673 
vœtu®
 
boŞ
 
wr™eF¿me
ĞcÚ¡ 
I¶Image
* );

675 
	g´Ùeùed
:

676 
š™
();

677 
boŞ
 
ü—‹SŒ—ms
Ğ
CvSize
 
äameSize
, boŞ 
isCŞÜ
 );

679 
PAVIFILE
 
	gavife
;

680 
PAVISTREAM
 
	gcom´es£d
;

681 
PAVISTREAM
 
	guncom´es£d
;

682 
	gås
;

683 
I¶Image
* 
	g‹mpF¿me
;

684 
	gpos
;

685 
	gfourcc
;

689 
	gCvVideoWr™”_VFW
::
	$š™
()

691 
avife
 = 0;

692 
com´es£d
 = 
uncom´es£d
 = 0;

693 
ås
 = 0;

694 
‹mpF¿me
 = 0;

695 
pos
 = 0;

696 
fourcc
 = 0;

697 
	}
}

699 
	gCvVideoWr™”_VFW
::
	$şo£
()

701 ifĞ
uncom´es£d
 )

702 
	`AVISŒ—mR–—£
Ğ
uncom´es£d
 );

703 ifĞ
com´es£d
 )

704 
	`AVISŒ—mR–—£
Ğ
com´es£d
 );

705 ifĞ
avife
 )

706 
	`AVIFeR–—£
Ğ
avife
 );

707 
	`cvR–—£Image
Ğ&
‹mpF¿me
 );

708 
	`š™
();

709 
	}
}

713 
	sBITMAPINFO_8B™


715 
BITMAPINFOHEADER
 
	mbmiH—d”
;

716 
RGBQUAD
 
	mbmiCŞÜs
[256];

720 
boŞ
 
	gCvVideoWr™”_VFW
::
	$İ’
ĞcÚ¡ * 
f’ame
, 
_fourcc
, 
_ås
, 
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 )

722 
	`şo£
();

724 
	`icvIn™C­tu»_VFW
();

725 ifĞ
	`AVIFeO³n
Ğ&
avife
, 
f’ame
, 
OF_CREATE
 | 
OF_WRITE
, 0 ) =ğ
AVIERR_OK
 )

727 
fourcc
 = 
_fourcc
;

728 
ås
 = 
_ås
;

729 ifĞ
äameSize
.
width
 > 0 && f¿meSize.
height
 > 0 &&

730 !
	`ü—‹SŒ—ms
Ğ
äameSize
, 
isCŞÜ
 ) )

732 
	`şo£
();

733  
çl£
;

735  
Œue
;

738  
çl£
;

739 
	}
}

742 
boŞ
 
	gCvVideoWr™”_VFW
::
	$ü—‹SŒ—ms
Ğ
CvSize
 
äameSize
, 
boŞ
 
isCŞÜ
 )

744 ifĞ!
avife
 )

745  
çl£
;

746 
AVISTREAMINFO
 
avišfo
;

748 
BITMAPINFO_8B™
 
bmih
;

749 
bmih
.
bmiH—d”
 = 
	`icvB™m­H—d”
Ğ
äameSize
.
width
, f¿meSize.
height
, 
isCŞÜ
 ? 24 : 8 );

750  
i
 = 0; i < 256; i++ )

752 
bmih
.
bmiCŞÜs
[
i
].
rgbBlue
 = (
BYTE
)i;

753 
bmih
.
bmiCŞÜs
[
i
].
rgbG»’
 = (
BYTE
)i;

754 
bmih
.
bmiCŞÜs
[
i
].
rgbRed
 = (
BYTE
)i;

755 
bmih
.
bmiCŞÜs
[
i
].
rgbRe£rved
 = 0;

758 
	`mem£t
Ğ&
avišfo
, 0, (aviinfo));

759 
avišfo
.
fccTy³
 = 
¡»amty³VIDEO
;

760 
avišfo
.
fccHªdËr
 = 0;

762 
avišfo
.
dwSÿË
 = (
DWORD
)(()0x7FFFFFFF / 
ås
);

763 
avišfo
.
dwR©e
 = 
	`cvRound
(
ås
 *‡višfo.
dwSÿË
);

764 
avišfo
.
rcF¿me
.
tİ
 =‡višfo.rcF¿me.
Ëá
 = 0;

765 
avišfo
.
rcF¿me
.
right
 = 
äameSize
.
width
;

766 
avišfo
.
rcF¿me
.
bÙtom
 = 
äameSize
.
height
;

768 ifĞ
	`AVIFeC»©eSŒ—m
Ğ
avife
, &
uncom´es£d
, &
avišfo
 ) =ğ
AVIERR_OK
 )

770 
AVICOMPRESSOPTIONS
 
cİts
, *
pcİts
 = &copts;

771 
cİts
.
fccTy³
 = 
¡»amty³VIDEO
;

772 
cİts
.
fccHªdËr
 = 
fourcc
 != -1 ? fourcc : 0;

773 
cİts
.
dwKeyF¿meEv”y
 = 1;

774 
cİts
.
dwQu®™y
 = 10000;

775 
cİts
.
dwBy‹sP”SecÚd
 = 0;

776 
cİts
.
dwFÏgs
 = 
AVICOMPRESSF_VALID
;

777 
cİts
.
ÍFÜm©
 = &
bmih
;

778 
cİts
.
cbFÜm©
 = (
isCŞÜ
 ? (
BITMAPINFOHEADER
è: (
bmih
));

779 
cİts
.
ÍP¬ms
 = 0;

780 
cİts
.
cbP¬ms
 = 0;

781 
cİts
.
dwIÁ”ËaveEv”y
 = 0;

783 ifĞ
fourcc
 !ğ-1 || 
	`AVISaveO±iÚs
Ğ0, 0, 1, &
uncom´es£d
, &
pcİts
 ) =ğ
TRUE
 )

785 ifĞ
	`AVIMakeCom´es£dSŒ—m
Ğ&
com´es£d
, 
uncom´es£d
, 
pcİts
, 0 ) =ğ
AVIERR_OK
 &&

786 
	`AVISŒ—mS‘FÜm©
Ğ
com´es£d
, 0, &
bmih
, (bmih)è=ğ
AVIERR_OK
 )

788 
ås
 = fps;

789 
fourcc
 = ()
cİts
.
fccHªdËr
;

790 
äameSize
 = frameSize;

791 
‹mpF¿me
 = 
	`cvC»©eImage
Ğ
äameSize
, 8, (
isCŞÜ
 ? 3 : 1) );

792  
Œue
;

796  
çl£
;

797 
	}
}

800 
boŞ
 
	gCvVideoWr™”_VFW
::
	$wr™eF¿me
ĞcÚ¡ 
I¶Image
* 
image
 )

802 
boŞ
 
»suÉ
 = 
çl£
;

803 
	`CV_FUNCNAME
( "CvVideoWriter_VFW::writeFrame" );

805 
__BEGIN__
;

807 ifĞ!
image
 )

808 
EXIT
;

810 ifĞ!
com´es£d
 && !
	`ü—‹SŒ—ms
Ğ
	`cvG‘Size
(
image
), image->
nChªÃls
 > 1 ))

811 
EXIT
;

813 ifĞ
image
->
width
 !ğ
‹mpF¿me
->width || image->
height
 !=empFrame->height )

814 
	`CV_ERROR
Ğ
CV_StsUnm©chedSizes
,

817 ifĞ
image
->
nChªÃls
 !ğ
‹mpF¿me
->nChannels ||

818 
image
->
d•th
 !ğ
‹mpF¿me
->depth ||

819 
image
->
Üigš
 == 0 ||

820 
image
->
widthS‹p
 !ğ
	`cvAlign
(image->
width
*image->
nChªÃls
*((image->
d•th
 & 255)/8), 4))

822 
	`cvCÚv”tImage
Ğ
image
, 
‹mpF¿me
, image->
Üigš
 =ğ0 ? 
CV_CVTIMG_FLIP
 : 0 );

823 
image
 = (cÚ¡ 
I¶Image
*)
‹mpF¿me
;

826 
»suÉ
 = 
	`AVISŒ—mWr™e
Ğ
com´es£d
, 
pos
++, 1, 
image
->
imageD©a
,

827 
image
->
imageSize
, 
AVIIF_KEYFRAME
, 0, 0 ) =ğ
AVIERR_OK
;

829 
__END__
;

831  
»suÉ
;

832 
	}
}

834 
CvVideoWr™”
* 
	$cvC»©eVideoWr™”_VFW
ĞcÚ¡ * 
f’ame
, 
fourcc
,

835 
ås
, 
CvSize
 
äameSize
, 
isCŞÜ
 )

837 
CvVideoWr™”_VFW
* 
wr™”
 = 
Ãw
 CvVideoWriter_VFW;

838 ifĞ
wr™”
->
	`İ’
Ğ
f’ame
, 
fourcc
, 
ås
, 
äameSize
, 
isCŞÜ
 != 0 ))

839  
wr™”
;

840 
d–‘e
 
wr™”
;

842 
	}
}

	@cap_winrt/CaptureFrameGrabber.cpp

23 
	~"MedŸSŒ—mSšk.hµ
"

24 
	~"MedŸSšk.hµ
"

25 
	~"C­tu»F¿meG¿bb”.hµ
"

27 
usšg
 
Çme¥aû
 
	gMedŸ
;

28 
usšg
 
Çme¥aû
 
	gPÏtfÜm
;

29 
usšg
 
Çme¥aû
 
	gWšdows
::
Found©iÚ
;

30 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
;

31 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
C­tu»
;

32 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
MedŸPrİ”t›s
;

33 
usšg
 
Çme¥aû
 
	gcÚcu¼’cy
;

34 
usšg
 
Çme¥aû
 
	gMiüosoá
::
WRL
::
D‘as
;

35 
usšg
 
Çme¥aû
 
	gMiüosoá
::
WRL
;

37 
	gsk
<
	gMedŸ
::
C­tu»F¿meG¿bb”
^> 
MedŸ
::C­tu»F¿meG¿bb”::
C»©eAsync
(
_In_
 
MedŸC­tu»
^ 
ÿ±u»
, _In_ 
VideoEncodšgPrİ”t›s
^ 
´İs
, 
C­tu»SŒ—mTy³
 
¡»amTy³
)

39 autØ
	g»ad”
 = 
»f
 
Ãw
 
MedŸ
::
C­tu»F¿meG¿bb”
(
ÿ±u»
, 
´İs
, 
¡»amTy³
);

41 autØ
	g´ofe
 = 
»f
 
Ãw
 
MedŸEncodšgProfe
();

42 
	g´ofe
->
	gVideo
 = 
´İs
;

44 
	gsk
<>ask;

45 ià(
	g»ad”
->
	g_¡»amTy³
 =ğ
C­tu»SŒ—mTy³
::
P»v›w
)

47 
sk
 = 
ü—‹_sk
(
ÿ±u»
->
S¹P»v›wToCu¡omSškAsync
(
´ofe
, 
»ad”
->
_medŸEx‹nsiÚ
));

51 
	gsk
 = 
ü—‹_sk
(
ÿ±u»
->
S¹RecÜdToCu¡omSškAsync
(
´ofe
, 
»ad”
->
_medŸEx‹nsiÚ
));

54  
	gsk
.
th’
([
»ad”
]()

56 
»ad”
->
_¡©e
 = 
S‹
::
S¹ed
;

57  
»ad”
;

61 
	gMedŸ
::
C­tu»F¿meG¿bb”
::C­tu»F¿meG¿bb”(
_In_
 
MedŸC­tu»
^ 
ÿ±u»
, _In_ 
VideoEncodšgPrİ”t›s
^ 
´İs
, 
C­tu»SŒ—mTy³
 
¡»amTy³
)

62 : 
_¡©e
(
S‹
::
C»©ed
)

63 , 
_¡»amTy³
(
¡»amTy³
)

64 , 
	$_ÿ±u»
(
ÿ±u»
)

66 autØ
videoSam¶eHªdËr
 = 
»f
 
Ãw
 
	`MedŸSam¶eHªdËr
(
this
, &
MedŸ
::
C­tu»F¿meG¿bb”
::
ProûssSam¶e
);

68 
_medŸSšk
 = 
Make
<
MedŸSšk
>(
nuÎ±r
, 
´İs
,‚uÎ±r, 
videoSam¶eHªdËr
);

69 
_medŸEx‹nsiÚ
 = 
»š‹½»t_ÿ¡
<
IMedŸEx‹nsiÚ
^>(
¡©ic_ÿ¡
<
AWM
::IMedŸEx‹nsiÚ*>(
_medŸSšk
.
	`G‘
()));

70 
	}
}

72 
	gMedŸ
::
C­tu»F¿meG¿bb”
::~
	$C­tu»F¿meG¿bb”
()

74 ià(
_¡©e
 =ğ
S‹
::
S¹ed
)

76 ià(
_¡»amTy³
 =ğ
C­tu»SŒ—mTy³
::
P»v›w
)

78 ()
_ÿ±u»
->
	`StİP»v›wAsync
();

82 ()
_ÿ±u»
->
	`StİRecÜdAsync
();

86 ià(
_medŸSšk
 !ğ
nuÎ±r
)

88 ()
_medŸSšk
->
	`Shutdown
();

89 
_medŸSšk
 = 
nuÎ±r
;

91 
_medŸEx‹nsiÚ
 = 
nuÎ±r
;

92 
_ÿ±u»
 = 
nuÎ±r
;

93 
	}
}

95 
	gMedŸ
::
C­tu»F¿meG¿bb”
::
	$ShowCam”aS‘tšgs
()

97 #ià
WINAPI_FAMILY
!=
WINAPI_FAMILY_PHONE_APP


98 ià(
_¡©e
 =ğ
S‹
::
S¹ed
)

100 
Cam”aO±iÚsUI
::
	`Show
(
_ÿ±u»
.
	`G‘
());

103 
	}
}

105 
	gsk
<> 
	gMedŸ
::
C­tu»F¿meG¿bb”
::
	$FšishAsync
()

107 autØ
lock
 = 
_lock
.
	`LockExşusive
();

109 ià(
_¡©e
 !ğ
S‹
::
S¹ed
)

111 
throw
 
»f
 
Ãw
 
	`COMExû±iÚ
(
E_UNEXPECTED
, 
L
"State");

113 
_¡©e
 = 
S‹
::
Closšg
;

115 ià(
_medŸSšk
 !ğ
nuÎ±r
)

117 ()
_medŸSšk
->
	`Shutdown
();

118 
_medŸSšk
 = 
nuÎ±r
;

120 
_medŸEx‹nsiÚ
 = 
nuÎ±r
;

122 
sk
<>ask;

123 ià(
_¡»amTy³
 =ğ
C­tu»SŒ—mTy³
::
P»v›w
)

125 
sk
 = 
	`ü—‹_sk
(
_ÿ±u»
->
	`StİP»v›wAsync
());

129 
sk
 = 
	`ü—‹_sk
(
_ÿ±u»
->
	`StİRecÜdAsync
());

132  
sk
.
	`th’
([
this
]()

134 autØ
lock
 = 
_lock
.
	`LockExşusive
();

135 
_¡©e
 = 
S‹
::
Clo£d
;

136 
_ÿ±u»
 = 
nuÎ±r
;

138 
	}
}

140 
	gsk
<
	gComPŒ
<
	gIMF2DBufãr2
>> 
	gMedŸ
::
C­tu»F¿meG¿bb”
::
	$G‘F¿meAsync
()

142 autØ
lock
 = 
_lock
.
	`LockExşusive
();

144 ià(
_¡©e
 !ğ
S‹
::
S¹ed
)

146 
throw
 
»f
 
Ãw
 
	`COMExû±iÚ
(
E_UNEXPECTED
, 
L
"State");

149 
_medŸSšk
->
	`Reque¡VideoSam¶e
();

151 
sk_com¶‘iÚ_ev’t
<
ComPŒ
<
IMF2DBufãr2
>> 
skEv’t
;

152 
_videoSam¶eReque¡Queue
.
	`push
(
skEv’t
);

154  
	`ü—‹_sk
(
skEv’t
);

155 
	}
}

157 
	gMedŸ
::
C­tu»F¿meG¿bb”
::
ProûssSam¶e
(
_In_
 
MedŸSam¶e
^ 
§m¶e
)

159 
sk_com¶‘iÚ_ev’t
<
ComPŒ
<
IMF2DBufãr2
>> 
t
;

162 autØ
	glock
 = 
_lock
.
LockExşusive
();

164 
	gt
 = 
_videoSam¶eReque¡Queue
.
äÚt
();

165 
	g_videoSam¶eReque¡Queue
.
pİ
();

168 
	gComPŒ
<
	gIMFMedŸBufãr
> 
	gbufãr
;

169 
CHK
(
§m¶e
->
Sam¶e
->
CÚv”tToCÚtiguousBufãr
(&
bufãr
));

172 
	gt
.
£t
(
As
<
IMF2DBufãr2
>(
bufãr
));

	@cap_winrt/CaptureFrameGrabber.hpp

23 #´agm¨
Úû


25 
	~"MFInşudes.hµ
"

28 
Çme¥aû
 
	gMedŸ
 {

30 
şass
 
	gMedŸSšk
;

32 şas 
	cC­tu»SŒ—mTy³


34 
	gP»v›w
 = 0,

35 
	gRecÜd


38 
»f
 cÏs 
	cC­tu»F¿meG¿bb”
 
	g£®ed


40 
	gpublic
:

43 
vœtu®
 ~
C­tu»F¿meG¿bb”
();

45 
vœtu®
 
ShowCam”aS‘tšgs
();

47 
	gš‹º®
:

49 
cÚcu¼’cy
::
sk
<
C­tu»F¿meG¿bb”
^> 
C»©eAsync
(
_In_
 
WMC
::
MedŸC­tu»
^ 
ÿ±u»
, _In_ 
WMMp
::
VideoEncodšgPrİ”t›s
^ 
´İs
)

51  
C»©eAsync
(
ÿ±u»
, 
´İs
, 
C­tu»SŒ—mTy³
::
P»v›w
);

54 
	gcÚcu¼’cy
::
sk
<
C­tu»F¿meG¿bb”
^> 
C»©eAsync
(
_In_
 
WMC
::
MedŸC­tu»
^ 
ÿ±u»
, _In_ 
WMMp
::
VideoEncodšgPrİ”t›s
^ 
´İs
, 
C­tu»SŒ—mTy³
 
¡»amTy³
);

56 
	gcÚcu¼’cy
::
sk
<
MW
::
ComPŒ
<
IMF2DBufãr2
>> 
G‘F¿meAsync
();

57 
	gcÚcu¼’cy
::
sk
<> 
FšishAsync
();

59 
	g´iv©e
:

61 
C­tu»F¿meG¿bb”
(
_In_
 
WMC
::
MedŸC­tu»
^ 
ÿ±u»
, _In_ 
WMMp
::
VideoEncodšgPrİ”t›s
^ 
´İs
, 
C­tu»SŒ—mTy³
 
¡»amTy³
);

63 
ProûssSam¶e
(
_In_
 
MedŸSam¶e
^ 
§m¶e
);

65 
	gPÏtfÜm
::
Age
<
WMC
::
MedŸC­tu»
> 
_ÿ±u»
;

66 ::
Wšdows
::
MedŸ
::
IMedŸEx‹nsiÚ
^ 
_medŸEx‹nsiÚ
;

68 
	gMW
::
ComPŒ
<
MedŸSšk
> 
_medŸSšk
;

70 
C­tu»SŒ—mTy³
 
	g_¡»amTy³
;

72 şas 
	cS‹


74 
	gC»©ed
,

75 
	gS¹ed
,

76 
	gClosšg
,

77 
	gClo£d


78 } 
	g_¡©e
;

80 
	g¡d
::
queue
<
cÚcu¼’cy
::
sk_com¶‘iÚ_ev’t
<
MW
::
ComPŒ
<
IMF2DBufãr2
>>> 
_videoSam¶eReque¡Queue
;

81 
AutoMF
 
	g_mf
;

82 
	gMWW
::
SRWLock
 
_lock
;

	@cap_winrt/MFIncludes.hpp

25 #´agm¨
Úû


27 
	~<cŞËùiÚ.h
>

28 
	~<µÉasks.h
>

30 
	~<w¾\im¶em’ts.h
>

31 
	~<w¾\w¿µ”s\cÜew¿µ”s.h
>

32 
	~<RÛ¼Ü­i.h
>

34 
	~<queue
>

35 
	~<s¡»am
>

37 
	~<robufãr.h
>

39 
	~<mçpi.h
>

40 
	~<mfidl.h
>

41 
	~<Mã¼Ü.h
>

43 
	~<wšdows.medŸ.h
>

44 
	~<wšdows.medŸ.medŸ´İ”t›s.h
>

46 
Çme¥aû
 
	gAWM
 = ::
ABI
::
Wšdows
::
MedŸ
;

47 
Çme¥aû
 
	gAWMMp
 = ::
ABI
::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
;

48 
Çme¥aû
 
	gAWFC
 = ::
ABI
::
Wšdows
::
Found©iÚ
::
CŞËùiÚs
;

49 
Çme¥aû
 
	gMW
 = ::
Miüosoá
::
WRL
;

50 
Çme¥aû
 
	gMWD
 = ::
Miüosoá
::
WRL
::
D‘as
;

51 
Çme¥aû
 
	gMWW
 = ::
Miüosoá
::
WRL
::
W¿µ”s
;

52 
Çme¥aû
 
	gWMC
 = ::
Wšdows
::
MedŸ
::
C­tu»
;

53 
Çme¥aû
 
	gWF
 = ::
Wšdows
::
Found©iÚ
;

54 
Çme¥aû
 
	gWMMp
 = ::
Wšdows
::
MedŸ
::
MedŸPrİ”t›s
;

55 
Çme¥aû
 
	gWSS
 = ::
Wšdows
::
StÜage
::
SŒ—ms
;

58 
	#CHK
(
¡©em’t
è{
HRESULT
 
_hr
 = (¡©em’t); ià(
	`FAILED
(_hr)è{ 
throw
 
»f
 
Ãw
 
PÏtfÜm
::
	`COMExû±iÚ
(_hr); };}

	)

59 
	#CHKNULL
(
p
è{ià(Õè=ğ
nuÎ±r
è{ 
throw
 
»f
 
Ãw
 
PÏtfÜm
::
	`NuÎReã»nûExû±iÚ
(
L
#p); };}

	)

62 
	#CHK_RETURN
(
¡©em’t
è{
hr
 = (¡©em’t); ià(
	`FAILED
(hr)è{  hr; };}

	)

65 
	g‹m¶©e
<
ty³Çme
 
	gT
,y³Çm
	gU
>

66 
	gMW
::
ComPŒ
<
T
> 
As
(
U
^ 
š
)

68 
MW
::
ComPŒ
<
T
> 
out
;

69 
CHK
(
»š‹½»t_ÿ¡
<
IIn¥eùabË
*>(
š
)->
Qu”yIÁ”çû
(
IID_PPV_ARGS
(&
out
)));

70  
	gout
;

74 
	g‹m¶©e
<
ty³Çme
 
	gT
,y³Çm
	gU
>

75 
	gMiüosoá
::
WRL
::
ComPŒ
<
T
> 
As
(cÚ¡ 
Miüosoá
::WRL::ComPŒ<
U
>& 
š
)

77 
Miüosoá
::
WRL
::
ComPŒ
<
T
> 
out
;

78 
CHK
(
š
.
As
(&
out
));

79  
	gout
;

83 
	g‹m¶©e
<
ty³Çme
 
	gT
,y³Çm
	gU
>

84 
	gMiüosoá
::
WRL
::
ComPŒ
<
T
> 
	$As
(
U
* 
š
)

86 
Miüosoá
::
WRL
::
ComPŒ
<
T
> 
out
;

87 
	`CHK
(
š
->
	`Qu”yIÁ”çû
(
	`IID_PPV_ARGS
(&
out
)));

88  
out
;

89 
	}
}

92 
šlše
 * 
G‘D©a
(
_In_
 
WSS
::
IBufãr
^ 
bufãr
)

94 * 
by‹s
 = 
nuÎ±r
;

95 
CHK
(
As
<
WSS
::
IBufãrBy‹Acûss
>(
bufãr
)->
Bufãr
(&
by‹s
));

96  
	gby‹s
;

100 şas 
	cAutoMF


102 
	mpublic
:

103 
	$AutoMF
()

104 : 
	$_bIn™Ÿlized
(
çl£
)

106 
	`CHK
(
	`MFS¹up
(
MF_VERSION
));

109 ~
	$AutoMF
()

111 ià(
_bIn™Ÿlized
)

113 ()
	`MFShutdown
();

115 
	}
}

117 
	g´iv©e
:

118 
boŞ
 
_bIn™Ÿlized
;

122 
	g‹m¶©e
 <
size_t
 
	gN
>

123 
HRESULT
 
Origš©eE¼Ü
(
__š
 HRESULT 
hr
, __š 
wch¬_t
 cÚ¡ (&
¡r
)[
N
])

125 ià(
FAILED
(
hr
))

127 ::
RoOrigš©eE¼ÜW
(
hr
, 
N
 - 1, 
¡r
);

129  
	ghr
;

133 
šlše
 
HRESULT
 
	$Origš©eE¼Ü
(
__š
 
HRESULT
 
hr
)

135 ià(
	`FAILED
(
hr
))

137 ::
	`RoOrigš©eE¼ÜW
(
hr
, 0, 
nuÎ±r
);

139  
hr
;

140 
	}
}

143 
	g‹m¶©e
 <
ty³Çme
 
	gLambda
>

144 
HRESULT
 
	$Exû±iÚBound¬y
(
Lambda
&& 
Ïmbda
)

146 
Œy


148 
	`Ïmbda
();

149  
S_OK
;

151 
	`ÿtch
 (
PÏtfÜm
::
Exû±iÚ
^ 
e
)

153  
e
->
HResuÉ
;

155 
	`ÿtch
 (cÚ¡ 
¡d
::
bad_®loc
&)

157  
E_OUTOFMEMORY
;

159 
	`ÿtch
 (cÚ¡ 
¡d
::
exû±iÚ
&)

161  
E_FAIL
;

163 
	}
}

166 
»f
 cÏs 
	cMedŸSam¶e
 
	m£®ed


168 
	mš‹º®
:

169 
MW
::
ComPŒ
<
IMFSam¶e
> 
Sam¶e
;

172 
d–eg©e
 
MedŸSam¶eHªdËr
(
MedŸSam¶e
^ 
§m¶e
);

	@cap_winrt/MediaSink.hpp

23 #´agm¨
Úû


25 
	~"MedŸSŒ—mSšk.hµ
"

26 
	~"MFInşudes.hµ
"

28 
Çme¥aû
 
	gMedŸ
 {

30 cÚ¡ 
	gc_audioSŒ—mSškId
 = 0;

31 cÚ¡ 
	gc_videoSŒ—mSškId
 = 1;

33 
şass
 
MedŸSšk
 
	gW¾S—Ëd


34 : 
public
 
MW
::
RuÁimeCÏss
<

35 
MW
::
RuÁimeCÏssFÏgs
<

36 
MW
::
RuÁimeCÏssTy³
::
WšRtCÏssicComMix
>

37 , 
	gAWM
::
IMedŸEx‹nsiÚ


38 , 
	gIMFMedŸSšk


39 , 
	gIMFClockS‹Sšk


40 , 
	gMW
::
FtmBa£


43 
In¥eùabËCÏss
(
L
"MedŸSšk", 
Ba£Tru¡
)

45 
	gpublic
:

47 
MedŸSšk
(

48 
_In_İt_
 
WMMp
::
AudioEncodšgPrİ”t›s
^ 
audioPrİs
,

49 
_In_İt_
 
WMMp
::
VideoEncodšgPrİ”t›s
^ 
videoPrİs
,

50 
_In_İt_
 
MedŸSam¶eHªdËr
^ 
audioSam¶eHªdËr
,

51 
_In_İt_
 
MedŸSam¶eHªdËr
^ 
videoSam¶eHªdËr


53 : 
_shutdown
(
çl£
)

55 
MW
::
ComPŒ
<
IMFMedŸTy³
> 
audioMT
;

56 ià(
	gaudioPrİs
 !ğ
nuÎ±r
)

58 
CHK
(
MFC»©eMedŸTy³FromPrİ”t›s
(
As
<
IUnknown
>(
audioPrİs
).
G‘
(), &
audioMT
));

59 
	g_audioSŒ—mSšk
 = 
MW
::
Make
<
MedŸSŒ—mSšk
>(

60 
this
,

61 
	gc_audioSŒ—mSškId
,

62 
	gaudioMT
,

63 
	gaudioSam¶eHªdËr


67 
	gMW
::
ComPŒ
<
IMFMedŸTy³
> 
videoMT
;

68 ià(
	gvideoPrİs
 !ğ
nuÎ±r
)

70 
CHK
(
MFC»©eMedŸTy³FromPrİ”t›s
(
As
<
IUnknown
>(
videoPrİs
).
G‘
(), &
videoMT
));

71 
	g_videoSŒ—mSšk
 = 
MW
::
Make
<
MedŸSŒ—mSšk
>(

72 
this
,

73 
	gc_videoSŒ—mSškId
,

74 
	gvideoMT
,

75 
	gvideoSam¶eHªdËr


80 
Reque¡AudioSam¶e
()

82 autØ
	glock
 = 
_lock
.
LockExşusive
();

84 
_V”ifyNÙShutdown
();

86 
	g_audioSŒ—mSšk
->
Reque¡Sam¶e
();

89 
Reque¡VideoSam¶e
()

91 autØ
	glock
 = 
_lock
.
LockExşusive
();

93 
_V”ifyNÙShutdown
();

95 
	g_videoSŒ—mSšk
->
Reque¡Sam¶e
();

98 
S‘Cu¼’tAudioMedŸTy³
(
_In_
 
IMFMedŸTy³
* 
mt
)

100 autØ
	glock
 = 
_lock
.
LockExşusive
();

102 
_V”ifyNÙShutdown
();

104 
	g_audioSŒ—mSšk
->
IÁ”ÇlS‘Cu¼’tMedŸTy³
(
mt
);

107 
S‘Cu¼’tVideoMedŸTy³
(
_In_
 
IMFMedŸTy³
* 
mt
)

109 autØ
	glock
 = 
_lock
.
LockExşusive
();

111 
_V”ifyNÙShutdown
();

113 
	g_videoSŒ—mSšk
->
IÁ”ÇlS‘Cu¼’tMedŸTy³
(
mt
);

120 
IFACEMETHODIMP
 
S‘Prİ”t›s
(
_In_
 
AWFC
::
IPrİ”tyS‘
 * )

122  
Exû±iÚBound¬y
([
this
]()

124 autØ
lock
 = 
_lock
.
LockExşusive
();

126 
_V”ifyNÙShutdown
();

134 
IFACEMETHODIMP
 
G‘Ch¬aù”i¡ics
(
_Out_
 
DWORD
 *
ch¬aù”i¡ics
)

136  
Exû±iÚBound¬y
([
this
, 
ch¬aù”i¡ics
]()

138 
_V”ifyNÙShutdown
();

140 
CHKNULL
(
ch¬aù”i¡ics
);

141 *
ch¬aù”i¡ics
 = 
MEDIASINK_RATELESS
 | 
MEDIASINK_FIXED_STREAMS
;

145 
IFACEMETHODIMP
 
AddSŒ—mSšk
(

146 
DWORD
 ,

147 
_In_
 
IMFMedŸTy³
 * ,

148 
_COM_OuŒ_
 
IMFSŒ—mSšk
 **
¡»amSšk


151  
Exû±iÚBound¬y
([
this
, 
¡»amSšk
]()

153 
_V”ifyNÙShutdown
();

155 
CHKNULL
(
¡»amSšk
);

156 *
¡»amSšk
 = 
nuÎ±r
;

158 
CHK
(
MF_E_STREAMSINKS_FIXED
);

162 
IFACEMETHODIMP
 
RemoveSŒ—mSšk
(
DWORD
 )

164  
Exû±iÚBound¬y
([
this
]()

166 
_V”ifyNÙShutdown
();

168 
CHK
(
MF_E_STREAMSINKS_FIXED
);

172 
IFACEMETHODIMP
 
G‘SŒ—mSškCouÁ
(
_Out_
 
DWORD
 *
¡»amSškCouÁ
)

174  
Exû±iÚBound¬y
([
this
, 
¡»amSškCouÁ
]()

176 
CHKNULL
(
¡»amSškCouÁ
);

178 
_V”ifyNÙShutdown
();

180 *
¡»amSškCouÁ
 = (
_audioSŒ—mSšk
 !ğ
nuÎ±r
è+ (
_videoSŒ—mSšk
 !=‚ullptr);

184 
IFACEMETHODIMP
 
G‘SŒ—mSškByIndex
(
DWORD
 
šdex
, 
_COM_OuŒ_
 
IMFSŒ—mSšk
 **
¡»amSšk
)

186  
Exû±iÚBound¬y
([
this
, 
šdex
, 
¡»amSšk
]()

188 autØ
lock
 = 
_lock
.
LockExşusive
();

190 
CHKNULL
(
¡»amSšk
);

191 *
¡»amSšk
 = 
nuÎ±r
;

193 
_V”ifyNÙShutdown
();

195 
šdex
)

198 ià(
_audioSŒ—mSšk
 !ğ
nuÎ±r
)

200 
CHK
(
_audioSŒ—mSšk
.
CİyTo
(
¡»amSšk
));

204 
CHK
(
_videoSŒ—mSšk
.
CİyTo
(
¡»amSšk
));

209 ià((
_audioSŒ—mSšk
 !ğ
nuÎ±r
è&& (
_videoSŒ—mSšk
 !=‚ullptr))

211 
CHK
(
_videoSŒ—mSšk
.
CİyTo
(
¡»amSšk
));

215 
CHK
(
E_INVALIDARG
);

220 
CHK
(
E_INVALIDARG
);

225 
IFACEMETHODIMP
 
G‘SŒ—mSškById
(
DWORD
 
id’tif›r
, 
_COM_OuŒ_
 
IMFSŒ—mSšk
 **
¡»amSšk
)

227  
Exû±iÚBound¬y
([
this
, 
id’tif›r
, 
¡»amSšk
]()

229 autØ
lock
 = 
_lock
.
LockExşusive
();

231 
CHKNULL
(
¡»amSšk
);

232 *
¡»amSšk
 = 
nuÎ±r
;

234 
_V”ifyNÙShutdown
();

236 ià((
id’tif›r
 =ğ0è&& (
_audioSŒ—mSšk
 !ğ
nuÎ±r
))

238 
CHK
(
_audioSŒ—mSšk
.
CİyTo
(
¡»amSšk
));

240 ià((
id’tif›r
 =ğ1è&& (
_videoSŒ—mSšk
 !ğ
nuÎ±r
))

242 
CHK
(
_videoSŒ—mSšk
.
CİyTo
(
¡»amSšk
));

246 
CHK
(
E_INVALIDARG
);

251 
IFACEMETHODIMP
 
S‘P»£Á©iÚClock
(
_In_
 
IMFP»£Á©iÚClock
 *
şock
)

253  
Exû±iÚBound¬y
([
this
, 
şock
]()

255 autØ
lock
 = 
_lock
.
LockExşusive
();

257 
_V”ifyNÙShutdown
();

259 ià(
_şock
 !ğ
nuÎ±r
)

261 
CHK
(
_şock
->
RemoveClockS‹Sšk
(
this
));

262 
_şock
 = 
nuÎ±r
;

265 ià(
şock
 !ğ
nuÎ±r
)

267 
CHK
(
şock
->
AddClockS‹Sšk
(
this
));

268 
_şock
 = 
şock
;

273 
IFACEMETHODIMP
 
G‘P»£Á©iÚClock
(
_COM_OuŒ_
 
IMFP»£Á©iÚClock
 **
şock
)

275  
Exû±iÚBound¬y
([
this
, 
şock
]()

277 autØ
lock
 = 
_lock
.
LockExşusive
();

279 
CHKNULL
(
şock
);

280 *
şock
 = 
nuÎ±r
;

282 
_V”ifyNÙShutdown
();

284 ià(
_şock
 !ğ
nuÎ±r
)

286 
CHK
(
_şock
.
CİyTo
(
şock
))

291 
IFACEMETHODIMP
 
Shutdown
()

293  
Exû±iÚBound¬y
([
this
]()

295 autØ
lock
 = 
_lock
.
LockExşusive
();

297 ià(
_shutdown
)

301 
_shutdown
 = 
Œue
;

303 ià(
_audioSŒ—mSšk
 !ğ
nuÎ±r
)

305 
_audioSŒ—mSšk
->
Shutdown
();

306 
_audioSŒ—mSšk
 = 
nuÎ±r
;

309 ià(
_videoSŒ—mSšk
 !ğ
nuÎ±r
)

311 
_videoSŒ—mSšk
->
Shutdown
();

312 
_videoSŒ—mSšk
 = 
nuÎ±r
;

315 ià(
_şock
 !ğ
nuÎ±r
)

317 ()
_şock
->
RemoveClockS‹Sšk
(
this
);

318 
_şock
 = 
nuÎ±r
;

327 
IFACEMETHODIMP
 
OnClockS¹
(
MFTIME
 , 
LONGLONG
 )

329  
Exû±iÚBound¬y
([
this
]()

331 autØ
lock
 = 
_lock
.
LockExşusive
();

333 
_V”ifyNÙShutdown
();

337 
IFACEMETHODIMP
 
OnClockStİ
(
MFTIME
 )

339  
Exû±iÚBound¬y
([
this
]()

341 autØ
lock
 = 
_lock
.
LockExşusive
();

343 
_V”ifyNÙShutdown
();

347 
IFACEMETHODIMP
 
OnClockPau£
(
MFTIME
 )

349  
Exû±iÚBound¬y
([
this
]()

351 autØ
lock
 = 
_lock
.
LockExşusive
();

353 
_V”ifyNÙShutdown
();

357 
IFACEMETHODIMP
 
OnClockRe¡¬t
(
MFTIME
 )

359  
Exû±iÚBound¬y
([
this
]()

361 autØ
lock
 = 
_lock
.
LockExşusive
();

363 
_V”ifyNÙShutdown
();

367 
IFACEMETHODIMP
 
OnClockS‘R©e
(
MFTIME
 , )

369  
Exû±iÚBound¬y
([
this
]()

371 autØ
lock
 = 
_lock
.
LockExşusive
();

373 
_V”ifyNÙShutdown
();

377 
	g´iv©e
:

379 
boŞ
 
_shutdown
;

381 
_V”ifyNÙShutdown
()

383 ià(
	g_shutdown
)

385 
CHK
(
MF_E_SHUTDOWN
);

389 
	gMW
::
ComPŒ
<
MedŸSŒ—mSšk
> 
_audioSŒ—mSšk
;

390 
	gMW
::
ComPŒ
<
MedŸSŒ—mSšk
> 
_videoSŒ—mSšk
;

391 
	gMW
::
ComPŒ
<
IMFP»£Á©iÚClock
> 
_şock
;

393 
	gMWW
::
SRWLock
 
_lock
;

	@cap_winrt/MediaStreamSink.cpp

23 
	~"MedŸSŒ—mSšk.hµ
"

24 
	~"MFInşudes.hµ
"

26 
usšg
 
Çme¥aû
 
	gMedŸ
;

27 
usšg
 
Çme¥aû
 
	gMiüosoá
::
WRL
;

28 
usšg
 
Çme¥aû
 
	gPÏtfÜm
;

29 
usšg
 
Çme¥aû
 
	gWšdows
::
Found©iÚ
;

31 
	gMedŸSŒ—mSšk
::
MedŸSŒ—mSšk
(

32 
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸSšk
>& 
sšk
,

33 
__š
 
DWORD
 
id
,

34 
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸTy³
>& 
mt
,

35 
__š
 
MedŸSam¶eHªdËr
^ 
§m¶eHªdËr


37 : 
_shutdown
(
çl£
)

38 , 
_id
(-1)

39 , 
_width
(0)

40 , 
	$_height
(0)

42 
	`CHK
(
	`MFC»©eEv’tQueue
(&
_ev’tQueue
));

43 
	`CHK
(
	`MFC»©eMedŸTy³
(&
_curMT
));

45 
	`_Upd©eMedŸTy³
(
mt
);

47 
_sšk
 = 
sšk
;

48 
_id
 = 
id
;

49 
_§m¶eHªdËr
 = 
§m¶eHªdËr
;

50 
	}
}

52 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘MedŸSšk
(
__d”ef_out
 
IMFMedŸSšk
 **
sšk
)

54  
	`Exû±iÚBound¬y
([
this
, 
sšk
]()

56 autØ
lock
 = 
_lock
.
	`LockExşusive
();

58 
	`CHKNULL
(
sšk
);

59 *
sšk
 = 
nuÎ±r
;

61 
	`_V”ifyNÙShutdown
();

63 
	`CHK
(
_sšk
.
	`CİyTo
(
sšk
));

65 
	}
}

67 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘Id’tif›r
(
__out
 
DWORD
 *
id’tif›r
)

69  
	`Exû±iÚBound¬y
([
this
, 
id’tif›r
]()

71 autØ
lock
 = 
_lock
.
	`LockExşusive
();

73 
	`CHKNULL
(
id’tif›r
);

75 
	`_V”ifyNÙShutdown
();

77 *
id’tif›r
 = 
_id
;

79 
	}
}

81 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘MedŸTy³HªdËr
(
__d”ef_out
 
IMFMedŸTy³HªdËr
 **
hªdËr
)

83  
	`Exû±iÚBound¬y
([
this
, 
hªdËr
]()

85 autØ
lock
 = 
_lock
.
	`LockExşusive
();

87 
	`CHKNULL
(
hªdËr
);

88 *
hªdËr
 = 
nuÎ±r
;

90 
	`_V”ifyNÙShutdown
();

92 *
hªdËr
 = 
this
;

93 
this
->
	`AddRef
();

96 
	}
}

98 
	gMedŸSŒ—mSšk
::
	$Reque¡Sam¶e
()

100 autØ
lock
 = 
_lock
.
	`LockExşusive
();

102 
	`_V”ifyNÙShutdown
();

104 
	`CHK
(
_ev’tQueue
->
	`QueueEv’tP¬amV¬
(
MESŒ—mSškReque¡Sam¶e
, 
GUID_NULL
, 
S_OK
, 
nuÎ±r
));

105 
	}
}

107 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$ProûssSam¶e
(
__š_İt
 
IMFSam¶e
 *
§m¶e
)

109  
	`Exû±iÚBound¬y
([
this
, 
§m¶e
]()

111 
MedŸSam¶eHªdËr
^ 
§m¶eHªdËr
;

112 autØ
medŸSam¶e
 = 
»f
 
Ãw
 
	`MedŸSam¶e
();

115 autØ
lock
 = 
_lock
.
	`LockExşusive
();

117 
	`_V”ifyNÙShutdown
();

119 ià(
§m¶e
 =ğ
nuÎ±r
)

124 
medŸSam¶e
->
Sam¶e
 = 
§m¶e
;

125 
§m¶eHªdËr
 = 
_§m¶eHªdËr
;

129 
	`§m¶eHªdËr
(
medŸSam¶e
);

131 
	}
}

133 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$PÏûM¬k”
(
__š
 
MFSTREAMSINK_MARKER_TYPE
 , __š cÚ¡ 
PROPVARIANT
 * , __š cÚ¡ PROPVARIANT * 
cÚ‹xtV®ue
)

135  
	`Exû±iÚBound¬y
([
this
, 
cÚ‹xtV®ue
]()

137 autØ
lock
 = 
_lock
.
	`LockExşusive
();

138 
	`CHKNULL
(
cÚ‹xtV®ue
);

140 
	`_V”ifyNÙShutdown
();

142 
	`CHK
(
_ev’tQueue
->
	`QueueEv’tP¬amV¬
(
MESŒ—mSškM¬k”
, 
GUID_NULL
, 
S_OK
, 
cÚ‹xtV®ue
));

144 
	}
}

146 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$Flush
()

148  
	`Exû±iÚBound¬y
([
this
]()

150 autØ
lock
 = 
_lock
.
	`LockExşusive
();

152 
	`_V”ifyNÙShutdown
();

154 
	}
}

156 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘Ev’t
(
__š
 
DWORD
 
æags
, 
__d”ef_out
 
IMFMedŸEv’t
 **
ev’t
)

158  
	`Exû±iÚBound¬y
([
this
, 
æags
, 
ev’t
]()

160 
	`CHKNULL
(
ev’t
);

161 *
ev’t
 = 
nuÎ±r
;

163 
ComPŒ
<
IMFMedŸEv’tQueue
> 
ev’tQueue
;

166 autØ
lock
 = 
_lock
.
	`LockExşusive
();

168 
	`_V”ifyNÙShutdown
();

170 
ev’tQueue
 = 
_ev’tQueue
;

174 
	`CHK
(
ev’tQueue
->
	`G‘Ev’t
(
æags
, 
ev’t
));

176 
	}
}

178 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$BegšG‘Ev’t
(
__š
 
IMFAsyncC®lback
 *
ÿÎback
, 
__š_İt
 
IUnknown
 *
¡©e
)

180  
	`Exû±iÚBound¬y
([
this
, 
ÿÎback
, 
¡©e
]()

182 autØ
lock
 = 
_lock
.
	`LockExşusive
();

184 
	`_V”ifyNÙShutdown
();

186 
	`CHK
(
_ev’tQueue
->
	`BegšG‘Ev’t
(
ÿÎback
, 
¡©e
));

188 
	}
}

191 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$EndG‘Ev’t
(
__š
 
IMFAsyncResuÉ
 *
»suÉ
, 
__d”ef_out
 
IMFMedŸEv’t
 **
ev’t
)

193  
	`Exû±iÚBound¬y
([
this
, 
»suÉ
, 
ev’t
]()

195 autØ
lock
 = 
_lock
.
	`LockExşusive
();

197 
	`CHKNULL
(
ev’t
);

198 *
ev’t
 = 
nuÎ±r
;

200 
	`_V”ifyNÙShutdown
();

202 
	`CHK
(
_ev’tQueue
->
	`EndG‘Ev’t
(
»suÉ
, 
ev’t
));

204 
	}
}

206 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$QueueEv’t
(

207 
__š
 
MedŸEv’tTy³
 
m‘
,

208 
__š
 
REFGUID
 
ex‹ndedTy³
,

209 
__š
 
HRESULT
 
¡©us
,

210 
__š_İt
 cÚ¡ 
PROPVARIANT
 *
v®ue


213  
	`Exû±iÚBound¬y
([
this
, 
m‘
, 
ex‹ndedTy³
, 
¡©us
, 
v®ue
]()

215 autØ
lock
 = 
_lock
.
	`LockExşusive
();

217 
	`_V”ifyNÙShutdown
();

219 
	`CHK
(
_ev’tQueue
->
	`QueueEv’tP¬amV¬
(
m‘
, 
ex‹ndedTy³
, 
¡©us
, 
v®ue
));

221 
	}
}

223 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$IsMedŸTy³SuµÜ‹d
(
__š
 
IMFMedŸTy³
 *
medŸTy³
, 
__d”ef_out_İt
 IMFMedŸTy³ **
şo£¡MedŸTy³
)

225 
boŞ
 
suµÜ‹d
 = 
çl£
;

227 
HRESULT
 
hr
 = 
	`Exû±iÚBound¬y
([
this
, 
medŸTy³
, 
şo£¡MedŸTy³
, &
suµÜ‹d
]()

229 autØ
lock
 = 
_lock
.
	`LockExşusive
();

231 ià(
şo£¡MedŸTy³
 !ğ
nuÎ±r
)

233 *
şo£¡MedŸTy³
 = 
nuÎ±r
;

236 
	`CHKNULL
(
medŸTy³
);

238 
	`_V”ifyNÙShutdown
();

240 
suµÜ‹d
 = 
	`_IsMedŸTy³SuµÜ‹d
(
medŸTy³
);

244  
	`FAILED
(
hr
è? h¸: 
suµÜ‹d
 ? 
S_OK
 : 
MF_E_INVALIDMEDIATYPE
;

245 
	}
}

247 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘MedŸTy³CouÁ
(
__out
 
DWORD
 *
ty³CouÁ
)

249  
	`Exû±iÚBound¬y
([
this
, 
ty³CouÁ
]()

251 autØ
lock
 = 
_lock
.
	`LockExşusive
();

253 
	`CHKNULL
(
ty³CouÁ
);

255 
	`_V”ifyNÙShutdown
();

258 *
ty³CouÁ
 = 0;

260 
	}
}

262 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘MedŸTy³ByIndex
(
__š
 
DWORD
 , 
__d”ef_out
 
IMFMedŸTy³
 **
medŸTy³
)

264 
HRESULT
 
hr
 = 
	`Exû±iÚBound¬y
([
this
, 
medŸTy³
]()

266 autØ
lock
 = 
_lock
.
	`LockExşusive
();

268 
	`CHKNULL
(
medŸTy³
);

269 *
medŸTy³
 = 
nuÎ±r
;

271 
	`_V”ifyNÙShutdown
();

275  
	`FAILED
(
hr
è? h¸: 
MF_E_NO_MORE_TYPES
;

276 
	}
}

278 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$S‘Cu¼’tMedŸTy³
(
__š
 
IMFMedŸTy³
 *
medŸTy³
)

280  
	`Exû±iÚBound¬y
([
this
, 
medŸTy³
]()

282 autØ
lock
 = 
_lock
.
	`LockExşusive
();

284 
	`CHKNULL
(
medŸTy³
);

286 
	`_V”ifyNÙShutdown
();

288 ià(!
	`_IsMedŸTy³SuµÜ‹d
(
medŸTy³
))

290 
	`CHK
(
MF_E_INVALIDMEDIATYPE
);

293 
	`_Upd©eMedŸTy³
(
medŸTy³
);

295 
	}
}

297 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘Cu¼’tMedŸTy³
(
__d”ef_out_İt
 
IMFMedŸTy³
 **
medŸTy³
)

299  
	`Exû±iÚBound¬y
([
this
, 
medŸTy³
]()

301 autØ
lock
 = 
_lock
.
	`LockExşusive
();

303 
	`CHKNULL
(
medŸTy³
);

304 *
medŸTy³
 = 
nuÎ±r
;

306 
	`_V”ifyNÙShutdown
();

308 
ComPŒ
<
IMFMedŸTy³
> 
mt
;

309 
	`CHK
(
	`MFC»©eMedŸTy³
(&
mt
));

310 
	`CHK
(
_curMT
->
	`CİyAÎI‹ms
(
mt
.
	`G‘
()));

311 *
medŸTy³
 = 
mt
.
	`D‘ach
();

313 
	}
}

315 
HRESULT
 
	gMedŸSŒ—mSšk
::
	$G‘MajÜTy³
(
__out
 
GUID
 *
majÜTy³
)

317  
	`Exû±iÚBound¬y
([
this
, 
majÜTy³
]()

319 autØ
lock
 = 
_lock
.
	`LockExşusive
();

321 
	`CHKNULL
(
majÜTy³
);

323 
	`_V”ifyNÙShutdown
();

325 *
majÜTy³
 = 
_majÜTy³
;

327 
	}
}

329 
	gMedŸSŒ—mSšk
::
IÁ”ÇlS‘Cu¼’tMedŸTy³
(
__š
 cÚ¡ 
ComPŒ
<
IMFMedŸTy³
>& 
medŸTy³
)

331 autØ
lock
 = 
_lock
.
LockExşusive
();

333 
CHKNULL
(
medŸTy³
);

335 
_V”ifyNÙShutdown
();

337 
_Upd©eMedŸTy³
(
medŸTy³
);

340 
	gMedŸSŒ—mSšk
::
	$Shutdown
()

342 autØ
lock
 = 
_lock
.
	`LockExşusive
();

344 ià(
_shutdown
)

348 
_shutdown
 = 
Œue
;

350 ()
_ev’tQueue
->
	`Shutdown
();

351 
_ev’tQueue
 = 
nuÎ±r
;

353 
_curMT
 = 
nuÎ±r
;

354 
_sšk
 = 
nuÎ±r
;

355 
_§m¶eHªdËr
 = 
nuÎ±r
;

356 
	}
}

358 
boŞ
 
	gMedŸSŒ—mSšk
::
_IsMedŸTy³SuµÜ‹d
(
__š
 cÚ¡ 
ComPŒ
<
IMFMedŸTy³
>& 
mt
) const

360 
GUID
 
majÜTy³
;

361 
GUID
 
	gsubTy³
;

362 ià(
SUCCEEDED
(
mt
->
G‘GUID
(
MF_MT_MAJOR_TYPE
, &
majÜTy³
)) &&

363 
SUCCEEDED
(
mt
->
G‘GUID
(
MF_MT_SUBTYPE
, &
subTy³
)) &&

364 (
	gmajÜTy³
 =ğ
_majÜTy³
) &&

365 (
subTy³
 =ğ
_subTy³
))

367  
Œue
;

370  
	gçl£
;

373 
	gMedŸSŒ—mSšk
::
_Upd©eMedŸTy³
(
__š
 cÚ¡ 
ComPŒ
<
IMFMedŸTy³
>& 
mt
)

375 
CHK
(
mt
->
G‘GUID
(
MF_MT_MAJOR_TYPE
, &
_majÜTy³
));

376 
CHK
(
mt
->
G‘GUID
(
MF_MT_SUBTYPE
, &
_subTy³
));

378 ià(
	g_majÜTy³
 =ğ
MFMedŸTy³_Video
)

380 
CHK
(
MFG‘A‰ribu‹Size
(
mt
.
G‘
(), 
MF_MT_FRAME_SIZE
, &
_width
, &
_height
));

383 
CHK
(
mt
->
CİyAÎI‹ms
(
_curMT
.
G‘
()));

	@cap_winrt/MediaStreamSink.hpp

23 #´agm¨
Úû


25 
	~"MFInşudes.hµ
"

27 
Çme¥aû
 
	gMedŸ
 {

29 
şass
 
MedŸSŒ—mSšk
 
	gW¾S—Ëd
 :

30 
public
 
Miüosoá
::
WRL
::
RuÁimeCÏss
<

31 
Miüosoá
::
WRL
::
RuÁimeCÏssFÏgs
<Miüosoá::WRL::
CÏssicCom
>,

32 
	gIMFSŒ—mSšk
,

33 
	gIMFMedŸEv’tG’”©Ü
,

34 
	gIMFMedŸTy³HªdËr


37 
	gpublic
:

39 
MedŸSŒ—mSšk
(

40 
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸSšk
>& 
sšk
,

41 
__š
 
DWORD
 
id
,

42 
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸTy³
>& 
mt
,

43 
__š
 
MedŸSam¶eHªdËr
^ 
§m¶eHªdËr


50 
IFACEMETHODIMP
 
G‘MedŸSšk
(
__d”ef_out
 
IMFMedŸSšk
 **
sšk
);

51 
IFACEMETHODIMP
 
G‘Id’tif›r
(
__out
 
DWORD
 *
id’tif›r
);

52 
IFACEMETHODIMP
 
G‘MedŸTy³HªdËr
(
__d”ef_out
 
IMFMedŸTy³HªdËr
 **
hªdËr
);

53 
IFACEMETHODIMP
 
ProûssSam¶e
(
__š_İt
 
IMFSam¶e
 *
§m¶e
);

54 
IFACEMETHODIMP
 
PÏûM¬k”
(
__š
 
MFSTREAMSINK_MARKER_TYPE
 
m¬k”Ty³
, __š cÚ¡ 
PROPVARIANT
 * 
m¬k”V®ue
, __š cÚ¡ PROPVARIANT * 
cÚ‹xtV®ue
);

55 
IFACEMETHODIMP
 
Flush
();

61 
IFACEMETHODIMP
 
G‘Ev’t
(
__š
 
DWORD
 
æags
, 
__d”ef_out
 
IMFMedŸEv’t
 **
ev’t
);

62 
IFACEMETHODIMP
 
BegšG‘Ev’t
(
__š
 
IMFAsyncC®lback
 *
ÿÎback
, 
__š_İt
 
IUnknown
 *
¡©e
);

63 
IFACEMETHODIMP
 
EndG‘Ev’t
(
__š
 
IMFAsyncResuÉ
 *
»suÉ
, 
__d”ef_out
 
IMFMedŸEv’t
 **
ev’t
);

64 
IFACEMETHODIMP
 
QueueEv’t
(
__š
 
MedŸEv’tTy³
 
m‘
, __š 
REFGUID
 
ex‹ndedTy³
, __š 
HRESULT
 
¡©us
, 
__š_İt
 cÚ¡ 
PROPVARIANT
 *
v®ue
);

70 
IFACEMETHODIMP
 
IsMedŸTy³SuµÜ‹d
(
__š
 
IMFMedŸTy³
 *
medŸTy³
, 
__d”ef_out_İt
 IMFMedŸTy³ **
şo£¡MedŸTy³
);

71 
IFACEMETHODIMP
 
G‘MedŸTy³CouÁ
(
__out
 
DWORD
 *
ty³CouÁ
);

72 
IFACEMETHODIMP
 
G‘MedŸTy³ByIndex
(
__š
 
DWORD
 
šdex
, 
__d”ef_out
 
IMFMedŸTy³
 **
medŸTy³
);

73 
IFACEMETHODIMP
 
S‘Cu¼’tMedŸTy³
(
__š
 
IMFMedŸTy³
 *
medŸTy³
);

74 
IFACEMETHODIMP
 
G‘Cu¼’tMedŸTy³
(
__d”ef_out_İt
 
IMFMedŸTy³
 **
medŸTy³
);

75 
IFACEMETHODIMP
 
G‘MajÜTy³
(
__out
 
GUID
 *
majÜTy³
);

81 
IÁ”ÇlS‘Cu¼’tMedŸTy³
(
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸTy³
>& 
medŸTy³
);

82 
Reque¡Sam¶e
();

83 
Shutdown
();

85 
	g´iv©e
:

87 
boŞ
 
_IsMedŸTy³SuµÜ‹d
(
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸTy³
>& 
mt
) const;

88 
_Upd©eMedŸTy³
(
__š
 cÚ¡ 
MW
::
ComPŒ
<
IMFMedŸTy³
>& 
mt
);

90 
_V”ifyNÙShutdown
()

92 ià(
	g_shutdown
)

94 
CHK
(
MF_E_SHUTDOWN
);

98 
	gMW
::
ComPŒ
<
IMFMedŸSšk
> 
_sšk
;

99 
	gMW
::
ComPŒ
<
IMFMedŸEv’tQueue
> 
_ev’tQueue
;

100 
	gMW
::
ComPŒ
<
IMFMedŸTy³
> 
_curMT
;

102 
	gMedŸSam¶eHªdËr
^ 
	g_§m¶eHªdËr
;

104 
GUID
 
	g_majÜTy³
;

105 
GUID
 
	g_subTy³
;

106 
	g_width
;

107 
	g_height
;

108 
DWORD
 
	g_id
;

109 
boŞ
 
	g_shutdown
;

111 
	gMWW
::
SRWLock
 
_lock
;

	@cap_winrt_bridge.cpp

27 
	~"İ’cv2\videoio\ÿp_wš¹.hµ
"

28 
	~"ÿp_wš¹_ÿ±u».hµ
"

29 
	~"ÿp_wš¹_bridge.hµ
"

30 
	~"ÿp_wš¹_video.hµ
"

32 
usšg
 
Çme¥aû
 
	gWšdows
::
Found©iÚ
;

33 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
C­tu»
;

34 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
MedŸPrİ”t›s
;

35 
usšg
 
Çme¥aû
 
	gWšdows
::
Deviûs
::
Enum”©iÚ
;

37 
usšg
 
Çme¥aû
 
	gWšdows
::
UI
::
Xaml
::
MedŸ
::
Imagšg
;

38 
usšg
 
Çme¥aû
 
	gMiüosoá
::
WRL
;

40 
usšg
 
Çme¥aû
 
	gPÏtfÜm
;

41 
usšg
 
	gÇme¥aû
 ::
CÚcu¼’cy
;

43 
usšg
 
	gÇme¥aû
 ::
¡d
;

48 
	gVideoioBridge
::
	$»que¡FÜUIth»adAsync
(
aùiÚ
)

50 
»pÜ‹r
.
	`»pÜt
(
aùiÚ
);

51 
	}
}

53 
	gVideoioBridge
& VideoioBridge::
	$g‘In¡ªû
()

55 
VideoioBridge
 
š¡ªû
;

56  
š¡ªû
;

57 
	}
}

59 
	gVideoioBridge
::
	$sw­IÅutBufãrs
()

63 
	`sw­
(
backIÅutPŒ
, 
äÚtIÅutPŒ
);

69 
	}
}

71 
	gVideoioBridge
::
	$sw­OuutBufãrs
()

73 
lock_gu¬d
<
mu‹x
> 
	`lock
(
ouutBufãrMu‹x
);

74 
	`sw­
(
äÚtOuutBufãr
, 
backOuutBufãr
);

75 
	}
}

77 
	gVideoioBridge
::
	$®loÿ‹OuutBufãrs
()

79 
äÚtOuutBufãr
 = 
»f
 
Ãw
 
	`Wr™—bËB™m­
(
width
, 
height
);

80 
backOuutBufãr
 = 
»f
 
Ãw
 
	`Wr™—bËB™m­
(
width
, 
height
);

81 
	}
}

84 
	gVideoioBridge
::
	$®loÿ‹Bufãrs
(
width
, 
height
)

87 
äÚtIÅutM©
.
	`ü—‹
(
height
, 
width
, 
CV_8UC3
);

88 
backIÅutM©
.
	`ü—‹
(
height
, 
width
, 
CV_8UC3
);

90 
äÚtIÅutPŒ
 = 
äÚtIÅutM©
.
	`±r
(0);

91 
backIÅutPŒ
 = 
backIÅutM©
.
	`±r
(0);

93 
	`®loÿ‹OuutBufãrs
();

94 
	}
}

97 
boŞ
 
	gVideoioBridge
::
	$İ’Cam”a
()

100 
	`®loÿ‹Bufãrs
(
width
, 
height
);

103 ià(!
Video
::
	`g‘In¡ªû
().
	`isS¹ed
())

105 
Video
::
	`g‘In¡ªû
().
	`š™G¿bb”
(
deviûIndex
, 
width
, 
height
);

106  
Œue
;

109  
çl£
;

110 
	}
}

113 
	gVideoioBridge
::
	$upd©eF¿meCÚš”
()

116 
Video
::
	`g‘In¡ªû
().
	`CİyOuut
();

119 
cvImage
->
Sourû
 = 
backOuutBufãr
;

120 
	}
}

122 
	gVideoioBridge
::
	$imshow
()

124 
	`sw­OuutBufãrs
();

125 
	`»que¡FÜUIth»adAsync
(
cv
::
UPDATE_IMAGE_ELEMENT
);

126 
	}
}

128 
	gVideoioBridge
::
	$g‘DeviûIndex
()

130  
deviûIndex
;

131 
	}
}

133 
	gVideoioBridge
::
	$£tDeviûIndex
(
šdex
)

135 
deviûIndex
 = 
šdex
;

136 
	}
}

138 
	gVideoioBridge
::
	$g‘Width
()

140  
width
;

141 
	}
}

143 
	gVideoioBridge
::
	$g‘Height
()

145  
height
;

146 
	}
}

148 
	gVideoioBridge
::
	$£tWidth
(
_width
)

150 
width
 = 
_width
;

151 
	}
}

153 
	gVideoioBridge
::
	$£tHeight
(
_height
)

155 
height
 = 
_height
;

156 
	}
}

	@cap_winrt_bridge.hpp

27 #´agm¨
Úû


32 
	~<µl.h
>

33 
	~<µÉasks.h
>

34 
	~<cÚüt.h
>

35 
	~<age.h
>

36 
	~<İ’cv2\cÜe.hµ
>

38 
	~<mu‹x
>

39 
	~<memÜy
>

40 
	~<©omic
>

41 
	~<funùiÚ®
>

46 şas 
	cVideoioBridge


48 
	mpublic
:

50 
VideoioBridge
& 
g‘In¡ªû
();

53 
£tR•Ü‹r
(
CÚcu¼’cy
::
´og»ss_»pÜ‹r
<> 
´
è{ 
»pÜ‹r
 =…r; }

56 
»que¡FÜUIth»adAsync
(
aùiÚ
);

59 
imshow
( );

60 
sw­IÅutBufãrs
();

61 
®loÿ‹OuutBufãrs
();

62 
sw­OuutBufãrs
();

63 
upd©eF¿meCÚš”
();

64 
boŞ
 
İ’Cam”a
();

65 
®loÿ‹Bufãrs
(
width
, 
height
);

67 
g‘DeviûIndex
();

68 
£tDeviûIndex
(
šdex
);

69 
g‘Width
();

70 
£tWidth
(
width
);

71 
g‘Height
();

72 
£tHeight
(
height
);

74 
	g¡d
::
©omic
<
boŞ
> 
bIsF¿meNew
;

75 
	g¡d
::
mu‹x
 
šputBufãrMu‹x
;

76 * 
	gäÚtIÅutPŒ
;

77 * 
	gbackIÅutPŒ
;

78 
	g¡d
::
©omic
<> 
äameCouÁ”
;

79 
	gcu¼’tF¿me
;

81 
	g¡d
::
mu‹x
 
ouutBufãrMu‹x
;

82 
	gWšdows
::
UI
::
Xaml
::
MedŸ
::
Imagšg
::
Wr™—bËB™m­
^ 
äÚtOuutBufãr
;

83 
	gWšdows
::
UI
::
Xaml
::
MedŸ
::
Imagšg
::
Wr™—bËB™m­
^ 
backOuutBufãr
;

84 
	gWšdows
::
UI
::
Xaml
::
CÚŒŞs
::
Image
 ^
cvImage
;

86 
	g´iv©e
:

88 
	$VideoioBridge
() {

89 
deviûIndex
 = 0;

90 
width
 = 640;

91 
height
 = 480;

92 
deviûR—dy
 = 
çl£
;

93 
bIsF¿meNew
 = 
çl£
;

94 
cu¼’tF¿me
 = 0;

95 
äameCouÁ”
 = 0;

96 
	}
};

99 
VideoioBridge
(VideoioBridge const &);

100 
	gİ”©Ü
=(cÚ¡ 
VideoioBridge
 &);

102 
	g¡d
::
©omic
<
boŞ
> 
deviûR—dy
;

103 
	gCÚcu¼’cy
::
´og»ss_»pÜ‹r
<> 
»pÜ‹r
;

113 
	gcv
::
M©
 
äÚtIÅutM©
;

114 
	gcv
::
M©
 
backIÅutM©
;

116 
	gdeviûIndex
, 
	gwidth
, 
	gheight
;

	@cap_winrt_capture.cpp

28 
	~"´ecomp.hµ
"

29 
	~"ÿp_wš¹_ÿ±u».hµ
"

30 
	~"ÿp_wš¹_bridge.hµ
"

31 
	~"ÿp_wš¹_video.hµ
"

32 
	~<İ’cv2\videoio\ÿp_wš¹.hµ
>

34 
usšg
 
Çme¥aû
 
	gWšdows
::
Found©iÚ
;

35 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
C­tu»
;

36 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
MedŸPrİ”t›s
;

37 
usšg
 
Çme¥aû
 
	gWšdows
::
Deviûs
::
Enum”©iÚ
;

39 
usšg
 
Çme¥aû
 
	gPÏtfÜm
;

41 
usšg
 
Çme¥aû
 
	gWšdows
::
UI
::
Xaml
::
MedŸ
::
Imagšg
;

42 
usšg
 
Çme¥aû
 
	gMiüosoá
::
WRL
;

44 
usšg
 
	gÇme¥aû
 ::
¡d
;

46 
Çme¥aû
 
	gcv
 {

50 
	g‹m¶©e
 <
	gty³Çme
 ...
	gArgs
>

51 
wš¹_¡¬tMes§geLoİ
(
¡d
::
funùiÚ
<(
Args
...)>&& 
ÿÎback
, Args... 
¬gs
)

53 autØ
	gasyncTask
 = ::
cÚcu¼’cy
::
ü—‹_async
([=](::cÚcu¼’cy::
´og»ss_»pÜ‹r
<> 
»pÜ‹r
)

55 
VideoioBridge
::
g‘In¡ªû
().
£tR•Ü‹r
(
»pÜ‹r
);

58 
ÿÎback
(
¬gs
...);

61 
	gasyncTask
->
	gProg»ss
 = 
»f
 
Ãw
 
AsyncAùiÚProg»ssHªdËr
<>([=](
IAsyncAùiÚW™hProg»ss
<>^ 
aù
, 
	g´og»ss
)

63 
	gaùiÚ
 = 
´og»ss
;

66 
	gaùiÚ
)

68 
	gOPEN_CAMERA
:

69 
VideoioBridge
::
g‘In¡ªû
().
İ’Cam”a
();

71 
	gCLOSE_CAMERA
:

72 
Video
::
g‘In¡ªû
().
şo£G¿bb”
();

74 
	gUPDATE_IMAGE_ELEMENT
:

75 
VideoioBridge
::
g‘In¡ªû
().
upd©eF¿meCÚš”
();

81 
	g‹m¶©e
 <
	gty³Çme
 ...
	gArgs
>

82 
wš¹_¡¬tMes§geLoİ
(
ÿÎback
(
Args
...), Args... 
¬gs
)

84 
wš¹_¡¬tMes§geLoİ
(
¡d
::
funùiÚ
<(
Args
...)>(
ÿÎback
), 
¬gs
...);

87 
wš¹_ÚVisib™yChªged
(
boŞ
 
visibË
)

89 ià(
	gvisibË
)

91 
	gVideoioBridge
& 
	gbridge
 = 
VideoioBridge
::
g‘In¡ªû
();

94 ià(
	gbridge
.
	gbackIÅutPŒ
 !ğ
nuÎ±r
)

96 ià(
Video
::
g‘In¡ªû
().
isS¹ed
()) ;

98 
	gdeviû
 = 
bridge
.
g‘DeviûIndex
();

99 
	gwidth
 = 
bridge
.
g‘Width
();

100 
	gheight
 = 
bridge
.
g‘Height
();

102 
	gVideo
::
g‘In¡ªû
().
š™G¿bb”
(
deviû
, 
width
, 
height
);

107 
	gVideo
::
g‘In¡ªû
().
şo£G¿bb”
();

111 
wš¹_imshow
()

113 
	gVideoioBridge
::
g‘In¡ªû
().
imshow
();

116 
wš¹_£tF¿meCÚš”
(::
Wšdows
::
UI
::
Xaml
::
CÚŒŞs
::
Image
^ 
image
)

118 
VideoioBridge
::
g‘In¡ªû
().
cvImage
 = 
image
;

123 
	gVideoC­tu»_WšRT
::
VideoC­tu»_WšRT
(
deviû
è: 
¡¬‹d
(
çl£
)

125 
VideoioBridge
::
g‘In¡ªû
().
£tDeviûIndex
(
deviû
);

128 
boŞ
 
	gVideoC­tu»_WšRT
::
isO³Ãd
() const

130  
Œue
;

136 
boŞ
 
	gVideoC­tu»_WšRT
::
g¿bF¿me
()

140 ià(!
¡¬‹d
è 
Œue
;

142 ià(
	gVideoioBridge
::
g‘In¡ªû
().
bIsF¿meNew
)

144  
Œue
;

150  
	gçl£
;

155 
boŞ
 
	gVideoC­tu»_WšRT
::
»Œ›veF¿me
(
chªÃl
, 
cv
::
OuutA¼ay
 
outA¼ay
)

157 ià(!
¡¬‹d
) {

159 
width
, 
	gheight
;

160 
	gwidth
 = 
outA¼ay
.
size
().
width
;

161 
	gheight
 = 
outA¼ay
.
size
().
height
;

162 ià(
	gwidth
 =ğ0è
width
 = 640;

163 ià(
	gheight
 =ğ0è
height
 = 480;

165 
	gVideoioBridge
::
g‘In¡ªû
().
£tWidth
(
width
);

166 
	gVideoioBridge
::
g‘In¡ªû
().
£tHeight
(
height
);

171 
	gVideoioBridge
::
g‘In¡ªû
().
»que¡FÜUIth»adAsync
(
OPEN_CAMERA
);

173 
	g¡¬‹d
 = 
Œue
;

174  
	gçl£
;

177 ià(!
	g¡¬‹d
è 
	gçl£
;

179  
	gVideoioBridge
::
g‘In¡ªû
().
bIsF¿meNew
;

183 
boŞ
 
	gVideoC­tu»_WšRT
::
£tPrİ”ty
(
´İ”ty_id
, 
v®ue
)

185 
	g´İ”ty_id
)

187 
	gCAP_PROP_FRAME_WIDTH
:

188 
size
.
width
 = ()
v®ue
;

190 
	gCAP_PROP_FRAME_HEIGHT
:

191 
size
.
height
 = ()
v®ue
;

194  
çl£
;

196  
	gŒue
;

	@cap_winrt_capture.hpp

27 #´agm¨
Úû


29 
	~"´ecomp.hµ
"

31 
	~<mu‹x
>

32 
	~<memÜy
>

33 
	~<cÚd™iÚ_v¬ŸbË
>

34 
	~<©omic
>

36 
	~<age.h
>

43 
Çme¥aû
 
	gcv
 {

45 şas 
	cVideoC­tu»_WšRT
 : 
public
 
IVideoC­tu»


47 
public
:

48 
VideoC­tu»_WšRT
(è: 
¡¬‹d
(
çl£
) {}

49 
VideoC­tu»_WšRT
(
deviû
);

50 
	gvœtu®
 ~
VideoC­tu»_WšRT
() {}

53 
vœtu®
 
g‘Prİ”ty
() {  0; }

54 
vœtu®
 
boŞ
 
£tPrİ”ty
(, );

55 
vœtu®
 
boŞ
 
g¿bF¿me
();

56 
vœtu®
 
boŞ
 
»Œ›veF¿me
(
chªÃl
, 
cv
::
OuutA¼ay
 
outA¼ay
);

59 
vœtu®
 
g‘C­tu»Domaš
(è{  
	gCAP_WINRT
; }

61 
vœtu®
 
boŞ
 
isO³Ãd
() const;

63 
	g´Ùeùed
:

65 
boŞ
 
¡¬‹d
;

66 
CvSize
 
	gsize
;

67 
	gby‹sP”Pix–
;

68 
	gäameCu¼’t
;

69 
	g¡d
::
©omic
<
boŞ
> 
isF¿meNew
;

	@cap_winrt_video.cpp

27 
	~"ÿp_wš¹_video.hµ
"

29 
	~<µl.h
>

30 
	~<µÉasks.h
>

31 
	~<cÚüt.h
>

32 
	~<age.h
>

34 
	~<©omic
>

35 
	~<futu»
>

36 
	~<veùÜ
>

39 
usšg
 
	gÇme¥aû
 ::
cÚcu¼’cy
;

40 
usšg
 
	gÇme¥aû
 ::
Wšdows
::
Found©iÚ
;

41 
usšg
 
	gÇme¥aû
 ::
¡d
;

43 
usšg
 
Çme¥aû
 
	gMiüosoá
::
WRL
;

44 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
Deviûs
;

45 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
MedŸPrİ”t›s
;

46 
usšg
 
Çme¥aû
 
	gWšdows
::
MedŸ
::
C­tu»
;

47 
usšg
 
Çme¥aû
 
	gWšdows
::
UI
::
Xaml
::
MedŸ
::
Imagšg
;

48 
usšg
 
Çme¥aû
 
	gWšdows
::
Deviûs
::
Enum”©iÚ
;

50 
	~"ÿp_wš¹/C­tu»F¿meG¿bb”.hµ
"

53 #´agm¨
comm’t
(
lib
, "mfplat")

54 #´agm¨
comm’t
(
lib
, "mf")

55 #´agm¨
comm’t
(
lib
, "mfuuid")

57 #ià(
WINAPI_FAMILY
!=
WINAPI_FAMILY_PHONE_APP
è&& !
defšed
(
_M_ARM
)

58 #´agm¨
comm’t
(
lib
, "Shlwapi")

61 
	~"ÿp_wš¹_bridge.hµ
"

63 
	gVideo
::
	$Video
(è{
	}
}

65 
Video
 &Video::
	$g‘In¡ªû
() {

66 
Video
 
v
;

67  
v
;

68 
	}
}

70 
boŞ
 
	gVideo
::
	$isS¹ed
() {

71  
bG¿bb”In™ed
.
	`lßd
();

72 
	}
}

74 
	gVideo
::
	$şo£G¿bb”
() {

76 
m_äameG¿bb”
 = 
nuÎ±r
;

77 
bG¿bb”In™ed
 = 
çl£
;

78 
bG¿bb”In™InProg»ss
 = 
çl£
;

79 
	}
}

82 
boŞ
 
	gVideo
::
	$š™G¿bb”
(
deviû
, 
w
, 
h
) {

84 ià(
bG¿bb”In™ed
 || 
bG¿bb”In™InProg»ss
è 
çl£
;

86 
width
 = 
w
;

87 
height
 = 
h
;

89 
bG¿bb”In™ed
 = 
çl£
;

90 
bG¿bb”In™InProg»ss
 = 
Œue
;

92 
m_deviûID
 = 
deviû
;

94 
	`ü—‹_sk
(
DeviûInfÜm©iÚ
::
	`FšdAÎAsync
(
DeviûCÏss
::
VideoC­tu»
))

95 .
	`th’
([
this
](
sk
<
DeviûInfÜm©iÚCŞËùiÚ
^> 
fšdTask
)

97 
m_deviûs
 = 
fšdTask
.
	`g‘
();

100 ià(()
m_deviûID
 >ğ
m_deviûs
.
	`G‘
()->
Size
)

102 
	`OuutDebugSŒšgA
("Video::initGrabber -‚o video device found\n");

103  
çl£
;

106 autØ
devInfo
 = 
m_deviûs
.
	`G‘
()->
	`G‘At
(
m_deviûID
);

108 autØ
£‰šgs
 = 
»f
 
Ãw
 
	`MedŸC­tu»In™Ÿliz©iÚS‘tšgs
();

109 
£‰šgs
->
SŒ—mšgC­tu»Mode
 = SŒ—mšgC­tu»Mode::
Video
;

110 
£‰šgs
->
VideoDeviûId
 = 
devInfo
->
Id
;

112 autØ
loÿtiÚ
 = 
devInfo
->
Enşosu»LoÿtiÚ
;

113 
bFlImageX
 = 
Œue
;

114 ià(
loÿtiÚ
 !ğ
nuÎ±r
 &&†oÿtiÚ->
Pª–
 =ğ
Wšdows
::
Deviûs
::
Enum”©iÚ
::Pª–::
Back
)

116 
bFlImageX
 = 
çl£
;

119 
m_ÿ±u»
 = 
»f
 
Ãw
 
	`MedŸC­tu»
();

120 
	`ü—‹_sk
(
m_ÿ±u»
->
	`In™ŸlizeAsync
(
£‰šgs
)).
	`th’
([
this
](){

122 autØ
´İs
 = 
§ã_ÿ¡
<
VideoEncodšgPrİ”t›s
^>(
m_ÿ±u»
->
VideoDeviûCÚŒŞËr
->
	`G‘MedŸSŒ—mPrİ”t›s
(
MedŸSŒ—mTy³
::
VideoP»v›w
));

125 
´İs
->
Subty³
 = 
MedŸEncodšgSubty³s
::
Rgb24
; 
by‹sP”Pix–
 = 3;

130 
´İs
->
Width
 = 
width
;

131 
´İs
->
Height
 = 
height
;

133  ::
MedŸ
::
C­tu»F¿meG¿bb”
::
	`C»©eAsync
(
m_ÿ±u»
.
	`G‘
(), 
´İs
);

135 }).
	`th’
([
this
](::
MedŸ
::
C­tu»F¿meG¿bb”
^ 
äameG¿bb”
)

137 
m_äameG¿bb”
 = 
äameG¿bb”
;

138 
bG¿bb”In™ed
 = 
Œue
;

139 
bG¿bb”In™InProg»ss
 = 
çl£
;

141 
	`_G¿bF¿meAsync
(
äameG¿bb”
);

144  
Œue
;

149  
Œue
;

150 
	}
}

153 
	gVideo
::
_G¿bF¿meAsync
(::
MedŸ
::
C­tu»F¿meG¿bb”
^ 
äameG¿bb”
) {

155 
ü—‹_sk
(
äameG¿bb”
->
G‘F¿meAsync
()).
th’
([
this
, f¿meG¿bb”](cÚ¡ 
ComPŒ
<
IMF2DBufãr2
>& 
bufãr
)

158 
BYTE
 *
pbSÿÆše
;

159 
LONG
 
¶P™ch
;

160 
cŞBy‹s
 = 
width
 * 
by‹sP”Pix–
;

161 
CHK
(
bufãr
->
Lock2D
(&
pbSÿÆše
, &
¶P™ch
));

164 ià(
bFlImageX
)

166 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
VideoioBridge
::
g‘In¡ªû
().
šputBufãrMu‹x
);

169 autØ
buf
 = 
VideoioBridge
::
g‘In¡ªû
().
backIÅutPŒ
;

171 
row
 = 0;„ow < 
height
;„ow++)

173 
i
 = 0;

174 
j
 = 
cŞBy‹s
 - 1;

176 
i
 < 
cŞBy‹s
)

180 
buf
[
j
--] = 
pbSÿÆše
[
i
++];

181 
buf
[
j
--] = 
pbSÿÆše
[
i
++];

182 
buf
[
j
--] = 
pbSÿÆše
[
i
++];

184 
pbSÿÆše
 +ğ
¶P™ch
;

185 
buf
 +ğ
cŞBy‹s
;

187 
VideoioBridge
::
g‘In¡ªû
().
bIsF¿meNew
 = 
Œue
;

190 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
VideoioBridge
::
g‘In¡ªû
().
šputBufãrMu‹x
);

193 autØ
buf
 = 
VideoioBridge
::
g‘In¡ªû
().
backIÅutPŒ
;

195 
row
 = 0;„ow < 
height
;„ow++)

202 
i
 = 0; i < 
cŞBy‹s
; i +ğ
by‹sP”Pix–
)

205 
buf
[
i
] = 
pbSÿÆše
[i + 2];

206 
buf
[
i
 + 1] = 
pbSÿÆše
[i + 1];

207 
buf
[
i
 + 2] = 
pbSÿÆše
[i];

215 
pbSÿÆše
 +ğ
¶P™ch
;

216 
buf
 +ğ
cŞBy‹s
;

218 
VideoioBridge
::
g‘In¡ªû
().
bIsF¿meNew
 = 
Œue
;

220 
CHK
(
bufãr
->
UÆock2D
());

222 
VideoioBridge
::
g‘In¡ªû
().
äameCouÁ”
++;

224 ià(
bG¿bb”In™ed
)

226 
_G¿bF¿meAsync
(
äameG¿bb”
);

228 }, 
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_cu¼’t
());

234 
	gVideo
::
	$CİyOuut
() {

236 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
VideoioBridge
::
	`g‘In¡ªû
().
ouutBufãrMu‹x
);

238 autØ
šAr
 = 
VideoioBridge
::
	`g‘In¡ªû
().
äÚtIÅutPŒ
;

239 autØ
outAr
 = 
	`G‘D©a
(
VideoioBridge
::
	`g‘In¡ªû
().
äÚtOuutBufãr
->
Pix–Bufãr
);

241 cÚ¡ 
by‹sP”Pix–
 = 3;

242 autØ
pbSÿÆše
 = 
šAr
;

243 autØ
¶P™ch
 = 
width
 * 
by‹sP”Pix–
;

245 autØ
buf
 = 
outAr
;

246 
cŞBy‹s
 = 
width
 * 4;

249 
row
 = 0;„ow < 
height
;„ow++)

257 
i
 = 0, 
j
 = 0; i < 
¶P™ch
; i +ğ
by‹sP”Pix–
, j += 4)

260 
buf
[
j
] = 
pbSÿÆše
[
i
 + 2];

261 
buf
[
j
 + 1] = 
pbSÿÆše
[
i
 + 1];

262 
buf
[
j
 + 2] = 
pbSÿÆše
[
i
];

263 
buf
[
j
 + 3] = 0xff;

272 
pbSÿÆše
 +ğ
¶P™ch
;

273 
buf
 +ğ
cŞBy‹s
;

275 
VideoioBridge
::
	`g‘In¡ªû
().
äÚtOuutBufãr
->
Pix–Bufãr
->
L’gth
 = 
width
 * 
height
 * 4;

277 
	}
}

280 
boŞ
 
	gVideo
::
	$li¡DeviûsTask
() {

281 
¡d
::
©omic
<
boŞ
> 
	`»ady
(
çl£
);

283 autØ
£‰šgs
 = 
»f
 
Ãw
 
	`MedŸC­tu»In™Ÿliz©iÚS‘tšgs
();

285 
	`ü—‹_sk
(
DeviûInfÜm©iÚ
::
	`FšdAÎAsync
(
DeviûCÏss
::
VideoC­tu»
))

286 .
	`th’
([
this
, &
»ady
](
sk
<
DeviûInfÜm©iÚCŞËùiÚ
^> 
fšdTask
)

288 
m_deviûs
 = 
fšdTask
.
	`g‘
();

300 
»ady
 = 
Œue
;

304 
couÁ
 = 0;

305 !
»ady
)

307 
couÁ
++;

310  
Œue
;

311 
	}
}

314 
boŞ
 
	gVideo
::
	$li¡Deviûs
() {

316 
¡d
::
futu»
<
boŞ
> 
»suÉ
 = std::
	`async
(¡d::
Ïunch
::
async
, &
Video
::
li¡DeviûsTask
, 
this
);

317  
»suÉ
.
	`g‘
();

318 
	}
}

	@cap_winrt_video.hpp

27 #´agm¨
Úû


29 
	~"ÿp_wš¹/C­tu»F¿meG¿bb”.hµ
"

31 
	~<mu‹x
>

32 
	~<memÜy
>

34 şas 
	cVideo
 {

35 
	mpublic
:

38 
boŞ
 
š™G¿bb”
(
deviû
, 
w
, 
h
);

39 
şo£G¿bb”
();

40 
boŞ
 
isS¹ed
();

43 
	mVideo
 &
g‘In¡ªû
();

45 
CİyOuut
();

47 
	m´iv©e
:

49 
Video
();

51 
_G¿bF¿meAsync
(::
MedŸ
::
C­tu»F¿meG¿bb”
^ 
äameG¿bb”
);

53 
boŞ
 
li¡Deviûs
();

55 
	mPÏtfÜm
::
Age
<
Wšdows
::
MedŸ
::
C­tu»
::
MedŸC­tu»
> 
m_ÿ±u»
;

56 
	mPÏtfÜm
::
Age
<
Wšdows
::
Deviûs
::
Enum”©iÚ
::
DeviûInfÜm©iÚCŞËùiÚ
> 
m_deviûs
;

58 ::
MedŸ
::
C­tu»F¿meG¿bb”
^ 
m_äameG¿bb”
;

60 
boŞ
 
li¡DeviûsTask
();

62 
boŞ
 
	mbChoo£Deviû
;

63 
boŞ
 
	mbV”bo£
;

64 
boŞ
 
	mbFlImageX
;

66 
	mm_deviûID
;

67 
	m©‹m±F¿m”©e
;

68 
	m¡d
::
©omic
<
boŞ
> 
bIsF¿meNew
;

69 
	m¡d
::
©omic
<
boŞ
> 
bG¿bb”In™ed
;

70 
	m¡d
::
©omic
<
boŞ
> 
bG¿bb”In™InProg»ss
;

71 
	mwidth
, 
	mheight
;

72 
	mby‹sP”Pix–
;

	@cap_ximea.cpp

1 
	~"´ecomp.hµ
"

3 #ifdeà
WIN32


4 
	~"xiApi.h
"

6 
	~<m3­i/xiApi.h
>

11 şas 
	cCvC­tu»CAM_XIMEA
 : 
public
 
CvC­tu»


13 
public
:

14 
	$CvC­tu»CAM_XIMEA
(è{ 
	`š™
(); }

15 
vœtu®
 ~
	$CvC­tu»CAM_XIMEA
(è{ 
	`şo£
(); 
	}
}

17 
vœtu®
 
boŞ
 
İ’
Ğ
šdex
 );

18 
vœtu®
 
şo£
();

19 
vœtu®
 
	$g‘Prİ”ty
() const;

20 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

21 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

22 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

23 
vœtu®
 
	$g‘C­tu»Domaš
(è{  
CV_CAP_XIAPI
; 
	}
}

25 
	g´iv©e
:

26 
š™
();

27 
”rMsg
(cÚ¡ * 
msg
, 
”rNum
);

28 
»£tCvImage
();

29 
g‘Bµ
();

30 
I¶Image
* 
	gäame
;

32 
HANDLE
 
	ghmv
;

33 
DWORD
 
	gnumDeviûs
;

34 
	gtimeout
;

35 
XI_IMG
 
	gimage
;

40 
CvC­tu»
* 
	$cvC»©eCam”aC­tu»_XIMEA
Ğ
šdex
 )

42 
CvC­tu»CAM_XIMEA
* 
ÿ±u»
 = 
Ãw
 CvCaptureCAM_XIMEA;

44 ifĞ
ÿ±u»
->
	`İ’
Ğ
šdex
 ))

45  
ÿ±u»
;

47 
d–‘e
 
ÿ±u»
;

49 
	}
}

53 
	gCvC­tu»CAM_XIMEA
::
	$š™
()

55 #ià
defšed
 
WIN32
 || defšed 
_WIN32


56 
	`xiG‘Numb”Deviûs
Ğ&
numDeviûs
);

59 ià(
	`xiG‘Numb”Deviûs
Ğ&
numDeviûs
è!ğ
XI_OK
)

61 
	`xiG‘Numb”Deviûs
Ğ&
numDeviûs
);

64 
hmv
 = 
NULL
;

65 
äame
 = 
NULL
;

66 
timeout
 = 0;

67 
	`mem£t
(&
image
, 0, (
XI_IMG
));

68 
	}
}

73 
boŞ
 
	gCvC­tu»CAM_XIMEA
::
	$İ’
Ğ
wIndex
 )

75 
	#HªdËXiResuÉ
(
»s
èiàÔes!=
XI_OK
è
”rÜ
;

	)

77 
mv»t
 = 
XI_OK
;

79 if(
numDeviûs
 == 0)

80  
çl£
;

82 if((
mv»t
 = 
	`xiO³nDeviû
Ğ
wIndex
, &
hmv
)è!ğ
XI_OK
)

84 #ià
defšed
 
WIN32
 || defšed 
_WIN32


85 
	`”rMsg
("O³ÀXI_DEVICE faed", 
mv»t
);

86  
çl£
;

89 if((
mv»t
 = 
	`xiO³nDeviû
Ğ
wIndex
, &
hmv
)è!ğ
XI_OK
)

91 
	`”rMsg
("O³ÀXI_DEVICE faed", 
mv»t
);

92  
çl£
;

97 
width
 = 0;

98 
height
 = 0;

99 
isCŞÜ
 = 0;

102 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AEAG
, 1);

103 
	`HªdËXiResuÉ
(
mv»t
);

105 
mv»t
 = 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_WIDTH
, &
width
);

106 
	`HªdËXiResuÉ
(
mv»t
);

108 
mv»t
 = 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_HEIGHT
, &
height
);

109 
	`HªdËXiResuÉ
(
mv»t
);

111 
mv»t
 = 
	`xiG‘P¬amIÁ
(
hmv
, 
XI_PRM_IMAGE_IS_COLOR
, &
isCŞÜ
);

112 
	`HªdËXiResuÉ
(
mv»t
);

114 if(
isCŞÜ
)

117 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_IMAGE_DATA_FORMAT
, 
XI_RGB24
);

118 
	`HªdËXiResuÉ
(
mv»t
);

121 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AUTO_WB
, 1);

122 
	`HªdËXiResuÉ
(
mv»t
);

125 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(
width
, 
height
), 
IPL_DEPTH_8U
, 3);

130 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_IMAGE_DATA_FORMAT
, 
XI_MONO8
);

131 
	`HªdËXiResuÉ
(
mv»t
);

134 
äame
 = 
	`cvC»©eImage
(
	`cvSize
(
width
, 
height
), 
IPL_DEPTH_8U
, 1);

138 
timeout
 = 10000;

140 
mv»t
 = 
	`xiS¹Acquis™iÚ
(
hmv
);

141 if(
mv»t
 !ğ
XI_OK
)

143 
	`”rMsg
("S¹Acquis™iÚ XI_DEVICE faed", 
mv»t
);

144 
”rÜ
;

146  
Œue
;

148 
”rÜ
:

149 
	`”rMsg
("O³ÀXI_DEVICE faed", 
mv»t
);

150 
	`xiClo£Deviû
(
hmv
);

151 
hmv
 = 
NULL
;

152  
çl£
;

153 
	}
}

157 
	gCvC­tu»CAM_XIMEA
::
	$şo£
()

159 if(
äame
)

160 
	`cvR–—£Image
(&
äame
);

162 if(
hmv
)

164 
	`xiStİAcquis™iÚ
(
hmv
);

165 
	`xiClo£Deviû
(
hmv
);

167 
hmv
 = 
NULL
;

168 
	}
}

172 
boŞ
 
	gCvC­tu»CAM_XIMEA
::
	$g¿bF¿me
()

174 
	`mem£t
(&
image
, 0, (
XI_IMG
));

175 
image
.
size
 = (
XI_IMG
);

176 
mv»t
 = 
	`xiG‘Image
Ğ
hmv
, 
timeout
, &
image
);

178 if(
mv»t
 =ğ
XI_ACQUISITION_STOPED
)

180 
	`xiS¹Acquis™iÚ
(
hmv
);

181 
mv»t
 = 
	`xiG‘Image
(
hmv
, 
timeout
, &
image
);

184 if(
mv»t
 !ğ
XI_OK
)

186 
	`”rMsg
("E¼Ü duršg G‘Image", 
mv»t
);

187  
çl£
;

190  
Œue
;

191 
	}
}

195 
I¶Image
* 
	gCvC­tu»CAM_XIMEA
::
	$»Œ›veF¿me
()

198 
	`»£tCvImage
();

201  
image
.
äm
)

203 
XI_MONO8
 :

204 
XI_RAW8
 : 
	`memıy
Ğ
äame
->
imageD©a
, 
image
.
bp
, image.
width
*image.
height
); ;

205 
XI_MONO16
 :

206 
XI_RAW16
 : 
	`memıy
Ğ
äame
->
imageD©a
, 
image
.
bp
, image.
width
*image.
height
*(
WORD
)); ;

207 
XI_RGB24
 :

208 
XI_RGB_PLANAR
 : 
	`memıy
Ğ
äame
->
imageD©a
, 
image
.
bp
, image.
width
*image.
height
*3); ;

209 
XI_RGB32
 : 
	`memıy
Ğ
äame
->
imageD©a
, 
image
.
bp
, image.
width
*image.
height
*4); ;

212  
äame
;

213 
	}
}

217 
	gCvC­tu»CAM_XIMEA
::
	$»£tCvImage
()

219 
width
 = 0, 
height
 = 0, 
fÜm©
 = 0;

220 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_WIDTH
, &
width
);

221 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_HEIGHT
, &
height
);

222 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_IMAGE_DATA_FORMAT
, &
fÜm©
);

224 ifĞ()
image
.
width
 !ğ
äame
->width || ()image.
height
 !ğäame->heighˆ|| image.
äm
 !ğ(
XI_IMG_FORMAT
)
fÜm©
)

226 if(
äame
è
	`cvR–—£Image
(&frame);

227 
äame
 = 
NULL
;

229  
image
.
äm
)

231 
XI_MONO8
 :

232 
XI_RAW8
 : 
äame
 = 
	`cvC»©eImage
(
	`cvSize
Ğ
image
.
width
, image.
height
), 
IPL_DEPTH_8U
, 1); ;

233 
XI_MONO16
 :

234 
XI_RAW16
 : 
äame
 = 
	`cvC»©eImage
(
	`cvSize
Ğ
image
.
width
, image.
height
), 
IPL_DEPTH_16U
, 1); ;

235 
XI_RGB24
 :

236 
XI_RGB_PLANAR
 : 
äame
 = 
	`cvC»©eImage
(
	`cvSize
Ğ
image
.
width
, image.
height
), 
IPL_DEPTH_8U
, 3); ;

237 
XI_RGB32
 : 
äame
 = 
	`cvC»©eImage
(
	`cvSize
Ğ
image
.
width
, image.
height
), 
IPL_DEPTH_8U
, 4); ;

242 
	`cvZ”o
(
äame
);

243 
	}
}

246 
	gCvC­tu»CAM_XIMEA
::
	$g‘Prİ”ty
Ğ
´İ”ty_id
 ) const

248 if(
hmv
 =ğ
NULL
)

251 
iv®
 = 0;

252 
fv®
 = 0;

254  
´İ”ty_id
 )

257 
CV_CAP_PROP_POS_FRAMES
 :  (è
image
.
näame
;

258 
CV_CAP_PROP_FRAME_WIDTH
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_WIDTH
, &
iv®
);  ival;

259 
CV_CAP_PROP_FRAME_HEIGHT
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_HEIGHT
, &
iv®
);  ival;

260 
CV_CAP_PROP_FPS
 : 
	`xiG‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_FRAMERATE
, &
fv®
);  fval;

261 
CV_CAP_PROP_GAIN
 : 
	`xiG‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_GAIN
, &
fv®
);  fval;

262 
CV_CAP_PROP_EXPOSURE
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_EXPOSURE
, &
iv®
);  ival;

265 
CV_CAP_PROP_XI_DOWNSAMPLING
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_DOWNSAMPLING
, &
iv®
);  ival;

266 
CV_CAP_PROP_XI_DATA_FORMAT
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_IMAGE_DATA_FORMAT
, &
iv®
);  ival;

267 
CV_CAP_PROP_XI_OFFSET_X
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_OFFSET_X
, &
iv®
);  ival;

268 
CV_CAP_PROP_XI_OFFSET_Y
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_OFFSET_Y
, &
iv®
);  ival;

269 
CV_CAP_PROP_XI_TRG_SOURCE
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_TRG_SOURCE
, &
iv®
);  ival;

270 
CV_CAP_PROP_XI_GPI_SELECTOR
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPI_SELECTOR
, &
iv®
);  ival;

271 
CV_CAP_PROP_XI_GPI_MODE
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPI_MODE
, &
iv®
);  ival;

272 
CV_CAP_PROP_XI_GPI_LEVEL
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPI_LEVEL
, &
iv®
);  ival;

273 
CV_CAP_PROP_XI_GPO_SELECTOR
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPO_SELECTOR
, &
iv®
);  ival;

274 
CV_CAP_PROP_XI_GPO_MODE
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPO_MODE
, &
iv®
);  ival;

275 
CV_CAP_PROP_XI_LED_SELECTOR
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_LED_SELECTOR
, &
iv®
);  ival;

276 
CV_CAP_PROP_XI_LED_MODE
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_LED_MODE
, &
iv®
);  ival;

277 
CV_CAP_PROP_XI_AUTO_WB
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AUTO_WB
, &
iv®
);  ival;

278 
CV_CAP_PROP_XI_AEAG
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AEAG
, &
iv®
);  ival;

279 
CV_CAP_PROP_XI_EXP_PRIORITY
 : 
	`xiG‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_EXP_PRIORITY
, &
fv®
);  fval;

280 
CV_CAP_PROP_XI_AE_MAX_LIMIT
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AE_MAX_LIMIT
, &
iv®
);  ival;

281 
CV_CAP_PROP_XI_AG_MAX_LIMIT
 : 
	`xiG‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_AG_MAX_LIMIT
, &
fv®
);  fval;

282 
CV_CAP_PROP_XI_AEAG_LEVEL
 : 
	`xiG‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AEAG_LEVEL
, &
iv®
);  ival;

283 
CV_CAP_PROP_XI_TIMEOUT
 :  
timeout
;

287 
	}
}

291 
boŞ
 
	gCvC­tu»CAM_XIMEA
::
	$£tPrİ”ty
Ğ
´İ”ty_id
, 
v®ue
 )

293 
iv®
 = (è
v®ue
;

294 
fv®
 = (è
v®ue
;

296 
mv»t
 = 
XI_OK
;

298 
´İ”ty_id
)

301 
CV_CAP_PROP_FRAME_WIDTH
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_WIDTH
, 
iv®
); ;

302 
CV_CAP_PROP_FRAME_HEIGHT
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_HEIGHT
, 
iv®
); ;

303 
CV_CAP_PROP_FPS
 : 
mv»t
 = 
	`xiS‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_FRAMERATE
, 
fv®
); ;

304 
CV_CAP_PROP_GAIN
 : 
mv»t
 = 
	`xiS‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_GAIN
, 
fv®
); ;

305 
CV_CAP_PROP_EXPOSURE
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_EXPOSURE
, 
iv®
); ;

307 
CV_CAP_PROP_XI_DOWNSAMPLING
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_DOWNSAMPLING
, 
iv®
); ;

308 
CV_CAP_PROP_XI_DATA_FORMAT
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_IMAGE_DATA_FORMAT
, 
iv®
); ;

309 
CV_CAP_PROP_XI_OFFSET_X
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_OFFSET_X
, 
iv®
); ;

310 
CV_CAP_PROP_XI_OFFSET_Y
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_OFFSET_Y
, 
iv®
); ;

311 
CV_CAP_PROP_XI_TRG_SOURCE
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_TRG_SOURCE
, 
iv®
); ;

312 
CV_CAP_PROP_XI_GPI_SELECTOR
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPI_SELECTOR
, 
iv®
); ;

313 
CV_CAP_PROP_XI_TRG_SOFTWARE
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_TRG_SOFTWARE
, 1); ;

314 
CV_CAP_PROP_XI_GPI_MODE
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPI_MODE
, 
iv®
); ;

315 
CV_CAP_PROP_XI_GPI_LEVEL
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPI_LEVEL
, 
iv®
); ;

316 
CV_CAP_PROP_XI_GPO_SELECTOR
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPO_SELECTOR
, 
iv®
); ;

317 
CV_CAP_PROP_XI_GPO_MODE
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_GPO_MODE
, 
iv®
); ;

318 
CV_CAP_PROP_XI_LED_SELECTOR
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_LED_SELECTOR
, 
iv®
); ;

319 
CV_CAP_PROP_XI_LED_MODE
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_LED_MODE
, 
iv®
); ;

320 
CV_CAP_PROP_XI_AUTO_WB
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AUTO_WB
, 
iv®
); ;

321 
CV_CAP_PROP_XI_MANUAL_WB
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_MANUAL_WB
, 
iv®
); ;

322 
CV_CAP_PROP_XI_AEAG
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AEAG
, 
iv®
); ;

323 
CV_CAP_PROP_XI_EXP_PRIORITY
 : 
mv»t
 = 
	`xiS‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_EXP_PRIORITY
, 
fv®
); ;

324 
CV_CAP_PROP_XI_AE_MAX_LIMIT
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AE_MAX_LIMIT
, 
iv®
); ;

325 
CV_CAP_PROP_XI_AG_MAX_LIMIT
 : 
mv»t
 = 
	`xiS‘P¬amFlßt
Ğ
hmv
, 
XI_PRM_AG_MAX_LIMIT
, 
fv®
); ;

326 
CV_CAP_PROP_XI_AEAG_LEVEL
 : 
mv»t
 = 
	`xiS‘P¬amIÁ
Ğ
hmv
, 
XI_PRM_AEAG_LEVEL
, 
iv®
); ;

327 
CV_CAP_PROP_XI_TIMEOUT
 : 
timeout
 = 
iv®
; ;

330 if(
mv»t
 !ğ
XI_OK
)

332 
	`”rMsg
("S‘…¬am‘”ƒ¼Ü", 
mv»t
);

333  
çl£
;

336  
Œue
;

338 
	}
}

342 
	gCvC­tu»CAM_XIMEA
::
	$”rMsg
(cÚ¡ * 
msg
, 
”rNum
)

344 #ià
defšed
 
WIN32
 || defšed 
_WIN32


345 
buf
[512]="";

346 
	`¥rštf
Ğ
buf
, "% : %d\n", 
msg
, 
”rNum
);

347 
	`OuutDebugSŒšg
(
buf
);

349 
	`årštf
(
¡d”r
, "% : %d\n", 
msg
, 
”rNum
);

351 
	}
}

355 
	gCvC­tu»CAM_XIMEA
::
	$g‘Bµ
()

357  
image
.
äm
)

359 
XI_MONO8
 :

360 
XI_RAW8
 :  1;

361 
XI_MONO16
 :

362 
XI_RAW16
 :  2;

363 
XI_RGB24
 :

364 
XI_RGB_PLANAR
 :  3;

365 
XI_RGB32
 :  4;

369 
	}
}

	@cap_xine.cpp

49 
	~"´ecomp.hµ
"

52 
	#XINE_ENABLE_EXPERIMENTAL_FEATURES


	)

54 
	~<ÿs£¹
>

58 
	~<xše.h
>

62 cÚ¡ *
xše_g‘_homedœ
( );

65 
	sCvC­tu»AVI_XINE


68 
xše_t
 * 
xše
;

69 
xše_¡»am_t
 * 
¡»am
;

70 
xše_video_pÜt_t
 * 
vo_pÜt
;

73 
xše_video_äame_t
 
xše_äame
;

75 
I¶Image
 * 
yuv_äame
;

76 
I¶Image
 * 
bgr_äame
;

79 
CvSize
 
size
;

83 
äame_numb”
;

86 
äame_¿‹
;

89 
äame_du¿tiÚ
;

92 
boŞ
 
£ekabË
;

95 
	tCvC­tu»AVI_XINE
;

99 
	$icvYUY2toBGR
Ğ
CvC­tu»AVI_XINE
 * 
ÿ±u»
 )

101 
ušt8_t
 * 
v
 = 
ÿ±u»
->
xše_äame
.
d©a
;

102 
off£t
;

103  
y
 = 0; y < 
ÿ±u»
->
yuv_äame
->
height
; y++ )

105 
off£t
 = 
y
 * 
ÿ±u»
->
yuv_äame
->
widthS‹p
;

107  
x
 = 0; x < 
ÿ±u»
->
yuv_äame
->
width
; x++, 
off£t
 += 3 )

109 
ÿ±u»
->
yuv_äame
->
imageD©a
[ 
off£t
 + 1 ] = 
v
[ 3 ];

110 
ÿ±u»
->
yuv_äame
->
imageD©a
[ 
off£t
 + 2 ] = 
v
[ 1 ];

111 iàĞ
x
 & 1 )

113 
ÿ±u»
->
yuv_äame
->
imageD©a
[ 
off£t
 ] = 
v
[ 2 ];

114 
v
 += 4;

118 
ÿ±u»
->
yuv_äame
->
imageD©a
[ 
off£t
 ] = 
v
[ 0 ];

124 
	`cvCvtCŞÜ
Ğ
ÿ±u»
->
yuv_äame
, c­tu»->
bgr_äame
, 
CV_YCrCb2BGR
 );

125 
	}
}

129 
	$icvYV12toBGR
Ğ
CvC­tu»AVI_XINE
 * 
ÿ±u»
 )

131 
I¶Image
 * 
yuv
 = 
ÿ±u»
->
yuv_äame
;

132 
w_Y
 = 
ÿ±u»
->
size
.
width
;

133 
h_Y
 = 
ÿ±u»
->
size
.
height
;

135 
w_UV
 = 
w_Y
 >> 1;

137 
size_Y
 = 
w_Y
 * 
h_Y
;

138 
size_UV
 = 
size_Y
 / 4;

140 
lše
 = 
yuv
->
widthS‹p
;

142 
ušt8_t
 * 
addr_Y
 = 
ÿ±u»
->
xše_äame
.
d©a
;

143 
ušt8_t
 * 
addr_U
 = 
addr_Y
 + 
size_Y
;

144 
ušt8_t
 * 
addr_V
 = 
addr_U
 + 
size_UV
;

147  
y
 = 0; y < 
h_Y
; y++ )

149 
off£t
 = 
y
 * 
lše
;

150  
x
 = 0; x < 
w_Y
; x++, 
off£t
 += 3 )

158 
Úe_z”o
 = 
x
 & 1;

159 
addr_U
 +ğ
Úe_z”o
;

160 
addr_V
 +ğ
Úe_z”o
;

162 
yuv
->
imageD©a
[ 
off£t
 ] = *Ğ
addr_Y
++ );

163 
yuv
->
imageD©a
[ 
off£t
 + 1 ] = *
addr_U
;

164 
yuv
->
imageD©a
[ 
off£t
 + 2 ] = *
addr_V
;

167 iàĞ
y
 & 1 )

169 
addr_U
 -ğ
w_UV
;

170 
addr_V
 -ğ
w_UV
;

175 
	`cvCvtCŞÜ
Ğ
ÿ±u»
->
yuv_äame
, c­tu»->
bgr_äame
, 
CV_YCrCb2BGR
 );

176 
	}
}

178 
	$icvClo£AVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
 )

180 
	`xše_ä“_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 );

182 iàĞ
ÿ±u»
->
yuv_äame
 ) 
	`cvR–—£Image
( &capture->yuv_frame );

183 iàĞ
ÿ±u»
->
bgr_äame
 ) 
	`cvR–—£Image
( &capture->bgr_frame );

185 
	`xše_şo£
Ğ
ÿ±u»
->
¡»am
 );

188 iàĞ
ÿ±u»
->
vo_pÜt
 ) 
	`xše_şo£_video_driv”
Ğÿ±u»->
xše
, capture->vo_port );

190 
	`xše_ex™
Ğ
ÿ±u»
->
xše
 );

191 
	}
}

197 
	$icvCheckS“kAVI_XINE
Ğ
CvC­tu»AVI_XINE
 * 
ÿ±u»
 )

199 
	`OPENCV_ASSERT
 ( 
ÿ±u»
, "icvCheckSeekAVI_XINE( CvCaptureAVI_XINE* )", "illegal capture");

200 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

202 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

205 #iâdeà
NDEBUG


206 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvCheckSeekAVI_XINE ... start\n" );

210 
xše_video_äame_t
 
tmp
;

212 
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, 0, 300 );

214 
	`xše_g‘_Ãxt_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &
tmp
 );

216 
ÿ±u»
->
£ekabË
 = ( 
tmp
.
äame_numb”
 != 0 );

218 
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, 0, 0 );

220 
	`xše_ä“_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &
tmp
 );

222 #iâdeà
NDEBUG


223 iàĞ
ÿ±u»
->
£ekabË
 )

224 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvCheckSeekAVI_XINE: Input is seekable, using XINE seek implementation.\n" );

226 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvCheckSeekAVI_XINE: Input is NOT seekable, using fallback function.\n" );

228 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvCheckSeekAVI_XINE ...ƒnd\n" );

230 
	}
}

233 
	$icvO³nAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, cÚ¡ * 
f’ame
 )

235 #iâdeà
NDEBUG


236 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvOpenAVI_XINE ... start\n" );

239 
cÚfigfe
[ 2048 ];

241 
ÿ±u»
->
xše
 = 
	`xše_Ãw
();

242 
	`¥rštf
Ğ
cÚfigfe
, "%s%s", 
	`xše_g‘_homedœ
(), "/.xine/config" );

244 
	`xše_cÚfig_lßd
Ğ
ÿ±u»
->
xše
, 
cÚfigfe
 );

245 
	`xše_š™
Ğ
ÿ±u»
->
xše
 );

247 
	`xše_’gše_£t_·¿m
Ğ
ÿ±u»
->
xše
, 0, 0 );

248 
ÿ±u»
->
vo_pÜt
 = 
	`xše_Ãw_äameg¿b_video_pÜt
Ğÿ±u»->
xše
 );

249 iàĞ
ÿ±u»
->
vo_pÜt
 =ğ
NULL
 )

251 
	`´štf
( "(ERROR)icvOpenAVI_XINE(): Unableo initialize video driver.\n" );

255 
ÿ±u»
->
¡»am
 = 
	`xše_¡»am_Ãw
Ğÿ±u»->
xše
, 
NULL
, c­tu»->
vo_pÜt
 );

257 iàĞ!
	`xše_İ’
Ğ
ÿ±u»
->
¡»am
, 
f’ame
 ) )

259 
	`´štf
Ğ"(ERROR)icvO³nAVI_XINE(): UÇbËØİ’ sourû '%s'\n", 
f’ame
 );

263 
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, 0, 0 );

267 
ÿ±u»
->
äame_numb”
 = 0;

269 iàĞ!
	`xše_g‘_Ãxt_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 ) )

271 #iâdeà
NDEBUG


272 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvOpenAVI_XINE ... failed!\n" );

277 
ÿ±u»
->
size
 = 
	`cvSize
Ğÿ±u»->
xše_äame
.
width
, c­tu»->xše_äame.
height
 );

278 
ÿ±u»
->
yuv_äame
 = 
	`cvC»©eImage
Ğÿ±u»->
size
, 
IPL_DEPTH_8U
, 3 );

279 
ÿ±u»
->
bgr_äame
 = 
	`cvC»©eImage
Ğÿ±u»->
size
, 
IPL_DEPTH_8U
, 3 );

281 
	`xše_ä“_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 );

282 
ÿ±u»
->
xše_äame
.
d©a
[ 0 ] = 0;

284 
	`icvCheckS“kAVI_XINE
Ğ
ÿ±u»
 );

286 
ÿ±u»
->
äame_du¿tiÚ
 = 
	`xše_g‘_¡»am_šfo
Ğÿ±u»->
¡»am
, 
XINE_STREAM_INFO_FRAME_DURATION
 ) / 90.;

287 
ÿ±u»
->
äame_¿‹
 = 1000 / c­tu»->
äame_du¿tiÚ
;

289 #iâdeà
NDEBUG


290 
	`årštf
Ğ
¡d”r
, "(DEBUGèäame_du¿tiÚ = %f, f¿m”©ğ%f\n", 
ÿ±u»
->
äame_du¿tiÚ
, c­tu»->
äame_¿‹
 );

293 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
yuv_äame
,

296 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
bgr_äame
,

299 #iâdeà
NDEBUG


300 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvOpenAVI_XINE ...ƒnd\n" );

303 
	}
}

306 
	$icvG¿bF¿meAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
 )

308 #iâdeà
NDEBUG


309 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvGrabFrameAVI_XINE ... start\n" );

312 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

314 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

317 
»s
 = 
	`xše_g‘_Ãxt_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 );

320 iàĞ
»s
 ) 
ÿ±u»
->
äame_numb”
++;

322 #iâdeà
NDEBUG


323 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvGrabFrameAVI_XINE ...ƒnd\n" );

325  
»s
;

326 
	}
}

329 cÚ¡ 
I¶Image
* 
	$icvR‘r›veF¿meAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, )

331 #iâdeà
NDEBUG


332 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvRetrieveFrameAVI_XINE ... start\n" );

335 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

337 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

339 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

343 
»s
 = 0;

344 iàĞ
ÿ±u»
->
xše_äame
.
d©a
 == 0 )

346 
»s
 = 
	`icvG¿bF¿meAVI_XINE
Ğ
ÿ±u»
 );

350 
»s
 = 1;

353 iàĞ
»s
 )

355  
ÿ±u»
->
xše_äame
.
cŞÜ¥aû
 )

357 
XINE_IMGFMT_YV12
: 
	`icvYV12toBGR
Ğ
ÿ±u»
 );

358 #iâdeà
NDEBUG


359 
	`´štf
( "(DEBUG)icvRetrieveFrameAVI_XINE: converted YV12o BGR.\n" );

363 
XINE_IMGFMT_YUY2
: 
	`icvYUY2toBGR
Ğ
ÿ±u»
 );

364 #iâdeà
NDEBUG


365 
	`´štf
( "(DEBUG)icvRetrieveFrameAVI_XINE: converted YUY2o BGR.\n" );

368 
XINE_IMGFMT_XVMC
: 
	`´štf
( "(ERROR)icvRetrieveFrameAVI_XINE: XVMC format‚ot supported!\n" );

371 
XINE_IMGFMT_XXMC
: 
	`´štf
( "(ERROR)icvRetrieveFrameAVI_XINE: XXMC format‚ot supported!\n" );

374 : 
	`´štf
( "(ERROR)icvRetrieveFrameAVI_XINE: unknown color/pixel format!\n" );

378 
	`xše_ä“_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 );

379 
ÿ±u»
->
xše_äame
.
d©a
 = 0;

381 #iâdeà
NDEBUG


382 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvRetrieveFrameAVI_XINE ...ƒnd\n" );

384  
ÿ±u»
->
bgr_äame
;

387 #iâdeà
NDEBUG


388 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvRetrieveFrameAVI_XINE ... failed!\n" );

391 
	}
}

399 
	$icvOldS“kF¿meAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, 
f
 )

401 #iâdeà
NDEBUG


402 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvOldSeekFrameAVI_XINE ... start\n" );

405 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

407 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

409 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

417 iàĞ
f
 =ğ
ÿ±u»
->
äame_numb”
 )

419 #iâdeà
NDEBUG


420 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvOldSeekFrameAVI_XINE ...ƒnd\n" );

426 iàĞ
f
 > 
ÿ±u»
->
äame_numb”
 )

428  ;
ÿ±u»
->
äame_numb”
 < 
f
;capture->frame_number++ )

430 iàĞ!
	`xše_g‘_Ãxt_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 ) )

432 
ÿ±u»
->
äame_numb”
--;

437 
	`xše_ä“_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 );

445 
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, 0, 0 );

447  
ÿ±u»
->
äame_numb”
 = 0; c­tu»->äame_numb” < 
f
; capture->frame_number++ )

449 iàĞ!
	`xše_g‘_Ãxt_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 ) )

451 
ÿ±u»
->
äame_numb”
--;

456 
	`xše_ä“_video_äame
Ğ
ÿ±u»
->
vo_pÜt
, &ÿ±u»->
xše_äame
 );

461 #iâdeà
NDEBUG


462 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvOldSeekFrameAVI_XINE ...ƒnd\n" );

464  ( 
f
 =ğ
ÿ±u»
->
äame_numb”
 ) ? 1 : 0;

465 
	}
}

468 
	$icvS“kF¿meAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, 
f
 )

470 #iâdeà
NDEBUG


471 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ... start\n" );

474 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

476 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

478 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

485 iàĞ
ÿ±u»
->
£ekabË
 )

489 
Ãw_time
 = ( èĞĞ
f
 + 1 ) * ( è
ÿ±u»
->
äame_du¿tiÚ
 );

491 #iâdeà
NDEBUG


492 
	`årštf
Ğ
¡d”r
, "(DEBUG) calling xine_play()" );

494 iàĞ
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, 0, 
Ãw_time
 ) )

496 #iâdeà
NDEBUG


497 
	`årštf
Ğ
¡d”r
, "ok\n" );

498 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ...ƒnd\n" );

500 
ÿ±u»
->
äame_numb”
 = 
f
;

505 #iâdeà
NDEBUG


506 
	`årštf
Ğ
¡d”r
, "failed\n" );

507 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ... failed\n" );

514 #iâdeà
NDEBUG


515 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ...ƒnd\n" );

517  
	`icvOldS“kF¿meAVI_XINE
Ğ
ÿ±u»
, 
f
 );

519 
	}
}

522 
	$icvS“kTimeAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, 
t
 )

524 #iâdeà
NDEBUG


525 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekTimeAVI_XINE ... start\n" );

528 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

530 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

532 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

535 #iâdeà
NDEBUG


536 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekTimeAVI_XINE ... start\n" );

543 iàĞ
ÿ±u»
->
£ekabË
 )

546 iàĞ
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, 0, 
t
 ) )

548 
ÿ±u»
->
äame_numb”
 = ( èĞĞè
t
 * c­tu»->
äame_¿‹
 / 1000 );

549 #iâdeà
NDEBUG


550 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ...ƒnd\n" );

556 #iâdeà
NDEBUG


557 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ... failed!\n" );

564 
Ãw_äame
 = ( èĞĞè
t
 * 
ÿ±u»
->
äame_¿‹
 / 1000 );

565 #iâdeà
NDEBUG


566 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekFrameAVI_XINE ....end\n" );

568  
	`icvOldS“kF¿meAVI_XINE
Ğ
ÿ±u»
, 
Ãw_äame
 );

570 
	}
}

573 
	$icvS“kR©ioAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, 
¿tio
 )

575 #iâdeà
NDEBUG


576 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekRatioAVI_XINE ... start\n" );

579 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

581 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

583 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

591 iàĞ
¿tio
 > 1 ||„atio < 0 )  0;

593 iàĞ
ÿ±u»
->
£ekabË
 )

596 
pos_t
, 
pos_l
, 
Ëngth
;

597 
	`xše_g‘_pos_Ëngth
Ğ
ÿ±u»
->
¡»am
, &
pos_l
, &
pos_t
, &
Ëngth
 );

598 
	`årštf
Ğ
¡d”r
, "¿tiØÚ G‘Prİ”ty(): %d\n", 
pos_l
 );

601 iàĞ
	`xše_¶ay
Ğ
ÿ±u»
->
¡»am
, ()(
¿tio
*()
Ëngth
), 0 ) )

603 
ÿ±u»
->
äame_numb”
 = ( èĞ
¿tio
*
Ëngth
 / c­tu»->
äame_du¿tiÚ
 );

607 #iâdeà
NDEBUG


608 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekRatioAVI_XINE ... failed!\n" );

616 
	`årštf
Ğ
¡d”r
, "icvSeekRatioAVI_XINE(): Seek‚ot supported by stream !\n" );

617 
	`årštf
Ğ
¡d”r
, "icvSeekRatioAVI_XINE(): (seek in stream with NO seek support NOT implemented...yet!)\n" );

618 #iâdeà
NDEBUG


619 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekRatioAVI_XINE ... failed!\n" );

624 #iâdeà
NDEBUG


625 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSeekRatioAVI_XINE ...ƒnd!\n" );

628 
	}
}

631 
	$icvG‘Prİ”tyAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
, 
´İ”ty_id
 )

633 #iâdeà
NDEBUG


634 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvGetPropertyAVI_XINE ... start\n" );

637 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

639 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

641 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

643 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
xše
,

645 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
bgr_äame
,

652 
pos_t
, 
pos_l
, 
Ëngth
;

653 
	`xše_g‘_pos_Ëngth
Ğ
ÿ±u»
->
¡»am
, &
pos_l
, &
pos_t
, &
Ëngth
 );

654 
	`årštf
Ğ
¡d”r
, "¿tiØÚ G‘Prİ”ty(): %i\n", 
pos_l
 );

656  
´İ”ty_id
 )

659 
CV_CAP_PROP_POS_MSEC
:

660 iàĞ!
ÿ±u»
->
£ekabË
 )

662 
	`årštf
Ğ
¡d”r
, "(ERROR) GetPropertyAVI_XINE(CV_CAP_PROP_POS_MSEC:\n" );

663 
	`årštf
Ğ
¡d”r
, " Stream is NOT seekable, so…osition info may NOT be valid !!\n" );

665  
pos_t
;

668 
CV_CAP_PROP_POS_FRAMES
:

670  
ÿ±u»
->
äame_numb”
;

674 
CV_CAP_PROP_POS_AVI_RATIO
:

675 iàĞ!
ÿ±u»
->
£ekabË
 )

677 
	`årštf
Ğ
¡d”r
, "(ERROR) GetPropertyAVI_XINE(CV_CAP_PROP_POS_AVI_RATIO:\n" );

678 
	`årštf
Ğ
¡d”r
, " Stream is NOT seekable, so„atio info may NOT be valid !!\n" );

680 iàĞ
Ëngth
 == 0 ) ;

681  
pos_l
 / 65535;

685 
CV_CAP_PROP_FRAME_WIDTH
:

686  
ÿ±u»
->
size
.
width
;

689 
CV_CAP_PROP_FRAME_HEIGHT
:

690  
ÿ±u»
->
size
.
height
;

693 
CV_CAP_PROP_FPS
:

694 iàĞ!
ÿ±u»
->
£ekabË
 )

696 
	`årštf
Ğ
¡d”r
, "(ERROR) GetPropertyAVI_XINE(CV_CAP_PROP_FPS:\n" );

697 
	`årštf
Ğ
¡d”r
, " Stream is NOT seekable, so FPS info may NOT be valid !!\n" );

699  
ÿ±u»
->
äame_¿‹
;

702 
CV_CAP_PROP_FOURCC
:

703  ( è
	`xše_g‘_¡»am_šfo
Ğ
ÿ±u»
->
¡»am
, 
XINE_STREAM_INFO_VIDEO_FOURCC
 );

706 #iâdeà
NDEBUG


707 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvGetPropertyAVI_XINE ... failed!\n" );

711 
	}
}

714 
	$icvS‘Prİ”tyAVI_XINE
Ğ
CvC­tu»AVI_XINE
* 
ÿ±u»
,

715 
´İ”ty_id
, 
v®ue
 )

717 #iâdeà
NDEBUG


718 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSetPropertyAVI_XINE ... start\n" );

721 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

723 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
¡»am
,

725 
	`OPENCV_ASSERT
 ( 
ÿ±u»
->
vo_pÜt
,

732 #iâdeà
NDEBUG


733 
	`årštf
Ğ
¡d”r
, "(DEBUGèicvS‘Prİ”tyAVI_XINE: s“kšgØv®u%à... ", 
v®ue
 );

736  
´İ”ty_id
 )

739 
CV_CAP_PROP_POS_MSEC
:

740  
	`icvS“kTimeAVI_XINE
Ğ
ÿ±u»
, ( è
v®ue
 );

743 
CV_CAP_PROP_POS_FRAMES
:

744  
	`icvS“kF¿meAVI_XINE
Ğ
ÿ±u»
, ( è
v®ue
 );

748 
CV_CAP_PROP_POS_AVI_RATIO
:

749  
	`icvS“kR©ioAVI_XINE
Ğ
ÿ±u»
, 
v®ue
 );

752 #iâdeà
NDEBUG


753 
	`årštf
Ğ
¡d”r
, "(DEBUG) icvSetPropertyAVI_XINE ... failed!\n" );

758 
	}
}

761 
CvC­tu»AVI_XINE
* 
	$icvC­tu»FromFe_XINE
ĞcÚ¡ * 
f’ame
 )

764 
CvC­tu»AVI_XINE
 * 
ÿ±u»
 = ( CvC­tu»AVI_XINE* ) 
	`cvAÎoc
 (  ( CvCaptureAVI_XINE ) );

765 
	`mem£t
Ğ
ÿ±u»
, 0,  ( 
CvC­tu»AVI_XINE
 ) );

768 iàĞ!
	`icvO³nAVI_XINE
Ğ
ÿ±u»
, 
f’ame
 ) )

771 
	`OPENCV_ASSERT
 ( 
ÿ±u»
,

774  
ÿ±u»
;

776 
	}
}

780 şas 
	cCvC­tu»AVI_XINE_CPP
 : 
public
 
CvC­tu»


782 
public
:

783 
	$CvC­tu»AVI_XINE_CPP
(è{ 
ÿ±u»XINE
 = 0; }

784 
vœtu®
 ~
	$CvC­tu»AVI_XINE_CPP
(è{ 
	`şo£
(); 
	}
}

786 
vœtu®
 
boŞ
 
İ’
ĞcÚ¡ * 
f’ame
 );

787 
vœtu®
 
şo£
();

789 
vœtu®
 
	$g‘Prİ”ty
() const;

790 
vœtu®
 
boŞ
 
	`£tPrİ”ty
(, );

791 
vœtu®
 
boŞ
 
	`g¿bF¿me
();

792 
vœtu®
 
I¶Image
* 
	`»Œ›veF¿me
();

793 
´Ùeùed
:

795 
CvC­tu»AVI_XINE
* 
ÿ±u»XINE
;

796 
	}
};

798 
boŞ
 
	gCvC­tu»AVI_XINE_CPP
::
	$İ’
ĞcÚ¡ * 
f’ame
 )

800 
	`şo£
();

801 
ÿ±u»XINE
 = 
	`icvC­tu»FromFe_XINE
(
f’ame
);

802  
ÿ±u»XINE
 != 0;

803 
	}
}

805 
	gCvC­tu»AVI_XINE_CPP
::
	$şo£
()

807 ifĞ
ÿ±u»XINE
 )

809 
	`icvClo£AVI_XINE
Ğ
ÿ±u»XINE
 );

810 
	`cvF»e
Ğ&
ÿ±u»XINE
 );

812 
	}
}

814 
boŞ
 
	gCvC­tu»AVI_XINE_CPP
::
	$g¿bF¿me
()

816  
ÿ±u»XINE
 ? 
	`icvG¿bF¿meAVI_XINE
Ğÿ±u»XINE ) !ğ0 : 
çl£
;

817 
	}
}

819 
I¶Image
* 
	gCvC­tu»AVI_XINE_CPP
::
	$»Œ›veF¿me
()

821  
ÿ±u»XINE
 ? (
I¶Image
*)
	`icvR‘r›veF¿meAVI_XINE
( captureXINE, 0 ) : 0;

822 
	}
}

824 
	gCvC­tu»AVI_XINE_CPP
::
	$g‘Prİ”ty
Ğ
´İId
 ) const

826  
ÿ±u»XINE
 ? 
	`icvG‘Prİ”tyAVI_XINE
Ğÿ±u»XINE, 
´İId
 ) : 0;

827 
	}
}

829 
boŞ
 
	gCvC­tu»AVI_XINE_CPP
::
	$£tPrİ”ty
Ğ
´İId
, 
v®ue
 )

831  
ÿ±u»XINE
 ? 
	`icvS‘Prİ”tyAVI_XINE
Ğÿ±u»XINE, 
´İId
, 
v®ue
 ) !ğ0 : 
çl£
;

832 
	}
}

834 
CvC­tu»
* 
	$cvC»©eFeC­tu»_XINE
(cÚ¡ * 
f’ame
)

836 
CvC­tu»AVI_XINE_CPP
* 
ÿ±u»
 = 
Ãw
 CvCaptureAVI_XINE_CPP;

838 ifĞ
ÿ±u»
->
	`İ’
(
f’ame
))

839  
ÿ±u»
;

841 
d–‘e
 
ÿ±u»
;

843 
	}
}

846 #undeà
NDEBUG


	@ffmpeg_codecs.hpp

43 #ifdeà
__ılu¥lus


47 #ià!
defšed
(
WIN32
è|| defšed(
__MINGW32__
)

49 
	~<¡dšt.h
>

52 #iâdeà
INT64_C


53 
	#INT64_C
(
c
è(c##
LL
)

	)

56 #iâdeà
UINT64_C


57 
	#UINT64_C
(
c
è(c##
ULL
)

	)

60 
	~<”ºo.h
>

64 #ià!
defšed
 
HAVE_FFMPEG_AVCODEC_H
 && !defšed 
HAVE_LIBAVCODEC_AVCODEC_H


66 #ià
defšed
(
HAVE_GENTOO_FFMPEG
)

67 
	#HAVE_LIBAVFORMAT_AVFORMAT_H
 1

	)

68 #–ià
defšed
 
HAVE_FFMPEG


69 
	#HAVE_FFMPEG_AVFORMAT_H
 1

	)

72 #ià
defšed
(
HAVE_FFMPEG_AVFORMAT_H
)

73 
	~<ffm³g/avfÜm©.h
>

76 #ià
defšed
(
HAVE_LIBAVFORMAT_AVFORMAT_H
è|| defšed(
WIN32
)

77 
	~<libavfÜm©/avfÜm©.h
>

82 #ifdeà
__ılu¥lus


86 #iâdeà
MKTAG


87 
	#MKTAG
(
a
,
b
,
c
,
d
è× | (b << 8è| (ø<< 16è| (d << 24))

	)

92 
	sAVCodecTag
 {

93 
id
;

94 
g
;

95 } 
	tAVCodecTag
;

97 #ià(
LIBAVCODEC_VERSION_INT
 <ğ
AV_VERSION_INT
(54, 51, 100))

98 
	#AV_CODEC_ID_H264
 
CODEC_ID_H264


	)

99 
	#AV_CODEC_ID_H263
 
CODEC_ID_H263


	)

100 
	#AV_CODEC_ID_H263P
 
CODEC_ID_H263P


	)

101 
	#AV_CODEC_ID_H263I
 
CODEC_ID_H263I


	)

102 
	#AV_CODEC_ID_H261
 
CODEC_ID_H261


	)

103 
	#AV_CODEC_ID_MPEG4
 
CODEC_ID_MPEG4


	)

104 
	#AV_CODEC_ID_MSMPEG4V3
 
CODEC_ID_MSMPEG4V3


	)

105 
	#AV_CODEC_ID_MSMPEG4V2
 
CODEC_ID_MSMPEG4V2


	)

106 
	#AV_CODEC_ID_MSMPEG4V1
 
CODEC_ID_MSMPEG4V1


	)

107 
	#AV_CODEC_ID_WMV1
 
CODEC_ID_WMV1


	)

108 
	#AV_CODEC_ID_WMV2
 
CODEC_ID_WMV1


	)

109 
	#AV_CODEC_ID_DVVIDEO
 
CODEC_ID_DVVIDEO


	)

110 
	#AV_CODEC_ID_MPEG1VIDEO
 
CODEC_ID_MPEG1VIDEO


	)

111 
	#AV_CODEC_ID_MPEG2VIDEO
 
CODEC_ID_MPEG2VIDEO


	)

112 
	#AV_CODEC_ID_MJPEG
 
CODEC_ID_MJPEG


	)

113 
	#AV_CODEC_ID_LJPEG
 
CODEC_ID_LJPEG


	)

114 
	#AV_CODEC_ID_HUFFYUV
 
CODEC_ID_HUFFYUV


	)

115 
	#AV_CODEC_ID_FFVHUFF
 
CODEC_ID_FFVHUFF


	)

116 
	#AV_CODEC_ID_CYUV
 
CODEC_ID_CYUV


	)

117 
	#AV_CODEC_ID_RAWVIDEO
 
CODEC_ID_RAWVIDEO


	)

118 
	#AV_CODEC_ID_INDEO3
 
CODEC_ID_INDEO3


	)

119 
	#AV_CODEC_ID_VP3
 
CODEC_ID_VP3


	)

120 
	#AV_CODEC_ID_ASV1
 
CODEC_ID_ASV1


	)

121 
	#AV_CODEC_ID_ASV2
 
CODEC_ID_ASV2


	)

122 
	#AV_CODEC_ID_VCR1
 
CODEC_ID_VCR1


	)

123 
	#AV_CODEC_ID_FFV1
 
CODEC_ID_FFV1


	)

124 
	#AV_CODEC_ID_XAN_WC4
 
CODEC_ID_XAN_WC4


	)

125 
	#AV_CODEC_ID_MSRLE
 
CODEC_ID_MSRLE


	)

126 
	#AV_CODEC_ID_MSVIDEO1
 
CODEC_ID_MSVIDEO1


	)

127 
	#AV_CODEC_ID_CINEPAK
 
CODEC_ID_CINEPAK


	)

128 
	#AV_CODEC_ID_TRUEMOTION1
 
CODEC_ID_TRUEMOTION1


	)

129 
	#AV_CODEC_ID_MSZH
 
CODEC_ID_MSZH


	)

130 
	#AV_CODEC_ID_ZLIB
 
CODEC_ID_ZLIB


	)

131 
	#AV_CODEC_ID_SNOW
 
CODEC_ID_SNOW


	)

132 
	#AV_CODEC_ID_4XM
 
CODEC_ID_4XM


	)

133 
	#AV_CODEC_ID_FLV1
 
CODEC_ID_FLV1


	)

134 
	#AV_CODEC_ID_SVQ1
 
CODEC_ID_SVQ1


	)

135 
	#AV_CODEC_ID_TSCC
 
CODEC_ID_TSCC


	)

136 
	#AV_CODEC_ID_ULTI
 
CODEC_ID_ULTI


	)

137 
	#AV_CODEC_ID_VIXL
 
CODEC_ID_VIXL


	)

138 
	#AV_CODEC_ID_QPEG
 
CODEC_ID_QPEG


	)

139 
	#AV_CODEC_ID_WMV3
 
CODEC_ID_WMV3


	)

140 
	#AV_CODEC_ID_LOCO
 
CODEC_ID_LOCO


	)

141 
	#AV_CODEC_ID_THEORA
 
CODEC_ID_THEORA


	)

142 
	#AV_CODEC_ID_WNV1
 
CODEC_ID_WNV1


	)

143 
	#AV_CODEC_ID_AASC
 
CODEC_ID_AASC


	)

144 
	#AV_CODEC_ID_INDEO2
 
CODEC_ID_INDEO2


	)

145 
	#AV_CODEC_ID_FRAPS
 
CODEC_ID_FRAPS


	)

146 
	#AV_CODEC_ID_TRUEMOTION2
 
CODEC_ID_TRUEMOTION2


	)

147 
	#AV_CODEC_ID_FLASHSV
 
CODEC_ID_FLASHSV


	)

148 
	#AV_CODEC_ID_JPEGLS
 
CODEC_ID_JPEGLS


	)

149 
	#AV_CODEC_ID_VC1
 
CODEC_ID_VC1


	)

150 
	#AV_CODEC_ID_CSCD
 
CODEC_ID_CSCD


	)

151 
	#AV_CODEC_ID_ZMBV
 
CODEC_ID_ZMBV


	)

152 
	#AV_CODEC_ID_KMVC
 
CODEC_ID_KMVC


	)

153 
	#AV_CODEC_ID_VP5
 
CODEC_ID_VP5


	)

154 
	#AV_CODEC_ID_VP6
 
CODEC_ID_VP6


	)

155 
	#AV_CODEC_ID_VP6F
 
CODEC_ID_VP6F


	)

156 
	#AV_CODEC_ID_JPEG2000
 
CODEC_ID_JPEG2000


	)

157 
	#AV_CODEC_ID_VMNC
 
CODEC_ID_VMNC


	)

158 
	#AV_CODEC_ID_TARGA
 
CODEC_ID_TARGA


	)

159 
	#AV_CODEC_ID_NONE
 
CODEC_ID_NONE


	)

162 cÚ¡ 
AVCodecTag
 
codec_bmp_gs
[] = {

163 { 
AV_CODEC_ID_H264
, 
MKTAG
('H', '2', '6', '4') },

164 { 
AV_CODEC_ID_H264
, 
MKTAG
('h', '2', '6', '4') },

165 { 
AV_CODEC_ID_H264
, 
MKTAG
('X', '2', '6', '4') },

166 { 
AV_CODEC_ID_H264
, 
MKTAG
('x', '2', '6', '4') },

167 { 
AV_CODEC_ID_H264
, 
MKTAG
('a', 'v', 'c', '1') },

168 { 
AV_CODEC_ID_H264
, 
MKTAG
('V', 'S', 'S', 'H') },

170 { 
AV_CODEC_ID_H263
, 
MKTAG
('H', '2', '6', '3') },

171 { 
AV_CODEC_ID_H263P
, 
MKTAG
('H', '2', '6', '3') },

172 { 
AV_CODEC_ID_H263I
, 
MKTAG
('I', '2', '6', '3') },

173 { 
AV_CODEC_ID_H261
, 
MKTAG
('H', '2', '6', '1') },

176 { 
AV_CODEC_ID_H263P
, 
MKTAG
('U', '2', '6', '3') },

177 { 
AV_CODEC_ID_H263P
, 
MKTAG
('v', 'i', 'v', '1') },

179 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('F', 'M', 'P', '4') },

180 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('D', 'I', 'V', 'X') },

181 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('D', 'X', '5', '0') },

182 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('X', 'V', 'I', 'D') },

183 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('M', 'P', '4', 'S') },

184 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('M', '4', 'S', '2') },

185 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
(0x04, 0, 0, 0) },

188 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('D', 'I', 'V', '1') },

189 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('B', 'L', 'Z', '0') },

190 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('m', 'p', '4', 'v') },

191 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('U', 'M', 'P', '4') },

192 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('W', 'V', '1', 'F') },

193 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('S', 'E', 'D', 'G') },

195 { 
AV_CODEC_ID_MPEG4
, 
MKTAG
('R', 'M', 'P', '4') },

197 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('D', 'I', 'V', '3') },

198 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('M', 'P', '4', '3') },

201 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('M', 'P', 'G', '3') },

202 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('D', 'I', 'V', '5') },

203 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('D', 'I', 'V', '6') },

204 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('D', 'I', 'V', '4') },

205 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('A', 'P', '4', '1') },

206 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('C', 'O', 'L', '1') },

207 { 
AV_CODEC_ID_MSMPEG4V3
, 
MKTAG
('C', 'O', 'L', '0') },

209 { 
AV_CODEC_ID_MSMPEG4V2
, 
MKTAG
('M', 'P', '4', '2') },

212 { 
AV_CODEC_ID_MSMPEG4V2
, 
MKTAG
('D', 'I', 'V', '2') },

214 { 
AV_CODEC_ID_MSMPEG4V1
, 
MKTAG
('M', 'P', 'G', '4') },

216 { 
AV_CODEC_ID_WMV1
, 
MKTAG
('W', 'M', 'V', '1') },

219 { 
AV_CODEC_ID_WMV2
, 
MKTAG
('W', 'M', 'V', '2') },

220 { 
AV_CODEC_ID_DVVIDEO
, 
MKTAG
('d', 'v', 's', 'd') },

221 { 
AV_CODEC_ID_DVVIDEO
, 
MKTAG
('d', 'v', 'h', 'd') },

222 { 
AV_CODEC_ID_DVVIDEO
, 
MKTAG
('d', 'v', 's', 'l') },

223 { 
AV_CODEC_ID_DVVIDEO
, 
MKTAG
('d', 'v', '2', '5') },

224 { 
AV_CODEC_ID_MPEG1VIDEO
, 
MKTAG
('m', 'p', 'g', '1') },

225 { 
AV_CODEC_ID_MPEG1VIDEO
, 
MKTAG
('m', 'p', 'g', '2') },

226 { 
AV_CODEC_ID_MPEG2VIDEO
, 
MKTAG
('m', 'p', 'g', '2') },

227 { 
AV_CODEC_ID_MPEG2VIDEO
, 
MKTAG
('M', 'P', 'E', 'G') },

228 { 
AV_CODEC_ID_MPEG1VIDEO
, 
MKTAG
('P', 'I', 'M', '1') },

229 { 
AV_CODEC_ID_MPEG1VIDEO
, 
MKTAG
('V', 'C', 'R', '2') },

230 { 
AV_CODEC_ID_MPEG1VIDEO
, 0x10000001 },

231 { 
AV_CODEC_ID_MPEG2VIDEO
, 0x10000002 },

232 { 
AV_CODEC_ID_MPEG2VIDEO
, 
MKTAG
('D', 'V', 'R', ' ') },

233 { 
AV_CODEC_ID_MPEG2VIDEO
, 
MKTAG
('M', 'M', 'E', 'S') },

234 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('M', 'J', 'P', 'G') },

235 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('L', 'J', 'P', 'G') },

236 { 
AV_CODEC_ID_LJPEG
, 
MKTAG
('L', 'J', 'P', 'G') },

237 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('J', 'P', 'G', 'L') },

238 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('M', 'J', 'L', 'S') },

239 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('j', 'p', 'e', 'g') },

240 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('I', 'J', 'P', 'G') },

241 { 
AV_CODEC_ID_MJPEG
, 
MKTAG
('A', 'V', 'R', 'n') },

242 { 
AV_CODEC_ID_HUFFYUV
, 
MKTAG
('H', 'F', 'Y', 'U') },

243 { 
AV_CODEC_ID_FFVHUFF
, 
MKTAG
('F', 'F', 'V', 'H') },

244 { 
AV_CODEC_ID_CYUV
, 
MKTAG
('C', 'Y', 'U', 'V') },

245 { 
AV_CODEC_ID_RAWVIDEO
, 0 },

246 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('I', '4', '2', '0') },

247 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('Y', 'U', 'Y', '2') },

248 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('Y', '4', '2', '2') },

249 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('Y', 'V', '1', '2') },

250 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('U', 'Y', 'V', 'Y') },

251 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('I', 'Y', 'U', 'V') },

252 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('Y', '8', '0', '0') },

253 { 
AV_CODEC_ID_RAWVIDEO
, 
MKTAG
('H', 'D', 'Y', 'C') },

254 { 
AV_CODEC_ID_INDEO3
, 
MKTAG
('I', 'V', '3', '1') },

255 { 
AV_CODEC_ID_INDEO3
, 
MKTAG
('I', 'V', '3', '2') },

256 { 
AV_CODEC_ID_VP3
, 
MKTAG
('V', 'P', '3', '1') },

257 { 
AV_CODEC_ID_VP3
, 
MKTAG
('V', 'P', '3', '0') },

258 { 
AV_CODEC_ID_ASV1
, 
MKTAG
('A', 'S', 'V', '1') },

259 { 
AV_CODEC_ID_ASV2
, 
MKTAG
('A', 'S', 'V', '2') },

260 { 
AV_CODEC_ID_VCR1
, 
MKTAG
('V', 'C', 'R', '1') },

261 { 
AV_CODEC_ID_FFV1
, 
MKTAG
('F', 'F', 'V', '1') },

262 { 
AV_CODEC_ID_XAN_WC4
, 
MKTAG
('X', 'x', 'a', 'n') },

263 { 
AV_CODEC_ID_MSRLE
, 
MKTAG
('m', 'r', 'l', 'e') },

264 { 
AV_CODEC_ID_MSRLE
, 
MKTAG
(0x1, 0x0, 0x0, 0x0) },

265 { 
AV_CODEC_ID_MSVIDEO1
, 
MKTAG
('M', 'S', 'V', 'C') },

266 { 
AV_CODEC_ID_MSVIDEO1
, 
MKTAG
('m', 's', 'v', 'c') },

267 { 
AV_CODEC_ID_MSVIDEO1
, 
MKTAG
('C', 'R', 'A', 'M') },

268 { 
AV_CODEC_ID_MSVIDEO1
, 
MKTAG
('c', 'r', 'a', 'm') },

269 { 
AV_CODEC_ID_MSVIDEO1
, 
MKTAG
('W', 'H', 'A', 'M') },

270 { 
AV_CODEC_ID_MSVIDEO1
, 
MKTAG
('w', 'h', 'a', 'm') },

271 { 
AV_CODEC_ID_CINEPAK
, 
MKTAG
('c', 'v', 'i', 'd') },

272 { 
AV_CODEC_ID_TRUEMOTION1
, 
MKTAG
('D', 'U', 'C', 'K') },

273 { 
AV_CODEC_ID_MSZH
, 
MKTAG
('M', 'S', 'Z', 'H') },

274 { 
AV_CODEC_ID_ZLIB
, 
MKTAG
('Z', 'L', 'I', 'B') },

275 { 
AV_CODEC_ID_4XM
, 
MKTAG
('4', 'X', 'M', 'V') },

276 { 
AV_CODEC_ID_FLV1
, 
MKTAG
('F', 'L', 'V', '1') },

277 { 
AV_CODEC_ID_SVQ1
, 
MKTAG
('s', 'v', 'q', '1') },

278 { 
AV_CODEC_ID_TSCC
, 
MKTAG
('t', 's', 'c', 'c') },

279 { 
AV_CODEC_ID_ULTI
, 
MKTAG
('U', 'L', 'T', 'I') },

280 { 
AV_CODEC_ID_VIXL
, 
MKTAG
('V', 'I', 'X', 'L') },

281 { 
AV_CODEC_ID_QPEG
, 
MKTAG
('Q', 'P', 'E', 'G') },

282 { 
AV_CODEC_ID_QPEG
, 
MKTAG
('Q', '1', '.', '0') },

283 { 
AV_CODEC_ID_QPEG
, 
MKTAG
('Q', '1', '.', '1') },

284 { 
AV_CODEC_ID_WMV3
, 
MKTAG
('W', 'M', 'V', '3') },

285 { 
AV_CODEC_ID_LOCO
, 
MKTAG
('L', 'O', 'C', 'O') },

286 { 
AV_CODEC_ID_THEORA
, 
MKTAG
('t', 'h', 'e', 'o') },

287 #ià
LIBAVCODEC_VERSION_INT
>0x000409

288 { 
AV_CODEC_ID_WNV1
, 
MKTAG
('W', 'N', 'V', '1') },

289 { 
AV_CODEC_ID_AASC
, 
MKTAG
('A', 'A', 'S', 'C') },

290 { 
AV_CODEC_ID_INDEO2
, 
MKTAG
('R', 'T', '2', '1') },

291 { 
AV_CODEC_ID_FRAPS
, 
MKTAG
('F', 'P', 'S', '1') },

292 { 
AV_CODEC_ID_TRUEMOTION2
, 
MKTAG
('T', 'M', '2', '0') },

294 #ià
LIBAVCODEC_VERSION_INT
>((50<<16)+(1<<8)+0)

295 { 
AV_CODEC_ID_FLASHSV
, 
MKTAG
('F', 'S', 'V', '1') },

296 { 
AV_CODEC_ID_JPEGLS
,
MKTAG
('M', 'J', 'L', 'S') },

297 { 
AV_CODEC_ID_VC1
, 
MKTAG
('W', 'V', 'C', '1') },

298 { 
AV_CODEC_ID_VC1
, 
MKTAG
('W', 'M', 'V', 'A') },

299 { 
AV_CODEC_ID_CSCD
, 
MKTAG
('C', 'S', 'C', 'D') },

300 { 
AV_CODEC_ID_ZMBV
, 
MKTAG
('Z', 'M', 'B', 'V') },

301 { 
AV_CODEC_ID_KMVC
, 
MKTAG
('K', 'M', 'V', 'C') },

303 #ià
LIBAVCODEC_VERSION_INT
>((51<<16)+(11<<8)+0)

304 { 
AV_CODEC_ID_VP5
, 
MKTAG
('V', 'P', '5', '0') },

305 { 
AV_CODEC_ID_VP6
, 
MKTAG
('V', 'P', '6', '0') },

306 { 
AV_CODEC_ID_VP6
, 
MKTAG
('V', 'P', '6', '1') },

307 { 
AV_CODEC_ID_VP6
, 
MKTAG
('V', 'P', '6', '2') },

308 { 
AV_CODEC_ID_VP6F
, 
MKTAG
('V', 'P', '6', 'F') },

309 { 
AV_CODEC_ID_JPEG2000
, 
MKTAG
('M', 'J', '2', 'C') },

310 { 
AV_CODEC_ID_VMNC
, 
MKTAG
('V', 'M', 'n', 'c') },

312 #ià
LIBAVCODEC_VERSION_INT
>=((51<<16)+(49<<8)+0)

314 { 
AV_CODEC_ID_TARGA
, 
MKTAG
('t', 'g', 'a', ' ') },

316 { 
AV_CODEC_ID_NONE
, 0 },

	@ppltasks_winrt.hpp

18 #´agm¨
Úû


20 #iâdeà
_PPLTASKS_WINRT_H


21 
	#_PPLTASKS_WINRT_H


	)

23 
	~<cÚüt.h
>

24 
	~<µÉasks.h
>

25 #ià
_MSC_VER
 >= 1800

26 
	~<µlcÚüt.h
>

29 #ifdeà
_MSC_VER


30 #ià
_MSC_FULL_VER
 < 160040219

31 #”rÜ 
ERROR
: 
Visu®
 
Studio
 2010 
SP1
 
Ü
 
Ï‹r
 
is
 
»quœed
 
to
 
bud
 
µÉasks


35 
	~<µl.h
>

37 
	~<funùiÚ®
>

38 
	~<veùÜ
>

39 
	~<ut™y
>

40 
	~<exû±iÚ
>

41 #ià
_MSC_VER
 >= 1800

42 
	~<®gÜ™hm
>

45 #iâdeà
__ılu¥lus_wš¹


47 
	~<w¾\im¶em’ts.h
>

48 
	~<w¾\async.h
>

49 #ià
_MSC_VER
 >= 1800

50 
	~"age_w¾.hµ
"

52 
	~<wšdows.found©iÚ.h
>

53 
	~<ùxtÿÎ.h
>

55 #iâdeà
_UITHREADCTXT_SUPPORT


57 #ifdeà
WINAPI_FAMILY


60 
	~<wš­içmy.h
>

62 #ià
WINAPI_FAMILY
 =ğ
WINAPI_FAMILY_APP


64 
	#_UITHREADCTXT_SUPPORT
 0

	)

65 #–ià
WINAPI_FAMILY
 =ğ
WINAPI_FAMILY_DESKTOP_APP


67 
	#_UITHREADCTXT_SUPPORT
 0

	)

69 
	#_UITHREADCTXT_SUPPORT
 1

	)

74 
	#_UITHREADCTXT_SUPPORT
 0

	)

79 #ià
_UITHREADCTXT_SUPPORT


80 
	~<u™h»adùxt.h
>

83 #´agm¨
d‘eù_mism©ch
("_PPLTASKS_WITH_WINRT", "0")

85 #ifdeà
_DEBUG


86 
	#_DBG_ONLY
(
X
è
	)
X

88 
	#_DBG_ONLY
(
X
)

	)

92 #ifdeà
_MSC_VER


93 #ià
_MSC_VER
 < 1700

94 
Çme¥aû
 
	g¡d


96 
	g‹m¶©e
<
şass
 
	g_E
> 
exû±iÚ_±r
 
make_exû±iÚ_±r
(
_E
 
_Exû±
)

98  
cİy_exû±iÚ
(
_Exû±
);

102 #iâdeà
_PPLTASK_ASYNC_LOGGING


103 #ià
_MSC_VER
 >ğ1800 && 
defšed
(
__ılu¥lus_wš¹
)

104 
	#_PPLTASK_ASYNC_LOGGING
 1

105 #–£

	)

106 
	#_PPLTASK_ASYNC_LOGGING
 0

	)

111 #´agm¨
·ck
(
push
,
_CRT_PACKING
)

113 #´agm¨
w¬nšg
(
push
)

114 #´agm¨
w¬nšg
(
di§bË
: 28197)

115 #´agm¨
w¬nšg
(
di§bË
: 4100)

116 #ià
_MSC_VER
 >= 1800

117 #´agm¨
w¬nšg
(
di§bË
: 4127)

119 #´agm¨
w¬nšg
(
di§bË
: 4702)

123 #´agm¨
push_maüo
("new")

124 #undeà
Ãw


129 
Çme¥aû
 
	g¡dx


131 
	g‹m¶©e
<
şass
 
	g_T
>

132 
	g_T
&& 
deşv®
();

140 
Çme¥aû
 
	gCÚcu¼’cy_wš¹


143 #iâdeà
PPL_TASK_SAVE_FRAME_COUNT


144 #ifdeà
_DEBUG


145 
	#PPL_TASK_SAVE_FRAME_COUNT
 10

	)

147 
	#PPL_TASK_SAVE_FRAME_COUNT
 1

	)

159 #ifdeà
_CAPTURE_CALLSTACK


160 #undeà
_CAPTURE_CALLSTACK


162 #ià
PPL_TASK_SAVE_FRAME_COUNT
 > 1

163 #ià!
defšed
(
_DEBUG
)

164 #´agm¨
mes§ge
 ("WARNING: Redefinning PPL_TASK_SAVE_FRAME_COUNT under Release build for‚on-desktop‡pplications is‚ot supported; only one frame will be captured!")

165 
	#_CAPTURE_CALLSTACK
(è::
CÚcu¼’cy_wš¹
::
d‘as
::
_TaskC»©iÚC®l¡ack
::
	`_C­tu»SšgËF¿meC®l¡ack
(
	`_R‘uºAdd»ss
())

	)

167 
	#_CAPTURE_CALLSTACK
(è::
CÚcu¼’cy_wš¹
::
d‘as
::
_TaskC»©iÚC®l¡ack
::
	`_C­tu»MuÉiF¿mesC®l¡ack
(
PPL_TASK_SAVE_FRAME_COUNT
)

	)

170 
	#_CAPTURE_CALLSTACK
(è::
CÚcu¼’cy_wš¹
::
d‘as
::
_TaskC»©iÚC®l¡ack
::
	`_C­tu»SšgËF¿meC®l¡ack
(
	`_R‘uºAdd»ss
())

	)

178 
	gCÚcu¼’cy
::
	tsk_group_¡©us
 
	tsk_¡©us
;

180 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
> 
şass
 
	gsk
;

181 
	g‹m¶©e
 <> 
şass
 
	gsk
<>;

205 #ià
_MSC_VER
 >= 1800

206 
šlše
 
boŞ
 
__cdeş
 
is_sk_ÿnûÎ©iÚ_»que¡ed
()

208  ::
CÚcu¼’cy
::
d‘as
::
_TaskCŞËùiÚ_t
::
_Is_ÿnûÎ©iÚ_»que¡ed
();

211 
šlše
 
boŞ
 
__cdeş
 
is_sk_ÿnûÎ©iÚ_»que¡ed
()

214  ::
CÚcu¼’cy
::
is_cu¼’t_sk_group_ÿnûlšg
();

230 
šlše
 
__deş¥ec
(
nÜ‘uº
è
__cdeş
 
ÿnûl_cu¼’t_sk
()

232 
throw
 
	gCÚcu¼’cy
::
sk_ÿnûËd
();

238 
Çme¥aû
 
	gd‘as


240 #ià
_MSC_VER
 >= 1800

246 şas 
	c_TaskC»©iÚC®l¡ack


248 
	g´iv©e
:

251 * 
_M_SšgËF¿me
;

252 
	g¡d
::
veùÜ
<*> 
_M_äames
;

253 
	gpublic
:

254 
_TaskC»©iÚC®l¡ack
()

256 
_M_SšgËF¿me
 = 
nuÎ±r
;

260 
_TaskC»©iÚC®l¡ack
 
_C­tu»SšgËF¿meC®l¡ack
(*
_SšgËF¿me
)

262 
_TaskC»©iÚC®l¡ack
 
	g_csc
;

263 
	g_csc
.
	g_M_SšgËF¿me
 = 
_SšgËF¿me
;

264  
	g_csc
;

268 
__deş¥ec
(
nošlše
)

269 
_TaskC»©iÚC®l¡ack
 
_C­tu»MuÉiF¿mesC®l¡ack
(
size_t
 
_C­tu»F¿mes
)

271 
_TaskC»©iÚC®l¡ack
 
	g_csc
;

272 
	g_csc
.
	g_M_äames
.
»size
(
_C­tu»F¿mes
);

274 
	g_csc
.
	g_M_äames
.
»size
(::
CÚcu¼’cy
::
d‘as
::
¶©fÜm
::
C­tu»C®l¡ack
(&
_csc
.
_M_äames
[0], 2, 
_C­tu»F¿mes
));

275  
	g_csc
;

279 
UINT32
 
	t_Un™_ty³
;

281 
	s_Ty³S–eùÜNoAsync
 {};

282 
	s_Ty³S–eùÜAsyncO³¿tiÚOrTask
 {};

283 
	g_Ty³S–eùÜAsyncO³¿tiÚ
 : 
public
 
_Ty³S–eùÜAsyncO³¿tiÚOrTask
 { };

284 
	g_Ty³S–eùÜAsyncTask
 : 
public
 
_Ty³S–eùÜAsyncO³¿tiÚOrTask
 { };

285 
	s_Ty³S–eùÜAsyncAùiÚ
 {};

286 
	s_Ty³S–eùÜAsyncAùiÚW™hProg»ss
 {};

287 
	s_Ty³S–eùÜAsyncO³¿tiÚW™hProg»ss
 {};

289 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

290 
	s_NÜm®izeVoidToUn™Ty³


292 
_Ty
 
	t_Ty³
;

295 
	g‹m¶©e
<>

296 
	g_NÜm®izeVoidToUn™Ty³
<>

298 
_Un™_ty³
 
	t_Ty³
;

301 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

302 
	s_IsUnw¿µedAsyncS–eùÜ


304 cÚ¡ 
boŞ
 
	g_V®ue
 = 
Œue
;

307 
	g‹m¶©e
<>

308 
	g_IsUnw¿µedAsyncS–eùÜ
<
	g_Ty³S–eùÜNoAsync
>

310 cÚ¡ 
boŞ
 
	g_V®ue
 = 
çl£
;

313 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
>

314 
	s_Unw¿pTaskTy³


316 
_Ty
 
	t_Ty³
;

319 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
>

320 
	g_Unw¿pTaskTy³
<
	gsk
<
	g_Ty
>>

322 
_Ty
 
	t_Ty³
;

325 
	g‹m¶©e
 <
ty³Çme
 
	g_T
>

326 
_Ty³S–eùÜAsyncTask
 
_AsyncO³¿tiÚKšdS–eùÜ
(
sk
<
_T
>);

328 
_Ty³S–eùÜNoAsync
 
_AsyncO³¿tiÚKšdS–eùÜ
(...);

330 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

331 
	s_Unh©


333 
_Ty³
 
	t_V®ue
;

336 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

337 
	g_Unh©
<
	g_Ty³
*>

339 
_Ty³
 
	t_V®ue
;

344 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
, 
boŞ
 
	g_IsV®ueTy³OrRefTy³
 = 
__is_v®id_wš¹_ty³
(
_Ty³
)>

345 
	s_V®ueTy³OrRefTy³


347 
_Un™_ty³
 
	t_V®ue
;

350 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

351 
	g_V®ueTy³OrRefTy³
<
	g_Ty³
, 
	gŒue
>

353 
_Ty³
 
	t_V®ue
;

356 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
>

357 
_Ty
 
_Unw¿pAsyncAùiÚW™hProg»ssS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss_im¶
<_Ty>*);

359 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
>

360 
_Ty
 
_Unw¿pAsyncAùiÚW™hProg»ssS–eùÜ
(...);

362 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
,y³Çm
	g_Prog»ss
>

363 
_Prog»ss
 
_Unw¿pAsyncO³¿tiÚW™hProg»ssProg»ssS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss_im¶
<
_Ty
, _Progress>*);

365 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
,y³Çm
	g_Prog»ss
>

366 
_Prog»ss
 
_Unw¿pAsyncO³¿tiÚW™hProg»ssProg»ssS–eùÜ
(...);

368 
	g‹m¶©e
 <
ty³Çme
 
	g_T1
,y³Çm
	g_T2
>

369 
_T2
 
_Prog»ssTy³S–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_T1
, _T2>*);

371 
	g‹m¶©e
 <
ty³Çme
 
	g_T1
>

372 
_T1
 
_Prog»ssTy³S–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<_T1>*);

374 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

375 
	s_G‘Prog»ssTy³


377 
deşty³
(
	t_Prog»ssTy³S–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_Ty³
>())è
	t_V®ue
;

380 
	g‹m¶©e
 <
ty³Çme
 
	g_T
>

381 
_Ty³S–eùÜAsyncO³¿tiÚ
 
_AsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<
_T
>*);

383 
_Ty³S–eùÜAsyncAùiÚ
 
_AsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
*);

385 
	g‹m¶©e
 <
ty³Çme
 
	g_T1
,y³Çm
	g_T2
>

386 
_Ty³S–eùÜAsyncO³¿tiÚW™hProg»ss
 
_AsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_T1
, 
_T2
>*);

388 
	g‹m¶©e
 <
ty³Çme
 
	g_T
>

389 
_Ty³S–eùÜAsyncAùiÚW™hProg»ss
 
_AsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_T
>*);

391 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

392 
	s_IsIAsyncInfo


394 cÚ¡ 
boŞ
 
	g_V®ue
 = 
¡d
::
is_ba£_of
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
, 
ty³Çme
 
	g_Unh©
<
	g_Ty³
>::
_V®ue
>::
v®ue
 ||

395 
¡d
::
is_§me
<
_Ty³S–eùÜAsyncAùiÚ
, 
deşty³
(
d‘as
::
_AsyncO³¿tiÚKšdS–eùÜ
(
¡dx
::
deşv®
<
_Ty³
>()))>::
v®ue
 ||

396 
¡d
::
is_§me
<
_Ty³S–eùÜAsyncO³¿tiÚ
, 
deşty³
(
d‘as
::
_AsyncO³¿tiÚKšdS–eùÜ
(
¡dx
::
deşv®
<
_Ty³
>()))>::
v®ue
 ||

397 
¡d
::
is_§me
<
_Ty³S–eùÜAsyncO³¿tiÚW™hProg»ss
, 
deşty³
(
d‘as
::
_AsyncO³¿tiÚKšdS–eùÜ
(
¡dx
::
deşv®
<
_Ty³
>()))>::
v®ue
 ||

398 
¡d
::
is_§me
<
_Ty³S–eùÜAsyncAùiÚW™hProg»ss
, 
deşty³
(
d‘as
::
_AsyncO³¿tiÚKšdS–eùÜ
(
¡dx
::
deşv®
<
_Ty³
>()))>::
v®ue
;

401 
	g‹m¶©e
 <>

402 
	g_IsIAsyncInfo
<>

404 cÚ¡ 
boŞ
 
	g_V®ue
 = 
çl£
;

407 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
>

408 
_Ty
 
_Unw¿pAsyncO³¿tiÚS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ_im¶
<_Ty>*);

410 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
>

411 
_Ty
 
_Unw¿pAsyncO³¿tiÚS–eùÜ
(...);

413 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
,y³Çm
	g_Prog»ss
>

414 
_Ty
 
_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss_im¶
<_Ty, 
_Prog»ss
>*);

416 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty
,y³Çm
	g_Prog»ss
>

417 
_Ty
 
_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(...);

420 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

421 autØ
_G‘Unw¿µedTy³
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<
_Ty
>*è-> 
ty³Çme
 ABI::Wšdows::Found©iÚ::
IÁ”Çl
::
G‘AbiTy³
<
deşty³
(
_Unw¿pAsyncO³¿tiÚS–eùÜ
(
¡dx
::
deşv®
<ABI::Wšdows::Found©iÚ::IAsyncO³¿tiÚ<_Ty>*>()))>::
ty³
;

423 
_G‘Unw¿µedTy³
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
*);

425 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
,y³Çm
	g_Prog»ss
>

426 autØ
_G‘Unw¿µedTy³
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_Ty
, 
_Prog»ss
>*è-> 
ty³Çme
 
	gABI
::Wšdows::Found©iÚ::
IÁ”Çl
::
G‘AbiTy³
<
deşty³
(
_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(
¡dx
::
deşv®
<ABI::Wšdows::Found©iÚ::IAsyncO³¿tiÚW™hProg»ss<_Ty, _Prog»ss>*>()))>::
ty³
;

428 
	g‹m¶©e
<
ty³Çme
 
	g_Prog»ss
>

429 
_G‘Unw¿µedTy³
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_Prog»ss
>*);

431 
	g‹m¶©e
 <
ty³Çme
 
	g_T
>

432 
_T
 
_R‘uºAsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<_T>*);

434 
_R‘uºAsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
*);

436 
	g‹m¶©e
 <
ty³Çme
 
	g_T1
,y³Çm
	g_T2
>

437 
_T1
 
_R‘uºAsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<_T1, 
_T2
>*);

439 
	g‹m¶©e
 <
ty³Çme
 
	g_T
>

440 
_R‘uºAsyncO³¿tiÚKšdS–eùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_T
>*);

442 şas 
	c_Prog»ssR•Ü‹rCtÜArgTy³
{};

444 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
, 
boŞ
 
	g_IsAsync
 = 
_IsIAsyncInfo
<
_Ty³
>::
_V®ue
>

445 
	s_TaskTy³T¿™s


447 
ty³Çme
 
	td‘as
::
	t_Unw¿pTaskTy³
<
	t_Ty³
>::_Ty³ 
	t_TaskR‘Ty³
;

448 
_TaskR‘Ty³
 
	t_TaskR‘Ty³_abi
;

449 
deşty³
(
	t_AsyncO³¿tiÚKšdS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_Ty³
>())è
	t_AsyncKšd
;

450 
ty³Çme
 
	td‘as
::
	t_NÜm®izeVoidToUn™Ty³
<
	t_TaskR‘Ty³
>::
	t_Ty³
 
	t_NÜm®izedTaskR‘Ty³
;

452 cÚ¡ 
boŞ
 
	g_IsAsyncTask
 = 
_IsAsync
;

453 cÚ¡ 
boŞ
 
	g_IsUnw¿µedTaskOrAsync
 = 
d‘as
::
_IsUnw¿µedAsyncS–eùÜ
<
_AsyncKšd
>::
_V®ue
;

456 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

457 
	g_TaskTy³T¿™s
<
	g_Ty³
, 
	gŒue
>

459 
deşty³
(
	t_R‘uºAsyncO³¿tiÚKšdS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_Ty³
>())è
	t_TaskR‘Ty³
;

460 
deşty³
(
	t_G‘Unw¿µedTy³
(
	t¡dx
::
	tdeşv®
<
	t_Ty³
>())è
	t_TaskR‘Ty³_abi
;

461 
_TaskR‘Ty³
 
	t_NÜm®izedTaskR‘Ty³
;

462 
deşty³
(
	t_AsyncO³¿tiÚKšdS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_Ty³
>())è
	t_AsyncKšd
;

464 cÚ¡ 
boŞ
 
	g_IsAsyncTask
 = 
Œue
;

465 cÚ¡ 
boŞ
 
	g_IsUnw¿µedTaskOrAsync
 = 
d‘as
::
_IsUnw¿µedAsyncS–eùÜ
<
_AsyncKšd
>::
_V®ue
;

468 
	g‹m¶©e
 <
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_FunùiÚ
>‡utØ
_IsC®ÏbË
(
_FunùiÚ
 
_Func
, , , è-> 
deşty³
(_Func(
¡dx
::
deşv®
<
sk
<
_R‘uºTy³
>*>()), 
¡d
::
Œue_ty³
()è{ ()_Func;  
	g¡d
::true_type(); }

469 
	g‹m¶©e
 <
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_FunùiÚ
>‡utØ
_IsC®ÏbË
(
_FunùiÚ
 
_Func
, , , ...è-> 
deşty³
(_Func(
¡dx
::
deşv®
<
_R‘uºTy³
*>()), 
¡d
::
Œue_ty³
()è{ ()_Func;  
	g¡d
::true_type(); }

470 
	g‹m¶©e
 <
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_FunùiÚ
>‡utØ
_IsC®ÏbË
(
_FunùiÚ
 
_Func
, , ...è-> 
deşty³
(_Func(), 
¡d
::
Œue_ty³
()è{ ()_Func;  
	g¡d
::true_type(); }

471 
	g‹m¶©e
 <
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_FunùiÚ
> 
	g¡d
::
çl£_ty³
 
_IsC®ÏbË
(
_FunùiÚ
, ...) {  std::false_type(); }

473 
	g‹m¶©e
 <>

474 
	g_TaskTy³T¿™s
<>

476 
	t_TaskR‘Ty³
;

477 
	t_TaskR‘Ty³_abi
;

478 
_Ty³S–eùÜNoAsync
 
	t_AsyncKšd
;

479 
_Un™_ty³
 
	t_NÜm®izedTaskR‘Ty³
;

481 cÚ¡ 
boŞ
 
	g_IsAsyncTask
 = 
çl£
;

482 cÚ¡ 
boŞ
 
	g_IsUnw¿µedTaskOrAsync
 = 
çl£
;

489 
	s_Z”oArgum’tFunùÜ
 { };

490 
	s_OÃArgum’tFunùÜ
 { };

491 
	s_TwoArgum’tFunùÜ
 { };

492 
	s_Th»eArgum’tFunùÜ
 { };

502 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

503 
_Arg1
 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(_Arg1, 
_Arg2
, 
_Arg3
));

506 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

507 
_Arg2
 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, _Arg2, 
_Arg3
));

510 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

511 
_Arg3
 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
, _Arg3));

513 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

514 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)(
_Arg1
, 
_Arg2
, 
_Arg3
));

516 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

517 
_Th»eArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
, 
_Arg3
));

523 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

524 
_Arg1
 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(_Arg1, 
_Arg2
));

527 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

528 
_Arg2
 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, _Arg2));

531 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

532 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
));

534 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

535 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)(
_Arg1
, 
_Arg2
));

537 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

538 
_TwoArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
));

544 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

545 
_Arg1
 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(_Arg1));

548 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

549 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
));

552 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

553 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
));

555 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

556 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)(
_Arg1
));

558 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

559 
_OÃArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
));

565 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

566 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)());

569 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

570 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)());

573 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

574 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)());

577 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

578 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)());

580 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

581 
_Z”oArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)());

587 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

588 
_Arg1
 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(_Arg1, 
_Arg2
, 
_Arg3
) const);

591 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

592 
_Arg2
 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, _Arg2, 
_Arg3
) const);

595 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

596 
_Arg3
 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
, _Arg3) const);

598 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

599 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)(
_Arg1
, 
_Arg2
, 
_Arg3
) const);

601 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

602 
_Th»eArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
, 
_Arg3
) const);

608 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

609 
_Arg1
 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(_Arg1, 
_Arg2
) const);

612 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

613 
_Arg2
 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, _Arg2) const);

616 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

617 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
) const);

619 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

620 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)(
_Arg1
, 
_Arg2
) const);

622 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

623 
_TwoArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
, 
_Arg2
) const);

629 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

630 
_Arg1
 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(_Arg1) const);

633 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

634 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
) const);

637 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

638 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
) const);

640 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

641 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)(
_Arg1
) const);

643 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

644 
_OÃArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)(
_Arg1
) const);

650 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

651 
_Arg1CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)() const);

654 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

655 
_Arg2CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)() const);

658 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

659 
_Arg3CÏssH–³rThunk
(
_R‘uºTy³
(
_CÏss
::*)() const);

662 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

663 
_R‘uºTy³
 
_R‘uºTy³CÏssH–³rThunk
(_R‘uºTy³(
_CÏss
::*)() const);

665 
	g‹m¶©e
<
ty³Çme
 
	g_CÏss
,y³Çm
	g_R‘uºTy³
>

666 
_Z”oArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
_CÏss
::*)() const);

674 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

675 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(_Arg1, 
_Arg2
, 
_Arg3
));

677 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

678 
_Arg2
 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
, _Arg2, 
_Arg3
));

680 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

681 
_Arg3
 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
, 
_Arg2
, _Arg3));

683 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

684 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__cdeş
 *)(
_Arg1
, 
_Arg2
, 
_Arg3
));

686 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

687 
_Th»eArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
, 
_Arg2
, 
_Arg3
));

689 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

690 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(_Arg1, 
_Arg2
, 
_Arg3
));

692 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

693 
_Arg2
 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
, _Arg2, 
_Arg3
));

695 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

696 
_Arg3
 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
, 
_Arg2
, _Arg3));

698 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

699 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__¡dÿÎ
 *)(
_Arg1
, 
_Arg2
, 
_Arg3
));

701 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

702 
_Th»eArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
, 
_Arg2
, 
_Arg3
));

704 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

705 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(_Arg1, 
_Arg2
, 
_Arg3
));

707 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

708 
_Arg2
 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
, _Arg2, 
_Arg3
));

710 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

711 
_Arg3
 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
, 
_Arg2
, _Arg3));

713 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

714 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__ç¡ÿÎ
 *)(
_Arg1
, 
_Arg2
, 
_Arg3
));

716 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
,y³Çm
	g_Arg3
>

717 
_Th»eArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
, 
_Arg2
, 
_Arg3
));

722 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

723 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(_Arg1, 
_Arg2
));

725 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

726 
_Arg2
 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
, _Arg2));

728 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

729 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
, 
_Arg2
));

731 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

732 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__cdeş
 *)(
_Arg1
, 
_Arg2
));

734 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

735 
_TwoArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
, 
_Arg2
));

737 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

738 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(_Arg1, 
_Arg2
));

740 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

741 
_Arg2
 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
, _Arg2));

743 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

744 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
, 
_Arg2
));

746 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

747 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__¡dÿÎ
 *)(
_Arg1
, 
_Arg2
));

749 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

750 
_TwoArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
, 
_Arg2
));

752 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

753 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(_Arg1, 
_Arg2
));

755 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

756 
_Arg2
 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
, _Arg2));

758 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

759 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
, 
_Arg2
));

761 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

762 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__ç¡ÿÎ
 *)(
_Arg1
, 
_Arg2
));

764 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
,y³Çm
	g_Arg2
>

765 
_TwoArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
, 
_Arg2
));

770 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

771 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(_Arg1));

773 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

774 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
));

776 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

777 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
));

779 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

780 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__cdeş
 *)(
_Arg1
));

782 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

783 
_OÃArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__cdeş
 *)(
_Arg1
));

785 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

786 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(_Arg1));

788 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

789 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
));

791 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

792 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
));

794 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

795 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__¡dÿÎ
 *)(
_Arg1
));

797 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

798 
_OÃArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__¡dÿÎ
 *)(
_Arg1
));

800 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

801 
_Arg1
 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(_Arg1));

803 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

804 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
));

806 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

807 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
));

809 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

810 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__ç¡ÿÎ
 *)(
_Arg1
));

812 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Arg1
>

813 
_OÃArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)(
_Arg1
));

818 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

819 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)());

821 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

822 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)());

824 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

825 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__cdeş
 *)());

827 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

828 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__cdeş
 *)());

830 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

831 
_Z”oArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__cdeş
 *)());

833 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

834 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)());

836 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

837 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)());

839 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

840 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__¡dÿÎ
 *)());

842 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

843 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__¡dÿÎ
 *)());

845 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

846 
_Z”oArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__¡dÿÎ
 *)());

848 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

849 
_Arg1PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)());

851 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

852 
_Arg2PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)());

854 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

855 
_Arg3PFNH–³rThunk
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)());

857 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

858 
_R‘uºTy³
 
_R‘uºTy³PFNH–³rThunk
(_R‘uºTy³(
__ç¡ÿÎ
 *)());

860 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

861 
_Z”oArgum’tFunùÜ
 
_Argum’tCouÁH–³r
(
_R‘uºTy³
(
__ç¡ÿÎ
 *)());

863 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

864 
	s_FunùÜArgum’ts


866 cÚ¡ 
size_t
 
	g_CouÁ
 = 0;

869 
	g‹m¶©e
<>

870 
	g_FunùÜArgum’ts
<
	g_OÃArgum’tFunùÜ
>

872 cÚ¡ 
size_t
 
	g_CouÁ
 = 1;

875 
	g‹m¶©e
<>

876 
	g_FunùÜArgum’ts
<
	g_TwoArgum’tFunùÜ
>

878 cÚ¡ 
size_t
 
	g_CouÁ
 = 2;

881 
	g‹m¶©e
<>

882 
	g_FunùÜArgum’ts
<
	g_Th»eArgum’tFunùÜ
>

884 cÚ¡ 
size_t
 
	g_CouÁ
 = 3;

887 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

888 
	s_FunùÜTy³T¿™s


890 
deşty³
(
	t_Argum’tCouÁH–³r
(&(
	t_T
::
	tİ”©Ü
()))è
	t_Argum’tCouÁTy³
;

891 cÚ¡ 
size_t
 
	g_Argum’tCouÁ
 = 
_FunùÜArgum’ts
<
_Argum’tCouÁTy³
>::
_CouÁ
;

893 
deşty³
(
	t_R‘uºTy³CÏssH–³rThunk
(&(
	t_T
::
	tİ”©Ü
()))è
	t_R‘uºTy³
;

894 
deşty³
(
	t_Arg1CÏssH–³rThunk
(&(
	t_T
::
	tİ”©Ü
()))è
	t_Argum’t1Ty³
;

895 
deşty³
(
	t_Arg2CÏssH–³rThunk
(&(
	t_T
::
	tİ”©Ü
()))è
	t_Argum’t2Ty³
;

896 
deşty³
(
	t_Arg3CÏssH–³rThunk
(&(
	t_T
::
	tİ”©Ü
()))è
	t_Argum’t3Ty³
;

899 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

900 
	g_FunùÜTy³T¿™s
<
	g_T
 *>

902 
deşty³
(
	t_Argum’tCouÁH–³r
(
	t¡dx
::
	tdeşv®
<
	t_T
*>())è
	t_Argum’tCouÁTy³
;

903 cÚ¡ 
size_t
 
	g_Argum’tCouÁ
 = 
_FunùÜArgum’ts
<
_Argum’tCouÁTy³
>::
_CouÁ
;

905 
deşty³
(
	t_R‘uºTy³PFNH–³rThunk
(
	t¡dx
::
	tdeşv®
<
	t_T
*>())è
	t_R‘uºTy³
;

906 
deşty³
(
	t_Arg1PFNH–³rThunk
(
	t¡dx
::
	tdeşv®
<
	t_T
*>())è
	t_Argum’t1Ty³
;

907 
deşty³
(
	t_Arg2PFNH–³rThunk
(
	t¡dx
::
	tdeşv®
<
	t_T
*>())è
	t_Argum’t2Ty³
;

908 
deşty³
(
	t_Arg3PFNH–³rThunk
(
	t¡dx
::
	tdeşv®
<
	t_T
*>())è
	t_Argum’t3Ty³
;

911 
	gsk
<> 
_To_sk
();

913 
	g‹m¶©e
 <
ty³Çme
 
	g_FunùiÚ
>‡utØ
_IsVoidCÚv”siÚH–³r
(
_FunùiÚ
 
_Func
, è->y³Çm
deşty³
(_Func(
_To_sk
()), 
¡d
::
Œue_ty³
());

914 
	g‹m¶©e
 <
ty³Çme
 
	g_FunùiÚ
> 
	g¡d
::
çl£_ty³
 
_IsVoidCÚv”siÚH–³r
(
_FunùiÚ
 
_Func
, ...);

916 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
	g¡d
::
Œue_ty³
 
_VoidIsTaskH–³r
(
sk
<
T
> 
_Arg
, );

917 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
	g¡d
::
çl£_ty³
 
_VoidIsTaskH–³r
(
T
 
_Arg
, ...);

919 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Ex³ùedP¬am‘”Ty³
, cÚ¡ 
boŞ
 
	g_IsVoidCÚv”siÚ
 = 
¡d
::
is_§me
<
deşty³
(
_IsVoidCÚv”siÚH–³r
(
¡dx
::
deşv®
<
_FunùiÚ
>(), 0)), 
	g¡d
::
Œue_ty³
>::
v®ue
, cÚ¡ 
size_t
 
	g_CouÁ
 = 
_FunùÜTy³T¿™s
<_FunùiÚ>::
_Argum’tCouÁ
>

920 
	s_FunùiÚTy³T¿™s


922 
ty³Çme
 
	t_Unh©
<
	tty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_FunùiÚ
>::
	t_Argum’t2Ty³
>::
	t_V®ue
 
	t_FuncR‘Ty³
;

923 
¡©ic_as£¹
(
¡d
::
is_§me
<
ty³Çme
 
_FunùÜTy³T¿™s
<
_FunùiÚ
>::
_Argum’t1Ty³
, 
_Ex³ùedP¬am‘”Ty³
>::
v®ue
 ||

924 
¡d
::
is_§me
<
ty³Çme
 
_FunùÜTy³T¿™s
<
_FunùiÚ
>::
_Argum’t1Ty³
, 
sk
<
_Ex³ùedP¬am‘”Ty³
>>::
v®ue
, "incorrect…arameterype forhe callable object in 'then'; consider _ExpectedParameterType orask<_ExpectedParameterType> (see below)");

926 
deşty³
(
	t_VoidIsTaskH–³r
(
	t¡dx
::
	tdeşv®
<
	t_FunùÜTy³T¿™s
<
	t_FunùiÚ
>::
	t_Argum’t1Ty³
>(), 0)è
	t_Takes_sk
;

930 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Ex³ùedP¬am‘”Ty³
, cÚ¡ 
boŞ
 
	g_IsVoidCÚv”siÚ
>

931 
	g_FunùiÚTy³T¿™s
<
	g_FunùiÚ
, 
	g_Ex³ùedP¬am‘”Ty³
, 
	g_IsVoidCÚv”siÚ
, 1>

933 
	t_FuncR‘Ty³
;

934 
¡©ic_as£¹
(
¡d
::
is_§me
<
ty³Çme
 
_FunùÜTy³T¿™s
<
_FunùiÚ
>::
_Argum’t1Ty³
, 
_Ex³ùedP¬am‘”Ty³
>::
v®ue
 ||

935 
¡d
::
is_§me
<
ty³Çme
 
_FunùÜTy³T¿™s
<
_FunùiÚ
>::
_Argum’t1Ty³
, 
sk
<
_Ex³ùedP¬am‘”Ty³
>>::
v®ue
, "incorrect…arameterype forhe callable object in 'then'; consider _ExpectedParameterType orask<_ExpectedParameterType> (see below)");

937 
deşty³
(
	t_VoidIsTaskH–³r
(
	t¡dx
::
	tdeşv®
<
	t_FunùÜTy³T¿™s
<
	t_FunùiÚ
>::
	t_Argum’t1Ty³
>(), 0)è
	t_Takes_sk
;

940 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

941 
	g_FunùiÚTy³T¿™s
<
	g_FunùiÚ
, , 
	gŒue
, 1>

943 
	t_FuncR‘Ty³
;

944 
¡©ic_as£¹
(
¡d
::
is_§me
<
ty³Çme
 
_FunùÜTy³T¿™s
<
_FunùiÚ
>::
_Argum’t1Ty³
, 
deşty³
(
_To_sk
())>::
v®ue
, "incorrect…arameterype forhe callable object in 'then'; consider _ExpectedParameterType orask<_ExpectedParameterType> (see below)");

946 
deşty³
(
	t_VoidIsTaskH–³r
(
	t¡dx
::
	tdeşv®
<
	t_FunùÜTy³T¿™s
<
	t_FunùiÚ
>::
	t_Argum’t1Ty³
>(), 0)è
	t_Takes_sk
;

949 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

950 
	g_FunùiÚTy³T¿™s
<
	g_FunùiÚ
, , 
	gçl£
, 1>

952 
ty³Çme
 
	t_Unh©
<
	tty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_FunùiÚ
>::
	t_Argum’t1Ty³
>::
	t_V®ue
 
	t_FuncR‘Ty³
;

954 
	g¡d
::
	tçl£_ty³
 
	t_Takes_sk
;

957 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Ex³ùedP¬am‘”Ty³
, cÚ¡ 
boŞ
 
	g_IsVoidCÚv”siÚ
>

958 
	g_FunùiÚTy³T¿™s
<
	g_FunùiÚ
, 
	g_Ex³ùedP¬am‘”Ty³
, 
	g_IsVoidCÚv”siÚ
, 0>

960 
	t_FuncR‘Ty³
;

962 
	g¡d
::
	tçl£_ty³
 
	t_Takes_sk
;

965 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_R‘uºTy³
>

966 
	s_CÚtšu©iÚTy³T¿™s


968 
ty³Çme
 
	tsk
<
	tty³Çme
 
	t_TaskTy³T¿™s
<ty³Çm
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_R‘uºTy³
>::
	t_FuncR‘Ty³
>::
	t_TaskR‘Ty³_abi
> 
	t_TaskOfTy³
;

986 
	g‹m¶©e
 <
ty³Çme
 
	g_TaskTy³
,y³Çm
	g_FuncR‘Ty³
>

987 
	s_In™FunùÜTy³T¿™s


989 
ty³Çme
 
	t_TaskTy³T¿™s
<
	t_FuncR‘Ty³
>::
	t_AsyncKšd
 _AsyncKind;

990 cÚ¡ 
boŞ
 
	g_IsAsyncTask
 = 
_TaskTy³T¿™s
<
_FuncR‘Ty³
>::
_IsAsyncTask
;

991 cÚ¡ 
boŞ
 
	g_IsUnw¿µedTaskOrAsync
 = 
_TaskTy³T¿™s
<
_FuncR‘Ty³
>::
_IsUnw¿µedTaskOrAsync
;

994 
	g‹m¶©e
<
ty³Çme
 
	gT
>

995 
	g_In™FunùÜTy³T¿™s
<
	gT
, T>

997 
_Ty³S–eùÜNoAsync
 
	t_AsyncKšd
;

998 cÚ¡ 
boŞ
 
	g_IsAsyncTask
 = 
çl£
;

999 cÚ¡ 
boŞ
 
	g_IsUnw¿µedTaskOrAsync
 = 
çl£
;

1004 
	s_TaskProcThunk


1006 
_TaskProcThunk
(cÚ¡ 
¡d
::
funùiÚ
<
HRESULT
()> & 
_C®lback
) :

1007 
_M_func
(
_C®lback
)

1011 
__cdeş
 
_Bridge
(*
_PD©a
)

1013 
_TaskProcThunk
 *
_PThunk
 = 
»š‹½»t_ÿ¡
<_TaskProcThunk *>(
_PD©a
);

1014 #ià
_MSC_VER
 >= 1800

1015 
_HŞd”
 
_ThunkHŞd”
(
_PThunk
);

1017 
	g_PThunk
->
_M_func
();

1018 #ià
_MSC_VER
 < 1800

1019 
d–‘e
 
	g_PThunk
;

1022 
	g´iv©e
:

1023 #ià
_MSC_VER
 >= 1800

1025 
	s_HŞd”


1027 
_HŞd”
(
_TaskProcThunk
 * 
_PThunk
è: 
_M_pThunk
(_PThunk)

1031 ~
_HŞd”
()

1033 
d–‘e
 
_M_pThunk
;

1036 
_TaskProcThunk
 * 
	g_M_pThunk
;

1038 
	g´iv©e
:

1039 
_HŞd”
& 
İ”©Ü
=(const _Holder&);

1042 
	g¡d
::
funùiÚ
<
HRESULT
()> 
_M_func
;

1043 
	g_TaskProcThunk
& 
	gİ”©Ü
=(cÚ¡ 
_TaskProcThunk
&);

1057 #ià
_MSC_VER
 >= 1800

1058 
	gCÚcu¼’cy
::
	td‘as
::
	t_TaskIÆššgMode_t
 
	t_TaskIÆššgMode
;

1060 
	gCÚcu¼’cy
::
	td‘as
::
	t_TaskIÆššgMode
 _TaskInliningMode;

1062 
_ScheduËFuncW™hAutoIÆše
(cÚ¡ 
¡d
::
funùiÚ
<
HRESULT
()> & 
_Func
, 
_TaskIÆššgMode
 
_IÆššgMode
)

1064 #ià
_MSC_VER
 >= 1800

1065 
	gCÚcu¼’cy
::
d‘as
::
_TaskCŞËùiÚ_t
::
_RunTask
(&
_TaskProcThunk
::
_Bridge
, 
Ãw
 _TaskProcThunk(
_Func
), 
_IÆššgMode
);

1067 
	gCÚcu¼’cy
::
d‘as
::
_SckGu¬d
 
_Gu¬d
;

1068 ià(
	g_Gu¬d
.
_ShouldIÆše
(
_IÆššgMode
))

1070 
_Func
();

1074 
	gCÚcu¼’cy
::
d‘as
::
_Cu¼’tScheduËr
::
_ScheduËTask
(
»š‹½»t_ÿ¡
<
CÚcu¼’cy
::
TaskProc
>(&
_TaskProcThunk
::
_Bridge
), 
Ãw
 _TaskProcThunk(
_Func
));

1078 şas 
	c_CÚ‹xtC®lback


1080 
	g¡d
::
	tfunùiÚ
<
	tHRESULT
()> 
	t_C®lbackFunùiÚ
;

1082 
	gpublic
:

1084 
_CÚ‹xtC®lback
 
_C­tu»Cu¼’t
()

1086 
_CÚ‹xtC®lback
 
_CÚ‹xt
;

1087 
	g_CÚ‹xt
.
_C­tu»
();

1088  
	g_CÚ‹xt
;

1091 ~
_CÚ‹xtC®lback
()

1093 
_Re£t
();

1096 
_CÚ‹xtC®lback
(
boŞ
 
_DeãrC­tu»
 = 
çl£
)

1098 ià(
_DeãrC­tu»
)

1100 
_M_cÚ‹xt
.
_M_ÿ±u»M‘hod
 = 
_S_ÿ±u»Deã¼ed
;

1104 
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
nuÎ±r
;

1109 
_ResŞve
(
boŞ
 
_C­tu»Cu¼’t
)

1111 ià(
	g_M_cÚ‹xt
.
	g_M_ÿ±u»M‘hod
 =ğ
_S_ÿ±u»Deã¼ed
)

1113 
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
 = 
nuÎ±r
;

1115 ià(
	g_C­tu»Cu¼’t
)

1117 ià(
_IsCu¼’tOrigšSTA
())

1119 
_C­tu»
();

1121 #ià
_UITHREADCTXT_SUPPORT


1125 
HRESULT
 
	g_Hr
 = 
C­tu»UiTh»adCÚ‹xt
(&
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
);

1126 ià(
FAILED
(
_Hr
))

1128 
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
nuÎ±r
;

1136 
_C­tu»
()

1138 
HRESULT
 
	g_Hr
 = 
CoG‘ObjeùCÚ‹xt
(
IID_ICÚ‹xtC®lback
, 
»š‹½»t_ÿ¡
<**>(&
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
));

1139 ià(
FAILED
(
_Hr
))

1141 
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
nuÎ±r
;

1145 
_CÚ‹xtC®lback
(cÚ¡ _CÚ‹xtC®lback& 
_Src
)

1147 
_Assign
(
_Src
.
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
);

1150 
_CÚ‹xtC®lback
(_CÚ‹xtC®lback&& 
_Src
)

1152 
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
_Src
.
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
;

1153 
	g_Src
.
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
nuÎ±r
;

1156 
	g_CÚ‹xtC®lback
& 
	gİ”©Ü
=(cÚ¡ 
_CÚ‹xtC®lback
& 
_Src
)

1158 ià(
this
 !ğ&
_Src
)

1160 
_Re£t
();

1161 
_Assign
(
_Src
.
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
);

1163  *
	gthis
;

1166 
	g_CÚ‹xtC®lback
& 
	gİ”©Ü
=(
_CÚ‹xtC®lback
&& 
_Src
)

1168 ià(
this
 !ğ&
_Src
)

1170 
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
 = 
_Src
._M_context._M_pContextCallback;

1171 
	g_Src
.
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
nuÎ±r
;

1173  *
	gthis
;

1176 
boŞ
 
_HasC­tu»dCÚ‹xt
() const

1178 
_CONCRT_ASSERT
(
_M_cÚ‹xt
.
_M_ÿ±u»M‘hod
 !ğ
_S_ÿ±u»Deã¼ed
);

1179  (
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 !ğ
nuÎ±r
);

1182 
HRESULT
 
_C®lInCÚ‹xt
(
_C®lbackFunùiÚ
 
_Func
) const

1184 ià(!
_HasC­tu»dCÚ‹xt
())

1186 
_Func
();

1190 
ComC®lD©a
 
	gÿÎD©a
;

1191 
Z”oMemÜy
(&
ÿÎD©a
, (callData));

1192 
	gÿÎD©a
.
	gpU£rDefšed
 = 
»š‹½»t_ÿ¡
<*>(&
_Func
);

1194 
HRESULT
 
	g_Hr
 = 
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
->
CÚ‹xtC®lback
(&
_Bridge
, &
ÿÎD©a
, 
IID_IC®lbackW™hNoR“Á¿ncyToAµliÿtiÚSTA
, 5, 
nuÎ±r
);

1195 ià(
FAILED
(
_Hr
))

1197  
	g_Hr
;

1200  
	gS_OK
;

1203 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
_CÚ‹xtC®lback
& 
_Rhs
) const

1205  (
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
 =ğ
_Rhs
._M_context._M_pContextCallback);

1208 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
_CÚ‹xtC®lback
& 
_Rhs
) const

1210  !(
İ”©Ü
==(
_Rhs
));

1213 
	g´iv©e
:

1215 
_Re£t
()

1217 ià(
_M_cÚ‹xt
.
_M_ÿ±u»M‘hod
 !ğ
_S_ÿ±u»Deã¼ed
 && _M_cÚ‹xt.
_M_pCÚ‹xtC®lback
 !ğ
nuÎ±r
)

1219 
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
->
R–—£
();

1223 
_Assign
(
ICÚ‹xtC®lback
 *
_PCÚ‹xtC®lback
)

1225 
	g_M_cÚ‹xt
.
	g_M_pCÚ‹xtC®lback
 = 
_PCÚ‹xtC®lback
;

1226 ià(
	g_M_cÚ‹xt
.
	g_M_ÿ±u»M‘hod
 !ğ
_S_ÿ±u»Deã¼ed
 && 
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
 !ğ
nuÎ±r
)

1228 
_M_cÚ‹xt
.
_M_pCÚ‹xtC®lback
->
AddRef
();

1232 
HRESULT
 
__¡dÿÎ
 
_Bridge
(
ComC®lD©a
 *
_PP¬am
)

1234 
_C®lbackFunùiÚ
 *
	gpFunc
 = 
»š‹½»t_ÿ¡
<_C®lbackFunùiÚ *>(
_PP¬am
->
pU£rDefšed
);

1235  (*
	gpFunc
)();

1239 
boŞ
 
_IsCu¼’tOrigšSTA
()

1241 
APTTYPE
 
	g_A±Ty³
;

1242 
APTTYPEQUALIFIER
 
	g_A±Ty³Qu®if›r
;

1244 
HRESULT
 
	ghr
 = 
CoG‘A·¹m’tTy³
(&
_A±Ty³
, &
_A±Ty³Qu®if›r
);

1245 ià(
SUCCEEDED
(
hr
))

1251 
	g_A±Ty³
)

1253 
	gAPTTYPE_MAINSTA
:

1254 
APTTYPE_STA
:

1255  
Œue
;

1260  
	gçl£
;

1265 
ICÚ‹xtC®lback
 *
	g_M_pCÚ‹xtC®lback
;

1266 
size_t
 
	g_M_ÿ±u»M‘hod
;

1267 } 
	g_M_cÚ‹xt
;

1269 cÚ¡ 
size_t
 
	g_S_ÿ±u»Deã¼ed
 = 1;

1272 #ià
_MSC_VER
 >= 1800

1273 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1274 
	s_ResuÉHŞd”


1276 
S‘
(cÚ¡ 
_Ty³
& 
_ty³
)

1278 
	g_ResuÉ
 = 
_ty³
;

1281 
_Ty³
 
G‘
()

1283  
	g_ResuÉ
;

1286 
_Ty³
 
	g_ResuÉ
;

1289 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1290 
	g_ResuÉHŞd”
<
	g_Ty³
*>

1292 
S‘
(
_Ty³
* cÚ¡ & 
_ty³
)

1294 
	g_M_ResuÉ
 = 
_ty³
;

1297 
_Ty³
* 
G‘
()

1299  
	g_M_ResuÉ
.
G‘
();

1301 
	g´iv©e
:

1304 
Age
<
_Ty³
*> 
_M_ResuÉ
;

1310 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1311 
	g_ResuÉHŞd”
<
	g¡d
::
veùÜ
<
_Ty³
*>>

1313 
S‘
(cÚ¡ 
¡d
::
veùÜ
<
_Ty³
*>& 
_ty³
)

1315 
_ResuÉ
.
»£rve
(
_ty³
.
size
());

1317 autØ
	g_PTask
 = 
_ty³
.
begš
(); _PTask !ğ_ty³.
’d
(); ++_PTask)

1319 
	g_ResuÉ
.
em¶aû_back
(*
_PTask
);

1323 
	g¡d
::
veùÜ
<
_Ty³
*> 
G‘
()

1326 
¡d
::
veùÜ
<
_Ty³
*> 
_R‘uº
;

1327 
	g_R‘uº
.
»£rve
(
_ResuÉ
.
size
());

1329 autØ
	g_PTask
 = 
_ResuÉ
.
begš
(); _PTask !ğ_ResuÉ.
’d
(); ++_PTask)

1331 
	g_R‘uº
.
push_back
(
_PTask
->
G‘
());

1334  
	g_R‘uº
;

1337 
	g¡d
::
veùÜ
< 
Age
<
_Ty³
*> > 
_ResuÉ
;

1340 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1341 
	g_ResuÉHŞd”
<
	g¡d
::
·œ
<
_Ty³
*, *> >

1343 
S‘
(cÚ¡ 
¡d
::
·œ
<
_Ty³
*, 
size_t
>& 
_ty³
)

1345 
	g_M_ResuÉ
 = 
_ty³
;

1348 
	g¡d
::
·œ
<
_Ty³
*, 
	gsize_t
> 
G‘
()

1350  
	g¡d
::
make_·œ
(
_M_ResuÉ
.
fœ¡
, _M_ResuÉ.
£cÚd
);

1352 
	g´iv©e
:

1353 
¡d
::
·œ
<
Age
<
_Ty³
*>, 
	gsize_t
> 
	g_M_ResuÉ
;

1356 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1357 
	s_ResuÉCÚ‹xt


1359 
_CÚ‹xtC®lback
 
_G‘CÚ‹xt
(
boŞ
 )

1361  
_CÚ‹xtC®lback
();

1364 
_Ty³
 
_G‘V®ue
(_Ty³ 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
 & , 
boŞ
 )

1366  
	g_ObjInCtx
;

1370 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
, 
size_t
 
	gN
 = 0, 
boŞ
 
	gbIsA¼ay
 = 
¡d
::
is_¬¿y
<
_Ty³
>::
v®ue
>

1371 
	s_M¬sh®H–³r


1374 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
, 
size_t
 
	gN
>

1375 
	g_M¬sh®H–³r
<
	g_Ty³
, 
	gN
, 
	gŒue
>

1377 
_Ty³
* 
_P”fÜm
(_Ty³(&
_ObjInCtx
)[
N
], cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
)

1379 
¡©ic_as£¹
(
__is_v®id_wš¹_ty³
(
_Ty³
*), "must be‡ WinRT‡rray compatibleype");

1380 ià(
	g_ObjInCtx
 =ğ
nuÎ±r
)

1382  
nuÎ±r
;

1385 
HRESULT
 
	g_Hr
;

1386 
ISŒ—m
 * 
	g_PSŒ—m
;

1387 
	g_Ctx
.
_C®lInCÚ‹xt
([&](è-> 
HRESULT
 {

1391 
IUnknown
 * 
_PUnk
 = 
wš¹_¬¿y_ty³
::
ü—‹
(
_ObjInCtx
, 
N
);

1392 
_Hr
 = 
CoM¬sh®IÁ”Th»adIÁ”çûInSŒ—m
(
wš¹_ty³
<
_Ty³
>::
g‘uuid
(), 
_PUnk
, &
_PSŒ—m
);

1393  
S_OK
;

1397 
_CONCRT_ASSERT
(
SUCCEEDED
(
_Hr
));

1399 
_Ty³
* 
	g_Proxy
;

1403 
	g_Hr
 = 
CoG‘IÁ”çûAndR–—£SŒ—m
(
_PSŒ—m
, 
wš¹_ty³
<
_Ty³
>::
g‘uuid
(), 
»š‹½»t_ÿ¡
<**>(&
_Proxy
));

1404 ià(
FAILED
(
_Hr
))

1406 
throw
 
	g¡d
::
make_exû±iÚ_±r
(
_Hr
);

1408  
	g_Proxy
;

1411 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1412 
	g_M¬sh®H–³r
<
	g_Ty³
, 0, 
	gçl£
>

1414 
_Ty³
* 
_P”fÜm
(_Ty³* 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
)

1416 
¡©ic_as£¹
(
¡d
::
is_ba£_of
<
IUnknown
, 
_Ty³
>::
v®ue
 || 
__is_v®id_wš¹_ty³
(_Type), "must be‡ COM or WinRType");

1417 ià(
	g_ObjInCtx
 =ğ
nuÎ±r
)

1419  
nuÎ±r
;

1422 
HRESULT
 
	g_Hr
;

1423 
ISŒ—m
 * 
	g_PSŒ—m
;

1424 
	g_Ctx
.
_C®lInCÚ‹xt
([&](è-> 
HRESULT
 {

1428 
IUnknown
 * 
_PUnk
 = 
wš¹_ty³
<
_Ty³
>::
ü—‹
(
_ObjInCtx
);

1429 
_Hr
 = 
CoM¬sh®IÁ”Th»adIÁ”çûInSŒ—m
(
wš¹_ty³
<
_Ty³
>::
g‘uuid
(), 
_PUnk
, &
_PSŒ—m
);

1430  
S_OK
;

1434 
_CONCRT_ASSERT
(
SUCCEEDED
(
_Hr
));

1436 
_Ty³
* 
	g_Proxy
;

1440 
	g_Hr
 = 
CoG‘IÁ”çûAndR–—£SŒ—m
(
_PSŒ—m
, 
wš¹_ty³
<
_Ty³
>::
g‘uuid
(), 
»š‹½»t_ÿ¡
<**>(&
_Proxy
));

1441 ià(
FAILED
(
_Hr
))

1443 
throw
 
	g¡d
::
make_exû±iÚ_±r
(
_Hr
);

1445  
	g_Proxy
;

1451 
	g‹m¶©e
<>

1452 
	g_M¬sh®H–³r
<
	gHSTRING__
>

1454 
HSTRING
 
_P”fÜm
(HSTRING 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
)

1456  
	g_ObjInCtx
;

1460 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1461 
_Ty³
* 
_M¬sh®
(_Ty³* 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
)

1463  
	g_M¬sh®H–³r
<
	g_Ty³
>::
_P”fÜm
(
_ObjInCtx
, 
_Ctx
);

1466 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1467 
	s_InCÚ‹xt


1469 
_Ty³
 
_G‘
(_Ty³ 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
)

1471  
	g_ObjInCtx
;

1475 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1476 
	g_InCÚ‹xt
<
	g_Ty³
*>

1478 
_Ty³
* 
_G‘
(_Ty³* 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
)

1480 
_CÚ‹xtC®lback
 
	g_Cu¼’tCÚ‹xt
 = _CÚ‹xtC®lback::
_C­tu»Cu¼’t
();

1481 ià(!
	g_Ctx
.
_HasC­tu»dCÚ‹xt
(è|| _Ctx =ğ
_Cu¼’tCÚ‹xt
)

1483  
_ObjInCtx
;

1489  
	g_M¬sh®
<
	g_Ty³
>(
	g_ObjInCtx
, 
	g_Ctx
);

1493 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1494 
	g_ResuÉCÚ‹xt
<
	g_Ty³
*>

1496 
_Ty³
* 
_G‘V®ue
(_Ty³* 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
, 
boŞ
 )

1498  
	g_InCÚ‹xt
<
	g_Ty³
*>::
_G‘
(
_ObjInCtx
, 
_Ctx
);

1501 
_CÚ‹xtC®lback
 
_G‘CÚ‹xt
(
boŞ
 )

1503  
	g_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
();

1510 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1511 
	g_ResuÉCÚ‹xt
<
	g¡d
::
veùÜ
<
_Ty³
*>>

1513 
¡d
::
veùÜ
<
_Ty³
*> 
_G‘V®ue
(¡d::veùÜ<_Ty³*> 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
, 
boŞ
 
_RuÁimeAgg»g©e
)

1515 ià(!
	g_RuÁimeAgg»g©e
)

1517  
	g_ObjInCtx
;

1520 
_CÚ‹xtC®lback
 
	g_Cu¼’tCÚ‹xt
 = _CÚ‹xtC®lback::
_C­tu»Cu¼’t
();

1521 ià(!
	g_Ctx
.
_HasC­tu»dCÚ‹xt
(è|| _Ctx =ğ
_Cu¼’tCÚ‹xt
)

1523  
_ObjInCtx
;

1526 autØ
	g_It
 = 
_ObjInCtx
.
begš
(); _Iˆ!ğ_ObjInCtx.
’d
(); ++_It)

1528 *
	g_It
 = 
_M¬sh®
<
_Ty³
>(*
_It
, 
	g_Ctx
);

1531  
	g_ObjInCtx
;

1534 
_CÚ‹xtC®lback
 
_G‘CÚ‹xt
(
boŞ
 
_RuÁimeAgg»g©e
)

1536 ià(!
	g_RuÁimeAgg»g©e
)

1538  
_CÚ‹xtC®lback
();

1542  
	g_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
();

1547 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

1548 
	g_ResuÉCÚ‹xt
<
	g¡d
::
·œ
<
_Ty³
*, 
	gsize_t
>>

1550 
	g¡d
::
·œ
<
_Ty³
*, 
	gsize_t
> 
_G‘V®ue
(
¡d
::·œ<_Ty³*, 
size_t
> 
_ObjInCtx
, cÚ¡ 
_CÚ‹xtC®lback
& 
_Ctx
, 
boŞ
 
_RuÁimeAgg»g©e
)

1552 ià(!
	g_RuÁimeAgg»g©e
)

1554  
	g_ObjInCtx
;

1557 
_CÚ‹xtC®lback
 
	g_Cu¼’tCÚ‹xt
 = _CÚ‹xtC®lback::
_C­tu»Cu¼’t
();

1558 ià(!
	g_Ctx
.
_HasC­tu»dCÚ‹xt
(è|| _Ctx =ğ
_Cu¼’tCÚ‹xt
)

1560  
_ObjInCtx
;

1563  
	g¡d
::
·œ
<
_Ty³
*, 
	gsize_t
>(
	g_M¬sh®
<
	g_Ty³
>(
	g_ObjInCtx
.
	gfœ¡
, 
	g_Ctx
), _ObjInCtx.
	g£cÚd
);

1566 
_CÚ‹xtC®lback
 
_G‘CÚ‹xt
(
boŞ
 
_RuÁimeAgg»g©e
)

1568 ià(!
	g_RuÁimeAgg»g©e
)

1570  
_CÚ‹xtC®lback
();

1574  
	g_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
();

1582 
	s_Exû±iÚHŞd”


1584 #ià
_MSC_VER
 >= 1800

1585 
	g´iv©e
:

1586 
R•ÜtUnhªdËdE¼Ü
()

1588 ià(
_M_wšRTExû±iÚ
 !ğ
nuÎ±r
)

1590 
throw
 
_M_wšRTExû±iÚ
.
G‘
();

1593 
	gpublic
:

1594 
ex¶ic™
 
_Exû±iÚHŞd”
(cÚ¡ 
¡d
::
exû±iÚ_±r
& 
_E
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 &
_¡ackT¿û
) :

1595 
_M_exû±iÚOb£rved
(0), 
_M_¡dExû±iÚ
(
_E
), 
_M_¡ackT¿û
(
_¡ackT¿û
)

1599 
ex¶ic™
 
_Exû±iÚHŞd”
(
IRe¡riùedE¼ÜInfo
*& 
_E
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 &
_¡ackT¿û
) :

1600 
_M_exû±iÚOb£rved
(0), 
_M_wšRTExû±iÚ
(
_E
), 
_M_¡ackT¿û
(
_¡ackT¿û
)

1604 
ex¶ic™
 
_Exû±iÚHŞd”
(cÚ¡ 
¡d
::
exû±iÚ_±r
& 
_E
, * 
_SourûAdd»ssHšt
) :

1605 
_M_exû±iÚOb£rved
(0), 
_M_¡dExû±iÚ
(
_E
), 
_M_di§s£mbËMe
(
_SourûAdd»ssHšt
)

1609 
ex¶ic™
 
_Exû±iÚHŞd”
(
IRe¡riùedE¼ÜInfo
*& 
_E
, * 
_SourûAdd»ssHšt
) :

1610 
_M_exû±iÚOb£rved
(0), 
_M_di§s£mbËMe
(
_SourûAdd»ssHšt
), 
_M_wšRTExû±iÚ
(
_E
)

1614 
__deş¥ec
(
nošlše
)

1615 ~
_Exû±iÚHŞd”
()

1617 ià(
	g_M_exû±iÚOb£rved
 == 0)

1619 #ià
_MSC_VER
 >= 1800

1623 
_REPORT_PPLTASK_UNOBSERVED_EXCEPTION
();

1627 
	gCÚcu¼’cy
::
d‘as
::
_R•ÜtUnob£rvedExû±iÚ
();

1632 
_R‘hrowU£rExû±iÚ
()

1634 ià(
	g_M_exû±iÚOb£rved
 == 0)

1636 #ià
_MSC_VER
 >= 1800

1637 
CÚcu¼’cy
::
d‘as
::
©omic_exchªge
(
_M_exû±iÚOb£rved
, 1l);

1639 
_IÁ”lockedExchªge
(&
_M_exû±iÚOb£rved
, 1);

1643 ià(
	g_M_wšRTExû±iÚ
 !ğ
nuÎ±r
)

1645 
throw
 
_M_wšRTExû±iÚ
.
G‘
();

1647 
	g¡d
::
»throw_exû±iÚ
(
_M_¡dExû±iÚ
);

1652 #ià
_MSC_VER
 >= 1800

1653 
	gCÚcu¼’cy
::
d‘as
::
©omic_lÚg
 
_M_exû±iÚOb£rved
;

1655 vŞ©
	g_M_exû±iÚOb£rved
;

1659 
	g¡d
::
exû±iÚ_±r
 
_M_¡dExû±iÚ
;

1660 
	gMiüosoá
::
WRL
::
ComPŒ
<
IRe¡riùedE¼ÜInfo
> 
_M_wšRTExû±iÚ
;

1666 #ià
_MSC_VER
 >= 1800

1667 
_TaskC»©iÚC®l¡ack
 
	g_M_¡ackT¿û
;

1669 * 
	g_M_di§s£mbËMe
;

1673 #iâdeà
RUNTIMECLASS_CÚcu¼’cy_wš¹_d‘as__AsyncInfoIm¶_DEFINED


1674 
	#RUNTIMECLASS_CÚcu¼’cy_wš¹_d‘as__AsyncInfoIm¶_DEFINED


	)

1675 cÚ¡ 
__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_CÚcu¼’cy_wš¹_d‘as__AsyncInfoIm¶
[] = 
L
"Concurrency_winrt.details._AsyncInfoImpl";

1681 
	g‹m¶©e
<
ty³Çme
 
	g_AsyncO³¿tiÚTy³
,y³Çm
	g_Com¶‘iÚHªdËrTy³
,y³Çm
	g_ResuÉ_abi
>

1682 
_AsyncInfoIm¶
 
	gab¡¿ù
 : 
public
 
Miüosoá
::
WRL
::
RuÁimeCÏss
<

1683 
Miüosoá
::
WRL
::
RuÁimeCÏssFÏgs
< Miüosoá::WRL::
RuÁimeCÏssTy³
::
WšRt
>,

1684 
	gMiüosoá
::
WRL
::
Im¶em’ts
<
Miüosoá
::WRL::
AsyncBa£
<
_Com¶‘iÚHªdËrTy³
>>>

1686 
In¥eùabËCÏss
(
RuÁimeCÏss_CÚcu¼’cy_wš¹_d‘as__AsyncInfoIm¶
, 
Ba£Tru¡
)

1687 
	gpublic
:

1689 #ià
_MSC_VER
 >= 1800

1690 
Age
<
_AsyncO³¿tiÚTy³
> 
_M_asyncInfo
;

1692 
	gMiüosoá
::
WRL
::
ComPŒ
<
_AsyncO³¿tiÚTy³
> 
_M_asyncInfo
;

1695 
_CÚ‹xtC®lback
 
	g_M_asyncInfoCÚ‹xt
;

1698 
	gMiüosoá
::
WRL
::
ComPŒ
<
_Com¶‘iÚHªdËrTy³
> 
_M_Com¶‘edHªdËr
;

1700 
_AsyncInfoIm¶
(
_AsyncO³¿tiÚTy³
* 
_AsyncInfo
è: 
_M_asyncInfo
(_AsyncInfo)

1701 #ià
_MSC_VER
 < 1800

1702 , 
_M_asyncInfoCÚ‹xt
(
_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
())

1706 
public
:

1707 
vœtu®
 
HRESULT
 
OnS¹
(è{  
S_OK
; }

1708 
vœtu®
 
OnCªûl
() {

1709 
	gMiüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
> 
pAsyncInfo
;

1710 
HRESULT
 
	ghr
;

1711 #ià
_MSC_VER
 >= 1800

1712 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
G‘
()->
Qu”yIÁ”çû
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>(
pAsyncInfo
.
G‘Add»ssOf
())))

1714 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
As
(&
pAsyncInfo
)))

1716 
pAsyncInfo
->
Cªûl
();

1718 
throw
 
	g¡d
::
make_exû±iÚ_±r
(
hr
);

1720 
vœtu®
 
OnClo£
() {

1721 
	gMiüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
> 
pAsyncInfo
;

1722 
HRESULT
 
	ghr
;

1723 #ià
_MSC_VER
 >= 1800

1724 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
G‘
()->
Qu”yIÁ”çû
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>(
pAsyncInfo
.
G‘Add»ssOf
())))

1726 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
As
(&
pAsyncInfo
)))

1728 
pAsyncInfo
->
Clo£
();

1730 
throw
 
	g¡d
::
make_exû±iÚ_±r
(
hr
);

1733 
vœtu®
 
STDMETHODIMP
 
g‘_E¼ÜCode
(
HRESULT
* 
”rÜCode
)

1735 
	gMiüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
> 
pAsyncInfo
;

1736 
HRESULT
 
	ghr
;

1737 #ià
_MSC_VER
 >= 1800

1738 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
G‘
()->
Qu”yIÁ”çû
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>(
pAsyncInfo
.
G‘Add»ssOf
())))

1740 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
As
(&
pAsyncInfo
)))

1742  
pAsyncInfo
->
g‘_E¼ÜCode
(
”rÜCode
);

1743  
	ghr
;

1746 
vœtu®
 
STDMETHODIMP
 
g‘_Id
(
UINT
* 
id
)

1748 
	gMiüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
> 
pAsyncInfo
;

1749 
HRESULT
 
	ghr
;

1750 #ià
_MSC_VER
 >= 1800

1751 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
G‘
()->
Qu”yIÁ”çû
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>(
pAsyncInfo
.
G‘Add»ssOf
())))

1753 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
As
(&
pAsyncInfo
)))

1755  
pAsyncInfo
->
g‘_Id
(
id
);

1756  
	ghr
;

1759 
vœtu®
 
STDMETHODIMP
 
g‘_Stus
(
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
 *
¡©us
)

1761 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
> 
pAsyncInfo
;

1762 
HRESULT
 
	ghr
;

1763 #ià
_MSC_VER
 >= 1800

1764 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
G‘
()->
Qu”yIÁ”çû
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>(
pAsyncInfo
.
G‘Add»ssOf
())))

1766 ià(
SUCCEEDED
(
hr
 = 
_M_asyncInfo
.
As
(&
pAsyncInfo
)))

1768  
pAsyncInfo
->
g‘_Stus
(
¡©us
);

1769  
	ghr
;

1772 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
_ResuÉ_abi
*è{ 
throw
 
	g¡d
::
ruÁime_”rÜ
("derived class must implement"); }

1774 
vœtu®
 
STDMETHODIMP
 
g‘_Com¶‘ed
(
_Com¶‘iÚHªdËrTy³
** 
hªdËr
)

1776 ià(!
	ghªdËr
è 
	gE_POINTER
;

1777 
	g_M_Com¶‘edHªdËr
.
CİyTo
(
hªdËr
);

1778  
	gS_OK
;

1781 
vœtu®
 
STDMETHODIMP
 
put_Com¶‘ed
(
_Com¶‘iÚHªdËrTy³
* 
v®ue
)

1783 
	g_M_Com¶‘edHªdËr
 = 
v®ue
;

1784 
	gMiüosoá
::
WRL
::
ComPŒ
<
_Com¶‘iÚHªdËrTy³
> 
hªdËr
 = 
Miüosoá
::WRL::
C®lback
<_Com¶‘iÚHªdËrTy³>([&](
_AsyncO³¿tiÚTy³
*, 
	gABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
 
¡©us
è-> 
HRESULT
 {

1785 #ià
_MSC_VER
 < 1800

1790 
_M_asyncInfo
 = 
_ResuÉCÚ‹xt
<
_AsyncO³¿tiÚTy³
*>::
_G‘V®ue
(_M_asyncInfo.
G‘
(), 
_M_asyncInfoCÚ‹xt
, 
çl£
);

1792  
	g_M_Com¶‘edHªdËr
->
Invoke
(
_M_asyncInfo
.
G‘
(), 
¡©us
);

1794 #ià
_MSC_VER
 >= 1800

1795  
	g_M_asyncInfo
.
G‘
()->
put_Com¶‘ed
(
hªdËr
.Get());

1797  
	g_M_asyncInfo
->
put_Com¶‘ed
(
hªdËr
.
G‘
());

1802 cÚ¡ 
__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
[] = 
L
"_IAsyncOperationToAsyncOperationConverter";

1807 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉ
>

1808 
	g_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
 :

1809 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<
_ResuÉ
>,

1810 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚCom¶‘edHªdËr
<
_ResuÉ
>,

1811 
ty³Çme
 
	gABI
::
Wšdows
::
Found©iÚ
::
IÁ”Çl
::
G‘AbiTy³
<
deşty³
(
_Unw¿pAsyncO³¿tiÚS–eùÜ
(
¡dx
::
deşv®
<
ABI
::Wšdows::Found©iÚ::
IAsyncO³¿tiÚ
<
_ResuÉ
>*>()))>::
ty³
>

1813 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_Unw¿pAsyncO³¿tiÚS–eùÜ
(
	t¡dx
::
	tdeşv®
<ABI::Wšdows::Found©iÚ::
	tIAsyncO³¿tiÚ
<
	t_ResuÉ
>*>()))>::
	tty³
 
	t_ResuÉ_abi
;

1815 
In¥eùabËCÏss
(
RuÁimeCÏss_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
, 
Ba£Tru¡
)

1816 
	gpublic
:

1817 
_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<
_ResuÉ
>* 
_O³¿tiÚ
) :

1818 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<
_ResuÉ
>,

1819 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚCom¶‘edHªdËr
<
_ResuÉ
>,

1820 
	g_ResuÉ_abi
>(
	g_O³¿tiÚ
) {}

1821 
	gpublic
:

1822 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
_ResuÉ_abi
* 
»suÉs
è
ov”ride
 {

1823 ià(!
»suÉs
è 
E_POINTER
;

1824 #ià
_MSC_VER
 >= 1800

1825  
	g_M_asyncInfo
.
G‘
()->
G‘ResuÉs
(
»suÉs
);

1827  
	g_M_asyncInfo
->
G‘ResuÉs
(
»suÉs
);

1832 cÚ¡ 
__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
[] = 
L
"_IAsyncOperationWithProgressToAsyncOperationConverter";

1837 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉ
,y³Çm
	g_Prog»ss
>

1838 
	g_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
 :

1839 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_ResuÉ
, 
	g_Prog»ss
>,

1840 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ssCom¶‘edHªdËr
<
_ResuÉ
, 
	g_Prog»ss
>,

1841 
ty³Çme
 
	gABI
::
Wšdows
::
Found©iÚ
::
IÁ”Çl
::
G‘AbiTy³
<
deşty³
(
_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(
¡dx
::
deşv®
<
ABI
::Wšdows::Found©iÚ::
IAsyncO³¿tiÚW™hProg»ss
<
_ResuÉ
, 
_Prog»ss
>*>()))>::
ty³
>

1843 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(
	t¡dx
::
	tdeşv®
<ABI::Wšdows::Found©iÚ::
	tIAsyncO³¿tiÚW™hProg»ss
<
	t_ResuÉ
, 
	t_Prog»ss
>*>()))>::
	tty³
 
	t_ResuÉ_abi
;

1845 
In¥eùabËCÏss
(
RuÁimeCÏss_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
, 
Ba£Tru¡
)

1846 
	gpublic
:

1847 
_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_ResuÉ
, 
_Prog»ss
>* 
_O³¿tiÚ
) :

1848 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_ResuÉ
, 
	g_Prog»ss
>,

1849 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ssCom¶‘edHªdËr
<
_ResuÉ
, 
	g_Prog»ss
>,

1850 
	g_ResuÉ_abi
>(
	g_O³¿tiÚ
) {}

1851 
	gpublic
:

1852 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
_ResuÉ_abi
* 
»suÉs
è
ov”ride
 {

1853 ià(!
»suÉs
è 
E_POINTER
;

1854 #ià
_MSC_VER
 >= 1800

1855  
	g_M_asyncInfo
.
G‘
()->
G‘ResuÉs
(
»suÉs
);

1857  
	g_M_asyncInfo
->
G‘ResuÉs
(
»suÉs
);

1862 cÚ¡ 
__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
[] = 
L
"_IAsyncActionToAsyncOperationConverter";

1867 
	g_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
 :

1868 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
,

1869 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚCom¶‘edHªdËr
,

1870 
	g_Un™_ty³
>

1872 
In¥eùabËCÏss
(
RuÁimeCÏss_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
, 
Ba£Tru¡
)

1873 
	gpublic
:

1874 
_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
* 
_O³¿tiÚ
) :

1875 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
,

1876 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚCom¶‘edHªdËr
,

1877 
	g_Un™_ty³
>(
	g_O³¿tiÚ
) {}

1879 
	gpublic
:

1880 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
d‘as
::
_Un™_ty³
* 
»suÉs
)

1882 ià(!
»suÉs
è 
E_POINTER
;

1884 #ià
_MSC_VER
 >= 1800

1885 
HRESULT
 
	ghr
 = 
_M_asyncInfo
.
G‘
()->
G‘ResuÉs
();

1887 
HRESULT
 
	ghr
 = 
_M_asyncInfo
->
G‘ResuÉs
();

1889 ià(
SUCCEEDED
(
hr
)è*
	g»suÉs
 = 
_Un™_ty³
();

1890  
	ghr
;

1894 cÚ¡ 
__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
[] = 
L
"_IAsyncActionWithProgressToAsyncOperationConverter";

1899 
	g‹m¶©e
<
ty³Çme
 
	g_Prog»ss
>

1900 
	g_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
 :

1901 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_Prog»ss
>,

1902 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ssCom¶‘edHªdËr
<
_Prog»ss
>,

1903 
	g_Un™_ty³
>

1905 
In¥eùabËCÏss
(
RuÁimeCÏss_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
, 
Ba£Tru¡
)

1906 
	gpublic
:

1907 
_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_Prog»ss
>* 
_AùiÚ
) :

1908 
_AsyncInfoIm¶
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_Prog»ss
>,

1909 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ssCom¶‘edHªdËr
<
_Prog»ss
>,

1910 
	g_Un™_ty³
>(
	g_AùiÚ
) {}

1911 
	gpublic
:

1912 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
_Un™_ty³
* 
»suÉs
è
ov”ride


1914 ià(!
»suÉs
è 
E_POINTER
;

1916 #ià
_MSC_VER
 >= 1800

1917 
HRESULT
 
	ghr
 = 
_M_asyncInfo
.
G‘
()->
G‘ResuÉs
();

1919 
HRESULT
 
	ghr
 = 
_M_asyncInfo
->
G‘ResuÉs
();

1921 ià(
SUCCEEDED
(
hr
)è*
	g»suÉs
 = 
_Un™_ty³
();

1922  
	ghr
;

1934 şas 
	csk_cÚtšu©iÚ_cÚ‹xt
 : 
public
 
d‘as
::
_CÚ‹xtC®lback


1936 
public
:

1955 
sk_cÚtšu©iÚ_cÚ‹xt
 
u£_deçuÉ
()

1958  
sk_cÚtšu©iÚ_cÚ‹xt
(
Œue
);

1975 
sk_cÚtšu©iÚ_cÚ‹xt
 
u£_¬b™¿ry
()

1977 
sk_cÚtšu©iÚ_cÚ‹xt
 
_Arb™¿ry
(
Œue
);

1978 
	g_Arb™¿ry
.
_ResŞve
(
çl£
);

1979  
	g_Arb™¿ry
;

1996 
sk_cÚtšu©iÚ_cÚ‹xt
 
u£_cu¼’t
()

1998 
sk_cÚtšu©iÚ_cÚ‹xt
 
_Cu¼’t
(
Œue
);

1999 
	g_Cu¼’t
.
_ResŞve
(
Œue
);

2000  
	g_Cu¼’t
;

2003 
	g´iv©e
:

2005 
sk_cÚtšu©iÚ_cÚ‹xt
(
boŞ
 
_DeãrC­tu»
 = 
çl£
è: 
d‘as
::
_CÚ‹xtC®lback
(_DeferCapture)

2010 #ià
_MSC_VER
 >= 1800

2011 
şass
 
	gsk_İtiÚs
;

2012 
Çme¥aû
 
	gd‘as


2014 
	s_IÁ”Çl_sk_İtiÚs


2016 
boŞ
 
	g_M_hasP»£tC»©iÚC®l¡ack
;

2017 
_TaskC»©iÚC®l¡ack
 
	g_M_´e£tC»©iÚC®l¡ack
;

2019 
_£t_ü—tiÚ_ÿÎ¡ack
(cÚ¡ 
_TaskC»©iÚC®l¡ack
 &
_ÿÎ¡ack
)

2021 
	g_M_hasP»£tC»©iÚC®l¡ack
 = 
Œue
;

2022 
	g_M_´e£tC»©iÚC®l¡ack
 = 
_ÿÎ¡ack
;

2024 
_IÁ”Çl_sk_İtiÚs
()

2026 
	g_M_hasP»£tC»©iÚC®l¡ack
 = 
çl£
;

2030 
šlše
 
	g_IÁ”Çl_sk_İtiÚs
 &
_g‘_š‹º®_sk_İtiÚs
(
sk_İtiÚs
 &
İtiÚs
);

2031 
šlše
 cÚ¡ 
	g_IÁ”Çl_sk_İtiÚs
 &
_g‘_š‹º®_sk_İtiÚs
(cÚ¡ 
sk_İtiÚs
 &
İtiÚs
);

2036 şas 
	csk_İtiÚs


2038 
	gpublic
:

2044 
sk_İtiÚs
()

2045 : 
_M_ScheduËr
(
CÚcu¼’cy
::
g‘_amb›Á_scheduËr
()),

2046 
_M_CªûÎ©iÚTok’
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
()),

2047 
_M_CÚtšu©iÚCÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
()),

2048 
_M_HasCªûÎ©iÚTok’
(
çl£
),

2049 
_M_HasScheduËr
(
çl£
)

2056 
sk_İtiÚs
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_Tok’
)

2057 : 
_M_ScheduËr
(
CÚcu¼’cy
::
g‘_amb›Á_scheduËr
()),

2058 
_M_CªûÎ©iÚTok’
(
_Tok’
),

2059 
_M_CÚtšu©iÚCÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
()),

2060 
_M_HasCªûÎ©iÚTok’
(
Œue
),

2061 
_M_HasScheduËr
(
çl£
)

2068 
sk_İtiÚs
(
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
)

2069 : 
_M_ScheduËr
(
CÚcu¼’cy
::
g‘_amb›Á_scheduËr
()),

2070 
_M_CªûÎ©iÚTok’
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
()),

2071 
_M_CÚtšu©iÚCÚ‹xt
(
_CÚtšu©iÚCÚ‹xt
),

2072 
_M_HasCªûÎ©iÚTok’
(
çl£
),

2073 
_M_HasScheduËr
(
çl£
)

2080 
sk_İtiÚs
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_Tok’
, 
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
)

2081 : 
_M_ScheduËr
(
CÚcu¼’cy
::
g‘_amb›Á_scheduËr
()),

2082 
_M_CªûÎ©iÚTok’
(
_Tok’
),

2083 
_M_CÚtšu©iÚCÚ‹xt
(
_CÚtšu©iÚCÚ‹xt
),

2084 
_M_HasCªûÎ©iÚTok’
(
çl£
),

2085 
_M_HasScheduËr
(
çl£
)

2092 
	g‹m¶©e
<
ty³Çme
 
	g_SchedTy³
>

2093 
sk_İtiÚs
(
¡d
::
sh¬ed_±r
<
_SchedTy³
> 
_ScheduËr
)

2094 : 
_M_ScheduËr
(
¡d
::
move
(
_ScheduËr
)),

2095 
_M_CªûÎ©iÚTok’
(
ÿnûÎ©iÚ_tok’
::
nÚe
()),

2096 
_M_CÚtšu©iÚCÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
()),

2097 
_M_HasCªûÎ©iÚTok’
(
çl£
),

2098 
_M_HasScheduËr
(
Œue
)

2105 
sk_İtiÚs
(
CÚcu¼’cy
::
scheduËr_š‹rçû
& 
_ScheduËr
)

2106 : 
_M_ScheduËr
(&
_ScheduËr
),

2107 
_M_CªûÎ©iÚTok’
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
()),

2108 
_M_CÚtšu©iÚCÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
()),

2109 
_M_HasCªûÎ©iÚTok’
(
çl£
),

2110 
_M_HasScheduËr
(
Œue
)

2117 
sk_İtiÚs
(
CÚcu¼’cy
::
scheduËr_±r
 
_ScheduËr
)

2118 : 
_M_ScheduËr
(
¡d
::
move
(
_ScheduËr
)),

2119 
_M_CªûÎ©iÚTok’
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
()),

2120 
_M_CÚtšu©iÚCÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
()),

2121 
_M_HasCªûÎ©iÚTok’
(
çl£
),

2122 
_M_HasScheduËr
(
Œue
)

2129 
sk_İtiÚs
(cÚ¡ask_İtiÚs& 
_TaskO±iÚs
)

2130 : 
_M_ScheduËr
(
_TaskO±iÚs
.
g‘_scheduËr
()),

2131 
_M_CªûÎ©iÚTok’
(
_TaskO±iÚs
.
g‘_ÿnûÎ©iÚ_tok’
()),

2132 
_M_CÚtšu©iÚCÚ‹xt
(
_TaskO±iÚs
.
g‘_cÚtšu©iÚ_cÚ‹xt
()),

2133 
_M_HasCªûÎ©iÚTok’
(
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
()),

2134 
_M_HasScheduËr
(
_TaskO±iÚs
.
has_scheduËr
())

2141 
£t_ÿnûÎ©iÚ_tok’
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_Tok’
)

2143 
_M_CªûÎ©iÚTok’
 = 
_Tok’
;

2144 
	g_M_HasCªûÎ©iÚTok’
 = 
Œue
;

2150 
£t_cÚtšu©iÚ_cÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
)

2152 
	g_M_CÚtšu©iÚCÚ‹xt
 = 
_CÚtšu©iÚCÚ‹xt
;

2158 
boŞ
 
has_ÿnûÎ©iÚ_tok’
() const

2160  
	g_M_HasCªûÎ©iÚTok’
;

2166 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
g‘_ÿnûÎ©iÚ_tok’
() const

2168  
_M_CªûÎ©iÚTok’
;

2174 
sk_cÚtšu©iÚ_cÚ‹xt
 
g‘_cÚtšu©iÚ_cÚ‹xt
() const

2176  
	g_M_CÚtšu©iÚCÚ‹xt
;

2182 
boŞ
 
has_scheduËr
() const

2184  
	g_M_HasScheduËr
;

2190 
	gCÚcu¼’cy
::
scheduËr_±r
 
g‘_scheduËr
() const

2192  
_M_ScheduËr
;

2195 
	g´iv©e
:

2197 
sk_İtiÚs
 cÚ¡& 
İ”©Ü
=Ñask_İtiÚ cÚ¡& 
_Right
);

2198 
ä›nd
 
	gd‘as
::
_IÁ”Çl_sk_İtiÚs
 &
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(
sk_İtiÚs
 &);

2199 
ä›nd
 cÚ¡ 
	gd‘as
::
_IÁ”Çl_sk_İtiÚs
 &
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(cÚ¡ 
sk_İtiÚs
 &);

2201 
	gCÚcu¼’cy
::
scheduËr_±r
 
_M_ScheduËr
;

2202 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_M_CªûÎ©iÚTok’
;

2203 
sk_cÚtšu©iÚ_cÚ‹xt
 
	g_M_CÚtšu©iÚCÚ‹xt
;

2204 
	gd‘as
::
_IÁ”Çl_sk_İtiÚs
 
_M_IÁ”ÇlTaskO±iÚs
;

2205 
boŞ
 
	g_M_HasCªûÎ©iÚTok’
;

2206 
boŞ
 
	g_M_HasScheduËr
;

2210 
Çme¥aû
 
	gd‘as


2212 #ià
_MSC_VER
 >= 1800

2213 
šlše
 
	g_IÁ”Çl_sk_İtiÚs
 & 
_g‘_š‹º®_sk_İtiÚs
(
sk_İtiÚs
 &
İtiÚs
)

2215  
	gİtiÚs
.
	g_M_IÁ”ÇlTaskO±iÚs
;

2217 
šlše
 cÚ¡ 
	g_IÁ”Çl_sk_İtiÚs
 & 
_g‘_š‹º®_sk_İtiÚs
(cÚ¡ 
sk_İtiÚs
 &
İtiÚs
)

2219  
	gİtiÚs
.
	g_M_IÁ”ÇlTaskO±iÚs
;

2222 
	g_Task_im¶_ba£
;

2223 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
> 
	g_Task_im¶
;

2225 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

2226 
	s_Task_±r


2228 
	g¡d
::
	tsh¬ed_±r
<
	t_Task_im¶
<
	t_R‘uºTy³
>> 
	t_Ty³
;

2229 #ià
_MSC_VER
 >= 1800

2230 
_Ty³
 
_Make
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
, CÚcu¼’cy::
scheduËr_±r
 
_ScheduËr_¬g
è{  
¡d
::
make_sh¬ed
<
_Task_im¶
<
_R‘uºTy³
>>(_Ct, 
	g_ScheduËr_¬g
); }

2232 
_Ty³
 
_Make
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
è{  
¡d
::
make_sh¬ed
<
_Task_im¶
<
_R‘uºTy³
>>(_Ct); }

2235 #ià
_MSC_VER
 >= 1800

2236 
	gCÚcu¼’cy
::
	td‘as
::
	t_TaskCŞËùiÚ_t
::
	t_TaskProcHªdË_t
 
	t_UÄ—lizedChÜe_t
;

2237 
_UÄ—lizedChÜe_t
 
	t_UÄ—lizedChÜe
;

2238 
	gCÚcu¼’cy
::
	tex‹nsib™y
::
	tscİed_ü™iÿl_£ùiÚ_t
 
	tscİed_lock
;

2239 
	gCÚcu¼’cy
::
	tex‹nsib™y
::
	tü™iÿl_£ùiÚ_t
 
	tü™iÿl_£ùiÚ
;

2240 
	gCÚcu¼’cy
::
	td‘as
::
	t©omic_size_t
‡tomic_size_t;

2242 
	gCÚcu¼’cy
::
	td‘as
::
	t_UÄ—lizedChÜe
 _UnrealizedChore;

2243 
	gCÚcu¼’cy
::
	tü™iÿl_£ùiÚ
::
	tscİed_lock
 scoped_lock;

2244 
	gCÚcu¼’cy
::
	tü™iÿl_£ùiÚ
 critical_section;

2245 vŞ©
	tsize_t
 
	t©omic_size_t
;

2247 
	g¡d
::
	tsh¬ed_±r
<
	t_Task_im¶_ba£
> 
	t_Task_±r_ba£
;

2249 
	g_CÚtšu©iÚTaskHªdËBa£
 : 
_UÄ—lizedChÜe


2251 
_CÚtšu©iÚTaskHªdËBa£
 * 
_M_Ãxt
;

2252 
sk_cÚtšu©iÚ_cÚ‹xt
 
	g_M_cÚtšu©iÚCÚ‹xt
;

2253 
boŞ
 
	g_M_isTaskBa£dCÚtšu©iÚ
;

2256 
_TaskIÆššgMode
 
	g_M_šlššgMode
;

2258 
vœtu®
 
_Task_±r_ba£
 
_G‘TaskIm¶Ba£
() const = 0;

2260 
_CÚtšu©iÚTaskHªdËBa£
() :

2261 
_M_Ãxt
(
nuÎ±r
), 
_M_isTaskBa£dCÚtšu©iÚ
(
çl£
), 
_M_cÚtšu©iÚCÚ‹xt
(
sk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
()), 
_M_šlššgMode
(
CÚcu¼’cy
::
d‘as
::
_NoIÆše
)

2264 
vœtu®
 ~
_CÚtšu©iÚTaskHªdËBa£
() {}

2266 #ià
_MSC_VER
 >= 1800

2267 #ià
_PPLTASK_ASYNC_LOGGING


2269 cÚ¡ ::
PÏtfÜm
::
Guid
 
_PPLTaskCau§l™yPÏtfÜmID
(0x7A76B220, 0xA758, 0x4E6E, 0xB0, 0xE0, 0xD7, 0xC6, 0xD7, 0x4A, 0x88, 0xFE);

2271 
__deş¥ec
(
£Ëùªy
èvŞ©
	g_isCau§l™ySuµÜ‹d
 = 0;

2273 
šlše
 
boŞ
 
_IsCau§l™ySuµÜ‹d
()

2275 #ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_DESKTOP
)

2276 ià(
	g_isCau§l™ySuµÜ‹d
 == 0)

2278 
_ÿu§l™y
 = 1;

2279 
OSVERSIONINFOEX
 
	g_osvi
 = {};

2280 
	g_osvi
.
	gdwOSV”siÚInfoSize
 = (
OSVERSIONINFOEX
);

2283 
	g_osvi
.
	gdwMajÜV”siÚ
 = 6;

2284 
	g_osvi
.
	gdwMšÜV”siÚ
 = 3;

2286 
DWORDLONG
 
	g_cÚd™iÚMask
 = 0;

2287 
VER_SET_CONDITION
(
_cÚd™iÚMask
, 
VER_MAJORVERSION
, 
VER_GREATER_EQUAL
);

2288 
VER_SET_CONDITION
(
_cÚd™iÚMask
, 
VER_MINORVERSION
, 
VER_GREATER_EQUAL
);

2290 ià(::
V”ifyV”siÚInfo
(&
_osvi
, 
VER_MAJORVERSION
 | 
VER_MINORVERSION
, 
_cÚd™iÚMask
))

2292 
	g_ÿu§l™y
 = 2;

2295 
	g_isCau§l™ySuµÜ‹d
 = 
_ÿu§l™y
;

2296  
	g_ÿu§l™y
 == 2;

2299  
	g_isCau§l™ySuµÜ‹d
 =ğ2 ? 
Œue
 : 
çl£
;

2301  
	gŒue
;

2306 
	s_TaskEv’tLogg”


2308 
_Task_im¶_ba£
 *
	g_M_sk
;

2309 
boŞ
 
	g_M_scheduËd
;

2310 
boŞ
 
	g_M_skPo¡Ev’tS¹ed
;

2313 
_LogScheduËTask
(
boŞ
 
_isCÚtšu©iÚ
)

2315 ià(
	gd‘as
::
_IsCau§l™ySuµÜ‹d
())

2317 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûO³¿tiÚC»©iÚ
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
Requœed
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

2318 
_PPLTaskCau§l™yPÏtfÜmID
, 
»š‹½»t_ÿ¡
<>(
_M_sk
),

2319 
_isCÚtšu©iÚ
 ? "Concurrency::PPLTask::ScheduleContinuationTask" : "Concurrency::PPLTask::ScheduleTask", 0);

2320 
	g_M_scheduËd
 = 
Œue
;

2325 
_LogCªûlTask
()

2327 ià(
	gd‘as
::
_IsCau§l™ySuµÜ‹d
())

2329 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûO³¿tiÚR–©iÚ
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
ImpÜÁ
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

2330 
_PPLTaskCau§l™yPÏtfÜmID
, 
»š‹½»t_ÿ¡
<>(
_M_sk
), ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
Cau§l™yR–©iÚ
::
Cªûl
);

2336 
_LogTaskCom¶‘ed
();

2339 
_LogTaskExecutiÚS¹ed
() { }

2342 
_LogTaskExecutiÚCom¶‘ed
()

2344 ià(
	g_M_skPo¡Ev’tS¹ed
 && 
	gd‘as
::
_IsCau§l™ySuµÜ‹d
())

2346 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûSynchrÚousWÜkCom¶‘iÚ
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
Requœed
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

2347 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
Cau§l™ySynchrÚousWÜk
::
Com¶‘iÚNÙifiÿtiÚ
);

2352 
_LogWÜkI‹mS¹ed
()

2354 ià(
	gd‘as
::
_IsCau§l™ySuµÜ‹d
())

2356 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûSynchrÚousWÜkS¹
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
Requœed
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

2357 
_PPLTaskCau§l™yPÏtfÜmID
, 
»š‹½»t_ÿ¡
<>(
_M_sk
), ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
Cau§l™ySynchrÚousWÜk
::
ExecutiÚ
);

2362 
_LogWÜkI‹mCom¶‘ed
()

2364 ià(
	gd‘as
::
_IsCau§l™ySuµÜ‹d
())

2366 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûSynchrÚousWÜkCom¶‘iÚ
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
Requœed
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

2367 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
Cau§l™ySynchrÚousWÜk
::
ExecutiÚ
);

2369 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûSynchrÚousWÜkS¹
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
Requœed
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

2370 
_PPLTaskCau§l™yPÏtfÜmID
, 
»š‹½»t_ÿ¡
<>(
_M_sk
), ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
Cau§l™ySynchrÚousWÜk
::
Com¶‘iÚNÙifiÿtiÚ
);

2371 
	g_M_skPo¡Ev’tS¹ed
 = 
Œue
;

2375 
_TaskEv’tLogg”
(
_Task_im¶_ba£
 *
_sk
è: 
_M_sk
(_task)

2377 
_M_scheduËd
 = 
çl£
;

2378 
	g_M_skPo¡Ev’tS¹ed
 = 
çl£
;

2383 
	s_TaskWÜkI‹mRAIILogg”


2385 
	g_TaskEv’tLogg”
 &
	g_M_logg”
;

2386 
_TaskWÜkI‹mRAIILogg”
(
_TaskEv’tLogg”
 &
_skHªdËLogg”
è: 
_M_logg”
(_taskHandleLogger)

2388 
_M_logg”
.
_LogWÜkI‹mS¹ed
();

2391 ~
_TaskWÜkI‹mRAIILogg”
()

2393 
	g_M_logg”
.
_LogWÜkI‹mCom¶‘ed
();

2395 
	g_TaskWÜkI‹mRAIILogg”
 &
	gİ”©Ü
 =(cÚ¡ 
_TaskWÜkI‹mRAIILogg”
 &);

2399 
šlše
 
_LogCªûlTask
(
_Task_im¶_ba£
 *) {}

2400 
	s_TaskEv’tLogg”


2402 
_LogScheduËTask
(
boŞ
) {}

2403 
_LogCªûlTask
() {}

2404 
_LogWÜkI‹mS¹ed
() {}

2405 
_LogWÜkI‹mCom¶‘ed
() {}

2406 
_LogTaskExecutiÚS¹ed
() {}

2407 
_LogTaskExecutiÚCom¶‘ed
() {}

2408 
_LogTaskCom¶‘ed
() {}

2409 
_TaskEv’tLogg”
(
_Task_im¶_ba£
 *) {}

2411 
	s_TaskWÜkI‹mRAIILogg”


2413 
_TaskWÜkI‹mRAIILogg”
(
_TaskEv’tLogg”
 &) {}

2432 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_D”ivedTaskHªdË
,y³Çm
	g_Ba£TaskHªdË
>

2433 
	g_PPLTaskHªdË
 : 
_Ba£TaskHªdË


2435 
_PPLTaskHªdË
(cÚ¡ 
ty³Çme
 
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 & 
_PTask
è: 
_M_pTask
(_PTask)

2437 #ià
_MSC_VER
 < 1800

2438 
m_pFunùiÚ
 = 
»š‹½»t_ÿ¡
 <
CÚcu¼’cy
::
TaskProc
> (&
_UÄ—lizedChÜe
::
_InvokeBridge
<
_PPLTaskHªdË
>);

2439 
_S‘RuÁimeOwnsLiãtime
(
Œue
);

2442 
	gvœtu®
 ~
_PPLTaskHªdË
() {

2443 #ià
_MSC_VER
 >= 1800

2445 
	g_M_pTask
->
	g_M_skEv’tLogg”
.
_LogTaskCom¶‘ed
();

2448 #ià
_MSC_VER
 >= 1800

2449 
vœtu®
 
švoke
() const

2451 
İ”©Ü
()() const

2456 
_CONCRT_ASSERT
(
_M_pTask
 !ğ
nuÎ±r
);

2457 ià(!
	g_M_pTask
->
_T¿ns™iÚedToS¹ed
()) {

2458 #ià
_MSC_VER
 >= 1800

2459 
	g¡©ic_ÿ¡
<cÚ¡ 
	g_D”ivedTaskHªdË
 *>(
	gthis
)->
_SyncCªûlAndPrİag©eExû±iÚ
();

2463 #ià
_MSC_VER
 >= 1800

2464 
	g_M_pTask
->
	g_M_skEv’tLogg”
.
_LogTaskExecutiÚS¹ed
();

2466 
	gŒy


2469 
	g¡©ic_ÿ¡
<cÚ¡ 
	g_D”ivedTaskHªdË
 *>(
	gthis
)->
_P”fÜm
();

2471 
ÿtch
 (cÚ¡ 
CÚcu¼’cy
::
sk_ÿnûËd
 &)

2473 
_M_pTask
->
_Cªûl
(
Œue
);

2474 #ià
_MSC_VER
 < 1800

2475 
	gthrow
;

2478 
ÿtch
 (cÚ¡ 
CÚcu¼’cy
::
d‘as
::
_IÁ”ru±iÚ_exû±iÚ
 &)

2480 
_M_pTask
->
_Cªûl
(
Œue
);

2481 #ià
_MSC_VER
 < 1800

2482 
	gthrow
;

2485 
ÿtch
 (
IRe¡riùedE¼ÜInfo
*& 
_E
)

2487 
	g_M_pTask
->
_CªûlW™hExû±iÚ
(
_E
);

2488 #ià
_MSC_VER
 < 1800

2489 
	gthrow
;

2492 
ÿtch
 (...)

2494 
	g_M_pTask
->
_CªûlW™hExû±iÚ
(
¡d
::
cu¼’t_exû±iÚ
());

2495 #ià
_MSC_VER
 < 1800

2496 
	gthrow
;

2499 #ià
_MSC_VER
 >= 1800

2500 
	g_M_pTask
->
	g_M_skEv’tLogg”
.
_LogTaskExecutiÚCom¶‘ed
();

2506 
_Task_±r_ba£
 
_G‘TaskIm¶Ba£
() const

2508  
	g_M_pTask
;

2511 
ty³Çme
 
	g_Task_±r
<
	g_R‘uºTy³
>::
_Ty³
 
_M_pTask
;

2513 
	g´iv©e
:

2514 
_PPLTaskHªdË
 cÚ¡ & 
İ”©Ü
=(_PPLTaskHandle const&);

2522 
	s_Task_im¶_ba£


2524 
	e_TaskIÁ”ÇlS‹


2527 
	g_C»©ed
,

2528 
	g_S¹ed
,

2529 
	g_P’dšgCªûl
,

2530 
	g_Com¶‘ed
,

2531 
	g_CªûËd


2533 #ià
_MSC_VER
 >= 1800

2534 
_Task_im¶_ba£
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_PTok’S‹
, CÚcu¼’cy::
scheduËr_±r
 
_ScheduËr_¬g
)

2535 : 
_M_TaskS‹
(
_C»©ed
),

2536 
_M_fFromAsync
(
çl£
), 
_M_fUnw¿µedTask
(false),

2537 
_M_pRegi¡¿tiÚ
(
nuÎ±r
), 
_M_CÚtšu©iÚs
ÒuÎ±r), 
_M_TaskCŞËùiÚ
(
_ScheduËr_¬g
),

2538 
_M_skEv’tLogg”
(
this
)

2540 
_Task_im¶_ba£
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_PTok’S‹
è: 
_M_TaskS‹
(
_C»©ed
),

2541 
_M_fFromAsync
(
çl£
), 
_M_fRuÁimeAgg»g©e
(çl£), 
_M_fUnw¿µedTask
(false),

2542 
_M_pRegi¡¿tiÚ
(
nuÎ±r
), 
_M_CÚtšu©iÚs
ÒuÎ±r), 
_M_pTaskCŞËùiÚ
(nullptr),

2543 
_M_pTaskC»©iÚAdd»ssHšt
(
nuÎ±r
)

2547 
	g_M_pTok’S‹
 = 
_PTok’S‹
;

2548 
_CONCRT_ASSERT
(
_M_pTok’S‹
 !ğ
nuÎ±r
);

2549 ià(
	g_M_pTok’S‹
 !ğ
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
())

2550 
_M_pTok’S‹
->
_Reã»nû
();

2554 
	gvœtu®
 ~
_Task_im¶_ba£
()

2556 
_CONCRT_ASSERT
(
_M_pTok’S‹
 !ğ
nuÎ±r
);

2557 ià(
	g_M_pTok’S‹
 !ğ
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
())

2559 
_M_pTok’S‹
->
_R–—£
();

2561 #ià
_MSC_VER
 < 1800

2562 ià(
	g_M_pTaskCŞËùiÚ
 !ğ
nuÎ±r
)

2564 
_M_pTaskCŞËùiÚ
->
_R–—£
();

2565 
	g_M_pTaskCŞËùiÚ
 = 
nuÎ±r
;

2570 
sk_¡©us
 
_Wa™
()

2572 
boŞ
 
	g_DoWa™
 = 
Œue
;

2574 ià(
_IsNÚBlockšgTh»ad
())

2578 ià(!
_IsCom¶‘ed
(è&& !
_IsCªûËd
())

2580 
throw
 
	gCÚcu¼’cy
::
šv®id_İ”©iÚ
("Illegalo wait on‡ask in‡ Windows Runtime STA");

2590 
	g_DoWa™
 = 
çl£
;

2593 ià(
	g_DoWa™
)

2595 #ià
_MSC_VER
 < 1800

2598 
	g_M_ScheduËd
.
wa™
();

2608 #ià
_MSC_VER
 >= 1800

2609 ià(
	g_M_fFromAsync
)

2611 ià((
	g_M_pTaskCŞËùiÚ
 =ğ
nuÎ±r
è|| 
_M_fFromAsync
)

2614 #ià
_MSC_VER
 >= 1800

2615 
_M_TaskCŞËùiÚ
.
_Wa™
();

2617 
	g_M_Com¶‘ed
.
wa™
();

2625 
	gŒy


2635 #ià
_MSC_VER
 >= 1800

2636 
	g_M_TaskCŞËùiÚ
.
_RunAndWa™
();

2638 
	g_M_pTaskCŞËùiÚ
->
_RunAndWa™
();

2641 
ÿtch
 (
CÚcu¼’cy
::
d‘as
::
_IÁ”ru±iÚ_exû±iÚ
&)

2644 
_CONCRT_ASSERT
(
çl£
);

2646 
ÿtch
 (
CÚcu¼’cy
::
sk_ÿnûËd
&)

2652 
_CONCRT_ASSERT
(
_IsCªûËd
());

2654 
ÿtch
 (
IRe¡riùedE¼ÜInfo
*& 
_E
)

2657 if(!
_HasU£rExû±iÚ
())

2659 
_CªûlW™hExû±iÚ
(
_E
);

2662 
	g_M_exû±iÚHŞd”
->
_R‘hrowU£rExû±iÚ
();

2664 
ÿtch
 (...)

2667 ià(!
_HasU£rExû±iÚ
())

2669 
_CªûlW™hExû±iÚ
(
¡d
::
cu¼’t_exû±iÚ
());

2672 
	g_M_exû±iÚHŞd”
->
_R‘hrowU£rExû±iÚ
();

2679 ià(
	g_M_fUnw¿µedTask
)

2681 #ià
_MSC_VER
 >= 1800

2682 
	g_M_TaskCŞËùiÚ
.
_Wa™
();

2684 
	g_M_Com¶‘ed
.
wa™
();

2690 ià(
_HasU£rExû±iÚ
())

2692 
	g_M_exû±iÚHŞd”
->
_R‘hrowU£rExû±iÚ
();

2694 ià(
_IsCªûËd
())

2696  
	gCÚcu¼’cy
::
ÿnûËd
;

2698 
_CONCRT_ASSERT
(
_IsCom¶‘ed
());

2699  
	gCÚcu¼’cy
::
com¶‘ed
;

2720 
vœtu®
 
boŞ
 
_CªûlAndRunCÚtšu©iÚs
(boŞ 
_SynchrÚousCªûl
, boŞ 
_U£rExû±iÚ
, boŞ 
_Prİag©edFromAnû¡Ü
, cÚ¡ 
¡d
::
sh¬ed_±r
<
_Exû±iÚHŞd”
>& 
_ExHŞd”
) = 0;

2722 
boŞ
 
_Cªûl
(boŞ 
_SynchrÚousCªûl
)

2725  
_CªûlAndRunCÚtšu©iÚs
(
_SynchrÚousCªûl
, 
çl£
, f®£, 
_M_exû±iÚHŞd”
);

2728 
boŞ
 
_CªûlW™hExû±iÚHŞd”
(cÚ¡ 
¡d
::
sh¬ed_±r
<
_Exû±iÚHŞd”
>& 
_ExHŞd”
, boŞ 
_Prİag©edFromAnû¡Ü
)

2731  
_CªûlAndRunCÚtšu©iÚs
(
Œue
,rue, 
_Prİag©edFromAnû¡Ü
, 
_ExHŞd”
);

2734 
boŞ
 
_CªûlW™hExû±iÚ
(
IRe¡riùedE¼ÜInfo
*& 
_Exû±iÚ
)

2737 
_CONCRT_ASSERT
(!
_HasU£rExû±iÚ
());

2738 #ià
_MSC_VER
 >= 1800

2739  
_CªûlAndRunCÚtšu©iÚs
(
Œue
,rue, 
çl£
, 
¡d
::
make_sh¬ed
<
_Exû±iÚHŞd”
>(
_Exû±iÚ
, 
_G‘TaskC»©iÚC®l¡ack
()));

2741  
_CªûlAndRunCÚtšu©iÚs
(
Œue
,rue, 
çl£
, 
¡d
::
make_sh¬ed
<
_Exû±iÚHŞd”
>(
_Exû±iÚ
, 
_G‘TaskC»©iÚAdd»ssHšt
()));

2744 
boŞ
 
_CªûlW™hExû±iÚ
(cÚ¡ 
¡d
::
exû±iÚ_±r
& 
_Exû±iÚ
)

2747 
_CONCRT_ASSERT
(!
_HasU£rExû±iÚ
());

2748 #ià
_MSC_VER
 >= 1800

2749  
_CªûlAndRunCÚtšu©iÚs
(
Œue
,rue, 
çl£
, 
¡d
::
make_sh¬ed
<
_Exû±iÚHŞd”
>(
_Exû±iÚ
, 
_G‘TaskC»©iÚC®l¡ack
()));

2751  
_CªûlAndRunCÚtšu©iÚs
(
Œue
,rue, 
çl£
, 
¡d
::
make_sh¬ed
<
_Exû±iÚHŞd”
>(
_Exû±iÚ
, 
_G‘TaskC»©iÚAdd»ssHšt
()));

2755 #ià
_MSC_VER
 >= 1800

2756 
_Regi¡”CªûÎ©iÚ
(
¡d
::
w—k_±r
<
_Task_im¶_ba£
> 
_W—kPŒ
)

2758 
_Regi¡”CªûÎ©iÚ
()

2761 
_CONCRT_ASSERT
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_IsV®id
(
_M_pTok’S‹
));

2762 #ià
_MSC_VER
 >= 1800

2763 autØ
	g_CªûÎ©iÚC®lback
 = [
_W—kPŒ
](){

2766 autØ
_sk
 = 
_W—kPŒ
.
lock
();

2767 ià(
	g_sk
 !ğ
nuÎ±r
)

2768 
_sk
->
_Cªûl
(
çl£
);

2771 
	g_M_pRegi¡¿tiÚ
 = 
Ãw
 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’C®lback
<
deşty³
(
_CªûÎ©iÚC®lback
)>(_CancellationCallback);

2772 
	g_M_pTok’S‹
->
_Regi¡”C®lback
(
_M_pRegi¡¿tiÚ
);

2774 
	g_M_pRegi¡¿tiÚ
 = 
_M_pTok’S‹
->
_Regi¡”C®lback
(
»š‹½»t_ÿ¡
<
CÚcu¼’cy
::
TaskProc
>(&
_CªûlVŸTok’
), (
_Task_im¶_ba£
 *)
this
);

2778 
_D”egi¡”CªûÎ©iÚ
()

2780 ià(
	g_M_pRegi¡¿tiÚ
 !ğ
nuÎ±r
)

2782 
_M_pTok’S‹
->
_D”egi¡”C®lback
(
_M_pRegi¡¿tiÚ
);

2783 
	g_M_pRegi¡¿tiÚ
->
_R–—£
();

2784 
	g_M_pRegi¡¿tiÚ
 = 
nuÎ±r
;

2787 #ià
_MSC_VER
 < 1800

2788 
_CªûlVŸTok’
(
_Task_im¶_ba£
 *
_PIm¶
)

2790 
	g_PIm¶
->
_Cªûl
(
çl£
);

2793 
boŞ
 
_IsC»©ed
()

2795  (
	g_M_TaskS‹
 =ğ
_C»©ed
);

2798 
boŞ
 
_IsS¹ed
()

2800  (
	g_M_TaskS‹
 =ğ
_S¹ed
);

2803 
boŞ
 
_IsP’dšgCªûl
()

2805  (
	g_M_TaskS‹
 =ğ
_P’dšgCªûl
);

2808 
boŞ
 
_IsCom¶‘ed
()

2810  (
	g_M_TaskS‹
 =ğ
_Com¶‘ed
);

2813 
boŞ
 
_IsCªûËd
()

2815  (
	g_M_TaskS‹
 =ğ
_CªûËd
);

2818 
boŞ
 
_HasU£rExû±iÚ
()

2820  
	g¡©ic_ÿ¡
<
	gboŞ
>(
	g_M_exû±iÚHŞd”
);

2822 #ià
_MSC_VER
 < 1800

2823 
_S‘ScheduËdEv’t
()

2825 
	g_M_ScheduËd
.
£t
();

2828 cÚ¡ 
	g¡d
::
sh¬ed_±r
<
_Exû±iÚHŞd”
>& 
_G‘Exû±iÚHŞd”
()

2830 
_CONCRT_ASSERT
(
_HasU£rExû±iÚ
());

2831  
	g_M_exû±iÚHŞd”
;

2834 
boŞ
 
_IsA·¹m’tAw¬e
()

2836  
	g_M_fFromAsync
;

2839 
_S‘Async
(
boŞ
 
_Async
 = 
Œue
)

2841 
_M_fFromAsync
 = 
_Async
;

2843 #ià
_MSC_VER
 >= 1800

2844 
_TaskC»©iÚC®l¡ack
 
_G‘TaskC»©iÚC®l¡ack
()

2846  
	g_M_pTaskC»©iÚC®l¡ack
;

2849 
_S‘TaskC»©iÚC®l¡ack
(cÚ¡ 
_TaskC»©iÚC®l¡ack
 &
_C®l¡ack
)

2851 
	g_M_pTaskC»©iÚC®l¡ack
 = 
_C®l¡ack
;

2854 * 
_G‘TaskC»©iÚAdd»ssHšt
()

2856  
	g_M_pTaskC»©iÚAdd»ssHšt
;

2859 
_S‘TaskC»©iÚAdd»ssHšt
(* 
_Add»ssHšt
)

2861 
	g_M_pTaskC»©iÚAdd»ssHšt
 = 
_Add»ssHšt
;

2873 
_ScheduËTask
(
_UÄ—lizedChÜe
 * 
_PTaskHªdË
, 
_TaskIÆššgMode
 
_IÆššgMode
)

2875 #ià
_MSC_VER
 < 1800

2877 
	g_M_pTaskCŞËùiÚ
 = 
CÚcu¼’cy
::
d‘as
::
_AsyncTaskCŞËùiÚ
::
_NewCŞËùiÚ
(CÚcu¼’cy::d‘as::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

2880 
	gŒy


2882 #ià
_MSC_VER
 >= 1800

2883 
	g_M_TaskCŞËùiÚ
.
_ScheduËTask
(
_PTaskHªdË
, 
_IÆššgMode
);

2886 
	g_M_pTaskCŞËùiÚ
->
_ScheduËW™hAutoIÆše
(
_PTaskHªdË
, 
_IÆššgMode
);

2889 
ÿtch
 (cÚ¡ 
CÚcu¼’cy
::
sk_ÿnûËd
 &)

2895 
_CONCRT_ASSERT
(
_IsCªûËd
());

2897 
ÿtch
 (cÚ¡ 
CÚcu¼’cy
::
d‘as
::
_IÁ”ru±iÚ_exû±iÚ
 &)

2900 
_CONCRT_ASSERT
(
çl£
);

2902 
ÿtch
 (...)

2906 
_CONCRT_ASSERT
(
_HasU£rExû±iÚ
());

2908 #ià
_MSC_VER
 < 1800

2913 
_S‘ScheduËdEv’t
();

2925 
_RunCÚtšu©iÚ
(
_CÚtšu©iÚTaskHªdËBa£
 * 
_PTaskHªdË
)

2927 
_Task_±r_ba£
 
	g_Im¶Ba£
 = 
_PTaskHªdË
->
_G‘TaskIm¶Ba£
();

2928 ià(
_IsCªûËd
(è&& !
	g_PTaskHªdË
->
	g_M_isTaskBa£dCÚtšu©iÚ
)

2930 ià(
_HasU£rExû±iÚ
())

2934 
	g_Im¶Ba£
->
_CªûlW™hExû±iÚHŞd”
(
_G‘Exû±iÚHŞd”
(), 
Œue
);

2940 
	g_Im¶Ba£
->
_Cªûl
(
Œue
);

2947 
_CONCRT_ASSERT
(
_IsCom¶‘ed
(è|| 
_PTaskHªdË
->
_M_isTaskBa£dCÚtšu©iÚ
);

2949 #ià
_MSC_VER
 >= 1800

2950 
_CONCRT_ASSERT
(!
_Im¶Ba£
->
_IsCªûËd
());

2951  
	g_Im¶Ba£
->
_ScheduËCÚtšu©iÚTask
(
_PTaskHªdË
);

2954 ià(!
	g_Im¶Ba£
->
_IsCªûËd
())

2956  
	g_Im¶Ba£
->
_ScheduËCÚtšu©iÚTask
(
_PTaskHªdË
);

2962 
d–‘e
 
	g_PTaskHªdË
;

2966 
_ScheduËCÚtšu©iÚTask
(
_CÚtšu©iÚTaskHªdËBa£
 * 
_PTaskHªdË
)

2968 #ià
_MSC_VER
 >= 1800

2969 
	g_M_skEv’tLogg”
.
_LogScheduËTask
(
Œue
);

2972 ià(
	g_PTaskHªdË
->
	g_M_cÚtšu©iÚCÚ‹xt
.
_HasC­tu»dCÚ‹xt
())

2978 ià(
	g_PTaskHªdË
->
	g_M_šlššgMode
 !ğ
CÚcu¼’cy
::
d‘as
::
_FÜûIÆše
)

2980 
_PTaskHªdË
->
_M_šlššgMode
 = 
CÚcu¼’cy
::
d‘as
::
_DeçuÉAutoIÆše
;

2982 
	gd‘as
::
_ScheduËFuncW™hAutoIÆše
([
_PTaskHªdË
](è-> 
HRESULT
 {

2985 autØ
_TaskIm¶PŒ
 = 
_PTaskHªdË
->
_G‘TaskIm¶Ba£
();

2986 ià(
d‘as
::
_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
(è=ğ
_PTaskHªdË
->
_M_cÚtšu©iÚCÚ‹xt
)

2988 
_TaskIm¶PŒ
->
_ScheduËTask
(
_PTaskHªdË
, 
CÚcu¼’cy
::
d‘as
::
_FÜûIÆše
);

3000 
Œy


3003 autØ
_PTaskHªdË1
 = 
_PTaskHªdË
;

3004 
_PTaskHªdË
->
_M_cÚtšu©iÚCÚ‹xt
.
_C®lInCÚ‹xt
([
_PTaskHªdË1
, 
_TaskIm¶PŒ
](è-> 
HRESULT
 {

3005 
_TaskIm¶PŒ
->
_ScheduËTask
(
_PTaskHªdË1
, 
CÚcu¼’cy
::
d‘as
::
_FÜûIÆše
);

3006  
S_OK
;

3009 
ÿtch
 (
IRe¡riùedE¼ÜInfo
*& 
_E
)

3011 
_TaskIm¶PŒ
->
_CªûlW™hExû±iÚ
(
_E
);

3013 
ÿtch
 (...)

3015 
_TaskIm¶PŒ
->
_CªûlW™hExû±iÚ
(
¡d
::
cu¼’t_exû±iÚ
());

3018  
S_OK
;

3019 }, 
_PTaskHªdË
->
_M_šlššgMode
);

3023 
_ScheduËTask
(
_PTaskHªdË
, _PTaskHªdË->
_M_šlššgMode
);

3038 
_ScheduËCÚtšu©iÚ
(
_CÚtšu©iÚTaskHªdËBa£
 * 
_PTaskHªdË
)

3040 ’um { 
	g_NÙhšg
, 
	g_ScheduË
, 
	g_Cªûl
, 
	g_CªûlW™hExû±iÚ
 } 
	g_Do
 = 
_NÙhšg
;

3045 
scİed_lock
 
_LockHŞd”
(
_M_CÚtšu©iÚsCr™Sec
);

3046 ià(
_IsCom¶‘ed
(è|| (
_IsCªûËd
(è&& 
	g_PTaskHªdË
->
	g_M_isTaskBa£dCÚtšu©iÚ
))

3048 
	g_Do
 = 
_ScheduË
;

3050 ià(
_IsCªûËd
())

3052 ià(
_HasU£rExû±iÚ
())

3054 
	g_Do
 = 
_CªûlW™hExû±iÚ
;

3058 
	g_Do
 = 
_Cªûl
;

3064 
	g_PTaskHªdË
->
	g_M_Ãxt
 = 
_M_CÚtšu©iÚs
;

3065 
	g_M_CÚtšu©iÚs
 = 
_PTaskHªdË
;

3071 
	g_Do
)

3073 
	g_ScheduË
:

3075 
_PTaskHªdË
->
_G‘TaskIm¶Ba£
()->
_ScheduËCÚtšu©iÚTask
(_PTaskHandle);

3078 
	g_Cªûl
:

3082 
_PTaskHªdË
->
_G‘TaskIm¶Ba£
()->
_Cªûl
(
Œue
);

3084 
d–‘e
 
	g_PTaskHªdË
;

3087 
	g_CªûlW™hExû±iÚ
:

3091 
_PTaskHªdË
->
_G‘TaskIm¶Ba£
()->
_CªûlW™hExû±iÚHŞd”
(
_G‘Exû±iÚHŞd”
(), 
Œue
);

3093 
d–‘e
 
	g_PTaskHªdË
;

3096 
	g_NÙhšg
:

3104 
_RunTaskCÚtšu©iÚs
()

3108 
_CÚtšu©iÚLi¡
 
	g_Cur
 = 
_M_CÚtšu©iÚs
, 
	g_Next
;

3109 
	g_M_CÚtšu©iÚs
 = 
nuÎ±r
;

3110 
	g_Cur
)

3114 
	g_Next
 = 
_Cur
->
_M_Ãxt
;

3115 
_RunCÚtšu©iÚ
(
_Cur
);

3116 
	g_Cur
 = 
_Next
;

3119 
boŞ
 
_IsNÚBlockšgTh»ad
()

3121 
APTTYPE
 
	g_A±Ty³
;

3122 
APTTYPEQUALIFIER
 
	g_A±Ty³Qu®if›r
;

3124 
HRESULT
 
	ghr
 = 
CoG‘A·¹m’tTy³
(&
_A±Ty³
, &
_A±Ty³Qu®if›r
);

3128 ià(
SUCCEEDED
(
hr
))

3130 
	g_A±Ty³
)

3132 
	gAPTTYPE_STA
:

3133 
APTTYPE_MAINSTA
:

3134  
Œue
;

3136 
	gAPTTYPE_NA
:

3137 
_A±Ty³Qu®if›r
)

3143 
APTTYPEQUALIFIER_NA_ON_STA
:

3144 
APTTYPEQUALIFIER_NA_ON_MAINSTA
:

3145  
Œue
;

3151 #ià
_UITHREADCTXT_SUPPORT


3154 ià(
SUCCEEDED
(
C­tu»UiTh»adCÚ‹xt
(
nuÎ±r
)))

3156  
	gŒue
;

3160  
	gçl£
;

3163 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_ResuÉ
,y³Çm
	g_OpTy³
,y³Çm
	g_CompHªdËrTy³
,y³Çm
	g_ResuÉTy³
>

3164 
_AsyncIn™
(cÚ¡ 
ty³Çme
 
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 & 
_Ou‹rTask
,

3165 
_AsyncInfoIm¶
<
_OpTy³
, 
_CompHªdËrTy³
, 
_ResuÉTy³
>* 
_AsyncOp
)

3167 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_G‘Unw¿µedTy³
(
	t¡dx
::
	tdeşv®
<
	t_OpTy³
*>()))>::
	tty³
 
	t_ResuÉ_abi
;

3177 #ià
_MSC_VER
 < 1800

3178 
_CONCRT_ASSERT
(((
_Ou‹rTask
->
_M_pTaskCŞËùiÚ
 =ğ
nuÎ±r
è|| _Ou‹rTask->
_M_fUnw¿µedTask
è&& !_Ou‹rTask->
_IsCªûËd
());

3183 
	g_AsyncOp
->
put_Com¶‘ed
(
Miüosoá
::
WRL
::
C®lback
<
_CompHªdËrTy³
>(

3184 [
_Ou‹rTask
, 
_AsyncOp
](
_OpTy³
* 
_O³¿tiÚ
, 
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
 
_Stus
è
mubË
 -> 
HRESULT


3186 
HRESULT
 
hr
 = 
S_OK
;

3187 ià(
_Stus
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
CªûËd
)

3189 
_Ou‹rTask
->
_Cªûl
(
Œue
);

3191 ià(
_Stus
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
E¼Ü
)

3193 
HRESULT
 
_hr
;

3194 
Miüosoá
::
WRL
::
ComPŒ
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
> 
pAsyncInfo
;

3195 ià(
SUCCEEDED
(
hr
 = 
_O³¿tiÚ
->
Qu”yIÁ”çû
<
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>(
pAsyncInfo
.
G‘Add»ssOf
())è&& SUCCEEDED(h¸ğpAsyncInfo->
g‘_E¼ÜCode
(&
_hr
)))

3196 
_Ou‹rTask
->
_CªûlW™hExû±iÚ
(
¡d
::
make_exû±iÚ_±r
(
_hr
));

3200 
_CONCRT_ASSERT
(
_Stus
 =ğ
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
Com¶‘ed
);

3201 
_NÜm®izeVoidToUn™Ty³
<
_ResuÉ_abi
>::
_Ty³
 
»suÉs
;

3202 ià(
SUCCEEDED
(
hr
 = 
_AsyncOp
->
G‘ResuÉs
(&
»suÉs
)))

3203 
_Ou‹rTask
->
_Fš®izeAndRunCÚtšu©iÚs
(
»suÉs
);

3210 
cÚ¡_ÿ¡
<
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 &>(
_Ou‹rTask
).
»£t
();

3211  
hr
;

3212 }).
G‘
());

3213 
	g_Ou‹rTask
->
_S‘Unw¿µedAsyncOp
(
_AsyncOp
);

3215 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_IÁ”ÇlR‘uºTy³
>

3216 
_AsyncIn™
(cÚ¡ 
ty³Çme
 
_Task_±r
<
_R‘uºTy³
>::
_Ty³
& 
_Ou‹rTask
, cÚ¡ 
sk
<
_IÁ”ÇlR‘uºTy³
> & 
_Unw¿µedTask
)

3218 
_CONCRT_ASSERT
(
_Ou‹rTask
->
_M_fUnw¿µedTask
 && !_Ou‹rTask->
_IsCªûËd
());

3226 
	g_Unw¿µedTask
.
_Th’
([
_Ou‹rTask
](
sk
<
_IÁ”ÇlR‘uºTy³
> 
_Anû¡ÜTask
è-> 
HRESULT
 {

3228 ià(
_Anû¡ÜTask
.
_G‘Im¶
()->
_IsCom¶‘ed
())

3230 
_Ou‹rTask
->
_Fš®izeAndRunCÚtšu©iÚs
(
_Anû¡ÜTask
.
_G‘Im¶
()->
_G‘ResuÉ
());

3234 
_CONCRT_ASSERT
(
_Anû¡ÜTask
.
_G‘Im¶
()->
_IsCªûËd
());

3235 ià(
_Anû¡ÜTask
.
_G‘Im¶
()->
_HasU£rExû±iÚ
())

3239 
_Ou‹rTask
->
_CªûlW™hExû±iÚHŞd”
(
_Anû¡ÜTask
.
_G‘Im¶
()->
_G‘Exû±iÚHŞd”
(), 
çl£
);

3243 
_Ou‹rTask
->
_Cªûl
(
Œue
);

3246  
S_OK
;

3247 #ià
_MSC_VER
 >= 1800

3248 }, 
nuÎ±r
, 
CÚcu¼’cy
::
d‘as
::
_DeçuÉAutoIÆše
);

3250 }, 
	gnuÎ±r
, 
	gçl£
, 
	gCÚcu¼’cy
::
d‘as
::
_DeçuÉAutoIÆše
);

3254 #ià
_MSC_VER
 >= 1800

3255 
	gCÚcu¼’cy
::
scheduËr_±r
 
_G‘ScheduËr
() const

3257  
_M_TaskCŞËùiÚ
.
_G‘ScheduËr
();

3260 
	gCÚcu¼’cy
::
ev’t
 
_M_Com¶‘ed
;

3261 
	gCÚcu¼’cy
::
ev’t
 
_M_ScheduËd
;

3265 vŞ©
_TaskIÁ”ÇlS‹
 
	g_M_TaskS‹
;

3268 
boŞ
 
	g_M_fFromAsync
;

3269 #ià
_MSC_VER
 < 1800

3272 
boŞ
 
	g_M_fRuÁimeAgg»g©e
;

3275 
boŞ
 
	g_M_fUnw¿µedTask
;

3280 
	g¡d
::
sh¬ed_±r
<
_Exû±iÚHŞd”
> 
_M_exû±iÚHŞd”
;

3282 
_CÚtšu©iÚTaskHªdËBa£
 * 
	t_CÚtšu©iÚLi¡
;

3284 
ü™iÿl_£ùiÚ
 
	g_M_CÚtšu©iÚsCr™Sec
;

3285 
_CÚtšu©iÚLi¡
 
	g_M_CÚtšu©iÚs
;

3288 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_M_pTok’S‹
;

3291 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’Regi¡¿tiÚ
 * 
_M_pRegi¡¿tiÚ
;

3294 #ià
_MSC_VER
 >= 1800

3295 
	gCÚcu¼’cy
::
d‘as
::
_TaskCŞËùiÚ_t
 
_M_TaskCŞËùiÚ
;

3298 
_TaskC»©iÚC®l¡ack
 
	g_M_pTaskC»©iÚC®l¡ack
;

3300 
_TaskEv’tLogg”
 
	g_M_skEv’tLogg”
;

3302 
	gCÚcu¼’cy
::
d‘as
::
_AsyncTaskCŞËùiÚ
 * 
_M_pTaskCŞËùiÚ
;

3305 * 
	g_M_pTaskC»©iÚAdd»ssHšt
;

3308 
	g´iv©e
:

3310 
_Task_im¶_ba£
(const _Task_impl_base&);

3311 
_Task_im¶_ba£
 cÚ¡ & 
	gİ”©Ü
=(_Task_impl_base const&);

3314 #ià
_MSC_VER
 >= 1800

3315 #ià
_PPLTASK_ASYNC_LOGGING


3316 
šlše
 
	g_TaskEv’tLogg”
::
_LogTaskCom¶‘ed
()

3318 ià(
_M_scheduËd
)

3320 ::
Wšdows
::
Found©iÚ
::
AsyncStus
 
_S‹
;

3321 ià(
	g_M_sk
->
_IsCom¶‘ed
())

3322 
	g_S‹
 = ::
Wšdows
::
Found©iÚ
::
AsyncStus
::
Com¶‘ed
;

3323 ià(
	g_M_sk
->
_HasU£rExû±iÚ
())

3324 
	g_S‹
 = ::
Wšdows
::
Found©iÚ
::
AsyncStus
::
E¼Ü
;

3326 
	g_S‹
 = ::
Wšdows
::
Found©iÚ
::
AsyncStus
::
CªûËd
;

3328 ià(
	gd‘as
::
_IsCau§l™ySuµÜ‹d
())

3330 ::
Wšdows
::
Found©iÚ
::
DŸgno¡ics
::
AsyncCau§l™yT¿ûr
::
T¿ûO³¿tiÚCom¶‘iÚ
(::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™yT¿ûLev–
::
Requœed
, ::Wšdows::Found©iÚ::DŸgno¡ics::
Cau§l™ySourû
::
Lib¿ry
,

3331 
_PPLTaskCau§l™yPÏtfÜmID
, 
»š‹½»t_ÿ¡
<>(
_M_sk
), 
_S‹
);

3338 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

3339 
	g_Task_im¶
 : 
public
 
_Task_im¶_ba£


3341 
ABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncInfo
 
	t_AsyncO³¿tiÚTy³
;

3342 #ià
_MSC_VER
 >= 1800

3343 
_Task_im¶
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
, CÚcu¼’cy::
scheduËr_±r
 
_ScheduËr_¬g
)

3344 : 
_Task_im¶_ba£
(
_Ct
, 
_ScheduËr_¬g
)

3346 
_Task_im¶
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
è: 
_Task_im¶_ba£
(_Ct)

3349 
_M_unw¿µed_async_İ
 = 
nuÎ±r
;

3351 
	gvœtu®
 ~
_Task_im¶
()

3355 
_D”egi¡”CªûÎ©iÚ
();

3357 
vœtu®
 
boŞ
 
_CªûlAndRunCÚtšu©iÚs
(boŞ 
_SynchrÚousCªûl
, boŞ 
_U£rExû±iÚ
, boŞ 
_Prİag©edFromAnû¡Ü
, cÚ¡ 
¡d
::
sh¬ed_±r
<
_Exû±iÚHŞd”
> & _ExceptionHolder)

3359 ’um { 
_NÙhšg
, 
	g_RunCÚtšu©iÚs
, 
	g_Cªûl
 } 
	g_Do
 = _Nothing;

3361 
scİed_lock
 
_LockHŞd”
(
_M_CÚtšu©iÚsCr™Sec
);

3362 ià(
	g_U£rExû±iÚ
)

3364 
_CONCRT_ASSERT
(
_SynchrÚousCªûl
 && !
_IsCom¶‘ed
());

3366 
_CONCRT_ASSERT
(!
_IsCªûËd
(è|| 
_Prİag©edFromAnû¡Ü
);

3367 #ià
_MSC_VER
 < 1800

3369 
_CONCRT_ASSERT
((!
_IsS¹ed
(è&& !
_IsP’dšgCªûl
()è|| !
_Prİag©edFromAnû¡Ü
);

3372 
_CONCRT_ASSERT
(!
_HasU£rExû±iÚ
());

3374 ià(
	g_M_TaskS‹
 =ğ
_CªûËd
)

3377  
çl£
;

3381 
_CONCRT_ASSERT
(
_M_TaskS‹
 !ğ
_Com¶‘ed
);

3382 
	g_M_exû±iÚHŞd”
 = 
_Exû±iÚHŞd”
;

3389 ià(
_IsCom¶‘ed
(è|| 
_IsCªûËd
(è|| (
_IsP’dšgCªûl
(è&& !
	g_SynchrÚousCªûl
))

3391 
_CONCRT_ASSERT
(!
_IsCom¶‘ed
(è|| !
_HasU£rExû±iÚ
());

3392  
	gçl£
;

3394 
_CONCRT_ASSERT
(!
_SynchrÚousCªûl
 || !
_HasU£rExû±iÚ
());

3397 #ià
_MSC_VER
 >= 1800

3398 ià(
	g_SynchrÚousCªûl
)

3400 ià(
	g_SynchrÚousCªûl
 || 
_IsC»©ed
())

3404 
	g_M_TaskS‹
 = 
_CªûËd
;

3405 #ià
_MSC_VER
 < 1800

3406 
	g_M_ScheduËd
.
£t
();

3412 
	g_Do
 = 
_RunCÚtšu©iÚs
;

3416 #ià
_MSC_VER
 >= 1800

3417 
_CONCRT_ASSERT
(!
_U£rExû±iÚ
);

3419 ià(
_IsS¹ed
())

3422 
	g_Do
 = 
_Cªûl
;

3428 
	g_M_TaskS‹
 = 
_P’dšgCªûl
;

3430 
	g_M_skEv’tLogg”
.
_LogCªûlTask
();

3434 
	g_Do
)

3436 
	g_Cªûl
:

3439 
_CONCRT_ASSERT
(
_IsS¹ed
(è&& !
_U£rExû±iÚ
);

3444 
	g_M_TaskS‹
 = 
_P’dšgCªûl
;

3445 ià(
	g_M_unw¿µed_async_İ
 !ğ
nuÎ±r
)

3448 ià(
_M_unw¿µed_async_İ
è_M_unw¿µed_async_İ->
Cªûl
();

3450 #ià
_MSC_VER
 >= 1800

3451 
	g_M_TaskCŞËùiÚ
.
_Cªûl
();

3455 ià(
	g_M_pTaskCŞËùiÚ
 !ğ
nuÎ±r
)

3457 
_M_pTaskCŞËùiÚ
->
_Cªûl
();

3461 #ià
_MSC_VER
 < 1800

3466 #ià
_MSC_VER
 >= 1800

3467 
	g_RunCÚtšu©iÚs
:

3469 
_M_TaskCŞËùiÚ
.
_Com¶‘e
();

3471 ià(
	g_RunCÚtšu©iÚs
)

3473 
	g_M_Com¶‘ed
.
£t
();

3476 ià(
	g_M_CÚtšu©iÚs
)

3479 
	gd‘as
::
_ScheduËFuncW™hAutoIÆše
([=](è-> 
HRESULT
 { 
_RunTaskCÚtšu©iÚs
();  
S_OK
; }, 
CÚcu¼’cy
::
d‘as
::
_DeçuÉAutoIÆše
);

3481 #ià
_MSC_VER
 >= 1800

3486  
	gŒue
;

3488 
_Fš®izeAndRunCÚtšu©iÚs
(
_R‘uºTy³
 
_ResuÉ
)

3491 #ià
_MSC_VER
 >= 1800

3492 
	g_M_ResuÉ
.
S‘
(
_ResuÉ
);

3494 
	g_M_ResuÉ
 = 
_ResuÉ
;

3495 
	g_M_ResuÉCÚ‹xt
 = 
_ResuÉCÚ‹xt
<
_R‘uºTy³
>::
_G‘CÚ‹xt
(
_M_fRuÁimeAgg»g©e
);

3502 
scİed_lock
 
_LockHŞd”
(
_M_CÚtšu©iÚsCr™Sec
);

3506 
_CONCRT_ASSERT
(!
_HasU£rExû±iÚ
(è&& !
_IsCom¶‘ed
());

3507 ià(
_IsCªûËd
())

3513 
	g_M_TaskS‹
 = 
_Com¶‘ed
;

3515 #ià
_MSC_VER
 >= 1800

3516 
	g_M_TaskCŞËùiÚ
.
_Com¶‘e
();

3518 
	g_M_Com¶‘ed
.
£t
();

3520 
_RunTaskCÚtšu©iÚs
();

3525 
boŞ
 
_T¿ns™iÚedToS¹ed
()

3527 
scİed_lock
 
_LockHŞd”
(
_M_CÚtšu©iÚsCr™Sec
);

3528 #ià
_MSC_VER
 >= 1800

3530 
_ASSERT
(!
_IsCªûËd
());

3531 ià(
_IsP’dšgCªûl
())

3533 ià(
_IsCªûËd
())

3536  
	gçl£
;

3538 
_CONCRT_ASSERT
(
_IsC»©ed
());

3539 
	g_M_TaskS‹
 = 
_S¹ed
;

3540  
	gŒue
;

3542 
_S‘Unw¿µedAsyncOp
(
_AsyncO³¿tiÚTy³
* 
_AsyncOp
)

3544 
scİed_lock
 
_LockHŞd”
(
_M_CÚtšu©iÚsCr™Sec
);

3546 ià(
_IsP’dšgCªûl
())

3548 
_CONCRT_ASSERT
(!
_IsCªûËd
());

3549 ià(
	g_AsyncOp
è_AsyncOp->
Cªûl
();

3553 
	g_M_unw¿µed_async_İ
 = 
_AsyncOp
;

3556 #ià
_MSC_VER
 >= 1800

3558 
boŞ
 
_IsDÚe
()

3560  
_IsCom¶‘ed
(è|| 
_IsCªûËd
();

3563 
_R‘uºTy³
 
_G‘ResuÉ
()

3565 #ià
_MSC_VER
 >= 1800

3566  
	g_M_ResuÉ
.
G‘
();

3568  
	g_ResuÉCÚ‹xt
<
	g_R‘uºTy³
>::
_G‘V®ue
(
_M_ResuÉ
, 
_M_ResuÉCÚ‹xt
, 
_M_fRuÁimeAgg»g©e
);

3571 #ià
_MSC_VER
 >= 1800

3572 
	g_ResuÉHŞd”
<
	g_R‘uºTy³
> 
	g_M_ResuÉ
;

3574 
_R‘uºTy³
 
	g_M_ResuÉ
;

3576 
	gMiüosoá
::
WRL
::
ComPŒ
<
_AsyncO³¿tiÚTy³
> 
_M_unw¿µed_async_İ
;

3577 #ià
_MSC_VER
 < 1800

3578 
_CÚ‹xtC®lback
 
	g_M_ResuÉCÚ‹xt
;

3582 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉTy³
>

3583 
	s_Task_com¶‘iÚ_ev’t_im¶


3585 #ià
_MSC_VER
 >= 1800

3586 
	g´iv©e
:

3587 
_Task_com¶‘iÚ_ev’t_im¶
(const _Task_completion_event_impl&);

3588 
	g_Task_com¶‘iÚ_ev’t_im¶
& 
	gİ”©Ü
=(cÚ¡ 
_Task_com¶‘iÚ_ev’t_im¶
&);

3590 
	gpublic
:

3592 
¡d
::
	tveùÜ
<
	tty³Çme
 
	t_Task_±r
<
	t_ResuÉTy³
>::
	t_Ty³
> 
	t_TaskLi¡
;

3594 
_Task_com¶‘iÚ_ev’t_im¶
(è: 
_M_fHasV®ue
(
çl£
), 
_M_fIsCªûËd
(false)

3598 
boŞ
 
_HasU£rExû±iÚ
()

3600  
	g_M_exû±iÚHŞd”
 !ğ
nuÎ±r
;

3603 ~
_Task_com¶‘iÚ_ev’t_im¶
()

3605 autØ
	g_TaskIt
 = 
_M_sks
.
begš
(); _TaskIˆ!ğ_M_sks.
’d
(); ++_TaskIt)

3607 
_CONCRT_ASSERT
(!
_M_fHasV®ue
 && !
_M_fIsCªûËd
);

3609 (*
	g_TaskIt
)->
_Cªûl
(
Œue
);

3614 
_TaskLi¡
 
	g_M_sks
;

3615 
ü™iÿl_£ùiÚ
 
	g_M_skLi¡Cr™Sec
;

3616 #ià
_MSC_VER
 >= 1800

3617 
	g_ResuÉHŞd”
<
	g_ResuÉTy³
> 
	g_M_v®ue
;

3619 
_ResuÉTy³
 
	g_M_v®ue
;

3621 
	g¡d
::
sh¬ed_±r
<
_Exû±iÚHŞd”
> 
_M_exû±iÚHŞd”
;

3622 
boŞ
 
	g_M_fHasV®ue
;

3623 
boŞ
 
	g_M_fIsCªûËd
;

3627 
šlše
 
	g¡d
::
funùiÚ
<
HRESULT
(
_Un™_ty³
*)> 
_MakeVoidToUn™Func
(cÚ¡ 
¡d
::funùiÚ<HRESULT()>& 
_Func
)

3629  [=](
_Un™_ty³
* 
»tV®
è-> 
HRESULT
 { HRESULT 
hr
 = 
_Func
(); *
	g»tV®
 = _Un™_ty³();  
	ghr
; };

3632 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

3633 
	g¡d
::
funùiÚ
<
HRESULT
(
_Un™_ty³
, 
_Ty³
*)> 
_MakeUn™ToTFunc
(cÚ¡ 
¡d
::funùiÚ<HRESULT(_Ty³*)>& 
_Func
)

3635  [=](
_Un™_ty³
, 
_Ty³
* 
	g»tV®
è-> 
	gHRESULT
 { 
HRESULT
 
	ghr
 = 
_Func
(
»tV®
);  hr; };

3638 
	g‹m¶©e
 <
ty³Çme
 
	g_Ty³
>

3639 
	g¡d
::
funùiÚ
<
HRESULT
(
_Ty³
, 
_Un™_ty³
*)> 
_MakeTToUn™Func
(cÚ¡ 
¡d
::funùiÚ<HRESULT(_Ty³)>& 
_Func
)

3641 [=](
_Ty³
 
t
, 
_Un™_ty³
* 
	g»tV®
è-> 
	gHRESULT
 { 
HRESULT
 
	ghr
 = 
_Func
(t); *retVal = _Unit_type();  hr; };

3644 
šlše
 
	g¡d
::
funùiÚ
<
HRESULT
(
_Un™_ty³
, _Un™_ty³*)> 
_MakeUn™ToUn™Func
(cÚ¡ 
¡d
::funùiÚ<HRESULT()>& 
_Func
)

3646  [=](
_Un™_ty³
, _Un™_ty³* 
	g»tV®
è-> 
	gHRESULT
 { 
HRESULT
 
	ghr
 = 
_Func
(); *retVal = _Unit_type();  hr; };

3668 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉTy³
>

3669 şas 
	csk_com¶‘iÚ_ev’t


3671 
	gpublic
:

3676 
sk_com¶‘iÚ_ev’t
(è: 
_M_Im¶
(
¡d
::
make_sh¬ed
<
d‘as
::
_Task_com¶‘iÚ_ev’t_im¶
<
_ResuÉTy³
>>())

3696 
boŞ
 
£t
(
_ResuÉTy³
 
_ResuÉ
) const

3699 ià(
_IsTrigg”ed
())

3701  
çl£
;

3704 
_TaskLi¡
 
	g_Tasks
;

3705 
boŞ
 
	g_RunCÚtšu©iÚs
 = 
çl£
;

3707 
	gd‘as
::
scİed_lock
 
_LockHŞd”
(
_M_Im¶
->
_M_skLi¡Cr™Sec
);

3709 ià(!
_IsTrigg”ed
())

3711 #ià
_MSC_VER
 >= 1800

3712 
	g_M_Im¶
->
	g_M_v®ue
.
S‘
(
_ResuÉ
);

3714 
	g_M_Im¶
->
	g_M_v®ue
 = 
_ResuÉ
;

3716 
	g_M_Im¶
->
	g_M_fHasV®ue
 = 
Œue
;

3718 
	g_Tasks
.
sw­
(
_M_Im¶
->
_M_sks
);

3719 
	g_RunCÚtšu©iÚs
 = 
Œue
;

3723 ià(
	g_RunCÚtšu©iÚs
)

3725 autØ
	g_TaskIt
 = 
_Tasks
.
begš
(); _TaskIˆ!ğ_Tasks.
’d
(); ++_TaskIt)

3727 #ià
_MSC_VER
 >= 1800

3729 ià((*
	g_TaskIt
)->
_IsP’dšgCªûl
())

3730 (*
	g_TaskIt
)->
_Cªûl
(
Œue
);

3736 (*
	g_TaskIt
)->
_Fš®izeAndRunCÚtšu©iÚs
(
_M_Im¶
->
_M_v®ue
.
G‘
());

3742 (*
	g_TaskIt
)->
_Fš®izeAndRunCÚtšu©iÚs
(
_M_Im¶
->
_M_v®ue
);

3745 ià(
	g_M_Im¶
->
_HasU£rExû±iÚ
())

3747 
	g_M_Im¶
->
	g_M_exû±iÚHŞd”
.
»£t
();

3749  
	gŒue
;

3752  
	gçl£
;

3754 #ià
_MSC_VER
 >= 1800

3756 
	g‹m¶©e
<
ty³Çme
 
	g_E
>

3757 
__deş¥ec
(
nošlše
)

3758 
boŞ
 
£t_exû±iÚ
(
_E
 
_Exû±
) const

3761  
_Cªûl
(
¡d
::
make_exû±iÚ_±r
(
_Exû±
), 
_CAPTURE_CALLSTACK
());

3772 
__deş¥ec
(
nošlše
)

3773 
boŞ
 
£t_exû±iÚ
(
¡d
::
exû±iÚ_±r
 
_Exû±iÚPŒ
) const

3776 #ià
_MSC_VER
 >= 1800

3777  
_Cªûl
(
_Exû±iÚPŒ
, 
_CAPTURE_CALLSTACK
());

3779  
_Cªûl
(
_Exû±iÚPŒ
, 
_R‘uºAdd»ss
());

3787 
boŞ
 
_Cªûl
() const

3790  
_CªûlIÁ”Çl
();

3797 
	g‹m¶©e
<
ty³Çme
 
	g_ExHŞd”Ty³
>

3798 #ià
_MSC_VER
 >= 1800

3799 
boŞ
 
_Cªûl
(
_ExHŞd”Ty³
 
_ExHŞd”
, cÚ¡ 
d‘as
::
_TaskC»©iÚC®l¡ack
 &
_S‘Exû±iÚAdd»ssHšt
 = details::_TaskCreationCallstack()) const

3801 
boŞ
 
_Cªûl
(
_ExHŞd”Ty³
 
_ExHŞd”
, * 
_S‘Exû±iÚAdd»ssHšt
 = 
nuÎ±r
) const

3804 ()
_S‘Exû±iÚAdd»ssHšt
;

3805 
boŞ
 
	g_CªûËd
;

3806 #ià
_MSC_VER
 >= 1800

3807 if(
_StÜeExû±iÚ
(
_ExHŞd”
, 
_S‘Exû±iÚAdd»ssHšt
))

3809 ià(
_StÜeExû±iÚ
(
_ExHŞd”
))

3812 
	g_CªûËd
 = 
_CªûlIÁ”Çl
();

3813 
_CONCRT_ASSERT
(
_CªûËd
);

3817 
	g_CªûËd
 = 
çl£
;

3819  
	g_CªûËd
;

3827 
	g‹m¶©e
<
ty³Çme
 
	g_ExHŞd”Ty³
>

3828 #ià
_MSC_VER
 >= 1800

3829 
boŞ
 
_StÜeExû±iÚ
(
_ExHŞd”Ty³
 
_ExHŞd”
, cÚ¡ 
d‘as
::
_TaskC»©iÚC®l¡ack
 &
_S‘Exû±iÚAdd»ssHšt
 = details::_TaskCreationCallstack()) const

3831 
boŞ
 
_StÜeExû±iÚ
(
_ExHŞd”Ty³
 
_ExHŞd”
, * 
_S‘Exû±iÚAdd»ssHšt
 = 
nuÎ±r
) const

3834 
d‘as
::
scİed_lock
 
_LockHŞd”
(
_M_Im¶
->
_M_skLi¡Cr™Sec
);

3835 ià(!
_IsTrigg”ed
(è&& !
	g_M_Im¶
->
_HasU£rExû±iÚ
())

3839 
	g_M_Im¶
->
	g_M_exû±iÚHŞd”
 = 
_ToExû±iÚHŞd”
(
_ExHŞd”
, 
_S‘Exû±iÚAdd»ssHšt
);

3840  
	gŒue
;

3842  
	gçl£
;

3848 
boŞ
 
_IsTrigg”ed
() const

3850  
	g_M_Im¶
->
	g_M_fHasV®ue
 || _M_Im¶->
	g_M_fIsCªûËd
;

3853 
	g´iv©e
:

3855 #ià
_MSC_VER
 >= 1800

3856 
¡d
::
sh¬ed_±r
<
d‘as
::
_Exû±iÚHŞd”
> 
_ToExû±iÚHŞd”
(cÚ¡ std::sh¬ed_±r<d‘as::_Exû±iÚHŞd”>& 
_ExHŞd”
, cÚ¡ d‘as::
_TaskC»©iÚC®l¡ack
&)

3858 
¡d
::
sh¬ed_±r
<
d‘as
::
_Exû±iÚHŞd”
> 
_ToExû±iÚHŞd”
(cÚ¡ std::sh¬ed_±r<d‘as::_Exû±iÚHŞd”>& 
_ExHŞd”
, *)

3861  
	g_ExHŞd”
;

3864 #ià
_MSC_VER
 >= 1800

3865 
	g¡d
::
sh¬ed_±r
<
d‘as
::
_Exû±iÚHŞd”
> 
_ToExû±iÚHŞd”
(
¡d
::
exû±iÚ_±r
 
_Exû±iÚPŒ
, cÚ¡ d‘as::
_TaskC»©iÚC®l¡ack
 &
_S‘Exû±iÚAdd»ssHšt
)

3867 
¡d
::
sh¬ed_±r
<
d‘as
::
_Exû±iÚHŞd”
> 
_ToExû±iÚHŞd”
(¡d::
exû±iÚ_±r
 
_Exû±iÚPŒ
, * 
_S‘Exû±iÚAdd»ssHšt
)

3870  
	g¡d
::
make_sh¬ed
<
d‘as
::
_Exû±iÚHŞd”
>(
_Exû±iÚPŒ
, 
	g_S‘Exû±iÚAdd»ssHšt
);

3873 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
ä›nd
 
şass
 
	gsk
;

3874 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
ä›nd
 
şass
 
	gsk_com¶‘iÚ_ev’t
;

3876 
ty³Çme
 
	td‘as
::
	t_Task_com¶‘iÚ_ev’t_im¶
<
	t_ResuÉTy³
>::
	t_TaskLi¡
 _TaskList;

3881 
boŞ
 
_CªûlIÁ”Çl
() const

3885 
_CONCRT_ASSERT
(!
_M_Im¶
->
_M_fHasV®ue
);

3886 ià(
	g_M_Im¶
->
	g_M_fIsCªûËd
)

3888  
	gçl£
;

3891 
_TaskLi¡
 
	g_Tasks
;

3892 
boŞ
 
	g_Cªûl
 = 
çl£
;

3894 
	gd‘as
::
scİed_lock
 
_LockHŞd”
(
_M_Im¶
->
_M_skLi¡Cr™Sec
);

3895 
_CONCRT_ASSERT
(!
_M_Im¶
->
_M_fHasV®ue
);

3896 ià(!
	g_M_Im¶
->
	g_M_fIsCªûËd
)

3898 
	g_M_Im¶
->
	g_M_fIsCªûËd
 = 
Œue
;

3899 
	g_Tasks
.
sw­
(
_M_Im¶
->
_M_sks
);

3900 
	g_Cªûl
 = 
Œue
;

3904 
boŞ
 
	g_U£rExû±iÚ
 = 
_M_Im¶
->
_HasU£rExû±iÚ
();

3906 ià(
	g_Cªûl
)

3908 autØ
	g_TaskIt
 = 
_Tasks
.
begš
(); _TaskIˆ!ğ_Tasks.
’d
(); ++_TaskIt)

3911 ià(
	g_U£rExû±iÚ
)

3913 (*
	g_TaskIt
)->
_CªûlW™hExû±iÚHŞd”
(
_M_Im¶
->
_M_exû±iÚHŞd”
, 
Œue
);

3917 (*
	g_TaskIt
)->
_Cªûl
(
Œue
);

3921  
	g_Cªûl
;

3928 
_Regi¡”Task
(cÚ¡ 
ty³Çme
 
d‘as
::
_Task_±r
<
_ResuÉTy³
>::
_Ty³
 & 
_TaskP¬am
)

3930 
d‘as
::
scİed_lock
 
_LockHŞd”
(
_M_Im¶
->
_M_skLi¡Cr™Sec
);

3931 #ià
_MSC_VER
 < 1800

3932 
	g_TaskP¬am
->
_S‘ScheduËdEv’t
();

3935 ià(
	g_M_Im¶
->
_HasU£rExû±iÚ
())

3937 
	g_TaskP¬am
->
_CªûlW™hExû±iÚHŞd”
(
_M_Im¶
->
_M_exû±iÚHŞd”
, 
Œue
);

3939 ià(
	g_M_Im¶
->
	g_M_fHasV®ue
)

3941 #ià
_MSC_VER
 >= 1800

3942 
	g_TaskP¬am
->
_Fš®izeAndRunCÚtšu©iÚs
(
_M_Im¶
->
_M_v®ue
.
G‘
());

3944 
	g_TaskP¬am
->
_Fš®izeAndRunCÚtšu©iÚs
(
_M_Im¶
->
_M_v®ue
);

3949 
	g_M_Im¶
->
	g_M_sks
.
push_back
(
_TaskP¬am
);

3953 
	g¡d
::
sh¬ed_±r
<
d‘as
::
_Task_com¶‘iÚ_ev’t_im¶
<
_ResuÉTy³
>> 
_M_Im¶
;

3970 
	g‹m¶©e
<>

3971 
şass
 
	gsk_com¶‘iÚ_ev’t
<>

3973 
	gpublic
:

3987 
boŞ
 
£t
() const

3989  
_M_un™Ev’t
.
£t
(
d‘as
::
_Un™_ty³
());

3991 #ià
_MSC_VER
 >= 1800

3993 
	g‹m¶©e
<
ty³Çme
 
	g_E
>

3994 
__deş¥ec
(
nošlše
)

3995 
boŞ
 
£t_exû±iÚ
(
_E
 
_Exû±
) const

3997  
	g_M_un™Ev’t
.
_Cªûl
(
¡d
::
make_exû±iÚ_±r
(
_Exû±
), 
_CAPTURE_CALLSTACK
());

4008 
__deş¥ec
(
nošlše
)

4009 
boŞ
 
£t_exû±iÚ
(
¡d
::
exû±iÚ_±r
 
_Exû±iÚPŒ
) const

4012 #ià
_MSC_VER
 >= 1800

4013  
_M_un™Ev’t
.
_Cªûl
(
_Exû±iÚPŒ
, 
_CAPTURE_CALLSTACK
());

4015  
	g_M_un™Ev’t
.
_Cªûl
(
_Exû±iÚPŒ
, 
_R‘uºAdd»ss
());

4023 
_Cªûl
() const

4025 
	g_M_un™Ev’t
.
_Cªûl
();

4032 
_Cªûl
(cÚ¡ 
¡d
::
sh¬ed_±r
<
d‘as
::
_Exû±iÚHŞd”
>& 
_ExHŞd”
) const

4034 
_M_un™Ev’t
.
_Cªûl
(
_ExHŞd”
);

4042 
boŞ
 
_StÜeExû±iÚ
(cÚ¡ 
¡d
::
sh¬ed_±r
<
d‘as
::
_Exû±iÚHŞd”
>& 
_ExHŞd”
) const

4044  
_M_un™Ev’t
.
_StÜeExû±iÚ
(
_ExHŞd”
);

4050 
boŞ
 
_IsTrigg”ed
() const

4052  
	g_M_un™Ev’t
.
_IsTrigg”ed
();

4055 
	g´iv©e
:

4056 
‹m¶©e
 <
ty³Çme
 
T
> 
ä›nd
 
şass
 
sk
;

4062 
_Regi¡”Task
(
d‘as
::
_Task_±r
<d‘as::
_Un™_ty³
>::
_Ty³
 
_TaskP¬am
)

4064 
_M_un™Ev’t
.
_Regi¡”Task
(
_TaskP¬am
);

4068 
	gsk_com¶‘iÚ_ev’t
<
	gd‘as
::
_Un™_ty³
> 
_M_un™Ev’t
;

4070 
Çme¥aû
 
	gd‘as


4079 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4080 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , , , , , , è-> 
ty³Çme
 
deşty³
(_P¬am(), 
¡d
::
Œue_ty³
());

4083 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4084 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , , , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
¡dx
::
deşv®
<
sk
<
_R‘uºTy³
>*>()), 
¡d
::
Œue_ty³
());

4087 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4088 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
¡dx
::
deşv®
<
_R‘uºTy³
*>()), 
¡d
::
Œue_ty³
());

4091 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4092 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am->
G‘ResuÉs
(), 
¡d
::
Œue_ty³
());

4095 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4096 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am->
G‘ResuÉs
(
¡dx
::
deşv®
<deşty³(
_G‘Unw¿µedTy³
(¡dx::deşv®<_Ty>()))*>()), 
¡d
::
Œue_ty³
());

4099 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4100 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , , ...è-> 
ty³Çme
 
deşty³
(_P¬am.
£t
(
¡dx
::
deşv®
<
_R‘uºTy³
>()), 
¡d
::
Œue_ty³
());

4102 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4103 autØ
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, , ...è-> 
ty³Çme
 
deşty³
(_P¬am.
£t
(), 
¡d
::
Œue_ty³
());

4106 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4107 
	g¡d
::
çl£_ty³
 
_IsV®idTaskCtÜ
(
_Ty
 
_P¬am
, ...);

4109 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4110 
_V®id©eTaskCÚ¡ruùÜArgs
(
_Ty
 
_P¬am
)

4112 ()
	g_P¬am
;

4113 
¡©ic_as£¹
(
¡d
::
is_§me
<
deşty³
(
d‘as
::
_IsV®idTaskCtÜ
<
_R‘uºTy³
>(
_P¬am
, 0, 0, 0, 0, 0, 0, 0)), std::
Œue_ty³
>::
v®ue
,

4116 
¡©ic_as£¹
(!(
¡d
::
is_§me
<
_Ty
, 
_R‘uºTy³
>::
v®ue
 && 
d‘as
::
_IsIAsyncInfo
<_Ty>::
_V®ue
),

4122 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4123 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , , , , , , è-> 
ty³Çme
 
deşty³
(_P¬am(), 
¡d
::
Œue_ty³
());

4126 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4127 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , , , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
¡dx
::
deşv®
<
_R‘uºTy³
*>()), 
¡d
::
Œue_ty³
());

4130 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4131 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
()), 
¡d
::
Œue_ty³
());

4134 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4135 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
(), 
¡dx
::
deşv®
<
_R‘uºTy³
*>()), 
¡d
::
Œue_ty³
());

4138 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4139 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
d‘as
::
_Prog»ssR•Ü‹rCtÜArgTy³
()), 
¡d
::
Œue_ty³
());

4142 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4143 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
d‘as
::
_Prog»ssR•Ü‹rCtÜArgTy³
(), 
¡dx
::
deşv®
<
_R‘uºTy³
*>()), 
¡d
::
Œue_ty³
());

4146 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4147 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
d‘as
::
_Prog»ssR•Ü‹rCtÜArgTy³
(), 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
()), 
¡d
::
Œue_ty³
());

4150 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4151 autØ
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, , ...è-> 
ty³Çme
 
deşty³
(_P¬am(
d‘as
::
_Prog»ssR•Ü‹rCtÜArgTy³
(), 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
(), 
¡dx
::
deşv®
<
_R‘uºTy³
*>()), 
¡d
::
Œue_ty³
());

4154 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

4155 
	g¡d
::
çl£_ty³
 
_IsV®idC»©eAsync
(
_Ty
 
_P¬am
, ...);

4172 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

4173 şas 
	csk


4175 
	gpublic
:

4180 
_R‘uºTy³
 
	t»suÉ_ty³
;

4204 
sk
(è: 
_M_Im¶
(
nuÎ±r
)

4245 
‹m¶©e
<
ty³Çme
 
_Ty
>

4246 
__deş¥ec
(
nošlše
)

4247 
ex¶ic™
 
sk
(
_Ty
 
_P¬am
)

4249 #ià
_MSC_VER
 >= 1800

4250 
sk_İtiÚs
 
_TaskO±iÚs
;

4252 
	gd‘as
::
_V®id©eTaskCÚ¡ruùÜArgs
<
_R‘uºTy³
, 
	g_Ty
>(
	g_P¬am
);

4254 #ià
_MSC_VER
 >= 1800

4255 
_C»©eIm¶
(
_TaskO±iÚs
.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(), _TaskO±iÚs.
g‘_scheduËr
());

4257 
_C»©eIm¶
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
().
_G‘Im¶V®ue
());

4260 #ià
_MSC_VER
 >= 1800

4261 
_S‘TaskC»©iÚC®l¡ack
(
_CAPTURE_CALLSTACK
());

4263 
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

4265 
_TaskIn™MaybeFunùÜ
(
_P¬am
, 
d‘as
::
_IsC®ÏbË
<
_R‘uºTy³
>(_Param, 0, 0, 0));

4303 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

4304 
__deş¥ec
(
nošlše
)

4305 #ià
_MSC_VER
 >= 1800

4306 
ex¶ic™
 
sk
(
_Ty
 
_P¬am
, cÚ¡ 
sk_İtiÚs
 &
_TaskO±iÚs
)

4308 
ex¶ic™
 
sk
(
_Ty
 
_P¬am
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_Tok’
)

4311 
d‘as
::
_V®id©eTaskCÚ¡ruùÜArgs
<
_R‘uºTy³
, 
	g_Ty
>(
	g_P¬am
);

4313 #ià
_MSC_VER
 >= 1800

4314 
_C»©eIm¶
(
_TaskO±iÚs
.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(), _TaskO±iÚs.
g‘_scheduËr
());

4316 
_C»©eIm¶
(
_Tok’
.
_G‘Im¶V®ue
());

4319 #ià
_MSC_VER
 >= 1800

4320 
_S‘TaskC»©iÚC®l¡ack
(
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_M_hasP»£tC»©iÚC®l¡ack
 ? d‘as::_g‘_š‹º®_sk_İtiÚs(_TaskO±iÚs).
_M_´e£tC»©iÚC®l¡ack
 : 
_CAPTURE_CALLSTACK
());

4322 
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

4324 
_TaskIn™MaybeFunùÜ
(
_P¬am
, 
d‘as
::
_IsC®ÏbË
<
_R‘uºTy³
>(_Param, 0, 0, 0));

4352 
sk
(cÚ¡ask& 
_Oth”
è: 
_M_Im¶
(_Other._M_Impl) {}

4379 
sk
Ñask&& 
_Oth”
è: 
_M_Im¶
(
¡d
::
move
(_Other._M_Impl)) {}

4392 
sk
& 
İ”©Ü
=(cÚ¡ask& 
_Oth”
)

4394 ià(
this
 !ğ&
_Oth”
)

4396 
_M_Im¶
 = 
_Oth”
._M_Impl;

4398  *
	gthis
;

4412 
	gsk
& 
	gİ”©Ü
=(
sk
&& 
_Oth”
)

4414 ià(
this
 !ğ&
_Oth”
)

4416 
_M_Im¶
 = 
¡d
::
move
(
_Oth”
._M_Impl);

4418  *
	gthis
;

4441 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

4442 
__deş¥ec
(
nošlše
)

4443 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, 
	g_R‘uºTy³
>::
_TaskOfTy³


4445 #ià
_MSC_VER
 >= 1800

4446 
sk_İtiÚs
 
_TaskO±iÚs
;

4447 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_CAPTURE_CALLSTACK
());

4448  
	g_Th’Im¶
<
	g_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_TaskO±iÚs
);

4450 autØ
	g_CÚtšu©iÚTask
 = 
_Th’Im¶
<
_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	gnuÎ±r
, 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
());

4452 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

4453  
	g_CÚtšu©iÚTask
;

4481 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

4482 
__deş¥ec
(
nošlše
)

4483 #ià
_MSC_VER
 >= 1800

4484 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
sk_İtiÚs
 
_TaskO±iÚs
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, 
	g_R‘uºTy³
>::
_TaskOfTy³


4486 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
ècÚ¡ -> 
ty³Çme
 
d‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, 
	g_R‘uºTy³
>::
_TaskOfTy³


4489 #ià
_MSC_VER
 >= 1800

4490 
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_CAPTURE_CALLSTACK
());

4491  
	g_Th’Im¶
<
	g_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_TaskO±iÚs
);

4493 autØ
	g_CÚtšu©iÚTask
 = 
_Th’Im¶
<
_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
());

4495 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

4496  
	g_CÚtšu©iÚTask
;

4499 #ià
_MSC_VER
 < 1800

4524 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

4525 
__deş¥ec
(
nošlše
)

4526 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, 
	g_R‘uºTy³
>::
_TaskOfTy³


4528 autØ
_CÚtšu©iÚTask
 = 
_Th’Im¶
<
_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	gnuÎ±r
, 
	g_CÚtšu©iÚCÚ‹xt
);

4530 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

4531  
	g_CÚtšu©iÚTask
;

4562 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

4563 
__deş¥ec
(
nošlše
)

4564 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
, 
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, 
	g_R‘uºTy³
>::
_TaskOfTy³


4566 #ià
_MSC_VER
 >= 1800

4567 
sk_İtiÚs
 
_TaskO±iÚs
(
_CªûÎ©iÚTok’
, 
_CÚtšu©iÚCÚ‹xt
);

4568 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_CAPTURE_CALLSTACK
());

4569  
	g_Th’Im¶
<
	g_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_TaskO±iÚs
);

4571 autØ
	g_CÚtšu©iÚTask
 = 
_Th’Im¶
<
_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
	g_CÚtšu©iÚCÚ‹xt
);

4573 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

4574  
	g_CÚtšu©iÚTask
;

4587 
sk_¡©us
 
wa™
() const

4589 ià(
	g_M_Im¶
 =ğ
nuÎ±r
)

4591 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("wait() cannot be called on‡ default constructedask.");

4594  
	g_M_Im¶
->
_Wa™
();

4609 
_R‘uºTy³
 
g‘
() const

4611 ià(
	g_M_Im¶
 =ğ
nuÎ±r
)

4613 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("get() cannot be called on‡ default constructedask.");

4616 ià(
	g_M_Im¶
->
_Wa™
(è=ğ
CÚcu¼’cy
::
ÿnûËd
)

4618 
throw
 
CÚcu¼’cy
::
sk_ÿnûËd
();

4621  
	g_M_Im¶
->
_G‘ResuÉ
();

4623 #ià
_MSC_VER
 >= 1800

4633 
boŞ
 
is_dÚe
() const

4635 ià(!
	g_M_Im¶
)

4637 
throw
 
	gCÚcu¼’cy
::
šv®id_İ”©iÚ
("is_done() cannot be called on‡ default constructedask.");

4640  
	g_M_Im¶
->
_IsDÚe
();

4649 
	gCÚcu¼’cy
::
scheduËr_±r
 
scheduËr
() const

4651 ià(!
_M_Im¶
)

4653 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("scheduler() cannot be called on‡ default constructedask.");

4656  
	g_M_Im¶
->
_G‘ScheduËr
();

4666 
boŞ
 
is_­¬tm’t_aw¬e
() const

4668 ià(
	g_M_Im¶
 =ğ
nuÎ±r
)

4670 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("is_apartment_aware() cannot be called on‡ default constructedask.");

4672  
	g_M_Im¶
->
_IsA·¹m’tAw¬e
();

4682 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
sk
<
_R‘uºTy³
>& 
_Rhs
) const

4684  (
_M_Im¶
 =ğ
_Rhs
._M_Impl);

4694 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
sk
<
_R‘uºTy³
>& 
_Rhs
) const

4696  !
İ”©Ü
==(
_Rhs
);

4702 #ià
_MSC_VER
 >= 1800

4703 
_C»©eIm¶
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
, CÚcu¼’cy::
scheduËr_±r
 
_ScheduËr
)

4705 
_C»©eIm¶
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
)

4708 
_CONCRT_ASSERT
(
_Ct
 !ğ
nuÎ±r
);

4709 #ià
_MSC_VER
 >= 1800

4710 
	g_M_Im¶
 = 
d‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Make
(
_Ct
, 
_ScheduËr
);

4712 
	g_M_Im¶
 = 
d‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Make
(
_Ct
);

4714 ià(
	g_Ct
 !ğ
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
())

4716 #ià
_MSC_VER
 >= 1800

4717 
_M_Im¶
->
_Regi¡”CªûÎ©iÚ
(_M_Impl);

4719 
	g_M_Im¶
->
_Regi¡”CªûÎ©iÚ
();

4727 cÚ¡ 
ty³Çme
 
	gd‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 & 
_G‘Im¶
() const

4729  
_M_Im¶
;

4735 
_S‘Im¶
(cÚ¡ 
ty³Çme
 
d‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 & 
_Im¶
)

4737 
_CONCRT_ASSERT
(
_M_Im¶
 =ğ
nuÎ±r
);

4738 
	g_M_Im¶
 = 
_Im¶
;

4744 
_S‘Im¶
(
ty³Çme
 
d‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 && 
_Im¶
)

4746 
_CONCRT_ASSERT
(
_M_Im¶
 =ğ
nuÎ±r
);

4747 
	g_M_Im¶
 = 
¡d
::
move
(
_Im¶
);

4753 
_S‘Async
(
boŞ
 
_Async
 = 
Œue
)

4755 
_G‘Im¶
()->
_S‘Async
(
_Async
);

4761 #ià
_MSC_VER
 >= 1800

4762 
_S‘TaskC»©iÚC®l¡ack
(cÚ¡ 
d‘as
::
_TaskC»©iÚC®l¡ack
 &
_ÿÎ¡ack
)

4764 
_G‘Im¶
()->
_S‘TaskC»©iÚC®l¡ack
(
_ÿÎ¡ack
);

4767 
_S‘TaskC»©iÚAdd»ssHšt
(* 
_Add»ss
)

4769 
_G‘Im¶
()->
_S‘TaskC»©iÚAdd»ssHšt
(
_Add»ss
);

4777 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

4778 #ià
_MSC_VER
 >= 1800

4779 autØ
_Th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
,

4780 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
 = 
CÚcu¼’cy
::d‘as::
_FÜûIÆše
ècÚ¡ -> 
ty³Çme
 d‘as::
_CÚtšu©iÚTy³T¿™s
<
_FunùiÚ
, 
	g_R‘uºTy³
>::
_TaskOfTy³


4783 autØ
_ScheduËr
 = 
_G‘Im¶
()->
_G‘ScheduËr
();

4785  
	g_Th’Im¶
<
	g_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_PTok’S‹
, 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
(), 
	g_ScheduËr
, 
_CAPTURE_CALLSTACK
(), 
	g_IÆššgMode
);

4788 autØ
_Th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, 
boŞ
 
_Agg»g©šg
,

4789 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
 = 
CÚcu¼’cy
::d‘as::
_FÜûIÆše
ècÚ¡ -> 
ty³Çme
 d‘as::
_CÚtšu©iÚTy³T¿™s
<
_FunùiÚ
, 
	g_R‘uºTy³
>::
_TaskOfTy³


4791  
_Th’Im¶
<
_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_PTok’S‹
, 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
(), 
	g_Agg»g©šg
, 
	g_IÆššgMode
);

4795 
	g´iv©e
:

4796 
‹m¶©e
 <
ty³Çme
 
T
> 
ä›nd
 
şass
 
sk
;

4800 
	g‹m¶©e
<
ty³Çme
 
	g_R‘Ty³
>

4801 şas 
	c_In™_func_ŒªsfÜm”


4803 
	gpublic
:

4804 autØ
_P”fÜm
(
¡d
::
funùiÚ
<
HRESULT
(
_R‘Ty³
*)> 
_Func
è-> 
deşty³
(_Func)

4806  
_Func
;

4810 
	g‹m¶©e
<>

4811 
şass
 
	g_In™_func_ŒªsfÜm”
<>

4813 
	gpublic
:

4814 autØ
_P”fÜm
(
¡d
::
funùiÚ
<
HRESULT
()> 
_Func
è-> 
deşty³
(
d‘as
::
_MakeVoidToUn™Func
(_Func))

4816  
d‘as
::
_MakeVoidToUn™Func
(
_Func
);

4821 
	g‹m¶©e
 <
ty³Çme
 
	g_IÁ”ÇlR‘uºTy³
,y³Çm
	g_FunùiÚ
,y³Çm
	g_Ty³S–eùiÚ
>

4822 
	g_In™ŸlTaskHªdË
 :

4823 
d‘as
::
_PPLTaskHªdË
<
_R‘uºTy³
, 
	g_In™ŸlTaskHªdË
<
	g_IÁ”ÇlR‘uºTy³
, 
	g_FunùiÚ
, 
	g_Ty³S–eùiÚ
>, 
	gd‘as
::
_UÄ—lizedChÜe
>

4825 
_FunùiÚ
 
_M_funùiÚ
;

4826 
_In™ŸlTaskHªdË
(cÚ¡ 
ty³Çme
 
d‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 & 
_TaskIm¶
, cÚ¡ 
_FunùiÚ
 & _FunùiÚè: 
_M_funùiÚ
(_FunùiÚ), 
_PPLTaskHªdË
(_TaskImpl)

4829 
	gvœtu®
 ~
_In™ŸlTaskHªdË
() {}

4831 #ià
_MSC_VER
 >= 1800

4832 
	g‹m¶©e
 <
ty³Çme
 
	g_Func
,y³Çm
	g_R‘Arg
>

4833 autØ
_LogWÜkI‹mAndInvokeU£rLambda
(
_Func
 && 
_func
, 
_R‘Arg
 && 
_»tArg
ècÚ¡ -> 
deşty³
(_func(
¡d
::
fÜw¬d
<_RetArg>(_retArg)))

4835 
d‘as
::
_TaskWÜkI‹mRAIILogg”
 
_LogWÜkI‹m
(
this
->
_M_pTask
->
_M_skEv’tLogg”
);

4836  
_func
(
¡d
::
fÜw¬d
<
_R‘Arg
>(
_»tArg
));

4840 
_P”fÜm
() const

4842 
_In™
(
_Ty³S–eùiÚ
());

4844 #ià
_MSC_VER
 >= 1800

4846 
_SyncCªûlAndPrİag©eExû±iÚ
() const

4848 
	gthis
->
	g_M_pTask
->
_Cªûl
(
Œue
);

4856 
_In™
(
d‘as
::
_Ty³S–eùÜNoAsync
) const

4858 
_R‘uºTy³
 
»tV®
;

4859 #ià
_MSC_VER
 >= 1800

4860 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_In™_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
>::
_P”fÜm
(
_M_funùiÚ
), &
»tV®
);

4862 
HRESULT
 
	ghr
 = 
_In™_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
>::
_P”fÜm
(
_M_funùiÚ
)(&
»tV®
);

4864 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

4865 
	g_M_pTask
->
_Fš®izeAndRunCÚtšu©iÚs
(
»tV®
);

4876 
_In™
(
d‘as
::
_Ty³S–eùÜAsyncTask
) const

4878 
sk
<
_IÁ”ÇlR‘uºTy³
> 
»tV®
;

4879 #ià
_MSC_VER
 >= 1800

4880 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, &
»tV®
);

4882 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(&
»tV®
);

4884 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

4885 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_R‘uºTy³
, 
	g_IÁ”ÇlR‘uºTy³
>(
	g_M_pTask
, 
	g»tV®
);

4887 
_In™
(
d‘as
::
_Ty³S–eùÜAsyncO³¿tiÚ
) const

4889 
_R‘uºTy³
 
»tV®
;

4890 #ià
_MSC_VER
 >= 1800

4891 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, &
»tV®
);

4893 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(&
»tV®
);

4895 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

4896 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_R‘uºTy³
, 
	g_IÁ”ÇlR‘uºTy³
>(
	g_M_pTask
,

4897 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
<
_IÁ”ÇlR‘uºTy³
>>(
»tV®
).
G‘
());

4905 
_In™
(
d‘as
::
_Ty³S–eùÜAsyncAùiÚ
) const

4907 
_R‘uºTy³
 
»tV®
;

4908 #ià
_MSC_VER
 >= 1800

4909 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, &
»tV®
);

4911 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(&
»tV®
);

4913 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

4914 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_R‘uºTy³
, 
	g_IÁ”ÇlR‘uºTy³
>(
	g_M_pTask
, 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
>(
»tV®
).
G‘
());

4922 
_In™
(
d‘as
::
_Ty³S–eùÜAsyncO³¿tiÚW™hProg»ss
) const

4924 
d‘as
::
	t_G‘Prog»ssTy³
<
	tdeşty³
(
	t_M_funùiÚ
())>::
	t_V®ue
 
	t_Prog»ssTy³
;

4925 
_R‘uºTy³
 
	g»tV®
;

4926 #ià
_MSC_VER
 >= 1800

4927 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, &
»tV®
);

4929 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(&
»tV®
);

4931 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

4932 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_R‘uºTy³
, 
	g_IÁ”ÇlR‘uºTy³
>(
	g_M_pTask
,

4933 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_IÁ”ÇlR‘uºTy³
, 
	g_Prog»ssTy³
>>(
	g»tV®
).
G‘
());

4941 
_In™
(
d‘as
::
_Ty³S–eùÜAsyncAùiÚW™hProg»ss
) const

4943 
d‘as
::
	t_G‘Prog»ssTy³
<
	tdeşty³
(
	t_M_funùiÚ
())>::
	t_V®ue
 
	t_Prog»ssTy³
;

4944 
_R‘uºTy³
 
	g»tV®
;

4945 #ià
_MSC_VER
 >= 1800

4946 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, &
»tV®
);

4948 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(&
»tV®
);

4950 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

4951 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_R‘uºTy³
, 
	g_IÁ”ÇlR‘uºTy³
>(
	g_M_pTask
,

4952 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_Prog»ssTy³
>>(
»tV®
).
G‘
());

4960 
	g‹m¶©e
<
ty³Çme
 
	g_IÅTy³
,y³Çm
	g_OutTy³
>

4961 şas 
	c_CÚtšu©iÚ_func_ŒªsfÜm”


4963 
	gpublic
:

4964 autØ
_P”fÜm
(
¡d
::
funùiÚ
<
HRESULT
(
_IÅTy³
, 
_OutTy³
*)> 
_Func
è-> 
deşty³
(_Func)

4966  
	g_Func
;

4970 
	g‹m¶©e
<
ty³Çme
 
	g_OutTy³
>

4971 
şass
 
	g_CÚtšu©iÚ_func_ŒªsfÜm”
<, 
	g_OutTy³
>

4973 
	gpublic
:

4974 autØ
_P”fÜm
(
¡d
::
funùiÚ
<
HRESULT
(
_OutTy³
*)> 
_Func
è-> 
deşty³
(
d‘as
::
_MakeUn™ToTFunc
<_OutType>(_Func))

4976  
d‘as
::
_MakeUn™ToTFunc
<
_OutTy³
>(
_Func
);

4980 
	g‹m¶©e
<
ty³Çme
 
	g_InTy³
>

4981 
şass
 
	g_CÚtšu©iÚ_func_ŒªsfÜm”
<
	g_InTy³
, >

4983 
	gpublic
:

4984 autØ
_P”fÜm
(
¡d
::
funùiÚ
<
HRESULT
(
_InTy³
)> 
_Func
è-> 
deşty³
(
d‘as
::
_MakeTToUn™Func
<_InType>(_Func))

4986  
d‘as
::
_MakeTToUn™Func
<
_InTy³
>(
_Func
);

4990 
	g‹m¶©e
<>

4991 
şass
 
	g_CÚtšu©iÚ_func_ŒªsfÜm”
<, >

4993 
	gpublic
:

4994 autØ
_P”fÜm
(
¡d
::
funùiÚ
<
HRESULT
()> 
_Func
è-> 
deşty³
(
d‘as
::
_MakeUn™ToUn™Func
(_Func))

4996  
d‘as
::
_MakeUn™ToUn™Func
(
_Func
);

5002 
	g‹m¶©e
 <
ty³Çme
 
	g_IÁ”ÇlR‘uºTy³
,y³Çm
	g_CÚtšu©iÚR‘uºTy³
,y³Çm
	g_FunùiÚ
,y³Çm
	g_IsTaskBa£d
,y³Çm
	g_Ty³S–eùiÚ
>

5003 
	g_CÚtšu©iÚTaskHªdË
 :

5004 
d‘as
::
_PPLTaskHªdË
<
ty³Çme
 d‘as::
_NÜm®izeVoidToUn™Ty³
<
_CÚtšu©iÚR‘uºTy³
>::
_Ty³
,

5005 
	g_CÚtšu©iÚTaskHªdË
<
	g_IÁ”ÇlR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
, 
	g_FunùiÚ
, 
	g_IsTaskBa£d
, 
	g_Ty³S–eùiÚ
>, 
	gd‘as
::
_CÚtšu©iÚTaskHªdËBa£
>

5007 
ty³Çme
 
	td‘as
::
	t_NÜm®izeVoidToUn™Ty³
<
	t_CÚtšu©iÚR‘uºTy³
>::
	t_Ty³
 
	t_NÜm®izedCÚtšu©iÚR‘uºTy³
;

5009 
ty³Çme
 
	gd‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 
_M_ªû¡ÜTaskIm¶
;

5010 
_FunùiÚ
 
	g_M_funùiÚ
;

5012 
_CÚtšu©iÚTaskHªdË
(cÚ¡ 
ty³Çme
 
d‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 & 
_Anû¡ÜIm¶
,

5013 cÚ¡ 
ty³Çme
 
d‘as
::
_Task_±r
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
>::
_Ty³
 & 
_CÚtšu©iÚIm¶
,

5014 cÚ¡ 
_FunùiÚ
 & 
_Func
, cÚ¡ 
sk_cÚtšu©iÚ_cÚ‹xt
 & 
_CÚ‹xt
, 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
) :

5015 #ià
_MSC_VER
 >= 1800

5016 
d‘as
::
_PPLTaskHªdË
<
ty³Çme
 d‘as::
_NÜm®izeVoidToUn™Ty³
<
_CÚtšu©iÚR‘uºTy³
>::
_Ty³
,

5017 
	g_CÚtšu©iÚTaskHªdË
<
	g_IÁ”ÇlR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
, 
	g_FunùiÚ
, 
	g_IsTaskBa£d
, 
	g_Ty³S–eùiÚ
>, 
	gd‘as
::
_CÚtšu©iÚTaskHªdËBa£
>

5018 ::
_PPLTaskHªdË
(
_CÚtšu©iÚIm¶
)

5019 , 
_M_ªû¡ÜTaskIm¶
(
_Anû¡ÜIm¶
)

5020 , 
_M_funùiÚ
(
_Func
)

5022 
_M_ªû¡ÜTaskIm¶
(
_Anû¡ÜIm¶
), 
_PPLTaskHªdË
(
_CÚtšu©iÚIm¶
), 
_M_funùiÚ
(
_Func
)

5025 
	g_M_isTaskBa£dCÚtšu©iÚ
 = 
_IsTaskBa£d
::
v®ue
;

5026 
	g_M_cÚtšu©iÚCÚ‹xt
 = 
_CÚ‹xt
;

5027 
	g_M_cÚtšu©iÚCÚ‹xt
.
_ResŞve
(
_Anû¡ÜIm¶
->
_IsA·¹m’tAw¬e
());

5028 
	g_M_šlššgMode
 = 
_IÆššgMode
;

5031 
	gvœtu®
 ~
_CÚtšu©iÚTaskHªdË
() {}

5033 #ià
_MSC_VER
 >= 1800

5034 
	g‹m¶©e
 <
ty³Çme
 
	g_Func
,y³Çm
	g_Arg
,y³Çm
	g_R‘Arg
>

5035 autØ
_LogWÜkI‹mAndInvokeU£rLambda
(
_Func
 && 
_func
, 
_Arg
 && 
_v®ue
, 
_R‘Arg
 && 
_»tArg
ècÚ¡ -> 
deşty³
(_func(
¡d
::
fÜw¬d
<_Arg>(_value), std::forward<_RetArg>(_retArg)))

5037 
d‘as
::
_TaskWÜkI‹mRAIILogg”
 
_LogWÜkI‹m
(
this
->
_M_pTask
->
_M_skEv’tLogg”
);

5038  
_func
(
¡d
::
fÜw¬d
<
_Arg
>(
_v®ue
), std::fÜw¬d<
_R‘Arg
>(
_»tArg
));

5042 
_P”fÜm
() const

5044 
_CÚtšue
(
_IsTaskBa£d
(), 
_Ty³S–eùiÚ
());

5047 #ià
_MSC_VER
 >= 1800

5048 
_SyncCªûlAndPrİag©eExû±iÚ
() const

5050 ià(
	g_M_ªû¡ÜTaskIm¶
->
_HasU£rExû±iÚ
())

5054 
	gthis
->
	g_M_pTask
->
_CªûlW™hExû±iÚHŞd”
(
_M_ªû¡ÜTaskIm¶
->
_G‘Exû±iÚHŞd”
(), 
Œue
);

5060 
	gthis
->
	g_M_pTask
->
_Cªûl
(
Œue
);

5070 
_CÚtšue
(
¡d
::
çl£_ty³
, 
d‘as
::
_Ty³S–eùÜNoAsync
) const

5072 
_NÜm®izedCÚtšu©iÚR‘uºTy³
 
»tV®
;

5073 #ià
_MSC_VER
 >= 1800

5074 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
_CÚtšu©iÚR‘uºTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
»tV®
);

5076 
HRESULT
 
	ghr
 =
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
	g»tV®
);

5078 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5079 
	g_M_pTask
->
_Fš®izeAndRunCÚtšu©iÚs
(
»tV®
);

5090 
_CÚtšue
(
¡d
::
çl£_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncTask
) const

5092 
ty³Çme
 
	td‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_IÁ”ÇlR‘uºTy³
>::
	t_FuncR‘Ty³
 
	t_FuncOuutTy³
;

5093 
_FuncOuutTy³
 
	g»tV®
;

5094 #ià
_MSC_VER
 >= 1800

5095 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
»tV®
);

5097 
HRESULT
 
	ghr
 = 
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
	g_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
	g»tV®
);

5099 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5100 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(

5101 
	g_M_pTask
,

5102 
	g»tV®


5105 
_CÚtšue
(
¡d
::
çl£_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncO³¿tiÚ
) const

5107 
ty³Çme
 
	td‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_IÁ”ÇlR‘uºTy³
>::
	t_FuncR‘Ty³
 
	t_FuncOuutTy³
;

5108 
_FuncOuutTy³
 
	g»tV®
;

5109 #ià
_MSC_VER
 >= 1800

5110 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
»tV®
);

5112 
HRESULT
 
	ghr
 = 
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
	g_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
	g»tV®
);

5114 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5115 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(

5116 
	g_M_pTask
,

5117 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
<
_CÚtšu©iÚR‘uºTy³
>>(
»tV®
).
G‘
());

5125 
_CÚtšue
(
¡d
::
çl£_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncAùiÚ
) const

5127 
d‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_IÁ”ÇlR‘uºTy³
>::
	t_FuncR‘Ty³
 
	t_FuncOuutTy³
;

5128 
_FuncOuutTy³
 
	g»tV®
;

5129 #ià
_MSC_VER
 >= 1800

5130 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
»tV®
);

5132 
HRESULT
 
	ghr
 = 
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
	g_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
	g»tV®
);

5134 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5135 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(

5136 
	g_M_pTask
,

5137 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
>(

5138 
»tV®
).
G‘
());

5146 
_CÚtšue
(
¡d
::
çl£_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncO³¿tiÚW™hProg»ss
) const

5148 
d‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_IÁ”ÇlR‘uºTy³
>::
	t_FuncR‘Ty³
 
	t_FuncOuutTy³
;

5150 
_FuncOuutTy³
 
	g_OpW™hProg»ss
;

5151 #ià
_MSC_VER
 >= 1800

5152 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
_OpW™hProg»ss
);

5154 
HRESULT
 
	ghr
 = 
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
	g_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
	g_OpW™hProg»ss
);

5156 
	gd‘as
::
	t_G‘Prog»ssTy³
<
	tdeşty³
(
	t_OpW™hProg»ss
)>::
	t_V®ue
 
	t_Prog»ssTy³
;

5158 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5159 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(

5160 
	g_M_pTask
,

5161 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_CÚtšu©iÚR‘uºTy³
, 
	g_Prog»ssTy³
>>(
	g_OpW™hProg»ss
).
G‘
());

5169 
_CÚtšue
(
¡d
::
çl£_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncAùiÚW™hProg»ss
) const

5171 
d‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_IÁ”ÇlR‘uºTy³
>::
	t_FuncR‘Ty³
 
	t_FuncOuutTy³
;

5173 
_FuncOuutTy³
 
	g_OpW™hProg»ss
;

5174 #ià
_MSC_VER
 >= 1800

5175 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
_OpW™hProg»ss
);

5177 
HRESULT
 
	ghr
 = 
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_IÁ”ÇlR‘uºTy³
, 
	g_FuncOuutTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
_M_ªû¡ÜTaskIm¶
->
_G‘ResuÉ
(), &
	g_OpW™hProg»ss
);

5179 
	gd‘as
::
	t_G‘Prog»ssTy³
<
	tdeşty³
(
	t_OpW™hProg»ss
)>::
	t_V®ue
 
	t_Prog»ssTy³
;

5181 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5182 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(

5183 
	g_M_pTask
,

5184 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_Prog»ssTy³
>>(
_OpW™hProg»ss
).
G‘
());

5193 
_CÚtšue
(
¡d
::
Œue_ty³
, 
d‘as
::
_Ty³S–eùÜNoAsync
) const

5195 
sk
<
	t_IÁ”ÇlR‘uºTy³
> 
	t_FuncIÅutTy³
;

5196 
	gsk
<
	g_IÁ”ÇlR‘uºTy³
> 
	g_ResuÉTask
;

5197 
	g_ResuÉTask
.
_S‘Im¶
(
¡d
::
move
(
_M_ªû¡ÜTaskIm¶
));

5198 
_NÜm®izedCÚtšu©iÚR‘uºTy³
 
	g»tV®
;

5199 #ià
_MSC_VER
 >= 1800

5200 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_FuncIÅutTy³
, 
_CÚtšu©iÚR‘uºTy³
>::
_P”fÜm
(
_M_funùiÚ
), 
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5202 
HRESULT
 
	ghr
 = 
_CÚtšu©iÚ_func_ŒªsfÜm”
<
_FuncIÅutTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>::
_P”fÜm
(
_M_funùiÚ
)(
¡d
::
move
(
_ResuÉTask
), &
	g»tV®
);

5204 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5205 
	g_M_pTask
->
_Fš®izeAndRunCÚtšu©iÚs
(
»tV®
);

5217 
_CÚtšue
(
¡d
::
Œue_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncTask
) const

5220 
sk
<
_IÁ”ÇlR‘uºTy³
> 
_ResuÉTask
;

5221 
	g_ResuÉTask
.
_S‘Im¶
(
¡d
::
move
(
_M_ªû¡ÜTaskIm¶
));

5222 
_CÚtšu©iÚR‘uºTy³
 
	g»tV®
;

5223 #ià
_MSC_VER
 >= 1800

5224 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, 
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5226 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5228 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5229 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(
	g_M_pTask
, 
	g»tV®
);

5231 
_CÚtšue
(
¡d
::
Œue_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncO³¿tiÚ
) const

5234 
sk
<
_IÁ”ÇlR‘uºTy³
> 
_ResuÉTask
;

5235 
	g_ResuÉTask
.
_S‘Im¶
(
¡d
::
move
(
_M_ªû¡ÜTaskIm¶
));

5236 
_CÚtšu©iÚR‘uºTy³
 
	g»tV®
;

5237 #ià
_MSC_VER
 >= 1800

5238 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, 
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5240 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5242 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5243 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(
	g_M_pTask
,

5244 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
<
_CÚtšu©iÚR‘uºTy³
>>(
»tV®
));

5253 
_CÚtšue
(
¡d
::
Œue_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncAùiÚ
) const

5256 
sk
<
_IÁ”ÇlR‘uºTy³
> 
_ResuÉTask
;

5257 
	g_ResuÉTask
.
_S‘Im¶
(
¡d
::
move
(
_M_ªû¡ÜTaskIm¶
));

5258 
_CÚtšu©iÚR‘uºTy³
 
	g»tV®
;

5259 #ià
_MSC_VER
 >= 1800

5260 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, 
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5262 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5264 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5265 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(
	g_M_pTask
,

5266 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
>(
»tV®
));

5276 
_CÚtšue
(
¡d
::
Œue_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncO³¿tiÚW™hProg»ss
) const

5279 
sk
<
_IÁ”ÇlR‘uºTy³
> 
_ResuÉTask
;

5280 
	g_ResuÉTask
.
_S‘Im¶
(
¡d
::
move
(
_M_ªû¡ÜTaskIm¶
));

5282 
	gd‘as
::
	t_G‘Prog»ssTy³
<
	tdeşty³
(
	t_M_funùiÚ
(
	t_ResuÉTask
))>::
	t_V®ue
 
	t_Prog»ssTy³
;

5283 
_CÚtšu©iÚR‘uºTy³
 
	g»tV®
;

5284 #ià
_MSC_VER
 >= 1800

5285 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, 
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5287 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5289 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5290 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(
	g_M_pTask
,

5291 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_CÚtšu©iÚR‘uºTy³
, 
	g_Prog»ssTy³
>>(
	g»tV®
));

5301 
_CÚtšue
(
¡d
::
Œue_ty³
, 
d‘as
::
_Ty³S–eùÜAsyncAùiÚW™hProg»ss
) const

5304 
sk
<
_IÁ”ÇlR‘uºTy³
> 
_ResuÉTask
;

5305 
	g_ResuÉTask
.
_S‘Im¶
(
¡d
::
move
(
_M_ªû¡ÜTaskIm¶
));

5307 
	gd‘as
::
	t_G‘Prog»ssTy³
<
	tdeşty³
(
	t_M_funùiÚ
(
	t_ResuÉTask
))>::
	t_V®ue
 
	t_Prog»ssTy³
;

5308 
_CÚtšu©iÚR‘uºTy³
 
	g»tV®
;

5309 #ià
_MSC_VER
 >= 1800

5310 
HRESULT
 
	ghr
 = 
_LogWÜkI‹mAndInvokeU£rLambda
(
_M_funùiÚ
, 
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5312 
HRESULT
 
	ghr
 = 
_M_funùiÚ
(
¡d
::
move
(
_ResuÉTask
), &
»tV®
);

5314 ià(
FAILED
(
hr
)è
throw
 
	g¡d
::
make_exû±iÚ_±r
(hr);

5315 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_NÜm®izedCÚtšu©iÚR‘uºTy³
, 
	g_CÚtšu©iÚR‘uºTy³
>(
	g_M_pTask
,

5316 
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_Prog»ssTy³
>>(
»tV®
));

5322 
	g‹m¶©e
<
ty³Çme
 
	g_IÁ”ÇlR‘uºTy³
,y³Çm
	g_FunùiÚ
>

5323 
_TaskIn™W™hFunùÜ
(cÚ¡ 
_FunùiÚ
& 
_Func
)

5325 
	gd‘as
::
	t_In™FunùÜTy³T¿™s
<
	t_IÁ”ÇlR‘uºTy³
, 
	td‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, >::
	t_FuncR‘Ty³
> 
	t_Async_ty³_Œa™s
;

5327 
	g_M_Im¶
->
	g_M_fFromAsync
 = 
_Async_ty³_Œa™s
::
_IsAsyncTask
;

5328 
	g_M_Im¶
->
	g_M_fUnw¿µedTask
 = 
_Async_ty³_Œa™s
::
_IsUnw¿µedTaskOrAsync
;

5329 #ià
_MSC_VER
 >= 1800

5330 
	g_M_Im¶
->
	g_M_skEv’tLogg”
.
_LogScheduËTask
(
çl£
);

5332 
	g_M_Im¶
->
_ScheduËTask
(
Ãw
 
_In™ŸlTaskHªdË
<
_IÁ”ÇlR‘uºTy³
, 
_FunùiÚ
, 
ty³Çme
 
_Async_ty³_Œa™s
::
_AsyncKšd
>(
_G‘Im¶
(), 
_Func
), 
CÚcu¼’cy
::
d‘as
::
_NoIÆše
);

5338 
_TaskIn™NoFunùÜ
(
sk_com¶‘iÚ_ev’t
<
_R‘uºTy³
>& 
_Ev’t
)

5340 
	g_Ev’t
.
_Regi¡”Task
(
_M_Im¶
);

5346 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉ
,y³Çm
	g_OpTy³
,y³Çm
	g_CompHªdËrTy³
,y³Çm
	g_ResuÉTy³
>

5347 
_TaskIn™AsyncOp
(
d‘as
::
_AsyncInfoIm¶
<
_OpTy³
, 
_CompHªdËrTy³
, 
_ResuÉTy³
>* 
_AsyncOp
)

5349 
	g_M_Im¶
->
	g_M_fFromAsync
 = 
Œue
;

5350 #ià
_MSC_VER
 < 1800

5351 
	g_M_Im¶
->
_S‘ScheduËdEv’t
();

5355 
	g_M_Im¶
->
	g_M_TaskS‹
 = 
d‘as
::
_Task_im¶_ba£
::
_S¹ed
;

5357 
	gd‘as
::
_Task_im¶_ba£
::
_AsyncIn™
<
_R‘uºTy³
, 
	g_ResuÉ
>(
	g_M_Im¶
, 
	g_AsyncOp
);

5363 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉ
>

5364 
_TaskIn™NoFunùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚ
<
_ResuÉ
>* 
_AsyncOp
)

5366 
_TaskIn™AsyncOp
<
_ResuÉ
>(
Miüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚToAsyncO³¿tiÚCÚv”‹r
<_ResuÉ>>(
_AsyncOp
).
G‘
());

5372 
	g‹m¶©e
<
ty³Çme
 
	g_ResuÉ
,y³Çm
	g_Prog»ss
>

5373 
_TaskIn™NoFunùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncO³¿tiÚW™hProg»ss
<
_ResuÉ
, 
_Prog»ss
>* 
_AsyncOp
)

5375 
	g_TaskIn™AsyncOp
<
	g_ResuÉ
>(
	gMiüosoá
::
WRL
::
Make
<
d‘as
::
_IAsyncO³¿tiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_ResuÉ
, 
	g_Prog»ss
>>(
	g_AsyncOp
).
G‘
());

5380 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

5381 
_TaskIn™MaybeFunùÜ
(
_FunùiÚ
 & 
_Func
, 
¡d
::
Œue_ty³
)

5383 
_TaskIn™W™hFunùÜ
<
_R‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
);

5389 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

5390 
_TaskIn™MaybeFunùÜ
(
_Ty
 & 
_P¬am
, 
¡d
::
çl£_ty³
)

5392 
_TaskIn™NoFunùÜ
(
_P¬am
);

5394 #ià
_MSC_VER
 >= 1800

5395 
	g‹m¶©e
<
ty³Çme
 
	g_IÁ”ÇlR‘uºTy³
,y³Çm
	g_FunùiÚ
>

5396 autØ
_Th’Im¶
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, 
	g_IÁ”ÇlR‘uºTy³
>::
_TaskOfTy³


5398 ià(!
_M_Im¶
)

5400 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("then() cannot be called on‡ default constructedask.");

5403 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
 = 
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
(è? _TaskO±iÚs.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(è: 
nuÎ±r
;

5404 autØ
	g_ScheduËr
 = 
_TaskO±iÚs
.
has_scheduËr
(è? _TaskO±iÚs.
g‘_scheduËr
(è: 
_G‘Im¶
()->
_G‘ScheduËr
();

5405 autØ
	g_C»©iÚSck
 = 
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_M_hasP»£tC»©iÚC®l¡ack
 ? d‘as::_g‘_š‹º®_sk_İtiÚs(_TaskO±iÚs).
_M_´e£tC»©iÚC®l¡ack
 : d‘as::
_TaskC»©iÚC®l¡ack
();

5406  
	g_Th’Im¶
<
	g_IÁ”ÇlR‘uºTy³
, 
	g_FunùiÚ
>(
	g_Func
, 
	g_PTok’S‹
, 
	g_TaskO±iÚs
.
g‘_cÚtšu©iÚ_cÚ‹xt
(), 
	g_ScheduËr
, 
	g_C»©iÚSck
);

5412 
	g‹m¶©e
<
ty³Çme
 
	g_IÁ”ÇlR‘uºTy³
,y³Çm
	g_FunùiÚ
>

5413 #ià
_MSC_VER
 >= 1800

5414 autØ
_Th’Im¶
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, cÚ¡ 
sk_cÚtšu©iÚ_cÚ‹xt
& 
_CÚtšu©iÚCÚ‹xt
, CÚcu¼’cy::
scheduËr_±r
 
_ScheduËr
, d‘as::
_TaskC»©iÚC®l¡ack
 
_C»©iÚSck
,

5415 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
 = 
CÚcu¼’cy
::d‘as::
_NoIÆše
ècÚ¡ -> 
ty³Çme
 d‘as::
_CÚtšu©iÚTy³T¿™s
<
_FunùiÚ
, 
	g_IÁ”ÇlR‘uºTy³
>::
_TaskOfTy³


5417 autØ
_Th’Im¶
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, cÚ¡ 
sk_cÚtšu©iÚ_cÚ‹xt
& 
_CÚtšu©iÚCÚ‹xt
,

5418 
boŞ
 
_Agg»g©šg
 = 
çl£
, 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
 = 
CÚcu¼’cy
::d‘as::
_NoIÆše
ècÚ¡ -> 
ty³Çme
 d‘as::
_CÚtšu©iÚTy³T¿™s
<
_FunùiÚ
, 
	g_IÁ”ÇlR‘uºTy³
>::
_TaskOfTy³


5421 ià(
_M_Im¶
 =ğ
nuÎ±r
)

5423 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("then() cannot be called on‡ default constructedask.");

5426 
	gd‘as
::
	t_FunùiÚTy³T¿™s
<
	t_FunùiÚ
, 
	t_IÁ”ÇlR‘uºTy³
> 
	t_FunùiÚ_ty³_Œa™s
;

5427 
	gd‘as
::
	t_TaskTy³T¿™s
<
	tty³Çme
 
	t_FunùiÚ_ty³_Œa™s
::
	t_FuncR‘Ty³
> 
	t_Async_ty³_Œa™s
;

5428 
ty³Çme
 
	t_Async_ty³_Œa™s
::
	t_TaskR‘Ty³
 
	t_TaskTy³
;

5435 ià(
	g_PTok’S‹
 =ğ
nuÎ±r
)

5437 #ià
_MSC_VER
 >= 1800

5438 ià(
_FunùiÚ_ty³_Œa™s
::
_Takes_sk
::
v®ue
)

5440 ià(
_FunùiÚ_ty³_Œa™s
::
_Takes_sk
())

5443 
_PTok’S‹
 = 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
();

5447 
	g_PTok’S‹
 = 
_G‘Im¶
()->
_M_pTok’S‹
;

5451 
	gsk
<
	g_TaskTy³
> 
	g_CÚtšu©iÚTask
;

5452 #ià
_MSC_VER
 >= 1800

5453 
	g_CÚtšu©iÚTask
.
_C»©eIm¶
(
_PTok’S‹
, 
_ScheduËr
);

5455 
	g_CÚtšu©iÚTask
.
_C»©eIm¶
(
_PTok’S‹
);

5457 
	g_CÚtšu©iÚTask
.
_G‘Im¶
()->
	g_M_fFromAsync
 = (_G‘Im¶()->
_M_fFromAsync
 || 
_Async_ty³_Œa™s
::
_IsAsyncTask
);

5458 #ià
_MSC_VER
 < 1800

5459 
	g_CÚtšu©iÚTask
.
_G‘Im¶
()->
	g_M_fRuÁimeAgg»g©e
 = 
_Agg»g©šg
;

5461 
	g_CÚtšu©iÚTask
.
_G‘Im¶
()->
	g_M_fUnw¿µedTask
 = 
_Async_ty³_Œa™s
::
_IsUnw¿µedTaskOrAsync
;

5462 #ià
_MSC_VER
 >= 1800

5463 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚC®l¡ack
(
_C»©iÚSck
);

5465 
_G‘Im¶
()->
_ScheduËCÚtšu©iÚ
(
Ãw
 
_CÚtšu©iÚTaskHªdË
<
_IÁ”ÇlR‘uºTy³
, 
_TaskTy³
, 
_FunùiÚ
, 
ty³Çme
 
_FunùiÚ_ty³_Œa™s
::
_Takes_sk
,y³Çm
_Async_ty³_Œa™s
::
_AsyncKšd
>(

5466 
_G‘Im¶
(), 
_CÚtšu©iÚTask
._G‘Im¶(), 
_Func
, 
_CÚtšu©iÚCÚ‹xt
, 
_IÆššgMode
));

5468  
	g_CÚtšu©iÚTask
;

5472 
ty³Çme
 
	gd‘as
::
_Task_±r
<
_R‘uºTy³
>::
_Ty³
 
_M_Im¶
;

5486 
	g‹m¶©e
<>

5487 
şass
 
	gsk
<>

5489 
	gpublic
:

5494 
	t»suÉ_ty³
;

5518 
sk
(è: 
_M_un™Task
()

5523 #ià
_MSC_VER
 < 1800

5555 
‹m¶©e
<
ty³Çme
 
_Ty
>

5556 
__deş¥ec
(
nošlše
)

5557 
ex¶ic™
 
sk
(
_Ty
 
_P¬am
)

5559 
d‘as
::
_V®id©eTaskCÚ¡ruùÜArgs
<, 
	g_Ty
>(
	g_P¬am
);

5561 
	g_M_un™Task
.
_C»©eIm¶
(
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
::
nÚe
().
_G‘Im¶V®ue
());

5563 
	g_M_un™Task
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

5565 
_TaskIn™MaybeFunùÜ
(
_P¬am
, 
d‘as
::
_IsC®ÏbË
<>(_Param, 0, 0, 0));

5603 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

5604 
__deş¥ec
(
nošlše
)

5605 #ià
_MSC_VER
 >= 1800

5606 
ex¶ic™
 
sk
(
_Ty
 
_P¬am
, cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
 =ask_options())

5608 
ex¶ic™
 
sk
(
_Ty
 
_P¬am
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
)

5611 
d‘as
::
_V®id©eTaskCÚ¡ruùÜArgs
<, 
	g_Ty
>(
	g_P¬am
);

5612 #ià
_MSC_VER
 >= 1800

5613 
	g_M_un™Task
.
_C»©eIm¶
(
_TaskO±iÚs
.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(), _TaskO±iÚs.
g‘_scheduËr
());

5615 
	g_M_un™Task
.
_C»©eIm¶
(
_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
());

5618 #ià
_MSC_VER
 >= 1800

5619 
	g_M_un™Task
.
_S‘TaskC»©iÚC®l¡ack
(
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_M_hasP»£tC»©iÚC®l¡ack
 ? d‘as::_g‘_š‹º®_sk_İtiÚs(_TaskO±iÚs).
_M_´e£tC»©iÚC®l¡ack
 : 
_CAPTURE_CALLSTACK
());

5621 
	g_M_un™Task
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

5623 
_TaskIn™MaybeFunùÜ
(
_P¬am
, 
d‘as
::
_IsC®ÏbË
<>(_Param, 0, 0, 0));

5651 
sk
(cÚ¡ask& 
_Oth”
è: 
_M_un™Task
(_Other._M_unitTask){}

5678 
sk
Ñask&& 
_Oth”
è: 
_M_un™Task
(
¡d
::
move
(_Other._M_unitTask)) {}

5691 
sk
& 
İ”©Ü
=(cÚ¡ask& 
_Oth”
)

5693 ià(
this
 !ğ&
_Oth”
)

5695 
_M_un™Task
 = 
_Oth”
._M_unitTask;

5697  *
	gthis
;

5711 
	gsk
& 
	gİ”©Ü
=(
sk
&& 
_Oth”
)

5713 ià(
this
 !ğ&
_Oth”
)

5715 
_M_un™Task
 = 
¡d
::
move
(
_Oth”
._M_unitTask);

5717  *
	gthis
;

5719 #ià
_MSC_VER
 < 1800

5740 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

5741 
__deş¥ec
(
nošlše
)

5742 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, >::
_TaskOfTy³


5744 autØ
_CÚtšu©iÚTask
 = 
_M_un™Task
.
_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	gnuÎ±r
, 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
());

5746 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

5747  
	g_CÚtšu©iÚTask
;

5774 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

5775 
__deş¥ec
(
nošlše
)

5776 #ià
_MSC_VER
 >= 1800

5777 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
sk_İtiÚs
 
_TaskO±iÚs
 =ask_İtiÚs()ècÚ¡ -> 
ty³Çme
 
d‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, >::
_TaskOfTy³


5779 
d‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_CAPTURE_CALLSTACK
());

5780  
	g_M_un™Task
.
	g_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	g_TaskO±iÚs
);

5783 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
ècÚ¡ -> 
ty³Çme
 
d‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, >::
_TaskOfTy³


5785 autØ
_CÚtšu©iÚTask
 = 
_M_un™Task
.
_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	g_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
());

5787 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

5788  
	g_CÚtšu©iÚTask
;

5814 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

5815 
__deş¥ec
(
nošlše
)

5816 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, >::
_TaskOfTy³


5818 autØ
_CÚtšu©iÚTask
 = 
_M_un™Task
.
_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	gnuÎ±r
, 
	g_CÚtšu©iÚCÚ‹xt
);

5820 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

5821  
	g_CÚtšu©iÚTask
;

5853 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

5854 
__deş¥ec
(
nošlše
)

5855 #ià
_MSC_VER
 >= 1800

5856 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
, 
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, >::
_TaskOfTy³


5858 
sk_İtiÚs
 
_TaskO±iÚs
(
_CªûÎ©iÚTok’
, 
_CÚtšu©iÚCÚ‹xt
);

5859 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_CAPTURE_CALLSTACK
());

5860  
	g_M_un™Task
.
	g_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	g_TaskO±iÚs
);

5863 autØ
th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
, 
sk_cÚtšu©iÚ_cÚ‹xt
 
_CÚtšu©iÚCÚ‹xt
ècÚ¡ -> 
ty³Çme
 
	gd‘as
::
_CÚtšu©iÚTy³T¿™s
<_FunùiÚ, >::
_TaskOfTy³


5865 autØ
_CÚtšu©iÚTask
 = 
_M_un™Task
.
_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	g_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
	g_CÚtšu©iÚCÚ‹xt
);

5867 
	g_CÚtšu©iÚTask
.
_S‘TaskC»©iÚAdd»ssHšt
(
_R‘uºAdd»ss
());

5868  
	g_CÚtšu©iÚTask
;

5881 
sk_¡©us
 
wa™
() const

5883  
	g_M_un™Task
.
wa™
();

5895 
g‘
() const

5897 
	g_M_un™Task
.
g‘
();

5899 #ià
_MSC_VER
 >= 1800

5910 
boŞ
 
is_dÚe
() const

5912  
	g_M_un™Task
.
is_dÚe
();

5921 
	gCÚcu¼’cy
::
scheduËr_±r
 
scheduËr
() const

5923  
_M_un™Task
.
scheduËr
();

5933 
boŞ
 
is_­¬tm’t_aw¬e
() const

5935  
	g_M_un™Task
.
is_­¬tm’t_aw¬e
();

5945 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
sk
<>& 
_Rhs
) const

5947  (
_M_un™Task
 =ğ
_Rhs
._M_unitTask);

5957 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
sk
<>& 
_Rhs
) const

5959  !
İ”©Ü
==(
_Rhs
);

5965 #ià
_MSC_VER
 >= 1800

5966 
_C»©eIm¶
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
, CÚcu¼’cy::
scheduËr_±r
 
_ScheduËr
)

5968 
_M_un™Task
.
_C»©eIm¶
(
_Ct
, 
_ScheduËr
);

5971 
_C»©eIm¶
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 * 
_Ct
)

5973 
_M_un™Task
.
_C»©eIm¶
(
_Ct
);

5980 cÚ¡ 
	gd‘as
::
_Task_±r
<
d‘as
::
_Un™_ty³
>::
_Ty³
 & 
_G‘Im¶
() const

5982  
_M_un™Task
.
_M_Im¶
;

5988 
_S‘Im¶
(cÚ¡ 
d‘as
::
_Task_±r
<d‘as::
_Un™_ty³
>::
_Ty³
 & 
_Im¶
)

5990 
_M_un™Task
.
_S‘Im¶
(
_Im¶
);

5996 
_S‘Im¶
(
d‘as
::
_Task_±r
<d‘as::
_Un™_ty³
>::
_Ty³
 && 
_Im¶
)

5998 
_M_un™Task
.
_S‘Im¶
(
¡d
::
move
(
_Im¶
));

6004 
_S‘Async
(
boŞ
 
_Async
 = 
Œue
)

6006 
_M_un™Task
.
_S‘Async
(
_Async
);

6012 #ià
_MSC_VER
 >= 1800

6013 
_S‘TaskC»©iÚC®l¡ack
(cÚ¡ 
d‘as
::
_TaskC»©iÚC®l¡ack
 &
_ÿÎ¡ack
)

6015 
_M_un™Task
.
_S‘TaskC»©iÚC®l¡ack
(
_ÿÎ¡ack
);

6018 
_S‘TaskC»©iÚAdd»ssHšt
(* 
_Add»ss
)

6020 
	g_M_un™Task
.
_S‘TaskC»©iÚAdd»ssHšt
(
_Add»ss
);

6027 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6028 #ià
_MSC_VER
 >= 1800

6029 autØ
_Th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
,

6030 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
 = 
CÚcu¼’cy
::d‘as::
_FÜûIÆše
ècÚ¡ -> 
ty³Çme
 d‘as::
_CÚtšu©iÚTy³T¿™s
<
_FunùiÚ
, >::
_TaskOfTy³


6033 autØ
_ScheduËr
 = 
_G‘Im¶
()->
_G‘ScheduËr
();

6035  
	g_M_un™Task
.
	g_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	g_PTok’S‹
, 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
(), 
	g_ScheduËr
, 
_CAPTURE_CALLSTACK
(), 
	g_IÆššgMode
);

6038 autØ
_Th’
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
,

6039 
boŞ
 
_Agg»g©šg
, 
d‘as
::
_TaskIÆššgMode
 
_IÆššgMode
 = 
CÚcu¼’cy
::d‘as::
_FÜûIÆše
ècÚ¡ -> 
ty³Çme
 d‘as::
_CÚtšu©iÚTy³T¿™s
<
_FunùiÚ
, >::
_TaskOfTy³


6041  
_M_un™Task
.
_Th’Im¶
<, 
	g_FunùiÚ
>(
	g_Func
, 
	g_PTok’S‹
, 
	gsk_cÚtšu©iÚ_cÚ‹xt
::
u£_deçuÉ
(), 
	g_Agg»g©šg
, 
	g_IÆššgMode
);

6045 
	g´iv©e
:

6046 
‹m¶©e
 <
ty³Çme
 
T
> 
ä›nd
 
şass
 
sk
;

6047 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
ä›nd
 
şass
 
	gsk_com¶‘iÚ_ev’t
;

6052 
_TaskIn™NoFunùÜ
(
sk_com¶‘iÚ_ev’t
<>& 
_Ev’t
)

6054 
	g_M_un™Task
.
_TaskIn™NoFunùÜ
(
_Ev’t
.
_M_un™Ev’t
);

6059 
_TaskIn™NoFunùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
* 
_AsyncAùiÚ
)

6061 
_M_un™Task
.
_TaskIn™AsyncOp
<
d‘as
::
_Un™_ty³
>(
Miüosoá
::
WRL
::
Make
<d‘as::
_IAsyncAùiÚToAsyncO³¿tiÚCÚv”‹r
>(
_AsyncAùiÚ
).
G‘
());

6067 
	g‹m¶©e
<
ty³Çme
 
	g_P
>

6068 
_TaskIn™NoFunùÜ
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_P
>* 
_AsyncAùiÚW™hProg»ss
)

6070 
_M_un™Task
.
_TaskIn™AsyncOp
<
d‘as
::
_Un™_ty³
>(
Miüosoá
::
WRL
::
Make
<d‘as::
_IAsyncAùiÚW™hProg»ssToAsyncO³¿tiÚCÚv”‹r
<
_P
>>(
_AsyncAùiÚW™hProg»ss
).
G‘
());

6075 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6076 
_TaskIn™MaybeFunùÜ
(
_FunùiÚ
 & 
_Func
, 
¡d
::
Œue_ty³
)

6078 
_M_un™Task
.
_TaskIn™W™hFunùÜ
<, 
	g_FunùiÚ
>(
	g_Func
);

6084 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6085 
_TaskIn™MaybeFunùÜ
(
_T
 & 
_P¬am
, 
¡d
::
çl£_ty³
)

6087 
_TaskIn™NoFunùÜ
(
_P¬am
);

6091 
	gsk
<
	gd‘as
::
_Un™_ty³
> 
_M_un™Task
;

6094 
Çme¥aû
 
	gd‘as


6102 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

6103 
_Ty
 
_G‘Unw¿µedTy³
(
sk
<_Ty>);

6106 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

6107 autØ
_G‘Unw¿µedR‘uºTy³
(
_Ty
 
_Arg
, è-> 
deşty³
(
_G‘Unw¿µedTy³
(_Arg));

6109 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

6110 
_Ty
 
_G‘Unw¿µedR‘uºTy³
(_Ty, ...);

6119 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

6120 
_Ty
 
_G‘TaskTy³
(
sk_com¶‘iÚ_ev’t
<_Ty>, 
¡d
::
çl£_ty³
);

6123 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

6124 autØ
_G‘TaskTy³
(
_Ty
 
_NÚFunc
, 
¡d
::
çl£_ty³
è-> 
deşty³
(
_G‘Unw¿µedTy³
(_NonFunc));

6127 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

6128 autØ
_G‘TaskTy³
(
_Ty
 
_Func
, 
¡d
::
Œue_ty³
è-> 
deşty³
(
_G‘Unw¿µedR‘uºTy³
(
¡dx
::
deşv®
<
_FunùiÚTy³T¿™s
<_Ty, >::
_FuncR‘Ty³
>(), 0));

6131 
_G‘TaskTy³
(
¡d
::
funùiÚ
<
HRESULT
()>, std::
Œue_ty³
);

6132 
	s_BadArgTy³
{};

6134 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

6135 autØ
_F‹rV®idTaskTy³
(
_Ty
 
_P¬am
, è-> 
deşty³
(
_G‘TaskTy³
(_P¬am, 
_IsC®ÏbË
<
_R‘uºTy³
>(_Param, 0, 0, 0)));

6137 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

6138 
_BadArgTy³
 
_F‹rV®idTaskTy³
(
_Ty
 
_P¬am
, ...);

6140 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

6141 
	s_TaskTy³FromP¬am


6143 
deşty³
(
	t_F‹rV®idTaskTy³
<
	t_R‘uºTy³
>(
	t¡dx
::
	tdeşv®
<
	t_Ty
>(), 0)è
	t_Ty³
;

6176 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

6177 
	$__deş¥ec
(
nošlše
)

6178 #ià
_MSC_VER
 >= 1800

6179 autØ
	`ü—‹_sk
(
_Ty
 
_P¬am
, 
sk_İtiÚs
 
_TaskO±iÚs
 = 
	`sk_İtiÚs
()è-> 
sk
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, _Ty>::
_Ty³
>

6181 autØ
	`ü—‹_sk
(
_Ty
 
_P¬am
è-> 
sk
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, _Ty>::
_Ty³
>

6184 
	`¡©ic_as£¹
(!
¡d
::
is_§me
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, 
_Ty
>::
_Ty³
, d‘as::
_BadArgTy³
>::
v®ue
,

6187 #ià
_MSC_VER
 >= 1800

6188 
d‘as
::
	`_g‘_š‹º®_sk_İtiÚs
(
_TaskO±iÚs
).
	`_£t_ü—tiÚ_ÿÎ¡ack
(
	`_CAPTURE_CALLSTACK
());

6189 
sk
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, 
_Ty
>::
_Ty³
> 
	`_C»©edTask
(
_P¬am
, 
_TaskO±iÚs
);

6191 
sk
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, 
_Ty
>::
_Ty³
> 
	`_C»©edTask
(
_P¬am
);

6195 
_C»©edTask
.
	`_S‘TaskC»©iÚAdd»ssHšt
(
	`_R‘uºAdd»ss
());

6197  
_C»©edTask
;

6198 
	}
}

6231 #ià
_MSC_VER
 >= 1800

6232 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

6233 
	$__deş¥ec
(
nošlše
)

6234 
sk
<
_R‘uºTy³
> 
	`ü—‹_sk
(cÚ¡ask<_R‘uºTy³>& 
_Task
)

6236 
sk
<
_R‘uºTy³
> 
	`_C»©edTask
(
_Task
);

6237  
_C»©edTask
;

6238 
	}
}

6240 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_Ty
>

6241 
	$__deş¥ec
(
nošlše
)

6242 autØ
	`ü—‹_sk
(
_Ty
 
_P¬am
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_Tok’
è-> 
sk
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, _Ty>::
_Ty³
>

6244 
	`¡©ic_as£¹
(!
¡d
::
is_§me
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, 
_Ty
>::
_Ty³
, d‘as::
_BadArgTy³
>::
v®ue
,

6247 
sk
<
ty³Çme
 
d‘as
::
_TaskTy³FromP¬am
<
_R‘uºTy³
, 
_Ty
>::
_Ty³
> 
	`_C»©edTask
(
_P¬am
, 
_Tok’
);

6251 
_C»©edTask
.
	`_S‘TaskC»©iÚAdd»ssHšt
(
	`_R‘uºAdd»ss
());

6252  
_C»©edTask
;

6253 
	}
}

6256 
Çme¥aû
 
	gd‘as


6258 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6259 
	gsk
<
ty³Çme
 
	gABI
::
Wšdows
::
Found©iÚ
::
IÁ”Çl
::
G‘AbiTy³
<
deşty³
(
_Unw¿pAsyncO³¿tiÚS–eùÜ
(
¡dx
::
deşv®
<
ABI
::Wšdows::Found©iÚ::
IAsyncO³¿tiÚ
<
_T
>*>()))>::
ty³
> 
_To_sk_h–³r
(ABI::Wšdows::Found©iÚ::IAsyncO³¿tiÚ<_T>* 
İ
)

6261  
sk
<
_T
>(
İ
);

6264 
	g‹m¶©e
<
ty³Çme
 
	g_T
,y³Çm
	g_Prog»ss
>

6265 
	gsk
<
ty³Çme
 
	gABI
::
Wšdows
::
Found©iÚ
::
IÁ”Çl
::
G‘AbiTy³
<
deşty³
(
_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(
¡dx
::
deşv®
<
ABI
::Wšdows::Found©iÚ::
IAsyncO³¿tiÚW™hProg»ss
<
_T
, 
_Prog»ss
>*>()))>::
ty³
> 
_To_sk_h–³r
(ABI::Wšdows::Found©iÚ::IAsyncO³¿tiÚW™hProg»ss<_T, _Prog»ss>* 
İ
)

6267  
	gsk
<
	g_T
>(
	gİ
);

6270 
šlše
 
	gsk
<> 
_To_sk_h–³r
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚ
* 
İ
)

6272  
sk
<>(
İ
);

6275 
	g‹m¶©e
<
ty³Çme
 
	g_Prog»ss
>

6276 
	gsk
<> 
_To_sk_h–³r
(
ABI
::
Wšdows
::
Found©iÚ
::
IAsyncAùiÚW™hProg»ss
<
_Prog»ss
>* 
İ
)

6278  
sk
<>(
İ
);

6281 
	g‹m¶©e
<
ty³Çme
 
	g_Prog»ssTy³
>

6282 şas 
	c_Prog»ssDi¥©ch”Ba£


6284 
	gpublic
:

6286 
vœtu®
 ~
_Prog»ssDi¥©ch”Ba£
()

6290 
vœtu®
 
_R•Üt
(cÚ¡ 
_Prog»ssTy³
& 
_V®
) = 0;

6293 
	g‹m¶©e
<
ty³Çme
 
	g_Prog»ssTy³
,y³Çm
	g_CÏssPŒTy³
>

6294 
şass
 
	g_Prog»ssDi¥©ch”
 : 
public
 
_Prog»ssDi¥©ch”Ba£
<
_Prog»ssTy³
>

6296 
public
:

6298 
vœtu®
 ~
_Prog»ssDi¥©ch”
()

6302 
_Prog»ssDi¥©ch”
(
_CÏssPŒTy³
 
_PŒ
è: 
_M_±r
(_Ptr)

6306 
vœtu®
 
_R•Üt
(cÚ¡ 
_Prog»ssTy³
& 
_V®
)

6308 
_M_±r
->
_FœeProg»ss
(
_V®
);

6311 
	g´iv©e
:

6313 
_CÏssPŒTy³
 
_M_±r
;

6330 
	g‹m¶©e
<
ty³Çme
 
	g_Prog»ssTy³
>

6331 şas 
	c´og»ss_»pÜ‹r


6333 
	g¡d
::
	tsh¬ed_±r
<
	td‘as
::
	t_Prog»ssDi¥©ch”Ba£
<
	t_Prog»ssTy³
>> 
	t_PŒTy³
;

6335 
	gpublic
:

6344 
»pÜt
(cÚ¡ 
_Prog»ssTy³
& 
_V®
) const

6346 
_M_di¥©ch”
->
_R•Üt
(
_V®
);

6349 
	g‹m¶©e
<
ty³Çme
 
	g_CÏssPŒTy³
>

6350 
´og»ss_»pÜ‹r
 
_C»©eR•Ü‹r
(
_CÏssPŒTy³
 
_PŒ
)

6352 
´og»ss_»pÜ‹r
 
	g_R•Ü‹r
;

6353 
	gd‘as
::
_Prog»ssDi¥©ch”Ba£
<
_Prog»ssTy³
> *
_PDi¥©ch”
 = 
Ãw
 
d‘as
::
_Prog»ssDi¥©ch”
<_Prog»ssTy³, 
	g_CÏssPŒTy³
>(
	g_PŒ
);

6354 
	g_R•Ü‹r
.
	g_M_di¥©ch”
 = 
_PŒTy³
(
_PDi¥©ch”
);

6355  
	g_R•Ü‹r
;

6357 
´og»ss_»pÜ‹r
() {}

6359 
	g´iv©e
:

6360 
´og»ss_»pÜ‹r
(
d‘as
::
_Prog»ssR•Ü‹rCtÜArgTy³
);

6362 
_PŒTy³
 
	g_M_di¥©ch”
;

6365 
Çme¥aû
 
	gd‘as


6370 
	e_AsyncStusIÁ”Çl


6372 
	g_AsyncC»©ed
 = -1,

6374 
	g_AsyncS¹ed
 = 
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
S¹ed
,

6375 
	g_AsyncCom¶‘ed
 = 
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
Com¶‘ed
,

6376 
	g_AsyncCªûËd
 = 
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
CªûËd
,

6377 
	g_AsyncE¼Ü
 = 
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
::
E¼Ü
,

6379 
	g_AsyncCªûlP’dšg
,

6380 
	g_AsyncClo£d
,

6381 
	g_AsyncUndefšed


6388 
	e_AsyncResuÉTy³


6390 
	gSšgËResuÉ
 = 0x0001,

6391 
	gMuÉËResuÉs
 = 0x0002

6394 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6395 
	s_Prog»ssTy³T¿™s


6397 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
çl£
;

6398 
	t_Prog»ssTy³
;

6401 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6402 
	g_Prog»ssTy³T¿™s
<
	g´og»ss_»pÜ‹r
<
	g_T
>>

6404 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
Œue
;

6405 
ty³Çme
 
	t_T
 
	t_Prog»ssTy³
;

6408 
	g‹m¶©e
<
ty³Çme
 
	g_T
, 
boŞ
 
	gbTakesTok’
 = 
¡d
::
is_§me
<
_T
, 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
>::
v®ue
, boŞ 
	gbTakesProg»ss
 = 
_Prog»ssTy³T¿™s
<_T>::
_TakesProg»ss
>

6409 
	s_Tok’Ty³T¿™s


6411 cÚ¡ 
boŞ
 
_TakesTok’
 = 
çl£
;

6412 
ty³Çme
 
	t_T
 
	t_R‘uºTy³
;

6415 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6416 
	g_Tok’Ty³T¿™s
<
	g_T
, 
	gçl£
, 
	gŒue
>

6418 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
çl£
;

6419 
	t_R‘uºTy³
;

6422 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6423 
	g_Tok’Ty³T¿™s
<
	g_T
, 
	gŒue
, 
	gçl£
>

6425 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
Œue
;

6426 
	t_R‘uºTy³
;

6429 
	g‹m¶©e
<
ty³Çme
 
	g_T
, 
size_t
 
	gcouÁ
 = 
_FunùÜTy³T¿™s
<
_T
>::
_Argum’tCouÁ
>

6430 
	s_CAFunùÜO±iÚs


6432 cÚ¡ 
boŞ
 
_TakesProg»ss
 = 
çl£
;

6433 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
çl£
;

6434 
	t_Prog»ssTy³
;

6435 
	t_R‘uºTy³
;

6438 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6439 
	g_CAFunùÜO±iÚs
<
	g_T
, 1>

6441 
	g´iv©e
:

6443 
ty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_T
>::
	t_Argum’t1Ty³
 _Argument1Type;

6445 
	gpublic
:

6447 cÚ¡ 
boŞ
 
_TakesProg»ss
 = 
_Prog»ssTy³T¿™s
<
_Argum’t1Ty³
>::_TakesProgress;

6448 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
_Tok’Ty³T¿™s
<
_Argum’t1Ty³
>::
_TakesTok’
;

6449 
ty³Çme
 
	t_Prog»ssTy³T¿™s
<
	t_Argum’t1Ty³
>::
	t_Prog»ssTy³
 _ProgressType;

6450 
ty³Çme
 
	t_Tok’Ty³T¿™s
<
	t_Argum’t1Ty³
>::
	t_R‘uºTy³
 _ReturnType;

6453 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6454 
	g_CAFunùÜO±iÚs
<
	g_T
, 2>

6456 
	g´iv©e
:

6458 
ty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_T
>::
	t_Argum’t1Ty³
 _Argument1Type;

6459 
ty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_T
>::
	t_Argum’t2Ty³
 _Argument2Type;

6461 
	gpublic
:

6463 cÚ¡ 
boŞ
 
_TakesProg»ss
 = 
_Prog»ssTy³T¿™s
<
_Argum’t1Ty³
>::_TakesProgress;

6464 cÚ¡ 
boŞ
 
	g_TakesTok’
 = !
_TakesProg»ss
 ? 
Œue
 : 
_Tok’Ty³T¿™s
<
_Argum’t2Ty³
>::
_TakesTok’
;

6465 
ty³Çme
 
	t_Prog»ssTy³T¿™s
<
	t_Argum’t1Ty³
>::
	t_Prog»ssTy³
 _ProgressType;

6466 
ty³Çme
 
	t_Tok’Ty³T¿™s
<
	t_Argum’t2Ty³
>::
	t_R‘uºTy³
 _ReturnType;

6469 
	g‹m¶©e
<
ty³Çme
 
	g_T
>

6470 
	g_CAFunùÜO±iÚs
<
	g_T
, 3>

6472 
	g´iv©e
:

6474 
ty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_T
>::
	t_Argum’t1Ty³
 _Argument1Type;

6476 
	gpublic
:

6478 cÚ¡ 
boŞ
 
_TakesProg»ss
 = 
Œue
;

6479 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
Œue
;

6480 
ty³Çme
 
	t_Prog»ssTy³T¿™s
<
	t_Argum’t1Ty³
>::
	t_Prog»ssTy³
 _ProgressType;

6481 
ty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_T
>::
	t_Argum’t3Ty³
 
	t_R‘uºTy³
;

6484 şas 
	c_Z


6495 
	g‹m¶©e
<
ty³Çme
 
	g_AsyncS–eùÜ
,y³Çm
	g_R‘uºTy³
>

6496 
	s_S–eùÜTaskG’”©Ü


6498 #ià
_MSC_VER
 >= 1800

6499 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6500 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6502 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6503 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6504  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_pR‘
), 
	g_skO±šos
);

6507 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6508 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6510 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6511 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6512  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_Cts
.
g‘_tok’
(), 
_pR‘
), 
	g_skO±šos
);

6515 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6516 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6518 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6519 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6520  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_Prog»ss
, 
_pR‘
), 
	g_skO±šos
);

6523 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6524 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6526 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6527 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6528  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
(), 
_pR‘
), 
	g_skO±šos
);

6531 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6532 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6534  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_pR‘
), 
	g_Cts
.
g‘_tok’
());

6537 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6538 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6540  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_Cts
.
g‘_tok’
(), 
_pR‘
), 
	g_Cts
.get_token());

6543 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6544 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6546  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_Prog»ss
, 
_pR‘
), 
	g_Cts
.
g‘_tok’
());

6549 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6550 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6552  
	gsk
<
	g_R‘uºTy³
>(
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
(), 
_pR‘
), 
	g_Cts
.get_token());

6557 
	g‹m¶©e
<
ty³Çme
 
	g_AsyncS–eùÜ
>

6558 
	g_S–eùÜTaskG’”©Ü
<
	g_AsyncS–eùÜ
, >

6560 #ià
_MSC_VER
 >= 1800

6561 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6562 
	gsk
<> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6564 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6565 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6566  
	gsk
<>(
_Func
(), 
	g_skO±šos
);

6569 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6570 
	gsk
<> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6572 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6573 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6574  
	gsk
<>(
_Func
(
_Cts
.
g‘_tok’
()), 
	g_skO±šos
);

6577 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6578 
	gsk
<> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6580 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6581 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6582  
	gsk
<>(
_Func
(
_Prog»ss
), 
	g_skO±šos
);

6585 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6586 
	gsk
<> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6588 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6589 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6590  
	gsk
<>(
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
()), 
	g_skO±šos
);

6593 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6594 
	gsk
<> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6596  
sk
<>(
_Func
(), 
	g_Cts
.
g‘_tok’
());

6599 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6600 
	gsk
<> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6602  
sk
<>(
_Func
(
_Cts
.
g‘_tok’
()), 
	g_Cts
.get_token());

6605 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6606 
	gsk
<> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6608  
sk
<>(
_Func
(
_Prog»ss
), 
	g_Cts
.
g‘_tok’
());

6611 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6612 
	gsk
<> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6614  
sk
<>(
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
()), 
	g_Cts
.get_token());

6619 #ià
_MSC_VER
 < 1800

6622 
	s_Task_g’”©Ü_ov”subsüib”


6624 
_Task_g’”©Ü_ov”subsüib”
()

6626 
	gCÚcu¼’cy
::
d‘as
::
_CÚ‹xt
::
_Ov”subsüibe
(
Œue
);

6629 ~
_Task_g’”©Ü_ov”subsüib”
()

6631 
	gCÚcu¼’cy
::
d‘as
::
_CÚ‹xt
::
_Ov”subsüibe
(
çl£
);

6639 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

6640 
	g_S–eùÜTaskG’”©Ü
<
	gd‘as
::
_Ty³S–eùÜNoAsync
, 
	g_R‘uºTy³
>

6642 #ià
_MSC_VER
 >= 1800

6644 #´agm¨
w¬nšg
(
push
)

6645 #´agm¨
w¬nšg
(
di§bË
: 4702)

6646 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6647 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6649 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6650 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6651  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6652 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6653 (
	g_Ov”subsüib”
);

6654 
HRESULT
 
	ghr
 = 
_Func
(
_pR‘
);

6655 
	g»tV®
 = 
_pR‘
;

6656  
	ghr
;

6657 }, 
	g_skO±šos
);

6659 #´agm¨
w¬nšg
(
pİ
)

6661 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6662 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6664 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6665 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6666  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6667 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6668 (
	g_Ov”subsüib”
);

6669 
HRESULT
 
	ghr
 = 
_Func
(
_Cts
.
g‘_tok’
(), 
_pR‘
);

6670 
	g»tV®
 = 
_pR‘
;

6671  
	ghr
;

6672 }, 
	g_skO±šos
);

6675 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6676 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6678 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6679 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6680  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6681 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6682 (
	g_Ov”subsüib”
);

6683 
HRESULT
 
	ghr
 = 
_Func
(
_Prog»ss
, 
_pR‘
);

6684 
	g»tV®
 = 
_pR‘
;

6685  
	ghr
;

6686 }, 
	g_skO±šos
);

6689 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6690 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6692 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6693 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6694  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6695 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6696 (
	g_Ov”subsüib”
);

6697 
HRESULT
 
	ghr
 = 
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
(), 
_pR‘
);

6698 
	g»tV®
 = 
_pR‘
;

6699  
	ghr
;

6700 }, 
	g_skO±šos
);

6703 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6704 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6706  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6707 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6708 
HRESULT
 
	ghr
 = 
_Func
(
_pR‘
);

6709 
	g»tV®
 = 
_pR‘
;

6710  
	ghr
;

6711 }, 
	g_Cts
.
g‘_tok’
());

6714 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6715 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6717  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6718 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6719 
HRESULT
 
	ghr
 = 
_Func
(
_Cts
.
g‘_tok’
(), 
_pR‘
);

6720 
	g»tV®
 = 
_pR‘
;

6721  
	ghr
;

6722 }, 
	g_Cts
.
g‘_tok’
());

6725 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6726 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6728  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6729 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6730 
HRESULT
 
	ghr
 = 
_Func
(
_Prog»ss
, 
_pR‘
);

6731 
	g»tV®
 = 
_pR‘
;

6732  
	ghr
;

6733 }, 
	g_Cts
.
g‘_tok’
());

6736 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6737 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6739  
	gsk
<
	g_R‘uºTy³
>([=](
_R‘uºTy³
* 
»tV®
è-> 
HRESULT
 {

6740 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6741 
HRESULT
 
	ghr
 = 
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
(), 
_pR‘
);

6742 
	g»tV®
 = 
_pR‘
;

6743  
	ghr
;

6744 }, 
	g_Cts
.
g‘_tok’
());

6749 
	g‹m¶©e
<>

6750 
	g_S–eùÜTaskG’”©Ü
<
	gd‘as
::
_Ty³S–eùÜNoAsync
, >

6752 #ià
_MSC_VER
 >= 1800

6753 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6754 
	gsk
<> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6756 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6757 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6758  
	gsk
<>([=](è-> 
HRESULT
 {

6759 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6760 (
	g_Ov”subsüib”
);

6761  
_Func
();

6762 }, 
	g_skO±šos
);

6765 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6766 
	gsk
<> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6768 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6769 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6770  
	gsk
<>([=](è-> 
HRESULT
 {

6771 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6772 (
	g_Ov”subsüib”
);

6773  
_Func
(
_Cts
.
g‘_tok’
());

6774 }, 
	g_skO±šos
);

6777 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6778 
	gsk
<> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6780 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6781 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6782  
	gsk
<>([=](è-> 
HRESULT
 {

6783 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6784 (
	g_Ov”subsüib”
);

6785  
_Func
(
_Prog»ss
);

6786 }, 
	g_skO±šos
);

6789 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6790 
	gsk
<> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6792 
sk_İtiÚs
 
_skO±šos
(
_Cts
.
g‘_tok’
());

6793 
	gd‘as
::
_g‘_š‹º®_sk_İtiÚs
(
_skO±šos
).
_£t_ü—tiÚ_ÿÎ¡ack
(
_ÿÎ¡ack
);

6794  
	gsk
<>([=](è-> 
HRESULT
 {

6795 
CÚcu¼’cy
::
d‘as
::
_Task_g’”©Ü_ov”subsüib”_t
 
_Ov”subsüib”
;

6796 (
	g_Ov”subsüib”
);

6797  
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
());

6798 }, 
	g_skO±šos
);

6801 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6802 
	gsk
<> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6804  
sk
<>([=](è-> 
HRESULT
 {

6805 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6806  
_Func
();

6807 }, 
	g_Cts
.
g‘_tok’
());

6810 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6811 
	gsk
<> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6813  
sk
<>([=](è-> 
HRESULT
 {

6814 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6815  
_Func
(
_Cts
.
g‘_tok’
());

6816 }, 
	g_Cts
.
g‘_tok’
());

6819 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6820 
	gsk
<> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6822  
sk
<>([=](è-> 
HRESULT
 {

6823 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6824  
_Func
(
_Prog»ss
);

6825 }, 
	g_Cts
.
g‘_tok’
());

6828 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6829 
	gsk
<> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6831  
sk
<>([=](è-> 
HRESULT
 {

6832 
_Task_g’”©Ü_ov”subsüib”
 
_Ov”subsüib”
;

6833  
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
());

6834 }, 
	g_Cts
.
g‘_tok’
());

6842 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

6843 
	g_S–eùÜTaskG’”©Ü
<
	gd‘as
::
_Ty³S–eùÜAsyncTask
, 
	g_R‘uºTy³
>

6845 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6846 #ià
_MSC_VER
 >= 1800

6847 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6849 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6852 
	gsk
<
	g_R‘uºTy³
> 
	g_sk
;

6853 
_Func
(&
_sk
);

6854  
	g_sk
;

6857 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6858 #ià
_MSC_VER
 >= 1800

6859 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6861 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6864 
	gsk
<
	g_R‘uºTy³
> 
	g_sk
;

6865 
_Func
(
_Cts
.
g‘_tok’
(), &
_sk
);

6866  
	g_sk
;

6869 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6870 #ià
_MSC_VER
 >= 1800

6871 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6873 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6876 
	gsk
<
	g_R‘uºTy³
> 
	g_sk
;

6877 
_Func
(
_Prog»ss
, &
_sk
);

6878  
	g_sk
;

6881 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6882 #ià
_MSC_VER
 >= 1800

6883 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6885 
	gsk
<
	g_R‘uºTy³
> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6888 
	gsk
<
	g_R‘uºTy³
> 
	g_sk
;

6889 
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
(), &
_sk
);

6890  
	g_sk
;

6894 
	g‹m¶©e
<>

6895 
	g_S–eùÜTaskG’”©Ü
<
	gd‘as
::
_Ty³S–eùÜAsyncTask
, >

6897 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6898 #ià
_MSC_VER
 >= 1800

6899 
	gsk
<> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6901 
	gsk
<> 
_G’”©eTask_0
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6904 
sk
<> 
_sk
;

6905 
_Func
(&
_sk
);

6906  
	g_sk
;

6909 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

6910 #ià
_MSC_VER
 >= 1800

6911 
	gsk
<> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6913 
	gsk
<> 
_G’”©eTask_1C
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6916 
sk
<> 
_sk
;

6917 
_Func
(
_Cts
.
g‘_tok’
(), &
_sk
);

6918  
	g_sk
;

6921 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6922 #ià
_MSC_VER
 >= 1800

6923 
	gsk
<> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6925 
	gsk
<> 
_G’”©eTask_1P
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6928 
sk
<> 
_sk
;

6929 
_Func
(
_Prog»ss
, &
_sk
);

6930  
	g_sk
;

6933 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssObjeù
>

6934 #ià
_MSC_VER
 >= 1800

6935 
	gsk
<> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6937 
	gsk
<> 
_G’”©eTask_2PC
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_Prog»ssObjeù
& 
_Prog»ss
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6940 
sk
<> 
_sk
;

6941 
_Func
(
_Prog»ss
, 
_Cts
.
g‘_tok’
(), &
_sk
);

6942  
	g_sk
;

6946 
	g‹m¶©e
<
ty³Çme
 
	g_G’”©Ü
, 
boŞ
 
	g_TakesTok’
, boŞ 
	gTakesProg»ss
>

6947 
	s_TaskG’”©Ü


6951 
	g‹m¶©e
<
ty³Çme
 
	g_G’”©Ü
>

6952 
	g_TaskG’”©Ü
<
	g_G’”©Ü
, 
	gçl£
, false>

6954 #ià
_MSC_VER
 >= 1800

6955 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

6956 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6957 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_ÿÎ¡ack
))

6959 ()
	g_PŒ
;

6960  
	g_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_ÿÎ¡ack
);

6963 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

6964 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6965 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
))

6967  
	g_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
);

6970 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

6971 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

6972 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
))

6974 ()
	g_PŒ
;

6975  
	g_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
);

6978 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

6979 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

6980 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
))

6982  
	g_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
);

6987 
	g‹m¶©e
<
ty³Çme
 
	g_G’”©Ü
>

6988 
	g_TaskG’”©Ü
<
	g_G’”©Ü
, 
	gŒue
, 
	gçl£
>

6990 #ià
_MSC_VER
 >= 1800

6991 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

6992 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

6993 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_ÿÎ¡ack
))

6995  
	g_G’”©Ü
::
_G’”©eTask_1C
(
_Func
, 
_Cts
, 
_ÿÎ¡ack
);

6998 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

6999 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7000 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
))

7002  
	g_G’”©Ü
::
_G’”©eTask_1C
(
_Func
, 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
);

7005 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

7006 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

7007 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
))

7009  
	g_G’”©Ü
::
_G’”©eTask_1C
(
_Func
, 
_Cts
);

7012 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

7013 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7014 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
))

7016  
	g_G’”©Ü
::
_G’”©eTask_1C
(
_Func
, 
_Cts
, 
_pR‘
);

7021 
	g‹m¶©e
<
ty³Çme
 
	g_G’”©Ü
>

7022 
	g_TaskG’”©Ü
<
	g_G’”©Ü
, 
	gçl£
, 
	gŒue
>

7024 #ià
_MSC_VER
 >= 1800

7025 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

7026 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7027 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_ÿÎ¡ack
))

7029  
	g_G’”©Ü
::
_G’”©eTask_1P
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
, 
_ÿÎ¡ack
);

7032 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

7033 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7034 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
))

7036  
	g_G’”©Ü
::
_G’”©eTask_1P
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
);

7039 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

7040 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

7041 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
))

7043  
	g_G’”©Ü
::
_G’”©eTask_1P
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
);

7046 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

7047 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7048 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
))

7050  
	g_G’”©Ü
::
_G’”©eTask_1P
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
, 
_pR‘
);

7055 
	g‹m¶©e
<
ty³Çme
 
	g_G’”©Ü
>

7056 
	g_TaskG’”©Ü
<
	g_G’”©Ü
, 
	gŒue
,rue>

7058 #ià
_MSC_VER
 >= 1800

7059 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

7060 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7061 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_ÿÎ¡ack
))

7063  
	g_G’”©Ü
::
_G’”©eTask_2PC
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
, 
_ÿÎ¡ack
);

7066 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

7067 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7068 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
))

7070  
	g_G’”©Ü
::
_G’”©eTask_2PC
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
, 
_pR‘
, 
_ÿÎ¡ack
);

7073 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
>

7074 autØ
_G’”©eTaskNoR‘
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

7075 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
))

7077  
	g_G’”©Ü
::
_G’”©eTask_2PC
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
);

7080 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
>

7081 autØ
_G’”©eTask
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7082 -> 
deşty³
(
_G’”©Ü
::
_G’”©eTask_0
(
_Func
, 
_Cts
, 
_pR‘
))

7084  
	g_G’”©Ü
::
_G’”©eTask_2PC
(
_Func
, 
´og»ss_»pÜ‹r
<
_Prog»ssTy³
>::
_C»©eR•Ü‹r
(
_PŒ
), 
_Cts
, 
_pR‘
);

7111 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_TaskT¿™s
, 
boŞ
 
	g_TakesTok’
, boŞ 
	g_TakesProg»ss
>

7112 
	s_AsyncA‰ribu‹s


7116 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_TaskT¿™s
, 
boŞ
 
	g_TakesTok’
>

7117 
	g_AsyncA‰ribu‹s
<
	g_FunùiÚ
, 
	g_Prog»ssTy³
, 
	g_R‘uºTy³
, 
	g_TaskT¿™s
, 
	g_TakesTok’
, 
	gŒue
>

7119 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncO³¿tiÚW™hProg»ss
<
	t_R‘uºTy³
, 
	t_Prog»ssTy³
> 
	t_AsyncBa£Ty³
;

7120 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncO³¿tiÚProg»ssHªdËr
<
	t_R‘uºTy³
, 
	t_Prog»ssTy³
> 
	t_Prog»ssD–eg©eTy³
;

7121 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncO³¿tiÚW™hProg»ssCom¶‘edHªdËr
<
	t_R‘uºTy³
, 
	t_Prog»ssTy³
> 
	t_Com¶‘iÚD–eg©eTy³
;

7122 
ty³Çme
 
	t_R‘uºTy³
 _ReturnType;

7123 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_Unw¿pAsyncO³¿tiÚW™hProg»ssS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_AsyncBa£Ty³
*>()))>::
	tty³
 
	t_R‘uºTy³_abi
;

7124 
ty³Çme
 
	t_Prog»ssTy³
 _ProgressType;

7125 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_Unw¿pAsyncO³¿tiÚW™hProg»ssProg»ssS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_AsyncBa£Ty³
*>()))>::
	tty³
 
	t_Prog»ssTy³_abi
;

7126 
ty³Çme
 
	t_TaskT¿™s
::
	t_AsyncKšd
 _AsyncKind;

7127 
ty³Çme
 
	t_S–eùÜTaskG’”©Ü
<
	t_AsyncKšd
, 
	t_R‘uºTy³
> _SelectorTaskGenerator;

7128 
ty³Çme
 
	t_TaskG’”©Ü
<
	t_S–eùÜTaskG’”©Ü
, 
	t_TakesTok’
, 
	tŒue
> _TaskGenerator;

7130 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
Œue
;

7131 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
_TakesTok’
;

7133 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7134 #ià
_MSC_VER
 >= 1800

7135 
	gsk
<
ty³Çme
 
	g_TaskT¿™s
::
_TaskR‘Ty³
> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7137  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³_abi
, 
	g_R‘uºTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
, 
	g_ÿÎ¡ack
);

7140 
	gsk
<
ty³Çme
 
	g_TaskT¿™s
::
_TaskR‘Ty³
> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7142  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³_abi
, 
	g_R‘uºTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
);

7147 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_TaskT¿™s
, 
boŞ
 
	g_TakesTok’
>

7148 
	g_AsyncA‰ribu‹s
<
	g_FunùiÚ
, 
	g_Prog»ssTy³
, 
	g_R‘uºTy³
, 
	g_TaskT¿™s
, 
	g_TakesTok’
, 
	gçl£
>

7150 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncO³¿tiÚ
<
	t_R‘uºTy³
> 
	t_AsyncBa£Ty³
;

7151 
_Z
 
	t_Prog»ssD–eg©eTy³
;

7152 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncO³¿tiÚCom¶‘edHªdËr
<
	t_R‘uºTy³
> 
	t_Com¶‘iÚD–eg©eTy³
;

7153 
ty³Çme
 
	t_R‘uºTy³
 _ReturnType;

7154 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_Unw¿pAsyncO³¿tiÚS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_AsyncBa£Ty³
*>()))>::
	tty³
 
	t_R‘uºTy³_abi
;

7155 
ty³Çme
 
	t_TaskT¿™s
::
	t_AsyncKšd
 _AsyncKind;

7156 
ty³Çme
 
	t_S–eùÜTaskG’”©Ü
<
	t_AsyncKšd
, 
	t_R‘uºTy³
> _SelectorTaskGenerator;

7157 
ty³Çme
 
	t_TaskG’”©Ü
<
	t_S–eùÜTaskG’”©Ü
, 
	t_TakesTok’
, 
	tçl£
> _TaskGenerator;

7159 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
çl£
;

7160 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
_TakesTok’
;

7162 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7163 #ià
_MSC_VER
 >= 1800

7164 
	gsk
<
ty³Çme
 
	g_TaskT¿™s
::
_TaskR‘Ty³
> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7166  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³
, 
	g_R‘uºTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
, 
	g_ÿÎ¡ack
);

7169 
	gsk
<
ty³Çme
 
	g_TaskT¿™s
::
_TaskR‘Ty³
> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7171  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³
, 
	g_R‘uºTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
);

7176 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_TaskT¿™s
, 
boŞ
 
	g_TakesTok’
>

7177 
	g_AsyncA‰ribu‹s
<
	g_FunùiÚ
, 
	g_Prog»ssTy³
, , 
	g_TaskT¿™s
, 
	g_TakesTok’
, 
	gŒue
>

7179 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncAùiÚW™hProg»ss
<
	t_Prog»ssTy³
> 
	t_AsyncBa£Ty³
;

7180 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncAùiÚProg»ssHªdËr
<
	t_Prog»ssTy³
> 
	t_Prog»ssD–eg©eTy³
;

7181 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncAùiÚW™hProg»ssCom¶‘edHªdËr
<
	t_Prog»ssTy³
> 
	t_Com¶‘iÚD–eg©eTy³
;

7182 
	t_R‘uºTy³
;

7183 
	t_R‘uºTy³_abi
;

7184 
ty³Çme
 
	t_Prog»ssTy³
 _ProgressType;

7185 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIÁ”Çl
::
	tG‘AbiTy³
<
	tdeşty³
(
	t_Unw¿pAsyncAùiÚW™hProg»ssS–eùÜ
(
	t¡dx
::
	tdeşv®
<
	t_AsyncBa£Ty³
*>()))>::
	tty³
 
	t_Prog»ssTy³_abi
;

7186 
ty³Çme
 
	t_TaskT¿™s
::
	t_AsyncKšd
 _AsyncKind;

7187 
ty³Çme
 
	t_S–eùÜTaskG’”©Ü
<
	t_AsyncKšd
, 
	t_R‘uºTy³
> _SelectorTaskGenerator;

7188 
ty³Çme
 
	t_TaskG’”©Ü
<
	t_S–eùÜTaskG’”©Ü
, 
	t_TakesTok’
, 
	tŒue
> _TaskGenerator;

7190 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
Œue
;

7191 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
_TakesTok’
;

7193 #ià
_MSC_VER
 >= 1800

7194 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7195 
	gsk
<> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7197  
	g_TaskG’”©Ü
::
_G’”©eTaskNoR‘
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³_abi
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_ÿÎ¡ack
);

7199 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7200 
	gsk
<sk<>> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7202  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³_abi
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
, 
	g_ÿÎ¡ack
);

7205 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7206 
	gsk
<> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

7208  
_TaskG’”©Ü
::
_G’”©eTaskNoR‘
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³_abi
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
);

7210 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7211 
	gsk
<sk<>> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7213  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³_abi
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
);

7218 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_Prog»ssTy³
,y³Çm
	g_TaskT¿™s
, 
boŞ
 
	g_TakesTok’
>

7219 
	g_AsyncA‰ribu‹s
<
	g_FunùiÚ
, 
	g_Prog»ssTy³
, , 
	g_TaskT¿™s
, 
	g_TakesTok’
, 
	gçl£
>

7221 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncAùiÚ
 
	t_AsyncBa£Ty³
;

7222 
_Z
 
	t_Prog»ssD–eg©eTy³
;

7223 
ty³Çme
 
	tABI
::
	tWšdows
::
	tFound©iÚ
::
	tIAsyncAùiÚCom¶‘edHªdËr
 
	t_Com¶‘iÚD–eg©eTy³
;

7224 
	t_R‘uºTy³
;

7225 
	t_R‘uºTy³_abi
;

7226 
ty³Çme
 
	t_TaskT¿™s
::
	t_AsyncKšd
 _AsyncKind;

7227 
ty³Çme
 
	t_S–eùÜTaskG’”©Ü
<
	t_AsyncKšd
, 
	t_R‘uºTy³
> _SelectorTaskGenerator;

7228 
ty³Çme
 
	t_TaskG’”©Ü
<
	t_S–eùÜTaskG’”©Ü
, 
	t_TakesTok’
, 
	tçl£
> _TaskGenerator;

7230 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
çl£
;

7231 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
_TakesTok’
;

7233 #ià
_MSC_VER
 >= 1800

7234 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7235 
	gsk
<> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7237  
	g_TaskG’”©Ü
::
_G’”©eTaskNoR‘
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_ÿÎ¡ack
);

7239 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7240 
	gsk
<sk<>> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7242  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
, 
	g_ÿÎ¡ack
);

7245 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7246 
	gsk
<> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
)

7248  
_TaskG’”©Ü
::
_G’”©eTaskNoR‘
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
);

7250 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
,y³Çm
	g_CÏssPŒ
>

7251 
	gsk
<sk<>> 
_G’”©e_Task
(cÚ¡ 
_FunùiÚ
& 
_Func
, 
_CÏssPŒ
 
_PŒ
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_Cts
, 
_R‘uºTy³
* 
_pR‘
)

7253  
	g_TaskG’”©Ü
::
_G’”©eTask
<
_FunùiÚ
, 
	g_CÏssPŒ
, 
	g_Prog»ssTy³
>(
	g_Func
, 
	g_PŒ
, 
	g_Cts
, 
	g_pR‘
);

7258 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

7259 
	s_AsyncLambdaTy³T¿™s


7261 
ty³Çme
 
	t_Unh©
<
	tty³Çme
 
	t_CAFunùÜO±iÚs
<
	t_FunùiÚ
>::
	t_R‘uºTy³
>::
	t_V®ue
 _ReturnType;

7262 
ty³Çme
 
	t_FunùÜTy³T¿™s
<
	t_FunùiÚ
>::
	t_Argum’t1Ty³
 _Argument1Type;

7263 
ty³Çme
 
	t_CAFunùÜO±iÚs
<
	t_FunùiÚ
>::
	t_Prog»ssTy³
 _ProgressType;

7265 cÚ¡ 
boŞ
 
	g_TakesProg»ss
 = 
_CAFunùÜO±iÚs
<
_FunùiÚ
>::
_TakesProg»ss
;

7266 cÚ¡ 
boŞ
 
	g_TakesTok’
 = 
_CAFunùÜO±iÚs
<
_FunùiÚ
>::
_TakesTok’
;

7268 
ty³Çme
 
	t_TaskTy³T¿™s
<
	t_R‘uºTy³
> 
	t_TaskT¿™s
;

7269 
ty³Çme
 
	t_AsyncA‰ribu‹s
<
	t_FunùiÚ
, 
	t_Prog»ssTy³
, 
	tty³Çme
 
	t_TaskT¿™s
::
	t_TaskR‘Ty³
, _TaskT¿™s, 
	t_TakesTok’
, 
	t_TakesProg»ss
> _AsyncAttributes;

7274 #iâdeà
RUNTIMECLASS_CÚcu¼’cy_wš¹_d‘as__AsyncInfoBa£_DEFINED


7275 
	#RUNTIMECLASS_CÚcu¼’cy_wš¹_d‘as__AsyncInfoBa£_DEFINED


	)

7276 cÚ¡ 
__deş¥ec
(
£Ëùªy
è
WCHAR
 
RuÁimeCÏss_CÚcu¼’cy_wš¹_d‘as__AsyncInfoBa£
[] = 
L
"Concurrency_winrt.details._AsyncInfoBase";

7282 
	g‹m¶©e
 < 
ty³Çme
 
	g_A‰ribu‹s
, 
_AsyncResuÉTy³
 
	g»suÉTy³
 = 
SšgËResuÉ
 >

7283 
şass
 
_AsyncInfoBa£
 
ab¡¿ù
 : 
public
 
Miüosoá
::
WRL
::
RuÁimeCÏss
<

7284 
Miüosoá
::
WRL
::
RuÁimeCÏssFÏgs
< Miüosoá::WRL::
RuÁimeCÏssTy³
::
WšRt
>, 
	gMiüosoá
::WRL::
Im¶em’ts
<
ty³Çme
 
_A‰ribu‹s
::
_AsyncBa£Ty³
, 
	gABI
::
Wšdows
::
Found©iÚ
::
IAsyncInfo
>>

7286 
In¥eùabËCÏss
(
RuÁimeCÏss_CÚcu¼’cy_wš¹_d‘as__AsyncInfoBa£
, 
Ba£Tru¡
)

7287 
	gpublic
:

7288 
_AsyncInfoBa£
() :

7289 
_M_cu¼’tStus
(
_AsyncStusIÁ”Çl
::
_AsyncC»©ed
),

7290 
_M_”rÜCode
(
S_OK
),

7291 
_M_com¶‘eD–eg©e
(
nuÎ±r
),

7292 
_M_Com¶‘eD–eg©eAssigÃd
(0),

7293 
_M_C®lbackMade
(0)

7295 #ià
_MSC_VER
 < 1800

7296 
	g_M_id
 = 
CÚcu¼’cy
::
d‘as
::
_G‘NextAsyncId
();

7298 
	g_M_id
 = 
CÚcu¼’cy
::
d‘as
::
¶©fÜm
::
G‘NextAsyncId
();

7301 
	gpublic
:

7302 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
ty³Çme
 
_A‰ribu‹s
::
_R‘uºTy³_abi
* 
»suÉs
)

7304 ()
»suÉs
;

7305  
	gE_UNEXPECTED
;

7308 
vœtu®
 
STDMETHODIMP
 
g‘_Id
(* 
id
)

7310 
HRESULT
 
	ghr
 = 
_CheckV®idS‹FÜAsyncInfoC®l
();

7311 ià(
FAILED
(
hr
)è 
	ghr
;

7312 ià(!
	gid
è 
	gE_POINTER
;

7313 *
	gid
 = 
_M_id
;

7314  
	gS_OK
;

7317 
vœtu®
 
STDMETHODIMP
 
put_Id
(
id
)

7319 
HRESULT
 
	ghr
 = 
_CheckV®idS‹FÜAsyncInfoC®l
();

7320 ià(
FAILED
(
hr
)è 
	ghr
;

7322 ià(
	gid
 == 0)

7324  
E_INVALIDARG
;

7326 ià(
	g_M_cu¼’tStus
 !ğ
_AsyncStusIÁ”Çl
::
_AsyncC»©ed
)

7328  
E_ILLEGAL_METHOD_CALL
;

7331 
	g_M_id
 = 
id
;

7332  
	gS_OK
;

7334 
vœtu®
 
STDMETHODIMP
 
g‘_Stus
(
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
* 
¡©us
)

7336 
HRESULT
 
hr
 = 
_CheckV®idS‹FÜAsyncInfoC®l
();

7337 ià(
FAILED
(
hr
)è 
	ghr
;

7338 ià(!
	g¡©us
è 
	gE_POINTER
;

7340 
_AsyncStusIÁ”Çl
 
	g_Cu¼’t
 = 
_M_cu¼’tStus
;

7345 
	g_Cu¼’t
)

7347 
	g_AsyncCªûlP’dšg
:

7348 
_Cu¼’t
 = 
_AsyncCªûËd
;

7350 
	g_AsyncC»©ed
:

7351 
_Cu¼’t
 = 
_AsyncS¹ed
;

7357 *
	g¡©us
 = 
¡©ic_ÿ¡
<
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
>(
_Cu¼’t
);

7358  
	gS_OK
;

7361 
vœtu®
 
STDMETHODIMP
 
g‘_E¼ÜCode
(
HRESULT
* 
”rÜCode
)

7363 
HRESULT
 
	ghr
 = 
_CheckV®idS‹FÜAsyncInfoC®l
();

7364 ià(
FAILED
(
hr
)è 
	ghr
;

7365 ià(!
	ghr
)  hr;

7366 *
	g”rÜCode
 = 
_M_”rÜCode
;

7367  
	gS_OK
;

7370 
vœtu®
 
STDMETHODIMP
 
g‘_Prog»ss
(
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
** 
_Prog»ssHªdËr
)

7372  
_G‘OnProg»ss
(
_Prog»ssHªdËr
);

7375 
vœtu®
 
STDMETHODIMP
 
put_Prog»ss
(
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
* 
_Prog»ssHªdËr
)

7377  
_PutOnProg»ss
(
_Prog»ssHªdËr
);

7380 
vœtu®
 
STDMETHODIMP
 
Cªûl
()

7382 ià(
_T¿ns™iÚToS‹
(
_AsyncCªûlP’dšg
))

7384 
_OnCªûl
();

7386  
	gS_OK
;

7389 
vœtu®
 
STDMETHODIMP
 
Clo£
()

7391 ià(
_T¿ns™iÚToS‹
(
_AsyncClo£d
))

7393 
_OnClo£
();

7397 ià(
	g_M_cu¼’tStus
 !ğ
_AsyncClo£d
)

7399  
E_ILLEGAL_STATE_CHANGE
;

7402  
	gS_OK
;

7405 
vœtu®
 
STDMETHODIMP
 
g‘_Com¶‘ed
(
ty³Çme
 
_A‰ribu‹s
::
_Com¶‘iÚD–eg©eTy³
** 
_Com¶‘eHªdËr
)

7407 
_CheckV®idS‹FÜD–eg©eC®l
();

7408 ià(!
	g_Com¶‘eHªdËr
è 
	gE_POINTER
;

7409 *
	g_Com¶‘eHªdËr
 = 
_M_com¶‘eD–eg©e
.
G‘
();

7410  
	gS_OK
;

7413 
vœtu®
 
STDMETHODIMP
 
put_Com¶‘ed
(
ty³Çme
 
_A‰ribu‹s
::
_Com¶‘iÚD–eg©eTy³
* 
_Com¶‘eHªdËr
)

7415 
_CheckV®idS‹FÜD–eg©eC®l
();

7417 ià(
IÁ”lockedInüem’t
(&
_M_Com¶‘eD–eg©eAssigÃd
) == 1)

7419 
_M_com¶‘eD–eg©eCÚ‹xt
 = 
_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
();

7420 
	g_M_com¶‘eD–eg©e
 = 
_Com¶‘eHªdËr
;

7423 
MemÜyB¬r›r
();

7424 ià(
_IsT”mš®S‹
())

7426 
_FœeCom¶‘iÚ
();

7431  
	gE_ILLEGAL_DELEGATE_ASSIGNMENT
;

7433  
	gS_OK
;

7436 
	g´Ùeùed
:

7438 
STDMETHODIMP
 
_S¹
()

7440 ià(
_T¿ns™iÚToS‹
(
_AsyncS¹ed
))

7442 
_OnS¹
();

7446  
	gE_ILLEGAL_STATE_CHANGE
;

7448  
	gS_OK
;

7451 
HRESULT
 
_FœeCom¶‘iÚ
()

7453 
HRESULT
 
	ghr
 = 
S_OK
;

7454 
_TryT¿ns™iÚToCom¶‘ed
();

7457 ià(
	g_M_com¶‘eD–eg©e
 !ğ
nuÎ±r
 && 
IÁ”lockedInüem’t
(&
_M_C®lbackMade
) == 1)

7459 
hr
 = 
_M_com¶‘eD–eg©eCÚ‹xt
.
_C®lInCÚ‹xt
([=](è-> 
HRESULT
 {

7460 
ABI
::
Wšdows
::
Found©iÚ
::
AsyncStus
 
¡©us
;

7461 
HRESULT
 
hr
;

7462 ià(
SUCCEEDED
(
hr
 = 
this
->
g‘_Stus
(&
¡©us
)))

7463 
_M_com¶‘eD–eg©e
->
Invoke
((
_A‰ribu‹s
::
_AsyncBa£Ty³
*)
this
, 
¡©us
);

7464 
_M_com¶‘eD–eg©e
 = 
nuÎ±r
;

7465  
hr
;

7468  
	ghr
;

7471 
vœtu®
 
STDMETHODIMP
 
_G‘OnProg»ss
(
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
** 
_Prog»ssHªdËr
)

7473 ()
_Prog»ssHªdËr
;

7474  
	gE_UNEXPECTED
;

7477 
vœtu®
 
STDMETHODIMP
 
_PutOnProg»ss
(
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
* 
_Prog»ssHªdËr
)

7479 ()
_Prog»ssHªdËr
;

7480  
	gE_UNEXPECTED
;

7484 
boŞ
 
_TryT¿ns™iÚToCom¶‘ed
()

7486  
_T¿ns™iÚToS‹
(
_AsyncStusIÁ”Çl
::
_AsyncCom¶‘ed
);

7489 
boŞ
 
_TryT¿ns™iÚToCªûÎed
()

7491  
_T¿ns™iÚToS‹
(
_AsyncStusIÁ”Çl
::
_AsyncCªûËd
);

7494 
boŞ
 
_TryT¿ns™iÚToE¼Ü
(cÚ¡ 
HRESULT
 
”rÜ
)

7496 
_IÁ”lockedCom·»Exchªge
(
»š‹½»t_ÿ¡
<vŞ©
LONG
*>(&
_M_”rÜCode
), 
”rÜ
, 
S_OK
);

7497  
_T¿ns™iÚToS‹
(
_AsyncStusIÁ”Çl
::
_AsyncE¼Ü
);

7503 
šlše
 
HRESULT
 
_CheckV®idS‹FÜD–eg©eC®l
()

7505 ià(
	g_M_cu¼’tStus
 =ğ
_AsyncClo£d
)

7507  
E_ILLEGAL_METHOD_CALL
;

7509  
	gS_OK
;

7515 
šlše
 
HRESULT
 
_CheckV®idS‹FÜResuÉsC®l
()

7517 
_AsyncStusIÁ”Çl
 
	g_Cu¼’t
 = 
_M_cu¼’tStus
;

7519 ià(
	g_Cu¼’t
 =ğ
_AsyncE¼Ü
)

7521  
_M_”rÜCode
;

7523 #´agm¨
w¬nšg
(
push
)

7524 #´agm¨
w¬nšg
(
di§bË
: 4127)

7526 ià(
	g»suÉTy³
 =ğ
SšgËResuÉ
)

7527 #´agm¨
w¬nšg
(
pİ
)

7529 ià(
_Cu¼’t
 !ğ
_AsyncCom¶‘ed
)

7531  
E_ILLEGAL_METHOD_CALL
;

7535 ià(
	g_Cu¼’t
 !ğ
_AsyncS¹ed
 &&

7536 
_Cu¼’t
 !ğ
_AsyncCªûlP’dšg
 &&

7537 
_Cu¼’t
 !ğ
_AsyncCªûËd
 &&

7538 
_Cu¼’t
 !ğ
_AsyncCom¶‘ed
)

7540  
E_ILLEGAL_METHOD_CALL
;

7542  
	gS_OK
;

7548 
šlše
 
boŞ
 
_CÚtšueAsyncO³¿tiÚ
()

7550  
	g_M_cu¼’tStus
 =ğ
_AsyncS¹ed
;

7556 
vœtu®
 
_OnS¹
() = 0;

7557 
vœtu®
 
_OnClo£
() = 0;

7558 
vœtu®
 
_OnCªûl
() = 0;

7560 
	g´iv©e
:

7566 
šlše
 
HRESULT
 
_CheckV®idS‹FÜAsyncInfoC®l
()

7568 
_AsyncStusIÁ”Çl
 
_Cu¼’t
 = 
_M_cu¼’tStus
;

7569 ià(
	g_Cu¼’t
 =ğ
_AsyncClo£d
)

7571  
E_ILLEGAL_METHOD_CALL
;

7573 ià(
	g_Cu¼’t
 =ğ
_AsyncC»©ed
)

7575  
E_ASYNC_OPERATION_NOT_STARTED
;

7577  
	gS_OK
;

7580 
šlše
 
boŞ
 
_T¿ns™iÚToS‹
(cÚ¡ 
_AsyncStusIÁ”Çl
 
_NewS‹
)

7582 
_AsyncStusIÁ”Çl
 
	g_Cu¼’t
 = 
_M_cu¼’tStus
;

7586 
	g_NewS‹
)

7588 
	g_AsyncStusIÁ”Çl
::
_AsyncS¹ed
:

7589 ià(
_Cu¼’t
 !ğ
_AsyncC»©ed
)

7591  
çl£
;

7594 
	g_AsyncStusIÁ”Çl
::
_AsyncCom¶‘ed
:

7595 ià(
_Cu¼’t
 !ğ
_AsyncS¹ed
 && _Cu¼’ˆ!ğ
_AsyncCªûlP’dšg
)

7597  
çl£
;

7600 
	g_AsyncStusIÁ”Çl
::
_AsyncCªûlP’dšg
:

7601 ià(
_Cu¼’t
 !ğ
_AsyncS¹ed
)

7603  
çl£
;

7606 
	g_AsyncStusIÁ”Çl
::
_AsyncCªûËd
:

7607 ià(
_Cu¼’t
 !ğ
_AsyncS¹ed
 && _Cu¼’ˆ!ğ
_AsyncCªûlP’dšg
)

7609  
çl£
;

7612 
	g_AsyncStusIÁ”Çl
::
_AsyncE¼Ü
:

7613 ià(
_Cu¼’t
 !ğ
_AsyncS¹ed
 && _Cu¼’ˆ!ğ
_AsyncCªûlP’dšg
)

7615  
çl£
;

7618 
	g_AsyncStusIÁ”Çl
::
_AsyncClo£d
:

7619 ià(!
_IsT”mš®S‹
(
_Cu¼’t
))

7621  
çl£
;

7625  
çl£
;

7632 
_AsyncStusIÁ”Çl
 
	g_R‘S‹
 = 
¡©ic_ÿ¡
<_AsyncStatusInternal>(

7633 
_IÁ”lockedCom·»Exchªge
(
»š‹½»t_ÿ¡
<vŞ©
LONG
*>(&
_M_cu¼’tStus
),

7634 
_NewS‹
,

7635 
¡©ic_ÿ¡
<
LONG
>(
_Cu¼’t
)));

7640  (
	g_R‘S‹
 =ğ
_Cu¼’t
);

7643 
šlše
 
boŞ
 
_IsT”mš®S‹
()

7645  
_IsT”mš®S‹
(
_M_cu¼’tStus
);

7648 
šlše
 
boŞ
 
_IsT”mš®S‹
(
_AsyncStusIÁ”Çl
 
¡©us
)

7650  (
	g¡©us
 =ğ
_AsyncE¼Ü
 ||

7651 
¡©us
 =ğ
_AsyncCªûËd
 ||

7652 
¡©us
 =ğ
_AsyncCom¶‘ed
 ||

7653 
¡©us
 =ğ
_AsyncClo£d
);

7656 
	g´iv©e
:

7658 
_CÚ‹xtC®lback
 
_M_com¶‘eD–eg©eCÚ‹xt
;

7659 
	gMiüosoá
::
WRL
::
ComPŒ
<
ty³Çme
 
_A‰ribu‹s
::
_Com¶‘iÚD–eg©eTy³
> 
_M_com¶‘eD–eg©e
;

7660 
_AsyncStusIÁ”Çl
 vŞ©
	g_M_cu¼’tStus
;

7661 
HRESULT
 vŞ©
	g_M_”rÜCode
;

7662 
	g_M_id
;

7663 vŞ©
	g_M_Com¶‘eD–eg©eAssigÃd
;

7664 vŞ©
	g_M_C®lbackMade
;

7671 
	g‹m¶©e
< 
ty³Çme
 
	g_A‰ribu‹s
, 
boŞ
 
	g_HasProg»ss
, 
_AsyncResuÉTy³
 
	g_ResuÉTy³
 = 
SšgËResuÉ
 >

7672 
şass
 
_AsyncProg»ssBa£
 
ab¡¿ù
 : 
public
 
_AsyncInfoBa£
<
_A‰ribu‹s
, 
	g_ResuÉTy³
>

7676 
	g‹m¶©e
< 
ty³Çme
 
	g_A‰ribu‹s
, 
_AsyncResuÉTy³
 
	g_ResuÉTy³
>

7677 
şass
 
	g_AsyncProg»ssBa£
<
	g_A‰ribu‹s
, 
	gŒue
, 
	g_ResuÉTy³
> 
	gab¡¿ù
 : 
public
 
_AsyncInfoBa£
<
_A‰ribu‹s
, _ResultType>

7679 
	gpublic
:

7681 
_AsyncProg»ssBa£
(è: 
_AsyncInfoBa£
<
_A‰ribu‹s
, 
	g_ResuÉTy³
>(),

7682 
_M_´og»ssD–eg©e
(
nuÎ±r
)

7686 
vœtu®
 
STDMETHODIMP
 
_G‘OnProg»ss
(
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
** 
_Prog»ssHªdËr
è
ov”ride


7688 
HRESULT
 
hr
 = 
_CheckV®idS‹FÜD–eg©eC®l
();

7689 ià(
FAILED
(
hr
)è 
	ghr
;

7690 *
	g_Prog»ssHªdËr
 = 
_M_´og»ssD–eg©e
;

7691  
	gS_OK
;

7694 
vœtu®
 
STDMETHODIMP
 
_PutOnProg»ss
(
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
* 
_Prog»ssHªdËr
è
ov”ride


7696 
HRESULT
 
hr
 = 
_CheckV®idS‹FÜD–eg©eC®l
();

7697 ià(
FAILED
(
hr
)è 
	ghr
;

7698 
	g_M_´og»ssD–eg©e
 = 
_Prog»ssHªdËr
;

7699 
	g_M_´og»ssD–eg©eCÚ‹xt
 = 
_CÚ‹xtC®lback
::
_C­tu»Cu¼’t
();

7700  
	gS_OK
;

7703 
	gpublic
:

7705 
_FœeProg»ss
(cÚ¡ 
ty³Çme
 
_A‰ribu‹s
::
_Prog»ssTy³_abi
& 
_Prog»ssV®ue
)

7707 ià(
_M_´og»ssD–eg©e
 !ğ
nuÎ±r
)

7709 
_M_´og»ssD–eg©eCÚ‹xt
.
_C®lInCÚ‹xt
([=](è-> 
HRESULT
 {

7710 
_M_´og»ssD–eg©e
->
Invoke
((
_A‰ribu‹s
::
_AsyncBa£Ty³
*)
this
, 
_Prog»ssV®ue
);

7711  
S_OK
;

7716 
	g´iv©e
:

7718 
_CÚ‹xtC®lback
 
_M_´og»ssD–eg©eCÚ‹xt
;

7719 
ty³Çme
 
	g_A‰ribu‹s
::
_Prog»ssD–eg©eTy³
* 
_M_´og»ssD–eg©e
;

7722 
	g‹m¶©e
<
ty³Çme
 
	g_A‰ribu‹s
, 
_AsyncResuÉTy³
 
	g_ResuÉTy³
 = 
SšgËResuÉ
>

7723 
şass
 
_AsyncBa£Prog»ssLay”
 
ab¡¿ù
 : 
public
 
_AsyncProg»ssBa£
<
_A‰ribu‹s
, 
	g_A‰ribu‹s
::
_TakesProg»ss
, 
	g_ResuÉTy³
>

7734 
	g‹m¶©e
<
ty³Çme
 
	g_A‰ribu‹s
,y³Çm
	g_R‘uºTy³
>

7735 
şass
 
_AsyncTaskThunkBa£
 
	gab¡¿ù
 : 
public
 
_AsyncBa£Prog»ssLay”
<
_A‰ribu‹s
>

7737 
public
:

7740 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
()

7742 
HRESULT
 
hr
 = 
_CheckV®idS‹FÜResuÉsC®l
();

7743 ià(
FAILED
(
hr
)è 
	ghr
;

7744 
	g_M_sk
.
g‘
();

7745  
	gS_OK
;

7747 
	gpublic
:

7748 
sk
<
	t_R‘uºTy³
> 
	t_TaskTy³
;

7750 
_AsyncTaskThunkBa£
(cÚ¡ 
_TaskTy³
& 
_Task
)

7751 : 
_M_sk
(
_Task
)

7755 
_AsyncTaskThunkBa£
()

7758 #ià
_MSC_VER
 < 1800

7759 
_S‘TaskC»©iÚAdd»ssHšt
(* 
_SourûAdd»ssHšt
)

7761 ià(!(
¡d
::
is_§me
<
_A‰ribu‹s
::
_AsyncKšd
, 
	g_Ty³S–eùÜAsyncTask
>::
v®ue
))

7766 
_M_sk
.
_S‘TaskC»©iÚAdd»ssHšt
(
_SourûAdd»ssHšt
);

7770 
	g´Ùeùed
:

7771 
vœtu®
 
_OnS¹
(è
ov”ride


7773 
_M_sk
.
th’
([=](
_TaskTy³
 
_AÁeûd’t
è-> 
HRESULT
 {

7774 
Œy


7776 
_AÁeûd’t
.
g‘
();

7778 
ÿtch
 (
CÚcu¼’cy
::
sk_ÿnûËd
&)

7780 
_TryT¿ns™iÚToCªûÎed
();

7782 
ÿtch
 (
IRe¡riùedE¼ÜInfo
*& 
_Ex
)

7784 
HRESULT
 
hr
;

7785 
HRESULT
 
_hr
;

7786 
hr
 = 
_Ex
->
G‘E¼ÜD‘as
(
NULL
, &
_hr
, NULL, NULL);

7787 ià(
SUCCEEDED
(
hr
)èh¸ğ
_hr
;

7788 
_TryT¿ns™iÚToE¼Ü
(
hr
);

7790 
ÿtch
 (...)

7792 
_TryT¿ns™iÚToE¼Ü
(
E_FAIL
);

7794  
_FœeCom¶‘iÚ
();

7798 
	g´Ùeùed
:

7799 
_TaskTy³
 
_M_sk
;

7800 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_M_ùs
;

7803 
	g‹m¶©e
<
ty³Çme
 
	g_A‰ribu‹s
,y³Çm
	g_R‘uºTy³
,y³Çm
	g_R‘uº
>

7804 
şass
 
_AsyncTaskR‘uº
 
	gab¡¿ù
 : 
public
 
_AsyncTaskThunkBa£
<
_A‰ribu‹s
, 
	g_R‘uº
>

7806 
	gpublic
:

7808 
vœtu®
 
STDMETHODIMP
 
G‘ResuÉs
(
_R‘uºTy³
* 
»suÉs
)

7810 
HRESULT
 
hr
 = 
_CheckV®idS‹FÜResuÉsC®l
();

7811 ià(
FAILED
(
hr
)è 
	ghr
;

7812 
	g_M_sk
.
g‘
();

7813 *
	g»suÉs
 = 
_M_»suÉs
;

7814  
	gS_OK
;

7816 
	g‹m¶©e
 <
ty³Çme
 
	g_FunùiÚ
>

7817 #ià
_MSC_VER
 >= 1800

7818 
DoC»©eTask
(
_FunùiÚ
 
_func
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7820 
	g_M_sk
 = 
_A‰ribu‹s
::
_G’”©e_Task
(
_func
, 
this
, 
_M_ùs
, &
_M_»suÉs
, 
_ÿÎ¡ack
);

7823 
DoC»©eTask
(
_FunùiÚ
 
_func
)

7825 
	g_M_sk
 = 
_A‰ribu‹s
::
_G’”©e_Task
(
_func
, 
this
, 
_M_ùs
, &
_M_»suÉs
);

7828 
	g´Ùeùed
:

7829 
_R‘uºTy³
 
_M_»suÉs
;

7832 
	g‹m¶©e
<
ty³Çme
 
	g_A‰ribu‹s
,y³Çm
	g_R‘uºTy³
>

7833 
şass
 
	g_AsyncTaskR‘uº
<
	g_A‰ribu‹s
, 
	g_R‘uºTy³
, > 
	gab¡¿ù
 : 
public
 
_AsyncTaskThunkBa£
<
_A‰ribu‹s
, >

7835 
	gpublic
:

7836 
‹m¶©e
 <
ty³Çme
 
_FunùiÚ
>

7837 #ià
_MSC_VER
 >= 1800

7838 
DoC»©eTask
(
_FunùiÚ
 
_func
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7840 
	g_M_sk
 = 
_A‰ribu‹s
::
_G’”©e_Task
(
_func
, 
this
, 
_M_ùs
, 
_ÿÎ¡ack
);

7843 
DoC»©eTask
(
_FunùiÚ
 
_func
)

7845 
	g_M_sk
 = 
_A‰ribu‹s
::
_G’”©e_Task
(
_func
, 
this
, 
_M_ùs
);

7850 
	g‹m¶©e
<
ty³Çme
 
	g_A‰ribu‹s
>

7851 
şass
 
	g_AsyncTaskR‘uº
<
	g_A‰ribu‹s
, , 
	gsk
<>> 
	gab¡¿ù
 : 
public
 
_AsyncTaskThunkBa£
<
_A‰ribu‹s
,ask<>>

7853 
	gpublic
:

7854 
‹m¶©e
 <
ty³Çme
 
_FunùiÚ
>

7855 #ià
_MSC_VER
 >= 1800

7856 
DoC»©eTask
(
_FunùiÚ
 
_func
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 & 
_ÿÎ¡ack
)

7858 
	g_M_sk
 = 
_A‰ribu‹s
::
_G’”©e_Task
(
_func
, 
this
, 
_M_ùs
, &
_M_»suÉs
, 
_ÿÎ¡ack
);

7861 
DoC»©eTask
(
_FunùiÚ
 
_func
)

7863 
	g_M_sk
 = 
_A‰ribu‹s
::
_G’”©e_Task
(
_func
, 
this
, 
_M_ùs
, &
_M_»suÉs
);

7866 
	g´Ùeùed
:

7867 
sk
<> 
_M_»suÉs
;

7870 
	g‹m¶©e
<
ty³Çme
 
	g_A‰ribu‹s
>

7871 
şass
 
	g_AsyncTaskThunk
 : 
public
 
_AsyncTaskR‘uº
<
_A‰ribu‹s
, 
ty³Çme
 
	g_A‰ribu‹s
::
_R‘uºTy³_abi
,y³Çm_A‰ribu‹s::
_R‘uºTy³
>

7873 
public
:

7875 
_AsyncTaskThunk
(cÚ¡ 
_TaskTy³
& 
_Task
) :

7876 
_AsyncTaskThunkBa£
(
_Task
)

7880 
_AsyncTaskThunk
()

7884 
´Ùeùed
:

7886 
vœtu®
 
_OnClo£
(è
ov”ride


7890 
vœtu®
 
_OnCªûl
(è
ov”ride


7892 
_M_ùs
.
ÿnûl
();

7899 
	g‹m¶©e
<
ty³Çme
 
	g_FunùiÚ
>

7900 
şass
 
	g_AsyncTaskG’”©ÜThunk
 : 
public
 
_AsyncTaskThunk
<
ty³Çme
 
_AsyncLambdaTy³T¿™s
<
_FunùiÚ
>::
_AsyncA‰ribu‹s
>

7902 
public
:

7904 
ty³Çme
 
	t_AsyncLambdaTy³T¿™s
<
	t_FunùiÚ
>::
	t_AsyncA‰ribu‹s
 
	t_A‰ribu‹s
;

7905 
ty³Çme
 
	t_AsyncTaskThunk
<
	t_A‰ribu‹s
> 
	t_Ba£
;

7906 
ty³Çme
 
	t_A‰ribu‹s
::
	t_AsyncBa£Ty³
 _AsyncBaseType;

7908 #ià
_MSC_VER
 >= 1800

7909 
_AsyncTaskG’”©ÜThunk
(cÚ¡ 
_FunùiÚ
& 
_Func
, cÚ¡ 
_TaskC»©iÚC®l¡ack
 &
_ÿÎ¡ack
è: 
_M_func
(_Func), 
_M_ü—tiÚC®l¡ack
(_callstack)

7911 
_AsyncTaskG’”©ÜThunk
(cÚ¡ 
_FunùiÚ
& 
_Func
è: 
_M_func
(_Func)

7915 
_S¹
();

7918 
	g´Ùeùed
:

7925 
vœtu®
 
_OnS¹
(è
ov”ride


7931 #ià
_MSC_VER
 >= 1800

7932 
DoC»©eTask
<
_FunùiÚ
>(
_M_func
, 
	g_M_ü—tiÚC®l¡ack
);

7934 
	gDoC»©eTask
<
	g_FunùiÚ
>(
	g_M_func
);

7936 
	g_Ba£
::
_OnS¹
();

7939 
vœtu®
 
_OnCªûl
(è
	gov”ride


7941 
	g_Ba£
::
_OnCªûl
();

7944 
	g´iv©e
:

7945 #ià
_MSC_VER
 >= 1800

7946 
_TaskC»©iÚC®l¡ack
 
_M_ü—tiÚC®l¡ack
;

7948 
_FunùiÚ
 
	g_M_func
;

7992 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
,y³Çm
	g_FunùiÚ
>

7993 
	$__deş¥ec
(
nošlše
)

7994 
d‘as
::
_AsyncTaskG’”©ÜThunk
<
_FunùiÚ
>* 
	$ü—‹_async
(cÚ¡ 
_FunùiÚ
& 
_Func
)

7996 
	`¡©ic_as£¹
(
¡d
::
is_§me
<
	`deşty³
(
d‘as
::
_IsV®idC»©eAsync
<
_R‘uºTy³
>(
_Func
, 0, 0, 0, 0, 0, 0, 0, 0)), std::
Œue_ty³
>::
v®ue
,

7998 #ià
_MSC_VER
 >= 1800

7999 
Miüosoá
::
WRL
::
ComPŒ
<
d‘as
::
_AsyncTaskG’”©ÜThunk
<
_FunùiÚ
>> 
_AsyncInfo
 = Miüosoá::WRL::
Make
<d‘as::_AsyncTaskG’”©ÜThunk<_FunùiÚ>>(
_Func
, 
	`_CAPTURE_CALLSTACK
());

8001 
Miüosoá
::
WRL
::
ComPŒ
<
d‘as
::
_AsyncTaskG’”©ÜThunk
<
_FunùiÚ
>> 
_AsyncInfo
 = Miüosoá::WRL::
Make
<d‘as::_AsyncTaskG’”©ÜThunk<_FunùiÚ>>(
_Func
);

8002 
_AsyncInfo
->
	`_S‘TaskC»©iÚAdd»ssHšt
(
	`_R‘uºAdd»ss
());

8004  
_AsyncInfo
.
	`D‘ach
();

8005 
	}
}

8007 
Çme¥aû
 
	gd‘as


8009 #ià
_MSC_VER
 < 1800

8011 
_CRTIMP2
 
__cdeş
 
_G‘NextAsyncId
();

8014 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

8015 
	s_RunAÎP¬am


8017 
_RunAÎP¬am
(è: 
_M_com¶‘eCouÁ
(0), 
_M_numTasks
(0)

8021 
_Resize
(
size_t
 
_L’
, 
boŞ
 
_SkVeùÜ
 = 
çl£
)

8023 
_M_numTasks
 = 
_L’
;

8024 ià(!
	g_SkVeùÜ
)

8025 #ià
_MSC_VER
 >= 1800

8027 
	g_M_veùÜ
.
	g_ResuÉ
.
»size
(
_L’
);

8030 
	g_M_veùÜ
.
»size
(
_L’
);

8031 
	g_M_cÚ‹xts
.
»size
(
_L’
);

8035 
	gsk_com¶‘iÚ_ev’t
<
	g_Un™_ty³
> 
	g_M_com¶‘ed
;

8036 
©omic_size_t
 
	g_M_com¶‘eCouÁ
;

8037 #ià
_MSC_VER
 >= 1800

8038 
	g_ResuÉHŞd”
<
	g¡d
::
veùÜ
<
_Ty³
> > 
_M_veùÜ
;

8039 
	g_ResuÉHŞd”
<
	g_Ty³
> 
	g_M_m”geV®
;

8041 
	g¡d
::
veùÜ
<
_Ty³
> 
_M_veùÜ
;

8042 
	g¡d
::
veùÜ
<
_CÚ‹xtC®lback
> 
_M_cÚ‹xts
;

8043 
_Ty³
 
	g_M_m”geV®
;

8045 
size_t
 
	g_M_numTasks
;

8048 #ià
_MSC_VER
 >= 1800

8049 
	g‹m¶©e
<
ty³Çme
 
	g_Ty³
>

8050 
	g_RunAÎP¬am
<
	g¡d
::
veùÜ
<
_Ty³
> >

8052 
_RunAÎP¬am
(è: 
_M_com¶‘eCouÁ
(0), 
_M_numTasks
(0)

8056 
_Resize
(
size_t
 
_L’
, 
boŞ
 
_SkVeùÜ
 = 
çl£
)

8058 
_M_numTasks
 = 
_L’
;

8060 ià(!
	g_SkVeùÜ
)

8062 
	g_M_veùÜ
.
»size
(
_L’
);

8066 
	gsk_com¶‘iÚ_ev’t
<
	g_Un™_ty³
> 
	g_M_com¶‘ed
;

8067 
	g¡d
::
veùÜ
<
_ResuÉHŞd”
<
¡d
::veùÜ<
_Ty³
> > > 
_M_veùÜ
;

8068 
©omic_size_t
 
	g_M_com¶‘eCouÁ
;

8069 
size_t
 
	g_M_numTasks
;

8074 
	g‹m¶©e
<>

8075 #ià
_MSC_VER
 >= 1800

8076 
	g_RunAÎP¬am
<
	g_Un™_ty³
>

8078 
	g_RunAÎP¬am
<>

8081 
_RunAÎP¬am
(è: 
_M_com¶‘eCouÁ
(0), 
_M_numTasks
(0)

8085 
_Resize
(
size_t
 
_L’
)

8087 
	g_M_numTasks
 = 
_L’
;

8090 
	gsk_com¶‘iÚ_ev’t
<
	g_Un™_ty³
> 
	g_M_com¶‘ed
;

8091 
©omic_size_t
 
	g_M_com¶‘eCouÁ
;

8092 
size_t
 
	g_M_numTasks
;

8095 
šlše
 
_JošAÎTok’s_Add
(cÚ¡ 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
& 
_M”gedSrc
, CÚcu¼’cy::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PJošedTok’S‹
)

8097 ià(
_PJošedTok’S‹
 !ğ
nuÎ±r
 && _PJošedTok’S‹ !ğ
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
())

8099 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_T
 = CÚcu¼’cy::ÿnûÎ©iÚ_tok’::
_FromIm¶
(
_PJošedTok’S‹
);

8100 
	g_T
.
»gi¡”_ÿÎback
([=](){

8101 
_M”gedSrc
.
ÿnûl
();

8106 
	g‹m¶©e
<
ty³Çme
 
	g_EËm’tTy³
,y³Çm
	g_FunùiÚ
,y³Çm
	g_TaskTy³
>

8107 
_Wh’AÎCÚtšu©iÚW¿µ”
(
_RunAÎP¬am
<
_EËm’tTy³
>* 
_PP¬am
, 
_FunùiÚ
 
_Func
, 
sk
<
_TaskTy³
>& 
_Task
)

8109 ià(
	g_Task
.
_G‘Im¶
()->
_IsCom¶‘ed
())

8111 
_Func
();

8112 #ià
_MSC_VER
 >= 1800

8113 ià(
	gCÚcu¼’cy
::
d‘as
::
©omic_šüem’t
(
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8115 ià(
_IÁ”lockedInüem’tSizeT
(&
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8119 
_PP¬am
->
_M_com¶‘ed
.
£t
(
_Un™_ty³
());

8121 
d–‘e
 
	g_PP¬am
;

8126 
_CONCRT_ASSERT
(
_Task
.
_G‘Im¶
()->
_IsCªûËd
());

8127 ià(
	g_Task
.
_G‘Im¶
()->
_HasU£rExû±iÚ
())

8130 
	g_PP¬am
->
	g_M_com¶‘ed
.
_Cªûl
(
_Task
.
_G‘Im¶
()->
_G‘Exû±iÚHŞd”
());

8134 
	g_PP¬am
->
	g_M_com¶‘ed
.
_Cªûl
();

8136 #ià
_MSC_VER
 >= 1800

8137 ià(
	gCÚcu¼’cy
::
d‘as
::
©omic_šüem’t
(
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8139 ià(
_IÁ”lockedInüem’tSizeT
(&
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8142 
d–‘e
 
_PP¬am
;

8147 
	g‹m¶©e
<
ty³Çme
 
	g_EËm’tTy³
,y³Çm
	g_I‹¿tÜ
>

8148 
	s_Wh’AÎIm¶


8150 #ià
_MSC_VER
 >= 1800

8151 
	gsk
<
	g¡d
::
veùÜ
<
_EËm’tTy³
>> 
_P”fÜm
(cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8153 
	gsk
<
	g¡d
::
veùÜ
<
_EËm’tTy³
>> 
_P”fÜm
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8156 #ià
_MSC_VER
 >= 1800

8157 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
 = 
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
(è? _TaskO±iÚs.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(è: 
nuÎ±r
;

8159 autØ
	g_PP¬am
 = 
Ãw
 
_RunAÎP¬am
<
_EËm’tTy³
>();

8160 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_M”gedSourû
;

8163 #ià
_MSC_VER
 >= 1800

8164 
sk_İtiÚs
 
_O±iÚs
(
_TaskO±iÚs
);

8165 
	g_O±iÚs
.
£t_ÿnûÎ©iÚ_tok’
(
_M”gedSourû
.
g‘_tok’
());

8166 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_O±iÚs
);

8168 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_M”gedSourû
.
g‘_tok’
());

8171 autØ
	g_R‘uºTask
 = 
_AÎ_sks_com¶‘ed
.
_Th’
([=](
_Un™_ty³
, 
¡d
::
veùÜ
<
_EËm’tTy³
>* 
»tV®
è-> 
HRESULT
 {

8172 #ià
_MSC_VER
 >= 1800

8173 * 
»tV®
 = 
_PP¬am
->
_M_veùÜ
.
G‘
();

8175 autØ
_ResuÉ
 = 
_PP¬am
->
_M_veùÜ
;

8177 
size_t
 
_Index
 = 0;

8178 autØ
_It
 = 
_ResuÉ
.
begš
(); _Iˆ!ğ_ResuÉ.
’d
(); ++_It)

8180 *
_It
 = 
_ResuÉCÚ‹xt
<
_EËm’tTy³
>::
_G‘V®ue
(*_It, 
_PP¬am
->
_M_cÚ‹xts
[
_Index
++], 
çl£
);

8182 *
»tV®
 = 
_ResuÉ
;

8184  
S_OK
;

8185 #ià
_MSC_VER
 >= 1800

8186 }, 
nuÎ±r
);

8188 }, 
	gnuÎ±r
, 
	gŒue
);

8191 ià(
	g_PTok’S‹
)

8193 
	gd‘as
::
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_PTok’S‹
);

8194 
	g_PP¬am
->
_Resize
(
¡©ic_ÿ¡
<
size_t
>(
¡d
::
di¡ªû
(
_Begš
, 
_End
)));

8198 
size_t
 
	g_TaskNum
 = 0;

8199 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8201 
	g_TaskNum
++;

8202 
	gd‘as
::
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_PTask
->
_G‘Im¶
()->
_M_pTok’S‹
);

8204 
	g_PP¬am
->
_Resize
(
_TaskNum
);

8208 ià(
	g_Begš
 =ğ
_End
)

8210 
_PP¬am
->
_M_com¶‘ed
.
£t
(
_Un™_ty³
());

8211 
d–‘e
 
	g_PP¬am
;

8215 
size_t
 
	g_Index
 = 0;

8216 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8218 ià(
	g_PTask
->
is_­¬tm’t_aw¬e
())

8220 
	g_R‘uºTask
.
_S‘Async
();

8223 
	g_PTask
->
_Th’
([
_PP¬am
, 
_Index
](
sk
<
_EËm’tTy³
> 
_ResuÉTask
è-> 
HRESULT
 {

8225 #ià
_MSC_VER
 >= 1800

8227 
_EËm’tTy³
 
	t_EËm’tTy³Dev10
;

8228 autØ
_PP¬amCİy
 = 
_PP¬am
;

8229 autØ
_IndexCİy
 = 
_Index
;

8230 autØ
_Func
 = [
_PP¬amCİy
, 
_IndexCİy
, &
_ResuÉTask
](){

8231 
_PP¬amCİy
->
_M_veùÜ
.
_ResuÉ
[
_IndexCİy
] = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8234 autØ
_Func
 = [
_PP¬am
, 
_Index
, &
_ResuÉTask
](){

8235 
_PP¬am
->
_M_veùÜ
[
_Index
] = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8236 
_PP¬am
->
_M_cÚ‹xts
[
_Index
] = 
_ResuÉCÚ‹xt
<
_EËm’tTy³
>::
_G‘CÚ‹xt
(
çl£
);

8239 
_Wh’AÎCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

8240  
S_OK
;

8241 #ià
_MSC_VER
 >= 1800

8242 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

8244 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

8247 
	g_Index
++;

8251  
	g_R‘uºTask
;

8255 
	g‹m¶©e
<
ty³Çme
 
	g_EËm’tTy³
,y³Çm
	g_I‹¿tÜ
>

8256 
	g_Wh’AÎIm¶
<
	g¡d
::
veùÜ
<
_EËm’tTy³
>, 
	g_I‹¿tÜ
>

8258 #ià
_MSC_VER
 >= 1800

8259 
	gsk
<
	g¡d
::
veùÜ
<
_EËm’tTy³
>> 
_P”fÜm
(cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8261 
	gsk
<
	g¡d
::
veùÜ
<
_EËm’tTy³
>> 
_P”fÜm
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8264 #ià
_MSC_VER
 >= 1800

8265 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
 = 
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
(è? _TaskO±iÚs.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(è: 
nuÎ±r
;

8267 autØ
	g_PP¬am
 = 
Ãw
 
_RunAÎP¬am
<
¡d
::
veùÜ
<
_EËm’tTy³
>>();

8268 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_M”gedSourû
;

8271 #ià
_MSC_VER
 >= 1800

8272 
sk_İtiÚs
 
_O±iÚs
(
_TaskO±iÚs
);

8273 
	g_O±iÚs
.
£t_ÿnûÎ©iÚ_tok’
(
_M”gedSourû
.
g‘_tok’
());

8274 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_O±iÚs
);

8276 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_M”gedSourû
.
g‘_tok’
());

8279 autØ
	g_R‘uºTask
 = 
_AÎ_sks_com¶‘ed
.
_Th’
([=](
_Un™_ty³
, 
¡d
::
veùÜ
<
_EËm’tTy³
>* 
»tV®
è-> 
HRESULT
 {

8280 
_CONCRT_ASSERT
(
_PP¬am
->
_M_com¶‘eCouÁ
 =ğ_PP¬am->
_M_numTasks
);

8281 
¡d
::
veùÜ
<
_EËm’tTy³
> 
_ResuÉ
;

8282 
size_t
 
_I
 = 0; _I < 
_PP¬am
->
_M_numTasks
; _I++)

8284 #ià
_MSC_VER
 >= 1800

8285 cÚ¡ 
¡d
::
veùÜ
<
_EËm’tTy³
>& 
_Vec
 = 
_PP¬am
->
_M_veùÜ
[
_I
].
G‘
();

8287 
¡d
::
veùÜ
<
_EËm’tTy³
>& 
_Vec
 = 
_PP¬am
->
_M_veùÜ
[
_I
];

8289 autØ
_It
 = 
_Vec
.
begš
(); _Iˆ!ğ_Vec.
’d
(); ++_It)

8291 *
_It
 = 
_ResuÉCÚ‹xt
<
_EËm’tTy³
>::
_G‘V®ue
(*_It, 
_PP¬am
->
_M_cÚ‹xts
[
_I
], 
çl£
);

8294 
_ResuÉ
.
š£¹
(_ResuÉ.
’d
(), 
_Vec
.
begš
(), _Vec.end());

8296 *
»tV®
 = 
_ResuÉ
;

8297  
S_OK
;

8298 #ià
_MSC_VER
 >= 1800

8299 }, 
nuÎ±r
);

8301 }, 
	gnuÎ±r
, 
	gŒue
);

8305 ià(
	g_PTok’S‹
)

8307 
	gd‘as
::
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_PTok’S‹
);

8308 
	g_PP¬am
->
_Resize
(
¡©ic_ÿ¡
<
size_t
>(
¡d
::
di¡ªû
(
_Begš
, 
_End
)));

8312 
size_t
 
	g_TaskNum
 = 0;

8313 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8315 
	g_TaskNum
++;

8316 
	gd‘as
::
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_PTask
->
_G‘Im¶
()->
_M_pTok’S‹
);

8318 
	g_PP¬am
->
_Resize
(
_TaskNum
);

8322 ià(
	g_Begš
 =ğ
_End
)

8324 
_PP¬am
->
_M_com¶‘ed
.
£t
(
_Un™_ty³
());

8325 
d–‘e
 
	g_PP¬am
;

8329 
size_t
 
	g_Index
 = 0;

8330 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8332 ià(
	g_PTask
->
is_­¬tm’t_aw¬e
())

8334 
	g_R‘uºTask
.
_S‘Async
();

8337 
	g_PTask
->
_Th’
([
_PP¬am
, 
_Index
](
sk
<
¡d
::
veùÜ
<
_EËm’tTy³
>> 
_ResuÉTask
è-> 
HRESULT
 {

8338 #ià
_MSC_VER
 >= 1800

8340 
_EËm’tTy³
 
	t_EËm’tTy³Dev10
;

8341 autØ
_PP¬amCİy
 = 
_PP¬am
;

8342 autØ
_IndexCİy
 = 
_Index
;

8343 autØ
_Func
 = [
_PP¬amCİy
, 
_IndexCİy
, &
_ResuÉTask
]() {

8344 
_PP¬amCİy
->
_M_veùÜ
[
_IndexCİy
].
S‘
(
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
());

8347 autØ
_Func
 = [
_PP¬am
, 
_Index
, &
_ResuÉTask
]() {

8348 
_PP¬am
->
_M_veùÜ
[
_Index
] = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8349 
_PP¬am
->
_M_cÚ‹xts
[
_Index
] = 
_ResuÉCÚ‹xt
<
_EËm’tTy³
>::
_G‘CÚ‹xt
(
çl£
);

8352 
_Wh’AÎCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

8353  
S_OK
;

8354 #ià
_MSC_VER
 >= 1800

8355 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

8357 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

8360 
	g_Index
++;

8364  
	g_R‘uºTask
;

8368 
	g‹m¶©e
<
ty³Çme
 
	g_I‹¿tÜ
>

8369 
	g_Wh’AÎIm¶
<, 
	g_I‹¿tÜ
>

8371 #ià
_MSC_VER
 >= 1800

8372 
	gsk
<> 
_P”fÜm
(cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8374 
	gsk
<> 
_P”fÜm
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8377 #ià
_MSC_VER
 >= 1800

8378 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
 = 
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
(è? _TaskO±iÚs.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(è: 
nuÎ±r
;

8380 autØ
	g_PP¬am
 = 
Ãw
 
_RunAÎP¬am
<
_Un™_ty³
>();

8381 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_M”gedSourû
;

8384 #ià
_MSC_VER
 >= 1800

8385 
sk_İtiÚs
 
_O±iÚs
(
_TaskO±iÚs
);

8386 
	g_O±iÚs
.
£t_ÿnûÎ©iÚ_tok’
(
_M”gedSourû
.
g‘_tok’
());

8387 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_O±iÚs
);

8389 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_M”gedSourû
.
g‘_tok’
());

8392 autØ
	g_R‘uºTask
 = 
_AÎ_sks_com¶‘ed
.
_Th’
([=](
_Un™_ty³
è-> 
HRESULT
 {  
S_OK
;

8393 #ià
_MSC_VER
 >= 1800

8394 }, 
nuÎ±r
);

8396 }, 
	gnuÎ±r
, 
	gçl£
);

8400 ià(
	g_PTok’S‹
)

8402 
	gd‘as
::
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_PTok’S‹
);

8403 
	g_PP¬am
->
_Resize
(
¡©ic_ÿ¡
<
size_t
>(
¡d
::
di¡ªû
(
_Begš
, 
_End
)));

8407 
size_t
 
	g_TaskNum
 = 0;

8408 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8410 
	g_TaskNum
++;

8411 
	gd‘as
::
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_PTask
->
_G‘Im¶
()->
_M_pTok’S‹
);

8413 
	g_PP¬am
->
_Resize
(
_TaskNum
);

8417 ià(
	g_Begš
 =ğ
_End
)

8419 
_PP¬am
->
_M_com¶‘ed
.
£t
(
_Un™_ty³
());

8420 
d–‘e
 
	g_PP¬am
;

8424 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8426 ià(
	g_PTask
->
is_­¬tm’t_aw¬e
())

8428 
	g_R‘uºTask
.
_S‘Async
();

8431 
	g_PTask
->
_Th’
([
_PP¬am
](
sk
<> 
_ResuÉTask
è-> 
HRESULT
 {

8433 autØ
_Func
 = [](è-> 
HRESULT
 {  
S_OK
; };

8434 
_Wh’AÎCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

8435  
S_OK
;

8436 #ià
_MSC_VER
 >= 1800

8437 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

8439 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

8444  
	g_R‘uºTask
;

8448 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

8449 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
_Wh’AÎVeùÜAndV®ue
(cÚ¡ 
sk
<
¡d
::veùÜ<_R‘uºTy³>>& 
_VeùÜTask
, cÚ¡ask<_R‘uºTy³>& 
_V®ueTask
,

8450 
boŞ
 
_OuutVeùÜFœ¡
)

8452 autØ
	g_PP¬am
 = 
Ãw
 
_RunAÎP¬am
<
_R‘uºTy³
>();

8453 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_M”gedSourû
;

8456 
	gsk
<
	g_Un™_ty³
> 
_AÎ_sks_com¶‘ed
(
_PP¬am
->
_M_com¶‘ed
, 
_M”gedSourû
.
g‘_tok’
());

8458 autØ
	g_R‘uºTask
 = 
_AÎ_sks_com¶‘ed
.
_Th’
([=](
_Un™_ty³
, 
¡d
::
veùÜ
<
_R‘uºTy³
>* 
»tV®
è-> 
HRESULT
 {

8459 
_CONCRT_ASSERT
(
_PP¬am
->
_M_com¶‘eCouÁ
 == 2);

8460 #ià
_MSC_VER
 >= 1800

8461 autØ
_ResuÉ
 = 
_PP¬am
->
_M_veùÜ
.
G‘
();

8462 autØ
_m”geV®
 = 
_PP¬am
->
_M_m”geV®
.
G‘
();

8464 autØ
_ResuÉ
 = 
_PP¬am
->
_M_veùÜ
;

8465 autØ
_It
 = 
_ResuÉ
.
begš
(); _Iˆ!ğ_ResuÉ.
’d
(); ++_It)

8467 *
_It
 = 
_ResuÉCÚ‹xt
<
_R‘uºTy³
>::
_G‘V®ue
(*_It, 
_PP¬am
->
_M_cÚ‹xts
[0], 
çl£
);

8471 ià(
_OuutVeùÜFœ¡
 =ğ
Œue
)

8473 #ià
_MSC_VER
 >= 1800

8474 
_ResuÉ
.
push_back
(
_m”geV®
);

8476 
_ResuÉ
.
push_back
(
_ResuÉCÚ‹xt
<
_R‘uºTy³
>::
_G‘V®ue
(
_PP¬am
->
_M_m”geV®
, _PP¬am->
_M_cÚ‹xts
[1], 
çl£
));

8481 #ià
_MSC_VER
 >= 1800

8482 
_ResuÉ
.
š£¹
(_ResuÉ.
begš
(), 
_m”geV®
);

8484 
_ResuÉ
.
š£¹
(_ResuÉ.
begš
(), 
_ResuÉCÚ‹xt
<
_R‘uºTy³
>::
_G‘V®ue
(
_PP¬am
->
_M_m”geV®
, _PP¬am->
_M_cÚ‹xts
[1], 
çl£
));

8487 *
»tV®
 = 
_ResuÉ
;

8488  
S_OK
;

8489 }, 
nuÎ±r
, 
Œue
);

8492 
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_VeùÜTask
.
_G‘Im¶
()->
_M_pTok’S‹
);

8493 
_JošAÎTok’s_Add
(
_M”gedSourû
, 
_V®ueTask
.
_G‘Im¶
()->
_M_pTok’S‹
);

8496 
	g_PP¬am
->
_Resize
(2, 
Œue
);

8498 ià(
	g_VeùÜTask
.
is_­¬tm’t_aw¬e
(è|| 
	g_V®ueTask
.is_apartment_aware())

8500 
	g_R‘uºTask
.
_S‘Async
();

8502 
	g_VeùÜTask
.
_Th’
([
_PP¬am
](
sk
<
¡d
::
veùÜ
<
_R‘uºTy³
>> 
_ResuÉTask
è-> 
HRESULT
 {

8503 #ià
_MSC_VER
 >= 1800

8505 
_R‘uºTy³
 
	t_R‘uºTy³Dev10
;

8506 autØ
_PP¬amCİy
 = 
_PP¬am
;

8507 autØ
_Func
 = [
_PP¬amCİy
, &
_ResuÉTask
]() {

8508 autØ
_ResuÉLoÿl
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8509 
_PP¬amCİy
->
_M_veùÜ
.
S‘
(
_ResuÉLoÿl
);

8512 autØ
_Func
 = [
_PP¬am
, &
_ResuÉTask
]() {

8513 
_PP¬am
->
_M_veùÜ
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8514 
_PP¬am
->
_M_cÚ‹xts
[0] = 
_ResuÉCÚ‹xt
<
_R‘uºTy³
>::
_G‘CÚ‹xt
(
çl£
);

8518 
_Wh’AÎCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

8519  
S_OK
;

8520 #ià
_MSC_VER
 >= 1800

8521 }, 
_CªûÎ©iÚTok’S‹
::
_NÚe
());

8523 }, 
	g_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

8525 
	g_V®ueTask
.
_Th’
([
_PP¬am
](
sk
<
_R‘uºTy³
> 
_ResuÉTask
è-> 
HRESULT
 {

8526 #ià
_MSC_VER
 >= 1800

8528 
_R‘uºTy³
 
	t_R‘uºTy³Dev10
;

8529 autØ
_PP¬amCİy
 = 
_PP¬am
;

8530 autØ
_Func
 = [
_PP¬amCİy
, &
_ResuÉTask
]() {

8531 autØ
_ResuÉLoÿl
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8532 
_PP¬amCİy
->
_M_m”geV®
.
S‘
(
_ResuÉLoÿl
);

8535 autØ
_Func
 = [
_PP¬am
, &
_ResuÉTask
]() {

8536 
_PP¬am
->
_M_m”geV®
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

8537 
_PP¬am
->
_M_cÚ‹xts
[1] = 
_ResuÉCÚ‹xt
<
_R‘uºTy³
>::
_G‘CÚ‹xt
(
çl£
);

8540 
_Wh’AÎCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

8541  
S_OK
;

8542 #ià
_MSC_VER
 >= 1800

8543 }, 
_CªûÎ©iÚTok’S‹
::
_NÚe
());

8545 }, 
	g_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

8548  
	g_R‘uºTask
;

8552 #ià
_MSC_VER
 < 1800

8576 
	g‹m¶©e
 <
ty³Çme
 
	g_I‹¿tÜ
>

8577 autØ
wh’_®l
(
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8578 -> 
deşty³
 (
d‘as
::
_Wh’AÎIm¶
<
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
_I‹¿tÜ
>::
v®ue_ty³
::
»suÉ_ty³
, _I‹¿tÜ>::
	$_P”fÜm
(
nuÎ±r
, 
_Begš
, 
_End
))

8580 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	t_I‹¿tÜ
>::
	tv®ue_ty³
::
	t»suÉ_ty³
 
	t_EËm’tTy³
;

8581  
d‘as
::
_Wh’AÎIm¶
<
_EËm’tTy³
, 
_I‹¿tÜ
>::
	`_P”fÜm
(
nuÎ±r
, 
_Begš
, 
_End
);

8582 
	}
}

8613 
	g‹m¶©e
 <
ty³Çme
 
	g_I‹¿tÜ
>

8614 #ià
_MSC_VER
 >= 1800

8615 autØ
wh’_®l
(
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
, cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
 =ask_options())

8616 -> 
deşty³
 (
d‘as
::
_Wh’AÎIm¶
<
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
_I‹¿tÜ
>::
v®ue_ty³
::
»suÉ_ty³
, _I‹¿tÜ>::
	$_P”fÜm
(
_TaskO±iÚs
, 
_Begš
, 
_End
))

8618 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	t_I‹¿tÜ
>::
	tv®ue_ty³
::
	t»suÉ_ty³
 
	t_EËm’tTy³
;

8619  
d‘as
::
_Wh’AÎIm¶
<
_EËm’tTy³
, 
_I‹¿tÜ
>::
	`_P”fÜm
(
_TaskO±iÚs
, 
_Begš
, 
_End
);

8620 
	}
}

8622 autØ
wh’_®l
(
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
)

8623 -> 
deşty³
 (
d‘as
::
_Wh’AÎIm¶
<
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
_I‹¿tÜ
>::
v®ue_ty³
::
»suÉ_ty³
, _I‹¿tÜ>::
_P”fÜm
(
_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
_Begš
, 
_End
))

8625 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	t_I‹¿tÜ
>::
	tv®ue_ty³
::
	t»suÉ_ty³
 
	t_EËm’tTy³
;

8626  
	gd‘as
::
_Wh’AÎIm¶
<
_EËm’tTy³
, 
	g_I‹¿tÜ
>::
_P”fÜm
(
_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
_Begš
, 
_End
);

8655 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

8656 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
İ”©Ü
&&(cÚ¡ 
sk
<_R‘uºTy³> & 
_Lhs
, cÚ¡ask<
	g_R‘uºTy³
> & 
	g_Rhs
)

8658 
	gsk
<
	g_R‘uºTy³
> 
	g_PTasks
[2] = { 
_Lhs
, 
_Rhs
 };

8659  
wh’_®l
(
_PTasks
, _PTasks + 2);

8687 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

8688 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
İ”©Ü
&&(cÚ¡ 
sk
<
¡d
::veùÜ<_R‘uºTy³>> & 
_Lhs
, cÚ¡ask<
	g_R‘uºTy³
> & 
	g_Rhs
)

8690  
	gd‘as
::
_Wh’AÎVeùÜAndV®ue
(
_Lhs
, 
_Rhs
, 
Œue
);

8718 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

8719 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
İ”©Ü
&&(cÚ¡ 
sk
<_R‘uºTy³> & 
_Lhs
, cÚ¡ask<¡d::veùÜ<_R‘uºTy³>> & 
_Rhs
)

8721  
d‘as
::
_Wh’AÎVeùÜAndV®ue
(
_Rhs
, 
_Lhs
, 
çl£
);

8749 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

8750 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
İ”©Ü
&&(cÚ¡ 
sk
<
¡d
::veùÜ<_R‘uºTy³>> & 
_Lhs
, cÚ¡ask<¡d::veùÜ<_R‘uºTy³>> & 
_Rhs
)

8752 
sk
<
¡d
::
veùÜ
<
_R‘uºTy³
>> 
_PTasks
[2] = { 
_Lhs
, 
_Rhs
 };

8753  
wh’_®l
(
_PTasks
, _PTasks + 2);

8781 
šlše
 
	gsk
<> 
	gİ”©Ü
&&(cÚ¡ask<> & 
	g_Lhs
, cÚ¡ask<> & 
	g_Rhs
)

8783 
	gsk
<> 
	g_PTasks
[2] = { 
_Lhs
, 
_Rhs
 };

8784  
wh’_®l
(
_PTasks
, _PTasks + 2);

8787 
Çme¥aû
 
	gd‘as


8790 
	g‹m¶©e
 <
ty³Çme
 
	g_Com¶‘iÚTy³
>

8791 
	s_RunAnyP¬am


8793 
_RunAnyP¬am
(è: 
_M_com¶‘eCouÁ
(0), 
_M_numTasks
(0), 
_M_exû±iÚR–©edTok’
(
nuÎ±r
), 
_M_fHasEx¶ic™Tok’
(
çl£
)

8796 ~
_RunAnyP¬am
()

8798 ià(
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_IsV®id
(
_M_exû±iÚR–©edTok’
))

8799 
_M_exû±iÚR–©edTok’
->
_R–—£
();

8801 
	gsk_com¶‘iÚ_ev’t
<
	g_Com¶‘iÚTy³
> 
	g_M_Com¶‘ed
;

8802 
	gCÚcu¼’cy
::
ÿnûÎ©iÚ_tok’_sourû
 
_M_ÿnûÎ©iÚSourû
;

8803 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
* 
_M_exû±iÚR–©edTok’
;

8804 
©omic_size_t
 
	g_M_com¶‘eCouÁ
;

8805 
size_t
 
	g_M_numTasks
;

8806 
boŞ
 
	g_M_fHasEx¶ic™Tok’
;

8809 
	g‹m¶©e
<
ty³Çme
 
	g_Com¶‘iÚTy³
,y³Çm
	g_FunùiÚ
,y³Çm
	g_TaskTy³
>

8810 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_RunAnyP¬am
<
_Com¶‘iÚTy³
> * 
_PP¬am
, cÚ¡ 
_FunùiÚ
 & 
_Func
, 
sk
<
_TaskTy³
>& 
_Task
)

8812 
boŞ
 
	g_IsTok’Cªşed
 = !
_PP¬am
->
_M_fHasEx¶ic™Tok’
 && 
_Task
.
_G‘Im¶
()->
_M_pTok’S‹
 !ğ
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(è&& _Task._G‘Im¶()->_M_pTok’S‹->
_IsCªûËd
();

8813 ià(
	g_Task
.
_G‘Im¶
()->
_IsCom¶‘ed
(è&& !
	g_IsTok’Cªşed
)

8815 
_Func
();

8816 #ià
_MSC_VER
 >= 1800

8817 ià(
	gCÚcu¼’cy
::
d‘as
::
©omic_šüem’t
(
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8819 ià(
_IÁ”lockedInüem’tSizeT
(&
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8822 
d–‘e
 
_PP¬am
;

8827 
_CONCRT_ASSERT
(
_Task
.
_G‘Im¶
()->
_IsCªûËd
(è|| 
_IsTok’Cªşed
);

8828 ià(
	g_Task
.
_G‘Im¶
()->
_HasU£rExû±iÚ
(è&& !
	g_IsTok’Cªşed
)

8830 ià(
	g_PP¬am
->
	g_M_Com¶‘ed
.
_StÜeExû±iÚ
(
_Task
.
_G‘Im¶
()->
_G‘Exû±iÚHŞd”
()))

8833 
	g_PP¬am
->
	g_M_exû±iÚR–©edTok’
 = 
_Task
.
_G‘Im¶
()->
_M_pTok’S‹
;

8834 
_CONCRT_ASSERT
(
_PP¬am
->
_M_exû±iÚR–©edTok’
);

8836 ià(
	g_PP¬am
->
	g_M_exû±iÚR–©edTok’
 !ğ
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
())

8838 
_PP¬am
->
_M_exû±iÚR–©edTok’
->
_Reã»nû
();

8843 #ià
_MSC_VER
 >= 1800

8844 ià(
	gCÚcu¼’cy
::
d‘as
::
©omic_šüem’t
(
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8846 ià(
_IÁ”lockedInüem’tSizeT
(&
_PP¬am
->
_M_com¶‘eCouÁ
è=ğ_PP¬am->
_M_numTasks
)

8850 ià(!
_PP¬am
->
_M_Com¶‘ed
.
_IsTrigg”ed
())

8853 ià(!
_PP¬am
->
_M_fHasEx¶ic™Tok’
)

8855 ià(
_PP¬am
->
_M_exû±iÚR–©edTok’
)

8857 
d‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, _PP¬am->
_M_exû±iÚR–©edTok’
);

8863 
	gd‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
_Task
.
_G‘Im¶
()->
_M_pTok’S‹
);

8867 
	g_PP¬am
->
	g_M_Com¶‘ed
.
_Cªûl
();

8869 
d–‘e
 
	g_PP¬am
;

8874 
	g‹m¶©e
<
ty³Çme
 
	g_EËm’tTy³
,y³Çm
	g_I‹¿tÜ
>

8875 
	s_Wh’AnyIm¶


8877 #ià
_MSC_VER
 >= 1800

8878 
	gsk
<
	g¡d
::
·œ
<
_EËm’tTy³
, 
	gsize_t
>> 
_P”fÜm
(cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8880 
	gsk
<
	g¡d
::
·œ
<
_EËm’tTy³
, 
	gsize_t
>> 
_P”fÜm
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8883 ià(
	g_Begš
 =ğ
_End
)

8885 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("when_any(begin,ƒnd) cannot be called on‡nƒmpty container.");

8887 #ià
_MSC_VER
 >= 1800

8888 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
 = 
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
(è? _TaskO±iÚs.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(è: 
nuÎ±r
;

8890 autØ
	g_PP¬am
 = 
Ãw
 
_RunAnyP¬am
<
¡d
::
·œ
<¡d::·œ<
_EËm’tTy³
, 
	gsize_t
>, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>>();

8892 ià(
	g_PTok’S‹
)

8894 
	gd‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
_PTok’S‹
);

8895 
	g_PP¬am
->
	g_M_fHasEx¶ic™Tok’
 = 
Œue
;

8897 #ià
_MSC_VER
 >= 1800

8898 
sk_İtiÚs
 
_O±iÚs
(
_TaskO±iÚs
);

8899 
	g_O±iÚs
.
£t_ÿnûÎ©iÚ_tok’
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

8900 
	gsk
<
	g¡d
::
·œ
<
¡d
::·œ<
_EËm’tTy³
, 
	gsize_t
>, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, 
_O±iÚs
);

8902 
	gsk
<
	g¡d
::
·œ
<
¡d
::·œ<
_EËm’tTy³
, 
	gsize_t
>, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, _PP¬am->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

8903 
	g_Any_sks_com¶‘ed
.
_G‘Im¶
()->
	g_M_fRuÁimeAgg»g©e
 = 
Œue
;

8906 autØ
	g_CªûÎ©iÚSourû
 = 
_PP¬am
->
_M_ÿnûÎ©iÚSourû
;

8908 
	g_PP¬am
->
	g_M_numTasks
 = 
¡©ic_ÿ¡
<
size_t
>(
¡d
::
di¡ªû
(
_Begš
, 
_End
));

8909 
size_t
 
	gšdex
 = 0;

8910 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8912 ià(
	g_PTask
->
is_­¬tm’t_aw¬e
())

8914 
	g_Any_sks_com¶‘ed
.
_S‘Async
();

8917 
	g_PTask
->
_Th’
([
_PP¬am
, 
šdex
](
sk
<
_EËm’tTy³
> 
_ResuÉTask
è-> 
HRESULT
 {

8918 #ià
_MSC_VER
 >= 1800

8919 autØ
_PP¬amCİy
 = 
_PP¬am
;

8920 autØ
_IndexCİy
 = 
šdex
;

8921 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬amCİy
, 
_IndexCİy
]() {

8922 
_PP¬amCİy
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(¡d::make_·œ(
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
(), 
_IndexCİy
), _ResuÉTask._G‘Im¶()->
_M_pTok’S‹
));

8925 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬am
, 
šdex
]() {

8926 
_PP¬am
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(¡d::make_·œ(
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
(), 
šdex
), _ResuÉTask._G‘Im¶()->
_M_pTok’S‹
));

8929 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

8930  
S_OK
;

8931 #ià
_MSC_VER
 >= 1800

8932 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

8934 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

8936 
	gšdex
++;

8940  
	g_Any_sks_com¶‘ed
.
_Th’
([=](
¡d
::
·œ
<¡d::·œ<
_EËm’tTy³
, 
size_t
>, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *> 
_ResuÉ
, std::·œ<_EËm’tTy³, size_t>* 
»tV®
è-> 
HRESULT
 {

8941 
_CONCRT_ASSERT
(
_ResuÉ
.
£cÚd
);

8942 ià(!
_PTok’S‹
)

8944 
d‘as
::
_JošAÎTok’s_Add
(
_CªûÎ©iÚSourû
, 
_ResuÉ
.
£cÚd
);

8946 *
»tV®
 = 
_ResuÉ
.
fœ¡
;

8947  
S_OK
;

8948 #ià
_MSC_VER
 >= 1800

8949 }, 
nuÎ±r
);

8951 }, 
	gnuÎ±r
, 
	gŒue
);

8956 
	g‹m¶©e
<
ty³Çme
 
	g_I‹¿tÜ
>

8957 
	g_Wh’AnyIm¶
<, 
	g_I‹¿tÜ
>

8959 #ià
_MSC_VER
 >= 1800

8960 
	gsk
<
	gsize_t
> 
_P”fÜm
(cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8962 
	gsk
<
	gsize_t
> 
_P”fÜm
(
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
, 
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

8965 ià(
	g_Begš
 =ğ
_End
)

8967 
throw
 
CÚcu¼’cy
::
šv®id_İ”©iÚ
("when_any(begin,ƒnd) cannot be called on‡nƒmpty container.");

8969 #ià
_MSC_VER
 >= 1800

8970 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *
_PTok’S‹
 = 
_TaskO±iÚs
.
has_ÿnûÎ©iÚ_tok’
(è? _TaskO±iÚs.
g‘_ÿnûÎ©iÚ_tok’
().
_G‘Im¶V®ue
(è: 
nuÎ±r
;

8972 autØ
	g_PP¬am
 = 
Ãw
 
_RunAnyP¬am
<
¡d
::
·œ
<
size_t
, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>>();

8974 ià(
	g_PTok’S‹
)

8976 
	gd‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
_PTok’S‹
);

8977 
	g_PP¬am
->
	g_M_fHasEx¶ic™Tok’
 = 
Œue
;

8980 #ià
_MSC_VER
 >= 1800

8981 
sk_İtiÚs
 
_O±iÚs
(
_TaskO±iÚs
);

8982 
	g_O±iÚs
.
£t_ÿnûÎ©iÚ_tok’
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

8983 
	gsk
<
	g¡d
::
·œ
<
size_t
, 
	g_CªûÎ©iÚTok’S‹
 *>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, 
_O±iÚs
);

8985 
	gsk
<
	g¡d
::
·œ
<
size_t
, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, _PP¬am->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

8988 autØ
	g_CªûÎ©iÚSourû
 = 
_PP¬am
->
_M_ÿnûÎ©iÚSourû
;

8990 
	g_PP¬am
->
	g_M_numTasks
 = 
¡©ic_ÿ¡
<
size_t
>(
¡d
::
di¡ªû
(
_Begš
, 
_End
));

8991 
size_t
 
	gšdex
 = 0;

8992 autØ
	g_PTask
 = 
_Begš
; _PTask !ğ
_End
; ++_PTask)

8994 ià(
	g_PTask
->
is_­¬tm’t_aw¬e
())

8996 
	g_Any_sks_com¶‘ed
.
_S‘Async
();

8999 
	g_PTask
->
_Th’
([
_PP¬am
, 
šdex
](
sk
<> 
_ResuÉTask
è-> 
HRESULT
 {

9000 #ià
_MSC_VER
 >= 1800

9001 autØ
_PP¬amCİy
 = 
_PP¬am
;

9002 autØ
_IndexCİy
 = 
šdex
;

9003 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬amCİy
, 
_IndexCİy
]() {

9004 
_PP¬amCİy
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_IndexCİy
, 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9007 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬am
, 
šdex
]() {

9008 
_PP¬am
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
šdex
, 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9011 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

9012  
S_OK
;

9013 #ià
_MSC_VER
 >= 1800

9014 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9016 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

9019 
	gšdex
++;

9023  
	g_Any_sks_com¶‘ed
.
_Th’
([=](
¡d
::
·œ
<
size_t
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *> 
_ResuÉ
, size_t* 
»tV®
è-> 
HRESULT
 {

9024 
_CONCRT_ASSERT
(
_ResuÉ
.
£cÚd
);

9025 ià(!
_PTok’S‹
)

9027 
d‘as
::
_JošAÎTok’s_Add
(
_CªûÎ©iÚSourû
, 
_ResuÉ
.
£cÚd
);

9029 *
»tV®
 = 
_ResuÉ
.
fœ¡
;

9030  
S_OK
;

9031 #ià
_MSC_VER
 >= 1800

9032 }, 
nuÎ±r
);

9034 }, 
	gnuÎ±r
, 
	gçl£
);

9060 
	g‹m¶©e
<
ty³Çme
 
	g_I‹¿tÜ
>

9061 #ià
_MSC_VER
 >= 1800

9062 autØ
wh’_ªy
(
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
, cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
 =ask_options())

9063 -> 
deşty³
 (
d‘as
::
_Wh’AnyIm¶
<
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
_I‹¿tÜ
>::
v®ue_ty³
::
»suÉ_ty³
, _I‹¿tÜ>::
	$_P”fÜm
(
_TaskO±iÚs
, 
_Begš
, 
_End
))

9065 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	t_I‹¿tÜ
>::
	tv®ue_ty³
::
	t»suÉ_ty³
 
	t_EËm’tTy³
;

9066  
d‘as
::
_Wh’AnyIm¶
<
_EËm’tTy³
, 
_I‹¿tÜ
>::
	`_P”fÜm
(
_TaskO±iÚs
, 
_Begš
, 
_End
);

9067 
	}
}

9069 autØ
wh’_ªy
(
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
)

9070 -> 
deşty³
 (
d‘as
::
_Wh’AnyIm¶
<
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
_I‹¿tÜ
>::
v®ue_ty³
::
»suÉ_ty³
, _I‹¿tÜ>::
	$_P”fÜm
(
nuÎ±r
, 
_Begš
, 
_End
))

9072 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	t_I‹¿tÜ
>::
	tv®ue_ty³
::
	t»suÉ_ty³
 
	t_EËm’tTy³
;

9073  
d‘as
::
_Wh’AnyIm¶
<
_EËm’tTy³
, 
_I‹¿tÜ
>::
	`_P”fÜm
(
nuÎ±r
, 
_Begš
, 
_End
);

9074 
	}
}

9101 
	g‹m¶©e
<
ty³Çme
 
	g_I‹¿tÜ
>

9102 autØ
wh’_ªy
(
_I‹¿tÜ
 
_Begš
, _I‹¿tÜ 
_End
, 
CÚcu¼’cy
::
ÿnûÎ©iÚ_tok’
 
_CªûÎ©iÚTok’
)

9103 -> 
deşty³
 (
d‘as
::
_Wh’AnyIm¶
<
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
_I‹¿tÜ
>::
v®ue_ty³
::
»suÉ_ty³
, _I‹¿tÜ>::
_P”fÜm
(
_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
_Begš
, 
_End
))

9105 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	t_I‹¿tÜ
>::
	tv®ue_ty³
::
	t»suÉ_ty³
 
	t_EËm’tTy³
;

9106  
	gd‘as
::
_Wh’AnyIm¶
<
_EËm’tTy³
, 
	g_I‹¿tÜ
>::
_P”fÜm
(
_CªûÎ©iÚTok’
.
_G‘Im¶V®ue
(), 
_Begš
, 
_End
);

9135 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

9136 
	gsk
<
	g_R‘uºTy³
> 
	gİ”©Ü
||(cÚ¡ask<_R‘uºTy³> & 
	g_Lhs
, cÚ¡ask<_R‘uºTy³> & 
	g_Rhs
)

9138 #ià
_MSC_VER
 >= 1800

9139 autØ
	g_PP¬am
 = 
Ãw
 
d‘as
::
_RunAnyP¬am
<
¡d
::
·œ
<
_R‘uºTy³
, 
	gsize_t
>>();

9141 
	gsk
<
	g¡d
::
·œ
<
_R‘uºTy³
, 
	gsize_t
>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, _PP¬am->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

9144 autØ
	g_R‘uºTask
 = 
_Any_sks_com¶‘ed
.
_Th’
([=](
¡d
::
·œ
<
_R‘uºTy³
, 
size_t
> 
_R‘
, _R‘uºTy³* 
»tV®
è-> 
HRESULT
 {

9145 
_CONCRT_ASSERT
(
_R‘
.
£cÚd
);

9146 
d‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
»š‹½»t_ÿ¡
<
CÚcu¼’cy
::d‘as::
_CªûÎ©iÚTok’S‹
 *>(
_R‘
.
£cÚd
));

9147 *
»tV®
 = 
_R‘
.
fœ¡
;

9148  
S_OK
;

9149 }, 
nuÎ±r
);

9151 autØ
	g_PP¬am
 = 
Ãw
 
d‘as
::
_RunAnyP¬am
<
¡d
::
·œ
<
_R‘uºTy³
, 
	gCÚcu¼’cy
::d‘as::
_CªûÎ©iÚTok’S‹
 *>>();

9153 
	gsk
<
	g¡d
::
·œ
<
_R‘uºTy³
, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, _PP¬am->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

9156 autØ
	g_R‘uºTask
 = 
_Any_sks_com¶‘ed
.
_Th’
([=](
¡d
::
·œ
<
_R‘uºTy³
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *> 
_R‘
, _R‘uºTy³* 
»tV®
è-> 
HRESULT
 {

9157 
_CONCRT_ASSERT
(
_R‘
.
£cÚd
);

9158 
d‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
_R‘
.
£cÚd
);

9159 *
»tV®
 = 
_R‘
.
fœ¡
;

9160  
S_OK
;

9161 }, 
nuÎ±r
, 
çl£
);

9163 ià(
	g_Lhs
.
is_­¬tm’t_aw¬e
(è|| 
	g_Rhs
.is_apartment_aware())

9165 
	g_R‘uºTask
.
_S‘Async
();

9168 
	g_PP¬am
->
	g_M_numTasks
 = 2;

9169 autØ
	g_CÚtšu©iÚ
 = [
_PP¬am
](
sk
<
_R‘uºTy³
> 
_ResuÉTask
è-> 
HRESULT
 {

9170 #ià
_MSC_VER
 >= 1800

9172 autØ
_PP¬amCİy
 = 
_PP¬am
;

9173 autØ
	g_Func
 = [&
_ResuÉTask
, 
_PP¬amCİy
]() {

9174 
	g_PP¬amCİy
->
	g_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
(), 
»š‹½»t_ÿ¡
<
size_t
>(_ResuÉTask._G‘Im¶()->
_M_pTok’S‹
)));

9177 autØ
	g_Func
 = [&
_ResuÉTask
, 
_PP¬am
]() {

9178 
	g_PP¬am
->
	g_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
(), _ResuÉTask._G‘Im¶()->
_M_pTok’S‹
));

9181 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

9182  
	gS_OK
;

9185 #ià
_MSC_VER
 >= 1800

9186 
	g_Lhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9187 
	g_Rhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9189 
	g_Lhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
çl£
);

9190 
	g_Rhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
çl£
);

9192  
	g_R‘uºTask
;

9221 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

9222 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
İ”©Ü
||(cÚ¡ 
sk
<
¡d
::veùÜ<_R‘uºTy³>> & 
_Lhs
, cÚ¡ask<
	g_R‘uºTy³
> & 
	g_Rhs
)

9224 autØ
	g_PP¬am
 = 
Ãw
 
d‘as
::
_RunAnyP¬am
<
¡d
::
·œ
<¡d::
veùÜ
<
_R‘uºTy³
>, 
	gCÚcu¼’cy
::d‘as::
_CªûÎ©iÚTok’S‹
 *>>();

9226 
	gsk
<
	g¡d
::
·œ
<
¡d
::
veùÜ
<
_R‘uºTy³
>, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *>> 
_Any_sks_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, _PP¬am->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

9227 #ià
_MSC_VER
 < 1800

9228 
	g_Any_sks_com¶‘ed
.
_G‘Im¶
()->
	g_M_fRuÁimeAgg»g©e
 = 
Œue
;

9232 autØ
	g_R‘uºTask
 = 
_Any_sks_com¶‘ed
.
_Th’
([=](
¡d
::
·œ
<¡d::
veùÜ
<
_R‘uºTy³
>, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
 *> 
_R‘
, std::veùÜ<_R‘uºTy³>* 
»tV®
è-> 
HRESULT
 {

9233 
_CONCRT_ASSERT
(
_R‘
.
£cÚd
);

9234 
d‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
_R‘
.
£cÚd
);

9235 *
»tV®
 = 
_R‘
.
fœ¡
;

9236  
S_OK
;

9237 }, 
nuÎ±r
, 
Œue
);

9239 ià(
	g_Lhs
.
is_­¬tm’t_aw¬e
(è|| 
	g_Rhs
.is_apartment_aware())

9241 
	g_R‘uºTask
.
_S‘Async
();

9244 
	g_PP¬am
->
	g_M_numTasks
 = 2;

9245 
	g_Lhs
.
_Th’
([
_PP¬am
](
sk
<
¡d
::
veùÜ
<
_R‘uºTy³
>> 
_ResuÉTask
è-> 
HRESULT
 {

9246 #ià
_MSC_VER
 >= 1800

9248 autØ
_PP¬amCİy
 = 
_PP¬am
;

9249 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬amCİy
]() {

9250 autØ
_ResuÉ
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

9251 
_PP¬amCİy
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_ResuÉ
, 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9254 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬am
]() {

9255 
¡d
::
veùÜ
<
_R‘uºTy³
> 
_ResuÉ
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

9256 
_PP¬am
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_ResuÉ
, 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9259 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

9260  
S_OK
;

9261 #ià
_MSC_VER
 >= 1800

9262 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9264 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

9266 
	g_Rhs
.
_Th’
([
_PP¬am
](
sk
<
_R‘uºTy³
> 
_ResuÉTask
è-> 
HRESULT
 {

9267 #ià
_MSC_VER
 >= 1800

9269 
_R‘uºTy³
 
	t_R‘uºTy³Dev10
;

9270 autØ
_PP¬amCİy
 = 
_PP¬am
;

9271 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬amCİy
]() {

9272 autØ
_ResuÉ
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

9274 
¡d
::
veùÜ
<
_R‘uºTy³Dev10
> 
_Vec
;

9275 
_Vec
.
push_back
(
_ResuÉ
);

9276 
_PP¬amCİy
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_Vec
, 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9279 autØ
_Func
 = [&
_ResuÉTask
, 
_PP¬am
]() {

9280 
_R‘uºTy³
 
_ResuÉ
 = 
_ResuÉTask
.
_G‘Im¶
()->
_G‘ResuÉ
();

9282 
¡d
::
veùÜ
<
_R‘uºTy³
> 
_Vec
;

9283 
_Vec
.
push_back
(
_ResuÉ
);

9284 
_PP¬am
->
_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
_Vec
, 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9287 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

9288  
S_OK
;

9289 #ià
_MSC_VER
 >= 1800

9290 }, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9292 }, 
	gCÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
	gçl£
);

9294  
	g_R‘uºTask
;

9323 
	g‹m¶©e
<
ty³Çme
 
	g_R‘uºTy³
>

9324 
	gsk
<
	g¡d
::
veùÜ
<
_R‘uºTy³
>> 
İ”©Ü
||(cÚ¡ 
sk
<_R‘uºTy³> & 
_Lhs
, cÚ¡ask<¡d::veùÜ<_R‘uºTy³>> & 
_Rhs
)

9326  
_Rhs
 || 
_Lhs
;

9355 
šlše
 
	gsk
<> 
	gİ”©Ü
||(cÚ¡ask<> & 
	g_Lhs
, cÚ¡ask<> & 
	g_Rhs
)

9357 autØ
	g_PP¬am
 = 
Ãw
 
d‘as
::
_RunAnyP¬am
<
¡d
::
·œ
<d‘as::
_Un™_ty³
, 
	gCÚcu¼’cy
::d‘as::
_CªûÎ©iÚTok’S‹
 *>>();

9359 
	gsk
<
	g¡d
::
·œ
<
d‘as
::
_Un™_ty³
, 
	gCÚcu¼’cy
::d‘as::
_CªûÎ©iÚTok’S‹
 *>> 
_Any_sk_com¶‘ed
(
_PP¬am
->
_M_Com¶‘ed
, _PP¬am->
_M_ÿnûÎ©iÚSourû
.
g‘_tok’
());

9362 autØ
	g_R‘uºTask
 = 
_Any_sk_com¶‘ed
.
_Th’
([=](
¡d
::
·œ
<
d‘as
::
_Un™_ty³
, 
CÚcu¼’cy
::d‘as::
_CªûÎ©iÚTok’S‹
 *> 
_R‘
è-> 
HRESULT
 {

9363 
_CONCRT_ASSERT
(
_R‘
.
£cÚd
);

9364 
d‘as
::
_JošAÎTok’s_Add
(
_PP¬am
->
_M_ÿnûÎ©iÚSourû
, 
_R‘
.
£cÚd
);

9365  
S_OK
;

9366 #ià
_MSC_VER
 >= 1800

9367 }, 
nuÎ±r
);

9369 }, 
	gnuÎ±r
, 
	gçl£
);

9372 ià(
	g_Lhs
.
is_­¬tm’t_aw¬e
(è|| 
	g_Rhs
.is_apartment_aware())

9374 
	g_R‘uºTask
.
_S‘Async
();

9377 
	g_PP¬am
->
	g_M_numTasks
 = 2;

9378 autØ
	g_CÚtšu©iÚ
 = [
_PP¬am
](
sk
<> 
_ResuÉTask
è
mubË
 -> 
HRESULT
 {

9380 autØ
_PP¬am1
 = 
_PP¬am
;

9381 autØ
	g_Func
 = [&
_ResuÉTask
, 
_PP¬am1
]() {

9382 
	g_PP¬am1
->
	g_M_Com¶‘ed
.
£t
(
¡d
::
make_·œ
(
d‘as
::
_Un™_ty³
(), 
_ResuÉTask
.
_G‘Im¶
()->
_M_pTok’S‹
));

9384 
_Wh’AnyCÚtšu©iÚW¿µ”
(
_PP¬am
, 
_Func
, 
_ResuÉTask
);

9385  
	gS_OK
;

9388 #ià
_MSC_VER
 >= 1800

9389 
	g_Lhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9390 
	g_Rhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
());

9392 
	g_Lhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
çl£
);

9393 
	g_Rhs
.
_Th’
(
_CÚtšu©iÚ
, 
CÚcu¼’cy
::
d‘as
::
_CªûÎ©iÚTok’S‹
::
_NÚe
(), 
çl£
);

9396  
	g_R‘uºTask
;

9399 #ià
_MSC_VER
 >= 1800

9400 
	g‹m¶©e
<
ty³Çme
 
	g_Ty
>

9401 
	gsk
<
	g_Ty
> 
sk_äom_»suÉ
(
_Ty
 
_P¬am
, cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
 = 
	$sk_İtiÚs
())

9403 
sk_com¶‘iÚ_ev’t
<
_Ty
> 
_Tû
;

9404 
_Tû
.
	`£t
(
_P¬am
);

9405  
ü—‹_sk
<
_Ty
>(
_Tû
, 
_TaskO±iÚs
);

9406 
	}
}

9409 #ià
_MSC_VER
 == 1600

9410 
šlše
 
	gsk
<
	gboŞ
> 
	$sk_äom_»suÉ
(
boŞ
 
_P¬am
)

9412 
sk_com¶‘iÚ_ev’t
<
boŞ
> 
_Tû
;

9413 
_Tû
.
	`£t
(
_P¬am
);

9414  
ü—‹_sk
<
boŞ
>(
_Tû
, 
	`sk_İtiÚs
());

9415 
	}
}

9417 
šlše
 
	gsk
<> 
sk_äom_»suÉ
(cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
 = 
	$sk_İtiÚs
())

9419 
sk_com¶‘iÚ_ev’t
<> 
_Tû
;

9420 
_Tû
.
	`£t
();

9421  
ü—‹_sk
<>(
_Tû
, 
_TaskO±iÚs
);

9422 
	}
}

9424 
	g‹m¶©e
<
ty³Çme
 
	g_TaskTy³
,y³Çm
	g_ExTy³
>

9425 
	gsk
<
	g_TaskTy³
> 
sk_äom_exû±iÚ
(
_ExTy³
 
_Exû±iÚ
, cÚ¡ 
sk_İtiÚs
& 
_TaskO±iÚs
 = 
	$sk_İtiÚs
())

9427 
sk_com¶‘iÚ_ev’t
<
_TaskTy³
> 
_Tû
;

9428 
_Tû
.
	`£t_exû±iÚ
(
_Exû±iÚ
);

9429  
ü—‹_sk
<
_TaskTy³
>(
_Tû
, 
_TaskO±iÚs
);

9430 
	}
}

9432 
Çme¥aû
 
	gd‘as


9441 
šlše


9442 
	gsk
<
	gboŞ
> 
do_whe
(
¡d
::
funùiÚ
<
sk
<
boŞ
>()> 
func
)

9444 
sk
<
boŞ
> 
fœ¡
 = 
func
();

9445  
	gfœ¡
.
th’
([=](
boŞ
 
gu¬d
, 
sk
<boŞ>* 
»tV®
è-> 
HRESULT
 {

9446 ià(
gu¬d
)

9447 *
»tV®
 = 
do_whe
(
func
);

9449 *
»tV®
 = 
fœ¡
;

9450  
S_OK
;

9459 
Çme¥aû
 
	gcÚcu¼’cy_wš¹
 = 
CÚcu¼’cy_wš¹
;

9461 #´agm¨
pİ_maüo
("new")

9462 #´agm¨
w¬nšg
(
pİ
)

9463 #´agm¨
·ck
(
pİ
)

	@precomp.hpp

42 #iâdeà
__VIDEOIO_H_


43 
	#__VIDEOIO_H_


	)

45 
	~"İ’cv2/videoio.hµ
"

47 
	~"İ’cv2/cÜe/ut™y.hµ
"

48 
	~"İ’cv2/cÜe/´iv©e.hµ
"

50 
	~"İ’cv2/imgcodecs.hµ
"

52 
	~"İ’cv2/img´oc/img´oc_c.h
"

53 
	~"İ’cv2/imgcodecs/imgcodecs_c.h
"

54 
	~"İ’cv2/videoio/videoio_c.h
"

56 
	~<¡dlib.h
>

57 
	~<¡dio.h
>

58 
	~<¡ršg.h
>

59 
	~<lim™s.h
>

60 
	~<ùy³.h
>

61 
	~<as£¹.h
>

63 #ià
defšed
 
WIN32
 || defšed 
WINCE


64 #ià!
defšed
 
_WIN32_WINNT


65 #ifdeà
HAVE_MSMF


66 
	#_WIN32_WINNT
 0x0600

67 #–£

	)

68 
	#_WIN32_WINNT
 0x0500

71 

	)

72 
	~<wšdows.h
>

73 #undeà
sm®l


74 #undeà
mš


75 #undeà
max


76 #undeà
abs


79 
	#__BEGIN__
 
__CV_BEGIN__


	)

80 
	#__END__
 
__CV_END__


	)

81 
	#EXIT
 
__CV_EXIT__


	)

85 
	sCvC­tu»


87 
	mvœtu®
 ~
CvC­tu»
() {}

88 
vœtu®
 
g‘Prİ”ty
() const {  0; }

89 
vœtu®
 
boŞ
 
£tPrİ”ty
(, ) {  0; }

90 
vœtu®
 
boŞ
 
g¿bF¿me
(è{  
	mŒue
; }

91 
vœtu®
 
I¶Image
* 
»Œ›veF¿me
() {  0; }

92 
vœtu®
 
g‘C­tu»Domaš
(è{  
	mCV_CAP_ANY
; }

97 
	sCvVideoWr™”


99 
	mvœtu®
 ~
CvVideoWr™”
() {}

100 
vœtu®
 
boŞ
 
wr™eF¿me
(cÚ¡ 
I¶Image
*è{  
	mçl£
; }

103 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_V4L
Ğ
šdex
 );

104 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_DC1394
Ğ
šdex
 );

105 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_DC1394_2
Ğ
šdex
 );

106 
CvC­tu»
* 
cvC»©eCam”aC­tu»_MIL
Ğ
šdex
 );

107 
CvC­tu»
* 
cvC»©eCam”aC­tu»_Gigª‘ix
Ğ
šdex
 );

108 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_CMU
Ğ
šdex
 );

109 
CV_IMPL
 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_TYZX
Ğ
šdex
 );

110 
CvC­tu»
* 
cvC»©eFeC­tu»_Wš32
ĞcÚ¡ * 
f’ame
 );

111 
CvC­tu»
* 
cvC»©eCam”aC­tu»_VFW
Ğ
šdex
 );

112 
CvC­tu»
* 
cvC»©eFeC­tu»_VFW
ĞcÚ¡ * 
f’ame
 );

113 
CvVideoWr™”
* 
cvC»©eVideoWr™”_Wš32
ĞcÚ¡ * 
f’ame
, 
fourcc
,

114 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

115 
CvVideoWr™”
* 
cvC»©eVideoWr™”_VFW
ĞcÚ¡ * 
f’ame
, 
fourcc
,

116 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

117 
CvC­tu»
* 
cvC»©eCam”aC­tu»_DShow
Ğ
šdex
 );

118 
CvC­tu»
* 
cvC»©eCam”aC­tu»_MSMF
Ğ
šdex
 );

119 
CvC­tu»
* 
cvC»©eFeC­tu»_MSMF
 (cÚ¡ * 
f’ame
);

120 
CvVideoWr™”
* 
cvC»©eVideoWr™”_MSMF
ĞcÚ¡ * 
f’ame
, 
fourcc
,

121 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

122 
CvC­tu»
* 
cvC»©eCam”aC­tu»_O³nNI
Ğ
šdex
 );

123 
CvC­tu»
* 
cvC»©eFeC­tu»_O³nNI
ĞcÚ¡ * 
f’ame
 );

124 
CvC­tu»
* 
cvC»©eCam”aC­tu»_Android
Ğ
šdex
 );

125 
CvC­tu»
* 
cvC»©eCam”aC­tu»_XIMEA
Ğ
šdex
 );

126 
CvC­tu»
* 
cvC»©eCam”aC­tu»_AVFound©iÚ
(
šdex
);

128 
CvC­tu»
* 
cvC»©eFeC­tu»_Images
(cÚ¡ * 
f’ame
);

129 
CvVideoWr™”
* 
cvC»©eVideoWr™”_Images
(cÚ¡ * 
f’ame
);

131 
CvC­tu»
* 
cvC»©eFeC­tu»_XINE
 (cÚ¡ * 
f’ame
);

134 
	#CV_CAP_GSTREAMER_1394
 0

	)

135 
	#CV_CAP_GSTREAMER_V4L
 1

	)

136 
	#CV_CAP_GSTREAMER_V4L2
 2

	)

137 
	#CV_CAP_GSTREAMER_FILE
 3

	)

139 
CvC­tu»
* 
cvC»©eC­tu»_GSŒ—m”
(
ty³
, cÚ¡ *
f’ame
);

140 
CvC­tu»
* 
cvC»©eFeC­tu»_FFMPEG_´oxy
(cÚ¡ * 
f’ame
);

143 
CvVideoWr™”
* 
cvC»©eVideoWr™”_FFMPEG_´oxy
ĞcÚ¡ * 
f’ame
, 
fourcc
,

144 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

146 
CvC­tu»
 * 
cvC»©eFeC­tu»_QT
 (cÚ¡ * 
f’ame
);

147 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_QT
 (cÚ¡ 
šdex
);

149 
CvVideoWr™”
* 
cvC»©eVideoWr™”_QT
 ( cÚ¡ * 
f’ame
, 
fourcc
,

150 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

152 
CvC­tu»
* 
cvC»©eFeC­tu»_AVFound©iÚ
 (cÚ¡ * 
f’ame
);

153 
CvVideoWr™”
* 
cvC»©eVideoWr™”_AVFound©iÚ
ĞcÚ¡ * 
f’ame
, 
fourcc
,

154 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

157 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_Uniÿp
 (cÚ¡ 
šdex
);

158 
CvC­tu»
 * 
cvC»©eCam”aC­tu»_PvAPI
 (cÚ¡ 
šdex
);

159 
CvVideoWr™”
* 
cvC»©eVideoWr™”_GSŒ—m”
ĞcÚ¡ * 
f’ame
, 
fourcc
,

160 
ås
, 
CvSize
 
äameSize
, 
is_cŞÜ
 );

162 
Çme¥aû
 
	gcv


164 şas 
	cIVideoC­tu»


166 
	gpublic
:

167 
vœtu®
 ~
IVideoC­tu»
() {}

168 
vœtu®
 
g‘Prİ”ty
() const {  0; }

169 
vœtu®
 
boŞ
 
£tPrİ”ty
(, è{  
	gçl£
; }

170 
vœtu®
 
boŞ
 
g¿bF¿me
() = 0;

171 
vœtu®
 
boŞ
 
»Œ›veF¿me
(, 
OuutA¼ay
) = 0;

172 
vœtu®
 
boŞ
 
isO³Ãd
() const = 0;

173 
vœtu®
 
g‘C­tu»Domaš
(è{  
	gCAP_ANY
; }

176 şas 
	cIVideoWr™”


178 
	gpublic
:

179 
vœtu®
 ~
IVideoWr™”
() {}

180 
vœtu®
 
g‘Prİ”ty
() const {  0; }

181 
vœtu®
 
boŞ
 
£tPrİ”ty
(, è{  
	gçl£
; }

183 
vœtu®
 
boŞ
 
isO³Ãd
() const = 0;

184 
vœtu®
 
wr™e
(
IÅutA¼ay
) = 0;

187 
	gPŒ
<
	gIVideoC­tu»
> 
ü—‹MÙiÚJ³gC­tu»
(cÚ¡ 
SŒšg
& 
f’ame
);

188 
	gPŒ
<
	gIVideoWr™”
> 
ü—‹MÙiÚJ³gWr™”
ĞcÚ¡ 
SŒšg
& 
f’ame
, 
ås
, 
Size
 
äameSize
, 
boŞ
 
iscŞÜ
 );

190 
	gPŒ
<
	gIVideoC­tu»
> 
ü—‹GPhÙo2C­tu»
(
šdex
);

191 
	gPŒ
<
	gIVideoC­tu»
> 
ü—‹GPhÙo2C­tu»
(cÚ¡ 
SŒšg
& 
deviûName
);

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


120 #undeà
¡©ic_as£¹


121 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/dc1394/dc1394.h

34 #iâdeà
__DC1394_H__


35 
	#__DC1394_H__


	)

45 
	~<dc1394/ty³s.h
>

46 
	~<dc1394/ÿm”a.h
>

47 
	~<dc1394/cÚŒŞ.h
>

48 
	~<dc1394/ÿ±u».h
>

49 
	~<dc1394/cÚv”siÚs.h
>

50 
	~<dc1394/fÜm©7.h
>

51 
	~<dc1394/iso.h
>

52 
	~<dc1394/log.h
>

53 
	~<dc1394/»gi¡”.h
>

54 
	~<dc1394/video.h
>

55 
	~<dc1394/uts.h
>

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

40 #iâdeà
__mode_t_defšed


41 
__mode_t
 
	tmode_t
;

42 
	#__mode_t_defšed


	)

45 #iâdeà
__off_t_defšed


46 #iâdeà
__USE_FILE_OFFSET64


47 
__off_t
 
	toff_t
;

49 
__off64_t
 
	toff_t
;

51 
	#__off_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


55 
__off64_t
 
	toff64_t
;

56 
	#__off64_t_defšed


	)

59 #iâdeà
__pid_t_defšed


60 
__pid_t
 
	tpid_t
;

61 
	#__pid_t_defšed


	)

65 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


66 
	#__Ãed_time¥ec


	)

67 
	~<time.h
>

68 
	~<b™s/¡©.h
>

70 
	#S_IFMT
 
__S_IFMT


	)

71 
	#S_IFDIR
 
__S_IFDIR


	)

72 
	#S_IFCHR
 
__S_IFCHR


	)

73 
	#S_IFBLK
 
__S_IFBLK


	)

74 
	#S_IFREG
 
__S_IFREG


	)

75 #ifdeà
__S_IFIFO


76 
	#S_IFIFO
 
__S_IFIFO


	)

78 #ifdeà
__S_IFLNK


79 
	#S_IFLNK
 
__S_IFLNK


	)

81 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


82 
	#S_IFSOCK
 
__S_IFSOCK


	)

87 
	#S_ISUID
 
__S_ISUID


	)

88 
	#S_ISGID
 
__S_ISGID


	)

90 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


92 
	#S_ISVTX
 
__S_ISVTX


	)

95 
	#S_IRUSR
 
__S_IREAD


	)

96 
	#S_IWUSR
 
__S_IWRITE


	)

97 
	#S_IXUSR
 
__S_IEXEC


	)

99 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

101 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

102 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

103 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

105 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

107 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

108 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

109 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

111 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

114 #ifdef 
__USE_MISC


115 #iâdeà
R_OK


118 
	#R_OK
 4

	)

119 
	#W_OK
 2

	)

120 
	#X_OK
 1

	)

121 
	#F_OK
 0

	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#SEEK_SET
 0

	)

128 
	#SEEK_CUR
 1

	)

129 
	#SEEK_END
 2

	)

137 
fú
 (
__fd
, 
__cmd
, ...);

145 #iâdeà
__USE_FILE_OFFSET64


146 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

148 #ifdeà
__REDIRECT


149 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

150 
	`__nÚnuÎ
 ((1));

152 
	#İ’
 
İ’64


	)

155 #ifdeà
__USE_LARGEFILE64


156 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

159 #ifdeà
__USE_ATFILE


169 #iâdeà
__USE_FILE_OFFSET64


170 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

171 
	`__nÚnuÎ
 ((2));

173 #ifdeà
__REDIRECT


174 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

175 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

177 
	#İ’©
 
İ’©64


	)

180 #ifdeà
__USE_LARGEFILE64


181 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

182 
	`__nÚnuÎ
 ((2));

191 #iâdeà
__USE_FILE_OFFSET64


192 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

194 #ifdeà
__REDIRECT


195 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

196 
ü—t64
è
	`__nÚnuÎ
 ((1));

198 
	#ü—t
 
ü—t64


	)

201 #ifdeà
__USE_LARGEFILE64


202 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

205 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

206 && !
defšed
 
__USE_POSIX
))

215 
	#F_ULOCK
 0

	)

216 
	#F_LOCK
 1

	)

217 
	#F_TLOCK
 2

	)

218 
	#F_TEST
 3

	)

220 #iâdeà
__USE_FILE_OFFSET64


221 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

223 #ifdeà
__REDIRECT


224 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

226 
	#lockf
 
lockf64


	)

229 #ifdeà
__USE_LARGEFILE64


230 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

234 #ifdeà
__USE_XOPEN2K


237 #iâdeà
__USE_FILE_OFFSET64


238 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

239 
__advi£
è
__THROW
;

241 #ifdeà
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

243 
__off64_t
 
__Ën
, 
__advi£
),

244 
posix_çdvi£64
);

246 
	#posix_çdvi£
 
posix_çdvi£64


	)

249 #ifdeà
__USE_LARGEFILE64


250 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

251 
__advi£
è
__THROW
;

259 #iâdeà
__USE_FILE_OFFSET64


260 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

262 #ifdeà
__REDIRECT


263 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

264 
__off64_t
 
__Ën
),

265 
posix_çÎoÿ‹64
);

267 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

270 #ifdeà
__USE_LARGEFILE64


271 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

277 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

278 && 
defšed
 
__va_¬g_·ck_Ën


279 
	~<b™s/fú2.h
>

282 
__END_DECLS


	@/usr/include/libavcodec/avcodec.h

21 #iâdeà
AVCODEC_AVCODEC_H


22 
	#AVCODEC_AVCODEC_H


	)

29 
	~<”ºo.h
>

30 
	~"libavut/§m¶efmt.h
"

31 
	~"libavut/avut.h
"

32 
	~"libavut/ıu.h
"

33 
	~"libavut/diù.h
"

34 
	~"libavut/log.h
"

35 
	~"libavut/pixfmt.h
"

36 
	~"libavut/¿tiÚ®.h
"

38 
	~"libavcodec/v”siÚ.h
"

95 
	eAVCodecID
 {

96 
	mAV_CODEC_ID_NONE
,

99 
	mAV_CODEC_ID_MPEG1VIDEO
,

100 
	mAV_CODEC_ID_MPEG2VIDEO
,

101 
	mAV_CODEC_ID_MPEG2VIDEO_XVMC
,

102 
	mAV_CODEC_ID_H261
,

103 
	mAV_CODEC_ID_H263
,

104 
	mAV_CODEC_ID_RV10
,

105 
	mAV_CODEC_ID_RV20
,

106 
	mAV_CODEC_ID_MJPEG
,

107 
	mAV_CODEC_ID_MJPEGB
,

108 
	mAV_CODEC_ID_LJPEG
,

109 
	mAV_CODEC_ID_SP5X
,

110 
	mAV_CODEC_ID_JPEGLS
,

111 
	mAV_CODEC_ID_MPEG4
,

112 
	mAV_CODEC_ID_RAWVIDEO
,

113 
	mAV_CODEC_ID_MSMPEG4V1
,

114 
	mAV_CODEC_ID_MSMPEG4V2
,

115 
	mAV_CODEC_ID_MSMPEG4V3
,

116 
	mAV_CODEC_ID_WMV1
,

117 
	mAV_CODEC_ID_WMV2
,

118 
	mAV_CODEC_ID_H263P
,

119 
	mAV_CODEC_ID_H263I
,

120 
	mAV_CODEC_ID_FLV1
,

121 
	mAV_CODEC_ID_SVQ1
,

122 
	mAV_CODEC_ID_SVQ3
,

123 
	mAV_CODEC_ID_DVVIDEO
,

124 
	mAV_CODEC_ID_HUFFYUV
,

125 
	mAV_CODEC_ID_CYUV
,

126 
	mAV_CODEC_ID_H264
,

127 
	mAV_CODEC_ID_INDEO3
,

128 
	mAV_CODEC_ID_VP3
,

129 
	mAV_CODEC_ID_THEORA
,

130 
	mAV_CODEC_ID_ASV1
,

131 
	mAV_CODEC_ID_ASV2
,

132 
	mAV_CODEC_ID_FFV1
,

133 
	mAV_CODEC_ID_4XM
,

134 
	mAV_CODEC_ID_VCR1
,

135 
	mAV_CODEC_ID_CLJR
,

136 
	mAV_CODEC_ID_MDEC
,

137 
	mAV_CODEC_ID_ROQ
,

138 
	mAV_CODEC_ID_INTERPLAY_VIDEO
,

139 
	mAV_CODEC_ID_XAN_WC3
,

140 
	mAV_CODEC_ID_XAN_WC4
,

141 
	mAV_CODEC_ID_RPZA
,

142 
	mAV_CODEC_ID_CINEPAK
,

143 
	mAV_CODEC_ID_WS_VQA
,

144 
	mAV_CODEC_ID_MSRLE
,

145 
	mAV_CODEC_ID_MSVIDEO1
,

146 
	mAV_CODEC_ID_IDCIN
,

147 
	mAV_CODEC_ID_8BPS
,

148 
	mAV_CODEC_ID_SMC
,

149 
	mAV_CODEC_ID_FLIC
,

150 
	mAV_CODEC_ID_TRUEMOTION1
,

151 
	mAV_CODEC_ID_VMDVIDEO
,

152 
	mAV_CODEC_ID_MSZH
,

153 
	mAV_CODEC_ID_ZLIB
,

154 
	mAV_CODEC_ID_QTRLE
,

155 
	mAV_CODEC_ID_SNOW
,

156 
	mAV_CODEC_ID_TSCC
,

157 
	mAV_CODEC_ID_ULTI
,

158 
	mAV_CODEC_ID_QDRAW
,

159 
	mAV_CODEC_ID_VIXL
,

160 
	mAV_CODEC_ID_QPEG
,

161 
	mAV_CODEC_ID_PNG
,

162 
	mAV_CODEC_ID_PPM
,

163 
	mAV_CODEC_ID_PBM
,

164 
	mAV_CODEC_ID_PGM
,

165 
	mAV_CODEC_ID_PGMYUV
,

166 
	mAV_CODEC_ID_PAM
,

167 
	mAV_CODEC_ID_FFVHUFF
,

168 
	mAV_CODEC_ID_RV30
,

169 
	mAV_CODEC_ID_RV40
,

170 
	mAV_CODEC_ID_VC1
,

171 
	mAV_CODEC_ID_WMV3
,

172 
	mAV_CODEC_ID_LOCO
,

173 
	mAV_CODEC_ID_WNV1
,

174 
	mAV_CODEC_ID_AASC
,

175 
	mAV_CODEC_ID_INDEO2
,

176 
	mAV_CODEC_ID_FRAPS
,

177 
	mAV_CODEC_ID_TRUEMOTION2
,

178 
	mAV_CODEC_ID_BMP
,

179 
	mAV_CODEC_ID_CSCD
,

180 
	mAV_CODEC_ID_MMVIDEO
,

181 
	mAV_CODEC_ID_ZMBV
,

182 
	mAV_CODEC_ID_AVS
,

183 
	mAV_CODEC_ID_SMACKVIDEO
,

184 
	mAV_CODEC_ID_NUV
,

185 
	mAV_CODEC_ID_KMVC
,

186 
	mAV_CODEC_ID_FLASHSV
,

187 
	mAV_CODEC_ID_CAVS
,

188 
	mAV_CODEC_ID_JPEG2000
,

189 
	mAV_CODEC_ID_VMNC
,

190 
	mAV_CODEC_ID_VP5
,

191 
	mAV_CODEC_ID_VP6
,

192 
	mAV_CODEC_ID_VP6F
,

193 
	mAV_CODEC_ID_TARGA
,

194 
	mAV_CODEC_ID_DSICINVIDEO
,

195 
	mAV_CODEC_ID_TIERTEXSEQVIDEO
,

196 
	mAV_CODEC_ID_TIFF
,

197 
	mAV_CODEC_ID_GIF
,

198 
	mAV_CODEC_ID_DXA
,

199 
	mAV_CODEC_ID_DNXHD
,

200 
	mAV_CODEC_ID_THP
,

201 
	mAV_CODEC_ID_SGI
,

202 
	mAV_CODEC_ID_C93
,

203 
	mAV_CODEC_ID_BETHSOFTVID
,

204 
	mAV_CODEC_ID_PTX
,

205 
	mAV_CODEC_ID_TXD
,

206 
	mAV_CODEC_ID_VP6A
,

207 
	mAV_CODEC_ID_AMV
,

208 
	mAV_CODEC_ID_VB
,

209 
	mAV_CODEC_ID_PCX
,

210 
	mAV_CODEC_ID_SUNRAST
,

211 
	mAV_CODEC_ID_INDEO4
,

212 
	mAV_CODEC_ID_INDEO5
,

213 
	mAV_CODEC_ID_MIMIC
,

214 
	mAV_CODEC_ID_RL2
,

215 
	mAV_CODEC_ID_ESCAPE124
,

216 
	mAV_CODEC_ID_DIRAC
,

217 
	mAV_CODEC_ID_BFI
,

218 
	mAV_CODEC_ID_CMV
,

219 
	mAV_CODEC_ID_MOTIONPIXELS
,

220 
	mAV_CODEC_ID_TGV
,

221 
	mAV_CODEC_ID_TGQ
,

222 
	mAV_CODEC_ID_TQI
,

223 
	mAV_CODEC_ID_AURA
,

224 
	mAV_CODEC_ID_AURA2
,

225 
	mAV_CODEC_ID_V210X
,

226 
	mAV_CODEC_ID_TMV
,

227 
	mAV_CODEC_ID_V210
,

228 
	mAV_CODEC_ID_DPX
,

229 
	mAV_CODEC_ID_MAD
,

230 
	mAV_CODEC_ID_FRWU
,

231 
	mAV_CODEC_ID_FLASHSV2
,

232 
	mAV_CODEC_ID_CDGRAPHICS
,

233 
	mAV_CODEC_ID_R210
,

234 
	mAV_CODEC_ID_ANM
,

235 
	mAV_CODEC_ID_BINKVIDEO
,

236 
	mAV_CODEC_ID_IFF_ILBM
,

237 
	mAV_CODEC_ID_IFF_BYTERUN1
,

238 
	mAV_CODEC_ID_KGV1
,

239 
	mAV_CODEC_ID_YOP
,

240 
	mAV_CODEC_ID_VP8
,

241 
	mAV_CODEC_ID_PICTOR
,

242 
	mAV_CODEC_ID_ANSI
,

243 
	mAV_CODEC_ID_A64_MULTI
,

244 
	mAV_CODEC_ID_A64_MULTI5
,

245 
	mAV_CODEC_ID_R10K
,

246 
	mAV_CODEC_ID_MXPEG
,

247 
	mAV_CODEC_ID_LAGARITH
,

248 
	mAV_CODEC_ID_PRORES
,

249 
	mAV_CODEC_ID_JV
,

250 
	mAV_CODEC_ID_DFA
,

251 
	mAV_CODEC_ID_WMV3IMAGE
,

252 
	mAV_CODEC_ID_VC1IMAGE
,

253 
	mAV_CODEC_ID_UTVIDEO
,

254 
	mAV_CODEC_ID_BMV_VIDEO
,

255 
	mAV_CODEC_ID_VBLE
,

256 
	mAV_CODEC_ID_DXTORY
,

257 
	mAV_CODEC_ID_V410
,

258 
	mAV_CODEC_ID_XWD
,

259 
	mAV_CODEC_ID_CDXL
,

260 
	mAV_CODEC_ID_XBM
,

261 
	mAV_CODEC_ID_ZEROCODEC
,

262 
	mAV_CODEC_ID_MSS1
,

263 
	mAV_CODEC_ID_MSA1
,

264 
	mAV_CODEC_ID_TSCC2
,

265 
	mAV_CODEC_ID_MTS2
,

266 
	mAV_CODEC_ID_CLLC
,

267 
	mAV_CODEC_ID_MSS2
,

270 
	mAV_CODEC_ID_FIRST_AUDIO
 = 0x10000,

271 
	mAV_CODEC_ID_PCM_S16LE
 = 0x10000,

272 
	mAV_CODEC_ID_PCM_S16BE
,

273 
	mAV_CODEC_ID_PCM_U16LE
,

274 
	mAV_CODEC_ID_PCM_U16BE
,

275 
	mAV_CODEC_ID_PCM_S8
,

276 
	mAV_CODEC_ID_PCM_U8
,

277 
	mAV_CODEC_ID_PCM_MULAW
,

278 
	mAV_CODEC_ID_PCM_ALAW
,

279 
	mAV_CODEC_ID_PCM_S32LE
,

280 
	mAV_CODEC_ID_PCM_S32BE
,

281 
	mAV_CODEC_ID_PCM_U32LE
,

282 
	mAV_CODEC_ID_PCM_U32BE
,

283 
	mAV_CODEC_ID_PCM_S24LE
,

284 
	mAV_CODEC_ID_PCM_S24BE
,

285 
	mAV_CODEC_ID_PCM_U24LE
,

286 
	mAV_CODEC_ID_PCM_U24BE
,

287 
	mAV_CODEC_ID_PCM_S24DAUD
,

288 
	mAV_CODEC_ID_PCM_ZORK
,

289 
	mAV_CODEC_ID_PCM_S16LE_PLANAR
,

290 
	mAV_CODEC_ID_PCM_DVD
,

291 
	mAV_CODEC_ID_PCM_F32BE
,

292 
	mAV_CODEC_ID_PCM_F32LE
,

293 
	mAV_CODEC_ID_PCM_F64BE
,

294 
	mAV_CODEC_ID_PCM_F64LE
,

295 
	mAV_CODEC_ID_PCM_BLURAY
,

296 
	mAV_CODEC_ID_PCM_LXF
,

297 
	mAV_CODEC_ID_S302M
,

298 
	mAV_CODEC_ID_PCM_S8_PLANAR
,

301 
	mAV_CODEC_ID_ADPCM_IMA_QT
 = 0x11000,

302 
	mAV_CODEC_ID_ADPCM_IMA_WAV
,

303 
	mAV_CODEC_ID_ADPCM_IMA_DK3
,

304 
	mAV_CODEC_ID_ADPCM_IMA_DK4
,

305 
	mAV_CODEC_ID_ADPCM_IMA_WS
,

306 
	mAV_CODEC_ID_ADPCM_IMA_SMJPEG
,

307 
	mAV_CODEC_ID_ADPCM_MS
,

308 
	mAV_CODEC_ID_ADPCM_4XM
,

309 
	mAV_CODEC_ID_ADPCM_XA
,

310 
	mAV_CODEC_ID_ADPCM_ADX
,

311 
	mAV_CODEC_ID_ADPCM_EA
,

312 
	mAV_CODEC_ID_ADPCM_G726
,

313 
	mAV_CODEC_ID_ADPCM_CT
,

314 
	mAV_CODEC_ID_ADPCM_SWF
,

315 
	mAV_CODEC_ID_ADPCM_YAMAHA
,

316 
	mAV_CODEC_ID_ADPCM_SBPRO_4
,

317 
	mAV_CODEC_ID_ADPCM_SBPRO_3
,

318 
	mAV_CODEC_ID_ADPCM_SBPRO_2
,

319 
	mAV_CODEC_ID_ADPCM_THP
,

320 
	mAV_CODEC_ID_ADPCM_IMA_AMV
,

321 
	mAV_CODEC_ID_ADPCM_EA_R1
,

322 
	mAV_CODEC_ID_ADPCM_EA_R3
,

323 
	mAV_CODEC_ID_ADPCM_EA_R2
,

324 
	mAV_CODEC_ID_ADPCM_IMA_EA_SEAD
,

325 
	mAV_CODEC_ID_ADPCM_IMA_EA_EACS
,

326 
	mAV_CODEC_ID_ADPCM_EA_XAS
,

327 
	mAV_CODEC_ID_ADPCM_EA_MAXIS_XA
,

328 
	mAV_CODEC_ID_ADPCM_IMA_ISS
,

329 
	mAV_CODEC_ID_ADPCM_G722
,

330 
	mAV_CODEC_ID_ADPCM_IMA_APC
,

333 
	mAV_CODEC_ID_AMR_NB
 = 0x12000,

334 
	mAV_CODEC_ID_AMR_WB
,

337 
	mAV_CODEC_ID_RA_144
 = 0x13000,

338 
	mAV_CODEC_ID_RA_288
,

341 
	mAV_CODEC_ID_ROQ_DPCM
 = 0x14000,

342 
	mAV_CODEC_ID_INTERPLAY_DPCM
,

343 
	mAV_CODEC_ID_XAN_DPCM
,

344 
	mAV_CODEC_ID_SOL_DPCM
,

347 
	mAV_CODEC_ID_MP2
 = 0x15000,

348 
	mAV_CODEC_ID_MP3
,

349 
	mAV_CODEC_ID_AAC
,

350 
	mAV_CODEC_ID_AC3
,

351 
	mAV_CODEC_ID_DTS
,

352 
	mAV_CODEC_ID_VORBIS
,

353 
	mAV_CODEC_ID_DVAUDIO
,

354 
	mAV_CODEC_ID_WMAV1
,

355 
	mAV_CODEC_ID_WMAV2
,

356 
	mAV_CODEC_ID_MACE3
,

357 
	mAV_CODEC_ID_MACE6
,

358 
	mAV_CODEC_ID_VMDAUDIO
,

359 
	mAV_CODEC_ID_FLAC
,

360 
	mAV_CODEC_ID_MP3ADU
,

361 
	mAV_CODEC_ID_MP3ON4
,

362 
	mAV_CODEC_ID_SHORTEN
,

363 
	mAV_CODEC_ID_ALAC
,

364 
	mAV_CODEC_ID_WESTWOOD_SND1
,

365 
	mAV_CODEC_ID_GSM
,

366 
	mAV_CODEC_ID_QDM2
,

367 
	mAV_CODEC_ID_COOK
,

368 
	mAV_CODEC_ID_TRUESPEECH
,

369 
	mAV_CODEC_ID_TTA
,

370 
	mAV_CODEC_ID_SMACKAUDIO
,

371 
	mAV_CODEC_ID_QCELP
,

372 
	mAV_CODEC_ID_WAVPACK
,

373 
	mAV_CODEC_ID_DSICINAUDIO
,

374 
	mAV_CODEC_ID_IMC
,

375 
	mAV_CODEC_ID_MUSEPACK7
,

376 
	mAV_CODEC_ID_MLP
,

377 
	mAV_CODEC_ID_GSM_MS
,

378 
	mAV_CODEC_ID_ATRAC3
,

379 
	mAV_CODEC_ID_VOXWARE
,

380 
	mAV_CODEC_ID_APE
,

381 
	mAV_CODEC_ID_NELLYMOSER
,

382 
	mAV_CODEC_ID_MUSEPACK8
,

383 
	mAV_CODEC_ID_SPEEX
,

384 
	mAV_CODEC_ID_WMAVOICE
,

385 
	mAV_CODEC_ID_WMAPRO
,

386 
	mAV_CODEC_ID_WMALOSSLESS
,

387 
	mAV_CODEC_ID_ATRAC3P
,

388 
	mAV_CODEC_ID_EAC3
,

389 
	mAV_CODEC_ID_SIPR
,

390 
	mAV_CODEC_ID_MP1
,

391 
	mAV_CODEC_ID_TWINVQ
,

392 
	mAV_CODEC_ID_TRUEHD
,

393 
	mAV_CODEC_ID_MP4ALS
,

394 
	mAV_CODEC_ID_ATRAC1
,

395 
	mAV_CODEC_ID_BINKAUDIO_RDFT
,

396 
	mAV_CODEC_ID_BINKAUDIO_DCT
,

397 
	mAV_CODEC_ID_AAC_LATM
,

398 
	mAV_CODEC_ID_QDMC
,

399 
	mAV_CODEC_ID_CELT
,

400 
	mAV_CODEC_ID_G723_1
,

401 
	mAV_CODEC_ID_G729
,

402 
	mAV_CODEC_ID_8SVX_EXP
,

403 
	mAV_CODEC_ID_8SVX_FIB
,

404 
	mAV_CODEC_ID_BMV_AUDIO
,

405 
	mAV_CODEC_ID_RALF
,

406 
	mAV_CODEC_ID_IAC
,

407 
	mAV_CODEC_ID_ILBC
,

408 
	mAV_CODEC_ID_OPUS
,

409 
	mAV_CODEC_ID_COMFORT_NOISE
,

410 
	mAV_CODEC_ID_TAK
,

413 
	mAV_CODEC_ID_FIRST_SUBTITLE
 = 0x17000,

414 
	mAV_CODEC_ID_DVD_SUBTITLE
 = 0x17000,

415 
	mAV_CODEC_ID_DVB_SUBTITLE
,

416 
	mAV_CODEC_ID_TEXT
,

417 
	mAV_CODEC_ID_XSUB
,

418 
	mAV_CODEC_ID_SSA
,

419 
	mAV_CODEC_ID_MOV_TEXT
,

420 
	mAV_CODEC_ID_HDMV_PGS_SUBTITLE
,

421 
	mAV_CODEC_ID_DVB_TELETEXT
,

422 
	mAV_CODEC_ID_SRT
,

425 
	mAV_CODEC_ID_FIRST_UNKNOWN
 = 0x18000,

426 
	mAV_CODEC_ID_TTF
 = 0x18000,

428 
	mAV_CODEC_ID_PROBE
 = 0x19000,

430 
	mAV_CODEC_ID_MPEG2TS
 = 0x20000,

432 
	mAV_CODEC_ID_MPEG4SYSTEMS
 = 0x20001,

434 
	mAV_CODEC_ID_FFMETADATA
 = 0x21000,

436 #ià
FF_API_CODEC_ID


437 
	~"Şd_codec_ids.h
"

441 #ià
FF_API_CODEC_ID


442 
	#CodecID
 
AVCodecID


	)

450 
	sAVCodecDesütÜ
 {

451 
AVCodecID
 
	mid
;

452 
AVMedŸTy³
 
	mty³
;

458 cÚ¡ *
	mÇme
;

462 cÚ¡ *
	mlÚg_Çme
;

466 
	m´İs
;

467 } 
	tAVCodecDesütÜ
;

473 
	#AV_CODEC_PROP_INTRA_ONLY
 (1 << 0)

	)

479 
	#AV_CODEC_PROP_LOSSY
 (1 << 1)

	)

483 
	#AV_CODEC_PROP_LOSSLESS
 (1 << 2)

	)

485 #ià
FF_API_OLD_DECODE_AUDIO


487 
	#AVCODEC_MAX_AUDIO_FRAME_SIZE
 192000

489 

	)

498 
	#FF_INPUT_BUFFER_PADDING_SIZE
 8

	)

505 
	#FF_MIN_BUFFER_SIZE
 16384

	)

512 
	eMÙiÚ_E¡_ID
 {

513 
	mME_ZERO
 = 1,

514 
	mME_FULL
,

515 
	mME_LOG
,

516 
	mME_PHODS
,

517 
	mME_EPZS
,

518 
	mME_X1
,

519 
	mME_HEX
,

520 
	mME_UMH
,

521 
	mME_ITER
,

522 
	mME_TESA
,

528 
	eAVDisÿrd
{

531 
	mAVDISCARD_NONE
 =-16,

532 
	mAVDISCARD_DEFAULT
 = 0,

533 
	mAVDISCARD_NONREF
 = 8,

534 
	mAVDISCARD_BIDIR
 = 16,

535 
	mAVDISCARD_NONKEY
 = 32,

536 
	mAVDISCARD_ALL
 = 48,

539 
	eAVCŞÜPrim¬›s
{

540 
	mAVCOL_PRI_BT709
 = 1,

541 
	mAVCOL_PRI_UNSPECIFIED
 = 2,

542 
	mAVCOL_PRI_BT470M
 = 4,

543 
	mAVCOL_PRI_BT470BG
 = 5,

544 
	mAVCOL_PRI_SMPTE170M
 = 6,

545 
	mAVCOL_PRI_SMPTE240M
 = 7,

546 
	mAVCOL_PRI_FILM
 = 8,

547 
	mAVCOL_PRI_NB
 ,

550 
	eAVCŞÜT¿nsãrCh¬aù”i¡ic
{

551 
	mAVCOL_TRC_BT709
 = 1,

552 
	mAVCOL_TRC_UNSPECIFIED
 = 2,

553 
	mAVCOL_TRC_GAMMA22
 = 4,

554 
	mAVCOL_TRC_GAMMA28
 = 5,

555 
	mAVCOL_TRC_SMPTE240M
 = 7,

556 
	mAVCOL_TRC_NB
 ,

559 
	eAVCŞÜS·û
{

560 
	mAVCOL_SPC_RGB
 = 0,

561 
	mAVCOL_SPC_BT709
 = 1,

562 
	mAVCOL_SPC_UNSPECIFIED
 = 2,

563 
	mAVCOL_SPC_FCC
 = 4,

564 
	mAVCOL_SPC_BT470BG
 = 5,

565 
	mAVCOL_SPC_SMPTE170M
 = 6,

566 
	mAVCOL_SPC_SMPTE240M
 = 7,

567 
	mAVCOL_SPC_YCOCG
 = 8,

568 
	mAVCOL_SPC_NB
 ,

571 
	eAVCŞÜRªge
{

572 
	mAVCOL_RANGE_UNSPECIFIED
 = 0,

573 
	mAVCOL_RANGE_MPEG
 = 1,

574 
	mAVCOL_RANGE_JPEG
 = 2,

575 
	mAVCOL_RANGE_NB
 ,

583 
	eAVChromaLoÿtiÚ
{

584 
	mAVCHROMA_LOC_UNSPECIFIED
 = 0,

585 
	mAVCHROMA_LOC_LEFT
 = 1,

586 
	mAVCHROMA_LOC_CENTER
 = 2,

587 
	mAVCHROMA_LOC_TOPLEFT
 = 3,

588 
	mAVCHROMA_LOC_TOP
 = 4,

589 
	mAVCHROMA_LOC_BOTTOMLEFT
 = 5,

590 
	mAVCHROMA_LOC_BOTTOM
 = 6,

591 
	mAVCHROMA_LOC_NB
 ,

594 
	eAVAudioS”viûTy³
 {

595 
	mAV_AUDIO_SERVICE_TYPE_MAIN
 = 0,

596 
	mAV_AUDIO_SERVICE_TYPE_EFFECTS
 = 1,

597 
	mAV_AUDIO_SERVICE_TYPE_VISUALLY_IMPAIRED
 = 2,

598 
	mAV_AUDIO_SERVICE_TYPE_HEARING_IMPAIRED
 = 3,

599 
	mAV_AUDIO_SERVICE_TYPE_DIALOGUE
 = 4,

600 
	mAV_AUDIO_SERVICE_TYPE_COMMENTARY
 = 5,

601 
	mAV_AUDIO_SERVICE_TYPE_EMERGENCY
 = 6,

602 
	mAV_AUDIO_SERVICE_TYPE_VOICE_OVER
 = 7,

603 
	mAV_AUDIO_SERVICE_TYPE_KARAOKE
 = 8,

604 
	mAV_AUDIO_SERVICE_TYPE_NB
 ,

610 
	sRcOv”ride
{

611 
	m¡¬t_äame
;

612 
	m’d_äame
;

613 
	mqsÿË
;

614 
	mqu®™y_çùÜ
;

615 } 
	tRcOv”ride
;

617 
	#FF_MAX_B_FRAMES
 16

	)

624 
	#CODEC_FLAG_QSCALE
 0x0002

625 
	#CODEC_FLAG_4MV
 0x0004

626 
	#CODEC_FLAG_QPEL
 0x0010

627 
	#CODEC_FLAG_GMC
 0x0020

628 
	#CODEC_FLAG_MV0
 0x0040

629 

	)

634 
	#CODEC_FLAG_INPUT_PRESERVED
 0x0100

	)

635 
	#CODEC_FLAG_PASS1
 0x0200

636 
	#CODEC_FLAG_PASS2
 0x0400

637 
	#CODEC_FLAG_GRAY
 0x2000

638 
	#CODEC_FLAG_EMU_EDGE
 0x4000

639 
	#CODEC_FLAG_PSNR
 0x8000

640 
	#CODEC_FLAG_TRUNCATED
 0x00010000

	)

642 
	#CODEC_FLAG_NORMALIZE_AQP
 0x00020000

643 
	#CODEC_FLAG_INTERLACED_DCT
 0x00040000

644 
	#CODEC_FLAG_LOW_DELAY
 0x00080000

645 
	#CODEC_FLAG_GLOBAL_HEADER
 0x00400000

646 
	#CODEC_FLAG_BITEXACT
 0x00800000

647 

	)

648 
	#CODEC_FLAG_AC_PRED
 0x01000000

649 
	#CODEC_FLAG_LOOP_FILTER
 0x00000800

650 
	#CODEC_FLAG_INTERLACED_ME
 0x20000000

651 
	#CODEC_FLAG_CLOSED_GOP
 0x80000000

	)

652 
	#CODEC_FLAG2_FAST
 0x00000001

653 
	#CODEC_FLAG2_NO_OUTPUT
 0x00000004

654 
	#CODEC_FLAG2_LOCAL_HEADER
 0x00000008

655 #ià
FF_API_MPV_GLOBAL_OPTS


	)

656 
	#CODEC_FLAG_CBP_RD
 0x04000000

657 
	#CODEC_FLAG_QP_RD
 0x08000000

658 
	#CODEC_FLAG2_STRICT_GOP
 0x00000002

659 
	#CODEC_FLAG2_SKIP_RD
 0x00004000

661 
	#CODEC_FLAG2_CHUNKS
 0x00008000

662 

	)

670 
	#CODEC_CAP_DRAW_HORIZ_BAND
 0x0001

671 

	)

676 
	#CODEC_CAP_DR1
 0x0002

	)

677 
	#CODEC_CAP_TRUNCATED
 0x0008

	)

679 
	#CODEC_CAP_HWACCEL
 0x0010

	)

703 
	#CODEC_CAP_DELAY
 0x0020

	)

708 
	#CODEC_CAP_SMALL_LAST_FRAME
 0x0040

	)

712 
	#CODEC_CAP_HWACCEL_VDPAU
 0x0080

	)

724 
	#CODEC_CAP_SUBFRAMES
 0x0100

	)

729 
	#CODEC_CAP_EXPERIMENTAL
 0x0200

	)

733 
	#CODEC_CAP_CHANNEL_CONF
 0x0400

	)

737 
	#CODEC_CAP_NEG_LINESIZES
 0x0800

	)

741 
	#CODEC_CAP_FRAME_THREADS
 0x1000

	)

745 
	#CODEC_CAP_SLICE_THREADS
 0x2000

	)

749 
	#CODEC_CAP_PARAM_CHANGE
 0x4000

	)

753 
	#CODEC_CAP_AUTO_THREADS
 0x8000

	)

757 
	#CODEC_CAP_VARIABLE_FRAME_SIZE
 0x10000

	)

760 
	#MB_TYPE_INTRA4x4
 0x0001

	)

761 
	#MB_TYPE_INTRA16x16
 0x0002

762 
	#MB_TYPE_INTRA_PCM
 0x0004

763 
	#MB_TYPE_16x16
 0x0008

	)

764 
	#MB_TYPE_16x8
 0x0010

	)

765 
	#MB_TYPE_8x16
 0x0020

	)

766 
	#MB_TYPE_8x8
 0x0040

	)

767 
	#MB_TYPE_INTERLACED
 0x0080

	)

768 
	#MB_TYPE_DIRECT2
 0x0100

769 
	#MB_TYPE_ACPRED
 0x0200

	)

770 
	#MB_TYPE_GMC
 0x0400

	)

771 
	#MB_TYPE_SKIP
 0x0800

	)

772 
	#MB_TYPE_P0L0
 0x1000

	)

773 
	#MB_TYPE_P1L0
 0x2000

	)

774 
	#MB_TYPE_P0L1
 0x4000

	)

775 
	#MB_TYPE_P1L1
 0x8000

	)

776 
	#MB_TYPE_L0
 (
MB_TYPE_P0L0
 | 
MB_TYPE_P1L0
)

	)

777 
	#MB_TYPE_L1
 (
MB_TYPE_P0L1
 | 
MB_TYPE_P1L1
)

	)

778 
	#MB_TYPE_L0L1
 (
MB_TYPE_L0
 | 
MB_TYPE_L1
)

	)

779 
	#MB_TYPE_QUANT
 0x00010000

	)

780 
	#MB_TYPE_CBP
 0x00020000

	)

788 
	sAVPªSÿn
{

794 
	mid
;

801 
	mwidth
;

802 
	mheight
;

809 
št16_t
 
	mpos™iÚ
[3][2];

810 }
	tAVPªSÿn
;

812 
	#FF_QSCALE_TYPE_MPEG1
 0

	)

813 
	#FF_QSCALE_TYPE_MPEG2
 1

	)

814 
	#FF_QSCALE_TYPE_H264
 2

	)

815 
	#FF_QSCALE_TYPE_VP56
 3

	)

817 
	#FF_BUFFER_TYPE_INTERNAL
 1

	)

818 
	#FF_BUFFER_TYPE_USER
 2

819 
	#FF_BUFFER_TYPE_SHARED
 4

820 
	#FF_BUFFER_TYPE_COPY
 8

821 

	)

822 
	#FF_BUFFER_HINTS_VALID
 0x01

823 
	#FF_BUFFER_HINTS_READABLE
 0x02

824 
	#FF_BUFFER_HINTS_PRESERVE
 0x04

825 
	#FF_BUFFER_HINTS_REUSABLE
 0x08

826 

	)

833 
	eAVPack‘SideD©aTy³
 {

834 
	mAV_PKT_DATA_PALETTE
,

835 
	mAV_PKT_DATA_NEW_EXTRADATA
,

852 
	mAV_PKT_DATA_PARAM_CHANGE
,

873 
	mAV_PKT_DATA_H263_MB_INFO
,

898 
	sAVPack‘
 {

908 
št64_t
 
	m±s
;

914 
št64_t
 
	mdts
;

915 
ušt8_t
 *
	md©a
;

916 
	msize
;

917 
	m¡»am_šdex
;

921 
	mæags
;

927 
ušt8_t
 *
	md©a
;

928 
	msize
;

929 
AVPack‘SideD©aTy³
 
	mty³
;

930 } *
	mside_d©a
;

931 
	mside_d©a_–ems
;

937 
	mdu¿tiÚ
;

938 (*
	mde¡ruù
)(
	mAVPack‘
 *);

939 *
	m´iv
;

940 
št64_t
 
	mpos
;

959 
št64_t
 
	mcÚv”g’û_du¿tiÚ
;

960 } 
	tAVPack‘
;

961 
	#AV_PKT_FLAG_KEY
 0x0001

962 
	#AV_PKT_FLAG_CORRUPT
 0x0002

963 

	)

964 
	eAVSideD©aP¬amChªgeFÏgs
 {

965 
	mAV_SIDE_DATA_PARAM_CHANGE_CHANNEL_COUNT
 = 0x0001,

966 
	mAV_SIDE_DATA_PARAM_CHANGE_CHANNEL_LAYOUT
 = 0x0002,

967 
	mAV_SIDE_DATA_PARAM_CHANGE_SAMPLE_RATE
 = 0x0004,

968 
	mAV_SIDE_DATA_PARAM_CHANGE_DIMENSIONS
 = 0x0008,

989 
	sAVF¿me
 {

990 
	#AV_NUM_DATA_POINTERS
 8

	)

997 
ušt8_t
 *
	md©a
[
AV_NUM_DATA_POINTERS
];

1008 
	mlšesize
[
AV_NUM_DATA_POINTERS
];

1028 
ušt8_t
 **
	mex‹nded_d©a
;

1035 
	mwidth
, 
	mheight
;

1042 
	mnb_§m¶es
;

1051 
	mfÜm©
;

1058 
	mkey_äame
;

1065 
AVPiùu»Ty³
 
	mpiù_ty³
;

1073 
ušt8_t
 *
	mba£
[
AV_NUM_DATA_POINTERS
];

1080 
AVR©iÚ®
 
	m§m¶e_a¥eù_¿tio
;

1088 
št64_t
 
	m±s
;

1095 
št64_t
 
	mpkt_±s
;

1102 
št64_t
 
	mpkt_dts
;

1109 
	mcoded_piùu»_numb”
;

1115 
	mdi¥Ïy_piùu»_numb”
;

1122 
	mqu®™y
;

1132 
	m»ã»nû
;

1139 
št8_t
 *
	mqsÿË_bË
;

1145 
	mq¡ride
;

1150 
	mqsÿË_ty³
;

1158 
ušt8_t
 *
	mmbsk_bË
;

1172 
št16_t
 (*
mÙiÚ_v®
[2])[2];

1180 
ušt32_t
 *
	mmb_ty³
;

1187 *
	mdù_cÛff
;

1195 
št8_t
 *
	m»f_šdex
[2];

1202 *
	mİaque
;

1209 
ušt64_t
 
	m”rÜ
[
AV_NUM_DATA_POINTERS
];

1217 
	mty³
;

1225 
	m»³©_più
;

1232 
	mš‹¾aûd_äame
;

1239 
	mtİ_f›ld_fœ¡
;

1246 
	m·Ë‰e_has_chªged
;

1253 
	mbufãr_hšts
;

1260 
AVPªSÿn
 *
	m·n_sÿn
;

1273 
št64_t
 
	m»Üd”ed_İaque
;

1280 *
	mhwacûl_piùu»_´iv©e
;

1287 
AVCodecCÚ‹xt
 *
	mowÃr
;

1294 *
	mth»ad_İaque
;

1302 
ušt8_t
 
	mmÙiÚ_sub§m¶e_log2
;

1310 
	m§m¶e_¿‹
;

1318 
ušt64_t
 
	mchªÃl_Ïyout
;

1319 } 
	tAVF¿me
;

1321 
	gAVCodecIÁ”Çl
;

1323 
	eAVF›ldOrd”
 {

1324 
	mAV_FIELD_UNKNOWN
,

1325 
	mAV_FIELD_PROGRESSIVE
,

1326 
	mAV_FIELD_TT
,

1327 
	mAV_FIELD_BB
,

1328 
	mAV_FIELD_TB
,

1329 
	mAV_FIELD_BT
,

1339 
	sAVCodecCÚ‹xt
 {

1344 cÚ¡ 
AVCÏss
 *
	mav_şass
;

1345 
	mlog_Ëv–_off£t
;

1347 
AVMedŸTy³
 
	mcodec_ty³
;

1348 cÚ¡ 
AVCodec
 *
	mcodec
;

1349 
	mcodec_Çme
[32];

1350 
AVCodecID
 
	mcodec_id
;

1365 
	mcodec_g
;

1373 
	m¡»am_codec_g
;

1375 #ià
FF_API_SUB_ID


1379 
©Œibu‹_d•»ÿ‹d
 
	msub_id
;

1382 *
	m´iv_d©a
;

1390 
AVCodecIÁ”Çl
 *
	mš‹º®
;

1397 *
	mİaque
;

1404 
	mb™_¿‹
;

1412 
	mb™_¿‹_tŞ”ªû
;

1420 
	mglob®_qu®™y
;

1426 
	mcom´essiÚ_Ëv–
;

1427 
	#FF_COMPRESSION_DEFAULT
 -1

	)

1434 
	mæags
;

1441 
	mæags2
;

1454 
ušt8_t
 *
	mexŒad©a
;

1455 
	mexŒad©a_size
;

1465 
AVR©iÚ®
 
	mtime_ba£
;

1474 
	mticks_³r_äame
;

1497 
	md–ay
;

1508 
	mwidth
, 
	mheight
;

1515 
	mcoded_width
, 
	mcoded_height
;

1517 
	#FF_ASPECT_EXTENDED
 15

	)

1524 
	mgİ_size
;

1533 
AVPix–FÜm©
 
	mpix_fmt
;

1542 
	mme_m‘hod
;

1567 (*
	md¿w_hÜiz_bªd
)(
AVCodecCÚ‹xt
 *
	ms
,

1568 cÚ¡ 
AVF¿me
 *
	m¤c
, 
	moff£t
[
AV_NUM_DATA_POINTERS
],

1569 
	my
, 
	mty³
, 
	mheight
);

1580 
AVPix–FÜm©
 (*
g‘_fÜm©
)(
AVCodecCÚ‹xt
 *
	ms
, cÚ¡ AVPix–FÜm© * 
	mfmt
);

1588 
	mmax_b_äames
;

1597 
	mb_quªt_çùÜ
;

1600 
	mrc_¡¿‹gy
;

1601 
	#FF_RC_STRATEGY_XVID
 1

	)

1603 
	mb_äame_¡¿‹gy
;

1605 #ià
FF_API_MPV_GLOBAL_OPTS


1611 
©Œibu‹_d•»ÿ‹d
 
	mluma_–im_th»shŞd
;

1618 
©Œibu‹_d•»ÿ‹d
 
	mchroma_–im_th»shŞd
;

1626 
	mb_quªt_off£t
;

1634 
	mhas_b_äames
;

1641 
	mm³g_quªt
;

1650 
	mi_quªt_çùÜ
;

1657 
	mi_quªt_off£t
;

1664 
	mlumi_maskšg
;

1671 
	m‹mpÜ®_ılx_maskšg
;

1678 
	m¥©Ÿl_ılx_maskšg
;

1685 
	mp_maskšg
;

1692 
	md¬k_maskšg
;

1699 
	m¦iû_couÁ
;

1705 
	m´ediùiÚ_m‘hod
;

1706 
	#FF_PRED_LEFT
 0

	)

1707 
	#FF_PRED_PLANE
 1

	)

1708 
	#FF_PRED_MEDIAN
 2

	)

1715 *
	m¦iû_off£t
;

1724 
AVR©iÚ®
 
	m§m¶e_a¥eù_¿tio
;

1731 
	mme_cmp
;

1737 
	mme_sub_cmp
;

1743 
	mmb_cmp
;

1749 
	mdù_cmp
;

1750 
	#FF_CMP_SAD
 0

	)

1751 
	#FF_CMP_SSE
 1

	)

1752 
	#FF_CMP_SATD
 2

	)

1753 
	#FF_CMP_DCT
 3

	)

1754 
	#FF_CMP_PSNR
 4

	)

1755 
	#FF_CMP_BIT
 5

	)

1756 
	#FF_CMP_RD
 6

	)

1757 
	#FF_CMP_ZERO
 7

	)

1758 
	#FF_CMP_VSAD
 8

	)

1759 
	#FF_CMP_VSSE
 9

	)

1760 
	#FF_CMP_NSSE
 10

	)

1761 
	#FF_CMP_W53
 11

	)

1762 
	#FF_CMP_W97
 12

	)

1763 
	#FF_CMP_DCTMAX
 13

	)

1764 
	#FF_CMP_DCT264
 14

	)

1765 
	#FF_CMP_CHROMA
 256

	)

1772 
	mdŸ_size
;

1779 
	mÏ¡_´ediùÜ_couÁ
;

1786 
	m´e_me
;

1793 
	mme_´e_cmp
;

1800 
	m´e_dŸ_size
;

1807 
	mme_sub³l_qu®™y
;

1817 
	mdtg_aùive_fÜm©
;

1818 
	#FF_DTG_AFD_SAME
 8

	)

1819 
	#FF_DTG_AFD_4_3
 9

	)

1820 
	#FF_DTG_AFD_16_9
 10

	)

1821 
	#FF_DTG_AFD_14_9
 11

	)

1822 
	#FF_DTG_AFD_4_3_SP_14_9
 13

	)

1823 
	#FF_DTG_AFD_16_9_SP_14_9
 14

	)

1824 
	#FF_DTG_AFD_SP_4_3
 15

	)

1833 
	mme_¿nge
;

1840 
	mšŒa_quªt_bŸs
;

1841 
	#FF_DEFAULT_QUANT_BIAS
 999999

	)

1848 
	mš‹r_quªt_bŸs
;

1850 #ià
FF_API_COLOR_TABLE_ID


1857 
©Œibu‹_d•»ÿ‹d
 
	mcŞÜ_bË_id
;

1865 
	m¦iû_æags
;

1866 
	#SLICE_FLAG_CODED_ORDER
 0x0001

1867 
	#SLICE_FLAG_ALLOW_FIELD
 0x0002

1868 
	#SLICE_FLAG_ALLOW_PLANE
 0x0004

1869 

	)

1875 
	mxvmc_acûË¿tiÚ
;

1882 
	mmb_decisiÚ
;

1883 
	#FF_MB_DECISION_SIMPLE
 0

1884 
	#FF_MB_DECISION_BITS
 1

1885 
	#FF_MB_DECISION_RD
 2

1886 

	)

1892 
ušt16_t
 *
	mšŒa_m©rix
;

1899 
ušt16_t
 *
	mš‹r_m©rix
;

1907 
	msûÃchªge_th»shŞd
;

1914 
	mnoi£_»duùiÚ
;

1916 #ià
FF_API_INTER_THRESHOLD


1920 
©Œibu‹_d•»ÿ‹d
 
	mš‹r_th»shŞd
;

1923 #ià
FF_API_MPV_GLOBAL_OPTS


1927 
©Œibu‹_d•»ÿ‹d
 
	mquªtiz”_noi£_sh­šg
;

1937 
	mme_th»shŞd
;

1944 
	mmb_th»shŞd
;

1951 
	mšŒa_dc_´ecisiÚ
;

1958 
	msk_tİ
;

1965 
	msk_bÙtom
;

1973 
	mbÜd”_maskšg
;

1980 
	mmb_lmš
;

1987 
	mmb_lmax
;

1994 
	mme_³ÇÉy_com³n§tiÚ
;

2001 
	mbidœ_»fše
;

2008 
	mbrd_sÿË
;

2015 
	mkeyšt_mš
;

2022 
	m»fs
;

2029 
	mchromaoff£t
;

2036 
	msûÃchªge_çùÜ
;

2044 
	mmv0_th»shŞd
;

2051 
	mb_£ns™iv™y
;

2058 
AVCŞÜPrim¬›s
 
	mcŞÜ_´im¬›s
;

2065 
AVCŞÜT¿nsãrCh¬aù”i¡ic
 
	mcŞÜ_Œc
;

2072 
AVCŞÜS·û
 
	mcŞÜ¥aû
;

2079 
AVCŞÜRªge
 
	mcŞÜ_¿nge
;

2086 
AVChromaLoÿtiÚ
 
	mchroma_§m¶e_loÿtiÚ
;

2095 
	m¦iûs
;

2101 
AVF›ldOrd”
 
	mf›ld_Üd”
;

2104 
	m§m¶e_¿‹
;

2105 
	mchªÃls
;

2112 
AVSam¶eFÜm©
 
	m§m¶e_fmt
;

2124 
	mäame_size
;

2135 
	mäame_numb”
;

2141 
	mblock_®ign
;

2148 
	mcutoff
;

2150 #ià
FF_API_REQUEST_CHANNELS


2157 
	m»que¡_chªÃls
;

2165 
ušt64_t
 
	mchªÃl_Ïyout
;

2172 
ušt64_t
 
	m»que¡_chªÃl_Ïyout
;

2179 
AVAudioS”viûTy³
 
	maudio_£rviû_ty³
;

2186 
AVSam¶eFÜm©
 
	m»que¡_§m¶e_fmt
;

2248 (*
	mg‘_bufãr
)(
AVCodecCÚ‹xt
 *
	mc
, 
AVF¿me
 *
	mpic
);

2259 (*
	m»Ëa£_bufãr
)(
AVCodecCÚ‹xt
 *
	mc
, 
AVF¿me
 *
	mpic
);

2273 (*
	m»g‘_bufãr
)(
AVCodecCÚ‹xt
 *
	mc
, 
AVF¿me
 *
	mpic
);

2277 
	mqcom´ess
;

2278 
	mqblur
;

2285 
	mqmš
;

2292 
	mqmax
;

2299 
	mmax_qdiff
;

2307 
	mrc_qsquish
;

2309 
	mrc_qmod_amp
;

2310 
	mrc_qmod_äeq
;

2317 
	mrc_bufãr_size
;

2324 
	mrc_ov”ride_couÁ
;

2325 
RcOv”ride
 *
	mrc_ov”ride
;

2332 cÚ¡ *
	mrc_eq
;

2339 
	mrc_max_¿‹
;

2346 
	mrc_mš_¿‹
;

2348 
	mrc_bufãr_agg»ssiv™y
;

2355 
	mrc_š™Ÿl_ılx
;

2362 
	mrc_max_avaabË_vbv_u£
;

2369 
	mrc_mš_vbv_ov”æow_u£
;

2376 
	mrc_š™Ÿl_bufãr_occu·ncy
;

2378 
	#FF_CODER_TYPE_VLC
 0

	)

2379 
	#FF_CODER_TYPE_AC
 1

	)

2380 
	#FF_CODER_TYPE_RAW
 2

	)

2381 
	#FF_CODER_TYPE_RLE
 3

	)

2382 
	#FF_CODER_TYPE_DEFLATE
 4

	)

2388 
	mcod”_ty³
;

2395 
	mcÚ‹xt_mod–
;

2402 
	mlmš
;

2409 
	mlmax
;

2416 
	mäame_sk_th»shŞd
;

2423 
	mäame_sk_çùÜ
;

2430 
	mäame_sk_exp
;

2437 
	mäame_sk_cmp
;

2444 
	mŒ–lis
;

2450 
	mmš_´ediùiÚ_Üd”
;

2456 
	mmax_´ediùiÚ_Üd”
;

2463 
št64_t
 
	mtimecode_äame_¡¬t
;

2471 (*
	m¹p_ÿÎback
)(
AVCodecCÚ‹xt
 *
	mavùx
, *
	md©a
, 
	msize
, 
	mmb_nb
);

2473 
	m¹p_·ylßd_size
;

2481 
	mmv_b™s
;

2482 
	mh—d”_b™s
;

2483 
	mi_‹x_b™s
;

2484 
	mp_‹x_b™s
;

2485 
	mi_couÁ
;

2486 
	mp_couÁ
;

2487 
	msk_couÁ
;

2488 
	mmisc_b™s
;

2495 
	mäame_b™s
;

2502 *
	m¡©s_out
;

2510 *
	m¡©s_š
;

2517 
	mwÜk¬ound_bugs
;

2518 
	#FF_BUG_AUTODETECT
 1

2519 
	#FF_BUG_OLD_MSMPEG4
 2

	)

2520 
	#FF_BUG_XVID_ILACE
 4

	)

2521 
	#FF_BUG_UMP4
 8

	)

2522 
	#FF_BUG_NO_PADDING
 16

	)

2523 
	#FF_BUG_AMV
 32

	)

2524 
	#FF_BUG_AC_VLC
 0

2525 
	#FF_BUG_QPEL_CHROMA
 64

	)

2526 
	#FF_BUG_STD_QPEL
 128

	)

2527 
	#FF_BUG_QPEL_CHROMA2
 256

	)

2528 
	#FF_BUG_DIRECT_BLOCKSIZE
 512

	)

2529 
	#FF_BUG_EDGE
 1024

	)

2530 
	#FF_BUG_HPEL_CHROMA
 2048

	)

2531 
	#FF_BUG_DC_CLIP
 4096

	)

2532 
	#FF_BUG_MS
 8192

2533 
	#FF_BUG_TRUNCATED
 16384

	)

2547 
	m¡riù_¡d_com¶Ÿnû
;

2548 
	#FF_COMPLIANCE_VERY_STRICT
 2

2549 
	#FF_COMPLIANCE_STRICT
 1

2550 
	#FF_COMPLIANCE_NORMAL
 0

	)

2551 
	#FF_COMPLIANCE_UNOFFICIAL
 -1

2552 
	#FF_COMPLIANCE_EXPERIMENTAL
 -2

2553 

	)

2559 
	m”rÜ_cÚû®m’t
;

2560 
	#FF_EC_GUESS_MVS
 1

	)

2561 
	#FF_EC_DEBLOCK
 2

	)

2568 
	mdebug
;

2569 
	#FF_DEBUG_PICT_INFO
 1

	)

2570 
	#FF_DEBUG_RC
 2

	)

2571 
	#FF_DEBUG_BITSTREAM
 4

	)

2572 
	#FF_DEBUG_MB_TYPE
 8

	)

2573 
	#FF_DEBUG_QP
 16

	)

2574 
	#FF_DEBUG_MV
 32

	)

2575 
	#FF_DEBUG_DCT_COEFF
 0x00000040

	)

2576 
	#FF_DEBUG_SKIP
 0x00000080

	)

2577 
	#FF_DEBUG_STARTCODE
 0x00000100

	)

2578 
	#FF_DEBUG_PTS
 0x00000200

	)

2579 
	#FF_DEBUG_ER
 0x00000400

	)

2580 
	#FF_DEBUG_MMCO
 0x00000800

	)

2581 
	#FF_DEBUG_BUGS
 0x00001000

	)

2582 
	#FF_DEBUG_VIS_QP
 0x00002000

	)

2583 
	#FF_DEBUG_VIS_MB_TYPE
 0x00004000

	)

2584 
	#FF_DEBUG_BUFFERS
 0x00008000

	)

2585 
	#FF_DEBUG_THREADS
 0x00010000

	)

2592 
	mdebug_mv
;

2593 
	#FF_DEBUG_VIS_MV_P_FOR
 0x00000001

2594 
	#FF_DEBUG_VIS_MV_B_FOR
 0x00000002

2595 
	#FF_DEBUG_VIS_MV_B_BACK
 0x00000004

2596 

	)

2602 
	m”r_»cogn™iÚ
;

2603 
	#AV_EF_CRCCHECK
 (1<<0)

	)

2604 
	#AV_EF_BITSTREAM
 (1<<1)

	)

2605 
	#AV_EF_BUFFER
 (1<<2)

	)

2606 
	#AV_EF_EXPLODE
 (1<<3)

	)

2615 
št64_t
 
	m»Üd”ed_İaque
;

2622 
AVHWAcûl
 *
	mhwacûl
;

2634 *
	mhwacûl_cÚ‹xt
;

2641 
ušt64_t
 
	m”rÜ
[
AV_NUM_DATA_POINTERS
];

2648 
	mdù_®go
;

2649 
	#FF_DCT_AUTO
 0

	)

2650 
	#FF_DCT_FASTINT
 1

	)

2651 
	#FF_DCT_INT
 2

	)

2652 
	#FF_DCT_MMX
 3

	)

2653 
	#FF_DCT_ALTIVEC
 5

	)

2654 
	#FF_DCT_FAAN
 6

	)

2661 
	midù_®go
;

2662 
	#FF_IDCT_AUTO
 0

	)

2663 
	#FF_IDCT_INT
 1

	)

2664 
	#FF_IDCT_SIMPLE
 2

	)

2665 
	#FF_IDCT_SIMPLEMMX
 3

	)

2666 #ià
FF_API_LIBMPEG2


2667 
	#FF_IDCT_LIBMPEG2MMX
 4

	)

2669 #ià
FF_API_MMI


2670 
	#FF_IDCT_MMI
 5

	)

2672 
	#FF_IDCT_ARM
 7

	)

2673 
	#FF_IDCT_ALTIVEC
 8

	)

2674 
	#FF_IDCT_SH4
 9

	)

2675 
	#FF_IDCT_SIMPLEARM
 10

	)

2676 
	#FF_IDCT_H264
 11

	)

2677 
	#FF_IDCT_VP3
 12

	)

2678 
	#FF_IDCT_IPP
 13

	)

2679 
	#FF_IDCT_XVIDMMX
 14

	)

2680 
	#FF_IDCT_CAVS
 15

	)

2681 
	#FF_IDCT_SIMPLEARMV5TE
 16

	)

2682 
	#FF_IDCT_SIMPLEARMV6
 17

	)

2683 
	#FF_IDCT_SIMPLEVIS
 18

	)

2684 
	#FF_IDCT_WMV2
 19

	)

2685 
	#FF_IDCT_FAAN
 20

	)

2686 
	#FF_IDCT_EA
 21

	)

2687 
	#FF_IDCT_SIMPLENEON
 22

	)

2688 
	#FF_IDCT_SIMPLEALPHA
 23

	)

2689 
	#FF_IDCT_BINK
 24

	)

2691 #ià
FF_API_DSP_MASK


2696 
©Œibu‹_d•»ÿ‹d
 
	md¥_mask
;

2704 
	mb™s_³r_coded_§m¶e
;

2711 
	mb™s_³r_¿w_§m¶e
;

2718 
©Œibu‹_d•»ÿ‹d
 
	mlow»s
;

2725 
AVF¿me
 *
	mcoded_äame
;

2733 
	mth»ad_couÁ
;

2743 
	mth»ad_ty³
;

2744 
	#FF_THREAD_FRAME
 1

2745 
	#FF_THREAD_SLICE
 2

2746 

	)

2752 
	maùive_th»ad_ty³
;

2762 
	mth»ad_§ã_ÿÎbacks
;

2773 (*
	mexecu‹
)(
AVCodecCÚ‹xt
 *
	mc
, (*
	mfunc
)(AVCodecCÚ‹xˆ*
	mc2
, *
	m¬g
), *
	m¬g2
, *
	m»t
, 
	mcouÁ
, 
	msize
);

2793 (*
	mexecu‹2
)(
AVCodecCÚ‹xt
 *
	mc
, (*
	mfunc
)(AVCodecCÚ‹xˆ*
	mc2
, *
	m¬g
, 
	mjobÄ
, 
	mth»adÄ
), *
	m¬g2
, *
	m»t
, 
	mcouÁ
);

2801 *
	mth»ad_İaque
;

2808 
	mns£_weight
;

2815 
	m´ofe
;

2816 
	#FF_PROFILE_UNKNOWN
 -99

	)

2817 
	#FF_PROFILE_RESERVED
 -100

	)

2819 
	#FF_PROFILE_AAC_MAIN
 0

	)

2820 
	#FF_PROFILE_AAC_LOW
 1

	)

2821 
	#FF_PROFILE_AAC_SSR
 2

	)

2822 
	#FF_PROFILE_AAC_LTP
 3

	)

2823 
	#FF_PROFILE_AAC_HE
 4

	)

2824 
	#FF_PROFILE_AAC_HE_V2
 28

	)

2825 
	#FF_PROFILE_AAC_LD
 22

	)

2826 
	#FF_PROFILE_AAC_ELD
 38

	)

2828 
	#FF_PROFILE_DTS
 20

	)

2829 
	#FF_PROFILE_DTS_ES
 30

	)

2830 
	#FF_PROFILE_DTS_96_24
 40

	)

2831 
	#FF_PROFILE_DTS_HD_HRA
 50

	)

2832 
	#FF_PROFILE_DTS_HD_MA
 60

	)

2834 
	#FF_PROFILE_MPEG2_422
 0

	)

2835 
	#FF_PROFILE_MPEG2_HIGH
 1

	)

2836 
	#FF_PROFILE_MPEG2_SS
 2

	)

2837 
	#FF_PROFILE_MPEG2_SNR_SCALABLE
 3

	)

2838 
	#FF_PROFILE_MPEG2_MAIN
 4

	)

2839 
	#FF_PROFILE_MPEG2_SIMPLE
 5

	)

2841 
	#FF_PROFILE_H264_CONSTRAINED
 (1<<9)

2842 
	#FF_PROFILE_H264_INTRA
 (1<<11)

2843 

	)

2844 
	#FF_PROFILE_H264_BASELINE
 66

	)

2845 
	#FF_PROFILE_H264_CONSTRAINED_BASELINE
 (66|
FF_PROFILE_H264_CONSTRAINED
)

	)

2846 
	#FF_PROFILE_H264_MAIN
 77

	)

2847 
	#FF_PROFILE_H264_EXTENDED
 88

	)

2848 
	#FF_PROFILE_H264_HIGH
 100

	)

2849 
	#FF_PROFILE_H264_HIGH_10
 110

	)

2850 
	#FF_PROFILE_H264_HIGH_10_INTRA
 (110|
FF_PROFILE_H264_INTRA
)

	)

2851 
	#FF_PROFILE_H264_HIGH_422
 122

	)

2852 
	#FF_PROFILE_H264_HIGH_422_INTRA
 (122|
FF_PROFILE_H264_INTRA
)

	)

2853 
	#FF_PROFILE_H264_HIGH_444
 144

	)

2854 
	#FF_PROFILE_H264_HIGH_444_PREDICTIVE
 244

	)

2855 
	#FF_PROFILE_H264_HIGH_444_INTRA
 (244|
FF_PROFILE_H264_INTRA
)

	)

2856 
	#FF_PROFILE_H264_CAVLC_444
 44

	)

2858 
	#FF_PROFILE_VC1_SIMPLE
 0

	)

2859 
	#FF_PROFILE_VC1_MAIN
 1

	)

2860 
	#FF_PROFILE_VC1_COMPLEX
 2

	)

2861 
	#FF_PROFILE_VC1_ADVANCED
 3

	)

2863 
	#FF_PROFILE_MPEG4_SIMPLE
 0

	)

2864 
	#FF_PROFILE_MPEG4_SIMPLE_SCALABLE
 1

	)

2865 
	#FF_PROFILE_MPEG4_CORE
 2

	)

2866 
	#FF_PROFILE_MPEG4_MAIN
 3

	)

2867 
	#FF_PROFILE_MPEG4_N_BIT
 4

	)

2868 
	#FF_PROFILE_MPEG4_SCALABLE_TEXTURE
 5

	)

2869 
	#FF_PROFILE_MPEG4_SIMPLE_FACE_ANIMATION
 6

	)

2870 
	#FF_PROFILE_MPEG4_BASIC_ANIMATED_TEXTURE
 7

	)

2871 
	#FF_PROFILE_MPEG4_HYBRID
 8

	)

2872 
	#FF_PROFILE_MPEG4_ADVANCED_REAL_TIME
 9

	)

2873 
	#FF_PROFILE_MPEG4_CORE_SCALABLE
 10

	)

2874 
	#FF_PROFILE_MPEG4_ADVANCED_CODING
 11

	)

2875 
	#FF_PROFILE_MPEG4_ADVANCED_CORE
 12

	)

2876 
	#FF_PROFILE_MPEG4_ADVANCED_SCALABLE_TEXTURE
 13

	)

2877 
	#FF_PROFILE_MPEG4_SIMPLE_STUDIO
 14

	)

2878 
	#FF_PROFILE_MPEG4_ADVANCED_SIMPLE
 15

	)

2885 
	mËv–
;

2886 
	#FF_LEVEL_UNKNOWN
 -99

	)

2893 
AVDisÿrd
 
	msk_loİ_f‹r
;

2900 
AVDisÿrd
 
	msk_idù
;

2907 
AVDisÿrd
 
	msk_äame
;

2917 
ušt8_t
 *
	msubt™Ë_h—d”
;

2918 
	msubt™Ë_h—d”_size
;

2925 
	m”rÜ_¿‹
;

2934 
AVPack‘
 *
	mpkt
;

2942 
ušt64_t
 
	mvbv_d–ay
;

2943 } 
	tAVCodecCÚ‹xt
;

2948 
	sAVProfe
 {

2949 
	m´ofe
;

2950 cÚ¡ *
	mÇme
;

2951 } 
	tAVProfe
;

2953 
AVCodecDeçuÉ
 
	tAVCodecDeçuÉ
;

2955 
	gAVSubt™Ë
;

2960 
	sAVCodec
 {

2967 cÚ¡ *
	mÇme
;

2972 cÚ¡ *
	mlÚg_Çme
;

2973 
AVMedŸTy³
 
	mty³
;

2974 
AVCodecID
 
	mid
;

2979 
	mÿ·b™›s
;

2980 cÚ¡ 
AVR©iÚ®
 *
	msuµÜ‹d_äam”©es
;

2981 cÚ¡ 
AVPix–FÜm©
 *
	mpix_fmts
;

2982 cÚ¡ *
	msuµÜ‹d_§m¶”©es
;

2983 cÚ¡ 
AVSam¶eFÜm©
 *
	m§m¶e_fmts
;

2984 cÚ¡ 
ušt64_t
 *
	mchªÃl_Ïyouts
;

2985 
©Œibu‹_d•»ÿ‹d
 
ušt8_t
 
	mmax_low»s
;

2986 cÚ¡ 
AVCÏss
 *
	m´iv_şass
;

2987 cÚ¡ 
AVProfe
 *
	m´ofes
;

2996 
	m´iv_d©a_size
;

2997 
AVCodec
 *
	mÃxt
;

3007 (*
	mš™_th»ad_cİy
)(
	mAVCodecCÚ‹xt
 *);

3015 (*
	mupd©e_th»ad_cÚ‹xt
)(
AVCodecCÚ‹xt
 *
	md¡
, cÚ¡ AVCodecCÚ‹xˆ*
	m¤c
);

3021 cÚ¡ 
AVCodecDeçuÉ
 *
	mdeçuÉs
;

3026 (*
	mš™_¡©ic_d©a
)(
AVCodec
 *
	mcodec
);

3028 (*
	mš™
)(
	mAVCodecCÚ‹xt
 *);

3029 (*
	m’code_sub
)(
	mAVCodecCÚ‹xt
 *, 
ušt8_t
 *
	mbuf
, 
	mbuf_size
,

3030 cÚ¡ 
AVSubt™Ë
 *
	msub
);

3041 (*
	m’code2
)(
AVCodecCÚ‹xt
 *
	mavùx
, 
AVPack‘
 *
	mavpkt
, cÚ¡ 
AVF¿me
 *
	mäame
,

3042 *
	mgÙ_·ck‘_±r
);

3043 (*
	mdecode
)(
	mAVCodecCÚ‹xt
 *, *
	moutd©a
, *
	moutd©a_size
, 
AVPack‘
 *
	mavpkt
);

3044 (*
	mşo£
)(
	mAVCodecCÚ‹xt
 *);

3049 (*
	mæush
)(
	mAVCodecCÚ‹xt
 *);

3050 } 
	tAVCodec
;

3055 
	sAVHWAcûl
 {

3061 cÚ¡ *
	mÇme
;

3068 
AVMedŸTy³
 
	mty³
;

3075 
AVCodecID
 
	mid
;

3082 
AVPix–FÜm©
 
	mpix_fmt
;

3088 
	mÿ·b™›s
;

3090 
AVHWAcûl
 *
	mÃxt
;

3106 (*
	m¡¬t_äame
)(
AVCodecCÚ‹xt
 *
	mavùx
, cÚ¡ 
ušt8_t
 *
	mbuf
, 
ušt32_t
 
	mbuf_size
);

3119 (*
	mdecode_¦iû
)(
AVCodecCÚ‹xt
 *
	mavùx
, cÚ¡ 
ušt8_t
 *
	mbuf
, 
ušt32_t
 
	mbuf_size
);

3130 (*
	m’d_äame
)(
AVCodecCÚ‹xt
 *
	mavùx
);

3139 
	m´iv_d©a_size
;

3140 } 
	tAVHWAcûl
;

3153 
	sAVPiùu»
 {

3154 
ušt8_t
 *
	md©a
[
AV_NUM_DATA_POINTERS
];

3155 
	mlšesize
[
AV_NUM_DATA_POINTERS
];

3156 } 
	tAVPiùu»
;

3162 
	#AVPALETTE_SIZE
 1024

	)

3163 
	#AVPALETTE_COUNT
 256

	)

3165 
	eAVSubt™ËTy³
 {

3166 
	mSUBTITLE_NONE
,

3168 
	mSUBTITLE_BITMAP
,

3174 
	mSUBTITLE_TEXT
,

3180 
	mSUBTITLE_ASS
,

3183 
	#AV_SUBTITLE_FLAG_FORCED
 0x00000001

	)

3185 
	sAVSubt™ËReù
 {

3186 
	mx
;

3187 
	my
;

3188 
	mw
;

3189 
	mh
;

3190 
	mnb_cŞÜs
;

3196 
AVPiùu»
 
	mpiù
;

3197 
AVSubt™ËTy³
 
	mty³
;

3199 *
	m‹xt
;

3206 *
	mass
;

3207 
	mæags
;

3208 } 
	tAVSubt™ËReù
;

3210 
	sAVSubt™Ë
 {

3211 
ušt16_t
 
	mfÜm©
;

3212 
ušt32_t
 
	m¡¬t_di¥Ïy_time
;

3213 
ušt32_t
 
	m’d_di¥Ïy_time
;

3214 
	mnum_»ùs
;

3215 
AVSubt™ËReù
 **
	m»ùs
;

3216 
št64_t
 
	m±s
;

3217 } 
	tAVSubt™Ë
;

3224 
AVCodec
 *
av_codec_Ãxt
(cÚ¡ AVCodeø*
c
);

3229 
avcodec_v”siÚ
();

3234 cÚ¡ *
avcodec_cÚfigu¿tiÚ
();

3239 cÚ¡ *
avcodec_liûn£
();

3249 
avcodec_»gi¡”
(
AVCodec
 *
codec
);

3261 
avcodec_»gi¡”_®l
();

3278 
AVCodecCÚ‹xt
 *
avcodec_®loc_cÚ‹xt3
(cÚ¡ 
AVCodec
 *
codec
);

3289 
avcodec_g‘_cÚ‹xt_deçuÉs3
(
AVCodecCÚ‹xt
 *
s
, cÚ¡ 
AVCodec
 *
codec
);

3297 cÚ¡ 
AVCÏss
 *
avcodec_g‘_şass
();

3310 
avcodec_cİy_cÚ‹xt
(
AVCodecCÚ‹xt
 *
de¡
, cÚ¡ AVCodecCÚ‹xˆ*
¤c
);

3319 
AVF¿me
 *
avcodec_®loc_äame
();

3326 
avcodec_g‘_äame_deçuÉs
(
AVF¿me
 *
äame
);

3338 
avcodec_ä“_äame
(
AVF¿me
 **
äame
);

3376 
avcodec_İ’2
(
AVCodecCÚ‹xt
 *
avùx
, cÚ¡ 
AVCodec
 *
codec
, 
AVDiùiÚ¬y
 **
İtiÚs
);

3387 
avcodec_şo£
(
AVCodecCÚ‹xt
 *
avùx
);

3394 
avsubt™Ë_ä“
(
AVSubt™Ë
 *
sub
);

3408 
av_de¡ruù_·ck‘
(
AVPack‘
 *
pkt
);

3418 
av_š™_·ck‘
(
AVPack‘
 *
pkt
);

3428 
av_Ãw_·ck‘
(
AVPack‘
 *
pkt
, 
size
);

3436 
av_shršk_·ck‘
(
AVPack‘
 *
pkt
, 
size
);

3444 
av_grow_·ck‘
(
AVPack‘
 *
pkt
, 
grow_by
);

3450 
av_dup_·ck‘
(
AVPack‘
 *
pkt
);

3457 
av_ä“_·ck‘
(
AVPack‘
 *
pkt
);

3467 
ušt8_t
* 
av_·ck‘_Ãw_side_d©a
(
AVPack‘
 *
pkt
, 
AVPack‘SideD©aTy³
 
ty³
,

3468 
size
);

3478 
av_·ck‘_shršk_side_d©a
(
AVPack‘
 *
pkt
, 
AVPack‘SideD©aTy³
 
ty³
,

3479 
size
);

3489 
ušt8_t
* 
av_·ck‘_g‘_side_d©a
(
AVPack‘
 *
pkt
, 
AVPack‘SideD©aTy³
 
ty³
,

3490 *
size
);

3507 
AVCodec
 *
avcodec_fšd_decod”
(
AVCodecID
 
id
);

3515 
AVCodec
 *
avcodec_fšd_decod”_by_Çme
(cÚ¡ *
Çme
);

3517 
avcodec_deçuÉ_g‘_bufãr
(
AVCodecCÚ‹xt
 *
s
, 
AVF¿me
 *
pic
);

3518 
avcodec_deçuÉ_»Ëa£_bufãr
(
AVCodecCÚ‹xt
 *
s
, 
AVF¿me
 *
pic
);

3519 
avcodec_deçuÉ_»g‘_bufãr
(
AVCodecCÚ‹xt
 *
s
, 
AVF¿me
 *
pic
);

3528 
avcodec_g‘_edge_width
();

3539 
avcodec_®ign_dim’siÚs
(
AVCodecCÚ‹xt
 *
s
, *
width
, *
height
);

3550 
avcodec_®ign_dim’siÚs2
(
AVCodecCÚ‹xt
 *
s
, *
width
, *
height
,

3551 
lšesize_®ign
[
AV_NUM_DATA_POINTERS
]);

3553 #ià
FF_API_OLD_DECODE_AUDIO


3608 
©Œibu‹_d•»ÿ‹d
 
avcodec_decode_audio3
(
AVCodecCÚ‹xt
 *
avùx
, 
št16_t
 *
§m¶es
,

3609 *
äame_size_±r
,

3610 
AVPack‘
 *
avpkt
);

3646 
avcodec_decode_audio4
(
AVCodecCÚ‹xt
 *
avùx
, 
AVF¿me
 *
äame
,

3647 *
gÙ_äame_±r
, 
AVPack‘
 *
avpkt
);

3690 
avcodec_decode_video2
(
AVCodecCÚ‹xt
 *
avùx
, 
AVF¿me
 *
piùu»
,

3691 *
gÙ_piùu»_±r
,

3692 
AVPack‘
 *
avpkt
);

3710 
avcodec_decode_subt™Ë2
(
AVCodecCÚ‹xt
 *
avùx
, 
AVSubt™Ë
 *
sub
,

3711 *
gÙ_sub_±r
,

3712 
AVPack‘
 *
avpkt
);

3719 
	sAVCodecP¬£rCÚ‹xt
 {

3720 *
	m´iv_d©a
;

3721 
AVCodecP¬£r
 *
	m·r£r
;

3722 
št64_t
 
	mäame_off£t
;

3723 
št64_t
 
	mcur_off£t
;

3725 
št64_t
 
	mÃxt_äame_off£t
;

3727 
	mpiù_ty³
;

3737 
	m»³©_più
;

3738 
št64_t
 
	m±s
;

3739 
št64_t
 
	mdts
;

3742 
št64_t
 
	mÏ¡_±s
;

3743 
št64_t
 
	mÏ¡_dts
;

3744 
	mãtch_time¡amp
;

3746 
	#AV_PARSER_PTS_NB
 4

	)

3747 
	mcur_äame_¡¬t_šdex
;

3748 
št64_t
 
	mcur_äame_off£t
[
AV_PARSER_PTS_NB
];

3749 
št64_t
 
	mcur_äame_±s
[
AV_PARSER_PTS_NB
];

3750 
št64_t
 
	mcur_äame_dts
[
AV_PARSER_PTS_NB
];

3752 
	mæags
;

3753 
	#PARSER_FLAG_COMPLETE_FRAMES
 0x0001

	)

3754 
	#PARSER_FLAG_ONCE
 0x0002

	)

3756 
	#PARSER_FLAG_FETCHED_OFFSET
 0x0004

	)

3758 
št64_t
 
	moff£t
;

3759 
št64_t
 
	mcur_äame_’d
[
AV_PARSER_PTS_NB
];

3767 
	mkey_äame
;

3786 
št64_t
 
	mcÚv”g’û_du¿tiÚ
;

3798 
	mdts_sync_pošt
;

3813 
	mdts_»f_dts_d–
;

3827 
	m±s_dts_d–
;

3834 
št64_t
 
	mcur_äame_pos
[
AV_PARSER_PTS_NB
];

3839 
št64_t
 
	mpos
;

3844 
št64_t
 
	mÏ¡_pos
;

3851 
	mdu¿tiÚ
;

3852 } 
	tAVCodecP¬£rCÚ‹xt
;

3854 
	sAVCodecP¬£r
 {

3855 
	mcodec_ids
[5];

3856 
	m´iv_d©a_size
;

3857 (*
	m·r£r_š™
)(
AVCodecP¬£rCÚ‹xt
 *
	ms
);

3858 (*
	m·r£r_·r£
)(
AVCodecP¬£rCÚ‹xt
 *
	ms
,

3859 
AVCodecCÚ‹xt
 *
	mavùx
,

3860 cÚ¡ 
ušt8_t
 **
	mpoutbuf
, *
	mpoutbuf_size
,

3861 cÚ¡ 
ušt8_t
 *
	mbuf
, 
	mbuf_size
);

3862 (*
	m·r£r_şo£
)(
AVCodecP¬£rCÚ‹xt
 *
	ms
);

3863 (*
	m¥l™
)(
AVCodecCÚ‹xt
 *
	mavùx
, cÚ¡ 
ušt8_t
 *
	mbuf
, 
	mbuf_size
);

3864 
AVCodecP¬£r
 *
	mÃxt
;

3865 } 
	tAVCodecP¬£r
;

3867 
AVCodecP¬£r
 *
av_·r£r_Ãxt
(AVCodecP¬£¸*
c
);

3869 
av_»gi¡”_codec_·r£r
(
AVCodecP¬£r
 *
·r£r
);

3870 
AVCodecP¬£rCÚ‹xt
 *
av_·r£r_š™
(
codec_id
);

3900 
av_·r£r_·r£2
(
AVCodecP¬£rCÚ‹xt
 *
s
,

3901 
AVCodecCÚ‹xt
 *
avùx
,

3902 
ušt8_t
 **
poutbuf
, *
poutbuf_size
,

3903 cÚ¡ 
ušt8_t
 *
buf
, 
buf_size
,

3904 
št64_t
 
±s
, iÁ64_ˆ
dts
,

3905 
št64_t
 
pos
);

3911 
av_·r£r_chªge
(
AVCodecP¬£rCÚ‹xt
 *
s
,

3912 
AVCodecCÚ‹xt
 *
avùx
,

3913 
ušt8_t
 **
poutbuf
, *
poutbuf_size
,

3914 cÚ¡ 
ušt8_t
 *
buf
, 
buf_size
, 
keyäame
);

3915 
av_·r£r_şo£
(
AVCodecP¬£rCÚ‹xt
 *
s
);

3933 
AVCodec
 *
avcodec_fšd_’cod”
(
AVCodecID
 
id
);

3941 
AVCodec
 *
avcodec_fšd_’cod”_by_Çme
(cÚ¡ *
Çme
);

3943 #ià
FF_API_OLD_ENCODE_AUDIO


3968 
©Œibu‹_d•»ÿ‹d
 
avcodec_’code_audio
(
AVCodecCÚ‹xt
 *
avùx
,

3969 
ušt8_t
 *
buf
, 
buf_size
,

3970 cÚ¡ *
§m¶es
);

4011 
avcodec_’code_audio2
(
AVCodecCÚ‹xt
 *
avùx
, 
AVPack‘
 *
avpkt
,

4012 cÚ¡ 
AVF¿me
 *
äame
, *
gÙ_·ck‘_±r
);

4014 #ià
FF_API_OLD_ENCODE_VIDEO


4029 
©Œibu‹_d•»ÿ‹d


4030 
avcodec_’code_video
(
AVCodecCÚ‹xt
 *
avùx
, 
ušt8_t
 *
buf
, 
buf_size
,

4031 cÚ¡ 
AVF¿me
 *
più
);

4068 
avcodec_’code_video2
(
AVCodecCÚ‹xt
 *
avùx
, 
AVPack‘
 *
avpkt
,

4069 cÚ¡ 
AVF¿me
 *
äame
, *
gÙ_·ck‘_±r
);

4071 
avcodec_’code_subt™Ë
(
AVCodecCÚ‹xt
 *
avùx
, 
ušt8_t
 *
buf
, 
buf_size
,

4072 cÚ¡ 
AVSubt™Ë
 *
sub
);

4079 #ià
FF_API_AVCODEC_RESAMPLE


4087 
	gReSam¶eCÚ‹xt
;

4088 
	gAVRe§m¶eCÚ‹xt
;

4090 
ReSam¶eCÚ‹xt
 
	tReSam¶eCÚ‹xt
;

4108 
©Œibu‹_d•»ÿ‹d


4109 
ReSam¶eCÚ‹xt
 *
av_audio_»§m¶e_š™
(
ouut_chªÃls
, 
šput_chªÃls
,

4110 
ouut_¿‹
, 
šput_¿‹
,

4111 
AVSam¶eFÜm©
 
§m¶e_fmt_out
,

4112 
AVSam¶eFÜm©
 
§m¶e_fmt_š
,

4113 
f‹r_Ëngth
, 
log2_pha£_couÁ
,

4114 
lš—r
, 
cutoff
);

4116 
©Œibu‹_d•»ÿ‹d


4117 
audio_»§m¶e
(
ReSam¶eCÚ‹xt
 *
s
, *
ouut
, *
šput
, 
nb_§m¶es
);

4125 
©Œibu‹_d•»ÿ‹d


4126 
audio_»§m¶e_şo£
(
ReSam¶eCÚ‹xt
 *
s
);

4138 
©Œibu‹_d•»ÿ‹d


4139 
AVRe§m¶eCÚ‹xt
 *
av_»§m¶e_š™
(
out_¿‹
, 
š_¿‹
, 
f‹r_Ëngth
, 
log2_pha£_couÁ
, 
lš—r
, 
cutoff
);

4150 
©Œibu‹_d•»ÿ‹d


4151 
av_»§m¶e
(
AVRe§m¶eCÚ‹xt
 *
c
, *
d¡
, *
¤c
, *
cÚsumed
, 
¤c_size
, 
d¡_size
, 
upd©e_ùx
);

4166 
©Œibu‹_d•»ÿ‹d


4167 
av_»§m¶e_com³n§‹
(
AVRe§m¶eCÚ‹xt
 *
c
, 
§m¶e_d–
, 
com³n§tiÚ_di¡ªû
);

4168 
©Œibu‹_d•»ÿ‹d


4169 
av_»§m¶e_şo£
(
AVRe§m¶eCÚ‹xt
 *
c
);

4192 
avpiùu»_®loc
(
AVPiùu»
 *
piùu»
, 
AVPix–FÜm©
 
pix_fmt
, 
width
, 
height
);

4201 
avpiùu»_ä“
(
AVPiùu»
 *
piùu»
);

4223 
avpiùu»_fl
(
AVPiùu»
 *
piùu»
, 
ušt8_t
 *
±r
,

4224 
AVPix–FÜm©
 
pix_fmt
, 
width
, 
height
);

4241 
avpiùu»_Ïyout
(cÚ¡ 
AVPiùu»
* 
¤c
, 
AVPix–FÜm©
 
pix_fmt
,

4242 
width
, 
height
,

4243 *
de¡
, 
de¡_size
);

4257 
avpiùu»_g‘_size
(
AVPix–FÜm©
 
pix_fmt
, 
width
, 
height
);

4262 
avpiùu»_deš‹¾aû
(
AVPiùu»
 *
d¡
, cÚ¡ AVPiùu» *
¤c
,

4263 
AVPix–FÜm©
 
pix_fmt
, 
width
, 
height
);

4267 
av_piùu»_cİy
(
AVPiùu»
 *
d¡
, cÚ¡ AVPiùu» *
¤c
,

4268 
AVPix–FÜm©
 
pix_fmt
, 
width
, 
height
);

4273 
av_piùu»_üİ
(
AVPiùu»
 *
d¡
, cÚ¡ AVPiùu» *
¤c
,

4274 
AVPix–FÜm©
 
pix_fmt
, 
tİ_bªd
, 
Ëá_bªd
);

4279 
av_piùu»_·d
(
AVPiùu»
 *
d¡
, cÚ¡ AVPiùu» *
¤c
, 
height
, 
width
, 
AVPix–FÜm©
 
pix_fmt
,

4280 
·dtİ
, 
·dbÙtom
, 
·dËá
, 
·dright
, *
cŞÜ
);

4306 
©Œibu‹_d•»ÿ‹d
 
avcodec_g‘_chroma_sub_§m¶e
(
AVPix–FÜm©
 
pix_fmt
, *
h_shiá
, *
v_shiá
);

4313 
avcodec_pix_fmt_to_codec_g
(
AVPix–FÜm©
 
pix_fmt
);

4315 
	#FF_LOSS_RESOLUTION
 0x0001

	)

4316 
	#FF_LOSS_DEPTH
 0x0002

	)

4317 
	#FF_LOSS_COLORSPACE
 0x0004

	)

4318 
	#FF_LOSS_ALPHA
 0x0008

	)

4319 
	#FF_LOSS_COLORQUANT
 0x0010

	)

4320 
	#FF_LOSS_CHROMA
 0x0020

	)

4339 
avcodec_g‘_pix_fmt_loss
(
AVPix–FÜm©
 
d¡_pix_fmt
, AVPix–FÜm© 
¤c_pix_fmt
,

4340 
has_®pha
);

4342 #ià
FF_API_FIND_BEST_PIX_FMT


4367 
©Œibu‹_d•»ÿ‹d


4368 
AVPix–FÜm©
 
avcodec_fšd_be¡_pix_fmt
(
št64_t
 
pix_fmt_mask
, AVPix–FÜm© 
¤c_pix_fmt
,

4369 
has_®pha
, *
loss_±r
);

4389 
AVPix–FÜm©
 
avcodec_fšd_be¡_pix_fmt2
(AVPix–FÜm© *
pix_fmt_li¡
,

4390 
AVPix–FÜm©
 
¤c_pix_fmt
,

4391 
has_®pha
, *
loss_±r
);

4393 
AVPix–FÜm©
 
avcodec_deçuÉ_g‘_fÜm©
(
AVCodecCÚ‹xt
 *
s
, cÚ¡ AVPix–FÜm© * 
fmt
);

4399 
avcodec_£t_dim’siÚs
(
AVCodecCÚ‹xt
 *
s
, 
width
, 
height
);

4408 
size_t
 
av_g‘_codec_g_¡ršg
(*
buf
, size_ˆ
buf_size
, 
codec_g
);

4410 
avcodec_¡ršg
(*
buf
, 
buf_size
, 
AVCodecCÚ‹xt
 *
’c
, 
’code
);

4419 cÚ¡ *
av_g‘_´ofe_Çme
(cÚ¡ 
AVCodec
 *
codec
, 
´ofe
);

4421 
avcodec_deçuÉ_execu‹
(
AVCodecCÚ‹xt
 *
c
, (*
func
)(AVCodecCÚ‹xˆ*
c2
, *
¬g2
),*
¬g
, *
»t
, 
couÁ
, 
size
);

4422 
	`avcodec_deçuÉ_execu‹2
(
AVCodecCÚ‹xt
 *
c
, (*
func
)(AVCodecCÚ‹xˆ*
c2
, *
¬g2
, , ),*
¬g
, *
»t
, 
couÁ
);

4441 
	`avcodec_fl_audio_äame
(
AVF¿me
 *
äame
, 
nb_chªÃls
,

4442 
AVSam¶eFÜm©
 
§m¶e_fmt
, cÚ¡ 
ušt8_t
 *
buf
,

4443 
buf_size
, 
®ign
);

4448 
	`avcodec_æush_bufãrs
(
AVCodecCÚ‹xt
 *
avùx
);

4450 
	`avcodec_deçuÉ_ä“_bufãrs
(
AVCodecCÚ‹xt
 *
s
);

4458 
	`av_g‘_b™s_³r_§m¶e
(
AVCodecID
 
codec_id
);

4468 
	`av_g‘_exaù_b™s_³r_§m¶e
(
AVCodecID
 
codec_id
);

4478 
	`av_g‘_audio_äame_du¿tiÚ
(
AVCodecCÚ‹xt
 *
avùx
, 
äame_by‹s
);

4481 
	sAVB™SŒ—mF‹rCÚ‹xt
 {

4482 *
´iv_d©a
;

4483 
AVB™SŒ—mF‹r
 *
f‹r
;

4484 
AVCodecP¬£rCÚ‹xt
 *
·r£r
;

4485 
AVB™SŒ—mF‹rCÚ‹xt
 *
Ãxt
;

4486 } 
	tAVB™SŒ—mF‹rCÚ‹xt
;

4489 
	sAVB™SŒ—mF‹r
 {

4490 cÚ¡ *
Çme
;

4491 
´iv_d©a_size
;

4492 (*
f‹r
)(
AVB™SŒ—mF‹rCÚ‹xt
 *
bsfc
,

4493 
AVCodecCÚ‹xt
 *
avùx
, cÚ¡ *
¬gs
,

4494 
ušt8_t
 **
poutbuf
, *
poutbuf_size
,

4495 cÚ¡ 
ušt8_t
 *
buf
, 
buf_size
, 
keyäame
);

4496 (*
şo£
)(
AVB™SŒ—mF‹rCÚ‹xt
 *
bsfc
);

4497 
AVB™SŒ—mF‹r
 *
Ãxt
;

4498 } 
	tAVB™SŒ—mF‹r
;

4500 
	`av_»gi¡”_b™¡»am_f‹r
(
AVB™SŒ—mF‹r
 *
bsf
);

4501 
AVB™SŒ—mF‹rCÚ‹xt
 *
	`av_b™¡»am_f‹r_š™
(cÚ¡ *
Çme
);

4502 
	`av_b™¡»am_f‹r_f‹r
(
AVB™SŒ—mF‹rCÚ‹xt
 *
bsfc
,

4503 
AVCodecCÚ‹xt
 *
avùx
, cÚ¡ *
¬gs
,

4504 
ušt8_t
 **
poutbuf
, *
poutbuf_size
,

4505 cÚ¡ 
ušt8_t
 *
buf
, 
buf_size
, 
keyäame
);

4506 
	`av_b™¡»am_f‹r_şo£
(
AVB™SŒ—mF‹rCÚ‹xt
 *
bsf
);

4508 
AVB™SŒ—mF‹r
 *
	`av_b™¡»am_f‹r_Ãxt
(AVB™SŒ—mF‹¸*
f
);

4517 *
	`av_ç¡_»®loc
(*
±r
, *
size
, 
size_t
 
mš_size
);

4531 
	`av_ç¡_m®loc
(*
±r
, *
size
, 
size_t
 
mš_size
);

4540 
	`av_ç¡_·dded_m®loc
(*
±r
, *
size
, 
size_t
 
mš_size
);

4549 
	`av_xhÏcšg
(*
s
, 
v
);

4563 
	`av_log_missšg_ã©u»
(*
avc
, cÚ¡ *
ã©u»
, 
wªt_§m¶e
);

4573 
	$av_log_ask_fÜ_§m¶e
(*
avc
, cÚ¡ *
msg
, ...è
	`av_´štf_fÜm©
(2, 3);

4578 
	`av_»gi¡”_hwacûl
(
AVHWAcûl
 *
hwacûl
);

4585 
AVHWAcûl
 *
	`av_hwacûl_Ãxt
(AVHWAcûÈ*
hwacûl
);

4591 
	eAVLockOp
 {

4592 
AV_LOCK_CREATE
,

4593 
AV_LOCK_OBTAIN
,

4594 
AV_LOCK_RELEASE
,

4595 
AV_LOCK_DESTROY
,

4611 
	`av_lockmgr_»gi¡”
((*
cb
)(**
mu‹x
, 
AVLockOp
 
İ
));

4616 
AVMedŸTy³
 
	`avcodec_g‘_ty³
(
AVCodecID
 
codec_id
);

4622 
	`avcodec_is_İ’
(
AVCodecCÚ‹xt
 *
s
);

4627 
	`av_codec_is_’cod”
(cÚ¡ 
AVCodec
 *
codec
);

4632 
	`av_codec_is_decod”
(cÚ¡ 
AVCodec
 *
codec
);

4637 cÚ¡ 
AVCodecDesütÜ
 *
	`avcodec_desütÜ_g‘
(
AVCodecID
 
id
);

4646 cÚ¡ 
AVCodecDesütÜ
 *
	`avcodec_desütÜ_Ãxt
(cÚ¡ AVCodecDesütÜ *
´ev
);

4652 cÚ¡ 
AVCodecDesütÜ
 *
	`avcodec_desütÜ_g‘_by_Çme
(cÚ¡ *
Çme
);

	@/usr/include/libavformat/avformat.h

21 #iâdeà
AVFORMAT_AVFORMAT_H


22 
	#AVFORMAT_AVFORMAT_H


	)

201 
	~<time.h
>

202 
	~<¡dio.h
>

203 
	~"libavcodec/avcodec.h
"

204 
	~"libavut/diù.h
"

205 
	~"libavut/log.h
"

207 
	~"avio.h
"

208 
	~"libavfÜm©/v”siÚ.h
"

210 #ià
FF_API_AV_GETTIME


211 
	~"libavut/time.h
"

214 
	gAVFÜm©CÚ‹xt
;

301 
av_g‘_·ck‘
(
AVIOCÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
, 
size
);

317 
av_­³nd_·ck‘
(
AVIOCÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
, 
size
);

326 
	sAVF¿c
 {

327 
št64_t
 
	mv®
, 
	mnum
, 
	md’
;

328 } 
	tAVF¿c
;

333 
	gAVCodecTag
;

338 
	sAVProbeD©a
 {

339 cÚ¡ *
	mf’ame
;

340 *
	mbuf
;

341 
	mbuf_size
;

342 } 
	tAVProbeD©a
;

344 
	#AVPROBE_SCORE_MAX
 100

345 
	#AVPROBE_PADDING_SIZE
 32

346 

	)

348 
	#AVFMT_NOFILE
 0x0001

	)

349 
	#AVFMT_NEEDNUMBER
 0x0002

	)

350 
	#AVFMT_SHOW_IDS
 0x0008

	)

351 
	#AVFMT_RAWPICTURE
 0x0020

	)

353 
	#AVFMT_GLOBALHEADER
 0x0040

	)

354 
	#AVFMT_NOTIMESTAMPS
 0x0080

	)

355 
	#AVFMT_GENERIC_INDEX
 0x0100

	)

356 
	#AVFMT_TS_DISCONT
 0x0200

	)

357 
	#AVFMT_VARIABLE_FPS
 0x0400

	)

358 
	#AVFMT_NODIMENSIONS
 0x0800

	)

359 
	#AVFMT_NOSTREAMS
 0x1000

	)

360 
	#AVFMT_NOBINSEARCH
 0x2000

	)

361 
	#AVFMT_NOGENSEARCH
 0x4000

	)

362 
	#AVFMT_NO_BYTE_SEEK
 0x8000

	)

363 
	#AVFMT_ALLOW_FLUSH
 0x10000

	)

364 
	#AVFMT_TS_NONSTRICT
 0x20000

	)

372 
	sAVOuutFÜm©
 {

373 cÚ¡ *
	mÇme
;

379 cÚ¡ *
	mlÚg_Çme
;

380 cÚ¡ *
	mmime_ty³
;

381 cÚ¡ *
	mex‹nsiÚs
;

383 
AVCodecID
 
	maudio_codec
;

384 
AVCodecID
 
	mvideo_codec
;

385 
AVCodecID
 
	msubt™Ë_codec
;

392 
	mæags
;

398 cÚ¡ 
AVCodecTag
 * cÚ¡ *
	mcodec_g
;

401 cÚ¡ 
AVCÏss
 *
	m´iv_şass
;

410 
AVOuutFÜm©
 *
	mÃxt
;

414 
	m´iv_d©a_size
;

416 (*
	mwr™e_h—d”
)(
	mAVFÜm©CÚ‹xt
 *);

424 (*
	mwr™e_·ck‘
)(
	mAVFÜm©CÚ‹xt
 *, 
AVPack‘
 *
	mpkt
);

425 (*
	mwr™e_Œa”
)(
	mAVFÜm©CÚ‹xt
 *);

429 (*
	mš‹¾—ve_·ck‘
)(
	mAVFÜm©CÚ‹xt
 *, 
AVPack‘
 *
	mout
,

430 
AVPack‘
 *
	mš
, 
	mæush
);

437 (*
	mqu”y_codec
)(
AVCodecID
 
	mid
, 
	m¡d_com¶Ÿnû
);

438 } 
	tAVOuutFÜm©
;

447 
	sAVIÅutFÜm©
 {

452 cÚ¡ *
	mÇme
;

459 cÚ¡ *
	mlÚg_Çme
;

466 
	mæags
;

473 cÚ¡ *
	mex‹nsiÚs
;

475 cÚ¡ 
AVCodecTag
 * cÚ¡ *
	mcodec_g
;

477 cÚ¡ 
AVCÏss
 *
	m´iv_şass
;

486 
AVIÅutFÜm©
 *
	mÃxt
;

491 
	m¿w_codec_id
;

496 
	m´iv_d©a_size
;

503 (*
	m»ad_´obe
)(
	mAVProbeD©a
 *);

510 (*
	m»ad_h—d”
)(
	mAVFÜm©CÚ‹xt
 *);

521 (*
	m»ad_·ck‘
)(
	mAVFÜm©CÚ‹xt
 *, 
AVPack‘
 *
	mpkt
);

527 (*
	m»ad_şo£
)(
	mAVFÜm©CÚ‹xt
 *);

537 (*
	m»ad_£ek
)(
	mAVFÜm©CÚ‹xt
 *,

538 
	m¡»am_šdex
, 
št64_t
 
	mtime¡amp
, 
	mæags
);

544 
št64_t
 (*
»ad_time¡amp
)(
AVFÜm©CÚ‹xt
 *
	ms
, 
	m¡»am_šdex
,

545 
št64_t
 *
	mpos
, iÁ64_ˆ
	mpos_lim™
);

551 (*
	m»ad_¶ay
)(
	mAVFÜm©CÚ‹xt
 *);

557 (*
	m»ad_·u£
)(
	mAVFÜm©CÚ‹xt
 *);

565 (*
	m»ad_£ek2
)(
AVFÜm©CÚ‹xt
 *
	ms
, 
	m¡»am_šdex
, 
št64_t
 
	mmš_ts
, iÁ64_ˆ
	mts
, iÁ64_ˆ
	mmax_ts
, 
	mæags
);

566 } 
	tAVIÅutFÜm©
;

571 
	eAVSŒ—mP¬£Ty³
 {

572 
	mAVSTREAM_PARSE_NONE
,

573 
	mAVSTREAM_PARSE_FULL
,

574 
	mAVSTREAM_PARSE_HEADERS
,

575 
	mAVSTREAM_PARSE_TIMESTAMPS
,

576 
	mAVSTREAM_PARSE_FULL_ONCE
,

579 
	sAVIndexEÁry
 {

580 
št64_t
 
	mpos
;

581 
št64_t
 
	mtime¡amp
;

582 
	#AVINDEX_KEYFRAME
 0x0001

	)

583 
	mæags
:2;

584 
	msize
:30;

585 
	mmš_di¡ªû
;

586 } 
	tAVIndexEÁry
;

588 
	#AV_DISPOSITION_DEFAULT
 0x0001

	)

589 
	#AV_DISPOSITION_DUB
 0x0002

	)

590 
	#AV_DISPOSITION_ORIGINAL
 0x0004

	)

591 
	#AV_DISPOSITION_COMMENT
 0x0008

	)

592 
	#AV_DISPOSITION_LYRICS
 0x0010

	)

593 
	#AV_DISPOSITION_KARAOKE
 0x0020

	)

600 
	#AV_DISPOSITION_FORCED
 0x0040

	)

601 
	#AV_DISPOSITION_HEARING_IMPAIRED
 0x0080

	)

602 
	#AV_DISPOSITION_VISUAL_IMPAIRED
 0x0100

	)

603 
	#AV_DISPOSITION_CLEAN_EFFECTS
 0x0200

	)

610 
	#AV_DISPOSITION_ATTACHED_PIC
 0x0400

	)

619 
	sAVSŒ—m
 {

620 
	mšdex
;

626 
	mid
;

638 
AVCodecCÚ‹xt
 *
	mcodec
;

639 #ià
FF_API_R_FRAME_RATE


648 
AVR©iÚ®
 
	mr_äame_¿‹
;

650 *
	m´iv_d©a
;

655 
AVF¿c
 
	m±s
;

666 
AVR©iÚ®
 
	mtime_ba£
;

674 
št64_t
 
	m¡¬t_time
;

681 
št64_t
 
	mdu¿tiÚ
;

683 
št64_t
 
	mnb_äames
;

685 
	mdi¥os™iÚ
;

687 
AVDisÿrd
 
	mdisÿrd
;

694 
AVR©iÚ®
 
	m§m¶e_a¥eù_¿tio
;

696 
AVDiùiÚ¬y
 *
	mm‘ad©a
;

701 
AVR©iÚ®
 
	mavg_äame_¿‹
;

710 
AVPack‘
 
	m©ched_pic
;

723 
	#MAX_STD_TIMEBASES
 (60*12+5)

	)

725 #ià
FF_API_R_FRAME_RATE


726 
št64_t
 
	mÏ¡_dts
;

727 
št64_t
 
	mdu¿tiÚ_gcd
;

728 
	mdu¿tiÚ_couÁ
;

729 
	mdu¿tiÚ_”rÜ
[
MAX_STD_TIMEBASES
];

731 
	mnb_decoded_äames
;

732 
	mfound_decod”
;

737 
št64_t
 
	mås_fœ¡_dts
;

738 
	mås_fœ¡_dts_idx
;

739 
št64_t
 
	mås_Ï¡_dts
;

740 
	mås_Ï¡_dts_idx
;

742 } *
	mšfo
;

744 
	m±s_w¿p_b™s
;

754 
št64_t
 
	m»ã»nû_dts
;

755 
št64_t
 
	mfœ¡_dts
;

756 
št64_t
 
	mcur_dts
;

757 
št64_t
 
	mÏ¡_IP_±s
;

758 
	mÏ¡_IP_du¿tiÚ
;

763 
	#MAX_PROBE_PACKETS
 2500

	)

764 
	m´obe_·ck‘s
;

769 
	mcodec_šfo_nb_äames
;

772 
AVSŒ—mP¬£Ty³
 
	mÃed_·rsšg
;

773 
AVCodecP¬£rCÚ‹xt
 *
	m·r£r
;

778 
AVPack‘Li¡
 *
	mÏ¡_š_·ck‘_bufãr
;

779 
AVProbeD©a
 
	m´obe_d©a
;

780 
	#MAX_REORDER_DELAY
 16

	)

781 
št64_t
 
	m±s_bufãr
[
MAX_REORDER_DELAY
+1];

783 
AVIndexEÁry
 *
	mšdex_’Œ›s
;

785 
	mnb_šdex_’Œ›s
;

786 
	mšdex_’Œ›s_®loÿ‹d_size
;

787 } 
	tAVSŒ—m
;

789 
	#AV_PROGRAM_RUNNING
 1

	)

797 
	sAVProg¿m
 {

798 
	mid
;

799 
	mæags
;

800 
AVDisÿrd
 
	mdisÿrd
;

801 *
	m¡»am_šdex
;

802 
	mnb_¡»am_šdexes
;

803 
AVDiùiÚ¬y
 *
	mm‘ad©a
;

804 } 
	tAVProg¿m
;

806 
	#AVFMTCTX_NOHEADER
 0x0001

	)

809 
	sAVCh­‹r
 {

810 
	mid
;

811 
AVR©iÚ®
 
	mtime_ba£
;

812 
št64_t
 
	m¡¬t
, 
	m’d
;

813 
AVDiùiÚ¬y
 *
	mm‘ad©a
;

814 } 
	tAVCh­‹r
;

824 
	sAVFÜm©CÚ‹xt
 {

829 cÚ¡ 
AVCÏss
 *
	mav_şass
;

837 
AVIÅutFÜm©
 *
	mifÜm©
;

838 
AVOuutFÜm©
 *
	mofÜm©
;

844 *
	m´iv_d©a
;

857 
AVIOCÚ‹xt
 *
	mpb
;

860 
	mùx_æags
;

871 
	mnb_¡»ams
;

872 
AVSŒ—m
 **
	m¡»ams
;

874 
	mf’ame
[1024];

881 
št64_t
 
	m¡¬t_time
;

889 
št64_t
 
	mdu¿tiÚ
;

896 
	mb™_¿‹
;

898 
	m·ck‘_size
;

899 
	mmax_d–ay
;

901 
	mæags
;

902 
	#AVFMT_FLAG_GENPTS
 0x0001

903 
	#AVFMT_FLAG_IGNIDX
 0x0002

904 
	#AVFMT_FLAG_NONBLOCK
 0x0004

905 
	#AVFMT_FLAG_IGNDTS
 0x0008

906 
	#AVFMT_FLAG_NOFILLIN
 0x0010

907 
	#AVFMT_FLAG_NOPARSE
 0x0020

908 
	#AVFMT_FLAG_NOBUFFER
 0x0040

909 
	#AVFMT_FLAG_CUSTOM_IO
 0x0080

910 
	#AVFMT_FLAG_DISCARD_CORRUPT
 0x0100

911 

	)

915 
	m´obesize
;

921 
	mmax_ª®yze_du¿tiÚ
;

923 cÚ¡ 
ušt8_t
 *
	mkey
;

924 
	mkeyËn
;

926 
	mnb_´og¿ms
;

927 
AVProg¿m
 **
	m´og¿ms
;

933 
AVCodecID
 
	mvideo_codec_id
;

939 
AVCodecID
 
	maudio_codec_id
;

945 
AVCodecID
 
	msubt™Ë_codec_id
;

957 
	mmax_šdex_size
;

963 
	mmax_piùu»_bufãr
;

965 
	mnb_ch­‹rs
;

966 
AVCh­‹r
 **
	mch­‹rs
;

968 
AVDiùiÚ¬y
 *
	mm‘ad©a
;

977 
št64_t
 
	m¡¬t_time_»®time
;

982 
	mås_´obe_size
;

990 
	m”rÜ_»cogn™iÚ
;

1001 
AVIOIÁ”ru±CB
 
	mš‹¼u±_ÿÎback
;

1006 
	mdebug
;

1007 
	#FF_FDEBUG_TS
 0x0001

	)

1021 
AVPack‘Li¡
 *
	m·ck‘_bufãr
;

1022 
AVPack‘Li¡
 *
	m·ck‘_bufãr_’d
;

1025 
št64_t
 
	md©a_off£t
;

1033 
AVPack‘Li¡
 *
	m¿w_·ck‘_bufãr
;

1034 
AVPack‘Li¡
 *
	m¿w_·ck‘_bufãr_’d
;

1038 
AVPack‘Li¡
 *
	m·r£_queue
;

1039 
AVPack‘Li¡
 *
	m·r£_queue_’d
;

1043 
	#RAW_PACKET_BUFFER_SIZE
 2500000

	)

1044 
	m¿w_·ck‘_bufãr_»maššg_size
;

1045 } 
	tAVFÜm©CÚ‹xt
;

1047 
	sAVPack‘Li¡
 {

1048 
AVPack‘
 
	mpkt
;

1049 
AVPack‘Li¡
 *
	mÃxt
;

1050 } 
	tAVPack‘Li¡
;

1065 
avfÜm©_v”siÚ
();

1070 cÚ¡ *
avfÜm©_cÚfigu¿tiÚ
();

1075 cÚ¡ *
avfÜm©_liûn£
();

1086 
av_»gi¡”_®l
();

1088 
av_»gi¡”_šput_fÜm©
(
AVIÅutFÜm©
 *
fÜm©
);

1089 
av_»gi¡”_ouut_fÜm©
(
AVOuutFÜm©
 *
fÜm©
);

1099 
avfÜm©_ÃtwÜk_š™
();

1104 
avfÜm©_ÃtwÜk_deš™
();

1111 
AVIÅutFÜm©
 *
av_ifÜm©_Ãxt
(AVIÅutFÜm© *
f
);

1118 
AVOuutFÜm©
 *
av_ofÜm©_Ãxt
(AVOuutFÜm© *
f
);

1125 
AVFÜm©CÚ‹xt
 *
avfÜm©_®loc_cÚ‹xt
();

1131 
avfÜm©_ä“_cÚ‹xt
(
AVFÜm©CÚ‹xt
 *
s
);

1139 cÚ¡ 
AVCÏss
 *
avfÜm©_g‘_şass
();

1156 
AVSŒ—m
 *
avfÜm©_Ãw_¡»am
(
AVFÜm©CÚ‹xt
 *
s
, 
AVCodec
 *
c
);

1158 
AVProg¿m
 *
av_Ãw_´og¿m
(
AVFÜm©CÚ‹xt
 *
s
, 
id
);

1173 
AVIÅutFÜm©
 *
av_fšd_šput_fÜm©
(cÚ¡ *
shÜt_Çme
);

1181 
AVIÅutFÜm©
 *
av_´obe_šput_fÜm©
(
AVProbeD©a
 *
pd
, 
is_İ’ed
);

1194 
AVIÅutFÜm©
 *
av_´obe_šput_fÜm©2
(
AVProbeD©a
 *
pd
, 
is_İ’ed
, *
scÜe_max
);

1211 
av_´obe_šput_bufãr
(
AVIOCÚ‹xt
 *
pb
, 
AVIÅutFÜm©
 **
fmt
,

1212 cÚ¡ *
f’ame
, *
logùx
,

1213 
off£t
, 
max_´obe_size
);

1234 
avfÜm©_İ’_šput
(
AVFÜm©CÚ‹xt
 **
ps
, cÚ¡ *
f’ame
, 
AVIÅutFÜm©
 *
fmt
, 
AVDiùiÚ¬y
 **
İtiÚs
);

1257 
avfÜm©_fšd_¡»am_šfo
(
AVFÜm©CÚ‹xt
 *
ic
, 
AVDiùiÚ¬y
 **
İtiÚs
);

1283 
av_fšd_be¡_¡»am
(
AVFÜm©CÚ‹xt
 *
ic
,

1284 
AVMedŸTy³
 
ty³
,

1285 
wª‹d_¡»am_nb
,

1286 
»Ï‹d_¡»am
,

1287 
AVCodec
 **
decod”_»t
,

1288 
æags
);

1290 #ià
FF_API_READ_PACKET


1304 
©Œibu‹_d•»ÿ‹d


1305 
av_»ad_·ck‘
(
AVFÜm©CÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
);

1332 
av_»ad_äame
(
AVFÜm©CÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
);

1345 
av_£ek_äame
(
AVFÜm©CÚ‹xt
 *
s
, 
¡»am_šdex
, 
št64_t
 
time¡amp
,

1346 
æags
);

1374 
avfÜm©_£ek_fe
(
AVFÜm©CÚ‹xt
 *
s
, 
¡»am_šdex
, 
št64_t
 
mš_ts
, iÁ64_ˆ
ts
, iÁ64_ˆ
max_ts
, 
æags
);

1380 
av_»ad_¶ay
(
AVFÜm©CÚ‹xt
 *
s
);

1387 
av_»ad_·u£
(
AVFÜm©CÚ‹xt
 *
s
);

1389 #ià
FF_API_CLOSE_INPUT_FILE


1396 
©Œibu‹_d•»ÿ‹d


1397 
av_şo£_šput_fe
(
AVFÜm©CÚ‹xt
 *
s
);

1404 
avfÜm©_şo£_šput
(
AVFÜm©CÚ‹xt
 **
s
);

1409 
	#AVSEEK_FLAG_BACKWARD
 1

1410 
	#AVSEEK_FLAG_BYTE
 2

1411 
	#AVSEEK_FLAG_ANY
 4

1412 
	#AVSEEK_FLAG_FRAME
 8

1413 

	)

1433 
avfÜm©_wr™e_h—d”
(
AVFÜm©CÚ‹xt
 *
s
, 
AVDiùiÚ¬y
 **
İtiÚs
);

1451 
av_wr™e_äame
(
AVFÜm©CÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
);

1479 
av_š‹¾—ved_wr™e_äame
(
AVFÜm©CÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
);

1481 #ià
FF_API_INTERLEAVE_PACKET


1486 
©Œibu‹_d•»ÿ‹d


1487 
av_š‹¾—ve_·ck‘_³r_dts
(
AVFÜm©CÚ‹xt
 *
s
, 
AVPack‘
 *
out
,

1488 
AVPack‘
 *
pkt
, 
æush
);

1500 
av_wr™e_Œa”
(
AVFÜm©CÚ‹xt
 *
s
);

1514 
AVOuutFÜm©
 *
av_guess_fÜm©
(cÚ¡ *
shÜt_Çme
,

1515 cÚ¡ *
f’ame
,

1516 cÚ¡ *
mime_ty³
);

1521 
AVCodecID
 
av_guess_codec
(
AVOuutFÜm©
 *
fmt
, cÚ¡ *
shÜt_Çme
,

1522 cÚ¡ *
f’ame
, cÚ¡ *
mime_ty³
,

1523 
AVMedŸTy³
 
ty³
);

1548 
av_hex_dump
(
FILE
 *
f
, cÚ¡ 
ušt8_t
 *
buf
, 
size
);

1562 
av_hex_dump_log
(*
avş
, 
Ëv–
, cÚ¡ 
ušt8_t
 *
buf
, 
size
);

1572 
av_pkt_dump2
(
FILE
 *
f
, 
AVPack‘
 *
pkt
, 
dump_·ylßd
, 
AVSŒ—m
 *
¡
);

1586 
av_pkt_dump_log2
(*
avş
, 
Ëv–
, 
AVPack‘
 *
pkt
, 
dump_·ylßd
,

1587 
AVSŒ—m
 *
¡
);

1596 
AVCodecID
 
av_codec_g‘_id
(cÚ¡ 
AVCodecTag
 * cÚ¡ *
gs
, 
g
);

1605 
av_codec_g‘_g
(cÚ¡ 
AVCodecTag
 * cÚ¡ *
gs
, 
AVCodecID
 
id
);

1607 
av_fšd_deçuÉ_¡»am_šdex
(
AVFÜm©CÚ‹xt
 *
s
);

1617 
av_šdex_£¬ch_time¡amp
(
AVSŒ—m
 *
¡
, 
št64_t
 
time¡amp
, 
æags
);

1625 
av_add_šdex_’Œy
(
AVSŒ—m
 *
¡
, 
št64_t
 
pos
, iÁ64_ˆ
time¡amp
,

1626 
size
, 
di¡ªû
, 
æags
);

1648 
av_u¾_¥l™
(*
´Ùo
, 
´Ùo_size
,

1649 *
authÜiz©iÚ
, 
authÜiz©iÚ_size
,

1650 *
ho¡Çme
, 
ho¡Çme_size
,

1651 *
pÜt_±r
,

1652 *
·th
, 
·th_size
,

1653 cÚ¡ *
u¾
);

1656 
av_dump_fÜm©
(
AVFÜm©CÚ‹xt
 *
ic
,

1657 
šdex
,

1658 cÚ¡ *
u¾
,

1659 
is_ouut
);

1673 
av_g‘_äame_f’ame
(*
buf
, 
buf_size
,

1674 cÚ¡ *
·th
, 
numb”
);

1682 
av_f’ame_numb”_‹¡
(cÚ¡ *
f’ame
);

1701 
av_sdp_ü—‹
(
AVFÜm©CÚ‹xt
 *
ac
[], 
n_fes
, *
buf
, 
size
);

1709 
av_m©ch_ext
(cÚ¡ *
f’ame
, cÚ¡ *
ex‹nsiÚs
);

1719 
avfÜm©_qu”y_codec
(
AVOuutFÜm©
 *
ofmt
, 
AVCodecID
 
codec_id
, 
¡d_com¶Ÿnû
);

1736 cÚ¡ 
AVCodecTag
 *
avfÜm©_g‘_riff_video_gs
();

1740 cÚ¡ 
AVCodecTag
 *
avfÜm©_g‘_riff_audio_gs
();

	@/usr/include/libavutil/mathematics.h

21 #iâdeà
AVUTIL_MATHEMATICS_H


22 
	#AVUTIL_MATHEMATICS_H


	)

24 
	~<¡dšt.h
>

25 
	~<m©h.h
>

26 
	~"©Œibu‹s.h
"

27 
	~"¿tiÚ®.h
"

28 
	~"štæßt.h
"

30 #iâdeà
M_LOG2_10


31 
	#M_LOG2_10
 3.32192809488736234787

	)

33 #iâdeà
M_PHI


34 
	#M_PHI
 1.61803398874989484820

	)

36 #iâdeà
NAN


37 
	#NAN
 
	`av_št2æßt
(0x7fc00000)

	)

39 #iâdeà
INFINITY


40 
	#INFINITY
 
	`av_št2æßt
(0x7f800000)

	)

49 
	eAVRoundšg
 {

50 
	mAV_ROUND_ZERO
 = 0,

51 
	mAV_ROUND_INF
 = 1,

52 
	mAV_ROUND_DOWN
 = 2,

53 
	mAV_ROUND_UP
 = 3,

54 
	mAV_ROUND_NEAR_INF
 = 5,

62 
št64_t
 
av_cÚ¡
 
av_gcd
(št64_ˆ
a
, iÁ64_ˆ
b
);

68 
št64_t
 
	$av_»sÿË
(
št64_t
 
a
, iÁ64_ˆ
b
, iÁ64_ˆ
c
è
av_cÚ¡
;

74 
št64_t
 
	$av_»sÿË_ºd
(
št64_t
 
a
, iÁ64_ˆ
b
, iÁ64_ˆ
c
, 
AVRoundšg
è
av_cÚ¡
;

79 
št64_t
 
	$av_»sÿË_q
(
št64_t
 
a
, 
AVR©iÚ®
 
bq
, AVR©iÚ® 
cq
è
av_cÚ¡
;

84 
št64_t
 
	$av_»sÿË_q_ºd
(
št64_t
 
a
, 
AVR©iÚ®
 
bq
, AVR©iÚ® 
cq
,

85 
AVRoundšg
è
av_cÚ¡
;

93 
	`av_com·»_ts
(
št64_t
 
ts_a
, 
AVR©iÚ®
 
tb_a
, iÁ64_ˆ
ts_b
, AVR©iÚ® 
tb_b
);

105 
št64_t
 
	`av_com·»_mod
(
ušt64_t
 
a
, ušt64_ˆ
b
, ušt64_ˆ
mod
);

	@/usr/include/libavutil/opt.h

22 #iâdeà
AVUTIL_OPT_H


23 
	#AVUTIL_OPT_H


	)

30 
	~"¿tiÚ®.h
"

31 
	~"avut.h
"

32 
	~"diù.h
"

33 
	~"log.h
"

218 
	eAVO±iÚTy³
{

219 
	mAV_OPT_TYPE_FLAGS
,

220 
	mAV_OPT_TYPE_INT
,

221 
	mAV_OPT_TYPE_INT64
,

222 
	mAV_OPT_TYPE_DOUBLE
,

223 
	mAV_OPT_TYPE_FLOAT
,

224 
	mAV_OPT_TYPE_STRING
,

225 
	mAV_OPT_TYPE_RATIONAL
,

226 
	mAV_OPT_TYPE_BINARY
,

227 
	mAV_OPT_TYPE_CONST
 = 128,

233 
	sAVO±iÚ
 {

234 cÚ¡ *
	mÇme
;

240 cÚ¡ *
	mh–p
;

246 
	moff£t
;

247 
AVO±iÚTy³
 
	mty³
;

253 
št64_t
 
	mi64
;

254 
	mdbl
;

255 cÚ¡ *
	m¡r
;

257 
AVR©iÚ®
 
	mq
;

258 } 
	mdeçuÉ_v®
;

259 
	mmš
;

260 
	mmax
;

262 
	mæags
;

263 
	#AV_OPT_FLAG_ENCODING_PARAM
 1

264 
	#AV_OPT_FLAG_DECODING_PARAM
 2

265 
	#AV_OPT_FLAG_METADATA
 4

266 
	#AV_OPT_FLAG_AUDIO_PARAM
 8

	)

267 
	#AV_OPT_FLAG_VIDEO_PARAM
 16

	)

268 
	#AV_OPT_FLAG_SUBTITLE_PARAM
 32

	)

276 cÚ¡ *
	mun™
;

277 } 
	tAVO±iÚ
;

288 
av_İt_show2
(*
obj
, *
av_log_obj
, 
»q_æags
, 
»j_æags
);

295 
av_İt_£t_deçuÉs
(*
s
);

313 
av_£t_İtiÚs_¡ršg
(*
ùx
, cÚ¡ *
İts
,

314 cÚ¡ *
key_v®_£p
, cÚ¡ *
·œs_£p
);

319 
av_İt_ä“
(*
obj
);

329 
av_İt_æag_is_£t
(*
obj
, cÚ¡ *
f›ld_Çme
, cÚ¡ *
æag_Çme
);

345 
av_İt_£t_diù
(*
obj
, 
AVDiùiÚ¬y
 **
İtiÚs
);

361 
av_İt_ev®_æags
 (*
obj
, cÚ¡ 
AVO±iÚ
 *
o
, cÚ¡ *
v®
, *
æags_out
);

362 
av_İt_ev®_št
 (*
obj
, cÚ¡ 
AVO±iÚ
 *
o
, cÚ¡ *
v®
, *
št_out
);

363 
av_İt_ev®_št64
 (*
obj
, cÚ¡ 
AVO±iÚ
 *
o
, cÚ¡ *
v®
, 
št64_t
 *
št64_out
);

364 
av_İt_ev®_æßt
 (*
obj
, cÚ¡ 
AVO±iÚ
 *
o
, cÚ¡ *
v®
, *
æßt_out
);

365 
av_İt_ev®_doubË
(*
obj
, cÚ¡ 
AVO±iÚ
 *
o
, cÚ¡ *
v®
, *
doubË_out
);

366 
av_İt_ev®_q
 (*
obj
, cÚ¡ 
AVO±iÚ
 *
o
, cÚ¡ *
v®
, 
AVR©iÚ®
 *
q_out
);

371 
	#AV_OPT_SEARCH_CHILDREN
 0x0001

	)

379 
	#AV_OPT_SEARCH_FAKE_OBJ
 0x0002

	)

403 cÚ¡ 
AVO±iÚ
 *
av_İt_fšd
(*
obj
, cÚ¡ *
Çme
, cÚ¡ *
un™
,

404 
İt_æags
, 
£¬ch_æags
);

427 cÚ¡ 
AVO±iÚ
 *
av_İt_fšd2
(*
obj
, cÚ¡ *
Çme
, cÚ¡ *
un™
,

428 
İt_æags
, 
£¬ch_æags
, **
rg‘_obj
);

439 cÚ¡ 
AVO±iÚ
 *
av_İt_Ãxt
(*
obj
, cÚ¡ AVO±iÚ *
´ev
);

447 *
av_İt_chd_Ãxt
(*
obj
, *
´ev
);

455 cÚ¡ 
AVCÏss
 *
av_İt_chd_şass_Ãxt
(cÚ¡ AVCÏs *
·»Á
, cÚ¡ AVCÏs *
´ev
);

483 
av_İt_£t
 (*
obj
, cÚ¡ *
Çme
, cÚ¡ *
v®
, 
£¬ch_æags
);

484 
av_İt_£t_št
 (*
obj
, cÚ¡ *
Çme
, 
št64_t
 
v®
, 
£¬ch_æags
);

485 
av_İt_£t_doubË
(*
obj
, cÚ¡ *
Çme
, 
v®
, 
£¬ch_æags
);

486 
av_İt_£t_q
 (*
obj
, cÚ¡ *
Çme
, 
AVR©iÚ®
 
v®
, 
£¬ch_æags
);

487 
av_İt_£t_bš
 (*
obj
, cÚ¡ *
Çme
, cÚ¡ 
ušt8_t
 *
v®
, 
size
, 
£¬ch_æags
);

507 
av_İt_g‘
 (*
obj
, cÚ¡ *
Çme
, 
£¬ch_æags
, 
ušt8_t
 **
out_v®
);

508 
av_İt_g‘_št
 (*
obj
, cÚ¡ *
Çme
, 
£¬ch_æags
, 
št64_t
 *
out_v®
);

509 
av_İt_g‘_doubË
(*
obj
, cÚ¡ *
Çme
, 
£¬ch_æags
, *
out_v®
);

510 
av_İt_g‘_q
 (*
obj
, cÚ¡ *
Çme
, 
£¬ch_æags
, 
AVR©iÚ®
 *
out_v®
);

	@/usr/include/libraw1394/raw1394.h

13 #iâdeà
_LIBRAW1394_RAW1394_H


14 
	#_LIBRAW1394_RAW1394_H


	)

16 
	~<sys/ty³s.h
>

18 
	#RAW1394_ARM_READ
 1

	)

19 
	#RAW1394_ARM_WRITE
 2

	)

20 
	#RAW1394_ARM_LOCK
 4

	)

22 
	#RAW1394_LONG_RESET
 0

	)

23 
	#RAW1394_SHORT_RESET
 1

	)

26 
	#RAW1394_NOTIFY_OFF
 0

	)

27 
	#RAW1394_NOTIFY_ON
 1

	)

30 
	#RAW1394_EXTCODE_MASK_SWAP
 0x1

	)

31 
	#RAW1394_EXTCODE_COMPARE_SWAP
 0x2

	)

32 
	#RAW1394_EXTCODE_FETCH_ADD
 0x3

	)

33 
	#RAW1394_EXTCODE_LITTLE_ADD
 0x4

	)

34 
	#RAW1394_EXTCODE_BOUNDED_ADD
 0x5

	)

35 
	#RAW1394_EXTCODE_WRAP_ADD
 0x6

	)

38 
	#RAW1394_RCODE_COMPLETE
 0x0

	)

39 
	#RAW1394_RCODE_CONFLICT_ERROR
 0x4

	)

40 
	#RAW1394_RCODE_DATA_ERROR
 0x5

	)

41 
	#RAW1394_RCODE_TYPE_ERROR
 0x6

	)

42 
	#RAW1394_RCODE_ADDRESS_ERROR
 0x7

	)

44 
u_št8_t
 
	tby‹_t
;

45 
u_št32_t
 
	tquadËt_t
;

46 
u_št64_t
 
	toùËt_t
;

47 
u_št64_t
 
	tnod—ddr_t
;

48 
u_št16_t
 
	tnodeid_t
;

49 
u_št8_t
 
	tphyid_t
;

50 
u_št8_t
 
	t¬m_İtiÚs_t
;

51 
u_št16_t
 
	t¬m_Ëngth_t
;

53 
¿w1394_hªdË
 *
	t¿w1394hªdË_t
;

55 
	s¿w1394_¬m_»que¡
 {

56 
nodeid_t
 
	mde¡š©iÚ_nodeid
;

57 
nodeid_t
 
	msourû_nodeid
;

58 
nod—ddr_t
 
	mde¡š©iÚ_off£t
;

59 
u_št8_t
 
	mab–
;

60 
u_št8_t
 
	mtcode
;

61 
u_št8_t
 
	mex‹nded_Œª§ùiÚ_code
;

62 
u_št32_t
 
	mg’”©iÚ
;

63 
¬m_Ëngth_t
 
	mbufãr_Ëngth
;

64 
by‹_t
 *
	mbufãr
;

65 } *
	t¿w1394_¬m_»que¡_t
;

67 
	s¿w1394_¬m_»¥Ú£
 {

68 
	m»¥Ú£_code
;

69 
¬m_Ëngth_t
 
	mbufãr_Ëngth
;

70 
by‹_t
 *
	mbufãr
;

71 } *
	t¿w1394_¬m_»¥Ú£_t
;

73 
	s¿w1394_¬m_»que¡_»¥Ú£
 {

74 
¿w1394_¬m_»que¡
 *
	m»que¡
;

75 
¿w1394_¬m_»¥Ú£
 *
	m»¥Ú£
;

76 } *
	t¿w1394_¬m_»que¡_»¥Ú£_t
;

80 
	e¿w1394_iso_¥“d
 {

81 
	mRAW1394_ISO_SPEED_100
 = 0,

82 
	mRAW1394_ISO_SPEED_200
 = 1,

83 
	mRAW1394_ISO_SPEED_400
 = 2,

87 
	e¿w1394_iso_dma_»cv_mode
 {

88 
	mRAW1394_DMA_DEFAULT
 = -1,

89 
	mRAW1394_DMA_BUFFERFILL
 = 1,

90 
	mRAW1394_DMA_PACKET_PER_BUFFER
 = 2

95 
	e¿w1394_iso_di¥os™iÚ
 {

97 
	mRAW1394_ISO_OK
 = 0,

100 
	mRAW1394_ISO_DEFER
 = 1,

103 
	mRAW1394_ISO_ERROR
 = 2,

106 
	mRAW1394_ISO_STOP
 = 3,

109 
	mRAW1394_ISO_STOP_NOSYNC
 = 4,

114 
	mRAW1394_ISO_AGAIN
 = 5,

117 
	e¿w1394_modify_mode
 {

118 
	mRAW1394_MODIFY_ALLOC
,

119 
	mRAW1394_MODIFY_FREE


122 #ifdeà
__ılu¥lus


128 
¿w1394_iso_di¥os™iÚ
 (*
	t¿w1394_iso_xm™_hªdËr_t
)(

129 
	t¿w1394hªdË_t
 
	thªdË
,

130 *
	td©a
,

131 *
	tËn
,

132 *
	tg
,

133 *
	tsy
,

134 
	tcyşe
,

135 
	tdrİ³d
);

137 
¿w1394_iso_di¥os™iÚ
 (*
	t¿w1394_iso_»cv_hªdËr_t
)(

138 
	t¿w1394hªdË_t
 
	thªdË
,

139 *
	td©a
,

140 
	tËn
,

141 
	tchªÃl
,

142 
	tg
,

143 
	tsy
,

144 
	tcyşe
,

145 
	tdrİ³d
);

163 
¿w1394_iso_xm™_š™
(
¿w1394hªdË_t
 
hªdË
,

164 
¿w1394_iso_xm™_hªdËr_t
 
hªdËr
,

165 
buf_·ck‘s
,

166 
max_·ck‘_size
,

167 
chªÃl
,

168 
¿w1394_iso_¥“d
 
¥“d
,

169 
œq_š‹rv®
);

187 
¿w1394_iso_»cv_š™
(
¿w1394hªdË_t
 
hªdË
,

188 
¿w1394_iso_»cv_hªdËr_t
 
hªdËr
,

189 
buf_·ck‘s
,

190 
max_·ck‘_size
,

191 
chªÃl
,

192 
¿w1394_iso_dma_»cv_mode
 
mode
,

193 
œq_š‹rv®
);

209 
¿w1394_iso_muÉichªÃl_»cv_š™
(
¿w1394hªdË_t
 
hªdË
,

210 
¿w1394_iso_»cv_hªdËr_t
 
hªdËr
,

211 
buf_·ck‘s
,

212 
max_·ck‘_size
,

213 
œq_š‹rv®
);

224 
¿w1394_iso_»cv_li¡’_chªÃl
(
¿w1394hªdË_t
 
hªdË
,

225 
chªÃl
);

234 
¿w1394_iso_»cv_uÆi¡’_chªÃl
(
¿w1394hªdË_t
 
hªdË
,

235 
chªÃl
);

247 
¿w1394_iso_»cv_£t_chªÃl_mask
(
¿w1394hªdË_t
 
hªdË
, 
u_št64_t
 
mask
);

259 
¿w1394_iso_xm™_¡¬t
(
¿w1394hªdË_t
 
hªdË
, 
¡¬t_Ú_cyşe
,

260 
´ebufãr_·ck‘s
);

272 
¿w1394_iso_»cv_¡¬t
(
¿w1394hªdË_t
 
hªdË
, 
¡¬t_Ú_cyşe
,

273 
g_mask
, 
sync
);

290 
¿w1394_iso_xm™_wr™e
(
¿w1394hªdË_t
 
hªdË
, *
d©a
,

291 
Ën
, 
g
,

292 
sy
);

300 
¿w1394_iso_xm™_sync
(
¿w1394hªdË_t
 
hªdË
);

317 
¿w1394_iso_»cv_æush
(
¿w1394hªdË_t
 
hªdË
);

323 
¿w1394_iso_¡İ
(
¿w1394hªdË_t
 
hªdË
);

329 
¿w1394_iso_shutdown
(
¿w1394hªdË_t
 
hªdË
);

347 
¿w1394_»ad_cyşe_tim”
(
¿w1394hªdË_t
 
hªdË
,

348 
u_št32_t
 *
cyşe_tim”
, 
u_št64_t
 *
loÿl_time
);

350 
	t¿w1394_”rcode_t
;

351 
	#¿w1394_make_”rcode
(
ack
, 
rcode
è((×ckè<< 16è|„code)

	)

352 
	#¿w1394_š‹º®_”r
(
”rcode
è(Ó¼codeè< 0)

	)

353 
	#¿w1394_g‘_ack
(
”rcode
è(Ó¼codeè>> 16)

	)

354 
	#¿w1394_g‘_rcode
(
”rcode
è(Ó¼codeè& 0xf)

	)

355 
	#¿w1394_g‘_š‹º®
(
”rcode
èÓ¼code)

	)

371 
¿w1394_”rcode_t
 
¿w1394_g‘_”rcode
(
¿w1394hªdË_t
 
hªdË
);

392 
¿w1394_”rcode_to_”ºo
(
¿w1394_”rcode_t
 
”rcode
);

411 
¿w1394hªdË_t
 
¿w1394_Ãw_hªdË
();

421 
¿w1394_de¡roy_hªdË
(
¿w1394hªdË_t
 
hªdË
);

440 
¿w1394hªdË_t
 
¿w1394_Ãw_hªdË_Ú_pÜt
(
pÜt
);

449 
¿w1394_bu¤e£t_nÙify
 (
¿w1394hªdË_t
 
hªdË
, 
off_Ú_sw™ch
);

464 
¿w1394_g‘_fd
(
¿w1394hªdË_t
 
hªdË
);

476 
¿w1394_£t_u£rd©a
(
¿w1394hªdË_t
 
hªdË
, *
d©a
);

485 *
¿w1394_g‘_u£rd©a
(
¿w1394hªdË_t
 
hªdË
);

494 
nodeid_t
 
¿w1394_g‘_loÿl_id
(
¿w1394hªdË_t
 
hªdË
);

503 
nodeid_t
 
¿w1394_g‘_œm_id
(
¿w1394hªdË_t
 
hªdË
);

516 
¿w1394_g‘_nodecouÁ
(
¿w1394hªdË_t
 
hªdË
);

518 
	s¿w1394_pÜtšfo
 {

519 
nodes
;

520 
Çme
[32];

541 
¿w1394_g‘_pÜt_šfo
(
¿w1394hªdË_t
 
hªdË
, 
¿w1394_pÜtšfo
 *
pšf
,

542 
maxpÜts
);

560 
¿w1394_£t_pÜt
(
¿w1394hªdË_t
 
hªdË
, 
pÜt
);

572 
¿w1394_»£t_bus
(
¿w1394hªdË_t
 
hªdË
);

581 
¿w1394_»£t_bus_Ãw
(
¿w1394hªdË_t
 
hªdË
, 
ty³
);

595 
¿w1394_loİ_™”©e
(
¿w1394hªdË_t
 
hªdË
);

597 (*
bus_»£t_hªdËr_t
)(
	t¿w1394hªdË_t
, 
	tg’”©iÚ
);

609 
bus_»£t_hªdËr_t
 
¿w1394_£t_bus_»£t_hªdËr
(
¿w1394hªdË_t
 
hªdË
,

610 
bus_»£t_hªdËr_t
 
Ãw_h
);

625 
¿w1394_g‘_g’”©iÚ
(
¿w1394hªdË_t
 
hªdË
);

640 
¿w1394_upd©e_g’”©iÚ
(
¿w1394hªdË_t
 
hªdË
, 
g’”©iÚ
);

642 (*
g_hªdËr_t
)(
	t¿w1394hªdË_t
, 
	tg
,

643 
	t¿w1394_”rcode_t
 
	t”r
);

661 
g_hªdËr_t
 
¿w1394_£t_g_hªdËr
(
¿w1394hªdË_t
 
hªdË
,

662 
g_hªdËr_t
 
Ãw_h
);

664 (*
¬m_g_hªdËr_t
)(
	t¿w1394hªdË_t
 
	thªdË
, 
	t¬m_g
,

665 
	tby‹_t
 
	t»que¡_ty³
, 
	t»que¡ed_Ëngth
,

666 *
	td©a
);

679 
¬m_g_hªdËr_t
 
¿w1394_£t_¬m_g_hªdËr
(
¿w1394hªdË_t
 
hªdË
,

680 
¬m_g_hªdËr_t
 
Ãw_h
);

682 (*
fı_hªdËr_t
)(
	t¿w1394hªdË_t
, 
	tnodeid_t
 
	tnodeid
, 
	t»¥Ú£
,

683 
	tsize_t
 
	tËngth
, *
	td©a
);

699 
fı_hªdËr_t
 
¿w1394_£t_fı_hªdËr
(
¿w1394hªdË_t
 
hªdË
, fı_hªdËr_ˆ
Ãw_h
);

708 (*
»q_ÿÎback_t
)(
	t¿w1394hªdË_t
, *
	td©a
,

709 
	t¿w1394_”rcode_t
 
	t”r
);

711 
	s¿w1394_»qhªdË
 {

712 
»q_ÿÎback_t
 
ÿÎback
;

713 *
d©a
;

722 (*
¬m_»q_ÿÎback_t
è(
	t¿w1394hªdË_t
,

723 
	t¿w1394_¬m_»que¡_»¥Ú£
 *
	t¬m_»q_»¥
,

724 
	t»que¡ed_Ëngth
,

725 *
	tpcÚ‹xt
, 
	tby‹_t
 
	t»que¡_ty³
);

727 
	s¿w1394_¬m_»qhªdË
 {

728 
¬m_»q_ÿÎback_t
 
¬m_ÿÎback
;

729 *
pcÚ‹xt
;

760 
¿w1394_¬m_»gi¡”
(
¿w1394hªdË_t
 
hªdË
, 
nod—ddr_t
 
¡¬t
,

761 
size_t
 
Ëngth
, 
by‹_t
 *
š™Ÿl_v®ue
,

762 
oùËt_t
 
¬m_g
, 
¬m_İtiÚs_t
 
acûss_rights
,

763 
¬m_İtiÚs_t
 
nÙifiÿtiÚ_İtiÚs
,

764 
¬m_İtiÚs_t
 
ş›Á_Œª§ùiÚs
);

774 
¿w1394_¬m_uÄegi¡”
(
¿w1394hªdË_t
 
hªdË
, 
nod—ddr_t
 
¡¬t
);

789 
¿w1394_¬m_£t_buf
 (
¿w1394hªdË_t
 
hªdË
, 
nod—ddr_t
 
¡¬t
,

790 
size_t
 
Ëngth
, *
buf
);

805 
¿w1394_¬m_g‘_buf
 (
¿w1394hªdË_t
 
hªdË
, 
nod—ddr_t
 
¡¬t
,

806 
size_t
 
Ëngth
, *
buf
);

819 
¿w1394_echo_»que¡
(
¿w1394hªdË_t
 
hªdË
, 
quadËt_t
 
d©a
);

830 
¿w1394_wake_up
(
¿w1394hªdË_t
 
hªdË
);

842 
¿w1394_phy_·ck‘_wr™e
 (
¿w1394hªdË_t
 
hªdË
, 
quadËt_t
 
d©a
);

854 
¿w1394_¡¬t_phy_·ck‘_wr™e
(
¿w1394hªdË_t
 
hªdË
,

855 
quadËt_t
 
d©a
, 
g
);

878 
¿w1394_¡¬t_»ad
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

879 
size_t
 
Ëngth
, 
quadËt_t
 *
bufãr
, 
g
);

902 
¿w1394_¡¬t_wr™e
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

903 
size_t
 
Ëngth
, 
quadËt_t
 *
d©a
, 
g
);

926 
¿w1394_¡¬t_lock
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

927 
extcode
, 
quadËt_t
 
d©a
, quadËt_ˆ
¬g
,

928 
quadËt_t
 *
»suÉ
, 
g
);

951 
¿w1394_¡¬t_lock64
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

952 
extcode
, 
oùËt_t
 
d©a
, oùËt_ˆ
¬g
,

953 
oùËt_t
 *
»suÉ
, 
g
);

971 
¿w1394_¡¬t_async_¡»am
(
¿w1394hªdË_t
 
hªdË
, 
chªÃl
,

972 
g
, 
sy
,

973 
¥“d
, 
size_t
 
Ëngth
, 
quadËt_t
 *
d©a
,

974 
¿wg
);

1000 
¿w1394_¡¬t_async_£nd
(
¿w1394hªdË_t
 
hªdË
,

1001 
size_t
 
Ëngth
, size_ˆ
h—d”_Ëngth
,

1002 
ex³ù_»¥Ú£
,

1003 
quadËt_t
 *
d©a
, 
¿wg
);

1021 
¿w1394_»ad
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

1022 
size_t
 
Ëngth
, 
quadËt_t
 *
bufãr
);

1040 
¿w1394_wr™e
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

1041 
size_t
 
Ëngth
, 
quadËt_t
 *
d©a
);

1059 
¿w1394_lock
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

1060 
extcode
, 
quadËt_t
 
d©a
, quadËt_ˆ
¬g
,

1061 
quadËt_t
 *
»suÉ
);

1079 
¿w1394_lock64
(
¿w1394hªdË_t
 
hªdË
, 
nodeid_t
 
node
, 
nod—ddr_t
 
addr
,

1080 
extcode
, 
oùËt_t
 
d©a
, oùËt_ˆ
¬g
,

1081 
oùËt_t
 *
»suÉ
);

1095 
¿w1394_async_¡»am
(
¿w1394hªdË_t
 
hªdË
, 
chªÃl
,

1096 
g
, 
sy
, 
¥“d
,

1097 
size_t
 
Ëngth
, 
quadËt_t
 *
d©a
);

1109 
¿w1394_async_£nd
(
¿w1394hªdË_t
 
hªdË
,

1110 
size_t
 
Ëngth
, size_ˆ
h—d”_Ëngth
,

1111 
ex³ù_»¥Ú£
,

1112 
quadËt_t
 *
d©a
);

1125 
¿w1394_¡¬t_fı_li¡’
(
¿w1394hªdË_t
 
hªdË
);

1136 
¿w1394_¡İ_fı_li¡’
(
¿w1394hªdË_t
 
hªdË
);

1147 cÚ¡ *
¿w1394_g‘_libv”siÚ
();

1165 
¿w1394_upd©e_cÚfig_rom
(
¿w1394hªdË_t
 
hªdË
, cÚ¡ 
quadËt_t


1166 *
Ãw_rom
, 
size_t
 
size
, 
rom_v”siÚ
);

1183 
¿w1394_g‘_cÚfig_rom
(
¿w1394hªdË_t
 
hªdË
, 
quadËt_t
 *
bufãr
,

1184 
size_t
 
bufãrsize
, size_ˆ*
rom_size
, *
rom_v”siÚ
);

1198 
¿w1394_bªdwidth_modify
 (
¿w1394hªdË_t
 
hªdË
, 
bªdwidth
,

1199 
¿w1394_modify_mode
 
mode
);

1213 
¿w1394_chªÃl_modify
 (
¿w1394hªdË_t
 
hªdË
, 
chªÃl
,

1214 
¿w1394_modify_mode
 
mode
);

1217 #ifdeà
__ılu¥lus


	@/usr/include/libswscale/swscale.h

21 #iâdeà
SWSCALE_SWSCALE_H


22 
	#SWSCALE_SWSCALE_H


	)

30 
	~<¡dšt.h
>

32 
	~"libavut/avut.h
"

33 
	~"libavut/log.h
"

34 
	~"libavut/pixfmt.h
"

35 
	~"v”siÚ.h
"

40 
swsÿË_v”siÚ
();

45 cÚ¡ *
swsÿË_cÚfigu¿tiÚ
();

50 cÚ¡ *
swsÿË_liûn£
();

53 
	#SWS_FAST_BILINEAR
 1

	)

54 
	#SWS_BILINEAR
 2

	)

55 
	#SWS_BICUBIC
 4

	)

56 
	#SWS_X
 8

	)

57 
	#SWS_POINT
 0x10

	)

58 
	#SWS_AREA
 0x20

	)

59 
	#SWS_BICUBLIN
 0x40

	)

60 
	#SWS_GAUSS
 0x80

	)

61 
	#SWS_SINC
 0x100

	)

62 
	#SWS_LANCZOS
 0x200

	)

63 
	#SWS_SPLINE
 0x400

	)

65 
	#SWS_SRC_V_CHR_DROP_MASK
 0x30000

	)

66 
	#SWS_SRC_V_CHR_DROP_SHIFT
 16

	)

68 
	#SWS_PARAM_DEFAULT
 123456

	)

70 
	#SWS_PRINT_INFO
 0x1000

	)

74 
	#SWS_FULL_CHR_H_INT
 0x2000

	)

76 
	#SWS_FULL_CHR_H_INP
 0x4000

	)

77 
	#SWS_DIRECT_BGR
 0x8000

	)

78 
	#SWS_ACCURATE_RND
 0x40000

	)

79 
	#SWS_BITEXACT
 0x80000

	)

81 #ià
FF_API_SWS_CPU_CAPS


86 
	#SWS_CPU_CAPS_MMX
 0x80000000

	)

87 
	#SWS_CPU_CAPS_MMXEXT
 0x20000000

	)

88 
	#SWS_CPU_CAPS_MMX2
 0x20000000

	)

89 
	#SWS_CPU_CAPS_3DNOW
 0x40000000

	)

90 
	#SWS_CPU_CAPS_ALTIVEC
 0x10000000

	)

91 
	#SWS_CPU_CAPS_BFIN
 0x01000000

	)

92 
	#SWS_CPU_CAPS_SSE2
 0x02000000

	)

95 
	#SWS_MAX_REDUCE_CUTOFF
 0.002

	)

97 
	#SWS_CS_ITU709
 1

	)

98 
	#SWS_CS_FCC
 4

	)

99 
	#SWS_CS_ITU601
 5

	)

100 
	#SWS_CS_ITU624
 5

	)

101 
	#SWS_CS_SMPTE170M
 5

	)

102 
	#SWS_CS_SMPTE240M
 7

	)

103 
	#SWS_CS_DEFAULT
 5

	)

112 cÚ¡ *
sws_g‘CÛffic›Ás
(
cŞÜ¥aû
);

116 
	sSwsVeùÜ
 {

117 *
	mcÛff
;

118 
	mËngth
;

119 } 
	tSwsVeùÜ
;

122 
	sSwsF‹r
 {

123 
SwsVeùÜ
 *
	mlumH
;

124 
SwsVeùÜ
 *
	mlumV
;

125 
SwsVeùÜ
 *
	mchrH
;

126 
SwsVeùÜ
 *
	mchrV
;

127 } 
	tSwsF‹r
;

129 
	gSwsCÚ‹xt
;

135 
sws_isSuµÜ‹dIÅut
(
AVPix–FÜm©
 
pix_fmt
);

141 
sws_isSuµÜ‹dOuut
(
AVPix–FÜm©
 
pix_fmt
);

148 
SwsCÚ‹xt
 *
sws_®loc_cÚ‹xt
();

156 
sws_š™_cÚ‹xt
(
SwsCÚ‹xt
 *
sws_cÚ‹xt
, 
SwsF‹r
 *
¤cF‹r
, SwsF‹¸*
d¡F‹r
);

162 
sws_ä“CÚ‹xt
(
SwsCÚ‹xt
 *
swsCÚ‹xt
);

164 #ià
FF_API_SWS_GETCONTEXT


181 
SwsCÚ‹xt
 *
sws_g‘CÚ‹xt
(
¤cW
, 
¤cH
, 
AVPix–FÜm©
 
¤cFÜm©
,

182 
d¡W
, 
d¡H
, 
AVPix–FÜm©
 
d¡FÜm©
,

183 
æags
, 
SwsF‹r
 *
¤cF‹r
,

184 
SwsF‹r
 *
d¡F‹r
, cÚ¡ *
·¿m
);

213 
sws_sÿË
(
SwsCÚ‹xt
 *
c
, cÚ¡ 
ušt8_t
 *cÚ¡ 
¤cSliû
[],

214 cÚ¡ 
¤cSŒide
[], 
¤cSliûY
, 
¤cSliûH
,

215 
ušt8_t
 *cÚ¡ 
d¡
[], cÚ¡ 
d¡SŒide
[]);

221 
sws_£tCŞÜ¥aûD‘as
(
SwsCÚ‹xt
 *
c
, cÚ¡ 
šv_bË
[4],

222 
¤cRªge
, cÚ¡ 
bË
[4], 
d¡Rªge
,

223 
brighŠess
, 
cÚŒa¡
, 
§tu¿tiÚ
);

228 
sws_g‘CŞÜ¥aûD‘as
(
SwsCÚ‹xt
 *
c
, **
šv_bË
,

229 *
¤cRªge
, **
bË
, *
d¡Rªge
,

230 *
brighŠess
, *
cÚŒa¡
, *
§tu¿tiÚ
);

235 
SwsVeùÜ
 *
sws_®locVec
(
Ëngth
);

241 
SwsVeùÜ
 *
sws_g‘GaussŸnVec
(
v¬Ÿnû
, 
qu®™y
);

247 
SwsVeùÜ
 *
sws_g‘CÚ¡Vec
(
c
, 
Ëngth
);

253 
SwsVeùÜ
 *
sws_g‘Id’t™yVec
();

258 
sws_sÿËVec
(
SwsVeùÜ
 *
a
, 
sÿÏr
);

263 
sws_nÜm®izeVec
(
SwsVeùÜ
 *
a
, 
height
);

264 
sws_cÚvVec
(
SwsVeùÜ
 *
a
, SwsVeùÜ *
b
);

265 
sws_addVec
(
SwsVeùÜ
 *
a
, SwsVeùÜ *
b
);

266 
sws_subVec
(
SwsVeùÜ
 *
a
, SwsVeùÜ *
b
);

267 
sws_shiáVec
(
SwsVeùÜ
 *
a
, 
shiá
);

273 
SwsVeùÜ
 *
sws_şÚeVec
(SwsVeùÜ *
a
);

279 
sws_´štVec2
(
SwsVeùÜ
 *
a
, 
AVCÏss
 *
log_ùx
, 
log_Ëv–
);

281 
sws_ä“Vec
(
SwsVeùÜ
 *
a
);

283 
SwsF‹r
 *
sws_g‘DeçuÉF‹r
(
lumaGBlur
, 
chromaGBlur
,

284 
lumaSh¬³n
, 
chromaSh¬³n
,

285 
chromaHShiá
, 
chromaVShiá
,

286 
v”bo£
);

287 
sws_ä“F‹r
(
SwsF‹r
 *
f‹r
);

301 
SwsCÚ‹xt
 *
sws_g‘CachedCÚ‹xt
(SwsCÚ‹xˆ*
cÚ‹xt
,

302 
¤cW
, 
¤cH
, 
AVPix–FÜm©
 
¤cFÜm©
,

303 
d¡W
, 
d¡H
, 
AVPix–FÜm©
 
d¡FÜm©
,

304 
æags
, 
SwsF‹r
 *
¤cF‹r
,

305 
SwsF‹r
 *
d¡F‹r
, cÚ¡ *
·¿m
);

317 
sws_cÚv”tP®‘‹8ToPacked32
(cÚ¡ 
ušt8_t
 *
¤c
, ušt8_ˆ*
d¡
, 
num_pix–s
, cÚ¡ ušt8_ˆ*
·Ë‰e
);

329 
sws_cÚv”tP®‘‹8ToPacked24
(cÚ¡ 
ušt8_t
 *
¤c
, ušt8_ˆ*
d¡
, 
num_pix–s
, cÚ¡ ušt8_ˆ*
·Ë‰e
);

337 cÚ¡ 
AVCÏss
 *
sws_g‘_şass
();

	@/usr/include/libv4l1.h

19 #iâdeà
__LIBV4L1_H


20 
	#__LIBV4L1_H


	)

22 #ifdeà
__ılu¥lus


26 
	~<¡dio.h
>

27 
	~<¡dšt.h
>

28 
	~<uni¡d.h
>

29 
	~<libv4l1-videodev.h
>

31 #ià
HAVE_VISIBILITY


32 
	#LIBV4L_PUBLIC
 
	`__©Œibu‹__
 ((
	`visib™y
("deçuÉ")))

	)

34 
	#LIBV4L_PUBLIC


	)

39 
LIBV4L_PUBLIC
 
FILE
 *
v4l1_log_fe
;

62 
LIBV4L_PUBLIC
 
v4l1_İ’
(cÚ¡ *
fe
, 
oæag
, ...);

63 
LIBV4L_PUBLIC
 
v4l1_şo£
(
fd
);

64 
LIBV4L_PUBLIC
 
v4l1_dup
(
fd
);

65 
LIBV4L_PUBLIC
 
v4l1_ioùl
(
fd
, 
»que¡
, ...);

66 
LIBV4L_PUBLIC
 
ssize_t
 
v4l1_»ad
(
fd
, *
bufãr
, 
size_t
 
n
);

67 
LIBV4L_PUBLIC
 *
v4l1_mm­
(*
¡¬t
, 
size_t
 
Ëngth
, 
´Ù
, 
æags
,

68 
fd
, 
št64_t
 
off£t
);

69 
LIBV4L_PUBLIC
 
v4l1_munm­
(*
_¡¬t
, 
size_t
 
Ëngth
);

71 #ifdeà
__ılu¥lus


	@/usr/include/libv4l2.h

19 #iâdeà
__LIBV4L2_H


20 
	#__LIBV4L2_H


	)

22 
	~<¡dio.h
>

23 
	~<uni¡d.h
>

24 
	~<¡dšt.h
>

26 #ifdeà
__ılu¥lus


30 #ià
HAVE_VISIBILITY


31 
	#LIBV4L_PUBLIC
 
	`__©Œibu‹__
 ((
	`visib™y
("deçuÉ")))

	)

33 
	#LIBV4L_PUBLIC


	)

38 
LIBV4L_PUBLIC
 
FILE
 *
v4l2_log_fe
;

63 
LIBV4L_PUBLIC
 
v4l2_İ’
(cÚ¡ *
fe
, 
oæag
, ...);

64 
LIBV4L_PUBLIC
 
v4l2_şo£
(
fd
);

65 
LIBV4L_PUBLIC
 
v4l2_dup
(
fd
);

66 
LIBV4L_PUBLIC
 
v4l2_ioùl
(
fd
, 
»que¡
, ...);

67 
LIBV4L_PUBLIC
 
ssize_t
 
v4l2_»ad
(
fd
, *
bufãr
, 
size_t
 
n
);

68 
LIBV4L_PUBLIC
 
ssize_t
 
v4l2_wr™e
(
fd
, cÚ¡ *
bufãr
, 
size_t
 
n
);

69 
LIBV4L_PUBLIC
 *
v4l2_mm­
(*
¡¬t
, 
size_t
 
Ëngth
, 
´Ù
, 
æags
,

70 
fd
, 
št64_t
 
off£t
);

71 
LIBV4L_PUBLIC
 
v4l2_munm­
(*
_¡¬t
, 
size_t
 
Ëngth
);

82 
LIBV4L_PUBLIC
 
v4l2_£t_cÚŒŞ
(
fd
, 
cid
, 
v®ue
);

87 
LIBV4L_PUBLIC
 
v4l2_g‘_cÚŒŞ
(
fd
, 
cid
);

99 
	#V4L2_DISABLE_CONVERSION
 0x01

	)

102 
	#V4L2_ENABLE_ENUM_FMT_EMULATION
 0x02

	)

110 
LIBV4L_PUBLIC
 
v4l2_fd_İ’
(
fd
, 
v4l2_æags
);

112 #ifdeà
__ılu¥lus


	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<ã©u»s.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

41 #iâdeà
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<b™s/wÜdsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifdeà
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #ià
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #ià
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifdeà
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


123 #šşude_Ãxˆ<
lim™s
.
h
>

129 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


130 #iâdeà
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #iâdeà
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #iâdeà
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<b™s/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<b™s/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<b™s/xİ’_lim.h
>

	@/usr/include/linux/videodev2.h

56 #iâdeà
__LINUX_VIDEODEV2_H


57 
	#__LINUX_VIDEODEV2_H


	)

59 
	~<sys/time.h
>

61 
	~<lšux/ioùl.h
>

62 
	~<lšux/ty³s.h
>

68 
	#VIDEO_MAX_FRAME
 32

	)

69 
	#VIDEO_MAX_PLANES
 8

	)

75 
	#VID_TYPE_CAPTURE
 1

	)

76 
	#VID_TYPE_TUNER
 2

	)

77 
	#VID_TYPE_TELETEXT
 4

	)

78 
	#VID_TYPE_OVERLAY
 8

	)

79 
	#VID_TYPE_CHROMAKEY
 16

	)

80 
	#VID_TYPE_CLIPPING
 32

	)

81 
	#VID_TYPE_FRAMERAM
 64

	)

82 
	#VID_TYPE_SCALES
 128

	)

83 
	#VID_TYPE_MONOCHROME
 256

	)

84 
	#VID_TYPE_SUBCAPTURE
 512

	)

85 
	#VID_TYPE_MPEG_DECODER
 1024

	)

86 
	#VID_TYPE_MPEG_ENCODER
 2048

	)

87 
	#VID_TYPE_MJPEG_DECODER
 4096

	)

88 
	#VID_TYPE_MJPEG_ENCODER
 8192

	)

95 
	#v4l2_fourcc
(
a
, 
b
, 
c
, 
d
)\

96 ((
__u32
)(
a
è| ((__u32)(
b
è<< 8è| ((__u32)(
c
è<< 16è| ((__u32)(
d
è<< 24))

	)

101 
	ev4l2_f›ld
 {

102 
	mV4L2_FIELD_ANY
 = 0,

106 
	mV4L2_FIELD_NONE
 = 1,

107 
	mV4L2_FIELD_TOP
 = 2,

108 
	mV4L2_FIELD_BOTTOM
 = 3,

109 
	mV4L2_FIELD_INTERLACED
 = 4,

110 
	mV4L2_FIELD_SEQ_TB
 = 5,

112 
	mV4L2_FIELD_SEQ_BT
 = 6,

113 
	mV4L2_FIELD_ALTERNATE
 = 7,

115 
	mV4L2_FIELD_INTERLACED_TB
 = 8,

118 
	mV4L2_FIELD_INTERLACED_BT
 = 9,

122 
	#V4L2_FIELD_HAS_TOP
(
f›ld
) \

123 ((
f›ld
è=ğ
V4L2_FIELD_TOP
 ||\

124 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED
 ||\

125 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED_TB
 ||\

126 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED_BT
 ||\

127 (
f›ld
è=ğ
V4L2_FIELD_SEQ_TB
 ||\

128 (
f›ld
è=ğ
V4L2_FIELD_SEQ_BT
)

	)

129 
	#V4L2_FIELD_HAS_BOTTOM
(
f›ld
) \

130 ((
f›ld
è=ğ
V4L2_FIELD_BOTTOM
 ||\

131 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED
 ||\

132 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED_TB
 ||\

133 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED_BT
 ||\

134 (
f›ld
è=ğ
V4L2_FIELD_SEQ_TB
 ||\

135 (
f›ld
è=ğ
V4L2_FIELD_SEQ_BT
)

	)

136 
	#V4L2_FIELD_HAS_BOTH
(
f›ld
) \

137 ((
f›ld
è=ğ
V4L2_FIELD_INTERLACED
 ||\

138 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED_TB
 ||\

139 (
f›ld
è=ğ
V4L2_FIELD_INTERLACED_BT
 ||\

140 (
f›ld
è=ğ
V4L2_FIELD_SEQ_TB
 ||\

141 (
f›ld
è=ğ
V4L2_FIELD_SEQ_BT
)

	)

143 
	ev4l2_buf_ty³
 {

144 
	mV4L2_BUF_TYPE_VIDEO_CAPTURE
 = 1,

145 
	mV4L2_BUF_TYPE_VIDEO_OUTPUT
 = 2,

146 
	mV4L2_BUF_TYPE_VIDEO_OVERLAY
 = 3,

147 
	mV4L2_BUF_TYPE_VBI_CAPTURE
 = 4,

148 
	mV4L2_BUF_TYPE_VBI_OUTPUT
 = 5,

149 
	mV4L2_BUF_TYPE_SLICED_VBI_CAPTURE
 = 6,

150 
	mV4L2_BUF_TYPE_SLICED_VBI_OUTPUT
 = 7,

153 
	mV4L2_BUF_TYPE_VIDEO_OUTPUT_OVERLAY
 = 8,

155 
	mV4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE
 = 9,

156 
	mV4L2_BUF_TYPE_VIDEO_OUTPUT_MPLANE
 = 10,

157 
	mV4L2_BUF_TYPE_PRIVATE
 = 0x80,

160 
	#V4L2_TYPE_IS_MULTIPLANAR
(
ty³
) \

161 ((
ty³
è=ğ
V4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE
 \

162 || (
ty³
è=ğ
V4L2_BUF_TYPE_VIDEO_OUTPUT_MPLANE
)

	)

164 
	#V4L2_TYPE_IS_OUTPUT
(
ty³
) \

165 ((
ty³
è=ğ
V4L2_BUF_TYPE_VIDEO_OUTPUT
 \

166 || (
ty³
è=ğ
V4L2_BUF_TYPE_VIDEO_OUTPUT_MPLANE
 \

167 || (
ty³
è=ğ
V4L2_BUF_TYPE_VIDEO_OVERLAY
 \

168 || (
ty³
è=ğ
V4L2_BUF_TYPE_VIDEO_OUTPUT_OVERLAY
 \

169 || (
ty³
è=ğ
V4L2_BUF_TYPE_VBI_OUTPUT
 \

170 || (
ty³
è=ğ
V4L2_BUF_TYPE_SLICED_VBI_OUTPUT
)

	)

172 
	ev4l2_tuÃr_ty³
 {

173 
	mV4L2_TUNER_RADIO
 = 1,

174 
	mV4L2_TUNER_ANALOG_TV
 = 2,

175 
	mV4L2_TUNER_DIGITAL_TV
 = 3,

178 
	ev4l2_memÜy
 {

179 
	mV4L2_MEMORY_MMAP
 = 1,

180 
	mV4L2_MEMORY_USERPTR
 = 2,

181 
	mV4L2_MEMORY_OVERLAY
 = 3,

185 
	ev4l2_cŞÜ¥aû
 {

187 
	mV4L2_COLORSPACE_SMPTE170M
 = 1,

190 
	mV4L2_COLORSPACE_SMPTE240M
 = 2,

193 
	mV4L2_COLORSPACE_REC709
 = 3,

196 
	mV4L2_COLORSPACE_BT878
 = 4,

199 
	mV4L2_COLORSPACE_470_SYSTEM_M
 = 5,

200 
	mV4L2_COLORSPACE_470_SYSTEM_BG
 = 6,

206 
	mV4L2_COLORSPACE_JPEG
 = 7,

209 
	mV4L2_COLORSPACE_SRGB
 = 8,

212 
	ev4l2_´iÜ™y
 {

213 
	mV4L2_PRIORITY_UNSET
 = 0,

214 
	mV4L2_PRIORITY_BACKGROUND
 = 1,

215 
	mV4L2_PRIORITY_INTERACTIVE
 = 2,

216 
	mV4L2_PRIORITY_RECORD
 = 3,

217 
	mV4L2_PRIORITY_DEFAULT
 = 
V4L2_PRIORITY_INTERACTIVE
,

220 
	sv4l2_»ù
 {

221 
__s32
 
	mËá
;

222 
__s32
 
	mtİ
;

223 
__s32
 
	mwidth
;

224 
__s32
 
	mheight
;

227 
	sv4l2_äaù
 {

228 
__u32
 
	mnum”©Ü
;

229 
__u32
 
	md’omš©Ü
;

235 
	sv4l2_ÿ·b™y
 {

236 
__u8
 
	mdriv”
[16];

237 
__u8
 
	mÿrd
[32];

238 
__u8
 
	mbus_šfo
[32];

239 
__u32
 
	mv”siÚ
;

240 
__u32
 
	mÿ·b™›s
;

241 
__u32
 
	m»£rved
[4];

245 
	#V4L2_CAP_VIDEO_CAPTURE
 0x00000001

	)

246 
	#V4L2_CAP_VIDEO_OUTPUT
 0x00000002

	)

247 
	#V4L2_CAP_VIDEO_OVERLAY
 0x00000004

	)

248 
	#V4L2_CAP_VBI_CAPTURE
 0x00000010

	)

249 
	#V4L2_CAP_VBI_OUTPUT
 0x00000020

	)

250 
	#V4L2_CAP_SLICED_VBI_CAPTURE
 0x00000040

	)

251 
	#V4L2_CAP_SLICED_VBI_OUTPUT
 0x00000080

	)

252 
	#V4L2_CAP_RDS_CAPTURE
 0x00000100

	)

253 
	#V4L2_CAP_VIDEO_OUTPUT_OVERLAY
 0x00000200

	)

254 
	#V4L2_CAP_HW_FREQ_SEEK
 0x00000400

	)

255 
	#V4L2_CAP_RDS_OUTPUT
 0x00000800

	)

258 
	#V4L2_CAP_VIDEO_CAPTURE_MPLANE
 0x00001000

	)

260 
	#V4L2_CAP_VIDEO_OUTPUT_MPLANE
 0x00002000

	)

262 
	#V4L2_CAP_TUNER
 0x00010000

	)

263 
	#V4L2_CAP_AUDIO
 0x00020000

	)

264 
	#V4L2_CAP_RADIO
 0x00040000

	)

265 
	#V4L2_CAP_MODULATOR
 0x00080000

	)

267 
	#V4L2_CAP_READWRITE
 0x01000000

	)

268 
	#V4L2_CAP_ASYNCIO
 0x02000000

	)

269 
	#V4L2_CAP_STREAMING
 0x04000000

	)

274 
	sv4l2_pix_fÜm©
 {

275 
__u32
 
	mwidth
;

276 
__u32
 
	mheight
;

277 
__u32
 
	mpix–fÜm©
;

278 
v4l2_f›ld
 
	mf›ld
;

279 
__u32
 
	mby‹¥”lše
;

280 
__u32
 
	msizeimage
;

281 
v4l2_cŞÜ¥aû
 
	mcŞÜ¥aû
;

282 
__u32
 
	m´iv
;

288 
	#V4L2_PIX_FMT_RGB332
 
	`v4l2_fourcc
('R', 'G', 'B', '1'è

	)

289 
	#V4L2_PIX_FMT_RGB444
 
	`v4l2_fourcc
('R', '4', '4', '4'è

	)

290 
	#V4L2_PIX_FMT_RGB555
 
	`v4l2_fourcc
('R', 'G', 'B', 'O'è

	)

291 
	#V4L2_PIX_FMT_RGB565
 
	`v4l2_fourcc
('R', 'G', 'B', 'P'è

	)

292 
	#V4L2_PIX_FMT_RGB555X
 
	`v4l2_fourcc
('R', 'G', 'B', 'Q'è

	)

293 
	#V4L2_PIX_FMT_RGB565X
 
	`v4l2_fourcc
('R', 'G', 'B', 'R'è

	)

294 
	#V4L2_PIX_FMT_BGR666
 
	`v4l2_fourcc
('B', 'G', 'R', 'H'è

	)

295 
	#V4L2_PIX_FMT_BGR24
 
	`v4l2_fourcc
('B', 'G', 'R', '3'è

	)

296 
	#V4L2_PIX_FMT_RGB24
 
	`v4l2_fourcc
('R', 'G', 'B', '3'è

	)

297 
	#V4L2_PIX_FMT_BGR32
 
	`v4l2_fourcc
('B', 'G', 'R', '4'è

	)

298 
	#V4L2_PIX_FMT_RGB32
 
	`v4l2_fourcc
('R', 'G', 'B', '4'è

	)

301 
	#V4L2_PIX_FMT_GREY
 
	`v4l2_fourcc
('G', 'R', 'E', 'Y'è

	)

302 
	#V4L2_PIX_FMT_Y4
 
	`v4l2_fourcc
('Y', '0', '4', ' 'è

	)

303 
	#V4L2_PIX_FMT_Y6
 
	`v4l2_fourcc
('Y', '0', '6', ' 'è

	)

304 
	#V4L2_PIX_FMT_Y10
 
	`v4l2_fourcc
('Y', '1', '0', ' 'è

	)

305 
	#V4L2_PIX_FMT_Y12
 
	`v4l2_fourcc
('Y', '1', '2', ' 'è

	)

306 
	#V4L2_PIX_FMT_Y16
 
	`v4l2_fourcc
('Y', '1', '6', ' 'è

	)

309 
	#V4L2_PIX_FMT_Y10BPACK
 
	`v4l2_fourcc
('Y', '1', '0', 'B'è

	)

312 
	#V4L2_PIX_FMT_PAL8
 
	`v4l2_fourcc
('P', 'A', 'L', '8'è

	)

315 
	#V4L2_PIX_FMT_YVU410
 
	`v4l2_fourcc
('Y', 'V', 'U', '9'è

	)

316 
	#V4L2_PIX_FMT_YVU420
 
	`v4l2_fourcc
('Y', 'V', '1', '2'è

	)

317 
	#V4L2_PIX_FMT_YUYV
 
	`v4l2_fourcc
('Y', 'U', 'Y', 'V'è

	)

318 
	#V4L2_PIX_FMT_YYUV
 
	`v4l2_fourcc
('Y', 'Y', 'U', 'V'è

	)

319 
	#V4L2_PIX_FMT_YVYU
 
	`v4l2_fourcc
('Y', 'V', 'Y', 'U'è

	)

320 
	#V4L2_PIX_FMT_UYVY
 
	`v4l2_fourcc
('U', 'Y', 'V', 'Y'è

	)

321 
	#V4L2_PIX_FMT_VYUY
 
	`v4l2_fourcc
('V', 'Y', 'U', 'Y'è

	)

322 
	#V4L2_PIX_FMT_YUV422P
 
	`v4l2_fourcc
('4', '2', '2', 'P'è

	)

323 
	#V4L2_PIX_FMT_YUV411P
 
	`v4l2_fourcc
('4', '1', '1', 'P'è

	)

324 
	#V4L2_PIX_FMT_Y41P
 
	`v4l2_fourcc
('Y', '4', '1', 'P'è

	)

325 
	#V4L2_PIX_FMT_YUV444
 
	`v4l2_fourcc
('Y', '4', '4', '4'è

	)

326 
	#V4L2_PIX_FMT_YUV555
 
	`v4l2_fourcc
('Y', 'U', 'V', 'O'è

	)

327 
	#V4L2_PIX_FMT_YUV565
 
	`v4l2_fourcc
('Y', 'U', 'V', 'P'è

	)

328 
	#V4L2_PIX_FMT_YUV32
 
	`v4l2_fourcc
('Y', 'U', 'V', '4'è

	)

329 
	#V4L2_PIX_FMT_YUV410
 
	`v4l2_fourcc
('Y', 'U', 'V', '9'è

	)

330 
	#V4L2_PIX_FMT_YUV420
 
	`v4l2_fourcc
('Y', 'U', '1', '2'è

	)

331 
	#V4L2_PIX_FMT_HI240
 
	`v4l2_fourcc
('H', 'I', '2', '4'è

	)

332 
	#V4L2_PIX_FMT_HM12
 
	`v4l2_fourcc
('H', 'M', '1', '2'è

	)

333 
	#V4L2_PIX_FMT_M420
 
	`v4l2_fourcc
('M', '4', '2', '0'è

	)

336 
	#V4L2_PIX_FMT_NV12
 
	`v4l2_fourcc
('N', 'V', '1', '2'è

	)

337 
	#V4L2_PIX_FMT_NV21
 
	`v4l2_fourcc
('N', 'V', '2', '1'è

	)

338 
	#V4L2_PIX_FMT_NV16
 
	`v4l2_fourcc
('N', 'V', '1', '6'è

	)

339 
	#V4L2_PIX_FMT_NV61
 
	`v4l2_fourcc
('N', 'V', '6', '1'è

	)

342 
	#V4L2_PIX_FMT_NV12M
 
	`v4l2_fourcc
('N', 'M', '1', '2'è

	)

343 
	#V4L2_PIX_FMT_NV12MT
 
	`v4l2_fourcc
('T', 'M', '1', '2'è

	)

346 
	#V4L2_PIX_FMT_YUV420M
 
	`v4l2_fourcc
('Y', 'M', '1', '2'è

	)

349 
	#V4L2_PIX_FMT_SBGGR8
 
	`v4l2_fourcc
('B', 'A', '8', '1'è

	)

350 
	#V4L2_PIX_FMT_SGBRG8
 
	`v4l2_fourcc
('G', 'B', 'R', 'G'è

	)

351 
	#V4L2_PIX_FMT_SGRBG8
 
	`v4l2_fourcc
('G', 'R', 'B', 'G'è

	)

352 
	#V4L2_PIX_FMT_SRGGB8
 
	`v4l2_fourcc
('R', 'G', 'G', 'B'è

	)

353 
	#V4L2_PIX_FMT_SBGGR10
 
	`v4l2_fourcc
('B', 'G', '1', '0'è

	)

354 
	#V4L2_PIX_FMT_SGBRG10
 
	`v4l2_fourcc
('G', 'B', '1', '0'è

	)

355 
	#V4L2_PIX_FMT_SGRBG10
 
	`v4l2_fourcc
('B', 'A', '1', '0'è

	)

356 
	#V4L2_PIX_FMT_SRGGB10
 
	`v4l2_fourcc
('R', 'G', '1', '0'è

	)

357 
	#V4L2_PIX_FMT_SBGGR12
 
	`v4l2_fourcc
('B', 'G', '1', '2'è

	)

358 
	#V4L2_PIX_FMT_SGBRG12
 
	`v4l2_fourcc
('G', 'B', '1', '2'è

	)

359 
	#V4L2_PIX_FMT_SGRBG12
 
	`v4l2_fourcc
('B', 'A', '1', '2'è

	)

360 
	#V4L2_PIX_FMT_SRGGB12
 
	`v4l2_fourcc
('R', 'G', '1', '2'è

	)

362 
	#V4L2_PIX_FMT_SGRBG10DPCM8
 
	`v4l2_fourcc
('B', 'D', '1', '0')

	)

367 
	#V4L2_PIX_FMT_SBGGR16
 
	`v4l2_fourcc
('B', 'Y', 'R', '2'è

	)

370 
	#V4L2_PIX_FMT_MJPEG
 
	`v4l2_fourcc
('M', 'J', 'P', 'G'è

	)

371 
	#V4L2_PIX_FMT_JPEG
 
	`v4l2_fourcc
('J', 'P', 'E', 'G'è

	)

372 
	#V4L2_PIX_FMT_DV
 
	`v4l2_fourcc
('d', 'v', 's', 'd'è

	)

373 
	#V4L2_PIX_FMT_MPEG
 
	`v4l2_fourcc
('M', 'P', 'E', 'G'è

	)

374 
	#V4L2_PIX_FMT_H264
 
	`v4l2_fourcc
('H', '2', '6', '4'è

	)

375 
	#V4L2_PIX_FMT_H264_NO_SC
 
	`v4l2_fourcc
('A', 'V', 'C', '1'è

	)

376 
	#V4L2_PIX_FMT_H263
 
	`v4l2_fourcc
('H', '2', '6', '3'è

	)

377 
	#V4L2_PIX_FMT_MPEG1
 
	`v4l2_fourcc
('M', 'P', 'G', '1'è

	)

378 
	#V4L2_PIX_FMT_MPEG2
 
	`v4l2_fourcc
('M', 'P', 'G', '2'è

	)

379 
	#V4L2_PIX_FMT_MPEG4
 
	`v4l2_fourcc
('M', 'P', 'G', '4'è

	)

380 
	#V4L2_PIX_FMT_XVID
 
	`v4l2_fourcc
('X', 'V', 'I', 'D'è

	)

381 
	#V4L2_PIX_FMT_VC1_ANNEX_G
 
	`v4l2_fourcc
('V', 'C', '1', 'G'è

	)

382 
	#V4L2_PIX_FMT_VC1_ANNEX_L
 
	`v4l2_fourcc
('V', 'C', '1', 'L'è

	)

385 
	#V4L2_PIX_FMT_CPIA1
 
	`v4l2_fourcc
('C', 'P', 'I', 'A'è

	)

386 
	#V4L2_PIX_FMT_WNVA
 
	`v4l2_fourcc
('W', 'N', 'V', 'A'è

	)

387 
	#V4L2_PIX_FMT_SN9C10X
 
	`v4l2_fourcc
('S', '9', '1', '0'è

	)

388 
	#V4L2_PIX_FMT_SN9C20X_I420
 
	`v4l2_fourcc
('S', '9', '2', '0'è

	)

389 
	#V4L2_PIX_FMT_PWC1
 
	`v4l2_fourcc
('P', 'W', 'C', '1'è

	)

390 
	#V4L2_PIX_FMT_PWC2
 
	`v4l2_fourcc
('P', 'W', 'C', '2'è

	)

391 
	#V4L2_PIX_FMT_ET61X251
 
	`v4l2_fourcc
('E', '6', '2', '5'è

	)

392 
	#V4L2_PIX_FMT_SPCA501
 
	`v4l2_fourcc
('S', '5', '0', '1'è

	)

393 
	#V4L2_PIX_FMT_SPCA505
 
	`v4l2_fourcc
('S', '5', '0', '5'è

	)

394 
	#V4L2_PIX_FMT_SPCA508
 
	`v4l2_fourcc
('S', '5', '0', '8'è

	)

395 
	#V4L2_PIX_FMT_SPCA561
 
	`v4l2_fourcc
('S', '5', '6', '1'è

	)

396 
	#V4L2_PIX_FMT_PAC207
 
	`v4l2_fourcc
('P', '2', '0', '7'è

	)

397 
	#V4L2_PIX_FMT_MR97310A
 
	`v4l2_fourcc
('M', '3', '1', '0'è

	)

398 
	#V4L2_PIX_FMT_SN9C2028
 
	`v4l2_fourcc
('S', 'O', 'N', 'X'è

	)

399 
	#V4L2_PIX_FMT_SQ905C
 
	`v4l2_fourcc
('9', '0', '5', 'C'è

	)

400 
	#V4L2_PIX_FMT_PJPG
 
	`v4l2_fourcc
('P', 'J', 'P', 'G'è

	)

401 
	#V4L2_PIX_FMT_OV511
 
	`v4l2_fourcc
('O', '5', '1', '1'è

	)

402 
	#V4L2_PIX_FMT_OV518
 
	`v4l2_fourcc
('O', '5', '1', '8'è

	)

403 
	#V4L2_PIX_FMT_STV0680
 
	`v4l2_fourcc
('S', '6', '8', '0'è

	)

404 
	#V4L2_PIX_FMT_TM6000
 
	`v4l2_fourcc
('T', 'M', '6', '0'è

	)

405 
	#V4L2_PIX_FMT_CIT_YYVYUY
 
	`v4l2_fourcc
('C', 'I', 'T', 'V'è

	)

406 
	#V4L2_PIX_FMT_KONICA420
 
	`v4l2_fourcc
('K', 'O', 'N', 'I'è

	)

407 
	#V4L2_PIX_FMT_JPGL
 
	`v4l2_fourcc
('J', 'P', 'G', 'L'è

	)

408 
	#V4L2_PIX_FMT_SE401
 
	`v4l2_fourcc
('S', '4', '0', '1'è

	)

413 
	sv4l2_fmtdesc
 {

414 
__u32
 
	mšdex
;

415 
v4l2_buf_ty³
 
	mty³
;

416 
__u32
 
	mæags
;

417 
__u8
 
	mdesütiÚ
[32];

418 
__u32
 
	mpix–fÜm©
;

419 
__u32
 
	m»£rved
[4];

422 
	#V4L2_FMT_FLAG_COMPRESSED
 0x0001

	)

423 
	#V4L2_FMT_FLAG_EMULATED
 0x0002

	)

430 
	ev4l2_ämsiz‘y³s
 {

431 
	mV4L2_FRMSIZE_TYPE_DISCRETE
 = 1,

432 
	mV4L2_FRMSIZE_TYPE_CONTINUOUS
 = 2,

433 
	mV4L2_FRMSIZE_TYPE_STEPWISE
 = 3,

436 
	sv4l2_ämsize_disü‘e
 {

437 
__u32
 
	mwidth
;

438 
__u32
 
	mheight
;

441 
	sv4l2_ämsize_¡•wi£
 {

442 
__u32
 
	mmš_width
;

443 
__u32
 
	mmax_width
;

444 
__u32
 
	m¡•_width
;

445 
__u32
 
	mmš_height
;

446 
__u32
 
	mmax_height
;

447 
__u32
 
	m¡•_height
;

450 
	sv4l2_ämsiz“num
 {

451 
__u32
 
	mšdex
;

452 
__u32
 
	mpix–_fÜm©
;

453 
__u32
 
	mty³
;

456 
v4l2_ämsize_disü‘e
 
	mdisü‘e
;

457 
v4l2_ämsize_¡•wi£
 
	m¡•wi£
;

460 
__u32
 
	m»£rved
[2];

466 
	ev4l2_ämiv®ty³s
 {

467 
	mV4L2_FRMIVAL_TYPE_DISCRETE
 = 1,

468 
	mV4L2_FRMIVAL_TYPE_CONTINUOUS
 = 2,

469 
	mV4L2_FRMIVAL_TYPE_STEPWISE
 = 3,

472 
	sv4l2_ämiv®_¡•wi£
 {

473 
v4l2_äaù
 
	mmš
;

474 
v4l2_äaù
 
	mmax
;

475 
v4l2_äaù
 
	m¡•
;

478 
	sv4l2_ämiv®’um
 {

479 
__u32
 
	mšdex
;

480 
__u32
 
	mpix–_fÜm©
;

481 
__u32
 
	mwidth
;

482 
__u32
 
	mheight
;

483 
__u32
 
	mty³
;

486 
v4l2_äaù
 
	mdisü‘e
;

487 
v4l2_ämiv®_¡•wi£
 
	m¡•wi£
;

490 
__u32
 
	m»£rved
[2];

497 
	sv4l2_timecode
 {

498 
__u32
 
	mty³
;

499 
__u32
 
	mæags
;

500 
__u8
 
	mäames
;

501 
__u8
 
	m£cÚds
;

502 
__u8
 
	mmšu‹s
;

503 
__u8
 
	mhours
;

504 
__u8
 
	mu£rb™s
[4];

508 
	#V4L2_TC_TYPE_24FPS
 1

	)

509 
	#V4L2_TC_TYPE_25FPS
 2

	)

510 
	#V4L2_TC_TYPE_30FPS
 3

	)

511 
	#V4L2_TC_TYPE_50FPS
 4

	)

512 
	#V4L2_TC_TYPE_60FPS
 5

	)

515 
	#V4L2_TC_FLAG_DROPFRAME
 0x0001

	)

516 
	#V4L2_TC_FLAG_COLORFRAME
 0x0002

	)

517 
	#V4L2_TC_USERBITS_f›ld
 0x000C

	)

518 
	#V4L2_TC_USERBITS_USERDEFINED
 0x0000

	)

519 
	#V4L2_TC_USERBITS_8BITCHARS
 0x0008

	)

522 
	sv4l2_j³gcom´essiÚ
 {

523 
	mqu®™y
;

525 
	mAPPn
;

527 
	mAPP_Ën
;

528 
	mAPP_d©a
[60];

530 
	mCOM_Ën
;

531 
	mCOM_d©a
[60];

533 
__u32
 
	mj³g_m¬k”s
;

543 
	#V4L2_JPEG_MARKER_DHT
 (1<<3è

	)

544 
	#V4L2_JPEG_MARKER_DQT
 (1<<4è

	)

545 
	#V4L2_JPEG_MARKER_DRI
 (1<<5è

	)

546 
	#V4L2_JPEG_MARKER_COM
 (1<<6è

	)

547 
	#V4L2_JPEG_MARKER_APP
 (1<<7è

	)

554 
	sv4l2_»que¡bufãrs
 {

555 
__u32
 
	mcouÁ
;

556 
v4l2_buf_ty³
 
	mty³
;

557 
v4l2_memÜy
 
	mmemÜy
;

558 
__u32
 
	m»£rved
[2];

579 
	sv4l2_¶ªe
 {

580 
__u32
 
	mby‹su£d
;

581 
__u32
 
	mËngth
;

583 
__u32
 
	mmem_off£t
;

584 
	mu£½Œ
;

585 } 
	mm
;

586 
__u32
 
	md©a_off£t
;

587 
__u32
 
	m»£rved
[11];

617 
	sv4l2_bufãr
 {

618 
__u32
 
	mšdex
;

619 
v4l2_buf_ty³
 
	mty³
;

620 
__u32
 
	mby‹su£d
;

621 
__u32
 
	mæags
;

622 
v4l2_f›ld
 
	mf›ld
;

623 
timev®
 
	mtime¡amp
;

624 
v4l2_timecode
 
	mtimecode
;

625 
__u32
 
	m£qu’û
;

628 
v4l2_memÜy
 
	mmemÜy
;

630 
__u32
 
	moff£t
;

631 
	mu£½Œ
;

632 
v4l2_¶ªe
 *
	m¶ªes
;

633 } 
	mm
;

634 
__u32
 
	mËngth
;

635 
__u32
 
	mšput
;

636 
__u32
 
	m»£rved
;

640 
	#V4L2_BUF_FLAG_MAPPED
 0x0001

	)

641 
	#V4L2_BUF_FLAG_QUEUED
 0x0002

	)

642 
	#V4L2_BUF_FLAG_DONE
 0x0004

	)

643 
	#V4L2_BUF_FLAG_KEYFRAME
 0x0008

	)

644 
	#V4L2_BUF_FLAG_PFRAME
 0x0010

	)

645 
	#V4L2_BUF_FLAG_BFRAME
 0x0020

	)

647 
	#V4L2_BUF_FLAG_ERROR
 0x0040

	)

648 
	#V4L2_BUF_FLAG_TIMECODE
 0x0100

	)

649 
	#V4L2_BUF_FLAG_INPUT
 0x0200

	)

650 
	#V4L2_BUF_FLAG_PREPARED
 0x0400

	)

652 
	#V4L2_BUF_FLAG_NO_CACHE_INVALIDATE
 0x0800

	)

653 
	#V4L2_BUF_FLAG_NO_CACHE_CLEAN
 0x1000

	)

658 
	sv4l2_äamebufãr
 {

659 
__u32
 
	mÿ·b™y
;

660 
__u32
 
	mæags
;

663 *
	mba£
;

664 
v4l2_pix_fÜm©
 
	mfmt
;

667 
	#V4L2_FBUF_CAP_EXTERNOVERLAY
 0x0001

	)

668 
	#V4L2_FBUF_CAP_CHROMAKEY
 0x0002

	)

669 
	#V4L2_FBUF_CAP_LIST_CLIPPING
 0x0004

	)

670 
	#V4L2_FBUF_CAP_BITMAP_CLIPPING
 0x0008

	)

671 
	#V4L2_FBUF_CAP_LOCAL_ALPHA
 0x0010

	)

672 
	#V4L2_FBUF_CAP_GLOBAL_ALPHA
 0x0020

	)

673 
	#V4L2_FBUF_CAP_LOCAL_INV_ALPHA
 0x0040

	)

674 
	#V4L2_FBUF_CAP_SRC_CHROMAKEY
 0x0080

	)

676 
	#V4L2_FBUF_FLAG_PRIMARY
 0x0001

	)

677 
	#V4L2_FBUF_FLAG_OVERLAY
 0x0002

	)

678 
	#V4L2_FBUF_FLAG_CHROMAKEY
 0x0004

	)

679 
	#V4L2_FBUF_FLAG_LOCAL_ALPHA
 0x0008

	)

680 
	#V4L2_FBUF_FLAG_GLOBAL_ALPHA
 0x0010

	)

681 
	#V4L2_FBUF_FLAG_LOCAL_INV_ALPHA
 0x0020

	)

682 
	#V4L2_FBUF_FLAG_SRC_CHROMAKEY
 0x0040

	)

684 
	sv4l2_ş
 {

685 
v4l2_»ù
 
	mc
;

686 
v4l2_ş
 *
	mÃxt
;

689 
	sv4l2_wšdow
 {

690 
v4l2_»ù
 
	mw
;

691 
v4l2_f›ld
 
	mf›ld
;

692 
__u32
 
	mchromakey
;

693 
v4l2_ş
 *
	mşs
;

694 
__u32
 
	mşcouÁ
;

695 *
	mb™m­
;

696 
__u8
 
	mglob®_®pha
;

702 
	sv4l2_ÿ±u»·rm
 {

703 
__u32
 
	mÿ·b™y
;

704 
__u32
 
	mÿ±u»mode
;

705 
v4l2_äaù
 
	mtim•”äame
;

706 
__u32
 
	mex‹ndedmode
;

707 
__u32
 
	m»adbufãrs
;

708 
__u32
 
	m»£rved
[4];

712 
	#V4L2_MODE_HIGHQUALITY
 0x0001

	)

713 
	#V4L2_CAP_TIMEPERFRAME
 0x1000

	)

715 
	sv4l2_ouu¬m
 {

716 
__u32
 
	mÿ·b™y
;

717 
__u32
 
	mouutmode
;

718 
v4l2_äaù
 
	mtim•”äame
;

719 
__u32
 
	mex‹ndedmode
;

720 
__u32
 
	mwr™ebufãrs
;

721 
__u32
 
	m»£rved
[4];

727 
	sv4l2_üİÿp
 {

728 
v4l2_buf_ty³
 
	mty³
;

729 
v4l2_»ù
 
	mbounds
;

730 
v4l2_»ù
 
	mdeäeù
;

731 
v4l2_äaù
 
	mpix–a¥eù
;

734 
	sv4l2_üİ
 {

735 
v4l2_buf_ty³
 
	mty³
;

736 
v4l2_»ù
 
	mc
;

743 
__u64
 
	tv4l2_¡d_id
;

746 
	#V4L2_STD_PAL_B
 ((
v4l2_¡d_id
)0x00000001)

	)

747 
	#V4L2_STD_PAL_B1
 ((
v4l2_¡d_id
)0x00000002)

	)

748 
	#V4L2_STD_PAL_G
 ((
v4l2_¡d_id
)0x00000004)

	)

749 
	#V4L2_STD_PAL_H
 ((
v4l2_¡d_id
)0x00000008)

	)

750 
	#V4L2_STD_PAL_I
 ((
v4l2_¡d_id
)0x00000010)

	)

751 
	#V4L2_STD_PAL_D
 ((
v4l2_¡d_id
)0x00000020)

	)

752 
	#V4L2_STD_PAL_D1
 ((
v4l2_¡d_id
)0x00000040)

	)

753 
	#V4L2_STD_PAL_K
 ((
v4l2_¡d_id
)0x00000080)

	)

755 
	#V4L2_STD_PAL_M
 ((
v4l2_¡d_id
)0x00000100)

	)

756 
	#V4L2_STD_PAL_N
 ((
v4l2_¡d_id
)0x00000200)

	)

757 
	#V4L2_STD_PAL_Nc
 ((
v4l2_¡d_id
)0x00000400)

	)

758 
	#V4L2_STD_PAL_60
 ((
v4l2_¡d_id
)0x00000800)

	)

760 
	#V4L2_STD_NTSC_M
 ((
v4l2_¡d_id
)0x00001000è

	)

761 
	#V4L2_STD_NTSC_M_JP
 ((
v4l2_¡d_id
)0x00002000è

	)

762 
	#V4L2_STD_NTSC_443
 ((
v4l2_¡d_id
)0x00004000)

	)

763 
	#V4L2_STD_NTSC_M_KR
 ((
v4l2_¡d_id
)0x00008000è

	)

765 
	#V4L2_STD_SECAM_B
 ((
v4l2_¡d_id
)0x00010000)

	)

766 
	#V4L2_STD_SECAM_D
 ((
v4l2_¡d_id
)0x00020000)

	)

767 
	#V4L2_STD_SECAM_G
 ((
v4l2_¡d_id
)0x00040000)

	)

768 
	#V4L2_STD_SECAM_H
 ((
v4l2_¡d_id
)0x00080000)

	)

769 
	#V4L2_STD_SECAM_K
 ((
v4l2_¡d_id
)0x00100000)

	)

770 
	#V4L2_STD_SECAM_K1
 ((
v4l2_¡d_id
)0x00200000)

	)

771 
	#V4L2_STD_SECAM_L
 ((
v4l2_¡d_id
)0x00400000)

	)

772 
	#V4L2_STD_SECAM_LC
 ((
v4l2_¡d_id
)0x00800000)

	)

775 
	#V4L2_STD_ATSC_8_VSB
 ((
v4l2_¡d_id
)0x01000000)

	)

776 
	#V4L2_STD_ATSC_16_VSB
 ((
v4l2_¡d_id
)0x02000000)

	)

796 
	#V4L2_STD_NTSC
 (
V4L2_STD_NTSC_M
 |\

797 
V4L2_STD_NTSC_M_JP
 |\

798 
V4L2_STD_NTSC_M_KR
)

	)

800 
	#V4L2_STD_SECAM_DK
 (
V4L2_STD_SECAM_D
 |\

801 
V4L2_STD_SECAM_K
 |\

802 
V4L2_STD_SECAM_K1
)

	)

804 
	#V4L2_STD_SECAM
 (
V4L2_STD_SECAM_B
 |\

805 
V4L2_STD_SECAM_G
 |\

806 
V4L2_STD_SECAM_H
 |\

807 
V4L2_STD_SECAM_DK
 |\

808 
V4L2_STD_SECAM_L
 |\

809 
V4L2_STD_SECAM_LC
)

	)

811 
	#V4L2_STD_PAL_BG
 (
V4L2_STD_PAL_B
 |\

812 
V4L2_STD_PAL_B1
 |\

813 
V4L2_STD_PAL_G
)

	)

814 
	#V4L2_STD_PAL_DK
 (
V4L2_STD_PAL_D
 |\

815 
V4L2_STD_PAL_D1
 |\

816 
V4L2_STD_PAL_K
)

	)

822 
	#V4L2_STD_PAL
 (
V4L2_STD_PAL_BG
 |\

823 
V4L2_STD_PAL_DK
 |\

824 
V4L2_STD_PAL_H
 |\

825 
V4L2_STD_PAL_I
)

	)

827 
	#V4L2_STD_B
 (
V4L2_STD_PAL_B
 |\

828 
V4L2_STD_PAL_B1
 |\

829 
V4L2_STD_SECAM_B
)

	)

830 
	#V4L2_STD_G
 (
V4L2_STD_PAL_G
 |\

831 
V4L2_STD_SECAM_G
)

	)

832 
	#V4L2_STD_H
 (
V4L2_STD_PAL_H
 |\

833 
V4L2_STD_SECAM_H
)

	)

834 
	#V4L2_STD_L
 (
V4L2_STD_SECAM_L
 |\

835 
V4L2_STD_SECAM_LC
)

	)

836 
	#V4L2_STD_GH
 (
V4L2_STD_G
 |\

837 
V4L2_STD_H
)

	)

838 
	#V4L2_STD_DK
 (
V4L2_STD_PAL_DK
 |\

839 
V4L2_STD_SECAM_DK
)

	)

840 
	#V4L2_STD_BG
 (
V4L2_STD_B
 |\

841 
V4L2_STD_G
)

	)

842 
	#V4L2_STD_MN
 (
V4L2_STD_PAL_M
 |\

843 
V4L2_STD_PAL_N
 |\

844 
V4L2_STD_PAL_Nc
 |\

845 
V4L2_STD_NTSC
)

	)

848 
	#V4L2_STD_MTS
 (
V4L2_STD_NTSC_M
 |\

849 
V4L2_STD_PAL_M
 |\

850 
V4L2_STD_PAL_N
 |\

851 
V4L2_STD_PAL_Nc
)

	)

854 
	#V4L2_STD_525_60
 (
V4L2_STD_PAL_M
 |\

855 
V4L2_STD_PAL_60
 |\

856 
V4L2_STD_NTSC
 |\

857 
V4L2_STD_NTSC_443
)

	)

859 
	#V4L2_STD_625_50
 (
V4L2_STD_PAL
 |\

860 
V4L2_STD_PAL_N
 |\

861 
V4L2_STD_PAL_Nc
 |\

862 
V4L2_STD_SECAM
)

	)

864 
	#V4L2_STD_ATSC
 (
V4L2_STD_ATSC_8_VSB
 |\

865 
V4L2_STD_ATSC_16_VSB
)

	)

867 
	#V4L2_STD_UNKNOWN
 0

	)

868 
	#V4L2_STD_ALL
 (
V4L2_STD_525_60
 |\

869 
V4L2_STD_625_50
)

	)

871 
	sv4l2_¡ªd¬d
 {

872 
__u32
 
	mšdex
;

873 
v4l2_¡d_id
 
	mid
;

874 
__u8
 
	mÇme
[24];

875 
v4l2_äaù
 
	mäam•”iod
;

876 
__u32
 
	mäam–šes
;

877 
__u32
 
	m»£rved
[4];

883 
	sv4l2_dv_´e£t
 {

884 
__u32
 
	m´e£t
;

885 
__u32
 
	m»£rved
[4];

891 
	sv4l2_dv_’um_´e£t
 {

892 
__u32
 
	mšdex
;

893 
__u32
 
	m´e£t
;

894 
__u8
 
	mÇme
[32];

895 
__u32
 
	mwidth
;

896 
__u32
 
	mheight
;

897 
__u32
 
	m»£rved
[4];

903 
	#V4L2_DV_INVALID
 0

	)

904 
	#V4L2_DV_480P59_94
 1

	)

905 
	#V4L2_DV_576P50
 2

	)

906 
	#V4L2_DV_720P24
 3

	)

907 
	#V4L2_DV_720P25
 4

	)

908 
	#V4L2_DV_720P30
 5

	)

909 
	#V4L2_DV_720P50
 6

	)

910 
	#V4L2_DV_720P59_94
 7

	)

911 
	#V4L2_DV_720P60
 8

	)

912 
	#V4L2_DV_1080I29_97
 9

	)

913 
	#V4L2_DV_1080I30
 10

	)

914 
	#V4L2_DV_1080I25
 11

	)

915 
	#V4L2_DV_1080I50
 12

	)

916 
	#V4L2_DV_1080I60
 13

	)

917 
	#V4L2_DV_1080P24
 14

	)

918 
	#V4L2_DV_1080P25
 15

	)

919 
	#V4L2_DV_1080P30
 16

	)

920 
	#V4L2_DV_1080P50
 17

	)

921 
	#V4L2_DV_1080P60
 18

	)

928 
	sv4l2_bt_timšgs
 {

929 
__u32
 
	mwidth
;

930 
__u32
 
	mheight
;

931 
__u32
 
	mš‹¾aûd
;

932 
__u32
 
	mpŞ¬™›s
;

933 
__u64
 
	mpix–şock
;

934 
__u32
 
	mhäÚÜch
;

935 
__u32
 
	mhsync
;

936 
__u32
 
	mhbackpÜch
;

937 
__u32
 
	mväÚÜch
;

938 
__u32
 
	mvsync
;

939 
__u32
 
	mvbackpÜch
;

940 
__u32
 
	m_väÚÜch
;

943 
__u32
 
	m_vsync
;

946 
__u32
 
	m_vbackpÜch
;

949 
__u32
 
	m»£rved
[16];

950 } 
__©Œibu‹__
 ((
·cked
));

953 
	#V4L2_DV_PROGRESSIVE
 0

	)

954 
	#V4L2_DV_INTERLACED
 1

	)

957 
	#V4L2_DV_VSYNC_POS_POL
 0x00000001

	)

958 
	#V4L2_DV_HSYNC_POS_POL
 0x00000002

	)

962 
	sv4l2_dv_timšgs
 {

963 
__u32
 
	mty³
;

965 
v4l2_bt_timšgs
 
	mbt
;

966 
__u32
 
	m»£rved
[32];

968 } 
__©Œibu‹__
 ((
·cked
));

971 
	#V4L2_DV_BT_656_1120
 0

	)

976 
	sv4l2_šput
 {

977 
__u32
 
	mšdex
;

978 
__u8
 
	mÇme
[32];

979 
__u32
 
	mty³
;

980 
__u32
 
	maudio£t
;

981 
__u32
 
	mtuÃr
;

982 
v4l2_¡d_id
 
	m¡d
;

983 
__u32
 
	m¡©us
;

984 
__u32
 
	mÿ·b™›s
;

985 
__u32
 
	m»£rved
[3];

989 
	#V4L2_INPUT_TYPE_TUNER
 1

	)

990 
	#V4L2_INPUT_TYPE_CAMERA
 2

	)

993 
	#V4L2_IN_ST_NO_POWER
 0x00000001

	)

994 
	#V4L2_IN_ST_NO_SIGNAL
 0x00000002

	)

995 
	#V4L2_IN_ST_NO_COLOR
 0x00000004

	)

999 
	#V4L2_IN_ST_HFLIP
 0x00000010

	)

1000 
	#V4L2_IN_ST_VFLIP
 0x00000020

	)

1003 
	#V4L2_IN_ST_NO_H_LOCK
 0x00000100

	)

1004 
	#V4L2_IN_ST_COLOR_KILL
 0x00000200

	)

1007 
	#V4L2_IN_ST_NO_SYNC
 0x00010000

	)

1008 
	#V4L2_IN_ST_NO_EQU
 0x00020000

	)

1009 
	#V4L2_IN_ST_NO_CARRIER
 0x00040000

	)

1012 
	#V4L2_IN_ST_MACROVISION
 0x01000000

	)

1013 
	#V4L2_IN_ST_NO_ACCESS
 0x02000000

	)

1014 
	#V4L2_IN_ST_VTR
 0x04000000

	)

1017 
	#V4L2_IN_CAP_PRESETS
 0x00000001

	)

1018 
	#V4L2_IN_CAP_CUSTOM_TIMINGS
 0x00000002

	)

1019 
	#V4L2_IN_CAP_STD
 0x00000004

	)

1024 
	sv4l2_ouut
 {

1025 
__u32
 
	mšdex
;

1026 
__u8
 
	mÇme
[32];

1027 
__u32
 
	mty³
;

1028 
__u32
 
	maudio£t
;

1029 
__u32
 
	mmoduÏtÜ
;

1030 
v4l2_¡d_id
 
	m¡d
;

1031 
__u32
 
	mÿ·b™›s
;

1032 
__u32
 
	m»£rved
[3];

1035 
	#V4L2_OUTPUT_TYPE_MODULATOR
 1

	)

1036 
	#V4L2_OUTPUT_TYPE_ANALOG
 2

	)

1037 
	#V4L2_OUTPUT_TYPE_ANALOGVGAOVERLAY
 3

	)

1040 
	#V4L2_OUT_CAP_PRESETS
 0x00000001

	)

1041 
	#V4L2_OUT_CAP_CUSTOM_TIMINGS
 0x00000002

	)

1042 
	#V4L2_OUT_CAP_STD
 0x00000004

	)

1047 
	sv4l2_cÚŒŞ
 {

1048 
__u32
 
	mid
;

1049 
__s32
 
	mv®ue
;

1052 
	sv4l2_ext_cÚŒŞ
 {

1053 
__u32
 
	mid
;

1054 
__u32
 
	msize
;

1055 
__u32
 
	m»£rved2
[1];

1057 
__s32
 
	mv®ue
;

1058 
__s64
 
	mv®ue64
;

1059 *
	m¡ršg
;

1061 } 
__©Œibu‹__
 ((
·cked
));

1063 
	sv4l2_ext_cÚŒŞs
 {

1064 
__u32
 
	mù¾_şass
;

1065 
__u32
 
	mcouÁ
;

1066 
__u32
 
	m”rÜ_idx
;

1067 
__u32
 
	m»£rved
[2];

1068 
v4l2_ext_cÚŒŞ
 *
	mcÚŒŞs
;

1072 
	#V4L2_CTRL_CLASS_USER
 0x00980000

	)

1073 
	#V4L2_CTRL_CLASS_MPEG
 0x00990000

	)

1074 
	#V4L2_CTRL_CLASS_CAMERA
 0x009a0000

	)

1075 
	#V4L2_CTRL_CLASS_FM_TX
 0x009b0000

	)

1076 
	#V4L2_CTRL_CLASS_FLASH
 0x009c0000

	)

1078 
	#V4L2_CTRL_ID_MASK
 (0x0fffffff)

	)

1079 
	#V4L2_CTRL_ID2CLASS
(
id
è((idè& 0x0fff0000UL)

	)

1080 
	#V4L2_CTRL_DRIVER_PRIV
(
id
è(((idè& 0xffffè>ğ0x1000)

	)

1082 
	ev4l2_ù¾_ty³
 {

1083 
	mV4L2_CTRL_TYPE_INTEGER
 = 1,

1084 
	mV4L2_CTRL_TYPE_BOOLEAN
 = 2,

1085 
	mV4L2_CTRL_TYPE_MENU
 = 3,

1086 
	mV4L2_CTRL_TYPE_BUTTON
 = 4,

1087 
	mV4L2_CTRL_TYPE_INTEGER64
 = 5,

1088 
	mV4L2_CTRL_TYPE_CTRL_CLASS
 = 6,

1089 
	mV4L2_CTRL_TYPE_STRING
 = 7,

1090 
	mV4L2_CTRL_TYPE_BITMASK
 = 8,

1094 
	sv4l2_qu”yù¾
 {

1095 
__u32
 
	mid
;

1096 
v4l2_ù¾_ty³
 
	mty³
;

1097 
__u8
 
	mÇme
[32];

1098 
__s32
 
	mmšimum
;

1099 
__s32
 
	mmaximum
;

1100 
__s32
 
	m¡•
;

1101 
__s32
 
	mdeçuÉ_v®ue
;

1102 
__u32
 
	mæags
;

1103 
__u32
 
	m»£rved
[2];

1107 
	sv4l2_qu”ym’u
 {

1108 
__u32
 
	mid
;

1109 
__u32
 
	mšdex
;

1110 
__u8
 
	mÇme
[32];

1111 
__u32
 
	m»£rved
;

1115 
	#V4L2_CTRL_FLAG_DISABLED
 0x0001

	)

1116 
	#V4L2_CTRL_FLAG_GRABBED
 0x0002

	)

1117 
	#V4L2_CTRL_FLAG_READ_ONLY
 0x0004

	)

1118 
	#V4L2_CTRL_FLAG_UPDATE
 0x0008

	)

1119 
	#V4L2_CTRL_FLAG_INACTIVE
 0x0010

	)

1120 
	#V4L2_CTRL_FLAG_SLIDER
 0x0020

	)

1121 
	#V4L2_CTRL_FLAG_WRITE_ONLY
 0x0040

	)

1122 
	#V4L2_CTRL_FLAG_VOLATILE
 0x0080

	)

1125 
	#V4L2_CTRL_FLAG_NEXT_CTRL
 0x80000000

	)

1128 
	#V4L2_CID_MAX_CTRLS
 1024

	)

1129 
	#V4L2_CID_BASE
 (
V4L2_CTRL_CLASS_USER
 | 0x900)

	)

1130 
	#V4L2_CID_USER_BASE
 
V4L2_CID_BASE


	)

1132 
	#V4L2_CID_PRIVATE_BASE
 0x08000000

	)

1134 
	#V4L2_CID_USER_CLASS
 (
V4L2_CTRL_CLASS_USER
 | 1)

	)

1135 
	#V4L2_CID_BRIGHTNESS
 (
V4L2_CID_BASE
+0)

	)

1136 
	#V4L2_CID_CONTRAST
 (
V4L2_CID_BASE
+1)

	)

1137 
	#V4L2_CID_SATURATION
 (
V4L2_CID_BASE
+2)

	)

1138 
	#V4L2_CID_HUE
 (
V4L2_CID_BASE
+3)

	)

1139 
	#V4L2_CID_AUDIO_VOLUME
 (
V4L2_CID_BASE
+5)

	)

1140 
	#V4L2_CID_AUDIO_BALANCE
 (
V4L2_CID_BASE
+6)

	)

1141 
	#V4L2_CID_AUDIO_BASS
 (
V4L2_CID_BASE
+7)

	)

1142 
	#V4L2_CID_AUDIO_TREBLE
 (
V4L2_CID_BASE
+8)

	)

1143 
	#V4L2_CID_AUDIO_MUTE
 (
V4L2_CID_BASE
+9)

	)

1144 
	#V4L2_CID_AUDIO_LOUDNESS
 (
V4L2_CID_BASE
+10)

	)

1145 
	#V4L2_CID_BLACK_LEVEL
 (
V4L2_CID_BASE
+11è

	)

1146 
	#V4L2_CID_AUTO_WHITE_BALANCE
 (
V4L2_CID_BASE
+12)

	)

1147 
	#V4L2_CID_DO_WHITE_BALANCE
 (
V4L2_CID_BASE
+13)

	)

1148 
	#V4L2_CID_RED_BALANCE
 (
V4L2_CID_BASE
+14)

	)

1149 
	#V4L2_CID_BLUE_BALANCE
 (
V4L2_CID_BASE
+15)

	)

1150 
	#V4L2_CID_GAMMA
 (
V4L2_CID_BASE
+16)

	)

1151 
	#V4L2_CID_WHITENESS
 (
V4L2_CID_GAMMA
è

	)

1152 
	#V4L2_CID_EXPOSURE
 (
V4L2_CID_BASE
+17)

	)

1153 
	#V4L2_CID_AUTOGAIN
 (
V4L2_CID_BASE
+18)

	)

1154 
	#V4L2_CID_GAIN
 (
V4L2_CID_BASE
+19)

	)

1155 
	#V4L2_CID_HFLIP
 (
V4L2_CID_BASE
+20)

	)

1156 
	#V4L2_CID_VFLIP
 (
V4L2_CID_BASE
+21)

	)

1159 
	#V4L2_CID_HCENTER
 (
V4L2_CID_BASE
+22)

	)

1160 
	#V4L2_CID_VCENTER
 (
V4L2_CID_BASE
+23)

	)

1162 
	#V4L2_CID_POWER_LINE_FREQUENCY
 (
V4L2_CID_BASE
+24)

	)

1163 
	ev4l2_pow”_lše_äequ’cy
 {

1164 
	mV4L2_CID_POWER_LINE_FREQUENCY_DISABLED
 = 0,

1165 
	mV4L2_CID_POWER_LINE_FREQUENCY_50HZ
 = 1,

1166 
	mV4L2_CID_POWER_LINE_FREQUENCY_60HZ
 = 2,

1167 
	mV4L2_CID_POWER_LINE_FREQUENCY_AUTO
 = 3,

1169 
	#V4L2_CID_HUE_AUTO
 (
V4L2_CID_BASE
+25)

	)

1170 
	#V4L2_CID_WHITE_BALANCE_TEMPERATURE
 (
V4L2_CID_BASE
+26)

	)

1171 
	#V4L2_CID_SHARPNESS
 (
V4L2_CID_BASE
+27)

	)

1172 
	#V4L2_CID_BACKLIGHT_COMPENSATION
 (
V4L2_CID_BASE
+28)

	)

1173 
	#V4L2_CID_CHROMA_AGC
 (
V4L2_CID_BASE
+29)

	)

1174 
	#V4L2_CID_COLOR_KILLER
 (
V4L2_CID_BASE
+30)

	)

1175 
	#V4L2_CID_COLORFX
 (
V4L2_CID_BASE
+31)

	)

1176 
	ev4l2_cŞÜfx
 {

1177 
	mV4L2_COLORFX_NONE
 = 0,

1178 
	mV4L2_COLORFX_BW
 = 1,

1179 
	mV4L2_COLORFX_SEPIA
 = 2,

1180 
	mV4L2_COLORFX_NEGATIVE
 = 3,

1181 
	mV4L2_COLORFX_EMBOSS
 = 4,

1182 
	mV4L2_COLORFX_SKETCH
 = 5,

1183 
	mV4L2_COLORFX_SKY_BLUE
 = 6,

1184 
	mV4L2_COLORFX_GRASS_GREEN
 = 7,

1185 
	mV4L2_COLORFX_SKIN_WHITEN
 = 8,

1186 
	mV4L2_COLORFX_VIVID
 = 9,

1188 
	#V4L2_CID_AUTOBRIGHTNESS
 (
V4L2_CID_BASE
+32)

	)

1189 
	#V4L2_CID_BAND_STOP_FILTER
 (
V4L2_CID_BASE
+33)

	)

1191 
	#V4L2_CID_ROTATE
 (
V4L2_CID_BASE
+34)

	)

1192 
	#V4L2_CID_BG_COLOR
 (
V4L2_CID_BASE
+35)

	)

1194 
	#V4L2_CID_CHROMA_GAIN
 (
V4L2_CID_BASE
+36)

	)

1196 
	#V4L2_CID_ILLUMINATORS_1
 (
V4L2_CID_BASE
+37)

	)

1197 
	#V4L2_CID_ILLUMINATORS_2
 (
V4L2_CID_BASE
+38)

	)

1199 
	#V4L2_CID_MIN_BUFFERS_FOR_CAPTURE
 (
V4L2_CID_BASE
+39)

	)

1200 
	#V4L2_CID_MIN_BUFFERS_FOR_OUTPUT
 (
V4L2_CID_BASE
+40)

	)

1203 
	#V4L2_CID_LASTP1
 (
V4L2_CID_BASE
+41)

	)

1208 
	#V4L2_CID_MPEG_BASE
 (
V4L2_CTRL_CLASS_MPEG
 | 0x900)

	)

1209 
	#V4L2_CID_MPEG_CLASS
 (
V4L2_CTRL_CLASS_MPEG
 | 1)

	)

1212 
	#V4L2_CID_MPEG_STREAM_TYPE
 (
V4L2_CID_MPEG_BASE
+0)

	)

1213 
	ev4l2_m³g_¡»am_ty³
 {

1214 
	mV4L2_MPEG_STREAM_TYPE_MPEG2_PS
 = 0,

1215 
	mV4L2_MPEG_STREAM_TYPE_MPEG2_TS
 = 1,

1216 
	mV4L2_MPEG_STREAM_TYPE_MPEG1_SS
 = 2,

1217 
	mV4L2_MPEG_STREAM_TYPE_MPEG2_DVD
 = 3,

1218 
	mV4L2_MPEG_STREAM_TYPE_MPEG1_VCD
 = 4,

1219 
	mV4L2_MPEG_STREAM_TYPE_MPEG2_SVCD
 = 5,

1221 
	#V4L2_CID_MPEG_STREAM_PID_PMT
 (
V4L2_CID_MPEG_BASE
+1)

	)

1222 
	#V4L2_CID_MPEG_STREAM_PID_AUDIO
 (
V4L2_CID_MPEG_BASE
+2)

	)

1223 
	#V4L2_CID_MPEG_STREAM_PID_VIDEO
 (
V4L2_CID_MPEG_BASE
+3)

	)

1224 
	#V4L2_CID_MPEG_STREAM_PID_PCR
 (
V4L2_CID_MPEG_BASE
+4)

	)

1225 
	#V4L2_CID_MPEG_STREAM_PES_ID_AUDIO
 (
V4L2_CID_MPEG_BASE
+5)

	)

1226 
	#V4L2_CID_MPEG_STREAM_PES_ID_VIDEO
 (
V4L2_CID_MPEG_BASE
+6)

	)

1227 
	#V4L2_CID_MPEG_STREAM_VBI_FMT
 (
V4L2_CID_MPEG_BASE
+7)

	)

1228 
	ev4l2_m³g_¡»am_vbi_fmt
 {

1229 
	mV4L2_MPEG_STREAM_VBI_FMT_NONE
 = 0,

1230 
	mV4L2_MPEG_STREAM_VBI_FMT_IVTV
 = 1,

1234 
	#V4L2_CID_MPEG_AUDIO_SAMPLING_FREQ
 (
V4L2_CID_MPEG_BASE
+100)

	)

1235 
	ev4l2_m³g_audio_§m¶šg_äeq
 {

1236 
	mV4L2_MPEG_AUDIO_SAMPLING_FREQ_44100
 = 0,

1237 
	mV4L2_MPEG_AUDIO_SAMPLING_FREQ_48000
 = 1,

1238 
	mV4L2_MPEG_AUDIO_SAMPLING_FREQ_32000
 = 2,

1240 
	#V4L2_CID_MPEG_AUDIO_ENCODING
 (
V4L2_CID_MPEG_BASE
+101)

	)

1241 
	ev4l2_m³g_audio_’codšg
 {

1242 
	mV4L2_MPEG_AUDIO_ENCODING_LAYER_1
 = 0,

1243 
	mV4L2_MPEG_AUDIO_ENCODING_LAYER_2
 = 1,

1244 
	mV4L2_MPEG_AUDIO_ENCODING_LAYER_3
 = 2,

1245 
	mV4L2_MPEG_AUDIO_ENCODING_AAC
 = 3,

1246 
	mV4L2_MPEG_AUDIO_ENCODING_AC3
 = 4,

1248 
	#V4L2_CID_MPEG_AUDIO_L1_BITRATE
 (
V4L2_CID_MPEG_BASE
+102)

	)

1249 
	ev4l2_m³g_audio_l1_b™¿‹
 {

1250 
	mV4L2_MPEG_AUDIO_L1_BITRATE_32K
 = 0,

1251 
	mV4L2_MPEG_AUDIO_L1_BITRATE_64K
 = 1,

1252 
	mV4L2_MPEG_AUDIO_L1_BITRATE_96K
 = 2,

1253 
	mV4L2_MPEG_AUDIO_L1_BITRATE_128K
 = 3,

1254 
	mV4L2_MPEG_AUDIO_L1_BITRATE_160K
 = 4,

1255 
	mV4L2_MPEG_AUDIO_L1_BITRATE_192K
 = 5,

1256 
	mV4L2_MPEG_AUDIO_L1_BITRATE_224K
 = 6,

1257 
	mV4L2_MPEG_AUDIO_L1_BITRATE_256K
 = 7,

1258 
	mV4L2_MPEG_AUDIO_L1_BITRATE_288K
 = 8,

1259 
	mV4L2_MPEG_AUDIO_L1_BITRATE_320K
 = 9,

1260 
	mV4L2_MPEG_AUDIO_L1_BITRATE_352K
 = 10,

1261 
	mV4L2_MPEG_AUDIO_L1_BITRATE_384K
 = 11,

1262 
	mV4L2_MPEG_AUDIO_L1_BITRATE_416K
 = 12,

1263 
	mV4L2_MPEG_AUDIO_L1_BITRATE_448K
 = 13,

1265 
	#V4L2_CID_MPEG_AUDIO_L2_BITRATE
 (
V4L2_CID_MPEG_BASE
+103)

	)

1266 
	ev4l2_m³g_audio_l2_b™¿‹
 {

1267 
	mV4L2_MPEG_AUDIO_L2_BITRATE_32K
 = 0,

1268 
	mV4L2_MPEG_AUDIO_L2_BITRATE_48K
 = 1,

1269 
	mV4L2_MPEG_AUDIO_L2_BITRATE_56K
 = 2,

1270 
	mV4L2_MPEG_AUDIO_L2_BITRATE_64K
 = 3,

1271 
	mV4L2_MPEG_AUDIO_L2_BITRATE_80K
 = 4,

1272 
	mV4L2_MPEG_AUDIO_L2_BITRATE_96K
 = 5,

1273 
	mV4L2_MPEG_AUDIO_L2_BITRATE_112K
 = 6,

1274 
	mV4L2_MPEG_AUDIO_L2_BITRATE_128K
 = 7,

1275 
	mV4L2_MPEG_AUDIO_L2_BITRATE_160K
 = 8,

1276 
	mV4L2_MPEG_AUDIO_L2_BITRATE_192K
 = 9,

1277 
	mV4L2_MPEG_AUDIO_L2_BITRATE_224K
 = 10,

1278 
	mV4L2_MPEG_AUDIO_L2_BITRATE_256K
 = 11,

1279 
	mV4L2_MPEG_AUDIO_L2_BITRATE_320K
 = 12,

1280 
	mV4L2_MPEG_AUDIO_L2_BITRATE_384K
 = 13,

1282 
	#V4L2_CID_MPEG_AUDIO_L3_BITRATE
 (
V4L2_CID_MPEG_BASE
+104)

	)

1283 
	ev4l2_m³g_audio_l3_b™¿‹
 {

1284 
	mV4L2_MPEG_AUDIO_L3_BITRATE_32K
 = 0,

1285 
	mV4L2_MPEG_AUDIO_L3_BITRATE_40K
 = 1,

1286 
	mV4L2_MPEG_AUDIO_L3_BITRATE_48K
 = 2,

1287 
	mV4L2_MPEG_AUDIO_L3_BITRATE_56K
 = 3,

1288 
	mV4L2_MPEG_AUDIO_L3_BITRATE_64K
 = 4,

1289 
	mV4L2_MPEG_AUDIO_L3_BITRATE_80K
 = 5,

1290 
	mV4L2_MPEG_AUDIO_L3_BITRATE_96K
 = 6,

1291 
	mV4L2_MPEG_AUDIO_L3_BITRATE_112K
 = 7,

1292 
	mV4L2_MPEG_AUDIO_L3_BITRATE_128K
 = 8,

1293 
	mV4L2_MPEG_AUDIO_L3_BITRATE_160K
 = 9,

1294 
	mV4L2_MPEG_AUDIO_L3_BITRATE_192K
 = 10,

1295 
	mV4L2_MPEG_AUDIO_L3_BITRATE_224K
 = 11,

1296 
	mV4L2_MPEG_AUDIO_L3_BITRATE_256K
 = 12,

1297 
	mV4L2_MPEG_AUDIO_L3_BITRATE_320K
 = 13,

1299 
	#V4L2_CID_MPEG_AUDIO_MODE
 (
V4L2_CID_MPEG_BASE
+105)

	)

1300 
	ev4l2_m³g_audio_mode
 {

1301 
	mV4L2_MPEG_AUDIO_MODE_STEREO
 = 0,

1302 
	mV4L2_MPEG_AUDIO_MODE_JOINT_STEREO
 = 1,

1303 
	mV4L2_MPEG_AUDIO_MODE_DUAL
 = 2,

1304 
	mV4L2_MPEG_AUDIO_MODE_MONO
 = 3,

1306 
	#V4L2_CID_MPEG_AUDIO_MODE_EXTENSION
 (
V4L2_CID_MPEG_BASE
+106)

	)

1307 
	ev4l2_m³g_audio_mode_ex‹nsiÚ
 {

1308 
	mV4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_4
 = 0,

1309 
	mV4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_8
 = 1,

1310 
	mV4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_12
 = 2,

1311 
	mV4L2_MPEG_AUDIO_MODE_EXTENSION_BOUND_16
 = 3,

1313 
	#V4L2_CID_MPEG_AUDIO_EMPHASIS
 (
V4L2_CID_MPEG_BASE
+107)

	)

1314 
	ev4l2_m³g_audio_emphasis
 {

1315 
	mV4L2_MPEG_AUDIO_EMPHASIS_NONE
 = 0,

1316 
	mV4L2_MPEG_AUDIO_EMPHASIS_50_DIV_15_uS
 = 1,

1317 
	mV4L2_MPEG_AUDIO_EMPHASIS_CCITT_J17
 = 2,

1319 
	#V4L2_CID_MPEG_AUDIO_CRC
 (
V4L2_CID_MPEG_BASE
+108)

	)

1320 
	ev4l2_m³g_audio_üc
 {

1321 
	mV4L2_MPEG_AUDIO_CRC_NONE
 = 0,

1322 
	mV4L2_MPEG_AUDIO_CRC_CRC16
 = 1,

1324 
	#V4L2_CID_MPEG_AUDIO_MUTE
 (
V4L2_CID_MPEG_BASE
+109)

	)

1325 
	#V4L2_CID_MPEG_AUDIO_AAC_BITRATE
 (
V4L2_CID_MPEG_BASE
+110)

	)

1326 
	#V4L2_CID_MPEG_AUDIO_AC3_BITRATE
 (
V4L2_CID_MPEG_BASE
+111)

	)

1327 
	ev4l2_m³g_audio_ac3_b™¿‹
 {

1328 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_32K
 = 0,

1329 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_40K
 = 1,

1330 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_48K
 = 2,

1331 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_56K
 = 3,

1332 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_64K
 = 4,

1333 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_80K
 = 5,

1334 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_96K
 = 6,

1335 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_112K
 = 7,

1336 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_128K
 = 8,

1337 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_160K
 = 9,

1338 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_192K
 = 10,

1339 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_224K
 = 11,

1340 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_256K
 = 12,

1341 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_320K
 = 13,

1342 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_384K
 = 14,

1343 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_448K
 = 15,

1344 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_512K
 = 16,

1345 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_576K
 = 17,

1346 
	mV4L2_MPEG_AUDIO_AC3_BITRATE_640K
 = 18,

1350 
	#V4L2_CID_MPEG_VIDEO_ENCODING
 (
V4L2_CID_MPEG_BASE
+200)

	)

1351 
	ev4l2_m³g_video_’codšg
 {

1352 
	mV4L2_MPEG_VIDEO_ENCODING_MPEG_1
 = 0,

1353 
	mV4L2_MPEG_VIDEO_ENCODING_MPEG_2
 = 1,

1354 
	mV4L2_MPEG_VIDEO_ENCODING_MPEG_4_AVC
 = 2,

1356 
	#V4L2_CID_MPEG_VIDEO_ASPECT
 (
V4L2_CID_MPEG_BASE
+201)

	)

1357 
	ev4l2_m³g_video_a¥eù
 {

1358 
	mV4L2_MPEG_VIDEO_ASPECT_1x1
 = 0,

1359 
	mV4L2_MPEG_VIDEO_ASPECT_4x3
 = 1,

1360 
	mV4L2_MPEG_VIDEO_ASPECT_16x9
 = 2,

1361 
	mV4L2_MPEG_VIDEO_ASPECT_221x100
 = 3,

1363 
	#V4L2_CID_MPEG_VIDEO_B_FRAMES
 (
V4L2_CID_MPEG_BASE
+202)

	)

1364 
	#V4L2_CID_MPEG_VIDEO_GOP_SIZE
 (
V4L2_CID_MPEG_BASE
+203)

	)

1365 
	#V4L2_CID_MPEG_VIDEO_GOP_CLOSURE
 (
V4L2_CID_MPEG_BASE
+204)

	)

1366 
	#V4L2_CID_MPEG_VIDEO_PULLDOWN
 (
V4L2_CID_MPEG_BASE
+205)

	)

1367 
	#V4L2_CID_MPEG_VIDEO_BITRATE_MODE
 (
V4L2_CID_MPEG_BASE
+206)

	)

1368 
	ev4l2_m³g_video_b™¿‹_mode
 {

1369 
	mV4L2_MPEG_VIDEO_BITRATE_MODE_VBR
 = 0,

1370 
	mV4L2_MPEG_VIDEO_BITRATE_MODE_CBR
 = 1,

1372 
	#V4L2_CID_MPEG_VIDEO_BITRATE
 (
V4L2_CID_MPEG_BASE
+207)

	)

1373 
	#V4L2_CID_MPEG_VIDEO_BITRATE_PEAK
 (
V4L2_CID_MPEG_BASE
+208)

	)

1374 
	#V4L2_CID_MPEG_VIDEO_TEMPORAL_DECIMATION
 (
V4L2_CID_MPEG_BASE
+209)

	)

1375 
	#V4L2_CID_MPEG_VIDEO_MUTE
 (
V4L2_CID_MPEG_BASE
+210)

	)

1376 
	#V4L2_CID_MPEG_VIDEO_MUTE_YUV
 (
V4L2_CID_MPEG_BASE
+211)

	)

1377 
	#V4L2_CID_MPEG_VIDEO_DECODER_SLICE_INTERFACE
 (
V4L2_CID_MPEG_BASE
+212)

	)

1378 
	#V4L2_CID_MPEG_VIDEO_DECODER_MPEG4_DEBLOCK_FILTER
 (
V4L2_CID_MPEG_BASE
+213)

	)

1379 
	#V4L2_CID_MPEG_VIDEO_CYCLIC_INTRA_REFRESH_MB
 (
V4L2_CID_MPEG_BASE
+214)

	)

1380 
	#V4L2_CID_MPEG_VIDEO_FRAME_RC_ENABLE
 (
V4L2_CID_MPEG_BASE
+215)

	)

1381 
	#V4L2_CID_MPEG_VIDEO_HEADER_MODE
 (
V4L2_CID_MPEG_BASE
+216)

	)

1382 
	ev4l2_m³g_video_h—d”_mode
 {

1383 
	mV4L2_MPEG_VIDEO_HEADER_MODE_SEPARATE
 = 0,

1384 
	mV4L2_MPEG_VIDEO_HEADER_MODE_JOINED_WITH_1ST_FRAME
 = 1,

1387 
	#V4L2_CID_MPEG_VIDEO_MAX_REF_PIC
 (
V4L2_CID_MPEG_BASE
+217)

	)

1388 
	#V4L2_CID_MPEG_VIDEO_MB_RC_ENABLE
 (
V4L2_CID_MPEG_BASE
+218)

	)

1389 
	#V4L2_CID_MPEG_VIDEO_MULTI_SLICE_MAX_BYTES
 (
V4L2_CID_MPEG_BASE
+219)

	)

1390 
	#V4L2_CID_MPEG_VIDEO_MULTI_SLICE_MAX_MB
 (
V4L2_CID_MPEG_BASE
+220)

	)

1391 
	#V4L2_CID_MPEG_VIDEO_MULTI_SLICE_MODE
 (
V4L2_CID_MPEG_BASE
+221)

	)

1392 
	ev4l2_m³g_video_muÉi_¦iû_mode
 {

1393 
	mV4L2_MPEG_VIDEO_MULTI_SLICE_MODE_SINGLE
 = 0,

1394 
	mV4L2_MPEG_VIDEO_MULTI_SICE_MODE_MAX_MB
 = 1,

1395 
	mV4L2_MPEG_VIDEO_MULTI_SICE_MODE_MAX_BYTES
 = 2,

1397 
	#V4L2_CID_MPEG_VIDEO_VBV_SIZE
 (
V4L2_CID_MPEG_BASE
+222)

	)

1398 
	#V4L2_CID_MPEG_VIDEO_H263_I_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+300)

	)

1399 
	#V4L2_CID_MPEG_VIDEO_H263_P_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+301)

	)

1400 
	#V4L2_CID_MPEG_VIDEO_H263_B_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+302)

	)

1401 
	#V4L2_CID_MPEG_VIDEO_H263_MIN_QP
 (
V4L2_CID_MPEG_BASE
+303)

	)

1402 
	#V4L2_CID_MPEG_VIDEO_H263_MAX_QP
 (
V4L2_CID_MPEG_BASE
+304)

	)

1403 
	#V4L2_CID_MPEG_VIDEO_H264_I_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+350)

	)

1404 
	#V4L2_CID_MPEG_VIDEO_H264_P_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+351)

	)

1405 
	#V4L2_CID_MPEG_VIDEO_H264_B_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+352)

	)

1406 
	#V4L2_CID_MPEG_VIDEO_H264_MIN_QP
 (
V4L2_CID_MPEG_BASE
+353)

	)

1407 
	#V4L2_CID_MPEG_VIDEO_H264_MAX_QP
 (
V4L2_CID_MPEG_BASE
+354)

	)

1408 
	#V4L2_CID_MPEG_VIDEO_H264_8X8_TRANSFORM
 (
V4L2_CID_MPEG_BASE
+355)

	)

1409 
	#V4L2_CID_MPEG_VIDEO_H264_CPB_SIZE
 (
V4L2_CID_MPEG_BASE
+356)

	)

1410 
	#V4L2_CID_MPEG_VIDEO_H264_ENTROPY_MODE
 (
V4L2_CID_MPEG_BASE
+357)

	)

1411 
	ev4l2_m³g_video_h264_’Œİy_mode
 {

1412 
	mV4L2_MPEG_VIDEO_H264_ENTROPY_MODE_CAVLC
 = 0,

1413 
	mV4L2_MPEG_VIDEO_H264_ENTROPY_MODE_CABAC
 = 1,

1415 
	#V4L2_CID_MPEG_VIDEO_H264_I_PERIOD
 (
V4L2_CID_MPEG_BASE
+358)

	)

1416 
	#V4L2_CID_MPEG_VIDEO_H264_LEVEL
 (
V4L2_CID_MPEG_BASE
+359)

	)

1417 
	ev4l2_m³g_video_h264_Ëv–
 {

1418 
	mV4L2_MPEG_VIDEO_H264_LEVEL_1_0
 = 0,

1419 
	mV4L2_MPEG_VIDEO_H264_LEVEL_1B
 = 1,

1420 
	mV4L2_MPEG_VIDEO_H264_LEVEL_1_1
 = 2,

1421 
	mV4L2_MPEG_VIDEO_H264_LEVEL_1_2
 = 3,

1422 
	mV4L2_MPEG_VIDEO_H264_LEVEL_1_3
 = 4,

1423 
	mV4L2_MPEG_VIDEO_H264_LEVEL_2_0
 = 5,

1424 
	mV4L2_MPEG_VIDEO_H264_LEVEL_2_1
 = 6,

1425 
	mV4L2_MPEG_VIDEO_H264_LEVEL_2_2
 = 7,

1426 
	mV4L2_MPEG_VIDEO_H264_LEVEL_3_0
 = 8,

1427 
	mV4L2_MPEG_VIDEO_H264_LEVEL_3_1
 = 9,

1428 
	mV4L2_MPEG_VIDEO_H264_LEVEL_3_2
 = 10,

1429 
	mV4L2_MPEG_VIDEO_H264_LEVEL_4_0
 = 11,

1430 
	mV4L2_MPEG_VIDEO_H264_LEVEL_4_1
 = 12,

1431 
	mV4L2_MPEG_VIDEO_H264_LEVEL_4_2
 = 13,

1432 
	mV4L2_MPEG_VIDEO_H264_LEVEL_5_0
 = 14,

1433 
	mV4L2_MPEG_VIDEO_H264_LEVEL_5_1
 = 15,

1435 
	#V4L2_CID_MPEG_VIDEO_H264_LOOP_FILTER_ALPHA
 (
V4L2_CID_MPEG_BASE
+360)

	)

1436 
	#V4L2_CID_MPEG_VIDEO_H264_LOOP_FILTER_BETA
 (
V4L2_CID_MPEG_BASE
+361)

	)

1437 
	#V4L2_CID_MPEG_VIDEO_H264_LOOP_FILTER_MODE
 (
V4L2_CID_MPEG_BASE
+362)

	)

1438 
	ev4l2_m³g_video_h264_loİ_f‹r_mode
 {

1439 
	mV4L2_MPEG_VIDEO_H264_LOOP_FILTER_MODE_ENABLED
 = 0,

1440 
	mV4L2_MPEG_VIDEO_H264_LOOP_FILTER_MODE_DISABLED
 = 1,

1441 
	mV4L2_MPEG_VIDEO_H264_LOOP_FILTER_MODE_DISABLED_AT_SLICE_BOUNDARY
 = 2,

1443 
	#V4L2_CID_MPEG_VIDEO_H264_PROFILE
 (
V4L2_CID_MPEG_BASE
+363)

	)

1444 
	ev4l2_m³g_video_h264_´ofe
 {

1445 
	mV4L2_MPEG_VIDEO_H264_PROFILE_BASELINE
 = 0,

1446 
	mV4L2_MPEG_VIDEO_H264_PROFILE_CONSTRAINED_BASELINE
 = 1,

1447 
	mV4L2_MPEG_VIDEO_H264_PROFILE_MAIN
 = 2,

1448 
	mV4L2_MPEG_VIDEO_H264_PROFILE_EXTENDED
 = 3,

1449 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH
 = 4,

1450 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH_10
 = 5,

1451 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH_422
 = 6,

1452 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH_444_PREDICTIVE
 = 7,

1453 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH_10_INTRA
 = 8,

1454 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH_422_INTRA
 = 9,

1455 
	mV4L2_MPEG_VIDEO_H264_PROFILE_HIGH_444_INTRA
 = 10,

1456 
	mV4L2_MPEG_VIDEO_H264_PROFILE_CAVLC_444_INTRA
 = 11,

1457 
	mV4L2_MPEG_VIDEO_H264_PROFILE_SCALABLE_BASELINE
 = 12,

1458 
	mV4L2_MPEG_VIDEO_H264_PROFILE_SCALABLE_HIGH
 = 13,

1459 
	mV4L2_MPEG_VIDEO_H264_PROFILE_SCALABLE_HIGH_INTRA
 = 14,

1460 
	mV4L2_MPEG_VIDEO_H264_PROFILE_STEREO_HIGH
 = 15,

1461 
	mV4L2_MPEG_VIDEO_H264_PROFILE_MULTIVIEW_HIGH
 = 16,

1463 
	#V4L2_CID_MPEG_VIDEO_H264_VUI_EXT_SAR_HEIGHT
 (
V4L2_CID_MPEG_BASE
+364)

	)

1464 
	#V4L2_CID_MPEG_VIDEO_H264_VUI_EXT_SAR_WIDTH
 (
V4L2_CID_MPEG_BASE
+365)

	)

1465 
	#V4L2_CID_MPEG_VIDEO_H264_VUI_SAR_ENABLE
 (
V4L2_CID_MPEG_BASE
+366)

	)

1466 
	#V4L2_CID_MPEG_VIDEO_H264_VUI_SAR_IDC
 (
V4L2_CID_MPEG_BASE
+367)

	)

1467 
	ev4l2_m³g_video_h264_vui_§r_idc
 {

1468 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_UNSPECIFIED
 = 0,

1469 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_1x1
 = 1,

1470 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_12x11
 = 2,

1471 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_10x11
 = 3,

1472 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_16x11
 = 4,

1473 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_40x33
 = 5,

1474 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_24x11
 = 6,

1475 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_20x11
 = 7,

1476 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_32x11
 = 8,

1477 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_80x33
 = 9,

1478 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_18x11
 = 10,

1479 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_15x11
 = 11,

1480 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_64x33
 = 12,

1481 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_160x99
 = 13,

1482 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_4x3
 = 14,

1483 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_3x2
 = 15,

1484 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_2x1
 = 16,

1485 
	mV4L2_MPEG_VIDEO_H264_VUI_SAR_IDC_EXTENDED
 = 17,

1487 
	#V4L2_CID_MPEG_VIDEO_MPEG4_I_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+400)

	)

1488 
	#V4L2_CID_MPEG_VIDEO_MPEG4_P_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+401)

	)

1489 
	#V4L2_CID_MPEG_VIDEO_MPEG4_B_FRAME_QP
 (
V4L2_CID_MPEG_BASE
+402)

	)

1490 
	#V4L2_CID_MPEG_VIDEO_MPEG4_MIN_QP
 (
V4L2_CID_MPEG_BASE
+403)

	)

1491 
	#V4L2_CID_MPEG_VIDEO_MPEG4_MAX_QP
 (
V4L2_CID_MPEG_BASE
+404)

	)

1492 
	#V4L2_CID_MPEG_VIDEO_MPEG4_LEVEL
 (
V4L2_CID_MPEG_BASE
+405)

	)

1493 
	ev4l2_m³g_video_m³g4_Ëv–
 {

1494 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_0
 = 0,

1495 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_0B
 = 1,

1496 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_1
 = 2,

1497 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_2
 = 3,

1498 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_3
 = 4,

1499 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_3B
 = 5,

1500 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_4
 = 6,

1501 
	mV4L2_MPEG_VIDEO_MPEG4_LEVEL_5
 = 7,

1503 
	#V4L2_CID_MPEG_VIDEO_MPEG4_PROFILE
 (
V4L2_CID_MPEG_BASE
+406)

	)

1504 
	ev4l2_m³g_video_m³g4_´ofe
 {

1505 
	mV4L2_MPEG_VIDEO_MPEG4_PROFILE_SIMPLE
 = 0,

1506 
	mV4L2_MPEG_VIDEO_MPEG4_PROFILE_ADVANCED_SIMPLE
 = 1,

1507 
	mV4L2_MPEG_VIDEO_MPEG4_PROFILE_CORE
 = 2,

1508 
	mV4L2_MPEG_VIDEO_MPEG4_PROFILE_SIMPLE_SCALABLE
 = 3,

1509 
	mV4L2_MPEG_VIDEO_MPEG4_PROFILE_ADVANCED_CODING_EFFICIENCY
 = 4,

1511 
	#V4L2_CID_MPEG_VIDEO_MPEG4_QPEL
 (
V4L2_CID_MPEG_BASE
+407)

	)

1514 
	#V4L2_CID_MPEG_CX2341X_BASE
 (
V4L2_CTRL_CLASS_MPEG
 | 0x1000)

	)

1515 
	#V4L2_CID_MPEG_CX2341X_VIDEO_SPATIAL_FILTER_MODE
 (
V4L2_CID_MPEG_CX2341X_BASE
+0)

	)

1516 
	ev4l2_m³g_cx2341x_video_¥©Ÿl_f‹r_mode
 {

1517 
	mV4L2_MPEG_CX2341X_VIDEO_SPATIAL_FILTER_MODE_MANUAL
 = 0,

1518 
	mV4L2_MPEG_CX2341X_VIDEO_SPATIAL_FILTER_MODE_AUTO
 = 1,

1520 
	#V4L2_CID_MPEG_CX2341X_VIDEO_SPATIAL_FILTER
 (
V4L2_CID_MPEG_CX2341X_BASE
+1)

	)

1521 
	#V4L2_CID_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE
 (
V4L2_CID_MPEG_CX2341X_BASE
+2)

	)

1522 
	ev4l2_m³g_cx2341x_video_luma_¥©Ÿl_f‹r_ty³
 {

1523 
	mV4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_OFF
 = 0,

1524 
	mV4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_1D_HOR
 = 1,

1525 
	mV4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_1D_VERT
 = 2,

1526 
	mV4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_2D_HV_SEPARABLE
 = 3,

1527 
	mV4L2_MPEG_CX2341X_VIDEO_LUMA_SPATIAL_FILTER_TYPE_2D_SYM_NON_SEPARABLE
 = 4,

1529 
	#V4L2_CID_MPEG_CX2341X_VIDEO_CHROMA_SPATIAL_FILTER_TYPE
 (
V4L2_CID_MPEG_CX2341X_BASE
+3)

	)

1530 
	ev4l2_m³g_cx2341x_video_chroma_¥©Ÿl_f‹r_ty³
 {

1531 
	mV4L2_MPEG_CX2341X_VIDEO_CHROMA_SPATIAL_FILTER_TYPE_OFF
 = 0,

1532 
	mV4L2_MPEG_CX2341X_VIDEO_CHROMA_SPATIAL_FILTER_TYPE_1D_HOR
 = 1,

1534 
	#V4L2_CID_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER_MODE
 (
V4L2_CID_MPEG_CX2341X_BASE
+4)

	)

1535 
	ev4l2_m³g_cx2341x_video_‹mpÜ®_f‹r_mode
 {

1536 
	mV4L2_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER_MODE_MANUAL
 = 0,

1537 
	mV4L2_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER_MODE_AUTO
 = 1,

1539 
	#V4L2_CID_MPEG_CX2341X_VIDEO_TEMPORAL_FILTER
 (
V4L2_CID_MPEG_CX2341X_BASE
+5)

	)

1540 
	#V4L2_CID_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE
 (
V4L2_CID_MPEG_CX2341X_BASE
+6)

	)

1541 
	ev4l2_m³g_cx2341x_video_medŸn_f‹r_ty³
 {

1542 
	mV4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_OFF
 = 0,

1543 
	mV4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_HOR
 = 1,

1544 
	mV4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_VERT
 = 2,

1545 
	mV4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_HOR_VERT
 = 3,

1546 
	mV4L2_MPEG_CX2341X_VIDEO_MEDIAN_FILTER_TYPE_DIAG
 = 4,

1548 
	#V4L2_CID_MPEG_CX2341X_VIDEO_LUMA_MEDIAN_FILTER_BOTTOM
 (
V4L2_CID_MPEG_CX2341X_BASE
+7)

	)

1549 
	#V4L2_CID_MPEG_CX2341X_VIDEO_LUMA_MEDIAN_FILTER_TOP
 (
V4L2_CID_MPEG_CX2341X_BASE
+8)

	)

1550 
	#V4L2_CID_MPEG_CX2341X_VIDEO_CHROMA_MEDIAN_FILTER_BOTTOM
 (
V4L2_CID_MPEG_CX2341X_BASE
+9)

	)

1551 
	#V4L2_CID_MPEG_CX2341X_VIDEO_CHROMA_MEDIAN_FILTER_TOP
 (
V4L2_CID_MPEG_CX2341X_BASE
+10)

	)

1552 
	#V4L2_CID_MPEG_CX2341X_STREAM_INSERT_NAV_PACKETS
 (
V4L2_CID_MPEG_CX2341X_BASE
+11)

	)

1555 
	#V4L2_CID_MPEG_MFC51_BASE
 (
V4L2_CTRL_CLASS_MPEG
 | 0x1100)

	)

1557 
	#V4L2_CID_MPEG_MFC51_VIDEO_DECODER_H264_DISPLAY_DELAY
 (
V4L2_CID_MPEG_MFC51_BASE
+0)

	)

1558 
	#V4L2_CID_MPEG_MFC51_VIDEO_DECODER_H264_DISPLAY_DELAY_ENABLE
 (
V4L2_CID_MPEG_MFC51_BASE
+1)

	)

1559 
	#V4L2_CID_MPEG_MFC51_VIDEO_FRAME_SKIP_MODE
 (
V4L2_CID_MPEG_MFC51_BASE
+2)

	)

1560 
	ev4l2_m³g_mfc51_video_äame_sk_mode
 {

1561 
	mV4L2_MPEG_MFC51_VIDEO_FRAME_SKIP_MODE_DISABLED
 = 0,

1562 
	mV4L2_MPEG_MFC51_VIDEO_FRAME_SKIP_MODE_LEVEL_LIMIT
 = 1,

1563 
	mV4L2_MPEG_MFC51_VIDEO_FRAME_SKIP_MODE_BUF_LIMIT
 = 2,

1565 
	#V4L2_CID_MPEG_MFC51_VIDEO_FORCE_FRAME_TYPE
 (
V4L2_CID_MPEG_MFC51_BASE
+3)

	)

1566 
	ev4l2_m³g_mfc51_video_fÜû_äame_ty³
 {

1567 
	mV4L2_MPEG_MFC51_VIDEO_FORCE_FRAME_TYPE_DISABLED
 = 0,

1568 
	mV4L2_MPEG_MFC51_VIDEO_FORCE_FRAME_TYPE_I_FRAME
 = 1,

1569 
	mV4L2_MPEG_MFC51_VIDEO_FORCE_FRAME_TYPE_NOT_CODED
 = 2,

1571 
	#V4L2_CID_MPEG_MFC51_VIDEO_PADDING
 (
V4L2_CID_MPEG_MFC51_BASE
+4)

	)

1572 
	#V4L2_CID_MPEG_MFC51_VIDEO_PADDING_YUV
 (
V4L2_CID_MPEG_MFC51_BASE
+5)

	)

1573 
	#V4L2_CID_MPEG_MFC51_VIDEO_RC_FIXED_TARGET_BIT
 (
V4L2_CID_MPEG_MFC51_BASE
+6)

	)

1574 
	#V4L2_CID_MPEG_MFC51_VIDEO_RC_REACTION_COEFF
 (
V4L2_CID_MPEG_MFC51_BASE
+7)

	)

1575 
	#V4L2_CID_MPEG_MFC51_VIDEO_H264_ADAPTIVE_RC_ACTIVITY
 (
V4L2_CID_MPEG_MFC51_BASE
+50)

	)

1576 
	#V4L2_CID_MPEG_MFC51_VIDEO_H264_ADAPTIVE_RC_DARK
 (
V4L2_CID_MPEG_MFC51_BASE
+51)

	)

1577 
	#V4L2_CID_MPEG_MFC51_VIDEO_H264_ADAPTIVE_RC_SMOOTH
 (
V4L2_CID_MPEG_MFC51_BASE
+52)

	)

1578 
	#V4L2_CID_MPEG_MFC51_VIDEO_H264_ADAPTIVE_RC_STATIC
 (
V4L2_CID_MPEG_MFC51_BASE
+53)

	)

1579 
	#V4L2_CID_MPEG_MFC51_VIDEO_H264_NUM_REF_PIC_FOR_P
 (
V4L2_CID_MPEG_MFC51_BASE
+54)

	)

1582 
	#V4L2_CID_CAMERA_CLASS_BASE
 (
V4L2_CTRL_CLASS_CAMERA
 | 0x900)

	)

1583 
	#V4L2_CID_CAMERA_CLASS
 (
V4L2_CTRL_CLASS_CAMERA
 | 1)

	)

1585 
	#V4L2_CID_EXPOSURE_AUTO
 (
V4L2_CID_CAMERA_CLASS_BASE
+1)

	)

1586 
	ev4l2_exposu»_auto_ty³
 {

1587 
	mV4L2_EXPOSURE_AUTO
 = 0,

1588 
	mV4L2_EXPOSURE_MANUAL
 = 1,

1589 
	mV4L2_EXPOSURE_SHUTTER_PRIORITY
 = 2,

1590 
	mV4L2_EXPOSURE_APERTURE_PRIORITY
 = 3

1592 
	#V4L2_CID_EXPOSURE_ABSOLUTE
 (
V4L2_CID_CAMERA_CLASS_BASE
+2)

	)

1593 
	#V4L2_CID_EXPOSURE_AUTO_PRIORITY
 (
V4L2_CID_CAMERA_CLASS_BASE
+3)

	)

1595 
	#V4L2_CID_PAN_RELATIVE
 (
V4L2_CID_CAMERA_CLASS_BASE
+4)

	)

1596 
	#V4L2_CID_TILT_RELATIVE
 (
V4L2_CID_CAMERA_CLASS_BASE
+5)

	)

1597 
	#V4L2_CID_PAN_RESET
 (
V4L2_CID_CAMERA_CLASS_BASE
+6)

	)

1598 
	#V4L2_CID_TILT_RESET
 (
V4L2_CID_CAMERA_CLASS_BASE
+7)

	)

1600 
	#V4L2_CID_PAN_ABSOLUTE
 (
V4L2_CID_CAMERA_CLASS_BASE
+8)

	)

1601 
	#V4L2_CID_TILT_ABSOLUTE
 (
V4L2_CID_CAMERA_CLASS_BASE
+9)

	)

1603 
	#V4L2_CID_FOCUS_ABSOLUTE
 (
V4L2_CID_CAMERA_CLASS_BASE
+10)

	)

1604 
	#V4L2_CID_FOCUS_RELATIVE
 (
V4L2_CID_CAMERA_CLASS_BASE
+11)

	)

1605 
	#V4L2_CID_FOCUS_AUTO
 (
V4L2_CID_CAMERA_CLASS_BASE
+12)

	)

1607 
	#V4L2_CID_ZOOM_ABSOLUTE
 (
V4L2_CID_CAMERA_CLASS_BASE
+13)

	)

1608 
	#V4L2_CID_ZOOM_RELATIVE
 (
V4L2_CID_CAMERA_CLASS_BASE
+14)

	)

1609 
	#V4L2_CID_ZOOM_CONTINUOUS
 (
V4L2_CID_CAMERA_CLASS_BASE
+15)

	)

1611 
	#V4L2_CID_PRIVACY
 (
V4L2_CID_CAMERA_CLASS_BASE
+16)

	)

1613 
	#V4L2_CID_IRIS_ABSOLUTE
 (
V4L2_CID_CAMERA_CLASS_BASE
+17)

	)

1614 
	#V4L2_CID_IRIS_RELATIVE
 (
V4L2_CID_CAMERA_CLASS_BASE
+18)

	)

1617 
	#V4L2_CID_FM_TX_CLASS_BASE
 (
V4L2_CTRL_CLASS_FM_TX
 | 0x900)

	)

1618 
	#V4L2_CID_FM_TX_CLASS
 (
V4L2_CTRL_CLASS_FM_TX
 | 1)

	)

1620 
	#V4L2_CID_RDS_TX_DEVIATION
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 1)

	)

1621 
	#V4L2_CID_RDS_TX_PI
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 2)

	)

1622 
	#V4L2_CID_RDS_TX_PTY
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 3)

	)

1623 
	#V4L2_CID_RDS_TX_PS_NAME
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 5)

	)

1624 
	#V4L2_CID_RDS_TX_RADIO_TEXT
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 6)

	)

1626 
	#V4L2_CID_AUDIO_LIMITER_ENABLED
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 64)

	)

1627 
	#V4L2_CID_AUDIO_LIMITER_RELEASE_TIME
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 65)

	)

1628 
	#V4L2_CID_AUDIO_LIMITER_DEVIATION
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 66)

	)

1630 
	#V4L2_CID_AUDIO_COMPRESSION_ENABLED
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 80)

	)

1631 
	#V4L2_CID_AUDIO_COMPRESSION_GAIN
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 81)

	)

1632 
	#V4L2_CID_AUDIO_COMPRESSION_THRESHOLD
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 82)

	)

1633 
	#V4L2_CID_AUDIO_COMPRESSION_ATTACK_TIME
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 83)

	)

1634 
	#V4L2_CID_AUDIO_COMPRESSION_RELEASE_TIME
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 84)

	)

1636 
	#V4L2_CID_PILOT_TONE_ENABLED
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 96)

	)

1637 
	#V4L2_CID_PILOT_TONE_DEVIATION
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 97)

	)

1638 
	#V4L2_CID_PILOT_TONE_FREQUENCY
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 98)

	)

1640 
	#V4L2_CID_TUNE_PREEMPHASIS
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 112)

	)

1641 
	ev4l2_´“mphasis
 {

1642 
	mV4L2_PREEMPHASIS_DISABLED
 = 0,

1643 
	mV4L2_PREEMPHASIS_50_uS
 = 1,

1644 
	mV4L2_PREEMPHASIS_75_uS
 = 2,

1646 
	#V4L2_CID_TUNE_POWER_LEVEL
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 113)

	)

1647 
	#V4L2_CID_TUNE_ANTENNA_CAPACITOR
 (
V4L2_CID_FM_TX_CLASS_BASE
 + 114)

	)

1650 
	#V4L2_CID_FLASH_CLASS_BASE
 (
V4L2_CTRL_CLASS_FLASH
 | 0x900)

	)

1651 
	#V4L2_CID_FLASH_CLASS
 (
V4L2_CTRL_CLASS_FLASH
 | 1)

	)

1653 
	#V4L2_CID_FLASH_LED_MODE
 (
V4L2_CID_FLASH_CLASS_BASE
 + 1)

	)

1654 
	ev4l2_æash_Ëd_mode
 {

1655 
	mV4L2_FLASH_LED_MODE_NONE
,

1656 
	mV4L2_FLASH_LED_MODE_FLASH
,

1657 
	mV4L2_FLASH_LED_MODE_TORCH
,

1660 
	#V4L2_CID_FLASH_STROBE_SOURCE
 (
V4L2_CID_FLASH_CLASS_BASE
 + 2)

	)

1661 
	ev4l2_æash_¡robe_sourû
 {

1662 
	mV4L2_FLASH_STROBE_SOURCE_SOFTWARE
,

1663 
	mV4L2_FLASH_STROBE_SOURCE_EXTERNAL
,

1666 
	#V4L2_CID_FLASH_STROBE
 (
V4L2_CID_FLASH_CLASS_BASE
 + 3)

	)

1667 
	#V4L2_CID_FLASH_STROBE_STOP
 (
V4L2_CID_FLASH_CLASS_BASE
 + 4)

	)

1668 
	#V4L2_CID_FLASH_STROBE_STATUS
 (
V4L2_CID_FLASH_CLASS_BASE
 + 5)

	)

1670 
	#V4L2_CID_FLASH_TIMEOUT
 (
V4L2_CID_FLASH_CLASS_BASE
 + 6)

	)

1671 
	#V4L2_CID_FLASH_INTENSITY
 (
V4L2_CID_FLASH_CLASS_BASE
 + 7)

	)

1672 
	#V4L2_CID_FLASH_TORCH_INTENSITY
 (
V4L2_CID_FLASH_CLASS_BASE
 + 8)

	)

1673 
	#V4L2_CID_FLASH_INDICATOR_INTENSITY
 (
V4L2_CID_FLASH_CLASS_BASE
 + 9)

	)

1675 
	#V4L2_CID_FLASH_FAULT
 (
V4L2_CID_FLASH_CLASS_BASE
 + 10)

	)

1676 
	#V4L2_FLASH_FAULT_OVER_VOLTAGE
 (1 << 0)

	)

1677 
	#V4L2_FLASH_FAULT_TIMEOUT
 (1 << 1)

	)

1678 
	#V4L2_FLASH_FAULT_OVER_TEMPERATURE
 (1 << 2)

	)

1679 
	#V4L2_FLASH_FAULT_SHORT_CIRCUIT
 (1 << 3)

	)

1681 
	#V4L2_CID_FLASH_CHARGE
 (
V4L2_CID_FLASH_CLASS_BASE
 + 11)

	)

1682 
	#V4L2_CID_FLASH_READY
 (
V4L2_CID_FLASH_CLASS_BASE
 + 12)

	)

1687 
	sv4l2_tuÃr
 {

1688 
__u32
 
	mšdex
;

1689 
__u8
 
	mÇme
[32];

1690 
v4l2_tuÃr_ty³
 
	mty³
;

1691 
__u32
 
	mÿ·b™y
;

1692 
__u32
 
	m¿ng–ow
;

1693 
__u32
 
	m¿ngehigh
;

1694 
__u32
 
	mrxsubchªs
;

1695 
__u32
 
	maudmode
;

1696 
__s32
 
	msigÇl
;

1697 
__s32
 
	mafc
;

1698 
__u32
 
	m»£rved
[4];

1701 
	sv4l2_moduÏtÜ
 {

1702 
__u32
 
	mšdex
;

1703 
__u8
 
	mÇme
[32];

1704 
__u32
 
	mÿ·b™y
;

1705 
__u32
 
	m¿ng–ow
;

1706 
__u32
 
	m¿ngehigh
;

1707 
__u32
 
	mtxsubchªs
;

1708 
__u32
 
	m»£rved
[4];

1712 
	#V4L2_TUNER_CAP_LOW
 0x0001

	)

1713 
	#V4L2_TUNER_CAP_NORM
 0x0002

	)

1714 
	#V4L2_TUNER_CAP_STEREO
 0x0010

	)

1715 
	#V4L2_TUNER_CAP_LANG2
 0x0020

	)

1716 
	#V4L2_TUNER_CAP_SAP
 0x0020

	)

1717 
	#V4L2_TUNER_CAP_LANG1
 0x0040

	)

1718 
	#V4L2_TUNER_CAP_RDS
 0x0080

	)

1719 
	#V4L2_TUNER_CAP_RDS_BLOCK_IO
 0x0100

	)

1720 
	#V4L2_TUNER_CAP_RDS_CONTROLS
 0x0200

	)

1723 
	#V4L2_TUNER_SUB_MONO
 0x0001

	)

1724 
	#V4L2_TUNER_SUB_STEREO
 0x0002

	)

1725 
	#V4L2_TUNER_SUB_LANG2
 0x0004

	)

1726 
	#V4L2_TUNER_SUB_SAP
 0x0004

	)

1727 
	#V4L2_TUNER_SUB_LANG1
 0x0008

	)

1728 
	#V4L2_TUNER_SUB_RDS
 0x0010

	)

1731 
	#V4L2_TUNER_MODE_MONO
 0x0000

	)

1732 
	#V4L2_TUNER_MODE_STEREO
 0x0001

	)

1733 
	#V4L2_TUNER_MODE_LANG2
 0x0002

	)

1734 
	#V4L2_TUNER_MODE_SAP
 0x0002

	)

1735 
	#V4L2_TUNER_MODE_LANG1
 0x0003

	)

1736 
	#V4L2_TUNER_MODE_LANG1_LANG2
 0x0004

	)

1738 
	sv4l2_äequ’cy
 {

1739 
__u32
 
	mtuÃr
;

1740 
v4l2_tuÃr_ty³
 
	mty³
;

1741 
__u32
 
	mäequ’cy
;

1742 
__u32
 
	m»£rved
[8];

1745 
	sv4l2_hw_äeq_£ek
 {

1746 
__u32
 
	mtuÃr
;

1747 
v4l2_tuÃr_ty³
 
	mty³
;

1748 
__u32
 
	m£ek_upw¬d
;

1749 
__u32
 
	mw¿p_¬ound
;

1750 
__u32
 
	m¥acšg
;

1751 
__u32
 
	m»£rved
[7];

1758 
	sv4l2_rds_d©a
 {

1759 
__u8
 
	mlsb
;

1760 
__u8
 
	mmsb
;

1761 
__u8
 
	mblock
;

1762 } 
__©Œibu‹__
 ((
·cked
));

1764 
	#V4L2_RDS_BLOCK_MSK
 0x7

	)

1765 
	#V4L2_RDS_BLOCK_A
 0

	)

1766 
	#V4L2_RDS_BLOCK_B
 1

	)

1767 
	#V4L2_RDS_BLOCK_C
 2

	)

1768 
	#V4L2_RDS_BLOCK_D
 3

	)

1769 
	#V4L2_RDS_BLOCK_C_ALT
 4

	)

1770 
	#V4L2_RDS_BLOCK_INVALID
 7

	)

1772 
	#V4L2_RDS_BLOCK_CORRECTED
 0x40

	)

1773 
	#V4L2_RDS_BLOCK_ERROR
 0x80

	)

1778 
	sv4l2_audio
 {

1779 
__u32
 
	mšdex
;

1780 
__u8
 
	mÇme
[32];

1781 
__u32
 
	mÿ·b™y
;

1782 
__u32
 
	mmode
;

1783 
__u32
 
	m»£rved
[2];

1787 
	#V4L2_AUDCAP_STEREO
 0x00001

	)

1788 
	#V4L2_AUDCAP_AVL
 0x00002

	)

1791 
	#V4L2_AUDMODE_AVL
 0x00001

	)

1793 
	sv4l2_audioout
 {

1794 
__u32
 
	mšdex
;

1795 
__u8
 
	mÇme
[32];

1796 
__u32
 
	mÿ·b™y
;

1797 
__u32
 
	mmode
;

1798 
__u32
 
	m»£rved
[2];

1807 
	#V4L2_ENC_IDX_FRAME_I
 (0)

	)

1808 
	#V4L2_ENC_IDX_FRAME_P
 (1)

	)

1809 
	#V4L2_ENC_IDX_FRAME_B
 (2)

	)

1810 
	#V4L2_ENC_IDX_FRAME_MASK
 (0xf)

	)

1812 
	sv4l2_’c_idx_’Œy
 {

1813 
__u64
 
	moff£t
;

1814 
__u64
 
	m±s
;

1815 
__u32
 
	mËngth
;

1816 
__u32
 
	mæags
;

1817 
__u32
 
	m»£rved
[2];

1820 
	#V4L2_ENC_IDX_ENTRIES
 (64)

	)

1821 
	sv4l2_’c_idx
 {

1822 
__u32
 
	m’Œ›s
;

1823 
__u32
 
	m’Œ›s_ÿp
;

1824 
__u32
 
	m»£rved
[4];

1825 
v4l2_’c_idx_’Œy
 
	m’Œy
[
V4L2_ENC_IDX_ENTRIES
];

1829 
	#V4L2_ENC_CMD_START
 (0)

	)

1830 
	#V4L2_ENC_CMD_STOP
 (1)

	)

1831 
	#V4L2_ENC_CMD_PAUSE
 (2)

	)

1832 
	#V4L2_ENC_CMD_RESUME
 (3)

	)

1835 
	#V4L2_ENC_CMD_STOP_AT_GOP_END
 (1 << 0)

	)

1837 
	sv4l2_’cod”_cmd
 {

1838 
__u32
 
	mcmd
;

1839 
__u32
 
	mæags
;

1842 
__u32
 
	md©a
[8];

1843 } 
	m¿w
;

1857 
	sv4l2_vbi_fÜm©
 {

1858 
__u32
 
	m§m¶šg_¿‹
;

1859 
__u32
 
	moff£t
;

1860 
__u32
 
	m§m¶es_³r_lše
;

1861 
__u32
 
	m§m¶e_fÜm©
;

1862 
__s32
 
	m¡¬t
[2];

1863 
__u32
 
	mcouÁ
[2];

1864 
__u32
 
	mæags
;

1865 
__u32
 
	m»£rved
[2];

1869 
	#V4L2_VBI_UNSYNC
 (1 << 0)

	)

1870 
	#V4L2_VBI_INTERLACED
 (1 << 1)

	)

1879 
	sv4l2_¦iûd_vbi_fÜm©
 {

1880 
__u16
 
	m£rviû_£t
;

1885 
__u16
 
	m£rviû_lšes
[2][24];

1886 
__u32
 
	mio_size
;

1887 
__u32
 
	m»£rved
[2];

1892 
	#V4L2_SLICED_TELETEXT_B
 (0x0001)

	)

1894 
	#V4L2_SLICED_VPS
 (0x0400)

	)

1896 
	#V4L2_SLICED_CAPTION_525
 (0x1000)

	)

1898 
	#V4L2_SLICED_WSS_625
 (0x4000)

	)

1900 
	#V4L2_SLICED_VBI_525
 (
V4L2_SLICED_CAPTION_525
)

	)

1901 
	#V4L2_SLICED_VBI_625
 (
V4L2_SLICED_TELETEXT_B
 | 
V4L2_SLICED_VPS
 | 
V4L2_SLICED_WSS_625
)

	)

1903 
	sv4l2_¦iûd_vbi_ÿp
 {

1904 
__u16
 
	m£rviû_£t
;

1909 
__u16
 
	m£rviû_lšes
[2][24];

1910 
v4l2_buf_ty³
 
	mty³
;

1911 
__u32
 
	m»£rved
[3];

1914 
	sv4l2_¦iûd_vbi_d©a
 {

1915 
__u32
 
	mid
;

1916 
__u32
 
	mf›ld
;

1917 
__u32
 
	mlše
;

1918 
__u32
 
	m»£rved
;

1919 
__u8
 
	md©a
[48];

1939 
	#V4L2_MPEG_VBI_IVTV_TELETEXT_B
 (1)

	)

1940 
	#V4L2_MPEG_VBI_IVTV_CAPTION_525
 (4)

	)

1941 
	#V4L2_MPEG_VBI_IVTV_WSS_625
 (5)

	)

1942 
	#V4L2_MPEG_VBI_IVTV_VPS
 (7)

	)

1944 
	sv4l2_m³g_vbi_™v0_lše
 {

1945 
__u8
 
	mid
;

1946 
__u8
 
	md©a
[42];

1947 } 
__©Œibu‹__
 ((
·cked
));

1949 
	sv4l2_m³g_vbi_™v0
 {

1950 
__Ë32
 
	mlšemask
[2];

1951 
v4l2_m³g_vbi_™v0_lše
 
	mlše
[35];

1952 } 
__©Œibu‹__
 ((
·cked
));

1954 
	sv4l2_m³g_vbi_ITV0
 {

1955 
v4l2_m³g_vbi_™v0_lše
 
	mlše
[36];

1956 } 
__©Œibu‹__
 ((
·cked
));

1958 
	#V4L2_MPEG_VBI_IVTV_MAGIC0
 "™v0"

	)

1959 
	#V4L2_MPEG_VBI_IVTV_MAGIC1
 "ITV0"

	)

1961 
	sv4l2_m³g_vbi_fmt_ivtv
 {

1962 
__u8
 
	mmagic
[4];

1964 
v4l2_m³g_vbi_™v0
 
	m™v0
;

1965 
v4l2_m³g_vbi_ITV0
 
	mITV0
;

1967 } 
__©Œibu‹__
 ((
·cked
));

1980 
	sv4l2_¶ªe_pix_fÜm©
 {

1981 
__u32
 
	msizeimage
;

1982 
__u16
 
	mby‹¥”lše
;

1983 
__u16
 
	m»£rved
[7];

1984 } 
__©Œibu‹__
 ((
·cked
));

1996 
	sv4l2_pix_fÜm©_m¶ªe
 {

1997 
__u32
 
	mwidth
;

1998 
__u32
 
	mheight
;

1999 
__u32
 
	mpix–fÜm©
;

2000 
v4l2_f›ld
 
	mf›ld
;

2001 
v4l2_cŞÜ¥aû
 
	mcŞÜ¥aû
;

2003 
v4l2_¶ªe_pix_fÜm©
 
	m¶ªe_fmt
[
VIDEO_MAX_PLANES
];

2004 
__u8
 
	mnum_¶ªes
;

2005 
__u8
 
	m»£rved
[11];

2006 } 
__©Œibu‹__
 ((
·cked
));

2018 
	sv4l2_fÜm©
 {

2019 
v4l2_buf_ty³
 
	mty³
;

2021 
v4l2_pix_fÜm©
 
	mpix
;

2022 
v4l2_pix_fÜm©_m¶ªe
 
	mpix_mp
;

2023 
v4l2_wšdow
 
	mwš
;

2024 
v4l2_vbi_fÜm©
 
	mvbi
;

2025 
v4l2_¦iûd_vbi_fÜm©
 
	m¦iûd
;

2026 
__u8
 
	m¿w_d©a
[200];

2027 } 
	mfmt
;

2032 
	sv4l2_¡»am·rm
 {

2033 
v4l2_buf_ty³
 
	mty³
;

2035 
v4l2_ÿ±u»·rm
 
	mÿ±u»
;

2036 
v4l2_ouu¬m
 
	mouut
;

2037 
__u8
 
	m¿w_d©a
[200];

2038 } 
	m·rm
;

2045 
	#V4L2_EVENT_ALL
 0

	)

2046 
	#V4L2_EVENT_VSYNC
 1

	)

2047 
	#V4L2_EVENT_EOS
 2

	)

2048 
	#V4L2_EVENT_CTRL
 3

	)

2049 
	#V4L2_EVENT_FRAME_SYNC
 4

	)

2050 
	#V4L2_EVENT_PRIVATE_START
 0x08000000

	)

2053 
	sv4l2_ev’t_vsync
 {

2055 
__u8
 
	mf›ld
;

2056 } 
__©Œibu‹__
 ((
·cked
));

2059 
	#V4L2_EVENT_CTRL_CH_VALUE
 (1 << 0)

	)

2060 
	#V4L2_EVENT_CTRL_CH_FLAGS
 (1 << 1)

	)

2062 
	sv4l2_ev’t_ù¾
 {

2063 
__u32
 
	mchªges
;

2064 
__u32
 
	mty³
;

2066 
__s32
 
	mv®ue
;

2067 
__s64
 
	mv®ue64
;

2069 
__u32
 
	mæags
;

2070 
__s32
 
	mmšimum
;

2071 
__s32
 
	mmaximum
;

2072 
__s32
 
	m¡•
;

2073 
__s32
 
	mdeçuÉ_v®ue
;

2076 
	sv4l2_ev’t_äame_sync
 {

2077 
__u32
 
	mäame_£qu’û
;

2080 
	sv4l2_ev’t
 {

2081 
__u32
 
	mty³
;

2083 
v4l2_ev’t_vsync
 
	mvsync
;

2084 
v4l2_ev’t_ù¾
 
	mù¾
;

2085 
v4l2_ev’t_äame_sync
 
	mäame_sync
;

2086 
__u8
 
	md©a
[64];

2087 } 
	mu
;

2088 
__u32
 
	m³ndšg
;

2089 
__u32
 
	m£qu’û
;

2090 
time¥ec
 
	mtime¡amp
;

2091 
__u32
 
	mid
;

2092 
__u32
 
	m»£rved
[8];

2095 
	#V4L2_EVENT_SUB_FL_SEND_INITIAL
 (1 << 0)

	)

2096 
	#V4L2_EVENT_SUB_FL_ALLOW_FEEDBACK
 (1 << 1)

	)

2098 
	sv4l2_ev’t_subsütiÚ
 {

2099 
__u32
 
	mty³
;

2100 
__u32
 
	mid
;

2101 
__u32
 
	mæags
;

2102 
__u32
 
	m»£rved
[5];

2114 
	#V4L2_CHIP_MATCH_HOST
 0

	)

2115 
	#V4L2_CHIP_MATCH_I2C_DRIVER
 1

	)

2116 
	#V4L2_CHIP_MATCH_I2C_ADDR
 2

	)

2117 
	#V4L2_CHIP_MATCH_AC97
 3

	)

2119 
	sv4l2_dbg_m©ch
 {

2120 
__u32
 
	mty³
;

2122 
__u32
 
	maddr
;

2123 
	mÇme
[32];

2125 } 
__©Œibu‹__
 ((
·cked
));

2127 
	sv4l2_dbg_»gi¡”
 {

2128 
v4l2_dbg_m©ch
 
	mm©ch
;

2129 
__u32
 
	msize
;

2130 
__u64
 
	m»g
;

2131 
__u64
 
	mv®
;

2132 } 
__©Œibu‹__
 ((
·cked
));

2135 
	sv4l2_dbg_ch_id’t
 {

2136 
v4l2_dbg_m©ch
 
	mm©ch
;

2137 
__u32
 
	mid’t
;

2138 
__u32
 
	m»visiÚ
;

2139 } 
__©Œibu‹__
 ((
·cked
));

2150 
	sv4l2_ü—‹_bufãrs
 {

2151 
__u32
 
	mšdex
;

2152 
__u32
 
	mcouÁ
;

2153 
v4l2_memÜy
 
	mmemÜy
;

2154 
v4l2_fÜm©
 
	mfÜm©
;

2155 
__u32
 
	m»£rved
[8];

2162 
	#VIDIOC_QUERYCAP
 
	`_IOR
('V', 0, 
v4l2_ÿ·b™y
)

	)

2163 
	#VIDIOC_RESERVED
 
	`_IO
('V', 1)

	)

2164 
	#VIDIOC_ENUM_FMT
 
	`_IOWR
('V', 2, 
v4l2_fmtdesc
)

	)

2165 
	#VIDIOC_G_FMT
 
	`_IOWR
('V', 4, 
v4l2_fÜm©
)

	)

2166 
	#VIDIOC_S_FMT
 
	`_IOWR
('V', 5, 
v4l2_fÜm©
)

	)

2167 
	#VIDIOC_REQBUFS
 
	`_IOWR
('V', 8, 
v4l2_»que¡bufãrs
)

	)

2168 
	#VIDIOC_QUERYBUF
 
	`_IOWR
('V', 9, 
v4l2_bufãr
)

	)

2169 
	#VIDIOC_G_FBUF
 
	`_IOR
('V', 10, 
v4l2_äamebufãr
)

	)

2170 
	#VIDIOC_S_FBUF
 
	`_IOW
('V', 11, 
v4l2_äamebufãr
)

	)

2171 
	#VIDIOC_OVERLAY
 
	`_IOW
('V', 14, )

	)

2172 
	#VIDIOC_QBUF
 
	`_IOWR
('V', 15, 
v4l2_bufãr
)

	)

2173 
	#VIDIOC_DQBUF
 
	`_IOWR
('V', 17, 
v4l2_bufãr
)

	)

2174 
	#VIDIOC_STREAMON
 
	`_IOW
('V', 18, )

	)

2175 
	#VIDIOC_STREAMOFF
 
	`_IOW
('V', 19, )

	)

2176 
	#VIDIOC_G_PARM
 
	`_IOWR
('V', 21, 
v4l2_¡»am·rm
)

	)

2177 
	#VIDIOC_S_PARM
 
	`_IOWR
('V', 22, 
v4l2_¡»am·rm
)

	)

2178 
	#VIDIOC_G_STD
 
	`_IOR
('V', 23, 
v4l2_¡d_id
)

	)

2179 
	#VIDIOC_S_STD
 
	`_IOW
('V', 24, 
v4l2_¡d_id
)

	)

2180 
	#VIDIOC_ENUMSTD
 
	`_IOWR
('V', 25, 
v4l2_¡ªd¬d
)

	)

2181 
	#VIDIOC_ENUMINPUT
 
	`_IOWR
('V', 26, 
v4l2_šput
)

	)

2182 
	#VIDIOC_G_CTRL
 
	`_IOWR
('V', 27, 
v4l2_cÚŒŞ
)

	)

2183 
	#VIDIOC_S_CTRL
 
	`_IOWR
('V', 28, 
v4l2_cÚŒŞ
)

	)

2184 
	#VIDIOC_G_TUNER
 
	`_IOWR
('V', 29, 
v4l2_tuÃr
)

	)

2185 
	#VIDIOC_S_TUNER
 
	`_IOW
('V', 30, 
v4l2_tuÃr
)

	)

2186 
	#VIDIOC_G_AUDIO
 
	`_IOR
('V', 33, 
v4l2_audio
)

	)

2187 
	#VIDIOC_S_AUDIO
 
	`_IOW
('V', 34, 
v4l2_audio
)

	)

2188 
	#VIDIOC_QUERYCTRL
 
	`_IOWR
('V', 36, 
v4l2_qu”yù¾
)

	)

2189 
	#VIDIOC_QUERYMENU
 
	`_IOWR
('V', 37, 
v4l2_qu”ym’u
)

	)

2190 
	#VIDIOC_G_INPUT
 
	`_IOR
('V', 38, )

	)

2191 
	#VIDIOC_S_INPUT
 
	`_IOWR
('V', 39, )

	)

2192 
	#VIDIOC_G_OUTPUT
 
	`_IOR
('V', 46, )

	)

2193 
	#VIDIOC_S_OUTPUT
 
	`_IOWR
('V', 47, )

	)

2194 
	#VIDIOC_ENUMOUTPUT
 
	`_IOWR
('V', 48, 
v4l2_ouut
)

	)

2195 
	#VIDIOC_G_AUDOUT
 
	`_IOR
('V', 49, 
v4l2_audioout
)

	)

2196 
	#VIDIOC_S_AUDOUT
 
	`_IOW
('V', 50, 
v4l2_audioout
)

	)

2197 
	#VIDIOC_G_MODULATOR
 
	`_IOWR
('V', 54, 
v4l2_moduÏtÜ
)

	)

2198 
	#VIDIOC_S_MODULATOR
 
	`_IOW
('V', 55, 
v4l2_moduÏtÜ
)

	)

2199 
	#VIDIOC_G_FREQUENCY
 
	`_IOWR
('V', 56, 
v4l2_äequ’cy
)

	)

2200 
	#VIDIOC_S_FREQUENCY
 
	`_IOW
('V', 57, 
v4l2_äequ’cy
)

	)

2201 
	#VIDIOC_CROPCAP
 
	`_IOWR
('V', 58, 
v4l2_üİÿp
)

	)

2202 
	#VIDIOC_G_CROP
 
	`_IOWR
('V', 59, 
v4l2_üİ
)

	)

2203 
	#VIDIOC_S_CROP
 
	`_IOW
('V', 60, 
v4l2_üİ
)

	)

2204 
	#VIDIOC_G_JPEGCOMP
 
	`_IOR
('V', 61, 
v4l2_j³gcom´essiÚ
)

	)

2205 
	#VIDIOC_S_JPEGCOMP
 
	`_IOW
('V', 62, 
v4l2_j³gcom´essiÚ
)

	)

2206 
	#VIDIOC_QUERYSTD
 
	`_IOR
('V', 63, 
v4l2_¡d_id
)

	)

2207 
	#VIDIOC_TRY_FMT
 
	`_IOWR
('V', 64, 
v4l2_fÜm©
)

	)

2208 
	#VIDIOC_ENUMAUDIO
 
	`_IOWR
('V', 65, 
v4l2_audio
)

	)

2209 
	#VIDIOC_ENUMAUDOUT
 
	`_IOWR
('V', 66, 
v4l2_audioout
)

	)

2210 
	#VIDIOC_G_PRIORITY
 
	`_IOR
('V', 67, 
v4l2_´iÜ™y
)

	)

2211 
	#VIDIOC_S_PRIORITY
 
	`_IOW
('V', 68, 
v4l2_´iÜ™y
)

	)

2212 
	#VIDIOC_G_SLICED_VBI_CAP
 
	`_IOWR
('V', 69, 
v4l2_¦iûd_vbi_ÿp
)

	)

2213 
	#VIDIOC_LOG_STATUS
 
	`_IO
('V', 70)

	)

2214 
	#VIDIOC_G_EXT_CTRLS
 
	`_IOWR
('V', 71, 
v4l2_ext_cÚŒŞs
)

	)

2215 
	#VIDIOC_S_EXT_CTRLS
 
	`_IOWR
('V', 72, 
v4l2_ext_cÚŒŞs
)

	)

2216 
	#VIDIOC_TRY_EXT_CTRLS
 
	`_IOWR
('V', 73, 
v4l2_ext_cÚŒŞs
)

	)

2218 
	#VIDIOC_ENUM_FRAMESIZES
 
	`_IOWR
('V', 74, 
v4l2_ämsiz“num
)

	)

2219 
	#VIDIOC_ENUM_FRAMEINTERVALS
 
	`_IOWR
('V', 75, 
v4l2_ämiv®’um
)

	)

2220 
	#VIDIOC_G_ENC_INDEX
 
	`_IOR
('V', 76, 
v4l2_’c_idx
)

	)

2221 
	#VIDIOC_ENCODER_CMD
 
	`_IOWR
('V', 77, 
v4l2_’cod”_cmd
)

	)

2222 
	#VIDIOC_TRY_ENCODER_CMD
 
	`_IOWR
('V', 78, 
v4l2_’cod”_cmd
)

	)

2229 
	#VIDIOC_DBG_S_REGISTER
 
	`_IOW
('V', 79, 
v4l2_dbg_»gi¡”
)

	)

2230 
	#VIDIOC_DBG_G_REGISTER
 
	`_IOWR
('V', 80, 
v4l2_dbg_»gi¡”
)

	)

2234 
	#VIDIOC_DBG_G_CHIP_IDENT
 
	`_IOWR
('V', 81, 
v4l2_dbg_ch_id’t
)

	)

2237 
	#VIDIOC_S_HW_FREQ_SEEK
 
	`_IOW
('V', 82, 
v4l2_hw_äeq_£ek
)

	)

2238 
	#VIDIOC_ENUM_DV_PRESETS
 
	`_IOWR
('V', 83, 
v4l2_dv_’um_´e£t
)

	)

2239 
	#VIDIOC_S_DV_PRESET
 
	`_IOWR
('V', 84, 
v4l2_dv_´e£t
)

	)

2240 
	#VIDIOC_G_DV_PRESET
 
	`_IOWR
('V', 85, 
v4l2_dv_´e£t
)

	)

2241 
	#VIDIOC_QUERY_DV_PRESET
 
	`_IOR
('V', 86, 
v4l2_dv_´e£t
)

	)

2242 
	#VIDIOC_S_DV_TIMINGS
 
	`_IOWR
('V', 87, 
v4l2_dv_timšgs
)

	)

2243 
	#VIDIOC_G_DV_TIMINGS
 
	`_IOWR
('V', 88, 
v4l2_dv_timšgs
)

	)

2244 
	#VIDIOC_DQEVENT
 
	`_IOR
('V', 89, 
v4l2_ev’t
)

	)

2245 
	#VIDIOC_SUBSCRIBE_EVENT
 
	`_IOW
('V', 90, 
v4l2_ev’t_subsütiÚ
)

	)

2246 
	#VIDIOC_UNSUBSCRIBE_EVENT
 
	`_IOW
('V', 91, 
v4l2_ev’t_subsütiÚ
)

	)

2250 
	#VIDIOC_CREATE_BUFS
 
	`_IOWR
('V', 92, 
v4l2_ü—‹_bufãrs
)

	)

2251 
	#VIDIOC_PREPARE_BUF
 
	`_IOWR
('V', 93, 
v4l2_bufãr
)

	)

2256 
	#BASE_VIDIOC_PRIVATE
 192

	)

	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


32 
	~<b™s/huge_v®.h
>

33 #ifdeà
__USE_ISOC99


34 
	~<b™s/huge_v®f.h
>

35 
	~<b™s/huge_v®l.h
>

38 
	~<b™s/šf.h
>

41 
	~<b™s/Çn.h
>

45 
	~<b™s/m©hdef.h
>

52 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

53 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

54 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

56 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

57 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

58 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

59 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

61 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

62 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

63 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

65 
	#_MdoubË_
 

	)

66 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

67 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

68 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

69 
	~<b™s/m©hÿÎs.h
>

70 #undeà
_MdoubË_


71 #undeà
_MdoubË_BEGIN_NAMESPACE


72 #undeà
_MdoubË_END_NAMESPACE


73 #undeà
__MATH_PRECNAME


75 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


81 #iâdeà
_Mæßt_


82 
	#_Mæßt_
 

	)

84 
	#_MdoubË_
 
_Mæßt_


	)

85 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

86 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

87 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

88 
	~<b™s/m©hÿÎs.h
>

89 #undeà
_MdoubË_


90 #undeà
_MdoubË_BEGIN_NAMESPACE


91 #undeà
_MdoubË_END_NAMESPACE


92 #undeà
__MATH_PRECNAME


94 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

95 || 
defšed
 
__LDBL_COMPAT


96 #ifdeà
__LDBL_COMPAT


98 #ifdeà
__USE_ISOC99


99 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

100 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

101 #ifdeà
__REDIRECT_NTH


102 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

103 
__Ædbl_Ãx‰ow¬df
)

104 
	`__©Œibu‹__
 ((
__cÚ¡__
));

105 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

106 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

107 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

108 (
__x
, 
__y
),

109 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 #undeà
__MATHDECL_1


114 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

115 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

116 
¬gs
, 
®Ÿs
)

	)

117 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

118 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

124 #iâdeà
_MlÚg_doubË_


125 
	#_MlÚg_doubË_
 

	)

127 
	#_MdoubË_
 
_MlÚg_doubË_


	)

128 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

129 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

130 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

131 
	#__MATH_DECLARE_LDOUBLE
 1

	)

132 
	~<b™s/m©hÿÎs.h
>

133 #undeà
_MdoubË_


134 #undeà
_MdoubË_BEGIN_NAMESPACE


135 #undeà
_MdoubË_END_NAMESPACE


136 #undeà
__MATH_PRECNAME


141 #undeà
__MATHDECL_1


142 #undeà
__MATHDECL


143 #undeà
__MATHCALL


146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


148 
signgam
;

153 #ifdeà
__USE_ISOC99


191 
FP_NAN
 =

192 
	#FP_NAN
 0

	)

193 
FP_NAN
,

194 
FP_INFINITE
 =

195 
	#FP_INFINITE
 1

	)

196 
FP_INFINITE
,

197 
FP_ZERO
 =

198 
	#FP_ZERO
 2

	)

199 
FP_ZERO
,

200 
FP_SUBNORMAL
 =

201 
	#FP_SUBNORMAL
 3

	)

202 
FP_SUBNORMAL
,

203 
FP_NORMAL
 =

204 
	#FP_NORMAL
 4

	)

205 
FP_NORMAL


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
	#åşassify
(
x
) \

211 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

213 
	#åşassify
(
x
) \

214 ( (
x
) ==  () \

215 ? 
	`__åşassifyf
 (
x
) \

216 :  (
x
) ==  () \

217 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

221 #ifdeà
__NO_LONG_DOUBLE_MATH


222 
	#signb™
(
x
) \

223 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

225 
	#signb™
(
x
) \

226 ( (
x
) ==  () \

227 ? 
	`__signb™f
 (
x
) \

228 :  (
x
) ==  () \

229 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

233 #ifdeà
__NO_LONG_DOUBLE_MATH


234 
	#isfš™e
(
x
) \

235 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

237 
	#isfš™e
(
x
) \

238 ( (
x
) ==  () \

239 ? 
	`__fš™ef
 (
x
) \

240 :  (
x
) ==  () \

241 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

245 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

249 #ifdeà
__NO_LONG_DOUBLE_MATH


250 
	#i¢ª
(
x
) \

251 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

253 
	#i¢ª
(
x
) \

254 ( (
x
) ==  () \

255 ? 
	`__i¢ªf
 (
x
) \

256 :  (
x
) ==  () \

257 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

261 #ifdeà
__NO_LONG_DOUBLE_MATH


262 
	#isšf
(
x
) \

263 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

265 
	#isšf
(
x
) \

266 ( (
x
) ==  () \

267 ? 
	`__isšff
 (
x
) \

268 :  (
x
) ==  () \

269 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

273 
	#MATH_ERRNO
 1

	)

274 
	#MATH_ERREXCEPT
 2

	)

279 #iâdeà
__FAST_MATH__


280 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

285 #ifdeà
__USE_GNU


287 #ifdeà
__NO_LONG_DOUBLE_MATH


288 
	#issigÇlšg
(
x
) \

289 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

291 
	#issigÇlšg
(
x
) \

292 ( (
x
) ==  () \

293 ? 
	`__issigÇlšgf
 (
x
) \

294 :  (
x
) ==  () \

295 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

299 #ifdef 
__USE_MISC


303 
_IEEE_
 = -1,

304 
_SVID_
,

305 
_XOPEN_
,

306 
_POSIX_
,

307 
_ISOC_


308 } 
	t_LIB_VERSION_TYPE
;

313 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

317 #ifdeà
__USE_SVID


323 #ifdeà
__ılu¥lus


324 
__exû±iÚ


326 
exû±iÚ


329 
ty³
;

330 *
Çme
;

331 
¬g1
;

332 
¬g2
;

333 
»tv®
;

334 
	}
};

336 #ifdeà
__ılu¥lus


337 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

339 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

342 
	#X_TLOSS
 1.41484755040568800000e+16

	)

345 
	#DOMAIN
 1

	)

346 
	#SING
 2

	)

347 
	#OVERFLOW
 3

	)

348 
	#UNDERFLOW
 4

	)

349 
	#TLOSS
 5

	)

350 
	#PLOSS
 6

	)

353 
	#HUGE
 3.40282347e+38F

	)

357 #ifdeà
__USE_XOPEN


359 
	#MAXFLOAT
 3.40282347e+38F

	)

366 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


367 
	#M_E
 2.7182818284590452354

	)

368 
	#M_LOG2E
 1.4426950408889634074

	)

369 
	#M_LOG10E
 0.43429448190325182765

	)

370 
	#M_LN2
 0.69314718055994530942

	)

371 
	#M_LN10
 2.30258509299404568402

	)

372 
	#M_PI
 3.14159265358979323846

	)

373 
	#M_PI_2
 1.57079632679489661923

	)

374 
	#M_PI_4
 0.78539816339744830962

	)

375 
	#M_1_PI
 0.31830988618379067154

	)

376 
	#M_2_PI
 0.63661977236758134308

	)

377 
	#M_2_SQRTPI
 1.12837916709551257390

	)

378 
	#M_SQRT2
 1.41421356237309504880

	)

379 
	#M_SQRT1_2
 0.70710678118654752440

	)

385 #ifdeà
__USE_GNU


386 
	#M_El
 2.718281828459045235360287471352662498L

	)

387 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

388 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

389 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

390 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

391 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

392 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

393 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

394 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

395 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

396 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

397 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

398 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

405 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


406 
	#__NO_MATH_INLINES
 1

	)

409 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

416 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

417 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

418 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

419 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

420 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

421 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

425 #ifdeà
__USE_EXTERN_INLINES


426 
	~<b™s/m©hšlše.h
>

431 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

432 
	~<b™s/m©h-fš™e.h
>

435 #ifdeà
__USE_ISOC99


439 #iâdeà
isg»©”


440 
	#isg»©”
(
x
, 
y
) \

441 (
__ex‹nsiÚ__
 \

442 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

443 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

447 #iâdeà
isg»©”equ®


448 
	#isg»©”equ®
(
x
, 
y
) \

449 (
__ex‹nsiÚ__
 \

450 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

451 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

455 #iâdeà
i¦ess


456 
	#i¦ess
(
x
, 
y
) \

457 (
__ex‹nsiÚ__
 \

458 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

459 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

463 #iâdeà
i¦es£qu®


464 
	#i¦es£qu®
(
x
, 
y
) \

465 (
__ex‹nsiÚ__
 \

466 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

467 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

471 #iâdeà
i¦essg»©”


472 
	#i¦essg»©”
(
x
, 
y
) \

473 (
__ex‹nsiÚ__
 \

474 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

475 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

479 #iâdeà
isunÜd”ed


480 
	#isunÜd”ed
(
u
, 
v
) \

481 (
__ex‹nsiÚ__
 \

482 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

483 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

488 
	g__END_DECLS


	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


86 #ià
__PTHREAD_MUTEX_HAVE_ELISION
 == 1

87 
	#__PTHREAD_SPINS
 0, 0

	)

88 #–ià
__PTHREAD_MUTEX_HAVE_ELISION
 == 2

89 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

91 
	#__PTHREAD_SPINS
 0

	)

94 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


95 
	#PTHREAD_MUTEX_INITIALIZER
 \

96 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

97 #ifdeà
__USE_GNU


98 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

100 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

101 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

102 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

103 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

104 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

105 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

109 
	#PTHREAD_MUTEX_INITIALIZER
 \

110 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

111 #ifdeà
__USE_GNU


112 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

113 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

114 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

115 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

116 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

117 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

124 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


127 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

128 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

129 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

130 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


136 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


137 #ià
__WORDSIZE
 == 64

138 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

143 
	#PTHREAD_RWLOCK_INITIALIZER
 \

144 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

145 #ifdeà
__USE_GNU


146 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


147 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

149 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

151 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


152 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

153 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

154 0, 0, 0, 0 } }

	)

156 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

157 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

158 0 } }

	)

168 
	mPTHREAD_INHERIT_SCHED
,

169 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

170 
	mPTHREAD_EXPLICIT_SCHED


171 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

178 
	mPTHREAD_SCOPE_SYSTEM
,

179 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

180 
	mPTHREAD_SCOPE_PROCESS


181 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

188 
	mPTHREAD_PROCESS_PRIVATE
,

189 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

190 
	mPTHREAD_PROCESS_SHARED


191 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

197 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

201 
	s_±h»ad_ş—nup_bufãr


203 (*
	m__routše
) (*);

204 *
	m__¬g
;

205 
	m__ÿnûÉy³
;

206 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

212 
	mPTHREAD_CANCEL_ENABLE
,

213 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

214 
	mPTHREAD_CANCEL_DISABLE


215 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

219 
	mPTHREAD_CANCEL_DEFERRED
,

220 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

221 
	mPTHREAD_CANCEL_ASYNCHRONOUS


222 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

224 
	#PTHREAD_CANCELED
 ((*è-1)

	)

228 
	#PTHREAD_ONCE_INIT
 0

	)

231 #ifdeà
__USE_XOPEN2K


235 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

239 
__BEGIN_DECLS


244 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

245 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

246 *(*
__¡¬t_routše
) (*),

247 *
__»¡riù
 
__¬g
è
__THROWNL
 
__nÚnuÎ
 ((1, 3));

253 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

261 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

263 #ifdeà
__USE_GNU


266 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

274 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

275 cÚ¡ 
time¥ec
 *
__ab¡ime
);

282 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

286 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

289 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

290 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

298 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

301 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

302 
__THROW
 
	`__nÚnuÎ
 ((1));

305 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

306 *
__d‘ach¡©e
)

307 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

310 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

311 
__d‘ach¡©e
)

312 
__THROW
 
	`__nÚnuÎ
 ((1));

316 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

317 
size_t
 *
__gu¬dsize
)

318 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

321 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

322 
size_t
 
__gu¬dsize
)

323 
__THROW
 
	`__nÚnuÎ
 ((1));

327 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

328 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

329 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

332 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

333 cÚ¡ 
sched_·¿m
 *
__»¡riù


334 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

337 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


338 
__©Œ
, *
__»¡riù
 
__pŞicy
)

339 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

342 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

343 
__THROW
 
	`__nÚnuÎ
 ((1));

346 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


347 
__©Œ
, *
__»¡riù
 
__šh”™
)

348 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

351 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

352 
__šh”™
)

353 
__THROW
 
	`__nÚnuÎ
 ((1));

357 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

358 *
__»¡riù
 
__scİe
)

359 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

362 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

363 
__THROW
 
	`__nÚnuÎ
 ((1));

366 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


367 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

368 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

374 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

375 *
__¡ackaddr
)

376 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

379 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


380 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

381 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

386 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

387 
size_t
 
__¡acksize
)

388 
__THROW
 
	`__nÚnuÎ
 ((1));

390 #ifdeà
__USE_XOPEN2K


392 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

393 **
__»¡riù
 
__¡ackaddr
,

394 
size_t
 *
__»¡riù
 
__¡acksize
)

395 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

400 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

401 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

404 #ifdeà
__USE_GNU


407 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

408 
size_t
 
__ıu£tsize
,

409 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

410 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

414 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

415 
size_t
 
__ıu£tsize
,

416 
ıu_£t_t
 *
__ıu£t
)

417 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

420 
	$±h»ad_g‘©Œ_deçuÉ_Å
 (
±h»ad_©Œ_t
 *
__©Œ
)

421 
__THROW
 
	`__nÚnuÎ
 ((1));

425 
	$±h»ad_£‰r_deçuÉ_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
)

426 
__THROW
 
	`__nÚnuÎ
 ((1));

431 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

440 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

441 cÚ¡ 
sched_·¿m
 *
__·¿m
)

442 
__THROW
 
	`__nÚnuÎ
 ((3));

445 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

446 *
__»¡riù
 
__pŞicy
,

447 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

448 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

451 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

452 
__THROW
;

455 #ifdeà
__USE_GNU


457 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

458 
size_t
 
__buæ’
)

459 
__THROW
 
	`__nÚnuÎ
 ((2));

462 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

463 
__THROW
 
	`__nÚnuÎ
 ((2));

467 #ifdeà
__USE_UNIX98


469 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

472 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

475 #ifdeà
__USE_GNU


480 
	$±h»ad_y›ld
 (è
__THROW
;

485 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

486 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

487 
__THROW
 
	`__nÚnuÎ
 ((3));

490 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

491 
ıu_£t_t
 *
__ıu£t
)

492 
__THROW
 
	`__nÚnuÎ
 ((3));

505 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

506 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

517 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

521 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

524 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

529 
	`±h»ad_‹¡ÿnûl
 ();

538 
__jmp_buf
 
__ÿnûl_jmp_buf
;

539 
__mask_was_§ved
;

540 } 
__ÿnûl_jmp_buf
[1];

541 *
__·d
[4];

542 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

545 #iâdeà
__ş—nup_fù_©Œibu‹


546 
	#__ş—nup_fù_©Œibu‹


	)

551 
	s__±h»ad_ş—nup_äame


553 (*
__ÿnûl_routše
) (*);

554 *
__ÿnûl_¬g
;

555 
__do_™
;

556 
__ÿnûl_ty³
;

559 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


560 #ifdeà
__ılu¥lus


562 şas 
	c__±h»ad_ş—nup_şass


564 (*
__ÿnûl_routše
) (*);

565 *
__ÿnûl_¬g
;

566 
__do_™
;

567 
__ÿnûl_ty³
;

569 
public
:

570 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

571 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

572 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

573 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

574 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

575 &
__ÿnûl_ty³
); 
	}
}

576 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

586 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

588 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

592 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

593 
__şäame
.
	`__£tdo™
 (
execu‹
); \

594 } 0)

	)

596 #ifdeà
__USE_GNU


600 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

602 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

603 
__şäame
.
	`__deãr
 ()

	)

608 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

609 
__şäame
.
	`__»¡Üe
 (); \

610 
__şäame
.
	`__£tdo™
 (
execu‹
); \

611 } 0)

	)

618 
__ex‹º_šlše
 

619 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

621 ià(
__äame
->
__do_™
)

622 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

623 
	}
}

632 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

634 
__±h»ad_ş—nup_äame
 
__şäame
 \

635 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

636 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

637 .
__do_™
 = 1 };

	)

641 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

642 
__şäame
.
__do_™
 = (
execu‹
); \

643 } 0)

	)

645 #ifdeà
__USE_GNU


649 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

651 
__±h»ad_ş—nup_äame
 
__şäame
 \

652 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

653 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

654 .
__do_™
 = 1 }; \

655 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

656 &
__şäame
.
__ÿnûl_ty³
)

	)

661 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

662 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

663 
__şäame
.
__do_™
 = (
execu‹
); \

664 } 0)

	)

675 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

677 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

678 (*
__ÿnûl_routše
è(*èğ(
routše
); \

679 *
__ÿnûl_¬g
 = (
¬g
); \

680 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

681 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

682 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

684 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

685 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

689 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

690 dØ{

	)

691 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

692 
__ş—nup_fù_©Œibu‹
;

696 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

699 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

700 ià(
execu‹
) \

701 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

702 } 0)

	)

703 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

704 
__ş—nup_fù_©Œibu‹
;

706 #ifdeà
__USE_GNU


710 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

712 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

713 (*
__ÿnûl_routše
è(*èğ(
routše
); \

714 *
__ÿnûl_¬g
 = (
¬g
); \

715 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

716 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

717 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

719 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

720 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

724 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

725 dØ{

	)

726 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

727 
__ş—nup_fù_©Œibu‹
;

732 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

735 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

736 ià(
execu‹
) \

737 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

738 
	}
} 0)

	)

739 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

740 
__ş—nup_fù_©Œibu‹
;

744 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

745 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

746 #iâdeà
SHARED


747 
	`__©Œibu‹__
 ((
__w—k__
))

753 
__jmp_buf_g
;

754 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

760 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

761 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

762 
__THROW
 
	`__nÚnuÎ
 ((1));

765 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

766 
__THROW
 
	`__nÚnuÎ
 ((1));

769 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

770 
__THROWNL
 
	`__nÚnuÎ
 ((1));

773 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

774 
__THROWNL
 
	`__nÚnuÎ
 ((1));

776 #ifdeà
__USE_XOPEN2K


778 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

779 cÚ¡ 
time¥ec
 *
__»¡riù


780 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

784 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

785 
__THROWNL
 
	`__nÚnuÎ
 ((1));

789 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

790 
__»¡riù
 
__mu‹x
,

791 *
__»¡riù
 
__´ioûšg
)

792 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

796 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

797 
__´ioûšg
,

798 *
__»¡riù
 
__Şd_ûšg
)

799 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

802 #ifdeà
__USE_XOPEN2K8


804 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

805 
__THROW
 
	`__nÚnuÎ
 ((1));

806 #ifdeà
__USE_GNU


807 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

808 
__THROW
 
	`__nÚnuÎ
 ((1));

817 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

818 
__THROW
 
	`__nÚnuÎ
 ((1));

821 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

825 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

826 
__»¡riù
 
__©Œ
,

827 *
__»¡riù
 
__psh¬ed
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

831 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

832 
__psh¬ed
)

833 
__THROW
 
	`__nÚnuÎ
 ((1));

835 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


837 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


838 
__©Œ
, *
__»¡riù
 
__kšd
)

839 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

844 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

845 
__THROW
 
	`__nÚnuÎ
 ((1));

849 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

850 
__»¡riù
 
__©Œ
,

851 *
__»¡riù
 
__´ÙocŞ
)

852 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 
__´ÙocŞ
)

858 
__THROW
 
	`__nÚnuÎ
 ((1));

861 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

862 
__»¡riù
 
__©Œ
,

863 *
__»¡riù
 
__´ioûšg
)

864 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

867 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

868 
__´ioûšg
)

869 
__THROW
 
	`__nÚnuÎ
 ((1));

871 #ifdeà
__USE_XOPEN2K


873 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

874 *
__robu¡Ãss
)

875 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

876 #ifdeà
__USE_GNU


877 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

878 *
__robu¡Ãss
)

879 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

883 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

884 
__robu¡Ãss
)

885 
__THROW
 
	`__nÚnuÎ
 ((1));

886 #ifdeà
__USE_GNU


887 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

888 
__robu¡Ãss
)

889 
__THROW
 
	`__nÚnuÎ
 ((1));

894 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


899 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

900 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


901 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

904 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

905 
__THROW
 
	`__nÚnuÎ
 ((1));

908 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

909 
__THROWNL
 
	`__nÚnuÎ
 ((1));

912 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__nÚnuÎ
 ((1));

915 #ifdeà
__USE_XOPEN2K


917 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

918 cÚ¡ 
time¥ec
 *
__»¡riù


919 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

923 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

924 
__THROWNL
 
	`__nÚnuÎ
 ((1));

927 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__nÚnuÎ
 ((1));

930 #ifdeà
__USE_XOPEN2K


932 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

933 cÚ¡ 
time¥ec
 *
__»¡riù


934 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

938 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

939 
__THROWNL
 
	`__nÚnuÎ
 ((1));

945 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

946 
__THROW
 
	`__nÚnuÎ
 ((1));

949 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

954 
__»¡riù
 
__©Œ
,

955 *
__»¡riù
 
__psh¬ed
)

956 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

959 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

960 
__psh¬ed
)

961 
__THROW
 
	`__nÚnuÎ
 ((1));

964 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

965 
__»¡riù
 
__©Œ
,

966 *
__»¡riù
 
__´ef
)

967 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

970 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

971 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

979 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

980 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

981 
__THROW
 
	`__nÚnuÎ
 ((1));

984 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

985 
__THROW
 
	`__nÚnuÎ
 ((1));

988 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

989 
__THROWNL
 
	`__nÚnuÎ
 ((1));

992 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

993 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1000 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1001 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

1002 
	`__nÚnuÎ
 ((1, 2));

1011 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1012 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1013 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1014 
	`__nÚnuÎ
 ((1, 2, 3));

1019 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1020 
__THROW
 
	`__nÚnuÎ
 ((1));

1023 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1024 
__THROW
 
	`__nÚnuÎ
 ((1));

1027 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1028 
__»¡riù
 
__©Œ
,

1029 *
__»¡riù
 
__psh¬ed
)

1030 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1033 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1034 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1036 #ifdeà
__USE_XOPEN2K


1038 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1039 
__»¡riù
 
__©Œ
,

1040 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1041 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1044 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1045 
__şockid_t
 
__şock_id
)

1046 
__THROW
 
	`__nÚnuÎ
 ((1));

1050 #ifdeà
__USE_XOPEN2K


1055 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1056 
__THROW
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1060 
__THROW
 
	`__nÚnuÎ
 ((1));

1063 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1064 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1068 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1071 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1072 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1079 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1080 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1081 
__©Œ
, 
__couÁ
)

1082 
__THROW
 
	`__nÚnuÎ
 ((1));

1085 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1086 
__THROW
 
	`__nÚnuÎ
 ((1));

1089 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1090 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1094 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1095 
__THROW
 
	`__nÚnuÎ
 ((1));

1098 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1099 
__THROW
 
	`__nÚnuÎ
 ((1));

1102 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1103 
__»¡riù
 
__©Œ
,

1104 *
__»¡riù
 
__psh¬ed
)

1105 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1108 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1109 
__psh¬ed
)

1110 
__THROW
 
	`__nÚnuÎ
 ((1));

1122 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1123 (*
__de¡r_funùiÚ
) (*))

1124 
__THROW
 
	`__nÚnuÎ
 ((1));

1127 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1130 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1133 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1134 cÚ¡ *
__poš‹r
è
__THROW
 ;

1137 #ifdeà
__USE_XOPEN2K


1139 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1140 
__şockid_t
 *
__şock_id
)

1141 
__THROW
 
	`__nÚnuÎ
 ((2));

1156 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1157 (*
__·»Á
) (),

1158 (*
__chd
è()è
__THROW
;

1161 #ifdeà
__USE_EXTERN_INLINES


1163 
__ex‹º_šlše
 

1164 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1166  
__th»ad1
 =ğ
__th»ad2
;

1167 
	}
}

1170 
	g__END_DECLS


	@/usr/include/semaphore.h

18 #iâdeà
_SEMAPHORE_H


19 
	#_SEMAPHORE_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<sys/ty³s.h
>

23 #ifdeà
__USE_XOPEN2K


24 
	#__Ãed_time¥ec


	)

25 
	~<time.h
>

29 
	~<b™s/£m­hÜe.h
>

32 
__BEGIN_DECLS


36 
	$£m_š™
 (
£m_t
 *
__£m
, 
__psh¬ed
, 
__v®ue
)

37 
__THROW
;

39 
	$£m_de¡roy
 (
£m_t
 *
__£m
è
__THROW
;

42 
£m_t
 *
	$£m_İ’
 (cÚ¡ *
__Çme
, 
__oæag
, ...è
__THROW
;

45 
	$£m_şo£
 (
£m_t
 *
__£m
è
__THROW
;

48 
	$£m_uÆšk
 (cÚ¡ *
__Çme
è
__THROW
;

54 
	`£m_wa™
 (
£m_t
 *
__£m
);

56 #ifdeà
__USE_XOPEN2K


61 
	`£m_timedwa™
 (
£m_t
 *
__»¡riù
 
__£m
,

62 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
);

66 
	$£m_Œywa™
 (
£m_t
 *
__£m
è
__THROWNL
;

69 
	$£m_po¡
 (
£m_t
 *
__£m
è
__THROWNL
;

72 
	$£m_g‘v®ue
 (
£m_t
 *
__»¡riù
 
__£m
, *__»¡riù 
__sv®
)

73 
__THROW
;

76 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 
	#SIZE_MAX
 (4294967295U)

	)

267 #iâdeà
WCHAR_MIN


269 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

270 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

274 
	#WINT_MIN
 (0u)

	)

275 
	#WINT_MAX
 (4294967295u)

	)

278 
	#INT8_C
(
c
è
	)
c

279 
	#INT16_C
(
c
è
	)
c

280 
	#INT32_C
(
c
è
	)
c

281 #ià
__WORDSIZE
 == 64

282 
	#INT64_C
(
c
èø## 
L


	)

284 
	#INT64_C
(
c
èø## 
LL


	)

288 
	#UINT8_C
(
c
è
	)
c

289 
	#UINT16_C
(
c
è
	)
c

290 
	#UINT32_C
(
c
èø## 
U


	)

291 #ià
__WORDSIZE
 == 64

292 
	#UINT64_C
(
c
èø## 
UL


	)

294 
	#UINT64_C
(
c
èø## 
ULL


	)

298 #ià
__WORDSIZE
 == 64

299 
	#INTMAX_C
(
c
èø## 
L


	)

300 
	#UINTMAX_C
(
c
èø## 
UL


	)

302 
	#INTMAX_C
(
c
èø## 
LL


	)

303 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

634 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

637 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

638 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


639 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

646 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

648 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


660 
	$£g½
 (è
__THROW
;

667 
__pid_t
 
	$£tsid
 (è
__THROW
;

669 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


671 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

675 
__uid_t
 
	$g‘uid
 (è
__THROW
;

678 
__uid_t
 
	$g‘euid
 (è
__THROW
;

681 
__gid_t
 
	$g‘gid
 (è
__THROW
;

684 
__gid_t
 
	$g‘egid
 (è
__THROW
;

689 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

702 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


705 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

708 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


710 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_GNU


733 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

734 
__THROW
;

738 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

739 
__THROW
;

743 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

744 
__THROW
 
__wur
;

748 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

758 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

759 || 
defšed
 
__USE_BSD


764 
__pid_t
 
	$vfÜk
 (è
__THROW
;

770 *
	$‰yÇme
 (
__fd
è
__THROW
;

774 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

775 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

779 
	$i§‰y
 (
__fd
è
__THROW
;

781 #ià
defšed
 
__USE_BSD
 \

782 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

785 
	$‰y¦Ù
 (è
__THROW
;

790 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

791 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

793 #ifdeà
__USE_ATFILE


796 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

797 cÚ¡ *
__to
, 
__æags
)

798 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

801 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


803 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

810 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

811 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

814 #ifdeà
__USE_ATFILE


816 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

817 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

820 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

821 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

822 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

826 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

828 #ifdeà
__USE_ATFILE


830 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

831 
__THROW
 
	`__nÚnuÎ
 ((2));

835 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

839 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

842 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

849 *
	`g‘logš
 ();

850 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


857 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

860 #ifdef 
__USE_BSD


862 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

866 #ifdef 
__USE_POSIX2


870 
	#__Ãed_g‘İt


	)

871 
	~<g‘İt.h
>

875 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


879 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

886 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

887 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

897 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

898 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

899 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

900 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

906 
	$vhªgup
 (è
__THROW
;

909 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

917 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

918 
size_t
 
__off£t
, 
__sÿË
)

919 
__THROW
 
	`__nÚnuÎ
 ((1));

925 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

929 *
	$g‘u£rsh–l
 (è
__THROW
;

930 
	$’du£rsh–l
 (è
__THROW
;

931 
	$£tu£rsh–l
 (è
__THROW
;

937 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

941 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

944 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

948 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

956 
	`fsync
 (
__fd
);

959 #ifdeà
__USE_GNU


962 
	$syncfs
 (
__fd
è
__THROW
;

966 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


969 
	`g‘ho¡id
 ();

972 
	$sync
 (è
__THROW
;

975 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


978 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

983 
	$g‘dbËsize
 (è
__THROW
;

989 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


992 #iâdeà
__USE_FILE_OFFSET64


993 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

994 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

996 #ifdeà
__REDIRECT_NTH


997 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

998 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

999 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1001 
	#Œunÿ‹
 
Œunÿ‹64


	)

1004 #ifdeà
__USE_LARGEFILE64


1005 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1012 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1015 #iâdeà
__USE_FILE_OFFSET64


1016 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1020 
árunÿ‹64
è
__wur
;

1022 
	#árunÿ‹
 
árunÿ‹64


	)

1025 #ifdeà
__USE_LARGEFILE64


1026 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1032 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1033 || 
defšed
 
__USE_MISC


1037 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1043 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1047 #ifdeà
__USE_MISC


1058 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1063 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1075 
	#F_ULOCK
 0

	)

1076 
	#F_LOCK
 1

	)

1077 
	#F_TLOCK
 2

	)

1078 
	#F_TEST
 3

	)

1080 #iâdeà
__USE_FILE_OFFSET64


1081 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1083 #ifdeà
__REDIRECT


1084 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1085 
lockf64
è
__wur
;

1087 
	#lockf
 
lockf64


	)

1090 #ifdeà
__USE_LARGEFILE64


1091 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1096 #ifdeà
__USE_GNU


1101 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1102 (
__ex‹nsiÚ__
 \

1103 ({ 
__»suÉ
; \

1104 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1105 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1106 
__»suÉ
; 
	}
}))

	)

1109 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1112 
fd©async
 (
__fdes
);

1118 #ifdef 
__USE_XOPEN


1120 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1121 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1125 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1126 
__THROW
 
	`__nÚnuÎ
 ((1));

1133 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1134 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1140 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1142 *
	$ù”mid
 (*
__s
è
__THROW
;

1147 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1148 
	~<b™s/uni¡d.h
>

1151 
__END_DECLS


	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/xine.h

39 #iâdeà
HAVE_XINE_H


40 
	#HAVE_XINE_H


	)

42 #ifdeà
__ılu¥lus


46 
	~<sys/ty³s.h
>

47 
	~<sys/time.h
>

48 
	~<time.h
>

49 
	~<¡d¬g.h
>

51 #ifdeà
WIN32


52 
	~<wšdows.h
>

53 
	~<wšdowsx.h
>

56 #ifdeà
XINE_COMPILE


57 
	~<š‰y³s.h
>

58 
	~"©Œibu‹s.h
"

60 
	~<xše/os_ty³s.h
>

61 
	~<xše/©Œibu‹s.h
>

83 
xše_s
 
	txše_t
;

84 
xše_¡»am_s
 
	txše_¡»am_t
;

85 
xše_audio_pÜt_s
 
	txše_audio_pÜt_t
;

86 
xše_video_pÜt_s
 
	txše_video_pÜt_t
;

88 #iâdeà
XINE_DISABLE_DEPRECATED_FEATURES


90 
xše_audio_pÜt_t
 
	txše_ao_driv”_t
 
	tXINE_DEPRECATED
;

91 
xše_video_pÜt_t
 
	txše_vo_driv”_t
 
	tXINE_DEPRECATED
;

104 cÚ¡ *
xše_g‘_v”siÚ_¡ršg
 (è
XINE_PROTECTED
;

105 
xše_g‘_v”siÚ
 (*
majÜ
, *
mšÜ
, *
sub
è
XINE_PROTECTED
;

109 
xše_check_v”siÚ
 (
majÜ
, 
mšÜ
, 
sub
è
XINE_PROTECTED
;

112 
	#XINE_MAJOR_VERSION
 1

	)

113 
	#XINE_MINOR_VERSION
 1

	)

114 
	#XINE_SUB_VERSION
 21

	)

115 
	#XINE_VERSION
 "1.1.21"

	)

133 
xše_t
 *
xše_Ãw
 (è
XINE_PROTECTED
;

138 
xše_£t_æags
 (
xše_t
 *, è
XINE_PROTECTED
 
__©Œibu‹__
((
w—k
));

139 
	#XINE_FLAG_NO_WRITE_CACHE
 1

	)

144 
xše_š™
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

161 
xše_audio_pÜt_t
 *
xše_İ’_audio_driv”
 (
xše_t
 *
£lf
, cÚ¡ *
id
,

162 *
d©a
è
XINE_PROTECTED
;

163 
xše_video_pÜt_t
 *
xše_İ’_video_driv”
 (
xše_t
 *
£lf
, cÚ¡ *
id
,

164 
visu®
, *
d©a
è
XINE_PROTECTED
;

166 
xše_şo£_audio_driv”
 (
xše_t
 *
£lf
, 
xše_audio_pÜt_t
 *
driv”
è
XINE_PROTECTED
;

167 
xše_şo£_video_driv”
 (
xše_t
 *
£lf
, 
xše_video_pÜt_t
 *
driv”
è
XINE_PROTECTED
;

170 
	#XINE_VISUAL_TYPE_NONE
 0

	)

171 
	#XINE_VISUAL_TYPE_X11
 1

	)

172 
	#XINE_VISUAL_TYPE_X11_2
 10

	)

173 
	#XINE_VISUAL_TYPE_AA
 2

	)

174 
	#XINE_VISUAL_TYPE_FB
 3

	)

175 
	#XINE_VISUAL_TYPE_GTK
 4

	)

176 
	#XINE_VISUAL_TYPE_DFB
 5

	)

177 
	#XINE_VISUAL_TYPE_PM
 6

	)

178 
	#XINE_VISUAL_TYPE_DIRECTX
 7

	)

179 
	#XINE_VISUAL_TYPE_CACA
 8

	)

180 
	#XINE_VISUAL_TYPE_MACOSX
 9

	)

181 
	#XINE_VISUAL_TYPE_XCB
 11

	)

182 
	#XINE_VISUAL_TYPE_RAW
 12

	)

188 
xše_ex™
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

206 
xše_¡»am_t
 *
xše_¡»am_Ãw
 (
xše_t
 *
£lf
,

207 
xše_audio_pÜt_t
 *
ao
, 
xše_video_pÜt_t
 *
vo
è
XINE_PROTECTED
;

227 
xše_¡»am_ma¡”_¦ave
(
xše_¡»am_t
 *
ma¡”
, xše_¡»am_ˆ*
¦ave
,

228 
afãùiÚ
è
XINE_PROTECTED
;

232 
	#XINE_MASTER_SLAVE_PLAY
 (1<<0)

	)

234 
	#XINE_MASTER_SLAVE_STOP
 (1<<1)

	)

236 
	#XINE_MASTER_SLAVE_SPEED
 (1<<2)

	)

246 
xše_İ’
 (
xše_¡»am_t
 *
¡»am
, cÚ¡ *
m¾
è
XINE_PROTECTED
;

258 
xše_¶ay
 (
xše_¡»am_t
 *
¡»am
, 
¡¬t_pos
, 
¡¬t_time
è
XINE_PROTECTED
;

267 
xše_Œick_mode
 (
xše_¡»am_t
 *
¡»am
, 
mode
, 
v®ue
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

270 
	#XINE_TRICK_MODE_OFF
 0

	)

271 
	#XINE_TRICK_MODE_SEEK_TO_POSITION
 1

	)

272 
	#XINE_TRICK_MODE_SEEK_TO_TIME
 2

	)

273 
	#XINE_TRICK_MODE_FAST_FORWARD
 3

	)

274 
	#XINE_TRICK_MODE_FAST_REWIND
 4

	)

280 
xše_¡İ
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

286 
xše_şo£
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

292 
xše_ejeù
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

298 
xše_di¥o£
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

303 
xše_’gše_£t_·¿m
(
xše_t
 *
£lf
, 
·¿m
, 
v®ue
è
XINE_PROTECTED
;

304 
xše_’gše_g‘_·¿m
(
xše_t
 *
£lf
, 
·¿m
è
XINE_PROTECTED
;

306 
	#XINE_ENGINE_PARAM_VERBOSITY
 1

	)

312 
xše_£t_·¿m
 (
xše_¡»am_t
 *
¡»am
, 
·¿m
, 
v®ue
è
XINE_PROTECTED
;

313 
xše_g‘_·¿m
 (
xše_¡»am_t
 *
¡»am
, 
·¿m
è
XINE_PROTECTED
;

318 
	#XINE_PARAM_SPEED
 1

	)

319 
	#XINE_PARAM_AV_OFFSET
 2

	)

320 
	#XINE_PARAM_AUDIO_CHANNEL_LOGICAL
 3

	)

321 
	#XINE_PARAM_SPU_CHANNEL
 4

	)

322 
	#XINE_PARAM_VIDEO_CHANNEL
 5

	)

323 
	#XINE_PARAM_AUDIO_VOLUME
 6

	)

324 
	#XINE_PARAM_AUDIO_MUTE
 7

	)

325 
	#XINE_PARAM_AUDIO_COMPR_LEVEL
 8

	)

326 
	#XINE_PARAM_AUDIO_AMP_LEVEL
 9

	)

327 
	#XINE_PARAM_AUDIO_REPORT_LEVEL
 10

	)

328 
	#XINE_PARAM_VERBOSITY
 11

	)

329 
	#XINE_PARAM_SPU_OFFSET
 12

	)

330 
	#XINE_PARAM_IGNORE_VIDEO
 13

	)

331 
	#XINE_PARAM_IGNORE_AUDIO
 14

	)

332 
	#XINE_PARAM_IGNORE_SPU
 15

	)

333 
	#XINE_PARAM_BROADCASTER_PORT
 16

	)

334 
	#XINE_PARAM_METRONOM_PREBUFFER
 17

	)

335 
	#XINE_PARAM_EQ_30HZ
 18

	)

336 
	#XINE_PARAM_EQ_60HZ
 19

	)

337 
	#XINE_PARAM_EQ_125HZ
 20

	)

338 
	#XINE_PARAM_EQ_250HZ
 21

	)

339 
	#XINE_PARAM_EQ_500HZ
 22

	)

340 
	#XINE_PARAM_EQ_1000HZ
 23

	)

341 
	#XINE_PARAM_EQ_2000HZ
 24

	)

342 
	#XINE_PARAM_EQ_4000HZ
 25

	)

343 
	#XINE_PARAM_EQ_8000HZ
 26

	)

344 
	#XINE_PARAM_EQ_16000HZ
 27

	)

345 
	#XINE_PARAM_AUDIO_CLOSE_DEVICE
 28

	)

346 
	#XINE_PARAM_AUDIO_AMP_MUTE
 29

	)

347 
	#XINE_PARAM_FINE_SPEED
 30

	)

348 
	#XINE_PARAM_EARLY_FINISHED_EVENT
 31

	)

349 
	#XINE_PARAM_GAPLESS_SWITCH
 32

	)

350 
	#XINE_PARAM_DELAY_FINISHED_EVENT
 33

	)

359 
	#XINE_SPEED_PAUSE
 0

	)

360 
	#XINE_SPEED_SLOW_4
 1

	)

361 
	#XINE_SPEED_SLOW_2
 2

	)

362 
	#XINE_SPEED_NORMAL
 4

	)

363 
	#XINE_SPEED_FAST_2
 8

	)

364 
	#XINE_SPEED_FAST_4
 16

	)

367 
	#XINE_FINE_SPEED_NORMAL
 1000000

	)

370 
	#XINE_PARAM_VO_DEINTERLACE
 0x01000000

	)

371 
	#XINE_PARAM_VO_ASPECT_RATIO
 0x01000001

	)

372 
	#XINE_PARAM_VO_HUE
 0x01000002

	)

373 
	#XINE_PARAM_VO_SATURATION
 0x01000003

	)

374 
	#XINE_PARAM_VO_CONTRAST
 0x01000004

	)

375 
	#XINE_PARAM_VO_BRIGHTNESS
 0x01000005

	)

376 
	#XINE_PARAM_VO_GAMMA
 0x0100000ø

	)

377 
	#XINE_PARAM_VO_ZOOM_X
 0x01000008

	)

378 
	#XINE_PARAM_VO_ZOOM_Y
 0x0100000d

	)

379 
	#XINE_PARAM_VO_PAN_SCAN
 0x01000009

	)

380 
	#XINE_PARAM_VO_TVMODE
 0x0100000¨

	)

381 
	#XINE_PARAM_VO_WINDOW_WIDTH
 0x0100000à

	)

382 
	#XINE_PARAM_VO_WINDOW_HEIGHT
 0x01000010

	)

383 
	#XINE_PARAM_VO_CROP_LEFT
 0x01000020

	)

384 
	#XINE_PARAM_VO_CROP_RIGHT
 0x01000021

	)

385 
	#XINE_PARAM_VO_CROP_TOP
 0x01000022

	)

386 
	#XINE_PARAM_VO_CROP_BOTTOM
 0x01000023

	)

389 
	#XINE_VO_ZOOM_STEP
 100

	)

390 
	#XINE_VO_ZOOM_MAX
 400

	)

391 
	#XINE_VO_ZOOM_MIN
 -85

	)

394 
	#XINE_VO_ASPECT_AUTO
 0

	)

395 
	#XINE_VO_ASPECT_SQUARE
 1

	)

396 
	#XINE_VO_ASPECT_4_3
 2

	)

397 
	#XINE_VO_ASPECT_ANAMORPHIC
 3

	)

398 
	#XINE_VO_ASPECT_DVB
 4

	)

399 
	#XINE_VO_ASPECT_NUM_RATIOS
 5

	)

400 #iâdeà
XINE_DISABLE_DEPRECATED_FEATURES


401 
	#XINE_VO_ASPECT_PAN_SCAN
 41

	)

402 
	#XINE_VO_ASPECT_DONT_TOUCH
 42

	)

408 
	#XINE_DEMUX_DEFAULT_STRATEGY
 0

	)

410 
	#XINE_DEMUX_REVERT_STRATEGY
 1

	)

412 
	#XINE_DEMUX_CONTENT_STRATEGY
 2

	)

414 
	#XINE_DEMUX_EXTENSION_STRATEGY
 3

	)

417 
	#XINE_VERBOSITY_NONE
 0

	)

418 
	#XINE_VERBOSITY_LOG
 1

	)

419 
	#XINE_VERBOSITY_DEBUG
 2

	)

449 
xše_g‘_cu¼’t_äame
 (
xše_¡»am_t
 *
¡»am
,

450 *
width
, *
height
,

451 *
¿tio_code
, *
fÜm©
,

452 
ušt8_t
 *
img
è
XINE_PROTECTED
;

454 
xše_g‘_cu¼’t_äame_s
 (
xše_¡»am_t
 *
¡»am
,

455 *
width
, *
height
,

456 *
¿tio_code
, *
fÜm©
,

457 
ušt8_t
 *
img
, *
img_size
è
XINE_PROTECTED
;

459 
xše_g‘_cu¼’t_äame_®loc
 (
xše_¡»am_t
 *
¡»am
,

460 *
width
, *
height
,

461 *
¿tio_code
, *
fÜm©
,

462 
ušt8_t
 **
img
, *
img_size
è
XINE_PROTECTED
;

466 
width
;

467 
height
;

468 
üİ_Ëá
;

469 
üİ_right
;

470 
üİ_tİ
;

471 
üİ_bÙtom
;

472 
¿tio_code
;

473 
š‹¾aûd
;

474 
fÜm©
;

475 
img_size
;

476 
ušt8_t
 *
img
;

477 } 
	txše_cu¼’t_äame_d©a_t
;

479 
	#XINE_FRAME_DATA_ALLOCATE_IMG
 (1<<0)

	)

481 
xše_g‘_cu¼’t_äame_d©a
 (
xše_¡»am_t
 *
¡»am
,

482 
xše_cu¼’t_äame_d©a_t
 *
d©a
,

483 
æags
è
XINE_PROTECTED
;

486 
	#XINE_IMGFMT_YV12
 (('2'<<24)|('1'<<16)|('V'<<8)|'Y')

	)

487 
	#XINE_IMGFMT_YUY2
 (('2'<<24)|('Y'<<16)|('U'<<8)|'Y')

	)

488 
	#XINE_IMGFMT_XVMC
 (('C'<<24)|('M'<<16)|('v'<<8)|'X')

	)

489 
	#XINE_IMGFMT_XXMC
 (('C'<<24)|('M'<<16)|('x'<<8)|'X')

	)

495 
št64_t
 
xše_g‘_cu¼’t_v±s
(
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

502 #ifdeà
XINE_ENABLE_EXPERIMENTAL_FEATURES


517 
xše_video_pÜt_t
 *
xše_Ãw_äameg¿b_video_pÜt
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

521 
št64_t
 
v±s
;

522 
št64_t
 
du¿tiÚ
;

523 
width
, 
height
;

524 
cŞÜ¥aû
;

525 
a¥eù_¿tio
;

527 
pos_¡»am
;

528 
pos_time
;

530 
ušt8_t
 *
d©a
;

531 *
xše_äame
;

533 
äame_numb”
;

534 } 
	txše_video_äame_t
;

536 
xše_g‘_Ãxt_video_äame
 (
xše_video_pÜt_t
 *
pÜt
,

537 
xše_video_äame_t
 *
äame
è
XINE_PROTECTED
;

539 
xše_ä“_video_äame
 (
xše_video_pÜt_t
 *
pÜt
, 
xše_video_äame_t
 *
äame
è
XINE_PROTECTED
;

541 
xše_audio_pÜt_t
 *
xše_Ãw_äameg¿b_audio_pÜt
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

545 
št64_t
 
v±s
;

546 
num_§m¶es
;

547 
§m¶e_¿‹
;

548 
num_chªÃls
;

549 
b™s_³r_§m¶e
;

551 
off_t
 
pos_¡»am
;

552 
pos_time
;

554 
ušt8_t
 *
d©a
;

555 *
xše_äame
;

556 } 
	txše_audio_äame_t
;

558 
xše_g‘_Ãxt_audio_äame
 (
xše_audio_pÜt_t
 *
pÜt
,

559 
xše_audio_äame_t
 *
äame
è
XINE_PROTECTED
;

561 
xše_ä“_audio_äame
 (
xše_audio_pÜt_t
 *
pÜt
, 
xše_audio_äame_t
 *
äame
è
XINE_PROTECTED
;

567 
xše_g‘_video_äame
 (
xše_¡»am_t
 *
¡»am
,

568 
time¡amp
,

569 *
width
, *
height
,

570 *
¿tio_code
,

571 *
du¿tiÚ
,

572 *
fÜm©
,

573 
ušt8_t
 *
img
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

592 
xše_po¡_s
 
	txše_po¡_t
;

594 
	sxše_po¡_s
 {

600 
xše_audio_pÜt_t
 **
audio_šput
;

606 
xše_video_pÜt_t
 **
video_šput
;

611 
ty³
;

625 
xše_po¡_t
 *
xše_po¡_š™
(
xše_t
 *
xše
, cÚ¡ *
Çme
,

626 
šputs
,

627 
xše_audio_pÜt_t
 **
audio_rg‘
,

628 
xše_video_pÜt_t
 **
video_rg‘
è
XINE_PROTECTED
;

631 cÚ¡ *cÚ¡ *
xše_li¡_po¡_¶ugšs
(
xše_t
 *
xše
è
XINE_PROTECTED
;

634 cÚ¡ *cÚ¡ *
xše_li¡_po¡_¶ugšs_ty³d
(
xše_t
 *
xše
, 
ty³
è
XINE_PROTECTED
;

645 
xše_po¡_š_s
 
	txše_po¡_š_t
;

646 
xše_po¡_out_s
 
	txše_po¡_out_t
;

648 
	sxše_po¡_š_s
 {

651 cÚ¡ *
Çme
;

654 
ty³
;

658 *
d©a
;

662 
	sxše_po¡_out_s
 {

665 cÚ¡ *
Çme
;

668 
ty³
;

672 *
d©a
;

683 (*
»wœe
è(
xše_po¡_out_t
 *
£lf
, *
d©a
);

688 cÚ¡ *cÚ¡ *
xše_po¡_li¡_šputs
(
xše_po¡_t
 *
£lf
è
XINE_PROTECTED
;

691 cÚ¡ *cÚ¡ *
xše_po¡_li¡_ouuts
(
xše_po¡_t
 *
£lf
è
XINE_PROTECTED
;

694 
xše_po¡_š_t
 *
xše_po¡_šput
(
xše_po¡_t
 *
£lf
, cÚ¡ *
Çme
è
XINE_PROTECTED
;

697 
xše_po¡_out_t
 *
xše_po¡_ouut
(
xše_po¡_t
 *
£lf
, cÚ¡ *
Çme
è
XINE_PROTECTED
;

703 
xše_po¡_wœe
(
xše_po¡_out_t
 *
sourû
, 
xše_po¡_š_t
 *
rg‘
è
XINE_PROTECTED
;

714 
xše_po¡_wœe_video_pÜt
(
xše_po¡_out_t
 *
sourû
, 
xše_video_pÜt_t
 *
vo
è
XINE_PROTECTED
;

725 
xše_po¡_wœe_audio_pÜt
(
xše_po¡_out_t
 *
sourû
, 
xše_audio_pÜt_t
 *
ao
è
XINE_PROTECTED
;

730 
xše_po¡_out_t
 * 
xše_g‘_video_sourû
(
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

731 
xše_po¡_out_t
 * 
xše_g‘_audio_sourû
(
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

738 
xše_po¡_di¥o£
(
xše_t
 *
xše
, 
xše_po¡_t
 *
£lf
è
XINE_PROTECTED
;

742 
	#XINE_POST_TYPE_VIDEO_FILTER
 0x010000

	)

743 
	#XINE_POST_TYPE_VIDEO_VISUALIZATION
 0x010001

	)

744 
	#XINE_POST_TYPE_VIDEO_COMPOSE
 0x010002

	)

745 
	#XINE_POST_TYPE_AUDIO_FILTER
 0x020000

	)

746 
	#XINE_POST_TYPE_AUDIO_VISUALIZATION
 0x020001

	)

755 
	#XINE_POST_DATA_VIDEO
 0

	)

761 
	#XINE_POST_DATA_AUDIO
 1

	)

767 
	#XINE_POST_DATA_INT
 3

	)

773 
	#XINE_POST_DATA_DOUBLE
 4

	)

778 
	#XINE_POST_DATA_PARAMETERS
 5

	)

782 
ty³
;

783 *
Çme
;

784 
size
;

785 
off£t
;

786 **
’um_v®ues
;

787 
¿nge_mš
;

788 
¿nge_max
;

789 
»adÚly
;

790 *
desütiÚ
;

791 } 
	txše_po¡_­i_·¿m‘”_t
;

795 
¡ruù_size
;

796 
xše_po¡_­i_·¿m‘”_t
 *
·¿m‘”
;

797 } 
	txše_po¡_­i_desü_t
;

804 (*
£t_·¿m‘”s
è(
xše_po¡_t
 *
£lf
, *
·¿ms
);

809 (*
g‘_·¿m‘”s
è(
xše_po¡_t
 *
£lf
, *
·¿ms
);

814 
xše_po¡_­i_desü_t
 * (*
g‘_·¿m_desü
) ();

821 * (*
g‘_h–p
) ();

822 } 
	txše_po¡_­i_t
;

825 
	#POST_PARAM_TYPE_LAST
 0

	)

826 
	#POST_PARAM_TYPE_INT
 1

	)

827 
	#POST_PARAM_TYPE_DOUBLE
 2

	)

828 
	#POST_PARAM_TYPE_CHAR
 3

	)

829 
	#POST_PARAM_TYPE_STRING
 4

	)

830 
	#POST_PARAM_TYPE_STRINGLIST
 5

	)

831 
	#POST_PARAM_TYPE_BOOL
 6

	)

843 
xše_g‘_log_£ùiÚ_couÁ
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

846 cÚ¡ *cÚ¡ *
xše_g‘_log_Çmes
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

849 
xše_log
 (
xše_t
 *
£lf
, 
buf
,

850 cÚ¡ *
fÜm©
, ...è
XINE_FORMAT_PRINTF
(3, 4è
XINE_PROTECTED
;

851 
xše_vlog
(
xše_t
 *
£lf
, 
buf
,

852 cÚ¡ *
fÜm©
, 
va_li¡
 
¬gs
è
XINE_FORMAT_PRINTF
(3, 0è
XINE_PROTECTED
;

855 *cÚ¡ *
xše_g‘_log
 (
xše_t
 *
£lf
, 
buf
è
XINE_PROTECTED
;

858 (*
xše_log_cb_t
è(*
	tu£r_d©a
, 
	t£ùiÚ
);

859 
xše_»gi¡”_log_cb
 (
xše_t
 *
£lf
, 
xše_log_cb_t
 
cb
,

860 *
u£r_d©a
è
XINE_PROTECTED
;

867 
xše_g‘_”rÜ
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

870 
xše_g‘_¡©us
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

875 
	#XINE_STATUS_IDLE
 0

	)

876 
	#XINE_STATUS_STOP
 1

	)

877 
	#XINE_STATUS_PLAY
 2

	)

878 
	#XINE_STATUS_QUIT
 3

	)

883 
	#XINE_ERROR_NONE
 0

	)

884 
	#XINE_ERROR_NO_INPUT_PLUGIN
 1

	)

885 
	#XINE_ERROR_NO_DEMUX_PLUGIN
 2

	)

886 
	#XINE_ERROR_DEMUX_FAILED
 3

	)

887 
	#XINE_ERROR_MALFORMED_MRL
 4

	)

888 
	#XINE_ERROR_INPUT_FAILED
 5

	)

898 
xše_g‘_audio_Ïng
 (
xše_¡»am_t
 *
¡»am
, 
chªÃl
,

899 *
Ïng
è
XINE_PROTECTED
;

900 
xše_g‘_¥u_Ïng
 (
xše_¡»am_t
 *
¡»am
, 
chªÃl
,

901 *
Ïng
è
XINE_PROTECTED
;

902 
	#XINE_LANG_MAX
 32

	)

914 
xše_g‘_pos_Ëngth
 (
xše_¡»am_t
 *
¡»am
,

915 *
pos_¡»am
,

916 *
pos_time
,

917 *
Ëngth_time
)

918 
XINE_PROTECTED
;

927 
ušt32_t
 
xše_g‘_¡»am_šfo
 (
xše_¡»am_t
 *
¡»am
, 
šfo
è
XINE_PROTECTED
;

928 cÚ¡ *
xše_g‘_m‘a_šfo
 (
xše_¡»am_t
 *
¡»am
, 
šfo
è
XINE_PROTECTED
;

931 
	#XINE_STREAM_INFO_BITRATE
 0

	)

932 
	#XINE_STREAM_INFO_SEEKABLE
 1

	)

933 
	#XINE_STREAM_INFO_VIDEO_WIDTH
 2

	)

934 
	#XINE_STREAM_INFO_VIDEO_HEIGHT
 3

	)

935 
	#XINE_STREAM_INFO_VIDEO_RATIO
 4

	)

936 
	#XINE_STREAM_INFO_VIDEO_CHANNELS
 5

	)

937 
	#XINE_STREAM_INFO_VIDEO_STREAMS
 6

	)

938 
	#XINE_STREAM_INFO_VIDEO_BITRATE
 7

	)

939 
	#XINE_STREAM_INFO_VIDEO_FOURCC
 8

	)

940 
	#XINE_STREAM_INFO_VIDEO_HANDLED
 9

	)

941 
	#XINE_STREAM_INFO_FRAME_DURATION
 10

	)

942 
	#XINE_STREAM_INFO_AUDIO_CHANNELS
 11

	)

943 
	#XINE_STREAM_INFO_AUDIO_BITS
 12

	)

944 
	#XINE_STREAM_INFO_AUDIO_SAMPLERATE
 13

	)

945 
	#XINE_STREAM_INFO_AUDIO_BITRATE
 14

	)

946 
	#XINE_STREAM_INFO_AUDIO_FOURCC
 15

	)

947 
	#XINE_STREAM_INFO_AUDIO_HANDLED
 16

	)

948 
	#XINE_STREAM_INFO_HAS_CHAPTERS
 17

	)

949 
	#XINE_STREAM_INFO_HAS_VIDEO
 18

	)

950 
	#XINE_STREAM_INFO_HAS_AUDIO
 19

	)

951 
	#XINE_STREAM_INFO_IGNORE_VIDEO
 20

	)

952 
	#XINE_STREAM_INFO_IGNORE_AUDIO
 21

	)

953 
	#XINE_STREAM_INFO_IGNORE_SPU
 22

	)

954 
	#XINE_STREAM_INFO_VIDEO_HAS_STILL
 23

	)

955 
	#XINE_STREAM_INFO_MAX_AUDIO_CHANNEL
 24

	)

956 
	#XINE_STREAM_INFO_MAX_SPU_CHANNEL
 25

	)

957 
	#XINE_STREAM_INFO_AUDIO_MODE
 26

	)

958 
	#XINE_STREAM_INFO_SKIPPED_FRAMES
 27

	)

959 
	#XINE_STREAM_INFO_DISCARDED_FRAMES
 28

	)

960 
	#XINE_STREAM_INFO_VIDEO_AFD
 29

	)

961 
	#XINE_STREAM_INFO_DVD_TITLE_NUMBER
 30

	)

962 
	#XINE_STREAM_INFO_DVD_TITLE_COUNT
 31

	)

963 
	#XINE_STREAM_INFO_DVD_CHAPTER_NUMBER
 32

	)

964 
	#XINE_STREAM_INFO_DVD_CHAPTER_COUNT
 33

	)

965 
	#XINE_STREAM_INFO_DVD_ANGLE_NUMBER
 34

	)

966 
	#XINE_STREAM_INFO_DVD_ANGLE_COUNT
 35

	)

969 
	#XINE_VIDEO_AFD_NOT_PRESENT
 -1

	)

970 
	#XINE_VIDEO_AFD_RESERVED_0
 0

	)

971 
	#XINE_VIDEO_AFD_RESERVED_1
 1

	)

972 
	#XINE_VIDEO_AFD_BOX_16_9_TOP
 2

	)

973 
	#XINE_VIDEO_AFD_BOX_14_9_TOP
 3

	)

974 
	#XINE_VIDEO_AFD_BOX_GT_16_9_CENTRE
 4

	)

975 
	#XINE_VIDEO_AFD_RESERVED_5
 5

	)

976 
	#XINE_VIDEO_AFD_RESERVED_6
 6

	)

977 
	#XINE_VIDEO_AFD_RESERVED_7
 7

	)

978 
	#XINE_VIDEO_AFD_SAME_AS_FRAME
 8

	)

979 
	#XINE_VIDEO_AFD_4_3_CENTRE
 9

	)

980 
	#XINE_VIDEO_AFD_16_9_CENTRE
 10

	)

981 
	#XINE_VIDEO_AFD_14_9_CENTRE
 11

	)

982 
	#XINE_VIDEO_AFD_RESERVED_12
 12

	)

983 
	#XINE_VIDEO_AFD_4_3_PROTECT_14_9
 13

	)

984 
	#XINE_VIDEO_AFD_16_9_PROTECT_14_9
 14

	)

985 
	#XINE_VIDEO_AFD_16_9_PROTECT_4_3
 15

	)

988 
	#XINE_META_INFO_TITLE
 0

	)

989 
	#XINE_META_INFO_COMMENT
 1

	)

990 
	#XINE_META_INFO_ARTIST
 2

	)

991 
	#XINE_META_INFO_GENRE
 3

	)

992 
	#XINE_META_INFO_ALBUM
 4

	)

993 
	#XINE_META_INFO_YEAR
 5

	)

994 
	#XINE_META_INFO_VIDEOCODEC
 6

	)

995 
	#XINE_META_INFO_AUDIOCODEC
 7

	)

996 
	#XINE_META_INFO_SYSTEMLAYER
 8

	)

997 
	#XINE_META_INFO_INPUT_PLUGIN
 9

	)

998 
	#XINE_META_INFO_CDINDEX_DISCID
 10

	)

999 
	#XINE_META_INFO_TRACK_NUMBER
 11

	)

1000 
	#XINE_META_INFO_COMPOSER
 12

	)

1002 
	#XINE_META_INFO_PUBLISHER
 13

	)

1003 
	#XINE_META_INFO_COPYRIGHT
 14

	)

1004 
	#XINE_META_INFO_LICENSE
 15

	)

1005 
	#XINE_META_INFO_ARRANGER
 16

	)

1006 
	#XINE_META_INFO_LYRICIST
 17

	)

1007 
	#XINE_META_INFO_AUTHOR
 18

	)

1008 
	#XINE_META_INFO_CONDUCTOR
 19

	)

1009 
	#XINE_META_INFO_PERFORMER
 20

	)

1010 
	#XINE_META_INFO_ENSEMBLE
 21

	)

1011 
	#XINE_META_INFO_OPUS
 22

	)

1012 
	#XINE_META_INFO_PART
 23

	)

1013 
	#XINE_META_INFO_PARTNUMBER
 24

	)

1014 
	#XINE_META_INFO_LOCATION
 25

	)

1016 
	#XINE_META_INFO_DISCNUMBER
 26

	)

1032 *
Üigš
;

1033 *
m¾
;

1034 *
lšk
;

1035 
ušt32_t
 
ty³
;

1036 
off_t
 
size
;

1037 } 
	txše_m¾_t
;

1040 
	#XINE_MRL_TYPE_unknown
 (0 << 0)

	)

1041 
	#XINE_MRL_TYPE_dvd
 (1 << 0)

	)

1042 
	#XINE_MRL_TYPE_vcd
 (1 << 1)

	)

1043 
	#XINE_MRL_TYPE_Ãt
 (1 << 2)

	)

1044 
	#XINE_MRL_TYPE_¹p
 (1 << 3)

	)

1045 
	#XINE_MRL_TYPE_¡dš
 (1 << 4)

	)

1046 
	#XINE_MRL_TYPE_cda
 (1 << 5)

	)

1047 
	#XINE_MRL_TYPE_fe
 (1 << 6)

	)

1048 
	#XINE_MRL_TYPE_fe_fifo
 (1 << 7)

	)

1049 
	#XINE_MRL_TYPE_fe_ch¬dev
 (1 << 8)

	)

1050 
	#XINE_MRL_TYPE_fe_dœeùÜy
 (1 << 9)

	)

1051 
	#XINE_MRL_TYPE_fe_blockdev
 (1 << 10)

	)

1052 
	#XINE_MRL_TYPE_fe_nÜm®
 (1 << 11)

	)

1053 
	#XINE_MRL_TYPE_fe_symlšk
 (1 << 12)

	)

1054 
	#XINE_MRL_TYPE_fe_sock
 (1 << 13)

	)

1055 
	#XINE_MRL_TYPE_fe_exec
 (1 << 14)

	)

1056 
	#XINE_MRL_TYPE_fe_backup
 (1 << 15)

	)

1057 
	#XINE_MRL_TYPE_fe_hidd’
 (1 << 16)

	)

1060 cÚ¡ *cÚ¡ *
xše_g‘_brow§bË_šput_¶ugš_ids
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1070 
xše_m¾_t
 **
xše_g‘_brow£_m¾s
 (
xše_t
 *
£lf
,

1071 cÚ¡ *
¶ugš_id
,

1072 cÚ¡ *
¡¬t_m¾
,

1073 *
num_m¾s
è
XINE_PROTECTED
;

1076 cÚ¡ *cÚ¡ *
xše_g‘_autİÏy_šput_¶ugš_ids
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1079 **
xše_g‘_autİÏy_m¾s
 (
xše_t
 *
£lf
,

1080 cÚ¡ *
¶ugš_id
,

1081 *
num_m¾s
è
XINE_PROTECTED
;

1087 *
xše_g‘_fe_ex‹nsiÚs
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1092 *
xše_g‘_mime_ty³s
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1098 *
xše_g‘_demux_fÜ_mime_ty³
 (
xše_t
 *
£lf
, cÚ¡ *
mime_ty³
è
XINE_PROTECTED
;

1101 cÚ¡ *
xše_g‘_šput_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1102 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1103 cÚ¡ *
xše_g‘_demux_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1104 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1105 cÚ¡ *
xše_g‘_¥u_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1106 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1107 cÚ¡ *
xše_g‘_audio_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1108 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1109 cÚ¡ *
xše_g‘_video_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1110 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1111 cÚ¡ *
xše_g‘_audio_driv”_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1112 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1113 cÚ¡ *
xše_g‘_video_driv”_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1114 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1115 cÚ¡ *
xše_g‘_po¡_¶ugš_desütiÚ
 (
xše_t
 *
£lf
,

1116 cÚ¡ *
¶ugš_id
è
XINE_PROTECTED
;

1119 cÚ¡ *cÚ¡ *
xše_li¡_audio_ouut_¶ugšs
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1120 cÚ¡ *cÚ¡ *
xše_li¡_video_ouut_¶ugšs
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1122 cÚ¡ *cÚ¡ *
xše_li¡_video_ouut_¶ugšs_ty³d
 (
xše_t
 *
£lf
, 
ušt64_t
 
ty³mask
è
XINE_PROTECTED
;

1125 cÚ¡ *cÚ¡ *
xše_li¡_demux”_¶ugšs
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

1128 cÚ¡ *cÚ¡ *
xše_li¡_šput_¶ugšs
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

1131 cÚ¡ *cÚ¡ *
xše_li¡_¥u_¶ugšs
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

1134 cÚ¡ *cÚ¡ *
xše_li¡_audio_decod”_¶ugšs
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

1135 cÚ¡ *cÚ¡ *
xše_li¡_video_decod”_¶ugšs
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

1138 
xše_¶ugšs_g¬bage_cŞËùÜ
(
xše_t
 *
£lf
è
XINE_PROTECTED
;

1145 #iâdeà
XINE_DISABLE_DEPRECATED_FEATURES


1147 
xše_gui_£nd_vo_d©a
 (
xše_¡»am_t
 *
£lf
,

1148 
ty³
, *
d©a
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

1152 
xše_pÜt_£nd_gui_d©a
 (
xše_video_pÜt_t
 *
vo
,

1153 
ty³
, *
d©a
è
XINE_PROTECTED
;

1158 
x
,
y
,
w
,
h
;

1160 } 
	tx11_»ùªgË_t
;

1170 *
di¥Ïy
;

1171 
sü“n
;

1174 
d
;

1176 *
u£r_d©a
;

1197 (*
de¡_size_cb
è(*
u£r_d©a
,

1198 
video_width
, 
video_height
,

1199 
video_pix–_a¥eù
,

1200 *
de¡_width
, *
de¡_height
,

1201 *
de¡_pix–_a¥eù
);

1228 (*
äame_ouut_cb
è(*
u£r_d©a
,

1229 
video_width
, 
video_height
,

1230 
video_pix–_a¥eù
,

1231 *
de¡_x
, *
de¡_y
,

1232 *
de¡_width
, *
de¡_height
,

1233 *
de¡_pix–_a¥eù
,

1234 *
wš_x
, *
wš_y
);

1246 (*
lock_di¥Ïy
è(*
u£r_d©a
);

1258 (*
uÆock_di¥Ïy
è(*
u£r_d©a
);

1260 } 
	tx11_visu®_t
;

1270 *
cÚÃùiÚ
;

1271 *
sü“n
;

1274 
wšdow
;

1276 *
u£r_d©a
;

1297 (*
de¡_size_cb
è(*
u£r_d©a
,

1298 
video_width
, 
video_height
,

1299 
video_pix–_a¥eù
,

1300 *
de¡_width
, *
de¡_height
,

1301 *
de¡_pix–_a¥eù
);

1328 (*
äame_ouut_cb
è(*
u£r_d©a
,

1329 
video_width
, 
video_height
,

1330 
video_pix–_a¥eù
,

1331 *
de¡_x
, *
de¡_y
,

1332 *
de¡_width
, *
de¡_height
,

1333 *
de¡_pix–_a¥eù
,

1334 *
wš_x
, *
wš_y
);

1336 } 
	txcb_visu®_t
;

1342 
	#XINE_VORAW_YV12
 1

	)

1343 
	#XINE_VORAW_YUY2
 2

	)

1344 
	#XINE_VORAW_RGB
 4

	)

1347 
	#XINE_VORAW_MAX_OVL
 16

	)

1351 
ušt8_t
 *
ovl_rgba
;

1352 
ovl_w
, 
ovl_h
;

1353 
ovl_x
, 
ovl_y
;

1354 } 
	t¿w_ov”Ïy_t
;

1361 *
u£r_d©a
;

1371 
suµÜ‹d_fÜm©s
;

1388 (*
¿w_ouut_cb
è(*
u£r_d©a
, 
äame_fÜm©
,

1389 
äame_width
, 
äame_height
,

1390 
äame_a¥eù
,

1391 *
d©a0
, *
d©a1
, *
d©a2
);

1398 (*
¿w_ov”Ïy_cb
è(*
u£r_d©a
, 
num_ovl
,

1399 
¿w_ov”Ïy_t
 *
ov”Ïys_¬¿y
);

1400 } 
	t¿w_visu®_t
;

1413 (*
äame_ouut_cb
è(*
u£r_d©a
,

1414 
video_width
, 
video_height
,

1415 
video_pix–_a¥eù
,

1416 *
de¡_x
, *
de¡_y
,

1417 *
de¡_width
, *
de¡_height
,

1418 *
de¡_pix–_a¥eù
,

1419 *
wš_x
, *
wš_y
);

1421 *
u£r_d©a
;

1423 } 
	tfb_visu®_t
;

1425 #ifdeà
WIN32


1434 
HWND
 
WndHnd
;

1435 
HINSTANCE
 
HIn¡
;

1436 
RECT
 
WndReù
;

1438 
FuÎSü“n
;

1439 
HBRUSH
 
Brush
;

1440 
COLORREF
 
CŞÜKey
;

1442 } 
	twš32_visu®_t
;

1448 
	#GUI_WIN32_MOVED_OR_RESIZED
 0

	)

1456 #iâdeà
XINE_DISABLE_DEPRECATED_FEATURES


1458 
	#XINE_GUI_SEND_COMPLETION_EVENT
 1

	)

1462 
	#XINE_GUI_SEND_DRAWABLE_CHANGED
 2

	)

1465 
	#XINE_GUI_SEND_EXPOSE_EVENT
 3

	)

1468 
	#XINE_GUI_SEND_TRANSLATE_GUI_TO_VIDEO
 4

	)

1471 
	#XINE_GUI_SEND_VIDEOWIN_VISIBLE
 5

	)

1476 
	#XINE_GUI_SEND_SELECT_VISUAL
 8

	)

1479 
	#XINE_GUI_SEND_WILL_DESTROY_DRAWABLE
 9

	)

1486 
	#XINE_HEALTH_CHECK_OK
 0

	)

1487 
	#XINE_HEALTH_CHECK_FAIL
 1

	)

1488 
	#XINE_HEALTH_CHECK_UNSUPPORTED
 2

	)

1489 
	#XINE_HEALTH_CHECK_NO_SUCH_CHECK
 3

	)

1491 
	#CHECK_KERNEL
 0

	)

1492 
	#CHECK_MTRR
 1

	)

1493 
	#CHECK_CDROM
 2

	)

1494 
	#CHECK_DVDROM
 3

	)

1495 
	#CHECK_DMA
 4

	)

1496 
	#CHECK_X
 5

	)

1497 
	#CHECK_XV
 6

	)

1499 
	sxše_h—Éh_check_s
 {

1500 
¡©us
;

1501 cÚ¡ * 
cdrom_dev
;

1502 cÚ¡ * 
dvd_dev
;

1503 * 
msg
;

1504 * 
t™Ë
;

1505 * 
ex¶ª©iÚ
;

1508 
xše_h—Éh_check_s
 
	txše_h—Éh_check_t
;

1509 
xše_h—Éh_check_t
* 
xše_h—Éh_check
(xše_h—Éh_check_t*, 
check_num
è
XINE_PROTECTED
;

1520 
	#XINE_CONFIG_TYPE_UNKNOWN
 0

	)

1521 
	#XINE_CONFIG_TYPE_RANGE
 1

	)

1522 
	#XINE_CONFIG_TYPE_STRING
 2

	)

1523 
	#XINE_CONFIG_TYPE_ENUM
 3

	)

1524 
	#XINE_CONFIG_TYPE_NUM
 4

	)

1525 
	#XINE_CONFIG_TYPE_BOOL
 5

	)

1528 
	#XINE_CONFIG_STRING_IS_STRING
 0

	)

1529 
	#XINE_CONFIG_STRING_IS_FILENAME
 1

	)

1530 
	#XINE_CONFIG_STRING_IS_DEVICE_NAME
 2

	)

1531 
	#XINE_CONFIG_STRING_IS_DIRECTORY_NAME
 3

	)

1533 
xše_cfg_’Œy_s
 
	txše_cfg_’Œy_t
;

1535 (*
xše_cÚfig_cb_t
è(*
	tu£r_d©a
,

1536 
	txše_cfg_’Œy_t
 *
	t’Œy
);

1537 
	sxše_cfg_’Œy_s
 {

1538 cÚ¡ *
key
;

1540 
ty³
;

1543 *
unknown_v®ue
;

1546 *
¡r_v®ue
;

1547 *
¡r_deçuÉ
;

1548 #iâdeà
XINE_DISABLE_DEPRECATED_FEATURES


1549 *
¡r_¡icky
;

1551 *
dummy
;

1558 
num_v®ue
;

1559 
num_deçuÉ
;

1562 
¿nge_mš
;

1563 
¿nge_max
;

1566 **
’um_v®ues
;

1572 cÚ¡ *
desütiÚ
;

1573 cÚ¡ *
h–p
;

1576 
exp_Ëv–
;

1586 
xše_cÚfig_cb_t
 
ÿÎback
;

1587 *
ÿÎback_d©a
;

1591 cÚ¡ *
xše_cÚfig_»gi¡”_¡ršg
 (
xše_t
 *
£lf
,

1592 cÚ¡ *
key
,

1593 cÚ¡ *
def_v®ue
,

1594 cÚ¡ *
desütiÚ
,

1595 cÚ¡ *
h–p
,

1596 
exp_Ëv–
,

1597 
xše_cÚfig_cb_t
 
chªged_cb
,

1598 *
cb_d©a
è
XINE_PROTECTED
;

1600 cÚ¡ *
xše_cÚfig_»gi¡”_f’ame
 (
xše_t
 *
£lf
,

1601 cÚ¡ *
key
,

1602 cÚ¡ *
def_v®ue
,

1603 
»q_ty³
,

1604 cÚ¡ *
desütiÚ
,

1605 cÚ¡ *
h–p
,

1606 
exp_Ëv–
,

1607 
xše_cÚfig_cb_t
 
chªged_cb
,

1608 *
cb_d©a
è
XINE_PROTECTED
;

1610 
xše_cÚfig_»gi¡”_¿nge
 (
xše_t
 *
£lf
,

1611 cÚ¡ *
key
,

1612 
def_v®ue
,

1613 
mš
, 
max
,

1614 cÚ¡ *
desütiÚ
,

1615 cÚ¡ *
h–p
,

1616 
exp_Ëv–
,

1617 
xše_cÚfig_cb_t
 
chªged_cb
,

1618 *
cb_d©a
è
XINE_PROTECTED
;

1620 
xše_cÚfig_»gi¡”_’um
 (
xše_t
 *
£lf
,

1621 cÚ¡ *
key
,

1622 
def_v®ue
,

1623 **
v®ues
,

1624 cÚ¡ *
desütiÚ
,

1625 cÚ¡ *
h–p
,

1626 
exp_Ëv–
,

1627 
xše_cÚfig_cb_t
 
chªged_cb
,

1628 *
cb_d©a
è
XINE_PROTECTED
;

1630 
xše_cÚfig_»gi¡”_num
 (
xše_t
 *
£lf
,

1631 cÚ¡ *
key
,

1632 
def_v®ue
,

1633 cÚ¡ *
desütiÚ
,

1634 cÚ¡ *
h–p
,

1635 
exp_Ëv–
,

1636 
xše_cÚfig_cb_t
 
chªged_cb
,

1637 *
cb_d©a
è
XINE_PROTECTED
;

1639 
xše_cÚfig_»gi¡”_boŞ
 (
xše_t
 *
£lf
,

1640 cÚ¡ *
key
,

1641 
def_v®ue
,

1642 cÚ¡ *
desütiÚ
,

1643 cÚ¡ *
h–p
,

1644 
exp_Ëv–
,

1645 
xše_cÚfig_cb_t
 
chªged_cb
,

1646 *
cb_d©a
è
XINE_PROTECTED
;

1656 
xše_cÚfig_g‘_fœ¡_’Œy
 (
xše_t
 *
£lf
, 
xše_cfg_’Œy_t
 *
’Œy
è
XINE_PROTECTED
;

1659 
xše_cÚfig_g‘_Ãxt_’Œy
 (
xše_t
 *
£lf
, 
xše_cfg_’Œy_t
 *
’Œy
è
XINE_PROTECTED
;

1662 
xše_cÚfig_lookup_’Œy
 (
xše_t
 *
£lf
, cÚ¡ *
key
,

1663 
xše_cfg_’Œy_t
 *
’Œy
è
XINE_PROTECTED
;

1671 
xše_cÚfig_upd©e_’Œy
 (
xše_t
 *
£lf
,

1672 cÚ¡ 
xše_cfg_’Œy_t
 *
’Œy
è
XINE_PROTECTED
;

1678 cÚ¡ *
Şd_Çme
, *
Ãw_Çme
;

1679 } 
	txše_cÚfig_’Œy_Œª¦©iÚ_t
;

1681 
xše_cÚfig_£t_Œª¦©iÚ_u£r
 (cÚ¡ 
xše_cÚfig_’Œy_Œª¦©iÚ_t
 *è
XINE_PROTECTED
;

1686 
xše_cÚfig_lßd
 (
xše_t
 *
£lf
, cÚ¡ *
cfg_f’ame
è
XINE_PROTECTED
;

1687 
xše_cÚfig_§ve
 (
xše_t
 *
£lf
, cÚ¡ *
cfg_f’ame
è
XINE_PROTECTED
;

1688 
xše_cÚfig_»£t
 (
xše_t
 *
£lf
è
XINE_PROTECTED
;

1713 
	#XINE_EVENT_UI_PLAYBACK_FINISHED
 1

	)

1714 
	#XINE_EVENT_UI_CHANNELS_CHANGED
 2

	)

1715 
	#XINE_EVENT_UI_SET_TITLE
 3

	)

1716 
	#XINE_EVENT_UI_MESSAGE
 4

	)

1717 
	#XINE_EVENT_FRAME_FORMAT_CHANGE
 5

	)

1718 
	#XINE_EVENT_AUDIO_LEVEL
 6

	)

1719 
	#XINE_EVENT_QUIT
 7

	)

1720 
	#XINE_EVENT_PROGRESS
 8

	)

1721 
	#XINE_EVENT_MRL_REFERENCE
 9

	)

1722 
	#XINE_EVENT_UI_NUM_BUTTONS
 10

	)

1723 
	#XINE_EVENT_SPU_BUTTON
 11

	)

1724 
	#XINE_EVENT_DROPPED_FRAMES
 12

	)

1725 
	#XINE_EVENT_MRL_REFERENCE_EXT
 13

	)

1726 
	#XINE_EVENT_AUDIO_AMP_LEVEL
 14

	)

1727 
	#XINE_EVENT_NBC_STATS
 15

	)

1731 
	#XINE_EVENT_INPUT_MOUSE_BUTTON
 101

	)

1732 
	#XINE_EVENT_INPUT_MOUSE_MOVE
 102

	)

1733 
	#XINE_EVENT_INPUT_MENU1
 103

	)

1734 
	#XINE_EVENT_INPUT_MENU2
 104

	)

1735 
	#XINE_EVENT_INPUT_MENU3
 105

	)

1736 
	#XINE_EVENT_INPUT_MENU4
 106

	)

1737 
	#XINE_EVENT_INPUT_MENU5
 107

	)

1738 
	#XINE_EVENT_INPUT_MENU6
 108

	)

1739 
	#XINE_EVENT_INPUT_MENU7
 109

	)

1740 
	#XINE_EVENT_INPUT_UP
 110

	)

1741 
	#XINE_EVENT_INPUT_DOWN
 111

	)

1742 
	#XINE_EVENT_INPUT_LEFT
 112

	)

1743 
	#XINE_EVENT_INPUT_RIGHT
 113

	)

1744 
	#XINE_EVENT_INPUT_SELECT
 114

	)

1745 
	#XINE_EVENT_INPUT_NEXT
 115

	)

1746 
	#XINE_EVENT_INPUT_PREVIOUS
 116

	)

1747 
	#XINE_EVENT_INPUT_ANGLE_NEXT
 117

	)

1748 
	#XINE_EVENT_INPUT_ANGLE_PREVIOUS
 118

	)

1749 
	#XINE_EVENT_INPUT_BUTTON_FORCE
 119

	)

1750 
	#XINE_EVENT_INPUT_NUMBER_0
 120

	)

1751 
	#XINE_EVENT_INPUT_NUMBER_1
 121

	)

1752 
	#XINE_EVENT_INPUT_NUMBER_2
 122

	)

1753 
	#XINE_EVENT_INPUT_NUMBER_3
 123

	)

1754 
	#XINE_EVENT_INPUT_NUMBER_4
 124

	)

1755 
	#XINE_EVENT_INPUT_NUMBER_5
 125

	)

1756 
	#XINE_EVENT_INPUT_NUMBER_6
 126

	)

1757 
	#XINE_EVENT_INPUT_NUMBER_7
 127

	)

1758 
	#XINE_EVENT_INPUT_NUMBER_8
 128

	)

1759 
	#XINE_EVENT_INPUT_NUMBER_9
 129

	)

1760 
	#XINE_EVENT_INPUT_NUMBER_10_ADD
 130

	)

1763 
	#XINE_EVENT_SET_V4L2
 200

	)

1764 
	#XINE_EVENT_PVR_SAVE
 201

	)

1765 
	#XINE_EVENT_PVR_REPORT_NAME
 202

	)

1766 
	#XINE_EVENT_PVR_REALTIME
 203

	)

1767 
	#XINE_EVENT_PVR_PAUSE
 204

	)

1768 
	#XINE_EVENT_SET_MPEG_DATA
 205

	)

1771 
	#XINE_EVENT_VDR_RED
 300

	)

1772 
	#XINE_EVENT_VDR_GREEN
 301

	)

1773 
	#XINE_EVENT_VDR_YELLOW
 302

	)

1774 
	#XINE_EVENT_VDR_BLUE
 303

	)

1775 
	#XINE_EVENT_VDR_PLAY
 304

	)

1776 
	#XINE_EVENT_VDR_PAUSE
 305

	)

1777 
	#XINE_EVENT_VDR_STOP
 306

	)

1778 
	#XINE_EVENT_VDR_RECORD
 307

	)

1779 
	#XINE_EVENT_VDR_FASTFWD
 308

	)

1780 
	#XINE_EVENT_VDR_FASTREW
 309

	)

1781 
	#XINE_EVENT_VDR_POWER
 310

	)

1782 
	#XINE_EVENT_VDR_CHANNELPLUS
 311

	)

1783 
	#XINE_EVENT_VDR_CHANNELMINUS
 312

	)

1784 
	#XINE_EVENT_VDR_SCHEDULE
 313

	)

1785 
	#XINE_EVENT_VDR_CHANNELS
 314

	)

1786 
	#XINE_EVENT_VDR_TIMERS
 315

	)

1787 
	#XINE_EVENT_VDR_RECORDINGS
 316

	)

1788 
	#XINE_EVENT_VDR_SETUP
 317

	)

1789 
	#XINE_EVENT_VDR_COMMANDS
 318

	)

1790 
	#XINE_EVENT_VDR_BACK
 319

	)

1791 
	#XINE_EVENT_VDR_USER1
 320

	)

1792 
	#XINE_EVENT_VDR_USER2
 321

	)

1793 
	#XINE_EVENT_VDR_USER3
 322

	)

1794 
	#XINE_EVENT_VDR_USER4
 323

	)

1795 
	#XINE_EVENT_VDR_USER5
 324

	)

1796 
	#XINE_EVENT_VDR_USER6
 325

	)

1797 
	#XINE_EVENT_VDR_USER7
 326

	)

1798 
	#XINE_EVENT_VDR_USER8
 327

	)

1799 
	#XINE_EVENT_VDR_USER9
 328

	)

1800 
	#XINE_EVENT_VDR_VOLPLUS
 329

	)

1801 
	#XINE_EVENT_VDR_VOLMINUS
 330

	)

1802 
	#XINE_EVENT_VDR_MUTE
 331

	)

1803 
	#XINE_EVENT_VDR_AUDIO
 332

	)

1804 
	#XINE_EVENT_VDR_INFO
 333

	)

1805 
	#XINE_EVENT_VDR_CHANNELPREVIOUS
 334

	)

1806 
	#XINE_EVENT_VDR_SUBTITLES
 335

	)

1807 
	#XINE_EVENT_VDR_USER0
 336

	)

1809 
	#XINE_EVENT_VDR_SETVIDEOWINDOW
 350

	)

1810 
	#XINE_EVENT_VDR_FRAMESIZECHANGED
 351

	)

1811 
	#XINE_EVENT_VDR_SELECTAUDIO
 352

	)

1812 
	#XINE_EVENT_VDR_TRICKSPEEDMODE
 353

	)

1813 
	#XINE_EVENT_VDR_PLUGINSTARTED
 354

	)

1814 
	#XINE_EVENT_VDR_DISCONTINUITY
 355

	)

1817 
	#XINE_EVENT_POST_TVTIME_FILMMODE_CHANGE
 400

	)

1823 
ty³
;

1824 
xše_¡»am_t
 *
¡»am
;

1826 *
d©a
;

1827 
d©a_Ëngth
;

1830 
timev®
 
tv
;

1831 } 
	txše_ev’t_t
;

1837 
xše_ev’t_t
 
ev’t
;

1838 
ušt8_t
 
bu‰Ú
;

1839 
ušt16_t
 
x
,
y
;

1840 } 
	txše_šput_d©a_t
;

1846 
num_bu‰Ús
;

1847 
¡r_Ën
;

1848 
¡r
[256];

1849 } 
	txše_ui_d©a_t
;

1859 
xše_ui_d©a_t
 
com·tib™y
;

1862 
ty³
;

1867 
ex¶ª©iÚ
;

1870 
num_·¿m‘”s
;

1871 
·¿m‘”s
;

1879 
mes§ges
[1];

1880 } 
	txše_ui_mes§ge_d©a_t
;

1887 
width
;

1888 
height
;

1891 
a¥eù
;

1892 
·n_sÿn
;

1893 } 
	txše_fÜm©_chªge_d©a_t
;

1899 
Ëá
;

1900 
right
;

1901 
mu‹
;

1902 } 
	txše_audio_Ëv–_d©a_t
;

1908 cÚ¡ *
desütiÚ
;

1909 
³rûÁ
;

1910 } 
	txše_´og»ss_d©a_t
;

1916 
v_³rûÁ
;

1917 
št64_t
 
v_»maššg
;

1918 
št64_t
 
v_b™¿‹
;

1919 
v_š_disc
;

1920 
a_³rûÁ
;

1921 
št64_t
 
a_»maššg
;

1922 
št64_t
 
a_b™¿‹
;

1923 
a_š_disc
;

1924 
bufãršg
;

1925 
’abËd
;

1926 
ty³
;

1927 } 
	txše_nbc_¡©s_d©a_t
;

1958 
®‹º©ive
;

1959 
m¾
[1];

1960 } 
	txše_m¾_»ã»nû_d©a_t
 
	tXINE_DEPRECATED
;

1963 
®‹º©ive
;

1964 
ušt32_t
 
¡¬t_time
, 
du¿tiÚ
;

1965 
ušt32_t
 
¥¬e
[20];

1966 cÚ¡ 
m¾
[1];

1968 } 
	txše_m¾_»ã»nû_d©a_ext_t
;

1975 
šput
;

1976 
chªÃl
;

1977 
¿dio
;

1978 
ušt32_t
 
äequ’cy
;

1979 
ušt32_t
 
ŒªsmissiÚ
;

1982 
ušt32_t
 
äam”©e_num”©Ü
;

1983 
ušt32_t
 
äam”©e_d’omš©Ü
;

1984 
ušt32_t
 
äam–šes
;

1985 
ušt64_t
 
¡ªd¬d_id
;

1986 
ušt32_t
 
cŞÜ¡ªd¬d
;

1987 
ušt32_t
 
cŞÜsubÿ¼›r
;

1988 
äame_width
;

1989 
äame_height
;

1994 
ušt32_t
 
¥¬e
[20];

1997 
št32_t
 
£ssiÚ_id
;

1999 } 
	txše_£t_v4l2_d©a_t
;

2008 
b™¿‹_vbr
;

2009 
b™¿‹_m—n
;

2010 
b™¿‹_³ak
;

2011 
gİ_size
;

2012 
gİ_şosu»
;

2013 
b_äames
;

2014 
a¥eù_¿tio
;

2019 
ušt32_t
 
¥¬e
[20];

2021 } 
	txše_£t_m³g_d©a_t
;

2024 
dœeùiÚ
;

2025 
št32_t
 
bu‰Ú
;

2026 } 
	txše_¥u_bu‰Ú_t
;

2028 #ifdeà
XINE_ENABLE_EXPERIMENTAL_FEATURES


2041 
mode
;

2042 
id
;

2043 
Çme
[256];

2044 } 
	txše_pvr_§ve_d©a_t
;

2051 
mode
;

2052 } 
	txše_pvr_»®time_t
;

2059 
mode
;

2060 } 
	txše_pvr_·u£_t
;

2071 
sk³d_äames
;

2072 
sk³d_th»shŞd
;

2073 
disÿrded_äames
;

2074 
disÿrded_th»shŞd
;

2075 } 
	txše_drİ³d_äames_t
;

2089 
	#XINE_MSG_NO_ERROR
 0

	)

2090 
	#XINE_MSG_GENERAL_WARNING
 1

	)

2091 
	#XINE_MSG_UNKNOWN_HOST
 2

	)

2092 
	#XINE_MSG_UNKNOWN_DEVICE
 3

	)

2093 
	#XINE_MSG_NETWORK_UNREACHABLE
 4

	)

2094 
	#XINE_MSG_CONNECTION_REFUSED
 5

	)

2095 
	#XINE_MSG_FILE_NOT_FOUND
 6

	)

2096 
	#XINE_MSG_READ_ERROR
 7

	)

2097 
	#XINE_MSG_LIBRARY_LOAD_ERROR
 8

	)

2098 
	#XINE_MSG_ENCRYPTED_SOURCE
 9

	)

2099 
	#XINE_MSG_SECURITY
 10

	)

2100 
	#XINE_MSG_AUDIO_OUT_UNAVAILABLE
 11

	)

2101 
	#XINE_MSG_PERMISSION_ERROR
 12

	)

2102 
	#XINE_MSG_FILE_EMPTY
 13

	)

2105 
xše_ev’t_queue_s
 
	txše_ev’t_queue_t
;

2114 
xše_ev’t_queue_t
 *
xše_ev’t_Ãw_queue
 (
xše_¡»am_t
 *
¡»am
è
XINE_PROTECTED
;

2115 
xše_ev’t_di¥o£_queue
 (
xše_ev’t_queue_t
 *
queue
è
XINE_PROTECTED
;

2123 
xše_ev’t_t
 *
xše_ev’t_g‘
 (
xše_ev’t_queue_t
 *
queue
è
XINE_PROTECTED
;

2124 
xše_ev’t_t
 *
xše_ev’t_wa™
 (
xše_ev’t_queue_t
 *
queue
è
XINE_PROTECTED
;

2125 
xše_ev’t_ä“
 (
xše_ev’t_t
 *
ev’t
è
XINE_PROTECTED
;

2135 (*
xše_ev’t_li¡’”_cb_t
è(*
	tu£r_d©a
,

2136 cÚ¡ 
	txše_ev’t_t
 *
	tev’t
);

2137 
xše_ev’t_ü—‹_li¡’”_th»ad
 (
xše_ev’t_queue_t
 *
queue
,

2138 
xše_ev’t_li¡’”_cb_t
 
ÿÎback
,

2139 *
u£r_d©a
è
XINE_PROTECTED
;

2147 
xše_ev’t_£nd
 (
xše_¡»am_t
 *
¡»am
, cÚ¡ 
xše_ev’t_t
 *
ev’t
è
XINE_PROTECTED
;

2154 
	#XINE_TEXT_PALETTE_SIZE
 11

	)

2156 
	#XINE_OSD_TEXT1
 (0 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2157 
	#XINE_OSD_TEXT2
 (1 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2158 
	#XINE_OSD_TEXT3
 (2 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2159 
	#XINE_OSD_TEXT4
 (3 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2160 
	#XINE_OSD_TEXT5
 (4 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2161 
	#XINE_OSD_TEXT6
 (5 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2162 
	#XINE_OSD_TEXT7
 (6 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2163 
	#XINE_OSD_TEXT8
 (7 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2164 
	#XINE_OSD_TEXT9
 (8 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2165 
	#XINE_OSD_TEXT10
 (9 * 
XINE_TEXT_PALETTE_SIZE
)

	)

2168 
	#XINE_TEXTPALETTE_WHITE_BLACK_TRANSPARENT
 0

	)

2170 
	#XINE_TEXTPALETTE_WHITE_NONE_TRANSPARENT
 1

	)

2172 
	#XINE_TEXTPALETTE_WHITE_NONE_TRANSLUCID
 2

	)

2174 
	#XINE_TEXTPALETTE_YELLOW_BLACK_TRANSPARENT
 3

	)

2176 
	#XINE_OSD_CAP_FREETYPE2
 0x0001

	)

2177 
	#XINE_OSD_CAP_UNSCALED
 0x0002

	)

2179 
xše_osd_s
 
	txše_osd_t
;

2181 
xše_osd_t
 *
xše_osd_Ãw
 (
xše_¡»am_t
 *
£lf
, 
x
, 
y
,

2182 
width
, 
height
è
XINE_PROTECTED
;

2183 
ušt32_t
 
xše_osd_g‘_ÿ·b™›s
 (
xše_osd_t
 *
£lf
è
XINE_PROTECTED
;

2184 
xše_osd_d¿w_pošt
 (
xše_osd_t
 *
£lf
, 
x
, 
y
, 
cŞÜ
è
XINE_PROTECTED
;

2186 
xše_osd_d¿w_lše
 (
xše_osd_t
 *
£lf
, 
x1
, 
y1
,

2187 
x2
, 
y2
, 
cŞÜ
è
XINE_PROTECTED
;

2188 
xše_osd_d¿w_»ù
 (
xše_osd_t
 *
£lf
, 
x1
, 
y1
,

2189 
x2
, 
y2
,

2190 
cŞÜ
, 
fËd
 ) 
XINE_PROTECTED
;

2192 
xše_osd_d¿w_‹xt
 (
xše_osd_t
 *
£lf
, 
x1
, 
y1
,

2193 cÚ¡ *
‹xt
, 
cŞÜ_ba£
è
XINE_PROTECTED
;

2194 
xše_osd_d¿w_b™m­
 (
xše_osd_t
 *
£lf
, 
ušt8_t
 *
b™m­
,

2195 
x1
, 
y1
, 
width
, 
height
,

2196 
ušt8_t
 *
·Ë‰e_m­
è
XINE_PROTECTED
;

2199 
xše_osd_g‘_‹xt_size
 (
xše_osd_t
 *
£lf
, cÚ¡ *
‹xt
,

2200 *
width
, *
height
è
XINE_PROTECTED
;

2203 
xše_osd_£t_fÚt
 (
xše_osd_t
 *
£lf
, cÚ¡ *
fÚŠame
,

2204 
size
è
XINE_PROTECTED
;

2210 
xše_osd_£t_’codšg
(
xše_osd_t
 *
£lf
, cÚ¡ *
’codšg
è
XINE_PROTECTED
;

2212 
xše_osd_£t_pos™iÚ
 (
xše_osd_t
 *
£lf
, 
x
, 
y
è
XINE_PROTECTED
;

2213 
xše_osd_show
 (
xše_osd_t
 *
£lf
, 
št64_t
 
v±s
è
XINE_PROTECTED
;

2214 
xše_osd_show_unsÿËd
 (
xše_osd_t
 *
£lf
, 
št64_t
 
v±s
è
XINE_PROTECTED
;

2215 
xše_osd_hide
 (
xše_osd_t
 *
£lf
, 
št64_t
 
v±s
è
XINE_PROTECTED
;

2217 
xše_osd_ş—r
 (
xše_osd_t
 *
£lf
è
XINE_PROTECTED
;

2233 
xše_osd_£t_‹xt_·Ë‰e
 (
xše_osd_t
 *
£lf
,

2234 
·Ë‰e_numb”
,

2235 
cŞÜ_ba£
 ) 
XINE_PROTECTED
;

2237 
xše_osd_g‘_·Ë‰e
 (
xše_osd_t
 *
£lf
, 
ušt32_t
 *
cŞÜ
,

2238 
ušt8_t
 *
Œªs
è
XINE_PROTECTED
;

2239 
xše_osd_£t_·Ë‰e
 (
xše_osd_t
 *
£lf
,

2240 cÚ¡ 
ušt32_t
 *cÚ¡ 
cŞÜ
,

2241 cÚ¡ 
ušt8_t
 *cÚ¡ 
Œªs
 ) 
XINE_PROTECTED
;

2247 
xše_osd_ä“
 (
xše_osd_t
 *
£lf
è
XINE_PROTECTED
;

2250 #iâdeà
XINE_DISABLE_DEPRECATED_FEATURES


2260 
XINE_TVSYSTEM_PAL
 = 0,

2261 
XINE_TVSYSTEM_NTSC


2262 } 
	txše_tvsy¡em
 
	tXINE_DEPRECATED
;

2265 
xše_tvmode_š™
 (
xše_t
 *
£lf
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

2268 
xše_tvmode_u£
(
xše_t
 *
£lf
, 
u£_tvmode
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

2271 
xše_tvmode_£t_tvsy¡em
(
xše_t
 *
£lf
, 
xše_tvsy¡em
 
sy¡em
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

2280 
xše_tvmode_sw™ch
 (
xše_t
 *
£lf
, 
ty³
, 
width
, 
height
, 
ås
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

2285 
xše_tvmode_size
 (
xše_t
 *
£lf
, *
width
, *
height
,

2286 *
pix–¿tio
, *
ås
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

2289 
xše_tvmode_ex™
 (
xše_t
 *
£lf
è
XINE_PROTECTED
 
XINE_DEPRECATED
;

2293 #ifdeà
__ılu¥lus


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/dc1394/camera.h

21 
	~<dc1394/log.h
>

22 
	~<¡dio.h
>

24 #iâdeà
__DC1394_CAMERA_H__


25 
	#__DC1394_CAMERA_H__


	)

42 
	mDC1394_IIDC_VERSION_1_04
 = 544,

43 
	mDC1394_IIDC_VERSION_1_20
,

44 
	mDC1394_IIDC_VERSION_PTGREY
,

45 
	mDC1394_IIDC_VERSION_1_30
,

46 
	mDC1394_IIDC_VERSION_1_31
,

47 
	mDC1394_IIDC_VERSION_1_32
,

48 
	mDC1394_IIDC_VERSION_1_33
,

49 
	mDC1394_IIDC_VERSION_1_34
,

50 
	mDC1394_IIDC_VERSION_1_35
,

51 
	mDC1394_IIDC_VERSION_1_36
,

52 
	mDC1394_IIDC_VERSION_1_37
,

53 
	mDC1394_IIDC_VERSION_1_38
,

54 
	mDC1394_IIDC_VERSION_1_39


55 } 
	tdc1394iidc_v”siÚ_t
;

56 
	#DC1394_IIDC_VERSION_MIN
 
DC1394_IIDC_VERSION_1_04


	)

57 
	#DC1394_IIDC_VERSION_MAX
 
DC1394_IIDC_VERSION_1_39


	)

58 
	#DC1394_IIDC_VERSION_NUM
 (
DC1394_IIDC_VERSION_MAX
 - 
DC1394_IIDC_VERSION_MIN
 + 1)

	)

66 
	mDC1394_POWER_CLASS_NONE
=608,

67 
	mDC1394_POWER_CLASS_PROV_MIN_15W
,

68 
	mDC1394_POWER_CLASS_PROV_MIN_30W
,

69 
	mDC1394_POWER_CLASS_PROV_MIN_45W
,

70 
	mDC1394_POWER_CLASS_USES_MAX_1W
,

71 
	mDC1394_POWER_CLASS_USES_MAX_3W
,

72 
	mDC1394_POWER_CLASS_USES_MAX_6W
,

73 
	mDC1394_POWER_CLASS_USES_MAX_10W


74 } 
	tdc1394pow”_şass_t
;

75 
	#DC1394_POWER_CLASS_MIN
 
DC1394_POWER_CLASS_NONE


	)

76 
	#DC1394_POWER_CLASS_MAX
 
DC1394_POWER_CLASS_USES_MAX_10W


	)

77 
	#DC1394_POWER_CLASS_NUM
 (
DC1394_POWER_CLASS_MAX
 - 
DC1394_POWER_CLASS_MIN
 + 1)

	)

85 
	mDC1394_PHY_DELAY_MAX_144_NS
=640,

86 
	mDC1394_PHY_DELAY_UNKNOWN_0
,

87 
	mDC1394_PHY_DELAY_UNKNOWN_1
,

88 
	mDC1394_PHY_DELAY_UNKNOWN_2


89 } 
	tdc1394phy_d–ay_t
;

90 
	#DC1394_PHY_DELAY_MIN
 
DC1394_PHY_DELAY_MAX_144_NS


	)

91 
	#DC1394_PHY_DELAY_MAX
 
DC1394_PHY_DELAY_UNKNOWN_0


	)

92 
	#DC1394_PHY_DELAY_NUM
 (
DC1394_PHY_DELAY_MAX
 - 
DC1394_PHY_DELAY_MIN
 + 1)

	)

100 
	s__dc1394_ÿm”a


103 
ušt64_t
 
	mguid
;

104 
	mun™
;

105 
ušt32_t
 
	mun™_¥ec_ID
;

106 
ušt32_t
 
	mun™_sw_v”siÚ
;

107 
ušt32_t
 
	mun™_sub_sw_v”siÚ
;

108 
ušt32_t
 
	mcommªd_»gi¡”s_ba£
;

109 
ušt32_t
 
	mun™_dœeùÜy
;

110 
ušt32_t
 
	mun™_d•’d’t_dœeùÜy
;

111 
ušt64_t
 
	madvªûd_ã©u»s_c¤
;

112 
ušt64_t
 
	mPIO_cÚŒŞ_c¤
;

113 
ušt64_t
 
	mSIO_cÚŒŞ_c¤
;

114 
ušt64_t
 
	m¡robe_cÚŒŞ_c¤
;

115 
ušt64_t
 
	mfÜm©7_c¤
[
DC1394_VIDEO_MODE_FORMAT7_NUM
];

116 
dc1394iidc_v”siÚ_t
 
	miidc_v”siÚ
;

117 * 
	mv’dÜ
;

118 * 
	mmod–
;

119 
ušt32_t
 
	mv’dÜ_id
;

120 
ušt32_t
 
	mmod–_id
;

121 
dc1394boŞ_t
 
	mbmode_ÿ·bË
;

122 
dc1394boŞ_t
 
	mÚe_shÙ_ÿ·bË
;

123 
dc1394boŞ_t
 
	mmuÉi_shÙ_ÿ·bË
;

124 
dc1394boŞ_t
 
	mÿn_sw™ch_Ú_off
;

125 
dc1394boŞ_t
 
	mhas_vmode_”rÜ_¡©us
;

126 
dc1394boŞ_t
 
	mhas_ã©u»_”rÜ_¡©us
;

127 
	mmax_mem_chªÃl
;

130 
ušt32_t
 
	mæags
;

132 } 
	tdc1394ÿm”a_t
;

142 
ušt16_t
 
	mun™
;

143 
ušt64_t
 
	mguid
;

144 } 
	tdc1394ÿm”a_id_t
;

151 
	s__dc1394ÿm”a_li¡_t


153 
ušt32_t
 
	mnum
;

154 
dc1394ÿm”a_id_t
 *
	mids
;

155 } 
	tdc1394ÿm”a_li¡_t
;

157 
__dc1394_t
 
	tdc1394_t
;

159 #ifdeà
__ılu¥lus


170 
dc1394_t
* 
dc1394_Ãw
 ();

175 
dc1394_ä“
 (
dc1394_t
 *
dc1394
);

185 
dc1394”rÜ_t
 
dc1394_ÿm”a_£t_brßdÿ¡
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394boŞ_t
 
pwr
);

186 
dc1394”rÜ_t
 
dc1394_ÿm”a_g‘_brßdÿ¡
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394boŞ_t
 *
pwr
);

196 
dc1394”rÜ_t
 
dc1394_»£t_bus
(
dc1394ÿm”a_t
 *
ÿm”a
);

197 
dc1394”rÜ_t
 
dc1394_»ad_cyşe_tim”
 (
dc1394ÿm”a_t
 * 
ÿm”a
,

198 
ušt32_t
 * 
cyşe_tim”
, 
ušt64_t
 * 
loÿl_time
);

203 
dc1394”rÜ_t
 
dc1394_ÿm”a_g‘_node
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
node
,

204 
ušt32_t
 * 
g’”©iÚ
);

214 
dc1394”rÜ_t
 
dc1394_ÿm”a_’um”©e
(
dc1394_t
 *
dc1394
, 
dc1394ÿm”a_li¡_t
 **
li¡
);

219 
dc1394_ÿm”a_ä“_li¡
(
dc1394ÿm”a_li¡_t
 *
li¡
);

224 
dc1394ÿm”a_t
 * 
dc1394_ÿm”a_Ãw
(
dc1394_t
 *
dc1394
, 
ušt64_t
 
guid
);

229 
dc1394ÿm”a_t
 * 
dc1394_ÿm”a_Ãw_un™
(
dc1394_t
 *
dc1394
, 
ušt64_t
 
guid
, 
un™
);

234 
dc1394_ÿm”a_ä“
(
dc1394ÿm”a_t
 *
ÿm”a
);

239 
dc1394”rÜ_t
 
dc1394_ÿm”a_´št_šfo
(
dc1394ÿm”a_t
 *
ÿm”a
, 
FILE
 *
fd
);

241 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/capture.h

22 
	~<dc1394/log.h
>

23 
	~<dc1394/video.h
>

25 #iâdeà
__DC1394_CAPTURE_H__


26 
	#__DC1394_CAPTURE_H__


	)

42 
	mDC1394_CAPTURE_POLICY_WAIT
=672,

43 
	mDC1394_CAPTURE_POLICY_POLL


44 } 
	tdc1394ÿ±u»_pŞicy_t
;

45 
	#DC1394_CAPTURE_POLICY_MIN
 
DC1394_CAPTURE_POLICY_WAIT


	)

46 
	#DC1394_CAPTURE_POLICY_MAX
 
DC1394_CAPTURE_POLICY_POLL


	)

47 
	#DC1394_CAPTURE_POLICY_NUM
 (
DC1394_CAPTURE_POLICY_MAX
 - 
DC1394_CAPTURE_POLICY_MIN
 + 1)

	)

53 
	#DC1394_CAPTURE_FLAGS_CHANNEL_ALLOC
 0x00000001U

	)

54 
	#DC1394_CAPTURE_FLAGS_BANDWIDTH_ALLOC
 0x00000002U

	)

55 
	#DC1394_CAPTURE_FLAGS_DEFAULT
 0x00000004U

	)

56 
	#DC1394_CAPTURE_FLAGS_AUTO_ISO
 0x00000008U

	)

58 #ifdeà
__ılu¥lus


69 
dc1394”rÜ_t
 
dc1394_ÿ±u»_£tup
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
num_dma_bufãrs
, ušt32_ˆ
æags
);

74 
dc1394”rÜ_t
 
dc1394_ÿ±u»_¡İ
(
dc1394ÿm”a_t
 *
ÿm”a
);

79 
dc1394_ÿ±u»_g‘_f’o
 (
dc1394ÿm”a_t
 * 
ÿm”a
);

85 
dc1394”rÜ_t
 
dc1394_ÿ±u»_dequeue
(
dc1394ÿm”a_t
 * 
ÿm”a
, 
dc1394ÿ±u»_pŞicy_t
 
pŞicy
, 
dc1394video_äame_t
 **
äame
);

90 
dc1394”rÜ_t
 
dc1394_ÿ±u»_’queue
(
dc1394ÿm”a_t
 * 
ÿm”a
, 
dc1394video_äame_t
 * 
äame
);

100 
dc1394boŞ_t
 
dc1394_ÿ±u»_is_äame_cÜru±
 (
dc1394ÿm”a_t
 * 
ÿm”a
,

101 
dc1394video_äame_t
 * 
äame
);

103 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/control.h

23 
	~<dc1394/log.h
>

25 #iâdeà
__DC1394_CONTROL_H__


26 
	#__DC1394_CONTROL_H__


	)

44 
	mDC1394_TRIGGER_MODE_0
= 384,

45 
	mDC1394_TRIGGER_MODE_1
,

46 
	mDC1394_TRIGGER_MODE_2
,

47 
	mDC1394_TRIGGER_MODE_3
,

48 
	mDC1394_TRIGGER_MODE_4
,

49 
	mDC1394_TRIGGER_MODE_5
,

50 
	mDC1394_TRIGGER_MODE_14
,

51 
	mDC1394_TRIGGER_MODE_15


52 } 
	tdc1394Œigg”_mode_t
;

53 
	#DC1394_TRIGGER_MODE_MIN
 
DC1394_TRIGGER_MODE_0


	)

54 
	#DC1394_TRIGGER_MODE_MAX
 
DC1394_TRIGGER_MODE_15


	)

55 
	#DC1394_TRIGGER_MODE_NUM
 (
DC1394_TRIGGER_MODE_MAX
 - 
DC1394_TRIGGER_MODE_MIN
 + 1)

	)

61 
	mDC1394_FEATURE_BRIGHTNESS
= 416,

62 
	mDC1394_FEATURE_EXPOSURE
,

63 
	mDC1394_FEATURE_SHARPNESS
,

64 
	mDC1394_FEATURE_WHITE_BALANCE
,

65 
	mDC1394_FEATURE_HUE
,

66 
	mDC1394_FEATURE_SATURATION
,

67 
	mDC1394_FEATURE_GAMMA
,

68 
	mDC1394_FEATURE_SHUTTER
,

69 
	mDC1394_FEATURE_GAIN
,

70 
	mDC1394_FEATURE_IRIS
,

71 
	mDC1394_FEATURE_FOCUS
,

72 
	mDC1394_FEATURE_TEMPERATURE
,

73 
	mDC1394_FEATURE_TRIGGER
,

74 
	mDC1394_FEATURE_TRIGGER_DELAY
,

75 
	mDC1394_FEATURE_WHITE_SHADING
,

76 
	mDC1394_FEATURE_FRAME_RATE
,

77 
	mDC1394_FEATURE_ZOOM
,

78 
	mDC1394_FEATURE_PAN
,

79 
	mDC1394_FEATURE_TILT
,

80 
	mDC1394_FEATURE_OPTICAL_FILTER
,

81 
	mDC1394_FEATURE_CAPTURE_SIZE
,

82 
	mDC1394_FEATURE_CAPTURE_QUALITY


83 } 
	tdc1394ã©u»_t
;

84 
	#DC1394_FEATURE_MIN
 
DC1394_FEATURE_BRIGHTNESS


	)

85 
	#DC1394_FEATURE_MAX
 
DC1394_FEATURE_CAPTURE_QUALITY


	)

86 
	#DC1394_FEATURE_NUM
 (
DC1394_FEATURE_MAX
 - 
DC1394_FEATURE_MIN
 + 1)

	)

92 
	mDC1394_TRIGGER_SOURCE_0
= 576,

93 
	mDC1394_TRIGGER_SOURCE_1
,

94 
	mDC1394_TRIGGER_SOURCE_2
,

95 
	mDC1394_TRIGGER_SOURCE_3
,

96 
	mDC1394_TRIGGER_SOURCE_SOFTWARE


97 } 
	tdc1394Œigg”_sourû_t
;

98 
	#DC1394_TRIGGER_SOURCE_MIN
 
DC1394_TRIGGER_SOURCE_0


	)

99 
	#DC1394_TRIGGER_SOURCE_MAX
 
DC1394_TRIGGER_SOURCE_SOFTWARE


	)

100 
	#DC1394_TRIGGER_SOURCE_NUM
 (
DC1394_TRIGGER_SOURCE_MAX
 - 
DC1394_TRIGGER_SOURCE_MIN
 + 1)

	)

106 
	mDC1394_TRIGGER_ACTIVE_LOW
= 704,

107 
	mDC1394_TRIGGER_ACTIVE_HIGH


108 } 
	tdc1394Œigg”_pŞ¬™y_t
;

109 
	#DC1394_TRIGGER_ACTIVE_MIN
 
DC1394_TRIGGER_ACTIVE_LOW


	)

110 
	#DC1394_TRIGGER_ACTIVE_MAX
 
DC1394_TRIGGER_ACTIVE_HIGH


	)

111 
	#DC1394_TRIGGER_ACTIVE_NUM
 (
DC1394_TRIGGER_ACTIVE_MAX
 - 
DC1394_TRIGGER_ACTIVE_MIN
 + 1)

	)

117 
	mDC1394_FEATURE_MODE_MANUAL
= 736,

118 
	mDC1394_FEATURE_MODE_AUTO
,

119 
	mDC1394_FEATURE_MODE_ONE_PUSH_AUTO


120 } 
	tdc1394ã©u»_mode_t
;

121 
	#DC1394_FEATURE_MODE_MIN
 
DC1394_FEATURE_MODE_MANUAL


	)

122 
	#DC1394_FEATURE_MODE_MAX
 
DC1394_FEATURE_MODE_ONE_PUSH_AUTO


	)

123 
	#DC1394_FEATURE_MODE_NUM
 (
DC1394_FEATURE_MODE_MAX
 - 
DC1394_FEATURE_MODE_MIN
 + 1)

	)

130 
ušt32_t
 
	mnum
;

131 
dc1394ã©u»_mode_t
 
	mmodes
[
DC1394_FEATURE_MODE_NUM
];

132 } 
	tdc1394ã©u»_modes_t
;

139 
ušt32_t
 
	mnum
;

140 
dc1394Œigg”_mode_t
 
	mmodes
[
DC1394_TRIGGER_MODE_NUM
];

141 } 
	tdc1394Œigg”_modes_t
;

148 
ušt32_t
 
	mnum
;

149 
dc1394Œigg”_sourû_t
 
	msourûs
[
DC1394_TRIGGER_SOURCE_NUM
];

150 } 
	tdc1394Œigg”_sourûs_t
;

157 
	s__dc1394ã©u»_šfo_t_¡ruù


159 
dc1394ã©u»_t
 
	mid
;

160 
dc1394boŞ_t
 
	mavaabË
;

161 
dc1394boŞ_t
 
	mabsŞu‹_ÿ·bË
;

162 
dc1394boŞ_t
 
	m»adout_ÿ·bË
;

163 
dc1394boŞ_t
 
	mÚ_off_ÿ·bË
;

164 
dc1394boŞ_t
 
	mpŞ¬™y_ÿ·bË
;

165 
dc1394sw™ch_t
 
	mis_Ú
;

166 
dc1394ã©u»_mode_t
 
	mcu¼’t_mode
;

167 
dc1394ã©u»_modes_t
 
	mmodes
;

168 
dc1394Œigg”_modes_t
 
	mŒigg”_modes
;

169 
dc1394Œigg”_mode_t
 
	mŒigg”_mode
;

170 
dc1394Œigg”_pŞ¬™y_t
 
	mŒigg”_pŞ¬™y
;

171 
dc1394Œigg”_sourûs_t
 
	mŒigg”_sourûs
;

172 
dc1394Œigg”_sourû_t
 
	mŒigg”_sourû
;

173 
ušt32_t
 
	mmš
;

174 
ušt32_t
 
	mmax
;

175 
ušt32_t
 
	mv®ue
;

176 
ušt32_t
 
	mBU_v®ue
;

177 
ušt32_t
 
	mRV_v®ue
;

178 
ušt32_t
 
	mB_v®ue
;

179 
ušt32_t
 
	mR_v®ue
;

180 
ušt32_t
 
	mG_v®ue
;

181 
ušt32_t
 
	mrg‘_v®ue
;

183 
dc1394sw™ch_t
 
	mabs_cÚŒŞ
;

184 
	mabs_v®ue
;

185 
	mabs_max
;

186 
	mabs_mš
;

188 } 
	tdc1394ã©u»_šfo_t
;

193 
	s__dc1394ã©u»£t_t


195 
dc1394ã©u»_šfo_t
 
	mã©u»
[
DC1394_FEATURE_NUM
];

196 } 
	tdc1394ã©u»£t_t
;

198 #ifdeà
__ılu¥lus


209 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_®l
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»£t_t
 *
ã©u»s
);

214 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_šfo_t
 *
ã©u»
);

219 
dc1394”rÜ_t
 
dc1394_ã©u»_´št
(
dc1394ã©u»_šfo_t
 *
ã©u»
, 
FILE
 *
fd
);

224 
dc1394”rÜ_t
 
dc1394_ã©u»_´št_®l
(
dc1394ã©u»£t_t
 *
ã©u»s
, 
FILE
 *
fd
);

229 
dc1394”rÜ_t
 
dc1394_ã©u»_wh™eb®ªû_g‘_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
u_b_v®ue
, ušt32_ˆ*
v_r_v®ue
);

234 
dc1394”rÜ_t
 
dc1394_ã©u»_wh™eb®ªû_£t_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
u_b_v®ue
, ušt32_ˆ
v_r_v®ue
);

239 
dc1394”rÜ_t
 
dc1394_ã©u»_‹m³¿tu»_g‘_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
rg‘_‹m³¿tu»
, ušt32_ˆ*
‹m³¿tu»
);

244 
dc1394”rÜ_t
 
dc1394_ã©u»_‹m³¿tu»_£t_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
rg‘_‹m³¿tu»
);

249 
dc1394”rÜ_t
 
dc1394_ã©u»_wh™eshadšg_g‘_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
r_v®ue
, ušt32_ˆ*
g_v®ue
, ušt32_ˆ*
b_v®ue
);

254 
dc1394”rÜ_t
 
dc1394_ã©u»_wh™eshadšg_£t_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
r_v®ue
, ušt32_ˆ
g_v®ue
, ušt32_ˆ
b_v®ue
);

259 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
ušt32_t
 *
v®ue
);

264 
dc1394”rÜ_t
 
dc1394_ã©u»_£t_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
ušt32_t
 
v®ue
);

269 
dc1394”rÜ_t
 
dc1394_ã©u»_is_´e£Á
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394boŞ_t
 *
v®ue
);

274 
dc1394”rÜ_t
 
dc1394_ã©u»_is_»adabË
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394boŞ_t
 *
v®ue
);

279 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_bound¬›s
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
ušt32_t
 *
mš
, ušt32_ˆ*
max
);

284 
dc1394”rÜ_t
 
dc1394_ã©u»_is_sw™chabË
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394boŞ_t
 *
v®ue
);

289 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394sw™ch_t
 *
pwr
);

294 
dc1394”rÜ_t
 
dc1394_ã©u»_£t_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394sw™ch_t
 
pwr
);

299 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_modes
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394ã©u»_modes_t
 *
modes
);

304 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394ã©u»_mode_t
 *
mode
);

309 
dc1394”rÜ_t
 
dc1394_ã©u»_£t_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394ã©u»_mode_t
 
mode
);

314 
dc1394”rÜ_t
 
dc1394_ã©u»_has_absŞu‹_cÚŒŞ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394boŞ_t
 *
v®ue
);

319 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_absŞu‹_bound¬›s
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, *
mš
, *
max
);

324 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_absŞu‹_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, *
v®ue
);

329 
dc1394”rÜ_t
 
dc1394_ã©u»_£t_absŞu‹_v®ue
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
v®ue
);

334 
dc1394”rÜ_t
 
dc1394_ã©u»_g‘_absŞu‹_cÚŒŞ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394sw™ch_t
 *
pwr
);

339 
dc1394”rÜ_t
 
dc1394_ã©u»_£t_absŞu‹_cÚŒŞ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394ã©u»_t
 
ã©u»
, 
dc1394sw™ch_t
 
pwr
);

348 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_£t_pŞ¬™y
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_pŞ¬™y_t
 
pŞ¬™y
);

353 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_g‘_pŞ¬™y
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_pŞ¬™y_t
 *
pŞ¬™y
);

358 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_has_pŞ¬™y
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394boŞ_t
 *
pŞ¬™y_ÿ·bË
);

363 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_£t_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 
pwr
);

368 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_g‘_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 *
pwr
);

373 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_£t_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_mode_t
 
mode
);

378 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_g‘_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_mode_t
 *
mode
);

383 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_£t_sourû
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_sourû_t
 
sourû
);

388 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_g‘_sourû
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_sourû_t
 *
sourû
);

393 
dc1394”rÜ_t
 
dc1394_ex‹º®_Œigg”_g‘_suµÜ‹d_sourûs
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394Œigg”_sourûs_t
 *
sourûs
);

398 
dc1394”rÜ_t
 
dc1394_soáw¬e_Œigg”_£t_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 
pwr
);

403 
dc1394”rÜ_t
 
dc1394_soáw¬e_Œigg”_g‘_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 *
pwr
);

412 
dc1394”rÜ_t
 
dc1394_pio_£t
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
v®ue
);

417 
dc1394”rÜ_t
 
dc1394_pio_g‘
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
v®ue
);

426 
dc1394”rÜ_t
 
dc1394_ÿm”a_»£t
(
dc1394ÿm”a_t
 *
ÿm”a
);

431 
dc1394”rÜ_t
 
dc1394_ÿm”a_£t_pow”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 
pwr
);

436 
dc1394”rÜ_t
 
dc1394_memÜy_busy
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394boŞ_t
 *
v®ue
);

444 
dc1394”rÜ_t
 
dc1394_memÜy_§ve
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
chªÃl
);

449 
dc1394”rÜ_t
 
dc1394_memÜy_lßd
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
chªÃl
);

452 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/conversions.h

23 
	~<dc1394/log.h
>

25 #iâdeà
__DC1394_CONVERSIONS_H__


26 
	#__DC1394_CONVERSIONS_H__


	)

37 
	#»¡riù
 
__»¡riù


	)

45 
	mDC1394_BAYER_METHOD_NEAREST
=0,

46 
	mDC1394_BAYER_METHOD_SIMPLE
,

47 
	mDC1394_BAYER_METHOD_BILINEAR
,

48 
	mDC1394_BAYER_METHOD_HQLINEAR
,

49 
	mDC1394_BAYER_METHOD_DOWNSAMPLE
,

50 
	mDC1394_BAYER_METHOD_EDGESENSE
,

51 
	mDC1394_BAYER_METHOD_VNG
,

52 
	mDC1394_BAYER_METHOD_AHD


53 } 
	tdc1394bay”_m‘hod_t
;

54 
	#DC1394_BAYER_METHOD_MIN
 
DC1394_BAYER_METHOD_NEAREST


	)

55 
	#DC1394_BAYER_METHOD_MAX
 
DC1394_BAYER_METHOD_AHD


	)

56 
	#DC1394_BAYER_METHOD_NUM
 (
DC1394_BAYER_METHOD_MAX
-
DC1394_BAYER_METHOD_MIN
+1)

	)

62 
	mDC1394_STEREO_METHOD_INTERLACED
=0,

63 
	mDC1394_STEREO_METHOD_FIELD


64 } 
	tdc1394¡”eo_m‘hod_t
;

65 
	#DC1394_STEREO_METHOD_MIN
 
DC1394_STEREO_METHOD_INTERLACED


	)

66 
	#DC1394_STEREO_METHOD_MAX
 
DC1394_STEREO_METHOD_FIELD


	)

67 
	#DC1394_STEREO_METHOD_NUM
 (
DC1394_STEREO_METHOD_MAX
-
DC1394_STEREO_METHOD_MIN
+1)

	)

72 
	#YUV2RGB
(
y
, 
u
, 
v
, 
r
, 
g
, 
b
) {\

73 
r
 = 
y
 + ((
v
*1436) >> 10);\

74 
g
 = 
y
 - ((
u
*352 + 
v
*731) >> 10);\

75 
b
 = 
y
 + ((
u
*1814) >> 10);\

76 
r
 =„ < 0 ? 0 :„;\

77 
g
 = g < 0 ? 0 : g;\

78 
b
 = b < 0 ? 0 : b;\

79 
r
 =„ > 255 ? 255 :„;\

80 
g
 = g > 255 ? 255 : g;\

81 
b
 = b > 255 ? 255 : b; }

	)

84 
	#RGB2YUV
(
r
, 
g
, 
b
, 
y
, 
u
, 
v
) {\

85 
y
 = (306*
r
 + 601*
g
 + 117*
b
) >> 10;\

86 
u
 = ((-172*
r
 - 340*
g
 + 512*
b
) >> 10) + 128;\

87 
v
 = ((512*
r
 - 429*
g
 - 83*
b
) >> 10) + 128;\

88 
y
 = y < 0 ? 0 : y;\

89 
u
 = u < 0 ? 0 : u;\

90 
v
 = v < 0 ? 0 : v;\

91 
y
 = y > 255 ? 255 : y;\

92 
u
 = u > 255 ? 255 : u;\

93 
v
 = v > 255 ? 255 : v; }

	)

95 #ifdeà
__ılu¥lus


106 
dc1394”rÜ_t


107 
dc1394_cÚv”t_to_YUV422
(
ušt8_t
 *
¤c
, ušt8_ˆ*
de¡
, 
ušt32_t
 
width
, ušt32_ˆ
height
, ušt32_ˆ
by‹_Üd”
,

108 
dc1394cŞÜ_codšg_t
 
sourû_codšg
, 
ušt32_t
 
b™s
);

113 
dc1394”rÜ_t


114 
dc1394_cÚv”t_to_MONO8
(
ušt8_t
 *
¤c
, ušt8_ˆ*
de¡
, 
ušt32_t
 
width
, ušt32_ˆ
height
, ušt32_ˆ
by‹_Üd”
,

115 
dc1394cŞÜ_codšg_t
 
sourû_codšg
, 
ušt32_t
 
b™s
);

120 
dc1394”rÜ_t


121 
dc1394_cÚv”t_to_RGB8
(
ušt8_t
 *
¤c
, ušt8_ˆ*
de¡
, 
ušt32_t
 
width
, ušt32_ˆ
height
, ušt32_ˆ
by‹_Üd”
,

122 
dc1394cŞÜ_codšg_t
 
sourû_codšg
, 
ušt32_t
 
b™s
);

131 
dc1394”rÜ_t


132 
dc1394_deš‹¾aû_¡”eo
(
ušt8_t
 *
¤c
, ušt8_ˆ*
de¡
, 
ušt32_t
 
width
, ušt32_ˆ
height
);

167 
dc1394”rÜ_t


168 
dc1394_bay”_decodšg_8b™
(cÚ¡ 
ušt8_t
 *
bay”
, ušt8_ˆ*
rgb
,

169 
ušt32_t
 
width
, ušt32_ˆ
height
, 
dc1394cŞÜ_f‹r_t
 
te
,

170 
dc1394bay”_m‘hod_t
 
m‘hod
);

175 
dc1394”rÜ_t


176 
dc1394_bay”_decodšg_16b™
(cÚ¡ 
ušt16_t
 *
bay”
, ušt16_ˆ*
rgb
,

177 
ušt32_t
 
width
, ušt32_ˆ
height
, 
dc1394cŞÜ_f‹r_t
 
te
,

178 
dc1394bay”_m‘hod_t
 
m‘hod
, 
ušt32_t
 
b™s
);

190 
dc1394”rÜ_t


191 
dc1394_cÚv”t_äames
(
dc1394video_äame_t
 *
š
, dc1394video_äame_ˆ*
out
);

203 
dc1394”rÜ_t


204 
dc1394_debay”_äames
(
dc1394video_äame_t
 *
š
, dc1394video_äame_ˆ*
out
, 
dc1394bay”_m‘hod_t
 
m‘hod
);

211 
dc1394”rÜ_t


212 
dc1394_deš‹¾aû_¡”eo_äames
(
dc1394video_äame_t
 *
š
, dc1394video_äame_ˆ*
out
, 
dc1394¡”eo_m‘hod_t
 
m‘hod
);

214 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/format7.h

23 
	~<dc1394/log.h
>

24 
	~<dc1394/video.h
>

26 #iâdeà
__DC1394_FORMAT7_H__


27 
	#__DC1394_FORMAT7_H__


	)

38 
	s__dc1394fÜm©7mode_t


40 
dc1394boŞ_t
 
	m´e£Á
;

42 
ušt32_t
 
	msize_x
;

43 
ušt32_t
 
	msize_y
;

44 
ušt32_t
 
	mmax_size_x
;

45 
ušt32_t
 
	mmax_size_y
;

47 
ušt32_t
 
	mpos_x
;

48 
ušt32_t
 
	mpos_y
;

50 
ušt32_t
 
	mun™_size_x
;

51 
ušt32_t
 
	mun™_size_y
;

52 
ušt32_t
 
	mun™_pos_x
;

53 
ušt32_t
 
	mun™_pos_y
;

55 
dc1394cŞÜ_codšgs_t
 
	mcŞÜ_codšgs
;

56 
dc1394cŞÜ_codšg_t
 
	mcŞÜ_codšg
;

58 
ušt32_t
 
	mpixnum
;

60 
ušt32_t
 
	m·ck‘_size
;

61 
ušt32_t
 
	mun™_·ck‘_size
;

62 
ušt32_t
 
	mmax_·ck‘_size
;

64 
ušt64_t
 
	mtÙ®_by‹s
;

66 
dc1394cŞÜ_f‹r_t
 
	mcŞÜ_f‹r
;

68 } 
	tdc1394fÜm©7mode_t
;

74 
	s__dc1394fÜm©7mode£t_t


76 
dc1394fÜm©7mode_t
 
	mmode
[
DC1394_VIDEO_MODE_FORMAT7_NUM
];

77 } 
	tdc1394fÜm©7mode£t_t
;

80 
	#DC1394_QUERY_FROM_CAMERA
 -1

	)

81 
	#DC1394_USE_MAX_AVAIL
 -2

	)

82 
	#DC1394_USE_RECOMMENDED
 -3

	)

84 #ifdeà
__ılu¥lus


97 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_max_image_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
h_size
,ušt32_ˆ*
v_size
);

102 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_un™_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
h_un™
, ušt32_ˆ*
v_un™
);

107 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_image_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
width
, ušt32_ˆ*
height
);

112 
dc1394”rÜ_t
 
dc1394_fÜm©7_£t_image_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 
width
, ušt32_ˆ
height
);

119 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_image_pos™iÚ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
Ëá
, ušt32_ˆ*
tİ
);

124 
dc1394”rÜ_t
 
dc1394_fÜm©7_£t_image_pos™iÚ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 
Ëá
, ušt32_ˆ
tİ
);

129 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_un™_pos™iÚ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
h_un™_pos
, ušt32_ˆ*
v_un™_pos
);

136 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_cŞÜ_codšg
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_codšg_t
 *
cŞÜ_codšg
);

141 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_cŞÜ_codšgs
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_codšgs_t
 *
codšgs
);

146 
dc1394”rÜ_t
 
dc1394_fÜm©7_£t_cŞÜ_codšg
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_codšg_t
 
cŞÜ_codšg
);

151 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_cŞÜ_f‹r
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_f‹r_t
 *
cŞÜ_f‹r
);

158 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_·ck‘_·¿m‘”s
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
un™_by‹s
, ušt32_ˆ*
max_by‹s
);

163 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_·ck‘_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
·ck‘_size
);

168 
dc1394”rÜ_t
 
dc1394_fÜm©7_£t_·ck‘_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 
·ck‘_size
);

173 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_»comm’ded_·ck‘_size
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
·ck‘_size
);

178 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_·ck‘s_³r_äame
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
µf
);

185 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_d©a_d•th
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
d©a_d•th
);

190 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_äame_š‹rv®
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, *
š‹rv®
);

195 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_pix–_numb”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt32_t
 *
pixnum
);

200 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_tÙ®_by‹s
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
ušt64_t
 *
tÙ®_by‹s
);

207 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_mode£t
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394fÜm©7mode£t_t
 *
šfo
);

212 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_mode_šfo
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394fÜm©7mode_t
 *
f7_mode
);

218 
dc1394”rÜ_t
 
dc1394_fÜm©7_£t_roi
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_codšg_t
 
cŞÜ_codšg
,

219 
št32_t
 
·ck‘_size
, iÁ32_ˆ
Ëá
, iÁ32_ˆ
tİ
, iÁ32_ˆ
width
, iÁ32_ˆ
height
);

224 
dc1394”rÜ_t
 
dc1394_fÜm©7_g‘_roi
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_codšg_t
 *
cŞÜ_codšg
,

225 
ušt32_t
 *
·ck‘_size
, ušt32_ˆ*
Ëá
, ušt32_ˆ*
tİ
, ušt32_ˆ*
width
, ušt32_ˆ*
height
);

227 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/iso.h

23 #iâdeà
__DC1394_ISO_H__


24 
	#__DC1394_ISO_H__


	)

34 
	~<dc1394/log.h
>

36 #ifdeà
__ılu¥lus


56 
dc1394”rÜ_t
 
dc1394_iso_£t_³rsi¡
 (
dc1394ÿm”a_t
 * 
ÿm”a
);

83 
dc1394”rÜ_t
 
dc1394_iso_®loÿ‹_chªÃl
 (
dc1394ÿm”a_t
 * 
ÿm”a
,

84 
ušt64_t
 
chªÃls_®lowed
, * 
chªÃl
);

100 
dc1394”rÜ_t
 
dc1394_iso_»Ëa£_chªÃl
 (
dc1394ÿm”a_t
 * 
ÿm”a
,

101 
chªÃl
);

122 
dc1394”rÜ_t
 
dc1394_iso_®loÿ‹_bªdwidth
 (
dc1394ÿm”a_t
 * 
ÿm”a
,

123 
bªdwidth_un™s
);

144 
dc1394”rÜ_t
 
dc1394_iso_»Ëa£_bªdwidth
 (
dc1394ÿm”a_t
 * 
ÿm”a
,

145 
bªdwidth_un™s
);

161 
dc1394”rÜ_t
 
dc1394_iso_»Ëa£_®l
 (
dc1394ÿm”a_t
 * 
ÿm”a
);

163 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/log.h

45 
	~<dc1394/dc1394.h
>

47 #iâdeà
__DC1394_LOG_H__


48 
	#__DC1394_LOG_H__


	)

65 
	mDC1394_SUCCESS
 = 0,

66 
	mDC1394_FAILURE
 = -1,

67 
	mDC1394_NOT_A_CAMERA
 = -2,

68 
	mDC1394_FUNCTION_NOT_SUPPORTED
 = -3,

69 
	mDC1394_CAMERA_NOT_INITIALIZED
 = -4,

70 
	mDC1394_MEMORY_ALLOCATION_FAILURE
 = -5,

71 
	mDC1394_TAGGED_REGISTER_NOT_FOUND
 = -6,

72 
	mDC1394_NO_ISO_CHANNEL
 = -7,

73 
	mDC1394_NO_BANDWIDTH
 = -8,

74 
	mDC1394_IOCTL_FAILURE
 = -9,

75 
	mDC1394_CAPTURE_IS_NOT_SET
 = -10,

76 
	mDC1394_CAPTURE_IS_RUNNING
 = -11,

77 
	mDC1394_RAW1394_FAILURE
 = -12,

78 
	mDC1394_FORMAT7_ERROR_FLAG_1
 = -13,

79 
	mDC1394_FORMAT7_ERROR_FLAG_2
 = -14,

80 
	mDC1394_INVALID_ARGUMENT_VALUE
 = -15,

81 
	mDC1394_REQ_VALUE_OUTSIDE_RANGE
 = -16,

82 
	mDC1394_INVALID_FEATURE
 = -17,

83 
	mDC1394_INVALID_VIDEO_FORMAT
 = -18,

84 
	mDC1394_INVALID_VIDEO_MODE
 = -19,

85 
	mDC1394_INVALID_FRAMERATE
 = -20,

86 
	mDC1394_INVALID_TRIGGER_MODE
 = -21,

87 
	mDC1394_INVALID_TRIGGER_SOURCE
 = -22,

88 
	mDC1394_INVALID_ISO_SPEED
 = -23,

89 
	mDC1394_INVALID_IIDC_VERSION
 = -24,

90 
	mDC1394_INVALID_COLOR_CODING
 = -25,

91 
	mDC1394_INVALID_COLOR_FILTER
 = -26,

92 
	mDC1394_INVALID_CAPTURE_POLICY
 = -27,

93 
	mDC1394_INVALID_ERROR_CODE
 = -28,

94 
	mDC1394_INVALID_BAYER_METHOD
 = -29,

95 
	mDC1394_INVALID_VIDEO1394_DEVICE
 = -30,

96 
	mDC1394_INVALID_OPERATION_MODE
 = -31,

97 
	mDC1394_INVALID_TRIGGER_POLARITY
 = -32,

98 
	mDC1394_INVALID_FEATURE_MODE
 = -33,

99 
	mDC1394_INVALID_LOG_TYPE
 = -34,

100 
	mDC1394_INVALID_BYTE_ORDER
 = -35,

101 
	mDC1394_INVALID_STEREO_METHOD
 = -36,

102 
	mDC1394_BASLER_NO_MORE_SFF_CHUNKS
 = -37,

103 
	mDC1394_BASLER_CORRUPTED_SFF_CHUNK
 = -38,

104 
	mDC1394_BASLER_UNKNOWN_SFF_CHUNK
 = -39

105 } 
	tdc1394”rÜ_t
;

106 
	#DC1394_ERROR_MIN
 
DC1394_BASLER_UNKNOWN_SFF_CHUNK


	)

107 
	#DC1394_ERROR_MAX
 
DC1394_SUCCESS


	)

108 
	#DC1394_ERROR_NUM
 (
DC1394_ERROR_MAX
-
DC1394_ERROR_MIN
+1)

	)

119 
	mDC1394_LOG_ERROR
=768,

120 
	mDC1394_LOG_WARNING
,

121 
	mDC1394_LOG_DEBUG


122 } 
	tdc1394log_t
;

123 
	#DC1394_LOG_MIN
 
DC1394_LOG_ERROR


	)

124 
	#DC1394_LOG_MAX
 
DC1394_LOG_DEBUG


	)

125 
	#DC1394_LOG_NUM
 (
DC1394_LOG_MAX
 - 
DC1394_LOG_MIN
 + 1)

	)

127 #ià! 
defšed
 (
_MSC_VER
)

132 
	#DC1394_WRN
(
”r
,
mes§ge
) \

134 ià((
”r
>0)||Ó¼<=-
DC1394_ERROR_NUM
)) \

135 
”r
=
DC1394_INVALID_ERROR_CODE
; \

137 ià(
”r
!=
DC1394_SUCCESS
) { \

138 
	`dc1394_log_w¬nšg
("%s: in %s (%s,†ine %d): %s\n", \

139 
	`dc1394_”rÜ_g‘_¡ršg
(
”r
), \

140 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, 
mes§ge
); \

142 } 0);

	)

144 
	#DC1394_ERR
(
”r
,
mes§ge
) \

146 ià((
”r
>0)||Ó¼<=-
DC1394_ERROR_NUM
)) \

147 
”r
=
DC1394_INVALID_ERROR_CODE
; \

149 ià(
”r
!=
DC1394_SUCCESS
) { \

150 
	`dc1394_log_”rÜ
("%s: in %s (%s,†ine %d): %s\n", \

151 
	`dc1394_”rÜ_g‘_¡ršg
(
”r
), \

152 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, 
mes§ge
); \

155 } 0);

	)

157 
	#DC1394_ERR_RTN
(
”r
,
mes§ge
) \

159 ià((
”r
>0)||Ó¼<=-
DC1394_ERROR_NUM
)) \

160 
”r
=
DC1394_INVALID_ERROR_CODE
; \

162 ià(
”r
!=
DC1394_SUCCESS
) { \

163 
	`dc1394_log_”rÜ
("%s: in %s (%s,†ine %d): %s\n", \

164 
	`dc1394_”rÜ_g‘_¡ršg
(
”r
), \

165 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, 
mes§ge
); \

166  
”r
; \

168 } 0);

	)

170 
	#DC1394_ERR_CLN
(
”r
,
ş—nup
,
mes§ge
) \

172 ià((
”r
>0)||Ó¼<=-
DC1394_ERROR_NUM
)) \

173 
”r
=
DC1394_INVALID_ERROR_CODE
; \

175 ià(
”r
!=
DC1394_SUCCESS
) { \

176 
	`dc1394_log_”rÜ
("%s: in %s (%s,†ine %d): %s\n", \

177 
	`dc1394_”rÜ_g‘_¡ršg
(
”r
), \

178 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, 
mes§ge
); \

179 
ş—nup
; \

182 } 0);

	)

184 
	#DC1394_ERR_CLN_RTN
(
”r
,
ş—nup
,
mes§ge
) \

186 ià((
”r
>0)||Ó¼<=-
DC1394_ERROR_NUM
)) \

187 
”r
=
DC1394_INVALID_ERROR_CODE
; \

189 ià(
”r
!=
DC1394_SUCCESS
) { \

190 
	`dc1394_log_”rÜ
("%s: in %s (%s,†ine %d): %s\n", \

191 
	`dc1394_”rÜ_g‘_¡ršg
(
”r
), \

192 
__FUNCTION__
, 
__FILE__
, 
__LINE__
, 
mes§ge
); \

193 
ş—nup
; \

194  
”r
; \

196 } 0);

	)

201 #ifdeà
__ılu¥lus


213 
dc1394”rÜ_t
 
dc1394_log_»gi¡”_hªdËr
(
dc1394log_t
 
ty³
, (*
log_hªdËr
)(dc1394log_type,

214 cÚ¡ *
mes§ge
, * 
u£r
), * user);

221 
dc1394”rÜ_t
 
dc1394_log_£t_deçuÉ_hªdËr
(
dc1394log_t
 
ty³
);

230 
dc1394_log_”rÜ
(cÚ¡ *
fÜm©
,...);

239 
dc1394_log_w¬nšg
(cÚ¡ *
fÜm©
,...);

249 
dc1394_log_debug
(cÚ¡ *
fÜm©
,...);

251 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/register.h

23 #iâdeà
__DC1394_REGISTER_H__


24 
	#__DC1394_REGISTER_H__


	)

34 #ifdeà
__ılu¥lus


41 
dc1394”rÜ_t
 
dc1394_g‘_»gi¡”s
 (
dc1394ÿm”a_t
 *
ÿm”a
,

42 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
, ušt32_ˆ
num_»gs
);

47 
šlše
 
dc1394”rÜ_t
 
dc1394_g‘_»gi¡”
 (
dc1394ÿm”a_t
 *
ÿm”a
,

48 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
)

50  
dc1394_g‘_»gi¡”s
 (
ÿm”a
, 
off£t
, 
v®ue
, 1);

56 
dc1394”rÜ_t
 
dc1394_£t_»gi¡”s
 (
dc1394ÿm”a_t
 *
ÿm”a
,

57 
ušt64_t
 
off£t
, cÚ¡ 
ušt32_t
 *
v®ue
, ušt32_ˆ
num_»gs
);

62 
šlše
 
dc1394”rÜ_t
 
dc1394_£t_»gi¡”
 (
dc1394ÿm”a_t
 *
ÿm”a
,

63 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
)

65  
dc1394_£t_»gi¡”s
 (
ÿm”a
, 
off£t
, &
v®ue
, 1);

76 
dc1394”rÜ_t
 
dc1394_g‘_cÚŒŞ_»gi¡”s
 (
dc1394ÿm”a_t
 *
ÿm”a
,

77 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
, ušt32_ˆ
num_»gs
);

82 
šlše
 
dc1394”rÜ_t
 
dc1394_g‘_cÚŒŞ_»gi¡”
 (
dc1394ÿm”a_t
 *
ÿm”a
,

83 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
)

85  
dc1394_g‘_cÚŒŞ_»gi¡”s
 (
ÿm”a
, 
off£t
, 
v®ue
, 1);

91 
dc1394”rÜ_t
 
dc1394_£t_cÚŒŞ_»gi¡”s
 (
dc1394ÿm”a_t
 *
ÿm”a
,

92 
ušt64_t
 
off£t
, cÚ¡ 
ušt32_t
 *
v®ue
, ušt32_ˆ
num_»gs
);

97 
šlše
 
dc1394”rÜ_t
 
dc1394_£t_cÚŒŞ_»gi¡”
 (
dc1394ÿm”a_t
 *
ÿm”a
,

98 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
)

100  
dc1394_£t_cÚŒŞ_»gi¡”s
 (
ÿm”a
, 
off£t
, &
v®ue
, 1);

111 
dc1394”rÜ_t


112 
dc1394_g‘_adv_cÚŒŞ_»gi¡”s
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
, ušt32_ˆ
num_»gs
);

117 
šlše
 
dc1394”rÜ_t


118 
dc1394_g‘_adv_cÚŒŞ_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
)

120  
dc1394_g‘_adv_cÚŒŞ_»gi¡”s
(
ÿm”a
, 
off£t
, 
v®ue
, 1);

126 
dc1394”rÜ_t


127 
dc1394_£t_adv_cÚŒŞ_»gi¡”s
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
,

128 cÚ¡ 
ušt32_t
 *
v®ue
, ušt32_ˆ
num_»gs
);

133 
šlše
 
dc1394”rÜ_t


134 
dc1394_£t_adv_cÚŒŞ_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
)

136  
dc1394_£t_adv_cÚŒŞ_»gi¡”s
(
ÿm”a
, 
off£t
, &
v®ue
, 1);

147 
dc1394”rÜ_t


148 
dc1394_g‘_fÜm©7_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
mode
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
);

153 
dc1394”rÜ_t


154 
dc1394_£t_fÜm©7_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
mode
, 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
);

164 
dc1394”rÜ_t


165 
dc1394_g‘_absŞu‹_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ã©u»
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
);

170 
dc1394”rÜ_t


171 
dc1394_£t_absŞu‹_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ã©u»
, 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
);

181 
dc1394”rÜ_t


182 
dc1394_g‘_PIO_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
);

187 
dc1394”rÜ_t


188 
dc1394_£t_PIO_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
);

198 
dc1394”rÜ_t


199 
dc1394_g‘_SIO_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
);

204 
dc1394”rÜ_t


205 
dc1394_£t_SIO_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
);

215 
dc1394”rÜ_t


216 
dc1394_g‘_¡robe_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 *
v®ue
);

221 
dc1394”rÜ_t


222 
dc1394_£t_¡robe_»gi¡”
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt64_t
 
off£t
, 
ušt32_t
 
v®ue
);

225 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/types.h

23 #iâdeà
__DC1394_TYPES_H__


24 
	#__DC1394_TYPES_H__


	)

32 
	~<¡dšt.h
>

38 
	mDC1394_VIDEO_MODE_160x120_YUV444
= 64,

39 
	mDC1394_VIDEO_MODE_320x240_YUV422
,

40 
	mDC1394_VIDEO_MODE_640x480_YUV411
,

41 
	mDC1394_VIDEO_MODE_640x480_YUV422
,

42 
	mDC1394_VIDEO_MODE_640x480_RGB8
,

43 
	mDC1394_VIDEO_MODE_640x480_MONO8
,

44 
	mDC1394_VIDEO_MODE_640x480_MONO16
,

45 
	mDC1394_VIDEO_MODE_800x600_YUV422
,

46 
	mDC1394_VIDEO_MODE_800x600_RGB8
,

47 
	mDC1394_VIDEO_MODE_800x600_MONO8
,

48 
	mDC1394_VIDEO_MODE_1024x768_YUV422
,

49 
	mDC1394_VIDEO_MODE_1024x768_RGB8
,

50 
	mDC1394_VIDEO_MODE_1024x768_MONO8
,

51 
	mDC1394_VIDEO_MODE_800x600_MONO16
,

52 
	mDC1394_VIDEO_MODE_1024x768_MONO16
,

53 
	mDC1394_VIDEO_MODE_1280x960_YUV422
,

54 
	mDC1394_VIDEO_MODE_1280x960_RGB8
,

55 
	mDC1394_VIDEO_MODE_1280x960_MONO8
,

56 
	mDC1394_VIDEO_MODE_1600x1200_YUV422
,

57 
	mDC1394_VIDEO_MODE_1600x1200_RGB8
,

58 
	mDC1394_VIDEO_MODE_1600x1200_MONO8
,

59 
	mDC1394_VIDEO_MODE_1280x960_MONO16
,

60 
	mDC1394_VIDEO_MODE_1600x1200_MONO16
,

61 
	mDC1394_VIDEO_MODE_EXIF
,

62 
	mDC1394_VIDEO_MODE_FORMAT7_0
,

63 
	mDC1394_VIDEO_MODE_FORMAT7_1
,

64 
	mDC1394_VIDEO_MODE_FORMAT7_2
,

65 
	mDC1394_VIDEO_MODE_FORMAT7_3
,

66 
	mDC1394_VIDEO_MODE_FORMAT7_4
,

67 
	mDC1394_VIDEO_MODE_FORMAT7_5
,

68 
	mDC1394_VIDEO_MODE_FORMAT7_6
,

69 
	mDC1394_VIDEO_MODE_FORMAT7_7


70 } 
	tdc1394video_mode_t
;

71 
	#DC1394_VIDEO_MODE_MIN
 
DC1394_VIDEO_MODE_160x120_YUV444


	)

72 
	#DC1394_VIDEO_MODE_MAX
 
DC1394_VIDEO_MODE_FORMAT7_7


	)

73 
	#DC1394_VIDEO_MODE_NUM
 (
DC1394_VIDEO_MODE_MAX
 - 
DC1394_VIDEO_MODE_MIN
 + 1)

	)

76 
	#DC1394_VIDEO_MODE_FORMAT7_MIN
 
DC1394_VIDEO_MODE_FORMAT7_0


	)

77 
	#DC1394_VIDEO_MODE_FORMAT7_MAX
 
DC1394_VIDEO_MODE_FORMAT7_7


	)

78 
	#DC1394_VIDEO_MODE_FORMAT7_NUM
 (
DC1394_VIDEO_MODE_FORMAT7_MAX
 - 
DC1394_VIDEO_MODE_FORMAT7_MIN
 + 1)

	)

84 
	mDC1394_COLOR_CODING_MONO8
= 352,

85 
	mDC1394_COLOR_CODING_YUV411
,

86 
	mDC1394_COLOR_CODING_YUV422
,

87 
	mDC1394_COLOR_CODING_YUV444
,

88 
	mDC1394_COLOR_CODING_RGB8
,

89 
	mDC1394_COLOR_CODING_MONO16
,

90 
	mDC1394_COLOR_CODING_RGB16
,

91 
	mDC1394_COLOR_CODING_MONO16S
,

92 
	mDC1394_COLOR_CODING_RGB16S
,

93 
	mDC1394_COLOR_CODING_RAW8
,

94 
	mDC1394_COLOR_CODING_RAW16


95 } 
	tdc1394cŞÜ_codšg_t
;

96 
	#DC1394_COLOR_CODING_MIN
 
DC1394_COLOR_CODING_MONO8


	)

97 
	#DC1394_COLOR_CODING_MAX
 
DC1394_COLOR_CODING_RAW16


	)

98 
	#DC1394_COLOR_CODING_NUM
 (
DC1394_COLOR_CODING_MAX
 - 
DC1394_COLOR_CODING_MIN
 + 1)

	)

109 
	mDC1394_COLOR_FILTER_RGGB
 = 512,

110 
	mDC1394_COLOR_FILTER_GBRG
,

111 
	mDC1394_COLOR_FILTER_GRBG
,

112 
	mDC1394_COLOR_FILTER_BGGR


113 } 
	tdc1394cŞÜ_f‹r_t
;

114 
	#DC1394_COLOR_FILTER_MIN
 
DC1394_COLOR_FILTER_RGGB


	)

115 
	#DC1394_COLOR_FILTER_MAX
 
DC1394_COLOR_FILTER_BGGR


	)

116 
	#DC1394_COLOR_FILTER_NUM
 (
DC1394_COLOR_FILTER_MAX
 - 
DC1394_COLOR_FILTER_MIN
 + 1)

	)

124 
	mDC1394_BYTE_ORDER_UYVY
=800,

125 
	mDC1394_BYTE_ORDER_YUYV


126 } 
	tdc1394by‹_Üd”_t
;

127 
	#DC1394_BYTE_ORDER_MIN
 
DC1394_BYTE_ORDER_UYVY


	)

128 
	#DC1394_BYTE_ORDER_MAX
 
DC1394_BYTE_ORDER_YUYV


	)

129 
	#DC1394_BYTE_ORDER_NUM
 (
DC1394_BYTE_ORDER_MAX
 - 
DC1394_BYTE_ORDER_MIN
 + 1)

	)

136 
ušt32_t
 
	mnum
;

137 
dc1394cŞÜ_codšg_t
 
	mcodšgs
[
DC1394_COLOR_CODING_NUM
];

138 } 
	tdc1394cŞÜ_codšgs_t
;

145 
ušt32_t
 
	mnum
;

146 
dc1394video_mode_t
 
	mmodes
[
DC1394_VIDEO_MODE_NUM
];

147 } 
	tdc1394video_modes_t
;

153 
	mDC1394_FALSE
= 0,

154 
	mDC1394_TRUE


155 } 
	tdc1394boŞ_t
;

161 
	mDC1394_OFF
= 0,

162 
	mDC1394_ON


163 } 
	tdc1394sw™ch_t
;

	@/usr/include/dc1394/utils.h

23 #iâdeà
__DC1394_UTILS_H__


24 
	#__DC1394_UTILS_H__


	)

34 #ifdeà
__ılu¥lus


41 
dc1394”rÜ_t
 
dc1394_g‘_image_size_äom_video_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
video_mode
, ušt32_ˆ*
width
, ušt32_ˆ*
height
);

46 
dc1394”rÜ_t
 
dc1394_äam”©e_as_æßt
(
dc1394äam”©e_t
 
äam”©e_’um
, *
äam”©e
);

52 
dc1394”rÜ_t
 
dc1394_g‘_cŞÜ_codšg_d©a_d•th
(
dc1394cŞÜ_codšg_t
 
cŞÜ_codšg
, 
ušt32_t
 * 
b™s
);

58 
dc1394”rÜ_t
 
dc1394_g‘_cŞÜ_codšg_b™_size
(
dc1394cŞÜ_codšg_t
 
cŞÜ_codšg
, 
ušt32_t
* 
b™s
);

63 
dc1394”rÜ_t
 
dc1394_g‘_cŞÜ_codšg_äom_video_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394cŞÜ_codšg_t
 *
cŞÜ_codšg
);

68 
dc1394”rÜ_t
 
dc1394_is_cŞÜ
(
dc1394cŞÜ_codšg_t
 
cŞÜ_mode
, 
dc1394boŞ_t
 *
is_cŞÜ
);

73 
dc1394boŞ_t
 
dc1394_is_video_mode_sÿÏbË
(
dc1394video_mode_t
 
video_mode
);

78 
dc1394boŞ_t
 
dc1394_is_video_mode_¡l_image
(
dc1394video_mode_t
 
video_mode
);

83 
dc1394boŞ_t
 
dc1394_is_§me_ÿm”a
(
dc1394ÿm”a_id_t
 
id1
, dc1394ÿm”a_id_ˆ
id2
);

88 cÚ¡ * 
dc1394_ã©u»_g‘_¡ršg
(
dc1394ã©u»_t
 
ã©u»
);

93 cÚ¡ * 
dc1394_”rÜ_g‘_¡ršg
(
dc1394”rÜ_t
 
”rÜ
);

98 
ušt16_t
 
dc1394_checksum_üc16
 (cÚ¡ 
ušt8_t
* 
bufãr
, 
ušt32_t
 
bufãr_size
);

100 #ifdeà
__ılu¥lus


	@/usr/include/dc1394/video.h

23 
	~<dc1394/log.h
>

31 #iâdeà
__DC1394_VIDEO_H__


32 
	#__DC1394_VIDEO_H__


	)

42 
	mDC1394_ISO_SPEED_100
= 0,

43 
	mDC1394_ISO_SPEED_200
,

44 
	mDC1394_ISO_SPEED_400
,

45 
	mDC1394_ISO_SPEED_800
,

46 
	mDC1394_ISO_SPEED_1600
,

47 
	mDC1394_ISO_SPEED_3200


48 } 
	tdc1394¥“d_t
;

49 
	#DC1394_ISO_SPEED_MIN
 
DC1394_ISO_SPEED_100


	)

50 
	#DC1394_ISO_SPEED_MAX
 
DC1394_ISO_SPEED_3200


	)

51 
	#DC1394_ISO_SPEED_NUM
 (
DC1394_ISO_SPEED_MAX
 - 
DC1394_ISO_SPEED_MIN
 + 1)

	)

61 
	mDC1394_FRAMERATE_1_875
= 32,

62 
	mDC1394_FRAMERATE_3_75
,

63 
	mDC1394_FRAMERATE_7_5
,

64 
	mDC1394_FRAMERATE_15
,

65 
	mDC1394_FRAMERATE_30
,

66 
	mDC1394_FRAMERATE_60
,

67 
	mDC1394_FRAMERATE_120
,

68 
	mDC1394_FRAMERATE_240


69 } 
	tdc1394äam”©e_t
;

70 
	#DC1394_FRAMERATE_MIN
 
DC1394_FRAMERATE_1_875


	)

71 
	#DC1394_FRAMERATE_MAX
 
DC1394_FRAMERATE_240


	)

72 
	#DC1394_FRAMERATE_NUM
 (
DC1394_FRAMERATE_MAX
 - 
DC1394_FRAMERATE_MIN
 + 1)

	)

81 
	mDC1394_OPERATION_MODE_LEGACY
 = 480,

82 
	mDC1394_OPERATION_MODE_1394B


83 } 
	tdc1394İ”©iÚ_mode_t
;

84 
	#DC1394_OPERATION_MODE_MIN
 
DC1394_OPERATION_MODE_LEGACY


	)

85 
	#DC1394_OPERATION_MODE_MAX
 
DC1394_OPERATION_MODE_1394B


	)

86 
	#DC1394_OPERATION_MODE_NUM
 (
DC1394_OPERATION_MODE_MAX
 - 
DC1394_OPERATION_MODE_MIN
 + 1)

	)

94 
ušt32_t
 
	mnum
;

95 
dc1394äam”©e_t
 
	mäam”©es
[
DC1394_FRAMERATE_NUM
];

96 } 
	tdc1394äam”©es_t
;

107 
	s__dc1394_video_äame


109 * 
	mimage
;

111 
ušt32_t
 
	msize
[2];

112 
ušt32_t
 
	mpos™iÚ
[2];

113 
dc1394cŞÜ_codšg_t
 
	mcŞÜ_codšg
;

114 
dc1394cŞÜ_f‹r_t
 
	mcŞÜ_f‹r
;

115 
ušt32_t
 
	myuv_by‹_Üd”
;

116 
ušt32_t
 
	md©a_d•th
;

118 
ušt32_t
 
	m¡ride
;

119 
dc1394video_mode_t
 
	mvideo_mode
;

120 
ušt64_t
 
	mtÙ®_by‹s
;

122 
ušt32_t
 
	mimage_by‹s
;

123 
ušt32_t
 
	m·ddšg_by‹s
;

124 
ušt32_t
 
	m·ck‘_size
;

125 
ušt32_t
 
	m·ck‘s_³r_äame
;

126 
ušt64_t
 
	mtime¡amp
;

128 
ušt32_t
 
	mäames_behšd
;

129 
dc1394ÿm”a_t
 *
	mÿm”a
;

130 
ušt32_t
 
	mid
;

131 
ušt64_t
 
	m®loÿ‹d_image_by‹s
;

132 
dc1394boŞ_t
 
	ml™e_’dŸn
;

134 
dc1394boŞ_t
 
	md©a_š_·ddšg
;

136 } 
	tdc1394video_äame_t
;

138 #ifdeà
__ılu¥lus


149 
dc1394”rÜ_t
 
dc1394_video_g‘_suµÜ‹d_modes
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_modes_t
 *
video_modes
);

154 
dc1394”rÜ_t
 
dc1394_video_g‘_suµÜ‹d_äam”©es
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
, 
dc1394äam”©es_t
 *
äam”©es
);

159 
dc1394”rÜ_t
 
dc1394_video_g‘_äam”©e
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394äam”©e_t
 *
äam”©e
);

164 
dc1394”rÜ_t
 
dc1394_video_£t_äam”©e
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394äam”©e_t
 
äam”©e
);

169 
dc1394”rÜ_t
 
dc1394_video_g‘_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 *
video_mode
);

174 
dc1394”rÜ_t
 
dc1394_video_£t_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394video_mode_t
 
video_mode
);

179 
dc1394”rÜ_t
 
dc1394_video_g‘_İ”©iÚ_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394İ”©iÚ_mode_t
 *
mode
);

184 
dc1394”rÜ_t
 
dc1394_video_£t_İ”©iÚ_mode
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394İ”©iÚ_mode_t
 
mode
);

189 
dc1394”rÜ_t
 
dc1394_video_g‘_iso_¥“d
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394¥“d_t
 *
¥“d
);

194 
dc1394”rÜ_t
 
dc1394_video_£t_iso_¥“d
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394¥“d_t
 
¥“d
);

199 
dc1394”rÜ_t
 
dc1394_video_g‘_iso_chªÃl
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 * 
chªÃl
);

204 
dc1394”rÜ_t
 
dc1394_video_£t_iso_chªÃl
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
chªÃl
);

209 
dc1394”rÜ_t
 
dc1394_video_g‘_d©a_d•th
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
d•th
);

214 
dc1394”rÜ_t
 
dc1394_video_£t_ŒªsmissiÚ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 
pwr
);

219 
dc1394”rÜ_t
 
dc1394_video_g‘_ŒªsmissiÚ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 *
pwr
);

224 
dc1394”rÜ_t
 
dc1394_video_£t_Úe_shÙ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394sw™ch_t
 
pwr
);

229 
dc1394”rÜ_t
 
dc1394_video_g‘_Úe_shÙ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394boŞ_t
 *
is_Ú
);

234 
dc1394”rÜ_t
 
dc1394_video_£t_muÉi_shÙ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 
numF¿mes
, 
dc1394sw™ch_t
 
pwr
);

239 
dc1394”rÜ_t
 
dc1394_video_g‘_muÉi_shÙ
(
dc1394ÿm”a_t
 *
ÿm”a
, 
dc1394boŞ_t
 *
is_Ú
, 
ušt32_t
 *
numF¿mes
);

250 
dc1394”rÜ_t
 
dc1394_video_g‘_bªdwidth_u§ge
(
dc1394ÿm”a_t
 *
ÿm”a
, 
ušt32_t
 *
bªdwidth
);

252 #ifdeà
__ılu¥lus


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ılu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

43 #ià
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Î"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #ià
__WORDSIZE
 == 64

273 
	mquÙ
;

274 
	m»m
;

275 } 
	timaxdiv_t
;

282 
__ex‹nsiÚ__
 
	mquÙ
;

283 
__ex‹nsiÚ__
 
	m»m
;

284 } 
	timaxdiv_t
;

290 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

294 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

297 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

298 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

301 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

302 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

305 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

306 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

307 
__THROW
;

310 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

311 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

312 
__THROW
;

314 #ifdeà
__USE_EXTERN_INLINES


316 #ià
__WORDSIZE
 == 64

318 
	$__¡¹Ş_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

319 **
__»¡riù
 
__’d±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

323 
__ex‹º_šlše
 
štmax_t


324 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

325 
ba£
))

327  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

328 
	}
}

330 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 ** 
__»¡riù
 
__’d±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

335 
__ex‹º_šlše
 
uštmax_t


336 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

337 
ba£
))

339  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc¡Ş_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

343 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

347 
__ex‹º_šlše
 
štmax_t


348 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

349 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

351  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

355 
__»¡riù
 
__ÅŒ
,

356 
__gwch¬_t
 **

357 
__»¡riù
 
__’d±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

361 
__ex‹º_šlše
 
uštmax_t


362 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

363 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

365  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

366 
	}
}

370 
__ex‹nsiÚ__


371 
	$__¡¹Şl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

372 **
__»¡riù
 
__’d±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

376 
__ex‹º_šlše
 
štmax_t


377 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

378 
ba£
))

380  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

381 
	}
}

383 
__ex‹nsiÚ__


384 
	$__¡¹ouÎ_š‹º®
 (const *

385 
__»¡riù
 
__ÅŒ
,

387 
__»¡riù
 
__’d±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

392 
__ex‹º_šlše
 
uštmax_t


393 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

394 
ba£
))

396  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

397 
	}
}

399 
__ex‹nsiÚ__


400 
	$__wc¡Şl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

401 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

405 
__ex‹º_šlše
 
štmax_t


406 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

407 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

409  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

410 
	}
}

413 
__ex‹nsiÚ__


414 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

415 
__»¡riù
 
__ÅŒ
,

416 
__gwch¬_t
 **

417 
__»¡riù
 
__’d±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

422 
__ex‹º_šlše
 
uštmax_t


423 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

424 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

426  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/libavcodec/version.h

20 #iâdeà
AVCODEC_VERSION_H


21 
	#AVCODEC_VERSION_H


	)

29 
	#LIBAVCODEC_VERSION_MAJOR
 54

	)

30 
	#LIBAVCODEC_VERSION_MINOR
 35

	)

31 
	#LIBAVCODEC_VERSION_MICRO
 0

	)

33 
	#LIBAVCODEC_VERSION_INT
 
	`AV_VERSION_INT
(
LIBAVCODEC_VERSION_MAJOR
, \

34 
LIBAVCODEC_VERSION_MINOR
, \

35 
LIBAVCODEC_VERSION_MICRO
)

	)

36 
	#LIBAVCODEC_VERSION
 
	`AV_VERSION
(
LIBAVCODEC_VERSION_MAJOR
, \

37 
LIBAVCODEC_VERSION_MINOR
, \

38 
LIBAVCODEC_VERSION_MICRO
)

	)

39 
	#LIBAVCODEC_BUILD
 
LIBAVCODEC_VERSION_INT


	)

41 
	#LIBAVCODEC_IDENT
 "Lavc" 
	`AV_STRINGIFY
(
LIBAVCODEC_VERSION
)

	)

49 #iâdeà
FF_API_REQUEST_CHANNELS


50 
	#FF_API_REQUEST_CHANNELS
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

52 #iâdeà
FF_API_OLD_DECODE_AUDIO


53 
	#FF_API_OLD_DECODE_AUDIO
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

55 #iâdeà
FF_API_OLD_ENCODE_AUDIO


56 
	#FF_API_OLD_ENCODE_AUDIO
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

58 #iâdeà
FF_API_OLD_ENCODE_VIDEO


59 
	#FF_API_OLD_ENCODE_VIDEO
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

61 #iâdeà
FF_API_MPV_GLOBAL_OPTS


62 
	#FF_API_MPV_GLOBAL_OPTS
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

64 #iâdeà
FF_API_COLOR_TABLE_ID


65 
	#FF_API_COLOR_TABLE_ID
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

67 #iâdeà
FF_API_INTER_THRESHOLD


68 
	#FF_API_INTER_THRESHOLD
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

70 #iâdeà
FF_API_SUB_ID


71 
	#FF_API_SUB_ID
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

73 #iâdeà
FF_API_DSP_MASK


74 
	#FF_API_DSP_MASK
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

76 #iâdeà
FF_API_FIND_BEST_PIX_FMT


77 
	#FF_API_FIND_BEST_PIX_FMT
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

79 #iâdeà
FF_API_CODEC_ID


80 
	#FF_API_CODEC_ID
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

82 #iâdeà
FF_API_VDA_ASYNC


83 
	#FF_API_VDA_ASYNC
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

85 #iâdeà
FF_API_AVCODEC_RESAMPLE


86 
	#FF_API_AVCODEC_RESAMPLE
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

88 #iâdeà
FF_API_LIBMPEG2


89 
	#FF_API_LIBMPEG2
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

91 #iâdeà
FF_API_MMI


92 
	#FF_API_MMI
 (
LIBAVCODEC_VERSION_MAJOR
 < 55)

	)

	@/usr/include/libavformat/version.h

21 #iâdeà
AVFORMAT_VERSION_H


22 
	#AVFORMAT_VERSION_H


	)

30 
	~"libavut/avut.h
"

32 
	#LIBAVFORMAT_VERSION_MAJOR
 54

	)

33 
	#LIBAVFORMAT_VERSION_MINOR
 20

	)

34 
	#LIBAVFORMAT_VERSION_MICRO
 4

	)

36 
	#LIBAVFORMAT_VERSION_INT
 
	`AV_VERSION_INT
(
LIBAVFORMAT_VERSION_MAJOR
, \

37 
LIBAVFORMAT_VERSION_MINOR
, \

38 
LIBAVFORMAT_VERSION_MICRO
)

	)

39 
	#LIBAVFORMAT_VERSION
 
	`AV_VERSION
(
LIBAVFORMAT_VERSION_MAJOR
, \

40 
LIBAVFORMAT_VERSION_MINOR
, \

41 
LIBAVFORMAT_VERSION_MICRO
)

	)

42 
	#LIBAVFORMAT_BUILD
 
LIBAVFORMAT_VERSION_INT


	)

44 
	#LIBAVFORMAT_IDENT
 "Lavf" 
	`AV_STRINGIFY
(
LIBAVFORMAT_VERSION
)

	)

52 #iâdeà
FF_API_CLOSE_INPUT_FILE


53 
	#FF_API_CLOSE_INPUT_FILE
 (
LIBAVFORMAT_VERSION_MAJOR
 < 55)

	)

55 #iâdeà
FF_API_APPLEHTTP_PROTO


56 
	#FF_API_APPLEHTTP_PROTO
 (
LIBAVFORMAT_VERSION_MAJOR
 < 55)

	)

58 #iâdeà
FF_API_READ_PACKET


59 
	#FF_API_READ_PACKET
 (
LIBAVFORMAT_VERSION_MAJOR
 < 55)

	)

61 #iâdeà
FF_API_INTERLEAVE_PACKET


62 
	#FF_API_INTERLEAVE_PACKET
 (
LIBAVFORMAT_VERSION_MAJOR
 < 55)

	)

64 #iâdeà
FF_API_AV_GETTIME


65 
	#FF_API_AV_GETTIME
 (
LIBAVFORMAT_VERSION_MAJOR
 < 55)

	)

67 #iâdeà
FF_API_R_FRAME_RATE


68 
	#FF_API_R_FRAME_RATE
 (
LIBAVFORMAT_VERSION_MAJOR
 < 55)

	)

	@/usr/include/libavutil/avutil.h

21 #iâdeà
AVUTIL_AVUTIL_H


22 
	#AVUTIL_AVUTIL_H


	)

119 
	#AV_STRINGIFY
(
s
è
	`AV_TOSTRING
(s)

	)

120 
	#AV_TOSTRING
(
s
è#s

	)

122 
	#AV_GLUE
(
a
, 
b
è¨## 
	)
b

123 
	#AV_JOIN
(
a
, 
b
è
	`AV_GLUE
×, b)

	)

125 
	#AV_PRAGMA
(
s
è
	`_P¿gma
(#s)

	)

140 
	#AV_VERSION_INT
(
a
, 
b
, 
c
è×<<16 | b<<8 | c)

	)

141 
	#AV_VERSION_DOT
(
a
, 
b
, 
c
è¨##.## b ##.## 
	)
c

142 
	#AV_VERSION
(
a
, 
b
, 
c
è
	`AV_VERSION_DOT
×, b, c)

	)

156 
avut_v”siÚ
();

161 cÚ¡ *
avut_cÚfigu¿tiÚ
();

166 cÚ¡ *
avut_liûn£
();

177 
	eAVMedŸTy³
 {

178 
	mAVMEDIA_TYPE_UNKNOWN
 = -1,

179 
	mAVMEDIA_TYPE_VIDEO
,

180 
	mAVMEDIA_TYPE_AUDIO
,

181 
	mAVMEDIA_TYPE_DATA
,

182 
	mAVMEDIA_TYPE_SUBTITLE
,

183 
	mAVMEDIA_TYPE_ATTACHMENT
,

184 
	mAVMEDIA_TYPE_NB


197 
	#FF_LAMBDA_SHIFT
 7

	)

198 
	#FF_LAMBDA_SCALE
 (1<<
FF_LAMBDA_SHIFT
)

	)

199 
	#FF_QP2LAMBDA
 118

200 
	#FF_LAMBDA_MAX
 (256*128-1)

	)

202 
	#FF_QUALITY_SCALE
 
FF_LAMBDA_SCALE


203 

	)

220 
	#AV_NOPTS_VALUE
 
	`INT64_C
(0x8000000000000000)

	)

226 
	#AV_TIME_BASE
 1000000

	)

232 
	#AV_TIME_BASE_Q
 (
AVR©iÚ®
){1, 
AV_TIME_BASE
}

	)

244 
	eAVPiùu»Ty³
 {

245 
	mAV_PICTURE_TYPE_I
 = 1,

246 
	mAV_PICTURE_TYPE_P
,

247 
	mAV_PICTURE_TYPE_B
,

248 
	mAV_PICTURE_TYPE_S
,

249 
	mAV_PICTURE_TYPE_SI
,

250 
	mAV_PICTURE_TYPE_SP
,

251 
	mAV_PICTURE_TYPE_BI
,

261 
av_g‘_piùu»_ty³_ch¬
(
AVPiùu»Ty³
 
più_ty³
);

267 
	~"”rÜ.h
"

268 
	~"v”siÚ.h
"

	@/usr/include/libavutil/cpu.h

21 #iâdeà
AVUTIL_CPU_H


22 
	#AVUTIL_CPU_H


	)

24 
	~"v”siÚ.h
"

26 
	#AV_CPU_FLAG_FORCE
 0x80000000

	)

29 
	#AV_CPU_FLAG_MMX
 0x0001

30 
	#AV_CPU_FLAG_MMXEXT
 0x0002

31 #ià
FF_API_CPU_FLAG_MMX2


	)

32 
	#AV_CPU_FLAG_MMX2
 0x0002

34 
	#AV_CPU_FLAG_3DNOW
 0x0004

35 
	#AV_CPU_FLAG_SSE
 0x0008

36 
	#AV_CPU_FLAG_SSE2
 0x0010

37 
	#AV_CPU_FLAG_SSE2SLOW
 0x40000000

38 
	#AV_CPU_FLAG_3DNOWEXT
 0x0020

39 
	#AV_CPU_FLAG_SSE3
 0x0040

40 
	#AV_CPU_FLAG_SSE3SLOW
 0x20000000

41 
	#AV_CPU_FLAG_SSSE3
 0x0080

42 
	#AV_CPU_FLAG_ATOM
 0x10000000

43 
	#AV_CPU_FLAG_SSE4
 0x0100

44 
	#AV_CPU_FLAG_SSE42
 0x0200

45 
	#AV_CPU_FLAG_AVX
 0x4000

46 
	#AV_CPU_FLAG_XOP
 0x0400

47 
	#AV_CPU_FLAG_FMA4
 0x0800

48 
	#AV_CPU_FLAG_CMOV
 0x1000

49 

	)

50 
	#AV_CPU_FLAG_ALTIVEC
 0x0001

51 

	)

52 
	#AV_CPU_FLAG_ARMV5TE
 (1 << 0)

	)

53 
	#AV_CPU_FLAG_ARMV6
 (1 << 1)

	)

54 
	#AV_CPU_FLAG_ARMV6T2
 (1 << 2)

	)

55 
	#AV_CPU_FLAG_VFP
 (1 << 3)

	)

56 
	#AV_CPU_FLAG_VFPV3
 (1 << 4)

	)

57 
	#AV_CPU_FLAG_NEON
 (1 << 5)

	)

62 
av_g‘_ıu_æags
();

70 
av_£t_ıu_æags_mask
(
mask
);

77 
av_·r£_ıu_æags
(cÚ¡ *
s
);

80 
ff_g‘_ıu_æags_¬m
();

81 
ff_g‘_ıu_æags_µc
();

82 
ff_g‘_ıu_æags_x86
();

	@/usr/include/libavutil/dict.h

25 #iâdeà
AVUTIL_DICT_H


26 
	#AVUTIL_DICT_H


	)

61 
	#AV_DICT_MATCH_CASE
 1

	)

62 
	#AV_DICT_IGNORE_SUFFIX
 2

	)

63 
	#AV_DICT_DONT_STRDUP_KEY
 4

	)

65 
	#AV_DICT_DONT_STRDUP_VAL
 8

	)

67 
	#AV_DICT_DONT_OVERWRITE
 16

68 
	#AV_DICT_APPEND
 32

	)

71 
	sAVDiùiÚ¬yEÁry
 {

72 *
	mkey
;

73 *
	mv®ue
;

74 } 
	tAVDiùiÚ¬yEÁry
;

76 
AVDiùiÚ¬y
 
	tAVDiùiÚ¬y
;

86 
AVDiùiÚ¬yEÁry
 *

87 
av_diù_g‘
(
AVDiùiÚ¬y
 *
m
, cÚ¡ *
key
, cÚ¡ 
AVDiùiÚ¬yEÁry
 *
´ev
, 
æags
);

95 
av_diù_couÁ
(cÚ¡ 
AVDiùiÚ¬y
 *
m
);

107 
av_diù_£t
(
AVDiùiÚ¬y
 **
pm
, cÚ¡ *
key
, cÚ¡ *
v®ue
, 
æags
);

117 
av_diù_cİy
(
AVDiùiÚ¬y
 **
d¡
, AVDiùiÚ¬y *
¤c
, 
æags
);

123 
av_diù_ä“
(
AVDiùiÚ¬y
 **
m
);

	@/usr/include/libavutil/log.h

21 #iâdeà
AVUTIL_LOG_H


22 
	#AVUTIL_LOG_H


	)

24 
	~<¡d¬g.h
>

25 
	~"avut.h
"

26 
	~"©Œibu‹s.h
"

33 
	sAVCÏss
 {

38 cÚ¡ * 
	mşass_Çme
;

44 cÚ¡ * (*
	m™em_Çme
)(* 
	mùx
);

51 cÚ¡ 
AVO±iÚ
 *
	mİtiÚ
;

59 
	mv”siÚ
;

65 
	mlog_Ëv–_off£t_off£t
;

74 
	m·»Á_log_cÚ‹xt_off£t
;

79 * (*
	mchd_Ãxt
)(*
	mobj
, *
	m´ev
);

89 cÚ¡ 
	mAVCÏss
* (*
	mchd_şass_Ãxt
)(cÚ¡ 
AVCÏss
 *
	m´ev
);

90 } 
	tAVCÏss
;

94 
	#AV_LOG_QUIET
 -8

	)

99 
	#AV_LOG_PANIC
 0

	)

106 
	#AV_LOG_FATAL
 8

	)

112 
	#AV_LOG_ERROR
 16

	)

118 
	#AV_LOG_WARNING
 24

	)

120 
	#AV_LOG_INFO
 32

	)

121 
	#AV_LOG_VERBOSE
 40

	)

126 
	#AV_LOG_DEBUG
 48

	)

142 
	$av_log
(*
avş
, 
Ëv–
, cÚ¡ *
fmt
, ...è
	`av_´štf_fÜm©
(3, 4);

144 
	`av_vlog
(*
avş
, 
Ëv–
, cÚ¡ *
fmt
, 
va_li¡
);

145 
	`av_log_g‘_Ëv–
();

146 
	`av_log_£t_Ëv–
();

147 
	`av_log_£t_ÿÎback
((*)(*, , cÚ¡ *, 
va_li¡
));

148 
	`av_log_deçuÉ_ÿÎback
(* 
±r
, 
Ëv–
, cÚ¡ * 
fmt
, 
va_li¡
 
vl
);

149 cÚ¡ * 
	`av_deçuÉ_™em_Çme
(* 
ùx
);

156 #ifdeà
DEBUG


157 
	#av_dlog
(
pùx
, ...è
	`av_log
Õùx, 
AV_LOG_DEBUG
, 
__VA_ARGS__
)

	)

159 
	#av_dlog
(
pùx
, ...)

	)

170 
	#AV_LOG_SKIP_REPEATED
 1

	)

171 
	`av_log_£t_æags
(
¬g
);

	@/usr/include/libavutil/pixfmt.h

21 #iâdeà
AVUTIL_PIXFMT_H


22 
	#AVUTIL_PIXFMT_H


	)

30 
	~"libavut/avcÚfig.h
"

31 
	~"libavut/v”siÚ.h
"

63 
	eAVPix–FÜm©
 {

64 
	mAV_PIX_FMT_NONE
 = -1,

65 
	mAV_PIX_FMT_YUV420P
,

66 
	mAV_PIX_FMT_YUYV422
,

67 
	mAV_PIX_FMT_RGB24
,

68 
	mAV_PIX_FMT_BGR24
,

69 
	mAV_PIX_FMT_YUV422P
,

70 
	mAV_PIX_FMT_YUV444P
,

71 
	mAV_PIX_FMT_YUV410P
,

72 
	mAV_PIX_FMT_YUV411P
,

73 
	mAV_PIX_FMT_GRAY8
,

74 
	mAV_PIX_FMT_MONOWHITE
,

75 
	mAV_PIX_FMT_MONOBLACK
,

76 
	mAV_PIX_FMT_PAL8
,

77 
	mAV_PIX_FMT_YUVJ420P
,

78 
	mAV_PIX_FMT_YUVJ422P
,

79 
	mAV_PIX_FMT_YUVJ444P
,

80 
	mAV_PIX_FMT_XVMC_MPEG2_MC
,

81 
	mAV_PIX_FMT_XVMC_MPEG2_IDCT
,

82 
	mAV_PIX_FMT_UYVY422
,

83 
	mAV_PIX_FMT_UYYVYY411
,

84 
	mAV_PIX_FMT_BGR8
,

85 
	mAV_PIX_FMT_BGR4
,

86 
	mAV_PIX_FMT_BGR4_BYTE
,

87 
	mAV_PIX_FMT_RGB8
,

88 
	mAV_PIX_FMT_RGB4
,

89 
	mAV_PIX_FMT_RGB4_BYTE
,

90 
	mAV_PIX_FMT_NV12
,

91 
	mAV_PIX_FMT_NV21
,

93 
	mAV_PIX_FMT_ARGB
,

94 
	mAV_PIX_FMT_RGBA
,

95 
	mAV_PIX_FMT_ABGR
,

96 
	mAV_PIX_FMT_BGRA
,

98 
	mAV_PIX_FMT_GRAY16BE
,

99 
	mAV_PIX_FMT_GRAY16LE
,

100 
	mAV_PIX_FMT_YUV440P
,

101 
	mAV_PIX_FMT_YUVJ440P
,

102 
	mAV_PIX_FMT_YUVA420P
,

103 
	mAV_PIX_FMT_VDPAU_H264
,

104 
	mAV_PIX_FMT_VDPAU_MPEG1
,

105 
	mAV_PIX_FMT_VDPAU_MPEG2
,

106 
	mAV_PIX_FMT_VDPAU_WMV3
,

107 
	mAV_PIX_FMT_VDPAU_VC1
,

108 
	mAV_PIX_FMT_RGB48BE
,

109 
	mAV_PIX_FMT_RGB48LE
,

111 
	mAV_PIX_FMT_RGB565BE
,

112 
	mAV_PIX_FMT_RGB565LE
,

113 
	mAV_PIX_FMT_RGB555BE
,

114 
	mAV_PIX_FMT_RGB555LE
,

116 
	mAV_PIX_FMT_BGR565BE
,

117 
	mAV_PIX_FMT_BGR565LE
,

118 
	mAV_PIX_FMT_BGR555BE
,

119 
	mAV_PIX_FMT_BGR555LE
,

121 
	mAV_PIX_FMT_VAAPI_MOCO
,

122 
	mAV_PIX_FMT_VAAPI_IDCT
,

123 
	mAV_PIX_FMT_VAAPI_VLD
,

125 
	mAV_PIX_FMT_YUV420P16LE
,

126 
	mAV_PIX_FMT_YUV420P16BE
,

127 
	mAV_PIX_FMT_YUV422P16LE
,

128 
	mAV_PIX_FMT_YUV422P16BE
,

129 
	mAV_PIX_FMT_YUV444P16LE
,

130 
	mAV_PIX_FMT_YUV444P16BE
,

131 
	mAV_PIX_FMT_VDPAU_MPEG4
,

132 
	mAV_PIX_FMT_DXVA2_VLD
,

134 
	mAV_PIX_FMT_RGB444LE
,

135 
	mAV_PIX_FMT_RGB444BE
,

136 
	mAV_PIX_FMT_BGR444LE
,

137 
	mAV_PIX_FMT_BGR444BE
,

138 
	mAV_PIX_FMT_Y400A
,

139 
	mAV_PIX_FMT_BGR48BE
,

140 
	mAV_PIX_FMT_BGR48LE
,

141 
	mAV_PIX_FMT_YUV420P9BE
,

142 
	mAV_PIX_FMT_YUV420P9LE
,

143 
	mAV_PIX_FMT_YUV420P10BE
,

144 
	mAV_PIX_FMT_YUV420P10LE
,

145 
	mAV_PIX_FMT_YUV422P10BE
,

146 
	mAV_PIX_FMT_YUV422P10LE
,

147 
	mAV_PIX_FMT_YUV444P9BE
,

148 
	mAV_PIX_FMT_YUV444P9LE
,

149 
	mAV_PIX_FMT_YUV444P10BE
,

150 
	mAV_PIX_FMT_YUV444P10LE
,

151 
	mAV_PIX_FMT_YUV422P9BE
,

152 
	mAV_PIX_FMT_YUV422P9LE
,

153 
	mAV_PIX_FMT_VDA_VLD
,

154 
	mAV_PIX_FMT_GBRP
,

155 
	mAV_PIX_FMT_GBRP9BE
,

156 
	mAV_PIX_FMT_GBRP9LE
,

157 
	mAV_PIX_FMT_GBRP10BE
,

158 
	mAV_PIX_FMT_GBRP10LE
,

159 
	mAV_PIX_FMT_GBRP16BE
,

160 
	mAV_PIX_FMT_GBRP16LE
,

161 
	mAV_PIX_FMT_YUVA422P
,

162 
	mAV_PIX_FMT_YUVA444P
,

163 
	mAV_PIX_FMT_YUVA420P9BE
,

164 
	mAV_PIX_FMT_YUVA420P9LE
,

165 
	mAV_PIX_FMT_YUVA422P9BE
,

166 
	mAV_PIX_FMT_YUVA422P9LE
,

167 
	mAV_PIX_FMT_YUVA444P9BE
,

168 
	mAV_PIX_FMT_YUVA444P9LE
,

169 
	mAV_PIX_FMT_YUVA420P10BE
,

170 
	mAV_PIX_FMT_YUVA420P10LE
,

171 
	mAV_PIX_FMT_YUVA422P10BE
,

172 
	mAV_PIX_FMT_YUVA422P10LE
,

173 
	mAV_PIX_FMT_YUVA444P10BE
,

174 
	mAV_PIX_FMT_YUVA444P10LE
,

175 
	mAV_PIX_FMT_YUVA420P16BE
,

176 
	mAV_PIX_FMT_YUVA420P16LE
,

177 
	mAV_PIX_FMT_YUVA422P16BE
,

178 
	mAV_PIX_FMT_YUVA422P16LE
,

179 
	mAV_PIX_FMT_YUVA444P16BE
,

180 
	mAV_PIX_FMT_YUVA444P16LE
,

181 
	mAV_PIX_FMT_NB
,

183 #ià
FF_API_PIX_FMT


184 
	~"Şd_pix_fmts.h
"

188 #ià
AV_HAVE_BIGENDIAN


189 
	#AV_PIX_FMT_NE
(
be
, 
Ë
è
AV_PIX_FMT_
##
	)
be

191 
	#AV_PIX_FMT_NE
(
be
, 
Ë
è
AV_PIX_FMT_
##
	)
le

194 
	#AV_PIX_FMT_RGB32
 
	`AV_PIX_FMT_NE
(
ARGB
, 
BGRA
)

	)

195 
	#AV_PIX_FMT_RGB32_1
 
	`AV_PIX_FMT_NE
(
RGBA
, 
ABGR
)

	)

196 
	#AV_PIX_FMT_BGR32
 
	`AV_PIX_FMT_NE
(
ABGR
, 
RGBA
)

	)

197 
	#AV_PIX_FMT_BGR32_1
 
	`AV_PIX_FMT_NE
(
BGRA
, 
ARGB
)

	)

199 
	#AV_PIX_FMT_GRAY16
 
	`AV_PIX_FMT_NE
(
GRAY16BE
, 
GRAY16LE
)

	)

200 
	#AV_PIX_FMT_RGB48
 
	`AV_PIX_FMT_NE
(
RGB48BE
, 
RGB48LE
)

	)

201 
	#AV_PIX_FMT_RGB565
 
	`AV_PIX_FMT_NE
(
RGB565BE
, 
RGB565LE
)

	)

202 
	#AV_PIX_FMT_RGB555
 
	`AV_PIX_FMT_NE
(
RGB555BE
, 
RGB555LE
)

	)

203 
	#AV_PIX_FMT_RGB444
 
	`AV_PIX_FMT_NE
(
RGB444BE
, 
RGB444LE
)

	)

204 
	#AV_PIX_FMT_BGR48
 
	`AV_PIX_FMT_NE
(
BGR48BE
, 
BGR48LE
)

	)

205 
	#AV_PIX_FMT_BGR565
 
	`AV_PIX_FMT_NE
(
BGR565BE
, 
BGR565LE
)

	)

206 
	#AV_PIX_FMT_BGR555
 
	`AV_PIX_FMT_NE
(
BGR555BE
, 
BGR555LE
)

	)

207 
	#AV_PIX_FMT_BGR444
 
	`AV_PIX_FMT_NE
(
BGR444BE
, 
BGR444LE
)

	)

209 
	#AV_PIX_FMT_YUV420P9
 
	`AV_PIX_FMT_NE
(
YUV420P9BE
 , 
YUV420P9LE
)

	)

210 
	#AV_PIX_FMT_YUV422P9
 
	`AV_PIX_FMT_NE
(
YUV422P9BE
 , 
YUV422P9LE
)

	)

211 
	#AV_PIX_FMT_YUV444P9
 
	`AV_PIX_FMT_NE
(
YUV444P9BE
 , 
YUV444P9LE
)

	)

212 
	#AV_PIX_FMT_YUV420P10
 
	`AV_PIX_FMT_NE
(
YUV420P10BE
, 
YUV420P10LE
)

	)

213 
	#AV_PIX_FMT_YUV422P10
 
	`AV_PIX_FMT_NE
(
YUV422P10BE
, 
YUV422P10LE
)

	)

214 
	#AV_PIX_FMT_YUV444P10
 
	`AV_PIX_FMT_NE
(
YUV444P10BE
, 
YUV444P10LE
)

	)

215 
	#AV_PIX_FMT_YUV420P16
 
	`AV_PIX_FMT_NE
(
YUV420P16BE
, 
YUV420P16LE
)

	)

216 
	#AV_PIX_FMT_YUV422P16
 
	`AV_PIX_FMT_NE
(
YUV422P16BE
, 
YUV422P16LE
)

	)

217 
	#AV_PIX_FMT_YUV444P16
 
	`AV_PIX_FMT_NE
(
YUV444P16BE
, 
YUV444P16LE
)

	)

219 
	#AV_PIX_FMT_GBRP9
 
	`AV_PIX_FMT_NE
(
GBRP9BE
 , 
GBRP9LE
)

	)

220 
	#AV_PIX_FMT_GBRP10
 
	`AV_PIX_FMT_NE
(
GBRP10BE
, 
GBRP10LE
)

	)

221 
	#AV_PIX_FMT_GBRP16
 
	`AV_PIX_FMT_NE
(
GBRP16BE
, 
GBRP16LE
)

	)

223 
	#AV_PIX_FMT_YUVA420P9
 
	`AV_PIX_FMT_NE
(
YUVA420P9BE
 , 
YUVA420P9LE
)

	)

224 
	#AV_PIX_FMT_YUVA422P9
 
	`AV_PIX_FMT_NE
(
YUVA422P9BE
 , 
YUVA422P9LE
)

	)

225 
	#AV_PIX_FMT_YUVA444P9
 
	`AV_PIX_FMT_NE
(
YUVA444P9BE
 , 
YUVA444P9LE
)

	)

226 
	#AV_PIX_FMT_YUVA420P10
 
	`AV_PIX_FMT_NE
(
YUVA420P10BE
, 
YUVA420P10LE
)

	)

227 
	#AV_PIX_FMT_YUVA422P10
 
	`AV_PIX_FMT_NE
(
YUVA422P10BE
, 
YUVA422P10LE
)

	)

228 
	#AV_PIX_FMT_YUVA444P10
 
	`AV_PIX_FMT_NE
(
YUVA444P10BE
, 
YUVA444P10LE
)

	)

229 
	#AV_PIX_FMT_YUVA420P16
 
	`AV_PIX_FMT_NE
(
YUVA420P16BE
, 
YUVA420P16LE
)

	)

230 
	#AV_PIX_FMT_YUVA422P16
 
	`AV_PIX_FMT_NE
(
YUVA422P16BE
, 
YUVA422P16LE
)

	)

231 
	#AV_PIX_FMT_YUVA444P16
 
	`AV_PIX_FMT_NE
(
YUVA444P16BE
, 
YUVA444P16LE
)

	)

233 #ià
FF_API_PIX_FMT


234 
	#Pix–FÜm©
 
AVPix–FÜm©


	)

236 
	#PIX_FMT_NE
(
be
, 
Ë
è
	`AV_PIX_FMT_NE
(be,†e)

	)

238 
	#PIX_FMT_RGB32
 
AV_PIX_FMT_RGB32


	)

239 
	#PIX_FMT_RGB32_1
 
AV_PIX_FMT_RGB32_1


	)

240 
	#PIX_FMT_BGR32
 
AV_PIX_FMT_BGR32


	)

241 
	#PIX_FMT_BGR32_1
 
AV_PIX_FMT_BGR32_1


	)

243 
	#PIX_FMT_GRAY16
 
AV_PIX_FMT_GRAY16


	)

244 
	#PIX_FMT_RGB48
 
AV_PIX_FMT_RGB48


	)

245 
	#PIX_FMT_RGB565
 
AV_PIX_FMT_RGB565


	)

246 
	#PIX_FMT_RGB555
 
AV_PIX_FMT_RGB555


	)

247 
	#PIX_FMT_RGB444
 
AV_PIX_FMT_RGB444


	)

248 
	#PIX_FMT_BGR48
 
AV_PIX_FMT_BGR48


	)

249 
	#PIX_FMT_BGR565
 
AV_PIX_FMT_BGR565


	)

250 
	#PIX_FMT_BGR555
 
AV_PIX_FMT_BGR555


	)

251 
	#PIX_FMT_BGR444
 
AV_PIX_FMT_BGR444


	)

253 
	#PIX_FMT_YUV420P9
 
AV_PIX_FMT_YUV420P9


	)

254 
	#PIX_FMT_YUV422P9
 
AV_PIX_FMT_YUV422P9


	)

255 
	#PIX_FMT_YUV444P9
 
AV_PIX_FMT_YUV444P9


	)

256 
	#PIX_FMT_YUV420P10
 
AV_PIX_FMT_YUV420P10


	)

257 
	#PIX_FMT_YUV422P10
 
AV_PIX_FMT_YUV422P10


	)

258 
	#PIX_FMT_YUV444P10
 
AV_PIX_FMT_YUV444P10


	)

259 
	#PIX_FMT_YUV420P16
 
AV_PIX_FMT_YUV420P16


	)

260 
	#PIX_FMT_YUV422P16
 
AV_PIX_FMT_YUV422P16


	)

261 
	#PIX_FMT_YUV444P16
 
AV_PIX_FMT_YUV444P16


	)

263 
	#PIX_FMT_GBRP9
 
AV_PIX_FMT_GBRP9


	)

264 
	#PIX_FMT_GBRP10
 
AV_PIX_FMT_GBRP10


	)

265 
	#PIX_FMT_GBRP16
 
AV_PIX_FMT_GBRP16


	)

	@/usr/include/libavutil/rational.h

28 #iâdeà
AVUTIL_RATIONAL_H


29 
	#AVUTIL_RATIONAL_H


	)

31 
	~<¡dšt.h
>

32 
	~<lim™s.h
>

33 
	~"©Œibu‹s.h
"

43 
	sAVR©iÚ®
{

44 
	mnum
;

45 
	md’
;

46 } 
	tAVR©iÚ®
;

55 
šlše
 
	$av_cmp_q
(
AVR©iÚ®
 
a
, AVR©iÚ® 
b
){

56 cÚ¡ 
št64_t
 
tmp
ğ
a
.
num
 * (št64_t)
b
.
d’
 - b.num * (int64_t)a.den;

58 if(
tmp
è (Ñm°^ 
a
.
d’
 ^ 
b
.den)>>63)|1;

59 if(
b
.
d’
 && 
a
.den)  0;

60 if(
a
.
num
 && 
b
.num)  (a.num>>31) - (b.num>>31);

61  
INT_MIN
;

62 
	}
}

69 
šlše
 
	$av_q2d
(
AVR©iÚ®
 
a
){

70  
a
.
num
 / (èa.
d’
;

71 
	}
}

83 
av_»duû
(*
d¡_num
, *
d¡_d’
, 
št64_t
 
num
, iÁ64_ˆ
d’
, iÁ64_ˆ
max
);

91 
AVR©iÚ®
 
	$av_mul_q
(
AVR©iÚ®
 
b
, AVR©iÚ® 
c
è
av_cÚ¡
;

99 
AVR©iÚ®
 
	$av_div_q
(
AVR©iÚ®
 
b
, AVR©iÚ® 
c
è
av_cÚ¡
;

107 
AVR©iÚ®
 
	$av_add_q
(
AVR©iÚ®
 
b
, AVR©iÚ® 
c
è
av_cÚ¡
;

115 
AVR©iÚ®
 
	$av_sub_q
(
AVR©iÚ®
 
b
, AVR©iÚ® 
c
è
av_cÚ¡
;

122 
av_®ways_šlše
 
AVR©iÚ®
 
	$av_šv_q
(
AVR©iÚ®
 
q
)

124 
AVR©iÚ®
 
r
 = { 
q
.
d’
, q.
num
 };

125  
r
;

126 
	}
}

136 
AVR©iÚ®
 
	$av_d2q
(
d
, 
max
è
av_cÚ¡
;

142 
	`av_Ã¬”_q
(
AVR©iÚ®
 
q
, AVR©iÚ® 
q1
, AVR©iÚ® 
q2
);

149 
	`av_fšd_Ã¬e¡_q_idx
(
AVR©iÚ®
 
q
, cÚ¡ AVR©iÚ®* 
q_li¡
);

	@/usr/include/libavutil/samplefmt.h

19 #iâdeà
AVUTIL_SAMPLEFMT_H


20 
	#AVUTIL_SAMPLEFMT_H


	)

22 
	~<¡dšt.h
>

24 
	~"avut.h
"

25 
	~"©Œibu‹s.h
"

49 
	eAVSam¶eFÜm©
 {

50 
	mAV_SAMPLE_FMT_NONE
 = -1,

51 
	mAV_SAMPLE_FMT_U8
,

52 
	mAV_SAMPLE_FMT_S16
,

53 
	mAV_SAMPLE_FMT_S32
,

54 
	mAV_SAMPLE_FMT_FLT
,

55 
	mAV_SAMPLE_FMT_DBL
,

57 
	mAV_SAMPLE_FMT_U8P
,

58 
	mAV_SAMPLE_FMT_S16P
,

59 
	mAV_SAMPLE_FMT_S32P
,

60 
	mAV_SAMPLE_FMT_FLTP
,

61 
	mAV_SAMPLE_FMT_DBLP
,

63 
	mAV_SAMPLE_FMT_NB


70 cÚ¡ *
av_g‘_§m¶e_fmt_Çme
(
AVSam¶eFÜm©
 
§m¶e_fmt
);

76 
AVSam¶eFÜm©
 
av_g‘_§m¶e_fmt
(cÚ¡ *
Çme
);

87 
AVSam¶eFÜm©
 
av_g‘_·cked_§m¶e_fmt
(AVSam¶eFÜm© 
§m¶e_fmt
);

98 
AVSam¶eFÜm©
 
av_g‘_¶ª¬_§m¶e_fmt
(AVSam¶eFÜm© 
§m¶e_fmt
);

112 *
av_g‘_§m¶e_fmt_¡ršg
(*
buf
, 
buf_size
, 
AVSam¶eFÜm©
 
§m¶e_fmt
);

121 
av_g‘_by‹s_³r_§m¶e
(
AVSam¶eFÜm©
 
§m¶e_fmt
);

129 
av_§m¶e_fmt_is_¶ª¬
(
AVSam¶eFÜm©
 
§m¶e_fmt
);

141 
av_§m¶es_g‘_bufãr_size
(*
lšesize
, 
nb_chªÃls
, 
nb_§m¶es
,

142 
AVSam¶eFÜm©
 
§m¶e_fmt
, 
®ign
);

168 
av_§m¶es_fl_¬¿ys
(
ušt8_t
 **
audio_d©a
, *
lšesize
,

169 cÚ¡ 
ušt8_t
 *
buf
,

170 
nb_chªÃls
, 
nb_§m¶es
,

171 
AVSam¶eFÜm©
 
§m¶e_fmt
, 
®ign
);

190 
av_§m¶es_®loc
(
ušt8_t
 **
audio_d©a
, *
lšesize
, 
nb_chªÃls
,

191 
nb_§m¶es
, 
AVSam¶eFÜm©
 
§m¶e_fmt
, 
®ign
);

204 
av_§m¶es_cİy
(
ušt8_t
 **
d¡
, ušt8_ˆ* cÚ¡ *
¤c
, 
d¡_off£t
,

205 
¤c_off£t
, 
nb_§m¶es
, 
nb_chªÃls
,

206 
AVSam¶eFÜm©
 
§m¶e_fmt
);

217 
av_§m¶es_£t_s’û
(
ušt8_t
 **
audio_d©a
, 
off£t
, 
nb_§m¶es
,

218 
nb_chªÃls
, 
AVSam¶eFÜm©
 
§m¶e_fmt
);

	@/usr/include/libavutil/time.h

19 #iâdeà
AVUTIL_TIME_H


20 
	#AVUTIL_TIME_H


	)

22 
	~<¡dšt.h
>

27 
št64_t
 
av_g‘time
();

37 
av_u¦“p
(
u£c
);

	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/libv4l1-videodev.h

2 #iâdeà
__LINUX_VIDEODEV_H


3 
	#__LINUX_VIDEODEV_H


	)

5 #ifdeà
lšux


6 
	~<lšux/ioùl.h
>

9 #ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD_k”Ãl__
)

10 
	~<sys/ioùl.h
>

13 
	~<¡dšt.h
>

15 
	#VID_TYPE_CAPTURE
 1

	)

16 
	#VID_TYPE_TUNER
 2

	)

17 
	#VID_TYPE_TELETEXT
 4

	)

18 
	#VID_TYPE_OVERLAY
 8

	)

19 
	#VID_TYPE_CHROMAKEY
 16

	)

20 
	#VID_TYPE_CLIPPING
 32

	)

21 
	#VID_TYPE_FRAMERAM
 64

	)

22 
	#VID_TYPE_SCALES
 128

	)

23 
	#VID_TYPE_MONOCHROME
 256

	)

24 
	#VID_TYPE_SUBCAPTURE
 512

	)

25 
	#VID_TYPE_MPEG_DECODER
 1024

	)

26 
	#VID_TYPE_MPEG_ENCODER
 2048

	)

27 
	#VID_TYPE_MJPEG_DECODER
 4096

	)

28 
	#VID_TYPE_MJPEG_ENCODER
 8192

	)

30 
	svideo_ÿ·b™y


32 
	mÇme
[32];

33 
	mty³
;

34 
	mchªÃls
;

35 
	maudios
;

36 
	mmaxwidth
;

37 
	mmaxheight
;

38 
	mmšwidth
;

39 
	mmšheight
;

43 
	svideo_chªÃl


45 
	mchªÃl
;

46 
	mÇme
[32];

47 
	mtuÃrs
;

48 
ušt32_t
 
	mæags
;

49 
	#VIDEO_VC_TUNER
 1

	)

50 
	#VIDEO_VC_AUDIO
 2

	)

51 
ušt16_t
 
	mty³
;

52 
	#VIDEO_TYPE_TV
 1

	)

53 
	#VIDEO_TYPE_CAMERA
 2

	)

54 
ušt16_t
 
	mnÜm
;

57 
	svideo_tuÃr


59 
	mtuÃr
;

60 
	mÇme
[32];

61 
	m¿ng–ow
, 
	m¿ngehigh
;

62 
ušt32_t
 
	mæags
;

63 
	#VIDEO_TUNER_PAL
 1

	)

64 
	#VIDEO_TUNER_NTSC
 2

	)

65 
	#VIDEO_TUNER_SECAM
 4

	)

66 
	#VIDEO_TUNER_LOW
 8

	)

67 
	#VIDEO_TUNER_NORM
 16

	)

68 
	#VIDEO_TUNER_STEREO_ON
 128

	)

69 
	#VIDEO_TUNER_RDS_ON
 256

	)

70 
	#VIDEO_TUNER_MBS_ON
 512

	)

71 
ušt16_t
 
	mmode
;

72 
	#VIDEO_MODE_PAL
 0

	)

73 
	#VIDEO_MODE_NTSC
 1

	)

74 
	#VIDEO_MODE_SECAM
 2

	)

75 
	#VIDEO_MODE_AUTO
 3

	)

76 
ušt16_t
 
	msigÇl
;

79 
	svideo_piùu»


81 
ušt16_t
 
	mbrighŠess
;

82 
ušt16_t
 
	mhue
;

83 
ušt16_t
 
	mcŞour
;

84 
ušt16_t
 
	mcÚŒa¡
;

85 
ušt16_t
 
	mwh™’ess
;

86 
ušt16_t
 
	md•th
;

87 
ušt16_t
 
	m·Ë‰e
;

88 
	#VIDEO_PALETTE_GREY
 1

	)

89 
	#VIDEO_PALETTE_HI240
 2

	)

90 
	#VIDEO_PALETTE_RGB565
 3

	)

91 
	#VIDEO_PALETTE_RGB24
 4

	)

92 
	#VIDEO_PALETTE_RGB32
 5

	)

93 
	#VIDEO_PALETTE_RGB555
 6

	)

94 
	#VIDEO_PALETTE_YUV422
 7

	)

95 
	#VIDEO_PALETTE_YUYV
 8

	)

96 
	#VIDEO_PALETTE_UYVY
 9

	)

97 
	#VIDEO_PALETTE_YUV420
 10

	)

98 
	#VIDEO_PALETTE_YUV411
 11

	)

99 
	#VIDEO_PALETTE_RAW
 12

	)

100 
	#VIDEO_PALETTE_YUV422P
 13

	)

101 
	#VIDEO_PALETTE_YUV411P
 14

	)

102 
	#VIDEO_PALETTE_YUV420P
 15

	)

103 
	#VIDEO_PALETTE_YUV410P
 16

	)

104 
	#VIDEO_PALETTE_PLANAR
 13

	)

105 
	#VIDEO_PALETTE_COMPONENT
 7

	)

108 
	svideo_audio


110 
	maudio
;

111 
ušt16_t
 
	mvŞume
;

112 
ušt16_t
 
	mbass
, 
	mŒebË
;

113 
ušt32_t
 
	mæags
;

114 
	#VIDEO_AUDIO_MUTE
 1

	)

115 
	#VIDEO_AUDIO_MUTABLE
 2

	)

116 
	#VIDEO_AUDIO_VOLUME
 4

	)

117 
	#VIDEO_AUDIO_BASS
 8

	)

118 
	#VIDEO_AUDIO_TREBLE
 16

	)

119 
	#VIDEO_AUDIO_BALANCE
 32

	)

120 
	mÇme
[16];

121 
	#VIDEO_SOUND_MONO
 1

	)

122 
	#VIDEO_SOUND_STEREO
 2

	)

123 
	#VIDEO_SOUND_LANG1
 4

	)

124 
	#VIDEO_SOUND_LANG2
 8

	)

125 
ušt16_t
 
	mmode
;

126 
ušt16_t
 
	mb®ªû
;

127 
ušt16_t
 
	m¡•
;

130 
	svideo_ş


132 
št32_t
 
	mx
,
	my
;

133 
št32_t
 
	mwidth
, 
	mheight
;

134 
video_ş
 *
	mÃxt
;

137 
	svideo_wšdow


139 
ušt32_t
 
	mx
,
	my
;

140 
ušt32_t
 
	mwidth
,
	mheight
;

141 
ušt32_t
 
	mchromakey
;

142 
ušt32_t
 
	mæags
;

143 
video_ş
 *
	mşs
;

144 
	mşcouÁ
;

145 
	#VIDEO_WINDOW_INTERLACE
 1

	)

146 
	#VIDEO_WINDOW_CHROMAKEY
 16

	)

147 
	#VIDEO_CLIP_BITMAP
 -1

	)

149 
	#VIDEO_CLIPMAP_SIZE
 (128 * 625)

	)

152 
	svideo_bufãr


154 *
	mba£
;

155 
	mheight
,
	mwidth
;

156 
	md•th
;

157 
	mby‹¥”lše
;

160 
	svideo_mm­


162 
	mäame
;

163 
	mheight
,
	mwidth
;

164 
	mfÜm©
;

167 
	svideo_mbuf


169 
	msize
;

170 
	mäames
;

171 
	moff£ts
[32];

174 
	svbi_fÜm©
 {

175 
ušt32_t
 
	m§m¶šg_¿‹
;

176 
ušt32_t
 
	m§m¶es_³r_lše
;

177 
ušt32_t
 
	m§m¶e_fÜm©
;

178 
št32_t
 
	m¡¬t
[2];

179 
ušt32_t
 
	mcouÁ
[2];

180 
ušt32_t
 
	mæags
;

181 
	#VBI_UNSYNC
 1

	)

182 
	#VBI_INTERLACED
 2

	)

185 
	#VIDIOCGCAP
 
	`_IOR
('v',1,
video_ÿ·b™y
è

	)

186 
	#VIDIOCGCHAN
 
	`_IOWR
('v',2,
video_chªÃl
è

	)

187 
	#VIDIOCSCHAN
 
	`_IOW
('v',3,
video_chªÃl
è

	)

188 
	#VIDIOCGTUNER
 
	`_IOWR
('v',4,
video_tuÃr
è

	)

189 
	#VIDIOCSTUNER
 
	`_IOW
('v',5,
video_tuÃr
è

	)

190 
	#VIDIOCGPICT
 
	`_IOR
('v',6,
video_piùu»
è

	)

191 
	#VIDIOCSPICT
 
	`_IOW
('v',7,
video_piùu»
è

	)

192 
	#VIDIOCCAPTURE
 
	`_IOW
('v',8,è

	)

193 
	#VIDIOCGWIN
 
	`_IOR
('v',9, 
video_wšdow
è

	)

194 
	#VIDIOCSWIN
 
	`_IOW
('v',10, 
video_wšdow
è

	)

195 
	#VIDIOCGFBUF
 
	`_IOR
('v',11, 
video_bufãr
è

	)

196 
	#VIDIOCSFBUF
 
	`_IOW
('v',12, 
video_bufãr
è

	)

197 
	#VIDIOCGFREQ
 
	`_IOR
('v',14, è

	)

198 
	#VIDIOCSFREQ
 
	`_IOW
('v',15, è

	)

199 
	#VIDIOCGAUDIO
 
	`_IOR
('v',16, 
video_audio
è

	)

200 
	#VIDIOCSAUDIO
 
	`_IOW
('v',17, 
video_audio
è

	)

201 
	#VIDIOCSYNC
 
	`_IOW
('v',18, è

	)

202 
	#VIDIOCMCAPTURE
 
	`_IOW
('v',19, 
video_mm­
è

	)

203 
	#VIDIOCGMBUF
 
	`_IOR
('v',20, 
video_mbuf
è

	)

204 
	#VIDIOCGVBIFMT
 
	`_IOR
('v',28, 
vbi_fÜm©
è

	)

205 
	#VIDIOCSVBIFMT
 
	`_IOW
('v',29, 
vbi_fÜm©
è

	)

	@/usr/include/linux/ioctl.h

1 #iâdeà
_LINUX_IOCTL_H


2 
	#_LINUX_IOCTL_H


	)

4 
	~<asm/ioùl.h
>

	@/usr/include/linux/types.h

1 #iâdeà
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty³s.h
>

6 #iâdeà
__ASSEMBLY__


8 
	~<lšux/posix_ty³s.h
>

16 #ifdeà
__CHECKER__


17 
	#__b™wi£__
 
	`__©Œibu‹__
((
b™wi£
))

	)

19 
	#__b™wi£__


	)

21 #ifdeà
__CHECK_ENDIAN__


22 
	#__b™wi£
 
__b™wi£__


	)

24 
	#__b™wi£


	)

27 
__u16
 
	t__b™wi£
 
	t__Ë16
;

28 
__u16
 
	t__b™wi£
 
	t__be16
;

29 
__u32
 
	t__b™wi£
 
	t__Ë32
;

30 
__u32
 
	t__b™wi£
 
	t__be32
;

31 
__u64
 
	t__b™wi£
 
	t__Ë64
;

32 
__u64
 
	t__b™wi£
 
	t__be64
;

34 
__u16
 
	t__b™wi£
 
	t__sum16
;

35 
__u32
 
	t__b™wi£
 
	t__wsum
;

46 
	#__®igÃd_u64
 
__u64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

47 
	#__®igÃd_be64
 
__be64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

48 
	#__®igÃd_Ë64
 
__Ë64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

30 
	#__Ãed_time_t


	)

31 
	#__Ãed_time¥ec


	)

32 
	~<time.h
>

34 #iâdeà
__pid_t_defšed


35 
__pid_t
 
	tpid_t
;

36 
	#__pid_t_defšed


	)

41 
	~<b™s/sched.h
>

43 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

46 
__BEGIN_DECLS


49 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

50 
__THROW
;

53 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

56 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

57 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

60 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

63 
	$sched_y›ld
 (è
__THROW
;

66 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

69 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

72 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

75 #ifdeà
__USE_GNU


77 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

78 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

79 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

80 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

81 
ıu£
)

	)

82 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

83 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

86 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

87 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

88 
ıu£
)

	)

89 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

90 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

92 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

93 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

94 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

95 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

97 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

98 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

99 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

101 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

103 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

104 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

105 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

107 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

110 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

111 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

112 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

116 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

117 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

120 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

121 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

124 
__END_DECLS


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@/usr/include/xine/attributes.h

26 #iâdeà
ATTRIBUTE_H_


27 
	#ATTRIBUTE_H_


	)

29 #ifdeà
XINE_COMPILE


30 
	~"cÚfigu».h
"

32 #ià
__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 95 )

33 
	#SUPPORT_ATTRIBUTE_PACKED
 1

	)

36 #ià
__GNUC__
 > 3 || (__GNUC__ =ğ3 && 
__GNUC_MINOR__
 >= 3 )

37 
	#SUPPORT_ATTRIBUTE_DEPRECATED
 1

	)

38 
	#SUPPORT_ATTRIBUTE_FORMAT
 1

	)

39 
	#SUPPORT_ATTRIBUTE_FORMAT_ARG
 1

	)

40 
	#SUPPORT_ATTRIBUTE_MALLOC
 1

	)

41 
	#SUPPORT_ATTRIBUTE_UNUSED
 1

	)

42 
	#SUPPORT_ATTRIBUTE_CONST
 1

	)

45 #ià
__GNUC__
 >= 4

46 
	#SUPPORT_ATTRIBUTE_VISIBILITY_DEFAULT
 1

	)

47 #ià
__ELF__


48 
	#SUPPORT_ATTRIBUTE_VISIBILITY_PROTECTED
 1

	)

50 
	#SUPPORT_ATTRIBUTE_SENTINEL
 1

	)

55 #ifdeà
ATTRIBUTE_ALIGNED_MAX


56 
	#ATTR_ALIGN
(
®ign
è
	`__©Œibu‹__
 ((
	`__®igÃd__
 ((
ATTRIBUTE_ALIGNED_MAX
 <‡lignè? ATTRIBUTE_ALIGNED_MAX :‡lign)))

	)

58 
	#ATTR_ALIGN
(
®ign
)

	)

62 #ià
defšed
(
XINE_LIBRARY_COMPILE
è&& defšed(
SUPPORT_ATTRIBUTE_VISIBILITY_PROTECTED
)

63 
	#XINE_PROTECTED
 
	`__©Œibu‹__
((
	`__visib™y__
("´Ùeùed")))

	)

64 #–ià
defšed
(
XINE_LIBRARY_COMPILE
è&& defšed(
SUPPORT_ATTRIBUTE_VISIBILITY_DEFAULT
)

65 
	#XINE_PROTECTED
 
	`__©Œibu‹__
((
	`__visib™y__
("deçuÉ")))

	)

67 
	#XINE_PROTECTED


	)

70 #ifdeà
SUPPORT_ATTRIBUTE_SENTINEL


71 
	#XINE_SENTINEL
 
	`__©Œibu‹__
((
__£Áš–__
))

	)

73 
	#XINE_SENTINEL


	)

76 #ià
defšed
(
SUPPORT_ATTRIBUTE_DEPRECATED
è&& !defšed(
XINE_COMPILE
)

77 
	#XINE_DEPRECATED
 
	`__©Œibu‹__
((
__d•»ÿ‹d__
))

	)

79 
	#XINE_DEPRECATED


	)

82 #iâdeà
__©Œ_unu£d


83 #ifdeà
SUPPORT_ATTRIBUTE_UNUSED


84 
	#__©Œ_unu£d
 
	`__©Œibu‹__
((
__unu£d__
))

	)

86 
	#__©Œ_unu£d


	)

91 #ifdeà
SUPPORT_ATTRIBUTE_FORMAT


92 
	#XINE_FORMAT_PRINTF
(
fmt
,
v¬
è
	`__©Œibu‹__
((
	`__fÜm©__
(
__´štf__
, fmt, v¬)))

	)

93 
	#XINE_FORMAT_SCANF
(
fmt
,
v¬
è
	`__©Œibu‹__
((
	`__fÜm©__
(
__sÿnf__
, fmt, v¬)))

	)

95 
	#XINE_FORMAT_PRINTF
(
fmt
,
v¬
)

	)

96 
	#XINE_FORMAT_SCANF
(
fmt
,
v¬
)

	)

98 #ifdeà
SUPPORT_ATTRIBUTE_FORMAT_ARG


99 
	#XINE_FORMAT_PRINTF_ARG
(
fmt
è
	`__©Œibu‹__
((
	`__fÜm©_¬g__
(fmt)))

	)

101 
	#XINE_FORMAT_PRINTF_ARG
(
fmt
)

	)

104 #ifdeà
SUPPORT_ATTRIBUTE_MALLOC


105 
	#XINE_MALLOC
 
	`__©Œibu‹__
((
__m®loc__
))

	)

107 
	#XINE_MALLOC


	)

110 #ifdeà
SUPPORT_ATTRIBUTE_PACKED


111 
	#XINE_PACKED
 
	`__©Œibu‹__
((
__·cked__
))

	)

113 
	#XINE_PACKED


	)

116 #ifdeà
SUPPORT_ATTRIBUTE_CONST


117 
	#XINE_CONST
 
	`__©Œibu‹__
((
__cÚ¡__
))

	)

119 
	#XINE_CONST


	)

	@/usr/include/xine/os_types.h

27 #iâdeà
XINE_OS_TYPES_H


28 
	#XINE_OS_TYPES_H


	)

30 #ià
defšed
(
_WIN32
è&& !defšed(
__GNUC__
)

33 
__št8
 
	tšt8_t
;

34 
	t__št8
 
	tušt8_t
;

35 
__št16
 
	tšt16_t
;

36 
	t__št16
 
	tušt16_t
;

37 
__št32
 
	tšt32_t
;

38 
	t__št32
 
	tušt32_t
;

39 
__št64
 
	tšt64_t
;

40 
	t__št64
 
	tušt64_t
;

42 #–ià
defšed
(
__MACOS__
)

44 
	~<sys/ty³s.h
>

45 
SIÁ8
 
	tšt8_t
;

46 
UIÁ8
 
	tušt8_t
;

47 
SIÁ16
 
	tšt16_t
;

48 
UIÁ16
 
	tušt16_t
;

49 
SIÁ32
 
	tšt32_t
;

50 
UIÁ32
 
	tušt32_t
;

51 
SIÁ64
 
	tšt64_t
;

52 
UIÁ64
 
	tušt64_t
;

54 #–ià
defšed
(
__MACOSX__
)

56 
	~<sys/ty³s.h
>

57 
u_št8_t
 
	tušt8_t
;

58 
u_št16_t
 
	tušt16_t
;

59 
u_št32_t
 
	tušt32_t
;

60 
u_št64_t
 
	tušt64_t
;

62 #–ià
defšed
 (
__EMX__
)

65 sigÃd 
	tšt8_t
;

66 
	tušt8_t
;

67 
	tšt16_t
;

68 
	tušt16_t
;

69 
	tšt32_t
;

70 
	tušt32_t
;

71 
	tšt64_t
;

72 
	tšt64_t
;

74 #–ià
defšed
 (
DJGPP
)

77 sigÃd 
	tšt8_t
;

78 
	tušt8_t
;

79 
	tšt16_t
;

80 
	tušt16_t
;

81 
	tšt32_t
;

82 
	tušt32_t
;

83 
	tšt64_t
;

84 
	tušt64_t
;

86 #–ià
defšed
(
R5900
)

89 sigÃd 
	tšt8_t
;

90 
	tušt8_t
;

91 
	tšt16_t
;

92 
	tšt16_t
;

93 
	tšt32_t
;

94 
	tušt32_t
;

95 
	tšt64_t
;

96 
	tšt64_t
;

105 
	~<š‰y³s.h
>

	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/error.h

19 #iâdeà
_ERROR_H


20 
	#_ERROR_H
 1

	)

22 
	~<ã©u»s.h
>

25 
__BEGIN_DECLS


31 
	$”rÜ
 (
__¡©us
, 
__”ºum
, cÚ¡ *
__fÜm©
, ...)

32 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

34 
	$”rÜ_©_lše
 (
__¡©us
, 
__”ºum
, cÚ¡ *
__âame
,

35 
__lš’o
, cÚ¡ *
__fÜm©
, ...)

36 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 5, 6)));

41 (*
”rÜ_´št_´ogÇme
) ();

44 
”rÜ_mes§ge_couÁ
;

48 
”rÜ_Úe_³r_lše
;

51 #ià
defšed
 
__ex‹º_®ways_šlše
 && defšed 
__va_¬g_·ck


52 
	~<b™s/”rÜ.h
>

55 
__END_DECLS


	@/usr/include/libavutil/avconfig.h

2 #iâdeà
AVUTIL_AVCONFIG_H


3 
	#AVUTIL_AVCONFIG_H


	)

4 
	#AV_HAVE_BIGENDIAN
 0

	)

5 
	#AV_HAVE_FAST_UNALIGNED
 1

	)

	@/usr/include/libavutil/version.h

19 #iâdeà
AVUTIL_VERSION_H


20 
	#AVUTIL_VERSION_H


	)

22 
	~"avut.h
"

39 
	#LIBAVUTIL_VERSION_MAJOR
 52

	)

40 
	#LIBAVUTIL_VERSION_MINOR
 3

	)

41 
	#LIBAVUTIL_VERSION_MICRO
 0

	)

43 
	#LIBAVUTIL_VERSION_INT
 
	`AV_VERSION_INT
(
LIBAVUTIL_VERSION_MAJOR
, \

44 
LIBAVUTIL_VERSION_MINOR
, \

45 
LIBAVUTIL_VERSION_MICRO
)

	)

46 
	#LIBAVUTIL_VERSION
 
	`AV_VERSION
(
LIBAVUTIL_VERSION_MAJOR
, \

47 
LIBAVUTIL_VERSION_MINOR
, \

48 
LIBAVUTIL_VERSION_MICRO
)

	)

49 
	#LIBAVUTIL_BUILD
 
LIBAVUTIL_VERSION_INT


	)

51 
	#LIBAVUTIL_IDENT
 "Lavu" 
	`AV_STRINGIFY
(
LIBAVUTIL_VERSION
)

	)

64 #iâdeà
FF_API_PIX_FMT


65 
	#FF_API_PIX_FMT
 (
LIBAVUTIL_VERSION_MAJOR
 < 53)

	)

67 #iâdeà
FF_API_CONTEXT_SIZE


68 
	#FF_API_CONTEXT_SIZE
 (
LIBAVUTIL_VERSION_MAJOR
 < 53)

	)

70 #iâdeà
FF_API_PIX_FMT_DESC


71 
	#FF_API_PIX_FMT_DESC
 (
LIBAVUTIL_VERSION_MAJOR
 < 53)

	)

73 #iâdeà
FF_API_AV_REVERSE


74 
	#FF_API_AV_REVERSE
 (
LIBAVUTIL_VERSION_MAJOR
 < 53)

	)

76 #iâdeà
FF_API_AUDIOCONVERT


77 
	#FF_API_AUDIOCONVERT
 (
LIBAVUTIL_VERSION_MAJOR
 < 53)

	)

79 #iâdeà
FF_API_CPU_FLAG_MMX2


80 
	#FF_API_CPU_FLAG_MMX2
 (
LIBAVUTIL_VERSION_MAJOR
 < 53)

	)

	@/usr/include/linux/posix_types.h

1 #iâdeà
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<lšux/¡ddef.h
>

21 #undeà
__NFDBITS


22 
	#__NFDBITS
 (8 * ())

	)

24 #undeà
__FD_SETSIZE


25 
	#__FD_SETSIZE
 1024

	)

27 #undeà
__FDSET_LONGS


28 
	#__FDSET_LONGS
 (
__FD_SETSIZE
/
__NFDBITS
)

	)

30 #undeà
__FDELT


31 
	#__FDELT
(
d
è((dè/ 
__NFDBITS
)

	)

33 #undeà
__FDMASK


34 
	#__FDMASK
(
d
è(1UL << ((dè% 
__NFDBITS
))

	)

37 
	mfds_b™s
 [
__FDSET_LONGS
];

38 } 
	t__k”Ãl_fd_£t
;

41 (*
	t__k”Ãl_sighªdËr_t
)();

44 
	t__k”Ãl_key_t
;

45 
	t__k”Ãl_mqd_t
;

47 
	~<asm/posix_ty³s.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/linux/stddef.h

1 #iâdeà
_LINUX_STDDEF_H


2 
	#_LINUX_STDDEF_H


	)

6 #undeà
NULL


7 #ià
defšed
(
__ılu¥lus
)

8 
	#NULL
 0

	)

10 
	#NULL
 ((*)0)

	)

	@
1
.
1
/usr/include
115
2688
agile_wrl.hpp
cap.cpp
cap_OPEL.cpp
cap_cmu.cpp
cap_dc1394.cpp
cap_dc1394_v2.cpp
cap_dshow.cpp
cap_dshow.hpp
cap_ffmpeg.cpp
cap_ffmpeg_api.hpp
cap_ffmpeg_impl.hpp
cap_giganetix.cpp
cap_gphoto2.cpp
cap_gstreamer.cpp
cap_images.cpp
cap_intelperc.cpp
cap_intelperc.hpp
cap_libv4l.cpp
cap_mjpeg_decoder.cpp
cap_mjpeg_encoder.cpp
cap_msmf.cpp
cap_msmf.hpp
cap_openni.cpp
cap_openni2.cpp
cap_pvapi.cpp
cap_qt.cpp
cap_unicap.cpp
cap_v4l.cpp
cap_vfw.cpp
cap_winrt/CaptureFrameGrabber.cpp
cap_winrt/CaptureFrameGrabber.hpp
cap_winrt/MFIncludes.hpp
cap_winrt/MediaSink.hpp
cap_winrt/MediaStreamSink.cpp
cap_winrt/MediaStreamSink.hpp
cap_winrt_bridge.cpp
cap_winrt_bridge.hpp
cap_winrt_capture.cpp
cap_winrt_capture.hpp
cap_winrt_video.cpp
cap_winrt_video.hpp
cap_ximea.cpp
cap_xine.cpp
ffmpeg_codecs.hpp
ppltasks_winrt.hpp
precomp.hpp
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/dc1394/dc1394.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/libavcodec/avcodec.h
/usr/include/libavformat/avformat.h
/usr/include/libavutil/mathematics.h
/usr/include/libavutil/opt.h
/usr/include/libraw1394/raw1394.h
/usr/include/libswscale/swscale.h
/usr/include/libv4l1.h
/usr/include/libv4l2.h
/usr/include/limits.h
/usr/include/linux/videodev2.h
/usr/include/math.h
/usr/include/pthread.h
/usr/include/semaphore.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/wchar.h
/usr/include/xine.h
/usr/include/alloca.h
/usr/include/dc1394/camera.h
/usr/include/dc1394/capture.h
/usr/include/dc1394/control.h
/usr/include/dc1394/conversions.h
/usr/include/dc1394/format7.h
/usr/include/dc1394/iso.h
/usr/include/dc1394/log.h
/usr/include/dc1394/register.h
/usr/include/dc1394/types.h
/usr/include/dc1394/utils.h
/usr/include/dc1394/video.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/inttypes.h
/usr/include/libavcodec/version.h
/usr/include/libavformat/version.h
/usr/include/libavutil/avutil.h
/usr/include/libavutil/cpu.h
/usr/include/libavutil/dict.h
/usr/include/libavutil/log.h
/usr/include/libavutil/pixfmt.h
/usr/include/libavutil/rational.h
/usr/include/libavutil/samplefmt.h
/usr/include/libavutil/time.h
/usr/include/libio.h
/usr/include/libv4l1-videodev.h
/usr/include/linux/ioctl.h
/usr/include/linux/types.h
/usr/include/sched.h
/usr/include/wctype.h
/usr/include/xine/attributes.h
/usr/include/xine/os_types.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/error.h
/usr/include/libavutil/avconfig.h
/usr/include/libavutil/version.h
/usr/include/linux/posix_types.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/linux/stddef.h
